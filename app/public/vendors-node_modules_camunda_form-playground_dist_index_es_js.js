/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkcamunda_modeler_client"] = self["webpackChunkcamunda_modeler_client"] || []).push([["vendors-node_modules_camunda_form-playground_dist_index_es_js"],{

/***/ "../node_modules/@bpmn-io/draggle/dist/draggle.js":
/*!********************************************************!*\
  !*** ../node_modules/@bpmn-io/draggle/dist/draggle.js ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ De)\n/* harmony export */ });\nfunction _e(t) {\n  return t && t.__esModule && Object.prototype.hasOwnProperty.call(t, \"default\") ? t.default : t;\n}\nvar Ne = function(n, o) {\n  return Array.prototype.slice.call(n, o);\n}, Be = typeof setImmediate == \"function\", z;\nBe ? z = function(t) {\n  setImmediate(t);\n} : z = function(t) {\n  setTimeout(t, 0);\n};\nvar Me = z, Xe = Me, Ie = function(n, o, l) {\n  n && Xe(function() {\n    n.apply(l || null, o || []);\n  });\n}, ee = Ne, Te = Ie, Ye = function(n, o) {\n  var l = o || {}, c = {};\n  return n === void 0 && (n = {}), n.on = function(d, h) {\n    return c[d] ? c[d].push(h) : c[d] = [h], n;\n  }, n.once = function(d, h) {\n    return h._once = !0, n.on(d, h), n;\n  }, n.off = function(d, h) {\n    var S = arguments.length;\n    if (S === 1)\n      delete c[d];\n    else if (S === 0)\n      c = {};\n    else {\n      var C = c[d];\n      if (!C)\n        return n;\n      C.splice(C.indexOf(h), 1);\n    }\n    return n;\n  }, n.emit = function() {\n    var d = ee(arguments);\n    return n.emitterSnapshot(d.shift()).apply(this, d);\n  }, n.emitterSnapshot = function(d) {\n    var h = (c[d] || []).slice(0);\n    return function() {\n      var S = ee(arguments), C = this || n;\n      if (d === \"error\" && l.throws !== !1 && !h.length)\n        throw S.length === 1 ? S[0] : S;\n      return h.forEach(function(E) {\n        l.async ? Te(E, S, C) : E.apply(C, S), E._once && n.off(d, E);\n      }), n;\n    };\n  }, n;\n};\nconst Le = /* @__PURE__ */ _e(Ye), te = {}, xe = \"(?:^|\\\\s)\", Re = \"(?:\\\\s|$)\";\nfunction le(t) {\n  let n = te[t];\n  return n ? n.lastIndex = 0 : te[t] = n = new RegExp(xe + t + Re, \"g\"), n;\n}\nfunction Y(t, n) {\n  const o = t.className;\n  o.length ? le(n).test(o) || (t.className += \" \" + n) : t.className = n;\n}\nfunction L(t, n) {\n  t.className = t.className.replace(le(n), \" \").trim();\n}\nconst ke = (t, n) => ({\n  containers: n,\n  moves: () => !0,\n  accepts: () => !0,\n  invalid: () => !1,\n  isContainer: () => !1,\n  transformOffset: (o) => o,\n  copy: !1,\n  copySortSource: !1,\n  revertOnSpill: !1,\n  removeOnSpill: !1,\n  direction: \"vertical\",\n  ignoreInputTextSelection: !0,\n  mirrorContainer: document.body,\n  ...t\n});\nfunction ne(t) {\n  if (t.touches !== void 0)\n    return t.touches.length;\n  if (t.which !== void 0 && t.which !== 0)\n    return t.which;\n  if (t.buttons !== void 0)\n    return t.buttons;\n  const n = t.button;\n  if (n !== void 0)\n    return n & 1 ? 1 : n & 2 ? 3 : n & 4 ? 2 : 0;\n}\nconst Ae = (t) => {\n  const n = t.getBoundingClientRect();\n  return {\n    left: n.left + re(\"scrollLeft\", \"pageXOffset\"),\n    top: n.top + re(\"scrollTop\", \"pageYOffset\")\n  };\n}, re = (t, n) => typeof global[n] < \"u\" ? global[n] : document.documentElement.clientHeight ? document.documentElement[t] : document.body[t], ie = (t = {}, n, o) => {\n  const l = t.className || \"\";\n  t.className += \" gu-hide\";\n  const c = document.elementFromPoint(n, o);\n  return t.className = l, c;\n}, oe = (t) => t.width || t.right - t.left, ce = (t) => t.height || t.bottom - t.top, v = (t) => t.parentNode === document ? null : t.parentNode, ue = (t) => [\"INPUT\", \"TEXTAREA\", \"SELECT\"].includes(t == null ? void 0 : t.tagName) || se(t), se = (t) => !t || t.contentEditable === \"false\" ? !1 : t.contentEditable === \"true\" ? !0 : se(v(t)), T = (t) => {\n  const n = () => {\n    let o = t;\n    do\n      o = o.nextSibling;\n    while (o && o.nodeType !== 1);\n    return o;\n  };\n  return t.nextElementSibling || n();\n};\nwindow.global || (window.global = window);\nconst fe = document, M = fe.documentElement;\nfunction De(t = [], n = {}) {\n  Array.isArray(t) || (n = t, t = []);\n  let o, l, c, d, h, S, C, X, E, a, x, N, I;\n  const s = ke(n, t), f = Le({\n    containers: s.containers,\n    start: ve,\n    end: G,\n    cancel: q,\n    remove: W,\n    destroy: ae,\n    canMove: ge,\n    dragging: !1\n  });\n  return s.removeOnSpill && f.on(\"over\", he).on(\"out\", be), j(), f;\n  function R(e) {\n    return f.containers.indexOf(e) !== -1 || s.isContainer(e);\n  }\n  function j(e) {\n    const r = e ? \"removeEventListener\" : \"addEventListener\";\n    M[r](\"pointerdown\", me, !0), M[r](\"pointerup\", D, !0);\n  }\n  function k(e) {\n    M[e ? \"removeEventListener\" : \"addEventListener\"](\"pointermove\", pe, !0);\n  }\n  function H(e) {\n    M[e ? \"removeEventListener\" : \"addEventListener\"](\"click\", de, !0);\n  }\n  function ae() {\n    j(!0), D({});\n  }\n  function de(e) {\n    I && e.preventDefault();\n  }\n  function me(e) {\n    if (S = e.clientX, C = e.clientY, ne(e) !== 1 || e.metaKey || e.ctrlKey)\n      return;\n    const i = e.target, u = A(i);\n    u && (I = u, k(), e.type === \"pointerdown\" && (ue(i) ? i.focus() : e.preventDefault()));\n  }\n  function pe(e) {\n    if (!I)\n      return;\n    if (ne(e) === 0) {\n      D({});\n      return;\n    }\n    if (e.clientX !== void 0 && Math.abs(e.clientX - S) <= (s.slideFactorX || 0) && e.clientY !== void 0 && Math.abs(e.clientY - C) <= (s.slideFactorY || 0))\n      return;\n    if (s.ignoreInputTextSelection) {\n      const {\n        clientX: O = 0,\n        clientY: m = 0\n      } = e, w = fe.elementFromPoint(O, m);\n      if (ue(w))\n        return;\n    }\n    const r = I;\n    k(!0), H(), G(), K(r);\n    const i = Ae(c), u = s.transformOffset(i, e, c), {\n      pageX: g = 0,\n      pageY: p = 0\n    } = e;\n    d = g - u.left, h = p - u.top, Y(a || c, \"gu-transit\"), ye(), $(e);\n  }\n  function A(e) {\n    if (f.dragging && o || R(e))\n      return;\n    const r = e;\n    for (; v(e) && R(v(e)) === !1; )\n      if (s.invalid(e, r) || (e = v(e), !e))\n        return;\n    const i = v(e);\n    if (!(!i || s.invalid(e, r) || !s.moves(e, i, r, T(e))))\n      return {\n        item: e,\n        source: i\n      };\n  }\n  function ge(e) {\n    return !!A(e);\n  }\n  function ve(e) {\n    const r = A(e);\n    r && K(r);\n  }\n  function K(e) {\n    Ee(e.item, e.source) && (a = e.item.cloneNode(!0), f.emit(\"cloned\", a, e.item, \"copy\")), l = e.source, c = e.item, X = E = T(e.item), f.dragging = !0, f.emit(\"drag\", c, l);\n  }\n  function G() {\n    if (!f.dragging)\n      return;\n    const e = a || c;\n    V(e, v(e));\n  }\n  function U() {\n    I = !1, k(!0), H(!0);\n  }\n  function D(e) {\n    if (U(), !f.dragging)\n      return;\n    const r = a || c, {\n      clientX: i = 0,\n      clientY: u = 0\n    } = e, g = ie(o, i, u), p = J(g, i, u);\n    p && (a && s.copySortSource || !a || p !== l) ? V(r, p) : s.removeOnSpill ? W() : q();\n  }\n  function V(e, r) {\n    const i = v(e);\n    a && s.copySortSource && r === l && i.removeChild(c), P(r) ? f.emit(\"cancel\", e, l, l) : f.emit(\"drop\", e, r, l, E), F();\n  }\n  function W() {\n    if (!f.dragging)\n      return;\n    const e = a || c, r = v(e);\n    r && r.removeChild(e), f.emit(a ? \"cancel\" : \"remove\", e, r, l), F();\n  }\n  function q(e) {\n    if (!f.dragging)\n      return;\n    const r = arguments.length > 0 ? e : s.revertOnSpill, i = a || c, u = v(i), g = P(u);\n    g === !1 && r && (a ? u && u.removeChild(a) : l.insertBefore(i, X)), g || r ? f.emit(\"cancel\", i, l, l) : f.emit(\"drop\", i, u, l, E), F();\n  }\n  function F() {\n    const e = a || c;\n    U(), Se(), e && L(e, \"gu-transit\"), x && clearTimeout(x), f.dragging = !1, N && f.emit(\"out\", e, N, l), f.emit(\"dragend\", e), l = c = a = X = E = x = N = null;\n  }\n  function P(e, r) {\n    let i;\n    return r !== void 0 ? i = r : o ? i = E : i = T(a || c), e === l && i === X;\n  }\n  function J(e, r, i) {\n    let u = e;\n    for (; u && !g(); )\n      u = v(u);\n    return u;\n    function g() {\n      if (R(u) === !1)\n        return !1;\n      const O = Q(u, e), m = Z(u, O, r, i);\n      return P(u, m) ? !0 : s.accepts(c, u, l, m);\n    }\n  }\n  function $(e) {\n    if (!o)\n      return;\n    e.preventDefault();\n    const {\n      clientX: r = 0,\n      clientY: i = 0\n    } = e, u = r - d, g = i - h;\n    o.style.left = u + \"px\", o.style.top = g + \"px\";\n    const p = a || c, O = ie(o, r, i);\n    let m = J(O, r, i);\n    const w = m !== null && m !== N;\n    (w || m === null) && (we(), N = m, Ce());\n    const b = v(p);\n    if (m === l && a && !s.copySortSource) {\n      b && b.removeChild(p);\n      return;\n    }\n    let y;\n    const B = Q(m, O);\n    if (B !== null)\n      y = Z(m, B, r, i);\n    else if (s.revertOnSpill === !0 && !a)\n      y = X, m = l;\n    else {\n      a && b && b.removeChild(p);\n      return;\n    }\n    (y === null && w || y !== p && y !== T(p)) && (E = y, m.insertBefore(p, y), f.emit(\"shadow\", p, m, l));\n    function _(Oe) {\n      f.emit(Oe, p, N, l);\n    }\n    function Ce() {\n      w && _(\"over\");\n    }\n    function we() {\n      N && _(\"out\");\n    }\n  }\n  function he(e) {\n    L(e, \"gu-hide\");\n  }\n  function be(e) {\n    f.dragging && Y(e, \"gu-hide\");\n  }\n  function ye() {\n    if (o)\n      return;\n    const e = c.getBoundingClientRect();\n    o = c.cloneNode(!0), o.style.width = oe(e) + \"px\", o.style.height = ce(e) + \"px\", L(o, \"gu-transit\"), Y(o, \"gu-mirror\"), s.mirrorContainer.appendChild(o), M.addEventListener(\"pointermove\", $), Y(s.mirrorContainer, \"gu-unselectable\"), f.emit(\"cloned\", o, c, \"mirror\");\n  }\n  function Se() {\n    o && (L(s.mirrorContainer, \"gu-unselectable\"), M.removeEventListener(\"pointermove\", $), v(o).removeChild(o), o = null);\n  }\n  function Q(e, r) {\n    let i = r;\n    for (; i !== e && v(i) !== e; )\n      i = v(i);\n    return i === M ? null : i;\n  }\n  function Z(e, r, i, u) {\n    const g = (typeof s.direction == \"function\" ? s.direction(c, e, l) : s.direction) === \"horizontal\";\n    return r !== e ? m() : O();\n    function O() {\n      const b = e.children.length;\n      let y, B, _;\n      for (y = 0; y < b; y++)\n        if (B = e.children[y], _ = B.getBoundingClientRect(), g && _.left + _.width / 2 > i || !g && _.top + _.height / 2 > u)\n          return B;\n      return null;\n    }\n    function m() {\n      const b = r.getBoundingClientRect();\n      return w(g ? i > b.left + oe(b) / 2 : u > b.top + ce(b) / 2);\n    }\n    function w(b) {\n      return b ? T(r) : r;\n    }\n  }\n  function Ee(e, r) {\n    return typeof s.copy == \"boolean\" ? s.copy : s.copy(e, r);\n  }\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vbm9kZV9tb2R1bGVzL0BicG1uLWlvL2RyYWdnbGUvZGlzdC9kcmFnZ2xlLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxDQUFDO0FBQ0QsaUJBQWlCO0FBQ2pCLGdDQUFnQztBQUNoQztBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEdBQUc7QUFDSDtBQUNBLDBDQUEwQztBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLDBKQUEwSjtBQUMzSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsd0JBQXdCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxXQUFXO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsdUJBQXVCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixPQUFPO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0UiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYW11bmRhLW1vZGVsZXItY2xpZW50Ly4uL25vZGVfbW9kdWxlcy9AYnBtbi1pby9kcmFnZ2xlL2Rpc3QvZHJhZ2dsZS5qcz80YWQzIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIF9lKHQpIHtcbiAgcmV0dXJuIHQgJiYgdC5fX2VzTW9kdWxlICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LCBcImRlZmF1bHRcIikgPyB0LmRlZmF1bHQgOiB0O1xufVxudmFyIE5lID0gZnVuY3Rpb24obiwgbykge1xuICByZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwobiwgbyk7XG59LCBCZSA9IHR5cGVvZiBzZXRJbW1lZGlhdGUgPT0gXCJmdW5jdGlvblwiLCB6O1xuQmUgPyB6ID0gZnVuY3Rpb24odCkge1xuICBzZXRJbW1lZGlhdGUodCk7XG59IDogeiA9IGZ1bmN0aW9uKHQpIHtcbiAgc2V0VGltZW91dCh0LCAwKTtcbn07XG52YXIgTWUgPSB6LCBYZSA9IE1lLCBJZSA9IGZ1bmN0aW9uKG4sIG8sIGwpIHtcbiAgbiAmJiBYZShmdW5jdGlvbigpIHtcbiAgICBuLmFwcGx5KGwgfHwgbnVsbCwgbyB8fCBbXSk7XG4gIH0pO1xufSwgZWUgPSBOZSwgVGUgPSBJZSwgWWUgPSBmdW5jdGlvbihuLCBvKSB7XG4gIHZhciBsID0gbyB8fCB7fSwgYyA9IHt9O1xuICByZXR1cm4gbiA9PT0gdm9pZCAwICYmIChuID0ge30pLCBuLm9uID0gZnVuY3Rpb24oZCwgaCkge1xuICAgIHJldHVybiBjW2RdID8gY1tkXS5wdXNoKGgpIDogY1tkXSA9IFtoXSwgbjtcbiAgfSwgbi5vbmNlID0gZnVuY3Rpb24oZCwgaCkge1xuICAgIHJldHVybiBoLl9vbmNlID0gITAsIG4ub24oZCwgaCksIG47XG4gIH0sIG4ub2ZmID0gZnVuY3Rpb24oZCwgaCkge1xuICAgIHZhciBTID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICBpZiAoUyA9PT0gMSlcbiAgICAgIGRlbGV0ZSBjW2RdO1xuICAgIGVsc2UgaWYgKFMgPT09IDApXG4gICAgICBjID0ge307XG4gICAgZWxzZSB7XG4gICAgICB2YXIgQyA9IGNbZF07XG4gICAgICBpZiAoIUMpXG4gICAgICAgIHJldHVybiBuO1xuICAgICAgQy5zcGxpY2UoQy5pbmRleE9mKGgpLCAxKTtcbiAgICB9XG4gICAgcmV0dXJuIG47XG4gIH0sIG4uZW1pdCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBkID0gZWUoYXJndW1lbnRzKTtcbiAgICByZXR1cm4gbi5lbWl0dGVyU25hcHNob3QoZC5zaGlmdCgpKS5hcHBseSh0aGlzLCBkKTtcbiAgfSwgbi5lbWl0dGVyU25hcHNob3QgPSBmdW5jdGlvbihkKSB7XG4gICAgdmFyIGggPSAoY1tkXSB8fCBbXSkuc2xpY2UoMCk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIFMgPSBlZShhcmd1bWVudHMpLCBDID0gdGhpcyB8fCBuO1xuICAgICAgaWYgKGQgPT09IFwiZXJyb3JcIiAmJiBsLnRocm93cyAhPT0gITEgJiYgIWgubGVuZ3RoKVxuICAgICAgICB0aHJvdyBTLmxlbmd0aCA9PT0gMSA/IFNbMF0gOiBTO1xuICAgICAgcmV0dXJuIGguZm9yRWFjaChmdW5jdGlvbihFKSB7XG4gICAgICAgIGwuYXN5bmMgPyBUZShFLCBTLCBDKSA6IEUuYXBwbHkoQywgUyksIEUuX29uY2UgJiYgbi5vZmYoZCwgRSk7XG4gICAgICB9KSwgbjtcbiAgICB9O1xuICB9LCBuO1xufTtcbmNvbnN0IExlID0gLyogQF9fUFVSRV9fICovIF9lKFllKSwgdGUgPSB7fSwgeGUgPSBcIig/Ol58XFxcXHMpXCIsIFJlID0gXCIoPzpcXFxcc3wkKVwiO1xuZnVuY3Rpb24gbGUodCkge1xuICBsZXQgbiA9IHRlW3RdO1xuICByZXR1cm4gbiA/IG4ubGFzdEluZGV4ID0gMCA6IHRlW3RdID0gbiA9IG5ldyBSZWdFeHAoeGUgKyB0ICsgUmUsIFwiZ1wiKSwgbjtcbn1cbmZ1bmN0aW9uIFkodCwgbikge1xuICBjb25zdCBvID0gdC5jbGFzc05hbWU7XG4gIG8ubGVuZ3RoID8gbGUobikudGVzdChvKSB8fCAodC5jbGFzc05hbWUgKz0gXCIgXCIgKyBuKSA6IHQuY2xhc3NOYW1lID0gbjtcbn1cbmZ1bmN0aW9uIEwodCwgbikge1xuICB0LmNsYXNzTmFtZSA9IHQuY2xhc3NOYW1lLnJlcGxhY2UobGUobiksIFwiIFwiKS50cmltKCk7XG59XG5jb25zdCBrZSA9ICh0LCBuKSA9PiAoe1xuICBjb250YWluZXJzOiBuLFxuICBtb3ZlczogKCkgPT4gITAsXG4gIGFjY2VwdHM6ICgpID0+ICEwLFxuICBpbnZhbGlkOiAoKSA9PiAhMSxcbiAgaXNDb250YWluZXI6ICgpID0+ICExLFxuICB0cmFuc2Zvcm1PZmZzZXQ6IChvKSA9PiBvLFxuICBjb3B5OiAhMSxcbiAgY29weVNvcnRTb3VyY2U6ICExLFxuICByZXZlcnRPblNwaWxsOiAhMSxcbiAgcmVtb3ZlT25TcGlsbDogITEsXG4gIGRpcmVjdGlvbjogXCJ2ZXJ0aWNhbFwiLFxuICBpZ25vcmVJbnB1dFRleHRTZWxlY3Rpb246ICEwLFxuICBtaXJyb3JDb250YWluZXI6IGRvY3VtZW50LmJvZHksXG4gIC4uLnRcbn0pO1xuZnVuY3Rpb24gbmUodCkge1xuICBpZiAodC50b3VjaGVzICE9PSB2b2lkIDApXG4gICAgcmV0dXJuIHQudG91Y2hlcy5sZW5ndGg7XG4gIGlmICh0LndoaWNoICE9PSB2b2lkIDAgJiYgdC53aGljaCAhPT0gMClcbiAgICByZXR1cm4gdC53aGljaDtcbiAgaWYgKHQuYnV0dG9ucyAhPT0gdm9pZCAwKVxuICAgIHJldHVybiB0LmJ1dHRvbnM7XG4gIGNvbnN0IG4gPSB0LmJ1dHRvbjtcbiAgaWYgKG4gIT09IHZvaWQgMClcbiAgICByZXR1cm4gbiAmIDEgPyAxIDogbiAmIDIgPyAzIDogbiAmIDQgPyAyIDogMDtcbn1cbmNvbnN0IEFlID0gKHQpID0+IHtcbiAgY29uc3QgbiA9IHQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIHJldHVybiB7XG4gICAgbGVmdDogbi5sZWZ0ICsgcmUoXCJzY3JvbGxMZWZ0XCIsIFwicGFnZVhPZmZzZXRcIiksXG4gICAgdG9wOiBuLnRvcCArIHJlKFwic2Nyb2xsVG9wXCIsIFwicGFnZVlPZmZzZXRcIilcbiAgfTtcbn0sIHJlID0gKHQsIG4pID0+IHR5cGVvZiBnbG9iYWxbbl0gPCBcInVcIiA/IGdsb2JhbFtuXSA6IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQgPyBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbdF0gOiBkb2N1bWVudC5ib2R5W3RdLCBpZSA9ICh0ID0ge30sIG4sIG8pID0+IHtcbiAgY29uc3QgbCA9IHQuY2xhc3NOYW1lIHx8IFwiXCI7XG4gIHQuY2xhc3NOYW1lICs9IFwiIGd1LWhpZGVcIjtcbiAgY29uc3QgYyA9IGRvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnQobiwgbyk7XG4gIHJldHVybiB0LmNsYXNzTmFtZSA9IGwsIGM7XG59LCBvZSA9ICh0KSA9PiB0LndpZHRoIHx8IHQucmlnaHQgLSB0LmxlZnQsIGNlID0gKHQpID0+IHQuaGVpZ2h0IHx8IHQuYm90dG9tIC0gdC50b3AsIHYgPSAodCkgPT4gdC5wYXJlbnROb2RlID09PSBkb2N1bWVudCA/IG51bGwgOiB0LnBhcmVudE5vZGUsIHVlID0gKHQpID0+IFtcIklOUFVUXCIsIFwiVEVYVEFSRUFcIiwgXCJTRUxFQ1RcIl0uaW5jbHVkZXModCA9PSBudWxsID8gdm9pZCAwIDogdC50YWdOYW1lKSB8fCBzZSh0KSwgc2UgPSAodCkgPT4gIXQgfHwgdC5jb250ZW50RWRpdGFibGUgPT09IFwiZmFsc2VcIiA/ICExIDogdC5jb250ZW50RWRpdGFibGUgPT09IFwidHJ1ZVwiID8gITAgOiBzZSh2KHQpKSwgVCA9ICh0KSA9PiB7XG4gIGNvbnN0IG4gPSAoKSA9PiB7XG4gICAgbGV0IG8gPSB0O1xuICAgIGRvXG4gICAgICBvID0gby5uZXh0U2libGluZztcbiAgICB3aGlsZSAobyAmJiBvLm5vZGVUeXBlICE9PSAxKTtcbiAgICByZXR1cm4gbztcbiAgfTtcbiAgcmV0dXJuIHQubmV4dEVsZW1lbnRTaWJsaW5nIHx8IG4oKTtcbn07XG53aW5kb3cuZ2xvYmFsIHx8ICh3aW5kb3cuZ2xvYmFsID0gd2luZG93KTtcbmNvbnN0IGZlID0gZG9jdW1lbnQsIE0gPSBmZS5kb2N1bWVudEVsZW1lbnQ7XG5mdW5jdGlvbiBEZSh0ID0gW10sIG4gPSB7fSkge1xuICBBcnJheS5pc0FycmF5KHQpIHx8IChuID0gdCwgdCA9IFtdKTtcbiAgbGV0IG8sIGwsIGMsIGQsIGgsIFMsIEMsIFgsIEUsIGEsIHgsIE4sIEk7XG4gIGNvbnN0IHMgPSBrZShuLCB0KSwgZiA9IExlKHtcbiAgICBjb250YWluZXJzOiBzLmNvbnRhaW5lcnMsXG4gICAgc3RhcnQ6IHZlLFxuICAgIGVuZDogRyxcbiAgICBjYW5jZWw6IHEsXG4gICAgcmVtb3ZlOiBXLFxuICAgIGRlc3Ryb3k6IGFlLFxuICAgIGNhbk1vdmU6IGdlLFxuICAgIGRyYWdnaW5nOiAhMVxuICB9KTtcbiAgcmV0dXJuIHMucmVtb3ZlT25TcGlsbCAmJiBmLm9uKFwib3ZlclwiLCBoZSkub24oXCJvdXRcIiwgYmUpLCBqKCksIGY7XG4gIGZ1bmN0aW9uIFIoZSkge1xuICAgIHJldHVybiBmLmNvbnRhaW5lcnMuaW5kZXhPZihlKSAhPT0gLTEgfHwgcy5pc0NvbnRhaW5lcihlKTtcbiAgfVxuICBmdW5jdGlvbiBqKGUpIHtcbiAgICBjb25zdCByID0gZSA/IFwicmVtb3ZlRXZlbnRMaXN0ZW5lclwiIDogXCJhZGRFdmVudExpc3RlbmVyXCI7XG4gICAgTVtyXShcInBvaW50ZXJkb3duXCIsIG1lLCAhMCksIE1bcl0oXCJwb2ludGVydXBcIiwgRCwgITApO1xuICB9XG4gIGZ1bmN0aW9uIGsoZSkge1xuICAgIE1bZSA/IFwicmVtb3ZlRXZlbnRMaXN0ZW5lclwiIDogXCJhZGRFdmVudExpc3RlbmVyXCJdKFwicG9pbnRlcm1vdmVcIiwgcGUsICEwKTtcbiAgfVxuICBmdW5jdGlvbiBIKGUpIHtcbiAgICBNW2UgPyBcInJlbW92ZUV2ZW50TGlzdGVuZXJcIiA6IFwiYWRkRXZlbnRMaXN0ZW5lclwiXShcImNsaWNrXCIsIGRlLCAhMCk7XG4gIH1cbiAgZnVuY3Rpb24gYWUoKSB7XG4gICAgaighMCksIEQoe30pO1xuICB9XG4gIGZ1bmN0aW9uIGRlKGUpIHtcbiAgICBJICYmIGUucHJldmVudERlZmF1bHQoKTtcbiAgfVxuICBmdW5jdGlvbiBtZShlKSB7XG4gICAgaWYgKFMgPSBlLmNsaWVudFgsIEMgPSBlLmNsaWVudFksIG5lKGUpICE9PSAxIHx8IGUubWV0YUtleSB8fCBlLmN0cmxLZXkpXG4gICAgICByZXR1cm47XG4gICAgY29uc3QgaSA9IGUudGFyZ2V0LCB1ID0gQShpKTtcbiAgICB1ICYmIChJID0gdSwgaygpLCBlLnR5cGUgPT09IFwicG9pbnRlcmRvd25cIiAmJiAodWUoaSkgPyBpLmZvY3VzKCkgOiBlLnByZXZlbnREZWZhdWx0KCkpKTtcbiAgfVxuICBmdW5jdGlvbiBwZShlKSB7XG4gICAgaWYgKCFJKVxuICAgICAgcmV0dXJuO1xuICAgIGlmIChuZShlKSA9PT0gMCkge1xuICAgICAgRCh7fSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChlLmNsaWVudFggIT09IHZvaWQgMCAmJiBNYXRoLmFicyhlLmNsaWVudFggLSBTKSA8PSAocy5zbGlkZUZhY3RvclggfHwgMCkgJiYgZS5jbGllbnRZICE9PSB2b2lkIDAgJiYgTWF0aC5hYnMoZS5jbGllbnRZIC0gQykgPD0gKHMuc2xpZGVGYWN0b3JZIHx8IDApKVxuICAgICAgcmV0dXJuO1xuICAgIGlmIChzLmlnbm9yZUlucHV0VGV4dFNlbGVjdGlvbikge1xuICAgICAgY29uc3Qge1xuICAgICAgICBjbGllbnRYOiBPID0gMCxcbiAgICAgICAgY2xpZW50WTogbSA9IDBcbiAgICAgIH0gPSBlLCB3ID0gZmUuZWxlbWVudEZyb21Qb2ludChPLCBtKTtcbiAgICAgIGlmICh1ZSh3KSlcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCByID0gSTtcbiAgICBrKCEwKSwgSCgpLCBHKCksIEsocik7XG4gICAgY29uc3QgaSA9IEFlKGMpLCB1ID0gcy50cmFuc2Zvcm1PZmZzZXQoaSwgZSwgYyksIHtcbiAgICAgIHBhZ2VYOiBnID0gMCxcbiAgICAgIHBhZ2VZOiBwID0gMFxuICAgIH0gPSBlO1xuICAgIGQgPSBnIC0gdS5sZWZ0LCBoID0gcCAtIHUudG9wLCBZKGEgfHwgYywgXCJndS10cmFuc2l0XCIpLCB5ZSgpLCAkKGUpO1xuICB9XG4gIGZ1bmN0aW9uIEEoZSkge1xuICAgIGlmIChmLmRyYWdnaW5nICYmIG8gfHwgUihlKSlcbiAgICAgIHJldHVybjtcbiAgICBjb25zdCByID0gZTtcbiAgICBmb3IgKDsgdihlKSAmJiBSKHYoZSkpID09PSAhMTsgKVxuICAgICAgaWYgKHMuaW52YWxpZChlLCByKSB8fCAoZSA9IHYoZSksICFlKSlcbiAgICAgICAgcmV0dXJuO1xuICAgIGNvbnN0IGkgPSB2KGUpO1xuICAgIGlmICghKCFpIHx8IHMuaW52YWxpZChlLCByKSB8fCAhcy5tb3ZlcyhlLCBpLCByLCBUKGUpKSkpXG4gICAgICByZXR1cm4ge1xuICAgICAgICBpdGVtOiBlLFxuICAgICAgICBzb3VyY2U6IGlcbiAgICAgIH07XG4gIH1cbiAgZnVuY3Rpb24gZ2UoZSkge1xuICAgIHJldHVybiAhIUEoZSk7XG4gIH1cbiAgZnVuY3Rpb24gdmUoZSkge1xuICAgIGNvbnN0IHIgPSBBKGUpO1xuICAgIHIgJiYgSyhyKTtcbiAgfVxuICBmdW5jdGlvbiBLKGUpIHtcbiAgICBFZShlLml0ZW0sIGUuc291cmNlKSAmJiAoYSA9IGUuaXRlbS5jbG9uZU5vZGUoITApLCBmLmVtaXQoXCJjbG9uZWRcIiwgYSwgZS5pdGVtLCBcImNvcHlcIikpLCBsID0gZS5zb3VyY2UsIGMgPSBlLml0ZW0sIFggPSBFID0gVChlLml0ZW0pLCBmLmRyYWdnaW5nID0gITAsIGYuZW1pdChcImRyYWdcIiwgYywgbCk7XG4gIH1cbiAgZnVuY3Rpb24gRygpIHtcbiAgICBpZiAoIWYuZHJhZ2dpbmcpXG4gICAgICByZXR1cm47XG4gICAgY29uc3QgZSA9IGEgfHwgYztcbiAgICBWKGUsIHYoZSkpO1xuICB9XG4gIGZ1bmN0aW9uIFUoKSB7XG4gICAgSSA9ICExLCBrKCEwKSwgSCghMCk7XG4gIH1cbiAgZnVuY3Rpb24gRChlKSB7XG4gICAgaWYgKFUoKSwgIWYuZHJhZ2dpbmcpXG4gICAgICByZXR1cm47XG4gICAgY29uc3QgciA9IGEgfHwgYywge1xuICAgICAgY2xpZW50WDogaSA9IDAsXG4gICAgICBjbGllbnRZOiB1ID0gMFxuICAgIH0gPSBlLCBnID0gaWUobywgaSwgdSksIHAgPSBKKGcsIGksIHUpO1xuICAgIHAgJiYgKGEgJiYgcy5jb3B5U29ydFNvdXJjZSB8fCAhYSB8fCBwICE9PSBsKSA/IFYociwgcCkgOiBzLnJlbW92ZU9uU3BpbGwgPyBXKCkgOiBxKCk7XG4gIH1cbiAgZnVuY3Rpb24gVihlLCByKSB7XG4gICAgY29uc3QgaSA9IHYoZSk7XG4gICAgYSAmJiBzLmNvcHlTb3J0U291cmNlICYmIHIgPT09IGwgJiYgaS5yZW1vdmVDaGlsZChjKSwgUChyKSA/IGYuZW1pdChcImNhbmNlbFwiLCBlLCBsLCBsKSA6IGYuZW1pdChcImRyb3BcIiwgZSwgciwgbCwgRSksIEYoKTtcbiAgfVxuICBmdW5jdGlvbiBXKCkge1xuICAgIGlmICghZi5kcmFnZ2luZylcbiAgICAgIHJldHVybjtcbiAgICBjb25zdCBlID0gYSB8fCBjLCByID0gdihlKTtcbiAgICByICYmIHIucmVtb3ZlQ2hpbGQoZSksIGYuZW1pdChhID8gXCJjYW5jZWxcIiA6IFwicmVtb3ZlXCIsIGUsIHIsIGwpLCBGKCk7XG4gIH1cbiAgZnVuY3Rpb24gcShlKSB7XG4gICAgaWYgKCFmLmRyYWdnaW5nKVxuICAgICAgcmV0dXJuO1xuICAgIGNvbnN0IHIgPSBhcmd1bWVudHMubGVuZ3RoID4gMCA/IGUgOiBzLnJldmVydE9uU3BpbGwsIGkgPSBhIHx8IGMsIHUgPSB2KGkpLCBnID0gUCh1KTtcbiAgICBnID09PSAhMSAmJiByICYmIChhID8gdSAmJiB1LnJlbW92ZUNoaWxkKGEpIDogbC5pbnNlcnRCZWZvcmUoaSwgWCkpLCBnIHx8IHIgPyBmLmVtaXQoXCJjYW5jZWxcIiwgaSwgbCwgbCkgOiBmLmVtaXQoXCJkcm9wXCIsIGksIHUsIGwsIEUpLCBGKCk7XG4gIH1cbiAgZnVuY3Rpb24gRigpIHtcbiAgICBjb25zdCBlID0gYSB8fCBjO1xuICAgIFUoKSwgU2UoKSwgZSAmJiBMKGUsIFwiZ3UtdHJhbnNpdFwiKSwgeCAmJiBjbGVhclRpbWVvdXQoeCksIGYuZHJhZ2dpbmcgPSAhMSwgTiAmJiBmLmVtaXQoXCJvdXRcIiwgZSwgTiwgbCksIGYuZW1pdChcImRyYWdlbmRcIiwgZSksIGwgPSBjID0gYSA9IFggPSBFID0geCA9IE4gPSBudWxsO1xuICB9XG4gIGZ1bmN0aW9uIFAoZSwgcikge1xuICAgIGxldCBpO1xuICAgIHJldHVybiByICE9PSB2b2lkIDAgPyBpID0gciA6IG8gPyBpID0gRSA6IGkgPSBUKGEgfHwgYyksIGUgPT09IGwgJiYgaSA9PT0gWDtcbiAgfVxuICBmdW5jdGlvbiBKKGUsIHIsIGkpIHtcbiAgICBsZXQgdSA9IGU7XG4gICAgZm9yICg7IHUgJiYgIWcoKTsgKVxuICAgICAgdSA9IHYodSk7XG4gICAgcmV0dXJuIHU7XG4gICAgZnVuY3Rpb24gZygpIHtcbiAgICAgIGlmIChSKHUpID09PSAhMSlcbiAgICAgICAgcmV0dXJuICExO1xuICAgICAgY29uc3QgTyA9IFEodSwgZSksIG0gPSBaKHUsIE8sIHIsIGkpO1xuICAgICAgcmV0dXJuIFAodSwgbSkgPyAhMCA6IHMuYWNjZXB0cyhjLCB1LCBsLCBtKTtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gJChlKSB7XG4gICAgaWYgKCFvKVxuICAgICAgcmV0dXJuO1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCB7XG4gICAgICBjbGllbnRYOiByID0gMCxcbiAgICAgIGNsaWVudFk6IGkgPSAwXG4gICAgfSA9IGUsIHUgPSByIC0gZCwgZyA9IGkgLSBoO1xuICAgIG8uc3R5bGUubGVmdCA9IHUgKyBcInB4XCIsIG8uc3R5bGUudG9wID0gZyArIFwicHhcIjtcbiAgICBjb25zdCBwID0gYSB8fCBjLCBPID0gaWUobywgciwgaSk7XG4gICAgbGV0IG0gPSBKKE8sIHIsIGkpO1xuICAgIGNvbnN0IHcgPSBtICE9PSBudWxsICYmIG0gIT09IE47XG4gICAgKHcgfHwgbSA9PT0gbnVsbCkgJiYgKHdlKCksIE4gPSBtLCBDZSgpKTtcbiAgICBjb25zdCBiID0gdihwKTtcbiAgICBpZiAobSA9PT0gbCAmJiBhICYmICFzLmNvcHlTb3J0U291cmNlKSB7XG4gICAgICBiICYmIGIucmVtb3ZlQ2hpbGQocCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGxldCB5O1xuICAgIGNvbnN0IEIgPSBRKG0sIE8pO1xuICAgIGlmIChCICE9PSBudWxsKVxuICAgICAgeSA9IFoobSwgQiwgciwgaSk7XG4gICAgZWxzZSBpZiAocy5yZXZlcnRPblNwaWxsID09PSAhMCAmJiAhYSlcbiAgICAgIHkgPSBYLCBtID0gbDtcbiAgICBlbHNlIHtcbiAgICAgIGEgJiYgYiAmJiBiLnJlbW92ZUNoaWxkKHApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAoeSA9PT0gbnVsbCAmJiB3IHx8IHkgIT09IHAgJiYgeSAhPT0gVChwKSkgJiYgKEUgPSB5LCBtLmluc2VydEJlZm9yZShwLCB5KSwgZi5lbWl0KFwic2hhZG93XCIsIHAsIG0sIGwpKTtcbiAgICBmdW5jdGlvbiBfKE9lKSB7XG4gICAgICBmLmVtaXQoT2UsIHAsIE4sIGwpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBDZSgpIHtcbiAgICAgIHcgJiYgXyhcIm92ZXJcIik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHdlKCkge1xuICAgICAgTiAmJiBfKFwib3V0XCIpO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBoZShlKSB7XG4gICAgTChlLCBcImd1LWhpZGVcIik7XG4gIH1cbiAgZnVuY3Rpb24gYmUoZSkge1xuICAgIGYuZHJhZ2dpbmcgJiYgWShlLCBcImd1LWhpZGVcIik7XG4gIH1cbiAgZnVuY3Rpb24geWUoKSB7XG4gICAgaWYgKG8pXG4gICAgICByZXR1cm47XG4gICAgY29uc3QgZSA9IGMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgbyA9IGMuY2xvbmVOb2RlKCEwKSwgby5zdHlsZS53aWR0aCA9IG9lKGUpICsgXCJweFwiLCBvLnN0eWxlLmhlaWdodCA9IGNlKGUpICsgXCJweFwiLCBMKG8sIFwiZ3UtdHJhbnNpdFwiKSwgWShvLCBcImd1LW1pcnJvclwiKSwgcy5taXJyb3JDb250YWluZXIuYXBwZW5kQ2hpbGQobyksIE0uYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJtb3ZlXCIsICQpLCBZKHMubWlycm9yQ29udGFpbmVyLCBcImd1LXVuc2VsZWN0YWJsZVwiKSwgZi5lbWl0KFwiY2xvbmVkXCIsIG8sIGMsIFwibWlycm9yXCIpO1xuICB9XG4gIGZ1bmN0aW9uIFNlKCkge1xuICAgIG8gJiYgKEwocy5taXJyb3JDb250YWluZXIsIFwiZ3UtdW5zZWxlY3RhYmxlXCIpLCBNLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb2ludGVybW92ZVwiLCAkKSwgdihvKS5yZW1vdmVDaGlsZChvKSwgbyA9IG51bGwpO1xuICB9XG4gIGZ1bmN0aW9uIFEoZSwgcikge1xuICAgIGxldCBpID0gcjtcbiAgICBmb3IgKDsgaSAhPT0gZSAmJiB2KGkpICE9PSBlOyApXG4gICAgICBpID0gdihpKTtcbiAgICByZXR1cm4gaSA9PT0gTSA/IG51bGwgOiBpO1xuICB9XG4gIGZ1bmN0aW9uIFooZSwgciwgaSwgdSkge1xuICAgIGNvbnN0IGcgPSAodHlwZW9mIHMuZGlyZWN0aW9uID09IFwiZnVuY3Rpb25cIiA/IHMuZGlyZWN0aW9uKGMsIGUsIGwpIDogcy5kaXJlY3Rpb24pID09PSBcImhvcml6b250YWxcIjtcbiAgICByZXR1cm4gciAhPT0gZSA/IG0oKSA6IE8oKTtcbiAgICBmdW5jdGlvbiBPKCkge1xuICAgICAgY29uc3QgYiA9IGUuY2hpbGRyZW4ubGVuZ3RoO1xuICAgICAgbGV0IHksIEIsIF87XG4gICAgICBmb3IgKHkgPSAwOyB5IDwgYjsgeSsrKVxuICAgICAgICBpZiAoQiA9IGUuY2hpbGRyZW5beV0sIF8gPSBCLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCBnICYmIF8ubGVmdCArIF8ud2lkdGggLyAyID4gaSB8fCAhZyAmJiBfLnRvcCArIF8uaGVpZ2h0IC8gMiA+IHUpXG4gICAgICAgICAgcmV0dXJuIEI7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgZnVuY3Rpb24gbSgpIHtcbiAgICAgIGNvbnN0IGIgPSByLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgcmV0dXJuIHcoZyA/IGkgPiBiLmxlZnQgKyBvZShiKSAvIDIgOiB1ID4gYi50b3AgKyBjZShiKSAvIDIpO1xuICAgIH1cbiAgICBmdW5jdGlvbiB3KGIpIHtcbiAgICAgIHJldHVybiBiID8gVChyKSA6IHI7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIEVlKGUsIHIpIHtcbiAgICByZXR1cm4gdHlwZW9mIHMuY29weSA9PSBcImJvb2xlYW5cIiA/IHMuY29weSA6IHMuY29weShlLCByKTtcbiAgfVxufVxuZXhwb3J0IHtcbiAgRGUgYXMgZGVmYXVsdFxufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../node_modules/@bpmn-io/draggle/dist/draggle.js\n\n}");

/***/ }),

/***/ "../node_modules/@bpmn-io/form-js-editor/dist/index.es.js":
/*!****************************************************************!*\
  !*** ../node_modules/@bpmn-io/form-js-editor/dist/index.es.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FormEditor: () => (/* binding */ FormEditor),\n/* harmony export */   createFormEditor: () => (/* binding */ createFormEditor),\n/* harmony export */   schemaVersion: () => (/* reexport safe */ _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.schemaVersion),\n/* harmony export */   useDebounce: () => (/* binding */ useDebounce$1),\n/* harmony export */   usePrevious: () => (/* binding */ usePrevious$1),\n/* harmony export */   usePropertiesPanelService: () => (/* binding */ useService),\n/* harmony export */   useService: () => (/* binding */ useService$1),\n/* harmony export */   useVariables: () => (/* binding */ useVariables)\n/* harmony export */ });\n/* harmony import */ var ids__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ids */ \"../node_modules/ids/dist/index.esm.js\");\n/* harmony import */ var _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @bpmn-io/form-js-viewer */ \"../node_modules/@bpmn-io/form-js-viewer/dist/index.es.js\");\n/* harmony import */ var min_dash__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! min-dash */ \"../node_modules/@bpmn-io/form-js-editor/node_modules/min-dash/dist/index.esm.js\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! classnames */ \"../node_modules/classnames/index.js\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! preact/jsx-runtime */ \"../node_modules/preact/jsx-runtime/dist/jsxRuntime.module.js\");\n/* harmony import */ var preact_hooks__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! preact/hooks */ \"../node_modules/preact/hooks/dist/hooks.module.js\");\n/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! preact */ \"../node_modules/preact/dist/preact.module.js\");\n/* harmony import */ var preact_compat__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! preact/compat */ \"../node_modules/preact/compat/dist/compat.module.js\");\n/* harmony import */ var _bpmn_io_draggle__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @bpmn-io/draggle */ \"../node_modules/@bpmn-io/draggle/dist/draggle.js\");\n/* harmony import */ var min_dom__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! min-dom */ \"../node_modules/@bpmn-io/form-js-editor/node_modules/min-dom/dist/index.esm.js\");\n/* harmony import */ var array_move__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! array-move */ \"../node_modules/array-move/index.js\");\n/* harmony import */ var feelers__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! feelers */ \"../node_modules/feelers/dist/index.mjs\");\n/* harmony import */ var _bpmn_io_feel_editor__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @bpmn-io/feel-editor */ \"../node_modules/@bpmn-io/feel-editor/dist/index.js\");\n/* harmony import */ var _codemirror_view__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @codemirror/view */ \"../node_modules/@codemirror/view/dist/index.js\");\n/* harmony import */ var focus_trap__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! focus-trap */ \"../node_modules/focus-trap/dist/focus-trap.esm.js\");\n/* harmony import */ var big_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! big.js */ \"../node_modules/@bpmn-io/form-js-editor/node_modules/big.js/big.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar FN_REF = '__fn';\nvar DEFAULT_PRIORITY$3 = 1000;\nvar slice = Array.prototype.slice;\n\n/**\n * @typedef { {\n *   stopPropagation(): void;\n *   preventDefault(): void;\n *   cancelBubble: boolean;\n *   defaultPrevented: boolean;\n *   returnValue: any;\n * } } Event\n */\n\n/**\n * @template E\n *\n * @typedef { (event: E & Event, ...any) => any } EventBusEventCallback\n */\n\n/**\n * @typedef { {\n *  priority: number;\n *  next: EventBusListener | null;\n *  callback: EventBusEventCallback<any>;\n * } } EventBusListener\n */\n\n/**\n * A general purpose event bus.\n *\n * This component is used to communicate across a diagram instance.\n * Other parts of a diagram can use it to listen to and broadcast events.\n *\n *\n * ## Registering for Events\n *\n * The event bus provides the {@link EventBus#on} and {@link EventBus#once}\n * methods to register for events. {@link EventBus#off} can be used to\n * remove event registrations. Listeners receive an instance of {@link Event}\n * as the first argument. It allows them to hook into the event execution.\n *\n * ```javascript\n *\n * // listen for event\n * eventBus.on('foo', function(event) {\n *\n *   // access event type\n *   event.type; // 'foo'\n *\n *   // stop propagation to other listeners\n *   event.stopPropagation();\n *\n *   // prevent event default\n *   event.preventDefault();\n * });\n *\n * // listen for event with custom payload\n * eventBus.on('bar', function(event, payload) {\n *   console.log(payload);\n * });\n *\n * // listen for event returning value\n * eventBus.on('foobar', function(event) {\n *\n *   // stop event propagation + prevent default\n *   return false;\n *\n *   // stop event propagation + return custom result\n *   return {\n *     complex: 'listening result'\n *   };\n * });\n *\n *\n * // listen with custom priority (default=1000, higher is better)\n * eventBus.on('priorityfoo', 1500, function(event) {\n *   console.log('invoked first!');\n * });\n *\n *\n * // listen for event and pass the context (`this`)\n * eventBus.on('foobar', function(event) {\n *   this.foo();\n * }, this);\n * ```\n *\n *\n * ## Emitting Events\n *\n * Events can be emitted via the event bus using {@link EventBus#fire}.\n *\n * ```javascript\n *\n * // false indicates that the default action\n * // was prevented by listeners\n * if (eventBus.fire('foo') === false) {\n *   console.log('default has been prevented!');\n * };\n *\n *\n * // custom args + return value listener\n * eventBus.on('sum', function(event, a, b) {\n *   return a + b;\n * });\n *\n * // you can pass custom arguments + retrieve result values.\n * var sum = eventBus.fire('sum', 1, 2);\n * console.log(sum); // 3\n * ```\n *\n * @template [EventMap=null]\n */\nfunction EventBus() {\n  /**\n   * @type { Record<string, EventBusListener> }\n   */\n  this._listeners = {};\n\n  // cleanup on destroy on lowest priority to allow\n  // message passing until the bitter end\n  this.on('diagram.destroy', 1, this._destroy, this);\n}\n\n/**\n * @overlord\n *\n * Register an event listener for events with the given name.\n *\n * The callback will be invoked with `event, ...additionalArguments`\n * that have been passed to {@link EventBus#fire}.\n *\n * Returning false from a listener will prevent the events default action\n * (if any is specified). To stop an event from being processed further in\n * other listeners execute {@link Event#stopPropagation}.\n *\n * Returning anything but `undefined` from a listener will stop the listener propagation.\n *\n * @template T\n *\n * @param {string|string[]} events to subscribe to\n * @param {number} [priority=1000] listen priority\n * @param {EventBusEventCallback<T>} callback\n * @param {any} [that] callback context\n */\n/**\n * Register an event listener for events with the given name.\n *\n * The callback will be invoked with `event, ...additionalArguments`\n * that have been passed to {@link EventBus#fire}.\n *\n * Returning false from a listener will prevent the events default action\n * (if any is specified). To stop an event from being processed further in\n * other listeners execute {@link Event#stopPropagation}.\n *\n * Returning anything but `undefined` from a listener will stop the listener propagation.\n *\n * @template {keyof EventMap} EventName\n *\n * @param {EventName} events to subscribe to\n * @param {number} [priority=1000] listen priority\n * @param {EventBusEventCallback<EventMap[EventName]>} callback\n * @param {any} [that] callback context\n */\nEventBus.prototype.on = function (events, priority, callback, that) {\n  events = (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isArray)(events) ? events : [events];\n  if ((0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isFunction)(priority)) {\n    that = callback;\n    callback = priority;\n    priority = DEFAULT_PRIORITY$3;\n  }\n  if (!(0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isNumber)(priority)) {\n    throw new Error('priority must be a number');\n  }\n  var actualCallback = callback;\n  if (that) {\n    actualCallback = (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.bind)(callback, that);\n\n    // make sure we remember and are able to remove\n    // bound callbacks via {@link #off} using the original\n    // callback\n    actualCallback[FN_REF] = callback[FN_REF] || callback;\n  }\n  var self = this;\n  events.forEach(function (e) {\n    self._addListener(e, {\n      priority: priority,\n      callback: actualCallback,\n      next: null\n    });\n  });\n};\n\n/**\n * @overlord\n *\n * Register an event listener that is called only once.\n *\n * @template T\n *\n * @param {string|string[]} events to subscribe to\n * @param {number} [priority=1000] the listen priority\n * @param {EventBusEventCallback<T>} callback\n * @param {any} [that] callback context\n */\n/**\n * Register an event listener that is called only once.\n *\n * @template {keyof EventMap} EventName\n *\n * @param {EventName} events to subscribe to\n * @param {number} [priority=1000] listen priority\n * @param {EventBusEventCallback<EventMap[EventName]>} callback\n * @param {any} [that] callback context\n */\nEventBus.prototype.once = function (events, priority, callback, that) {\n  var self = this;\n  if ((0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isFunction)(priority)) {\n    that = callback;\n    callback = priority;\n    priority = DEFAULT_PRIORITY$3;\n  }\n  if (!(0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isNumber)(priority)) {\n    throw new Error('priority must be a number');\n  }\n  function wrappedCallback() {\n    wrappedCallback.__isTomb = true;\n    var result = callback.apply(that, arguments);\n    self.off(events, wrappedCallback);\n    return result;\n  }\n\n  // make sure we remember and are able to remove\n  // bound callbacks via {@link #off} using the original\n  // callback\n  wrappedCallback[FN_REF] = callback;\n  this.on(events, priority, wrappedCallback);\n};\n\n/**\n * Removes event listeners by event and callback.\n *\n * If no callback is given, all listeners for a given event name are being removed.\n *\n * @param {string|string[]} events\n * @param {EventBusEventCallback<unknown>} [callback]\n */\nEventBus.prototype.off = function (events, callback) {\n  events = (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isArray)(events) ? events : [events];\n  var self = this;\n  events.forEach(function (event) {\n    self._removeListener(event, callback);\n  });\n};\n\n/**\n * Create an event recognized be the event bus.\n *\n * @param {Object} data Event data.\n *\n * @return {Event} An event that will be recognized by the event bus.\n */\nEventBus.prototype.createEvent = function (data) {\n  var event = new InternalEvent();\n  event.init(data);\n  return event;\n};\n\n/**\n * Fires an event.\n *\n * @example\n *\n * ```javascript\n * // fire event by name\n * events.fire('foo');\n *\n * // fire event object with nested type\n * var event = { type: 'foo' };\n * events.fire(event);\n *\n * // fire event with explicit type\n * var event = { x: 10, y: 20 };\n * events.fire('element.moved', event);\n *\n * // pass additional arguments to the event\n * events.on('foo', function(event, bar) {\n *   alert(bar);\n * });\n *\n * events.fire({ type: 'foo' }, 'I am bar!');\n * ```\n *\n * @param {string} [type] event type\n * @param {Object} [data] event or event data\n * @param {...any} [args] additional arguments the callback will be called with.\n *\n * @return {any} The return value. Will be set to `false` if the default was prevented.\n */\nEventBus.prototype.fire = function (type, data) {\n  var event, firstListener, returnValue, args;\n  args = slice.call(arguments);\n  if (typeof type === 'object') {\n    data = type;\n    type = data.type;\n  }\n  if (!type) {\n    throw new Error('no event type specified');\n  }\n  firstListener = this._listeners[type];\n  if (!firstListener) {\n    return;\n  }\n\n  // we make sure we fire instances of our home made\n  // events here. We wrap them only once, though\n  if (data instanceof InternalEvent) {\n    // we are fine, we alread have an event\n    event = data;\n  } else {\n    event = this.createEvent(data);\n  }\n\n  // ensure we pass the event as the first parameter\n  args[0] = event;\n\n  // original event type (in case we delegate)\n  var originalType = event.type;\n\n  // update event type before delegation\n  if (type !== originalType) {\n    event.type = type;\n  }\n  try {\n    returnValue = this._invokeListeners(event, args, firstListener);\n  } finally {\n    // reset event type after delegation\n    if (type !== originalType) {\n      event.type = originalType;\n    }\n  }\n\n  // set the return value to false if the event default\n  // got prevented and no other return value exists\n  if (returnValue === undefined && event.defaultPrevented) {\n    returnValue = false;\n  }\n  return returnValue;\n};\n\n/**\n * Handle an error by firing an event.\n *\n * @param {Error} error The error to be handled.\n *\n * @return {boolean} Whether the error was handled.\n */\nEventBus.prototype.handleError = function (error) {\n  return this.fire('error', {\n    error: error\n  }) === false;\n};\nEventBus.prototype._destroy = function () {\n  this._listeners = {};\n};\n\n/**\n * @param {Event} event\n * @param {any[]} args\n * @param {EventBusListener} listener\n *\n * @return {any}\n */\nEventBus.prototype._invokeListeners = function (event, args, listener) {\n  var returnValue;\n  while (listener) {\n    // handle stopped propagation\n    if (event.cancelBubble) {\n      break;\n    }\n    returnValue = this._invokeListener(event, args, listener);\n    listener = listener.next;\n  }\n  return returnValue;\n};\n\n/**\n * @param {Event} event\n * @param {any[]} args\n * @param {EventBusListener} listener\n *\n * @return {any}\n */\nEventBus.prototype._invokeListener = function (event, args, listener) {\n  var returnValue;\n  if (listener.callback.__isTomb) {\n    return returnValue;\n  }\n  try {\n    // returning false prevents the default action\n    returnValue = invokeFunction(listener.callback, args);\n\n    // stop propagation on return value\n    if (returnValue !== undefined) {\n      event.returnValue = returnValue;\n      event.stopPropagation();\n    }\n\n    // prevent default on return false\n    if (returnValue === false) {\n      event.preventDefault();\n    }\n  } catch (error) {\n    if (!this.handleError(error)) {\n      console.error('unhandled error in event listener', error);\n      throw error;\n    }\n  }\n  return returnValue;\n};\n\n/**\n * Add new listener with a certain priority to the list\n * of listeners (for the given event).\n *\n * The semantics of listener registration / listener execution are\n * first register, first serve: New listeners will always be inserted\n * after existing listeners with the same priority.\n *\n * Example: Inserting two listeners with priority 1000 and 1300\n *\n *    * before: [ 1500, 1500, 1000, 1000 ]\n *    * after: [ 1500, 1500, (new=1300), 1000, 1000, (new=1000) ]\n *\n * @param {string} event\n * @param {EventBusListener} newListener\n */\nEventBus.prototype._addListener = function (event, newListener) {\n  var listener = this._getListeners(event),\n    previousListener;\n\n  // no prior listeners\n  if (!listener) {\n    this._setListeners(event, newListener);\n    return;\n  }\n\n  // ensure we order listeners by priority from\n  // 0 (high) to n > 0 (low)\n  while (listener) {\n    if (listener.priority < newListener.priority) {\n      newListener.next = listener;\n      if (previousListener) {\n        previousListener.next = newListener;\n      } else {\n        this._setListeners(event, newListener);\n      }\n      return;\n    }\n    previousListener = listener;\n    listener = listener.next;\n  }\n\n  // add new listener to back\n  previousListener.next = newListener;\n};\n\n/**\n * @param {string} name\n *\n * @return {EventBusListener}\n */\nEventBus.prototype._getListeners = function (name) {\n  return this._listeners[name];\n};\n\n/**\n * @param {string} name\n * @param {EventBusListener} listener\n */\nEventBus.prototype._setListeners = function (name, listener) {\n  this._listeners[name] = listener;\n};\nEventBus.prototype._removeListener = function (event, callback) {\n  var listener = this._getListeners(event),\n    nextListener,\n    previousListener,\n    listenerCallback;\n  if (!callback) {\n    // clear listeners\n    this._setListeners(event, null);\n    return;\n  }\n  while (listener) {\n    nextListener = listener.next;\n    listenerCallback = listener.callback;\n    if (listenerCallback === callback || listenerCallback[FN_REF] === callback) {\n      if (previousListener) {\n        previousListener.next = nextListener;\n      } else {\n        // new first listener\n        this._setListeners(event, nextListener);\n      }\n    }\n    previousListener = listener;\n    listener = nextListener;\n  }\n};\n\n/**\n * A event that is emitted via the event bus.\n */\nfunction InternalEvent() {}\nInternalEvent.prototype.stopPropagation = function () {\n  this.cancelBubble = true;\n};\nInternalEvent.prototype.preventDefault = function () {\n  this.defaultPrevented = true;\n};\nInternalEvent.prototype.init = function (data) {\n  (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.assign)(this, data || {});\n};\n\n/**\n * Invoke function. Be fast...\n *\n * @param {Function} fn\n * @param {any[]} args\n *\n * @return {any}\n */\nfunction invokeFunction(fn, args) {\n  return fn.apply(null, args);\n}\n\n/**\n * A factory to create a configurable debouncer.\n *\n * @param {number|boolean} [config=true]\n */\nfunction DebounceFactory(config = true) {\n  const timeout = typeof config === 'number' ? config : config ? 300 : 0;\n  if (timeout) {\n    return fn => (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.debounce)(fn, timeout);\n  } else {\n    return fn => fn;\n  }\n}\nDebounceFactory.$inject = ['config.debounce'];\n\nclass FormFieldRegistry extends _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.FormFieldRegistry {\n  /**\n   * Updates a form fields id.\n   *\n   * @param {Object} formField\n   * @param {string} newId\n   */\n  updateId(formField, newId) {\n    this._validateId(newId);\n    this._eventBus.fire('formField.updateId', {\n      formField,\n      newId: newId\n    });\n    this.remove(formField);\n    formField.id = newId;\n    this.add(formField);\n\n    // TODO(nikku): make this a proper object graph so we\n    // do not have to deal with IDs this way...\n    if ('components' in formField) {\n      for (const component of formField.components) {\n        component._parent = newId;\n      }\n    }\n  }\n\n  /**\n   * Validate the suitability of the given id and signals a problem\n   * with an exception.\n   *\n   * @param {string} id\n   *\n   * @throws {Error} if id is empty or already assigned\n   */\n  _validateId(id) {\n    if (!id) {\n      throw new Error('formField must have an id');\n    }\n    if (this.get(id)) {\n      throw new Error('formField with id ' + id + ' already added');\n    }\n  }\n}\n\nconst MAX_COLUMNS_PER_ROW = 16;\nconst MAX_COLUMNS = 16;\nconst MIN_COLUMNS = 2;\nconst MAX_FIELDS_PER_ROW = 4;\nclass FormLayoutValidator {\n  /**\n   * @constructor\n   *\n   * @param { import('./FormLayouter').FormLayouter } formLayouter\n   * @param { import('./FormFieldRegistry').FormFieldRegistry } formFieldRegistry\n   */\n  constructor(formLayouter, formFieldRegistry) {\n    this._formLayouter = formLayouter;\n    this._formFieldRegistry = formFieldRegistry;\n  }\n  validateField(field = {}, columns, row) {\n    // allow empty (auto columns)\n    if (Number.isInteger(columns)) {\n      // allow minimum cols\n      if (columns < MIN_COLUMNS) {\n        return `Minimum ${MIN_COLUMNS} columns are allowed`;\n      }\n\n      // allow maximum cols\n      if (columns > MAX_COLUMNS) {\n        return `Maximum ${MAX_COLUMNS} columns are allowed`;\n      }\n    }\n    if (!row) {\n      row = this._formLayouter.getRowForField(field);\n    }\n\n    // calculate columns with and without updated field\n    let sumColumns = parseInt(columns) || 0;\n    let sumFields = 1;\n    let sumAutoCols = columns ? 0 : 1;\n    row.components.forEach(id => {\n      if (field.id === id) {\n        return;\n      }\n      const component = this._formFieldRegistry.get(id);\n      const cols = (component.layout || {}).columns;\n      if (!cols) {\n        sumAutoCols++;\n      }\n      sumColumns += parseInt(cols) || 0;\n      sumFields++;\n    });\n\n    // do not allow overflows\n    if (sumColumns > MAX_COLUMNS_PER_ROW || sumAutoCols > 0 && sumColumns > calculateMaxColumnsWithAuto(sumAutoCols) || columns === MAX_COLUMNS_PER_ROW && sumFields > 1) {\n      return `New value exceeds the maximum of ${MAX_COLUMNS_PER_ROW} columns per row`;\n    }\n    if (sumFields > MAX_FIELDS_PER_ROW) {\n      return `Maximum ${MAX_FIELDS_PER_ROW} fields per row are allowed`;\n    }\n    return null;\n  }\n}\nFormLayoutValidator.$inject = ['formLayouter', 'formFieldRegistry'];\n\n// helper //////////////////////\n\n// on normal screen sizes, auto columns take minimum 2 columns\nfunction calculateMaxColumnsWithAuto(autoCols) {\n  return MAX_COLUMNS_PER_ROW - autoCols * 2;\n}\n\nconst emptyImage = createEmptyImage();\nfunction editorFormFieldClasses(type, {\n  disabled = false\n} = {}) {\n  if (!type) {\n    throw new Error('type required');\n  }\n  return classnames__WEBPACK_IMPORTED_MODULE_3___default()('fjs-form-field', `fjs-form-field-${type}`, {\n    'fjs-disabled': disabled\n  });\n}\n\n/**\n * Add a dragger that calls back the passed function with\n * { event, delta } on drag.\n *\n * @example\n *\n * function dragMove(event, delta) {\n *   // we are dragging (!!)\n * }\n *\n * domElement.addEventListener('dragstart', dragger(dragMove));\n *\n * @param {Function} fn\n *\n * @return {Function} drag start callback function\n */\nfunction createDragger$1(fn) {\n  let self;\n  let startX, startY;\n\n  /** drag start */\n  function onDragStart(event) {\n    self = this;\n    startX = event.clientX;\n    startY = event.clientY;\n\n    // (1) hide drag preview image\n    if (event.dataTransfer) {\n      event.dataTransfer.setDragImage(emptyImage, 0, 0);\n    }\n\n    // (2) setup drag listeners\n\n    // attach drag + cleanup event\n    document.addEventListener('dragover', onDrag);\n    document.addEventListener('dragend', onEnd);\n    document.addEventListener('drop', preventDefault$1);\n  }\n  function onDrag(event) {\n    const delta = {\n      x: event.clientX - startX,\n      y: event.clientY - startY\n    };\n\n    // call provided fn with event, delta\n    return fn.call(self, event, delta);\n  }\n  function onEnd() {\n    document.removeEventListener('dragover', onDrag);\n    document.removeEventListener('dragend', onEnd);\n    document.removeEventListener('drop', preventDefault$1);\n  }\n  return onDragStart;\n}\n\n/**\n * Throttle function call according UI update cycle.\n *\n * @param  {Function} fn\n *\n * @return {Function} throttled fn\n */\nfunction throttle(fn) {\n  let active = false;\n  let lastArgs = [];\n  let lastThis = undefined;\n  return function (...args) {\n    lastArgs = args;\n    lastThis = this;\n    if (active) {\n      return;\n    }\n    active = true;\n    fn.apply(lastThis, lastArgs);\n    window.requestAnimationFrame(function () {\n      lastArgs = lastThis = active = undefined;\n    });\n  };\n}\nfunction preventDefault$1(event) {\n  event.preventDefault();\n  event.stopPropagation();\n}\nfunction createEmptyImage() {\n  const img = new Image();\n  img.src = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\n  return img;\n}\n\nfunction EditorIFrame(props) {\n  const {\n    field,\n    domId\n  } = props;\n  const {\n    label\n  } = field;\n  const Icon = (0,_bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.iconsByType)(field.type);\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n    class: editorFormFieldClasses(field.type),\n    children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.Label, {\n      id: domId,\n      label: label\n    }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n      class: \"fjs-iframe-placeholder\",\n      id: domId,\n      children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"p\", {\n        class: \"fjs-iframe-placeholder-text\",\n        children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(Icon, {\n          width: \"32\",\n          height: \"24\",\n          viewBox: \"0 0 56 56\"\n        }), \"iFrame\"]\n      })\n    })]\n  });\n}\nEditorIFrame.config = _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.IFrame.config;\n\nconst DragAndDropContext = (0,preact__WEBPACK_IMPORTED_MODULE_6__.createContext)({\n  drake: null\n});\n\n/**\n * @param {string} type\n * @param {boolean} [strict]\n *\n * @returns {any}\n */\nfunction getService$1(type, strict) {}\nconst FormEditorContext = (0,preact__WEBPACK_IMPORTED_MODULE_6__.createContext)({\n  getService: getService$1\n});\n\nfunction useService$1(type, strict) {\n  const {\n    getService\n  } = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useContext)(FormEditorContext);\n  return getService(type, strict);\n}\n\nfunction usePrevious$1(value, defaultValue = null) {\n  const ref = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useRef)(defaultValue);\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => ref.current = value, [value]);\n  return ref.current;\n}\n\n/**\n * @param {Function} fn - function to debounce\n */\nfunction useDebounce$1(fn) {\n  const debounce = useService$1('debounce');\n  const callback = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => {\n    return debounce(fn);\n  }, [debounce, fn]);\n\n  // cleanup async side-effect if callback #flush is provided.\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    return () => {\n      typeof callback.flush === 'function' && callback.flush();\n    };\n  }, [callback]);\n  return callback;\n}\n\nvar _path$5;\nfunction _extends$5() { return _extends$5 = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends$5.apply(null, arguments); }\nvar SvgClose = function SvgClose(props) {\n  return /*#__PURE__*/preact_compat__WEBPACK_IMPORTED_MODULE_7__.createElement(\"svg\", _extends$5({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 16,\n    height: 16,\n    fill: \"currentColor\"\n  }, props), _path$5 || (_path$5 = /*#__PURE__*/preact_compat__WEBPACK_IMPORTED_MODULE_7__.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"m12 4.7-.7-.7L8 7.3 4.7 4l-.7.7L7.3 8 4 11.3l.7.7L8 8.7l3.3 3.3.7-.7L8.7 8z\",\n    clipRule: \"evenodd\"\n  })));\n};\n\nvar _path$4, _path2$1;\nfunction _extends$4() { return _extends$4 = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends$4.apply(null, arguments); }\nvar SvgDelete = function SvgDelete(props) {\n  return /*#__PURE__*/preact_compat__WEBPACK_IMPORTED_MODULE_7__.createElement(\"svg\", _extends$4({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 16,\n    height: 16,\n    fill: \"none\"\n  }, props), /*#__PURE__*/preact_compat__WEBPACK_IMPORTED_MODULE_7__.createElement(\"rect\", {\n    width: 16,\n    height: 16,\n    x: 0.536,\n    fill: \"#fff\",\n    rx: 3,\n    style: {\n      mixBlendMode: \"multiply\"\n    }\n  }), /*#__PURE__*/preact_compat__WEBPACK_IMPORTED_MODULE_7__.createElement(\"path\", {\n    fill: \"#fff\",\n    d: \"M0 0h16v16H0z\",\n    style: {\n      mixBlendMode: \"multiply\"\n    },\n    transform: \"translate(.536)\"\n  }), _path$4 || (_path$4 = /*#__PURE__*/preact_compat__WEBPACK_IMPORTED_MODULE_7__.createElement(\"path\", {\n    fill: \"currentcolor\",\n    d: \"M7.536 6h-1v6h1zm3 0h-1v6h1z\"\n  })), _path2$1 || (_path2$1 = /*#__PURE__*/preact_compat__WEBPACK_IMPORTED_MODULE_7__.createElement(\"path\", {\n    fill: \"currentcolor\",\n    d: \"M2.536 3v1h1v10a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4h1V3zm2 11V4h8v10zm6-13h-4v1h4z\"\n  })));\n};\n\nvar _path$3;\nfunction _extends$3() { return _extends$3 = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends$3.apply(null, arguments); }\nvar SvgDraggable = function SvgDraggable(props) {\n  return /*#__PURE__*/preact_compat__WEBPACK_IMPORTED_MODULE_7__.createElement(\"svg\", _extends$3({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlSpace: \"preserve\",\n    width: 16,\n    height: 16,\n    fill: \"currentcolor\",\n    viewBox: \"0 0 32 32\"\n  }, props), _path$3 || (_path$3 = /*#__PURE__*/preact_compat__WEBPACK_IMPORTED_MODULE_7__.createElement(\"path\", {\n    d: \"M10 6h4v4h-4zm8 0h4v4h-4zm-8 8h4v4h-4zm8 0h4v4h-4zm-8 8h4v4h-4zm8 0h4v4h-4z\"\n  })), /*#__PURE__*/preact_compat__WEBPACK_IMPORTED_MODULE_7__.createElement(\"path\", {\n    d: \"M0 0h32v32H0z\",\n    style: {\n      fill: \"none\"\n    }\n  }));\n};\n\nvar _path$2;\nfunction _extends$2() { return _extends$2 = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends$2.apply(null, arguments); }\nvar SvgSearch = function SvgSearch(props) {\n  return /*#__PURE__*/preact_compat__WEBPACK_IMPORTED_MODULE_7__.createElement(\"svg\", _extends$2({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 15,\n    height: 15,\n    fill: \"none\"\n  }, props), _path$2 || (_path$2 = /*#__PURE__*/preact_compat__WEBPACK_IMPORTED_MODULE_7__.createElement(\"path\", {\n    fill: \"currentColor\",\n    d: \"m14.5 13.793-3.776-3.776a5.508 5.508 0 1 0-.707.707l3.776 3.776zM2 6.5a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0\"\n  })));\n};\n\nvar _path$1, _rect, _mask, _path2, _path3, _path4, _path5, _path6;\nfunction _extends$1() { return _extends$1 = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends$1.apply(null, arguments); }\nvar SvgEmptyForm = function SvgEmptyForm(props) {\n  return /*#__PURE__*/preact_compat__WEBPACK_IMPORTED_MODULE_7__.createElement(\"svg\", _extends$1({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 126,\n    height: 96,\n    fill: \"none\"\n  }, props), _path$1 || (_path$1 = /*#__PURE__*/preact_compat__WEBPACK_IMPORTED_MODULE_7__.createElement(\"path\", {\n    fill: \"#FF832B\",\n    fillRule: \"evenodd\",\n    d: \"M70 78v8a3 3 0 0 1-3 3h-8v-5h6v-6zm0-16h-5V46h5zm0-32h-5v-6h-6v-5h8a3 3 0 0 1 3 3zM43 19v5H27v-5zm-32 0v5H5v6H0v-8a3 3 0 0 1 3-3zM0 46h5v16H0zm0 32h5v6h6v5H3a3 3 0 0 1-3-3zm27 11v-5h16v5z\",\n    clipRule: \"evenodd\"\n  })), _rect || (_rect = /*#__PURE__*/preact_compat__WEBPACK_IMPORTED_MODULE_7__.createElement(\"rect\", {\n    width: 70,\n    height: 70,\n    fill: \"#E5E5E5\",\n    rx: 3,\n    transform: \"matrix(-1 0 0 1 94 0)\"\n  })), _mask || (_mask = /*#__PURE__*/preact_compat__WEBPACK_IMPORTED_MODULE_7__.createElement(\"mask\", {\n    id: \"EmptyForm_svg__a\",\n    fill: \"#fff\"\n  }, /*#__PURE__*/preact_compat__WEBPACK_IMPORTED_MODULE_7__.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M87.085 88.684 75.43 45.185l43.499 11.656-11.044 8.072 8.557 8.556-12.728 12.728-8.557-8.556z\",\n    clipRule: \"evenodd\"\n  }))), _path2 || (_path2 = /*#__PURE__*/preact_compat__WEBPACK_IMPORTED_MODULE_7__.createElement(\"path\", {\n    fill: \"#393939\",\n    fillRule: \"evenodd\",\n    d: \"M87.085 88.684 75.43 45.185l43.499 11.656-11.044 8.072 8.557 8.556-12.728 12.728-8.557-8.556z\",\n    clipRule: \"evenodd\"\n  })), _path3 || (_path3 = /*#__PURE__*/preact_compat__WEBPACK_IMPORTED_MODULE_7__.createElement(\"path\", {\n    fill: \"#393939\",\n    d: \"M75.43 45.185 70.6 46.48l-2.241-8.365 8.365 2.242zm11.655 43.499 4.037 2.95-6.163 8.432-2.704-10.088zm31.844-31.843 1.294-4.83 10.088 2.703-8.432 6.163zm-11.044 8.072-3.535 3.535-4.128-4.127 4.713-3.445zm8.557 8.556 3.535-3.535 3.536 3.535-3.536 3.536zm-12.728 12.728 3.536 3.536-3.536 3.535-3.536-3.535zm-8.557-8.556-4.036-2.951 3.444-4.713 4.128 4.128zM80.26 43.89 91.915 87.39l-9.66 2.588L70.6 46.48zm37.375 17.78L74.136 50.014l2.588-9.66 43.499 11.656zm-12.699-.795 11.043-8.072 5.901 8.073-11.043 8.072zm7.971 16.129-8.556-8.557 7.071-7.07 8.556 8.556zm-12.728 5.657 12.728-12.728 7.071 7.07-12.727 12.729zm-1.485-8.557 8.557 8.557-7.072 7.07-8.556-8.556zM83.049 85.733 91.12 74.69l8.073 5.901-8.072 11.044z\",\n    mask: \"url(#EmptyForm_svg__a)\"\n  })), _path4 || (_path4 = /*#__PURE__*/preact_compat__WEBPACK_IMPORTED_MODULE_7__.createElement(\"path\", {\n    stroke: \"#000\",\n    strokeLinecap: \"round\",\n    strokeWidth: 3,\n    d: \"m69.431 39.163-9.192-9.192\"\n  })), _path5 || (_path5 = /*#__PURE__*/preact_compat__WEBPACK_IMPORTED_MODULE_7__.createElement(\"path\", {\n    stroke: \"#000\",\n    strokeLinecap: \"round\",\n    strokeWidth: 3,\n    d: \"M1.5-1.5h8\",\n    transform: \"matrix(-1 0 0 1 68.213 50.123)\"\n  })), _path6 || (_path6 = /*#__PURE__*/preact_compat__WEBPACK_IMPORTED_MODULE_7__.createElement(\"path\", {\n    stroke: \"#000\",\n    strokeLinecap: \"round\",\n    strokeWidth: 3,\n    d: \"M78.969 36.367v-8\"\n  })));\n};\n\nfunction EditorText(props) {\n  const {\n    type,\n    text = ''\n  } = props.field;\n  const Icon = (0,_bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.iconsByType)('text');\n  const templating = useService$1('templating');\n  const expressionLanguage = useService$1('expressionLanguage');\n  if (!text || !text.trim()) {\n    return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n      class: editorFormFieldClasses(type),\n      children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n        class: \"fjs-form-field-placeholder\",\n        children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(Icon, {\n          viewBox: \"0 0 54 54\"\n        }), \"Text view is empty\"]\n      })\n    });\n  }\n  if (expressionLanguage.isExpression(text)) {\n    return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n      class: editorFormFieldClasses(type),\n      children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n        class: \"fjs-form-field-placeholder\",\n        children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(Icon, {\n          viewBox: \"0 0 54 54\"\n        }), \"Text view is populated by an expression\"]\n      })\n    });\n  }\n  if (templating.isTemplate(text)) {\n    return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n      class: editorFormFieldClasses(type),\n      children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n        class: \"fjs-form-field-placeholder\",\n        children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(Icon, {\n          viewBox: \"0 0 54 54\"\n        }), \"Text view is templated\"]\n      })\n    });\n  }\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.Text, {\n    ...props,\n    disableLinks: true\n  });\n}\nEditorText.config = _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.Text.config;\n\nfunction EditorHtml(props) {\n  const {\n    type,\n    content = ''\n  } = props.field;\n  const Icon = (0,_bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.iconsByType)(type);\n  const templating = useService$1('templating');\n  const expressionLanguage = useService$1('expressionLanguage');\n  if (!content || !content.trim()) {\n    return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n      class: editorFormFieldClasses(type),\n      children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n        class: \"fjs-form-field-placeholder\",\n        children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(Icon, {\n          viewBox: \"0 0 54 54\"\n        }), \"Html view is empty\"]\n      })\n    });\n  }\n  if (expressionLanguage.isExpression(content)) {\n    return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n      class: editorFormFieldClasses(type),\n      children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n        class: \"fjs-form-field-placeholder\",\n        children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(Icon, {\n          viewBox: \"0 0 54 54\"\n        }), \"Html view is populated by an expression\"]\n      })\n    });\n  }\n  if (templating.isTemplate(content)) {\n    return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n      class: editorFormFieldClasses(type),\n      children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n        class: \"fjs-form-field-placeholder\",\n        children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(Icon, {\n          viewBox: \"0 0 54 54\"\n        }), \"Html view is templated\"]\n      })\n    });\n  }\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.Html, {\n    ...props,\n    disableLinks: true\n  });\n}\nEditorHtml.config = _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.Html.config;\n\nfunction EditorTable(props) {\n  const {\n    columnsExpression,\n    columns,\n    id,\n    label\n  } = props.field;\n  const shouldUseMockColumns = typeof columnsExpression === 'string' && columnsExpression.length > 0 || Array.isArray(columns) && columns.length === 0;\n  const editorColumns = shouldUseMockColumns ? [{\n    key: '1',\n    label: 'Column 1'\n  }, {\n    key: '2',\n    label: 'Column 2'\n  }, {\n    key: '3',\n    label: 'Column 3'\n  }] : columns;\n  const prefixId = `fjs-form-${id}`;\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n    class: editorFormFieldClasses('table', {\n      disabled: true\n    }),\n    children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.Label, {\n      id: prefixId,\n      label: label\n    }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n      class: \"fjs-table-middle-container\",\n      children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n        class: \"fjs-table-inner-container\",\n        children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"table\", {\n          class: classnames__WEBPACK_IMPORTED_MODULE_3___default()('fjs-table', 'fjs-disabled'),\n          id: prefixId,\n          children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"thead\", {\n            class: \"fjs-table-head\",\n            children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"tr\", {\n              class: \"fjs-table-tr\",\n              children: editorColumns.map(({\n                key,\n                label\n              }) => (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"th\", {\n                class: \"fjs-table-th\",\n                children: label\n              }, key))\n            })\n          }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"tbody\", {\n            class: \"fjs-table-body\",\n            children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"tr\", {\n              class: \"fjs-table-tr\",\n              children: editorColumns.map(({\n                key\n              }) => (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"td\", {\n                class: \"fjs-table-td\",\n                children: \"Content\"\n              }, key))\n            })\n          })]\n        })\n      })\n    })]\n  });\n}\nEditorTable.config = _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.Table.config;\n\nconst type = 'expression';\nfunction EditorExpressionField(props) {\n  const {\n    field\n  } = props;\n  const {\n    expression = '',\n    key\n  } = field;\n  const Icon = (0,_bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.iconsByType)('expression');\n  const expressionLanguage = useService$1('expressionLanguage');\n  let placeholderContent = 'Expression is empty';\n  if (expression.trim() && expressionLanguage.isExpression(expression)) {\n    placeholderContent = `Expression for '${key}'`;\n  }\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n    class: editorFormFieldClasses(type),\n    children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n      class: \"fjs-form-field-placeholder\",\n      children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(Icon, {\n        viewBox: \"0 0 54 54\"\n      }), placeholderContent]\n    })\n  });\n}\nEditorExpressionField.config = {\n  ..._bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.ExpressionField.config,\n  escapeGridRender: false\n};\n\nfunction EditorDocumentPreview(props) {\n  const {\n    field,\n    domId\n  } = props;\n  const {\n    label\n  } = field;\n  const Icon = (0,_bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.iconsByType)(field.type);\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n    class: editorFormFieldClasses(field.type),\n    children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.Label, {\n      id: domId,\n      label: label\n    }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n      class: \"fjs-documentPreview-placeholder\",\n      id: domId,\n      children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"p\", {\n        class: \"fjs-documentPreview-placeholder-text\",\n        children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(Icon, {\n          width: \"32\",\n          height: \"24\",\n          viewBox: \"0 0 56 56\"\n        }), \"Document preview\"]\n      })\n    })]\n  });\n}\nEditorDocumentPreview.config = _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.DocumentPreview.config;\n\nconst editorFormFields = [EditorIFrame, EditorText, EditorHtml, EditorTable, EditorExpressionField, EditorDocumentPreview];\n\nclass EditorFormFields extends _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.FormFields {\n  constructor() {\n    super();\n    editorFormFields.forEach(formField => {\n      this.register(formField.config.type, formField);\n    });\n  }\n}\n\nconst ModularSection = props => {\n  const {\n    rootClass,\n    RootElement,\n    section,\n    children\n  } = props;\n  const eventBus = useService$1('eventBus');\n  const sectionConfig = useService$1(`config.${section}`);\n  const [parent, setParent] = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useState)(sectionConfig && sectionConfig.parent || null);\n  const [shouldRender, setShouldRender] = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useState)(true);\n  const ParentElement = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => {\n    if (parent === null) {\n      return null;\n    }\n    if (typeof parent === 'string') {\n      const element = document.querySelector(parent);\n      if (!element) {\n        throw new Error(`Target root element with selector '${parent}' not found for section '${section}'`);\n      }\n      return document.querySelector(parent);\n    }\n\n    // @ts-ignore\n    if (!(parent instanceof Element)) {\n      throw new Error(`Target root element for section '${section}' must be a valid selector or DOM element`);\n    }\n    return parent;\n  }, [section, parent]);\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    const onAttach = ({\n      container\n    }) => {\n      setParent(container);\n      setShouldRender(true);\n    };\n    const onDetach = () => {\n      setParent(null);\n      setShouldRender(false);\n    };\n    const onReset = () => {\n      setParent(null);\n      setShouldRender(true);\n    };\n    eventBus.on(`${section}.attach`, onAttach);\n    eventBus.on(`${section}.detach`, onDetach);\n    eventBus.on(`${section}.reset`, onReset);\n    eventBus.fire(`${section}.section.rendered`);\n    return () => {\n      eventBus.off(`${section}.attach`, onAttach);\n      eventBus.off(`${section}.detach`, onDetach);\n      eventBus.off(`${section}.reset`, onReset);\n      eventBus.fire(`${section}.section.destroyed`);\n    };\n  }, [eventBus, section]);\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    if (shouldRender) {\n      eventBus.fire(`${section}.rendered`, {\n        element: ParentElement\n      });\n      return () => {\n        eventBus.fire(`${section}.destroyed`, {\n          element: ParentElement\n        });\n      };\n    }\n  }, [eventBus, section, shouldRender, ParentElement]);\n  const Root = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useCallback)(({\n    children\n  }) => RootElement ? (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(RootElement, {\n    children: children\n  }) : (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n    className: rootClass,\n    children: children\n  }), [rootClass, RootElement]);\n  return shouldRender ? parent ? (0,preact_compat__WEBPACK_IMPORTED_MODULE_7__.createPortal)((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(Root, {\n    children: children\n  }), ParentElement) : (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(Root, {\n    children: children\n  }) : null;\n};\n\nconst FillContext = (0,preact__WEBPACK_IMPORTED_MODULE_6__.createContext)({\n  addFill(uid, props) {\n    throw new Error('FillContext.addFill() uninitialized');\n  },\n  removeFill(uid) {\n    throw new Error('FillContext.addFill() uninitialized');\n  }\n});\n\nconst Fill = props => {\n  const uid = (0,preact_compat__WEBPACK_IMPORTED_MODULE_7__.useRef)(Symbol('fill_uid'));\n  const fillContext = (0,preact_compat__WEBPACK_IMPORTED_MODULE_7__.useContext)(FillContext);\n  (0,preact_compat__WEBPACK_IMPORTED_MODULE_7__.useEffect)(() => {\n    if (!fillContext) {\n      return;\n    }\n    fillContext.addFill({\n      id: uid,\n      ...props\n    });\n    return () => {\n      fillContext.removeFill(uid);\n    };\n  }, [fillContext, props]);\n  return null;\n};\n\nconst SlotContext = (0,preact__WEBPACK_IMPORTED_MODULE_6__.createContext)({\n  fills: []\n});\n\nconst Slot = props => {\n  const {\n    name,\n    fillRoot = FillFragment,\n    groupFn = _groupByGroupName,\n    separatorFn = key => null,\n    limit\n  } = props;\n  const {\n    fills\n  } = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useContext)(SlotContext);\n  const filtered = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => fills.filter(fill => fill.slot === name), [fills, name]);\n  const cropped = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => limit ? filtered.slice(0, limit) : filtered, [filtered, limit]);\n  const groups = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => groupFn(cropped), [cropped, groupFn]);\n  const fillsAndSeparators = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => {\n    return buildFills(groups, fillRoot, separatorFn);\n  }, [groups, fillRoot, separatorFn]);\n  return fillsAndSeparators;\n};\n\n/**\n * Creates a Fragment for a fill.\n *\n * @param {Object} fill Fill to be rendered\n * @returns {Object} Preact Fragment containing fill's children\n */\nconst FillFragment = fill => (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(preact__WEBPACK_IMPORTED_MODULE_6__.Fragment, {\n  children: fill.children\n}, fill.id);\n\n/**\n * Creates an array of fills, with separators inserted between groups.\n *\n * @param {Array} groups Groups of fills\n * @param {Function} fillRenderer Function to create a fill\n * @param {Function} separatorRenderer Function to create a separator\n * @returns {Array} Array of fills and separators\n */\nconst buildFills = (groups, fillRenderer, separatorRenderer) => {\n  const result = [];\n  groups.forEach((array, idx) => {\n    if (idx !== 0) {\n      const separator = separatorRenderer(`__separator_${idx}`);\n      if (separator) {\n        result.push(separator);\n      }\n    }\n    array.forEach(fill => {\n      result.push(fillRenderer(fill));\n    });\n  });\n  return result;\n};\n\n/**\n * Groups fills by group name property.\n */\nconst _groupByGroupName = fills => {\n  const groups = [];\n  const groupsById = {};\n  fills.forEach(function (fill) {\n    const {\n      group: groupName = 'z_default'\n    } = fill;\n    let group = groupsById[groupName];\n    if (!group) {\n      groupsById[groupName] = group = [];\n      groups.push(group);\n    }\n    group.push(fill);\n  });\n  groups.forEach(group => group.sort(_comparePriority));\n  return Object.keys(groupsById).sort().map(id => groupsById[id]);\n};\n\n/**\n * Compares fills by priority.\n */\nconst _comparePriority = (a, b) => {\n  return (b.priority || 0) - (a.priority || 0);\n};\n\nconst noop$1 = () => {};\nconst SlotFillRoot = props => {\n  const [fills, setFills] = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useState)([]);\n  const {\n    onSetFill = noop$1,\n    onRemoveFill = noop$1\n  } = props;\n  const fillContext = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => ({\n    addFill: fill => {\n      setFills(fills => [...fills.filter(f => f.id !== fill.id), fill]);\n      onSetFill(fill);\n    },\n    removeFill: id => {\n      setFills(fills => fills.filter(f => f.id !== id));\n      onRemoveFill(id);\n    }\n  }), [onRemoveFill, onSetFill]);\n  const slotContext = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => ({\n    fills\n  }), [fills]);\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(SlotContext.Provider, {\n    value: slotContext,\n    children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(FillContext.Provider, {\n      value: fillContext,\n      children: props.children\n    })\n  });\n};\n\nfunction PaletteEntry(props) {\n  const {\n    type,\n    label,\n    icon,\n    iconUrl,\n    getPaletteIcon\n  } = props;\n  const modeling = useService$1('modeling');\n  const formEditor = useService$1('formEditor');\n  const Icon = getPaletteIcon({\n    icon,\n    iconUrl,\n    label,\n    type\n  });\n  const onKeyDown = event => {\n    if (event.code === 'Enter') {\n      const {\n        fieldType: type\n      } = event.target.dataset;\n      const {\n        schema\n      } = formEditor._getState();\n\n      // add new form field to last position\n      modeling.addFormField({\n        type\n      }, schema, schema.components.length);\n    }\n  };\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"button\", {\n    type: \"button\",\n    class: \"fjs-palette-field fjs-drag-copy fjs-no-drop\",\n    \"data-field-type\": type,\n    title: `Create ${getIndefiniteArticle(type)} ${label} element`,\n    onKeyDown: onKeyDown,\n    children: [Icon ? (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(Icon, {\n      class: \"fjs-palette-field-icon\",\n      width: \"36\",\n      height: \"36\",\n      viewBox: \"0 0 54 54\"\n    }) : null, (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"span\", {\n      class: \"fjs-palette-field-text\",\n      children: label\n    })]\n  });\n}\n\n// helpers ///////////\n\nfunction getIndefiniteArticle(type) {\n  if (['image'].includes(type)) {\n    return 'an';\n  }\n  return 'a';\n}\n\nconst PALETTE_GROUPS = [{\n  label: 'Input',\n  id: 'basic-input'\n}, {\n  label: 'Selection',\n  id: 'selection'\n}, {\n  label: 'Presentation',\n  id: 'presentation'\n}, {\n  label: 'Containers',\n  id: 'container'\n}, {\n  label: 'Action',\n  id: 'action'\n}];\nfunction Palette(props) {\n  const formFields = useService$1('formFields');\n  const initialPaletteEntries = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useRef)(collectPaletteEntries(formFields));\n  const [paletteEntries, setPaletteEntries] = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useState)(initialPaletteEntries.current);\n  const [searchTerm, setSearchTerm] = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useState)('');\n\n  /** @type {import(\"preact\").RefObject<HTMLInputElement>} */\n  const inputRef = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useRef)();\n  const groups = groupEntries(paletteEntries);\n  const simplifyString = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useCallback)(str => {\n    return str.toLowerCase().replace(/\\s+/g, '');\n  }, []);\n  const filter = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useCallback)(entry => {\n    const simplifiedSearchTerm = simplifyString(searchTerm);\n    if (!simplifiedSearchTerm) {\n      return true;\n    }\n    const simplifiedEntryLabel = simplifyString(entry.label);\n    const simplifiedEntryType = simplifyString(entry.type);\n    return simplifiedEntryLabel.includes(simplifiedSearchTerm) || simplifiedEntryType.includes(simplifiedSearchTerm);\n  }, [searchTerm, simplifyString]);\n\n  // filter entries on search change\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    const entries = initialPaletteEntries.current.filter(filter);\n    setPaletteEntries(entries);\n  }, [filter, searchTerm]);\n  const handleInput = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useCallback)(event => {\n    setSearchTerm(() => event.target.value);\n  }, [setSearchTerm]);\n  const handleClear = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useCallback)(event => {\n    setSearchTerm('');\n    inputRef.current.focus();\n  }, [inputRef, setSearchTerm]);\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n    class: \"fjs-palette\",\n    children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n      class: \"fjs-palette-header\",\n      title: \"Components\",\n      children: \"Components\"\n    }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n      class: \"fjs-palette-search-container\",\n      children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"span\", {\n        class: \"fjs-palette-search-icon\",\n        children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(SvgSearch, {})\n      }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"input\", {\n        class: \"fjs-palette-search\",\n        ref: inputRef,\n        type: \"text\",\n        placeholder: \"Search components\",\n        value: searchTerm,\n        onInput: handleInput\n      }), searchTerm && (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"button\", {\n        type: \"button\",\n        title: \"Clear content\",\n        class: \"fjs-palette-search-clear\",\n        onClick: handleClear,\n        children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(SvgClose, {})\n      })]\n    }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n      class: \"fjs-palette-entries\",\n      children: [groups.map(({\n        label,\n        entries,\n        id\n      }) => (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n        class: \"fjs-palette-group\",\n        \"data-group-id\": id,\n        children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"span\", {\n          class: \"fjs-palette-group-title\",\n          children: label\n        }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n          class: \"fjs-palette-fields fjs-drag-container fjs-no-drop\",\n          children: entries.map(entry => {\n            return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(PaletteEntry, {\n              getPaletteIcon: getPaletteIcon,\n              ...entry\n            }, entry.type);\n          })\n        })]\n      }, id)), groups.length == 0 && (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n        class: \"fjs-palette-no-entries\",\n        children: \"No components found.\"\n      })]\n    }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n      class: \"fjs-palette-footer\",\n      children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(Slot, {\n        name: \"editor-palette__footer\",\n        fillRoot: FillRoot\n      })\n    })]\n  });\n}\nconst FillRoot = fill => (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n  className: \"fjs-palette-footer-fill\",\n  children: fill.children\n});\n\n// helpers ///////\n\nfunction groupEntries(entries) {\n  const groups = PALETTE_GROUPS.map(group => {\n    return {\n      ...group,\n      entries: []\n    };\n  });\n  const getGroup = id => groups.find(group => id === group.id);\n  entries.forEach(entry => {\n    const {\n      group\n    } = entry;\n    getGroup(group).entries.push(entry);\n  });\n  return groups.filter(g => g.entries.length);\n}\n\n/**\n * Returns a list of palette entries.\n *\n * @param {FormFields} formFields\n * @returns {Array<PaletteEntry>}\n */\nfunction collectPaletteEntries(formFields) {\n  return Object.entries(formFields._formFields).map(([type, formField]) => {\n    const {\n      config: fieldConfig\n    } = formField;\n    return {\n      // fieldConfig.label is used to maintain backwards compatibility with custom form fields\n      label: fieldConfig.name || fieldConfig.label,\n      type: type,\n      group: fieldConfig.group,\n      icon: fieldConfig.icon,\n      iconUrl: fieldConfig.iconUrl\n    };\n  }).filter(({\n    type\n  }) => type !== 'default');\n}\n\n/**\n * There are various options to specify an icon for a palette entry.\n *\n * a) via `iconUrl` property in a form field config\n * b) via `icon` property in a form field config\n * c) via statically defined iconsByType (fallback)\n */\nfunction getPaletteIcon(entry) {\n  const {\n    icon,\n    iconUrl,\n    type,\n    label\n  } = entry;\n  let Icon;\n  if (iconUrl) {\n    Icon = function Icon() {\n      return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"img\", {\n        class: \"fjs-field-icon-image\",\n        width: 36,\n        style: {\n          margin: 'auto'\n        },\n        alt: label,\n        src: (0,_bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.sanitizeImageSource)(iconUrl)\n      });\n    };\n  } else {\n    Icon = icon || (0,_bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.iconsByType)(type);\n  }\n  return Icon;\n}\n\nconst InjectedRendersRoot = () => {\n  const renderInjector = useService$1('renderInjector');\n  const injectedRenderers = renderInjector.fetchRenderers();\n  const injectedProps = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => ({\n    useService: useService$1,\n    components: {\n      Fill,\n      Slot\n    }\n  }), []);\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(preact__WEBPACK_IMPORTED_MODULE_6__.Fragment, {\n    children: injectedRenderers.map(({\n      Renderer\n    }, index) => (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(Renderer, {\n      ...injectedProps\n    }, index))\n  });\n};\n\nconst CURSOR_CLS_PATTERN = /^fjs-cursor-.*$/;\nfunction set(mode) {\n  const classes$1 = (0,min_dom__WEBPACK_IMPORTED_MODULE_9__.classes)(document.body);\n  classes$1.removeMatching(CURSOR_CLS_PATTERN);\n  if (mode) {\n    classes$1.add('fjs-cursor-' + mode);\n  }\n}\nfunction unset() {\n  set(null);\n}\n\nconst DRAG_CONTAINER_CLS = 'fjs-drag-container';\nconst DROP_CONTAINER_VERTICAL_CLS = 'fjs-drop-container-vertical';\nconst DROP_CONTAINER_HORIZONTAL_CLS = 'fjs-drop-container-horizontal';\nconst DRAG_MOVE_CLS = 'fjs-drag-move';\nconst DRAG_ROW_MOVE_CLS = 'fjs-drag-row-move';\nconst DRAG_COPY_CLS = 'fjs-drag-copy';\nconst DRAG_NO_DROP_CLS = 'fjs-no-drop';\nconst DRAG_NO_MOVE_CLS = 'fjs-no-move';\nconst ERROR_DROP_CLS = 'fjs-error-drop';\n\n/**\n * @typedef { { id: String, components: Array<any> } } FormRow\n */\n\nclass Dragging {\n  /**\n   * @constructor\n   *\n   * @param { import('../../core/FormFieldRegistry').FormFieldRegistry } formFieldRegistry\n   * @param { import('../../core/FormLayouter').FormLayouter } formLayouter\n   * @param { import('../../core/FormLayoutValidator').FormLayoutValidator } formLayoutValidator\n   * @param { import('../../core/EventBus').EventBus } eventBus\n   * @param { import('../modeling/Modeling').Modeling } modeling\n   * @param { import('@bpmn-io/form-js-viewer').PathRegistry } pathRegistry\n   */\n  constructor(formFieldRegistry, formLayouter, formLayoutValidator, eventBus, modeling, pathRegistry) {\n    this._formFieldRegistry = formFieldRegistry;\n    this._formLayouter = formLayouter;\n    this._formLayoutValidator = formLayoutValidator;\n    this._eventBus = eventBus;\n    this._modeling = modeling;\n    this._pathRegistry = pathRegistry;\n  }\n\n  /**\n   * Calculates position in form schema given the dropped place.\n   *\n   * @param { FormRow } targetRow\n   * @param { any } targetFormField\n   * @param { HTMLElement } sibling\n   * @returns { number }\n   */\n  getTargetIndex(targetRow, targetFormField, sibling) {\n    /** @type HTMLElement */\n    const siblingFormFieldNode = sibling && sibling.querySelector('.fjs-element');\n    const siblingFormField = siblingFormFieldNode && this._formFieldRegistry.get(siblingFormFieldNode.dataset.id);\n\n    // (1) dropped before existing field => place before\n    if (siblingFormField) {\n      return getFormFieldIndex$1(targetFormField, siblingFormField);\n    }\n\n    // (2) dropped in row => place at the end of row (after last field in row)\n    if (targetRow) {\n      return getFormFieldIndex$1(targetFormField, this._formFieldRegistry.get(targetRow.components[targetRow.components.length - 1])) + 1;\n    }\n\n    // (3) dropped as last item\n    return targetFormField.components.length;\n  }\n  validateDrop(element, target) {\n    const formFieldNode = element.querySelector('.fjs-element');\n    const targetRow = this._formLayouter.getRow(target.dataset.rowId);\n    let columns;\n    let formField;\n    let targetParentId;\n    if (formFieldNode) {\n      formField = this._formFieldRegistry.get(formFieldNode.dataset.id);\n      if (!formField) {\n        return 'No associated form field in the registry';\n      }\n      columns = (formField.layout || {}).columns;\n\n      // (1) check for row constraints\n      if (isRow(target)) {\n        targetParentId = getFormParent(target).dataset.id;\n        const rowError = this._formLayoutValidator.validateField(formField, columns, targetRow);\n        if (rowError) {\n          return rowError;\n        }\n      } else {\n        targetParentId = target.dataset.id;\n      }\n\n      // (2) check target is a valid parent\n      if (!targetParentId) {\n        return 'Drop is not a valid target';\n      }\n\n      // (3) check  for path collisions\n      const targetParentFormField = this._formFieldRegistry.get(targetParentId);\n      const currentParentFormField = this._formFieldRegistry.get(formField._parent);\n      if (targetParentFormField !== currentParentFormField) {\n        const targetParentPath = this._pathRegistry.getValuePath(targetParentFormField);\n        const currentParentPath = this._pathRegistry.getValuePath(currentParentFormField);\n        if (targetParentPath.join('.') !== currentParentPath.join('.')) {\n          const isDropAllowedByPathRegistry = this._pathRegistry.executeRecursivelyOnFields(formField, ({\n            field,\n            isClosed,\n            isRepeatable\n          }) => {\n            const options = {\n              cutoffNode: currentParentFormField.id\n            };\n            const fieldPath = this._pathRegistry.getValuePath(field, options);\n            return this._pathRegistry.canClaimPath([...targetParentPath, ...fieldPath], {\n              isClosed,\n              isRepeatable,\n              knownAncestorIds: (0,_bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.getAncestryList)(targetParentId, this._formFieldRegistry)\n            });\n          });\n          if (!isDropAllowedByPathRegistry) {\n            return 'Drop not allowed by path registry';\n          }\n        }\n      }\n    }\n  }\n  moveField(element, source, targetRow, targetFormField, targetIndex) {\n    const formFieldNode = element.querySelector('.fjs-element');\n    const formField = this._formFieldRegistry.get(formFieldNode.dataset.id);\n    const sourceParent = getFormParent(source);\n    const sourceFormField = this._formFieldRegistry.get(sourceParent.dataset.id);\n    const sourceIndex = getFormFieldIndex$1(sourceFormField, formField);\n    const sourceRow = this._formLayouter.getRowForField(formField);\n    this._modeling.moveFormField(formField, sourceFormField, targetFormField, sourceIndex, targetIndex, sourceRow, targetRow);\n  }\n  createNewField(element, targetRow, targetFormField, targetIndex) {\n    const type = element.dataset.fieldType;\n    let attrs = {\n      type\n    };\n    attrs = {\n      ...attrs,\n      _parent: targetFormField.id,\n      layout: {\n        row: targetRow ? targetRow.id : this._formLayouter.nextRowId(),\n        // enable auto columns\n        columns: null\n      }\n    };\n    this._modeling.addFormField(attrs, targetFormField, targetIndex);\n  }\n  handleRowDrop(el, target, source, sibling) {\n    const targetFormField = this._formFieldRegistry.get(target.dataset.id);\n    const rowNode = el.querySelector('.fjs-layout-row');\n    const row = this._formLayouter.getRow(rowNode.dataset.rowId);\n\n    // move each field in the row before first field of sibling row\n    row.components.forEach((id, index) => {\n      const formField = this._formFieldRegistry.get(id);\n      const sourceParent = getFormParent(source);\n      const sourceFormField = this._formFieldRegistry.get(sourceParent.dataset.id);\n      const siblingRowNode = sibling && sibling.querySelector('.fjs-layout-row');\n      const siblingRow = siblingRowNode && this._formLayouter.getRow(siblingRowNode.dataset.rowId);\n      const siblingFormField = sibling && this._formFieldRegistry.get(siblingRow.components[0]);\n      const sourceIndex = getFormFieldIndex$1(sourceFormField, formField);\n      const targetIndex = (siblingRowNode ? getFormFieldIndex$1(targetFormField, siblingFormField) : targetFormField.components.length) + index;\n      this._modeling.moveFormField(formField, sourceFormField, targetFormField, sourceIndex, targetIndex, row, row);\n    });\n  }\n  handleElementDrop(el, target, source, sibling, drake) {\n    // (1) detect drop target\n    const targetFormField = this._formFieldRegistry.get(getFormParent(target).dataset.id);\n    let targetRow;\n\n    // (2.1) dropped in existing row\n    if (isRow(target)) {\n      targetRow = this._formLayouter.getRow(target.dataset.rowId);\n    }\n\n    // (2.2) validate whether drop is allowed\n    const validationError = this.validateDrop(el, target);\n    if (validationError) {\n      return drake.cancel(true);\n    }\n    drake.remove();\n\n    // (3) detect position to drop field in schema order\n    const targetIndex = this.getTargetIndex(targetRow, targetFormField, sibling);\n\n    // (4) create new field or move existing\n    if (isPalette(source)) {\n      this.createNewField(el, targetRow, targetFormField, targetIndex);\n    } else {\n      this.moveField(el, source, targetRow, targetFormField, targetIndex);\n    }\n  }\n\n  /**\n   * @param { { container: Array<string>, direction: string, mirrorContainer: string } } options\n   */\n  createDragulaInstance(options) {\n    const {\n      container,\n      mirrorContainer\n    } = options || {};\n    let dragulaOptions = {\n      direction: function (el, target) {\n        if (isRow(target)) {\n          return 'horizontal';\n        }\n        return 'vertical';\n      },\n      mirrorContainer,\n      isContainer(el) {\n        return container.some(cls => el.classList.contains(cls));\n      },\n      moves(el, source, handle) {\n        return !handle.classList.contains(DRAG_NO_MOVE_CLS) && (el.classList.contains(DRAG_MOVE_CLS) || el.classList.contains(DRAG_COPY_CLS) || el.classList.contains(DRAG_ROW_MOVE_CLS));\n      },\n      copy(el) {\n        return el.classList.contains(DRAG_COPY_CLS);\n      },\n      accepts: (el, target) => {\n        unsetDropNotAllowed(target);\n\n        // allow dropping rows only between rows\n        if (el.classList.contains(DRAG_ROW_MOVE_CLS)) {\n          return !target.classList.contains(DROP_CONTAINER_HORIZONTAL_CLS);\n        }\n\n        // validate field drop\n        const validationError = this.validateDrop(el, target);\n        if (validationError) {\n          // set error feedback to row\n          setDropNotAllowed(target);\n        }\n        return !target.classList.contains(DRAG_NO_DROP_CLS);\n      },\n      transformOffset: (offset, event, element) => {\n        if (element.classList.contains(DRAG_ROW_MOVE_CLS)) {\n          const rowOffset = {\n            x: -5,\n            y: -60\n          };\n          return {\n            left: event.clientX + rowOffset.x,\n            top: event.clientY + rowOffset.y\n          };\n        }\n        if (element.classList.contains(DRAG_MOVE_CLS)) {\n          const iconOffset = {\n            x: -5,\n            y: -15\n          };\n          return {\n            left: event.clientX + iconOffset.x,\n            top: event.clientY + iconOffset.y\n          };\n        }\n        return offset;\n      },\n      slideFactorX: 10,\n      slideFactorY: 5\n    };\n    const dragulaInstance = (0,_bpmn_io_draggle__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(dragulaOptions);\n\n    // bind life cycle events\n    dragulaInstance.on('drag', (element, source) => {\n      this.emit('drag.start', {\n        element,\n        source\n      });\n    });\n    dragulaInstance.on('dragend', element => {\n      this.emit('drag.end', {\n        element\n      });\n    });\n    dragulaInstance.on('drop', (element, target, source, sibling) => {\n      this.emit('drag.drop', {\n        element,\n        target,\n        source,\n        sibling\n      });\n    });\n    dragulaInstance.on('over', (element, container, source) => {\n      this.emit('drag.hover', {\n        element,\n        container,\n        source\n      });\n    });\n    dragulaInstance.on('out', (element, container, source) => {\n      this.emit('drag.out', {\n        element,\n        container,\n        source\n      });\n    });\n    dragulaInstance.on('cancel', (element, container, source) => {\n      this.emit('drag.cancel', {\n        element,\n        container,\n        source\n      });\n    });\n    dragulaInstance.on('drop', (el, target, source, sibling) => {\n      if (!target) {\n        dragulaInstance.remove();\n        return;\n      }\n\n      // (1) handle row drop\n      if (isDragRow(el)) {\n        this.handleRowDrop(el, target, source, sibling);\n      } else {\n        // (2) handle form field drop\n        this.handleElementDrop(el, target, source, sibling, dragulaInstance);\n      }\n    });\n    this.emit('dragula.created', dragulaInstance);\n    return dragulaInstance;\n  }\n  emit(event, context) {\n    this._eventBus.fire(event, context);\n  }\n}\nDragging.$inject = ['formFieldRegistry', 'formLayouter', 'formLayoutValidator', 'eventBus', 'modeling', 'pathRegistry'];\n\n// helper //////////\n\nfunction getFormFieldIndex$1(parent, formField) {\n  let fieldFormIndex = parent.components.length;\n  parent.components.forEach(({\n    id\n  }, index) => {\n    if (id === formField.id) {\n      fieldFormIndex = index;\n    }\n  });\n  return fieldFormIndex;\n}\nfunction isRow(node) {\n  return node.classList.contains('fjs-layout-row');\n}\nfunction isDragRow(node) {\n  return node.classList.contains(DRAG_ROW_MOVE_CLS);\n}\nfunction isPalette(node) {\n  return node.classList.contains('fjs-palette-fields');\n}\nfunction getFormParent(node) {\n  return node.closest('.fjs-element');\n}\nfunction setDropNotAllowed(node) {\n  node.classList.add(ERROR_DROP_CLS);\n  set('not-allowed');\n}\nfunction unsetDropNotAllowed(node) {\n  node.classList.remove(ERROR_DROP_CLS);\n  set('grabbing');\n}\n\nfunction FieldDragPreview(props) {\n  const {\n    class: className,\n    Icon,\n    label\n  } = props;\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n    class: classnames__WEBPACK_IMPORTED_MODULE_3___default()('fjs-field-preview', className),\n    children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(Icon, {\n      class: \"fjs-field-preview-icon\",\n      width: \"36\",\n      height: \"36\",\n      viewBox: \"0 0 54 54\"\n    }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"span\", {\n      class: \"fjs-field-preview-text\",\n      children: label\n    })]\n  });\n}\n\nconst COLUMNS_REGEX = /^cds--col(-lg)?/;\nconst ELEMENT_RESIZING_CLS = 'fjs-element-resizing';\nconst GRID_OFFSET_PX = 16;\nfunction FieldResizer(props) {\n  const {\n    field,\n    position\n  } = props;\n  const ref = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useRef)(null);\n  const formLayoutValidator = useService$1('formLayoutValidator');\n  const modeling = useService$1('modeling');\n\n  // we can't use state as we need to\n  // manipulate this inside dragging events\n  const context = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useRef)({\n    startColumns: 0,\n    newColumns: 0\n  });\n  const onResize = throttle((_, delta) => {\n    const {\n      x: dx\n    } = delta;\n    const {\n      layout = {}\n    } = field;\n    const newColumns = calculateNewColumns(ref.current, layout.columns || context.current.startColumns, dx, position);\n    const errorMessage = formLayoutValidator.validateField(field, newColumns);\n    if (!errorMessage) {\n      context.current.newColumns = newColumns;\n\n      // make visual updates to preview change\n      const columnNode = ref.current.closest('.fjs-layout-column');\n      removeMatching(columnNode, COLUMNS_REGEX);\n      columnNode.classList.add(`cds--col-lg-${newColumns}`);\n    }\n  });\n  const onResizeStart = event => {\n    const target = getElementNode(field);\n    const parent = getParent(target);\n\n    // initialize drag handler\n    const onDragStart = createDragger$1(onResize);\n    onDragStart(event);\n\n    // mitigate auto columns on the grid that\n    // has a offset of 16px (1rem) to both side\n    const columnNode = getColumnNode(target);\n    const startWidth = columnNode.getBoundingClientRect().width + GRID_OFFSET_PX;\n    context.current.startColumns = asColumns(startWidth, parent);\n    setResizing(target, position);\n  };\n  const onResizeEnd = () => {\n    const {\n      layout = {}\n    } = field;\n    if (context.current.newColumns) {\n      modeling.editFormField(field, 'layout', {\n        ...layout,\n        columns: context.current.newColumns\n      });\n    }\n    const target = getElementNode(field);\n    unsetResizing(target, position);\n    context.current.newColumns = null;\n  };\n  if (field.type === 'default') {\n    return null;\n  }\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n    ref: ref,\n    class: classnames__WEBPACK_IMPORTED_MODULE_3___default()('fjs-field-resize-handle', 'fjs-field-resize-handle-' + position, DRAG_NO_MOVE_CLS),\n    draggable: true,\n    onDragStart: onResizeStart,\n    onDragEnd: onResizeEnd\n  });\n}\n\n// helper //////\n\nfunction asColumns(width, parent) {\n  const totalWidth = parent.getBoundingClientRect().width;\n  const oneColumn = 1 / 16 * totalWidth;\n  return Math.round(width / oneColumn);\n}\nfunction calculateNewColumns(node, currentColumns, deltaX, position) {\n  const parent = getParent(node);\n\n  // invert delta if we are resizing from the left\n  if (position === 'left') {\n    deltaX = deltaX * -1;\n  }\n  const deltaColumns = asColumns(deltaX, parent);\n  return currentColumns + deltaColumns;\n}\nfunction getParent(node) {\n  return node.closest('.fjs-layout-row');\n}\nfunction removeMatching(node, regex) {\n  return (0,min_dom__WEBPACK_IMPORTED_MODULE_9__.classes)(node).removeMatching(regex);\n}\nfunction getColumnNode(node) {\n  return node.closest('.fjs-layout-column');\n}\nfunction getElementNode(field) {\n  return (0,min_dom__WEBPACK_IMPORTED_MODULE_9__.query)('.fjs-element[data-id=\"' + field.id + '\"]');\n}\nfunction setResizing(node, position) {\n  (0,min_dom__WEBPACK_IMPORTED_MODULE_9__.classes)(node).add(ELEMENT_RESIZING_CLS + '-' + position);\n}\nfunction unsetResizing(node, position) {\n  (0,min_dom__WEBPACK_IMPORTED_MODULE_9__.classes)(node).remove(ELEMENT_RESIZING_CLS + '-' + position);\n}\n\nfunction ContextPad(props) {\n  if (!props.children) {\n    return null;\n  }\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n    class: \"fjs-context-pad\",\n    children: props.children\n  });\n}\nfunction EmptyGroup() {\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n    class: \"fjs-empty-component\",\n    children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"span\", {\n      class: \"fjs-empty-component-text\",\n      children: \"Drag and drop components here.\"\n    })\n  });\n}\nfunction EmptyForm() {\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n    class: \"fjs-empty-editor\",\n    children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n      class: \"fjs-empty-editor-card\",\n      children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(SvgEmptyForm, {}), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"h2\", {\n        children: \"Build your form\"\n      }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"span\", {\n        children: \"Drag and drop components here to start designing.\"\n      }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"span\", {\n        children: \"Use the preview window to test your form.\"\n      })]\n    })\n  });\n}\nfunction Empty(props) {\n  if (['group', 'dynamiclist'].includes(props.field.type)) {\n    return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(EmptyGroup, {});\n  }\n  if (props.field.type === 'default') {\n    return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(EmptyForm, {});\n  }\n  return null;\n}\nfunction Element$1(props) {\n  const eventBus = useService$1('eventBus'),\n    formFieldRegistry = useService$1('formFieldRegistry'),\n    formFields = useService$1('formFields'),\n    modeling = useService$1('modeling'),\n    selection = useService$1('selection');\n  const {\n    hoverInfo\n  } = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useContext)(_bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.FormRenderContext);\n  const {\n    field\n  } = props;\n  const {\n    id,\n    type,\n    showOutline\n  } = field;\n\n  /** @type {import(\"preact\").RefObject<HTMLDivElement>} */\n  const ref = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useRef)();\n  const [hovered, setHovered] = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useState)(false);\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    function scrollIntoView({\n      selection\n    }) {\n      const scrollContainer = (0,_bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.getScrollContainer)(ref.current);\n      if (!selection || selection.type === 'default' || selection.id !== id || !scrollContainer || !ref.current) {\n        return;\n      }\n      const elementBounds = ref.current.getBoundingClientRect();\n      const scrollContainerBounds = scrollContainer.getBoundingClientRect();\n      const isElementLarger = elementBounds.height > scrollContainerBounds.height;\n      const isNotFullyVisible = elementBounds.bottom > scrollContainerBounds.bottom || elementBounds.top < scrollContainerBounds.top;\n      if (isNotFullyVisible && !isElementLarger) {\n        ref.current.scrollIntoView({\n          behavior: 'auto',\n          block: 'nearest'\n        });\n      }\n    }\n    eventBus.on('selection.changed', scrollIntoView);\n    return () => eventBus.off('selection.changed', scrollIntoView);\n  }, [eventBus, id]);\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useLayoutEffect)(() => {\n    if (selection.isSelected(field)) {\n      ref.current.focus();\n    }\n  }, [selection, field]);\n  const onClick = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useCallback)(event => {\n    // TODO(nikku): refactor this to use proper DOM delegation\n    const fieldEl = event.target.closest('[data-id]');\n    if (!fieldEl) {\n      return;\n    }\n    const id = fieldEl.dataset.id;\n    if (id === field.id) {\n      selection.toggle(field);\n    }\n  }, [field, selection]);\n  const isSelected = selection.isSelected(field);\n  const classString = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => {\n    const classes = [];\n    if (props.class) {\n      classes.push(...props.class.split(' '));\n    }\n    if (isSelected) {\n      classes.push('fjs-editor-selected');\n    }\n    const grouplike = ['group', 'dynamiclist'].includes(type);\n    if (grouplike) {\n      classes.push(showOutline ? 'fjs-outlined' : 'fjs-dashed-outlined');\n    }\n    if (hovered) {\n      classes.push('fjs-editor-hovered');\n    }\n    return classes.join(' ');\n  }, [hovered, isSelected, props.class, showOutline, type]);\n  const onRemove = event => {\n    event.stopPropagation();\n    const parentField = formFieldRegistry.get(field._parent);\n    const index = getFormFieldIndex(parentField, field);\n    modeling.removeFormField(field, parentField, index);\n  };\n  const onKeyPress = event => {\n    if (event.key === 'Enter') {\n      event.stopPropagation();\n      selection.toggle(field);\n    }\n  };\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n    class: classString,\n    \"data-id\": id,\n    \"data-field-type\": type,\n    tabIndex: type === 'default' ? -1 : 0,\n    onClick: onClick,\n    onKeyPress: onKeyPress,\n    onMouseOver: e => {\n      if (hoverInfo.cleanup) {\n        hoverInfo.cleanup();\n      }\n      setHovered(true);\n      hoverInfo.cleanup = () => setHovered(false);\n      e.stopPropagation();\n    },\n    ref: ref,\n    children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(DebugColumns, {\n      field: field\n    }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(ContextPad, {\n      children: selection.isSelected(field) && field.type !== 'default' ? (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"button\", {\n        type: \"button\",\n        title: getRemoveButtonTitle(field, formFields),\n        class: \"fjs-context-pad-item\",\n        onClick: onRemove,\n        children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(SvgDelete, {})\n      }) : null\n    }), props.children, (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(FieldResizer, {\n      position: \"left\",\n      field: field\n    }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(FieldResizer, {\n      position: \"right\",\n      field: field\n    })]\n  });\n}\nfunction DebugColumns(props) {\n  const {\n    field\n  } = props;\n  const debugColumnsConfig = useService$1('config.debugColumns');\n  if (!debugColumnsConfig || field.type == 'default') {\n    return null;\n  }\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n    style: \"width: fit-content; padding: 2px 6px; height: 16px; background: var(--color-blue-205-100-95); display: flex; justify-content: center; align-items: center; position: absolute; bottom: -2px; z-index: 2; font-size: 10px; right: 3px;\",\n    class: \"fjs-debug-columns\",\n    children: (field.layout || {}).columns || 'auto'\n  });\n}\nfunction Children(props) {\n  const {\n    field\n  } = props;\n  const {\n    id\n  } = field;\n  const classes = ['fjs-children', DROP_CONTAINER_VERTICAL_CLS];\n  if (props.class) {\n    classes.push(...props.class.split(' '));\n  }\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n    class: classes.join(' '),\n    \"data-id\": id,\n    children: props.children\n  });\n}\nfunction Row(props) {\n  const {\n    row\n  } = props;\n  const {\n    id\n  } = row;\n  const classes = [DROP_CONTAINER_HORIZONTAL_CLS];\n  if (props.class) {\n    classes.push(...props.class.split(' '));\n  }\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n    class: classnames__WEBPACK_IMPORTED_MODULE_3___default()(DRAG_ROW_MOVE_CLS),\n    children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"span\", {\n      class: \"fjs-row-dragger\",\n      children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(SvgDraggable, {})\n    }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n      class: classes.join(' '),\n      style: props.style,\n      \"data-row-id\": id,\n      children: props.children\n    })]\n  });\n}\nfunction Column(props) {\n  const {\n    field\n  } = props;\n  const classes = [DRAG_MOVE_CLS];\n  if (field.type === 'default') {\n    return props.children;\n  }\n  if (props.class) {\n    classes.push(...props.class.split(' '));\n  }\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n    \"data-field-type\": field.type,\n    class: classes.join(' '),\n    children: props.children\n  });\n}\nfunction FormEditor$1() {\n  const dragging = useService$1('dragging'),\n    eventBus = useService$1('eventBus'),\n    formEditor = useService$1('formEditor'),\n    injector = useService$1('injector'),\n    selection = useService$1('selection'),\n    propertiesPanel = useService$1('propertiesPanel'),\n    propertiesPanelConfig = useService$1('config.propertiesPanel');\n  const {\n    schema,\n    properties\n  } = formEditor._getState();\n  const {\n    ariaLabel\n  } = properties;\n  const formContainerRef = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useRef)(null);\n  const propertiesPanelRef = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useRef)(null);\n  const [, setSelection] = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useState)(schema);\n  const [hasInitialized, setHasInitialized] = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useState)(false);\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    function handleSelectionChanged(event) {\n      setSelection(event.selection || schema);\n    }\n    eventBus.on('selection.changed', handleSelectionChanged);\n    return () => {\n      eventBus.off('selection.changed', handleSelectionChanged);\n    };\n  }, [eventBus, schema]);\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    setSelection(selection.get() || schema);\n  }, [selection, schema]);\n  const [drake, setDrake] = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useState)(null);\n  const dragAndDropContext = {\n    drake\n  };\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    let dragulaInstance = dragging.createDragulaInstance({\n      container: [DRAG_CONTAINER_CLS, DROP_CONTAINER_VERTICAL_CLS, DROP_CONTAINER_HORIZONTAL_CLS],\n      mirrorContainer: formContainerRef.current\n    });\n    setDrake(dragulaInstance);\n    const onDetach = () => {\n      if (dragulaInstance) {\n        dragulaInstance.destroy();\n        eventBus.fire('dragula.destroyed');\n      }\n    };\n    const onAttach = () => {\n      onDetach();\n      dragulaInstance = dragging.createDragulaInstance({\n        container: [DRAG_CONTAINER_CLS, DROP_CONTAINER_VERTICAL_CLS, DROP_CONTAINER_HORIZONTAL_CLS],\n        mirrorContainer: formContainerRef.current\n      });\n      setDrake(dragulaInstance);\n    };\n    const onCreate = drake => {\n      setDrake(drake);\n    };\n    const onDragStart = () => {\n      set('grabbing');\n    };\n    const onDragEnd = () => {\n      unset();\n    };\n    eventBus.on('attach', onAttach);\n    eventBus.on('detach', onDetach);\n    eventBus.on('dragula.created', onCreate);\n    eventBus.on('drag.start', onDragStart);\n    eventBus.on('drag.end', onDragEnd);\n    return () => {\n      onDetach();\n      eventBus.off('attach', onAttach);\n      eventBus.off('detach', onDetach);\n      eventBus.off('dragula.created', onCreate);\n      eventBus.off('drag.start', onDragStart);\n      eventBus.off('drag.end', onDragEnd);\n    };\n  }, [dragging, eventBus]);\n\n  // fire event after render to notify interested parties\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    if (hasInitialized) {\n      return;\n    }\n    setHasInitialized(true);\n    eventBus.fire('rendered');\n\n    // keep deprecated event to ensure backward compatibility\n    eventBus.fire('formEditor.rendered');\n  }, [eventBus, hasInitialized]);\n  const formRenderContext = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => ({\n    Children,\n    Column,\n    Element: Element$1,\n    Empty,\n    Row,\n    hoverInfo: {}\n  }), []);\n  const formContext = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => ({\n    getService(type, strict = true) {\n      // TODO(philippfromme): clean up\n      if (type === 'form') {\n        return {\n          _getState() {\n            return {\n              data: {},\n              errors: {},\n              properties: {\n                ariaLabel,\n                disabled: true\n              },\n              schema\n            };\n          }\n        };\n      }\n      return injector.get(type, strict);\n    },\n    formId: formEditor._id\n  }), [ariaLabel, formEditor, injector, schema]);\n  const onSubmit = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useCallback)(() => {}, []);\n  const onReset = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useCallback)(() => {}, []);\n\n  // attach default properties panel\n  const hasDefaultPropertiesPanel = defaultPropertiesPanel(propertiesPanelConfig);\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    if (hasDefaultPropertiesPanel) {\n      propertiesPanel.attachTo(propertiesPanelRef.current);\n    }\n  }, [propertiesPanelRef, propertiesPanel, hasDefaultPropertiesPanel]);\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n    class: \"fjs-form-editor\",\n    children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(SlotFillRoot, {\n      children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(DragAndDropContext.Provider, {\n        value: dragAndDropContext,\n        children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(ModularSection, {\n          rootClass: \"fjs-palette-container\",\n          section: \"palette\",\n          children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(Palette, {})\n        }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n          ref: formContainerRef,\n          class: \"fjs-form-container\",\n          children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.FormContext.Provider, {\n            value: formContext,\n            children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.FormRenderContext.Provider, {\n              // @ts-ignore\n              value: formRenderContext,\n              children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.FormComponent, {\n                onSubmit: onSubmit,\n                onReset: onReset\n              })\n            })\n          })\n        }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(CreatePreview, {})]\n      }), hasDefaultPropertiesPanel && (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n        class: \"fjs-editor-properties-container\",\n        ref: propertiesPanelRef\n      }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(ModularSection, {\n        rootClass: \"fjs-render-injector-container\",\n        section: \"renderInjector\",\n        children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(InjectedRendersRoot, {})\n      })]\n    })\n  });\n}\nfunction getFormFieldIndex(parent, formField) {\n  let fieldFormIndex = parent.components.length;\n  parent.components.forEach(({\n    id\n  }, index) => {\n    if (id === formField.id) {\n      fieldFormIndex = index;\n    }\n  });\n  return fieldFormIndex;\n}\nfunction CreatePreview(props) {\n  const {\n    drake\n  } = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useContext)(DragAndDropContext);\n  const formFields = useService$1('formFields');\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    if (!drake) {\n      return;\n    }\n    function handleCloned(clone, original, type) {\n      const fieldType = clone.dataset.fieldType;\n\n      // (1) field preview\n      if (fieldType) {\n        const paletteEntry = findPaletteEntry(fieldType, formFields);\n        if (!paletteEntry) {\n          return;\n        }\n        const {\n          label\n        } = paletteEntry;\n        const Icon = getPaletteIcon(paletteEntry);\n        clone.innerHTML = '';\n        clone.class = 'gu-mirror';\n        clone.classList.add('fjs-field-preview-container');\n        if (original.classList.contains('fjs-palette-field')) {\n          // default to auto columns when creating from palette\n          clone.classList.add('cds--col');\n        }\n\n        // todo(pinussilvestrus): dragula, how to mitigate cursor position\n        // https://github.com/bevacqua/dragula/issues/285\n        (0,preact__WEBPACK_IMPORTED_MODULE_6__.render)((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(FieldDragPreview, {\n          label: label,\n          Icon: Icon\n        }), clone);\n      } else {\n        // (2) row preview\n\n        // remove elements from copy (context pad, row dragger, ...)\n        ['fjs-context-pad', 'fjs-row-dragger', 'fjs-debug-columns'].forEach(cls => {\n          const cloneNode = clone.querySelectorAll('.' + cls);\n          cloneNode.length && cloneNode.forEach(e => e.remove());\n        });\n\n        // mirror grid\n        clone.classList.add('cds--grid');\n        clone.classList.add('cds--grid--condensed');\n      }\n    }\n    drake.on('cloned', handleCloned);\n    return () => drake.off('cloned', handleCloned);\n  }, [drake, formFields]);\n  return null;\n}\n\n// helper //////\n\nfunction findPaletteEntry(type, formFields) {\n  return collectPaletteEntries(formFields).find(entry => entry.type === type);\n}\nfunction defaultPropertiesPanel(propertiesPanelConfig) {\n  return !(propertiesPanelConfig && propertiesPanelConfig.parent);\n}\nfunction getRemoveButtonTitle(formField, formFields) {\n  const entry = findPaletteEntry(formField.type, formFields);\n  if (!entry) {\n    return 'Remove form field';\n  }\n  return `Remove ${entry.label}`;\n}\n\nclass Renderer {\n  constructor(renderConfig, eventBus, formEditor, injector) {\n    const {\n      container,\n      compact = false\n    } = renderConfig;\n    eventBus.on('form.init', function () {\n      // emit <canvas.init> so dependent components can hook in\n      // this is required to register keyboard bindings\n      eventBus.fire('canvas.init', {\n        svg: container,\n        viewport: null\n      });\n    });\n\n    // focus container on over if no selection\n    container.addEventListener('mouseover', function () {\n      if (document.activeElement === document.body) {\n        container.focus({\n          preventScroll: true\n        });\n      }\n    });\n\n    // ensure we focus the container if the users clicks\n    // inside; this follows input focus handling closely\n    container.addEventListener('click', function (event) {\n      // force focus when clicking container\n      if (!container.contains(document.activeElement)) {\n        container.focus({\n          preventScroll: true\n        });\n      }\n    });\n    const App = () => {\n      const [state, setState] = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useState)(formEditor._getState());\n      const formEditorContext = {\n        getService(type, strict = true) {\n          return injector.get(type, strict);\n        }\n      };\n      formEditor.on('changed', newState => {\n        setState(newState);\n      });\n      const {\n        schema\n      } = state;\n      if (!schema) {\n        return null;\n      }\n      return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n        class: `fjs-container fjs-editor-container ${compact ? 'fjs-editor-compact' : ''}`,\n        children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(FormEditorContext.Provider, {\n          value: formEditorContext,\n          children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(FormEditor$1, {})\n        })\n      });\n    };\n    eventBus.on('form.init', () => {\n      (0,preact__WEBPACK_IMPORTED_MODULE_6__.render)((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(App, {}), container);\n    });\n    eventBus.on('form.destroy', () => {\n      (0,preact__WEBPACK_IMPORTED_MODULE_6__.render)(null, container);\n    });\n  }\n}\nRenderer.$inject = ['config.renderer', 'eventBus', 'formEditor', 'injector'];\n\nconst RenderModule = {\n  __init__: ['formFields', 'renderer'],\n  formFields: ['type', EditorFormFields],\n  renderer: ['type', Renderer]\n};\n\nconst CoreModule = {\n  __depends__: [RenderModule],\n  debounce: ['factory', DebounceFactory],\n  eventBus: ['type', EventBus],\n  importer: ['type', _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.Importer],\n  formFieldRegistry: ['type', FormFieldRegistry],\n  pathRegistry: ['type', _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.PathRegistry],\n  formLayouter: ['type', _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.FormLayouter],\n  formLayoutValidator: ['type', FormLayoutValidator],\n  fieldFactory: ['type', _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.FieldFactory]\n};\n\n/**\n * @typedef {import('didi').Injector} Injector\n *\n * @typedef {import('../../core/EventBus').default} EventBus\n */\n\nvar NOT_REGISTERED_ERROR = 'is not a registered action',\n  IS_REGISTERED_ERROR = 'is already registered';\n\n/**\n * An interface that provides access to modeling actions by decoupling\n * the one who requests the action to be triggered and the trigger itself.\n *\n * It's possible to add new actions by registering them with registerAction\n * and likewise unregister existing ones with unregisterAction.\n *\n *\n * ## Life-Cycle and configuration\n *\n * The editor actions will wait for diagram initialization before\n * registering default actions _and_ firing an `editorActions.init` event.\n *\n * Interested parties may listen to the `editorActions.init` event with\n * low priority to check, which actions got registered. Other components\n * may use the event to register their own actions via `registerAction`.\n *\n * @param {EventBus} eventBus\n * @param {Injector} injector\n */\nfunction EditorActions(eventBus, injector) {\n  // initialize actions\n  this._actions = {};\n  var self = this;\n  eventBus.on('diagram.init', function () {\n    // all diagram modules got loaded; check which ones\n    // are available and register the respective default actions\n    self._registerDefaultActions(injector);\n\n    // ask interested parties to register available editor\n    // actions on diagram initialization\n    eventBus.fire('editorActions.init', {\n      editorActions: self\n    });\n  });\n}\nEditorActions.$inject = ['eventBus', 'injector'];\n\n/**\n * Register default actions.\n *\n * @param {Injector} injector\n */\nEditorActions.prototype._registerDefaultActions = function (injector) {\n  // (1) retrieve optional components to integrate with\n\n  var commandStack = injector.get('commandStack', false);\n  var modeling = injector.get('modeling', false);\n  var selection = injector.get('selection', false);\n  var zoomScroll = injector.get('zoomScroll', false);\n  var copyPaste = injector.get('copyPaste', false);\n  var canvas = injector.get('canvas', false);\n  var rules = injector.get('rules', false);\n  var keyboardMove = injector.get('keyboardMove', false);\n  var keyboardMoveSelection = injector.get('keyboardMoveSelection', false);\n\n  // (2) check components and register actions\n\n  if (commandStack) {\n    this.register('undo', function () {\n      commandStack.undo();\n    });\n    this.register('redo', function () {\n      commandStack.redo();\n    });\n  }\n  if (copyPaste && selection) {\n    this.register('copy', function () {\n      var selectedElements = selection.get();\n      if (selectedElements.length) {\n        return copyPaste.copy(selectedElements);\n      }\n    });\n  }\n  if (copyPaste) {\n    this.register('paste', function () {\n      copyPaste.paste();\n    });\n  }\n  if (zoomScroll) {\n    this.register('stepZoom', function (opts) {\n      zoomScroll.stepZoom(opts.value);\n    });\n  }\n  if (canvas) {\n    this.register('zoom', function (opts) {\n      canvas.zoom(opts.value);\n    });\n  }\n  if (modeling && selection && rules) {\n    this.register('removeSelection', function () {\n      var selectedElements = selection.get();\n      if (!selectedElements.length) {\n        return;\n      }\n      var allowed = rules.allowed('elements.delete', {\n          elements: selectedElements\n        }),\n        removableElements;\n      if (allowed === false) {\n        return;\n      } else if ((0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isArray)(allowed)) {\n        removableElements = allowed;\n      } else {\n        removableElements = selectedElements;\n      }\n      if (removableElements.length) {\n        modeling.removeElements(removableElements.slice());\n      }\n    });\n  }\n  if (keyboardMove) {\n    this.register('moveCanvas', function (opts) {\n      keyboardMove.moveCanvas(opts);\n    });\n  }\n  if (keyboardMoveSelection) {\n    this.register('moveSelection', function (opts) {\n      keyboardMoveSelection.moveSelection(opts.direction, opts.accelerated);\n    });\n  }\n};\n\n/**\n * Triggers a registered action\n *\n * @param {string} action\n * @param {Object} opts\n *\n * @return {unknown} Returns what the registered listener returns\n */\nEditorActions.prototype.trigger = function (action, opts) {\n  if (!this._actions[action]) {\n    throw error(action, NOT_REGISTERED_ERROR);\n  }\n  return this._actions[action](opts);\n};\n\n/**\n * Registers a collections of actions.\n * The key of the object will be the name of the action.\n *\n * @example\n *\n * ```javascript\n * var actions = {\n *   spaceTool: function() {\n *     spaceTool.activateSelection();\n *   },\n *   lassoTool: function() {\n *     lassoTool.activateSelection();\n *   }\n * ];\n *\n * editorActions.register(actions);\n *\n * editorActions.isRegistered('spaceTool'); // true\n * ```\n *\n * @param {Object} actions\n */\nEditorActions.prototype.register = function (actions, listener) {\n  var self = this;\n  if (typeof actions === 'string') {\n    return this._registerAction(actions, listener);\n  }\n  (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.forEach)(actions, function (listener, action) {\n    self._registerAction(action, listener);\n  });\n};\n\n/**\n * Registers a listener to an action key\n *\n * @param {string} action\n * @param {Function} listener\n */\nEditorActions.prototype._registerAction = function (action, listener) {\n  if (this.isRegistered(action)) {\n    throw error(action, IS_REGISTERED_ERROR);\n  }\n  this._actions[action] = listener;\n};\n\n/**\n * Unregister an existing action\n *\n * @param {string} action\n */\nEditorActions.prototype.unregister = function (action) {\n  if (!this.isRegistered(action)) {\n    throw error(action, NOT_REGISTERED_ERROR);\n  }\n  this._actions[action] = undefined;\n};\n\n/**\n * Returns the identifiers of all currently registered editor actions\n *\n * @return {string[]}\n */\nEditorActions.prototype.getActions = function () {\n  return Object.keys(this._actions);\n};\n\n/**\n * Checks wether the given action is registered\n *\n * @param {string} action\n *\n * @return {boolean}\n */\nEditorActions.prototype.isRegistered = function (action) {\n  return !!this._actions[action];\n};\nfunction error(action, message) {\n  return new Error(action + ' ' + message);\n}\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nvar BaseEditorActionsModule = {\n  __init__: ['editorActions'],\n  editorActions: ['type', EditorActions]\n};\n\nclass FormEditorActions extends EditorActions {\n  constructor(eventBus, injector) {\n    super(eventBus, injector);\n    eventBus.on('form.init', () => {\n      this._registerDefaultActions(injector);\n      eventBus.fire('editorActions.init', {\n        editorActions: this\n      });\n    });\n  }\n  _registerDefaultActions(injector) {\n    const commandStack = injector.get('commandStack', false),\n      formFieldRegistry = injector.get('formFieldRegistry', false),\n      selection = injector.get('selection', false);\n    if (commandStack) {\n      // @ts-ignore\n      this.register('undo', () => {\n        commandStack.undo();\n      });\n\n      // @ts-ignore\n      this.register('redo', () => {\n        commandStack.redo();\n      });\n    }\n    if (formFieldRegistry && selection) {\n      // @ts-ignore\n      this.register('selectFormField', (options = {}) => {\n        const {\n          id\n        } = options;\n        if (!id) {\n          return;\n        }\n        const formField = formFieldRegistry.get(id);\n        if (formField) {\n          selection.set(formField);\n        }\n      });\n    }\n  }\n}\nFormEditorActions.$inject = ['eventBus', 'injector'];\n\nconst EditorActionsModule = {\n  __depends__: [BaseEditorActionsModule],\n  editorActions: ['type', FormEditorActions]\n};\n\nclass EditorTemplating {\n  // same rules as viewer templating\n  isTemplate(value) {\n    return (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isString)(value) && (value.startsWith('=') || /{{/.test(value));\n  }\n\n  // return the template raw, as we usually just want to display that\n  evaluate(template) {\n    return template;\n  }\n}\nEditorTemplating.$inject = [];\n\nconst EditorExpressionLanguageModule = {\n  __init__: ['expressionLanguage', 'templating'],\n  expressionLanguage: ['type', _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.FeelExpressionLanguage],\n  templating: ['type', EditorTemplating]\n};\n\nvar KEYS_COPY = ['c', 'C'];\nvar KEYS_PASTE = ['v', 'V'];\nvar KEYS_REDO = ['y', 'Y'];\nvar KEYS_UNDO = ['z', 'Z'];\n\n/**\r\n * Returns true if event was triggered with any modifier\r\n * @param {KeyboardEvent} event\r\n */\nfunction hasModifier(event) {\n  return event.ctrlKey || event.metaKey || event.shiftKey || event.altKey;\n}\n\n/**\r\n * @param {KeyboardEvent} event\r\n * @return {boolean}\r\n */\nfunction isCmd(event) {\n  // ensure we don't react to AltGr\n  // (mapped to CTRL + ALT)\n  if (event.altKey) {\n    return false;\n  }\n  return event.ctrlKey || event.metaKey;\n}\n\n/**\r\n * Checks if key pressed is one of provided keys.\r\n *\r\n * @param {string|string[]} keys\r\n * @param {KeyboardEvent} event\r\n * @return {boolean}\r\n */\nfunction isKey(keys, event) {\n  keys = (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isArray)(keys) ? keys : [keys];\n  return keys.indexOf(event.key) !== -1 || keys.indexOf(event.code) !== -1;\n}\n\n/**\r\n * @param {KeyboardEvent} event\r\n */\nfunction isShift(event) {\n  return event.shiftKey;\n}\n\n/**\r\n * @param {KeyboardEvent} event\r\n */\nfunction isCopy(event) {\n  return isCmd(event) && isKey(KEYS_COPY, event);\n}\n\n/**\r\n * @param {KeyboardEvent} event\r\n */\nfunction isPaste(event) {\n  return isCmd(event) && isKey(KEYS_PASTE, event);\n}\n\n/**\r\n * @param {KeyboardEvent} event\r\n */\nfunction isUndo(event) {\n  return isCmd(event) && !isShift(event) && isKey(KEYS_UNDO, event);\n}\n\n/**\r\n * @param {KeyboardEvent} event\r\n */\nfunction isRedo(event) {\n  return isCmd(event) && (isKey(KEYS_REDO, event) || isKey(KEYS_UNDO, event) && isShift(event));\n}\n\n/**\n * @typedef {import('../../core/EventBus').default} EventBus\n *\n * @typedef {({ keyEvent: KeyboardEvent }) => any} Listener\n */\n\nvar KEYDOWN_EVENT = 'keyboard.keydown',\n  KEYUP_EVENT = 'keyboard.keyup';\nvar DEFAULT_PRIORITY$2 = 1000;\nvar compatMessage = 'Keyboard binding is now implicit; explicit binding to an element got removed. For more information, see https://github.com/bpmn-io/diagram-js/issues/661';\n\n/**\n * A keyboard abstraction that may be activated and\n * deactivated by users at will, consuming global key events\n * and triggering diagram actions.\n *\n * For keys pressed down, keyboard fires `keyboard.keydown` event.\n * The event context contains one field which is `KeyboardEvent` event.\n *\n * The implementation fires the following key events that allow\n * other components to hook into key handling:\n *\n *  - keyboard.bind\n *  - keyboard.unbind\n *  - keyboard.init\n *  - keyboard.destroy\n *\n * All events contain one field which is node.\n *\n * Specify the initial keyboard binding state via the\n * `keyboard.bind=true|false` configuration option.\n *\n * @param {Object} config\n * @param {boolean} [config.bind]\n * @param {EventBus} eventBus\n */\nfunction Keyboard(config, eventBus) {\n  var self = this;\n  this._config = config = config || {};\n  this._eventBus = eventBus;\n  this._keydownHandler = this._keydownHandler.bind(this);\n  this._keyupHandler = this._keyupHandler.bind(this);\n\n  // properly clean dom registrations\n  eventBus.on('diagram.destroy', function () {\n    self._fire('destroy');\n    self.unbind();\n  });\n  if (config.bindTo) {\n    console.error('unsupported configuration <keyboard.bindTo>', new Error(compatMessage));\n  }\n  var bind = config && config.bind !== false;\n  eventBus.on('canvas.init', function (event) {\n    self._target = event.svg;\n    if (bind) {\n      self.bind();\n    }\n    self._fire('init');\n  });\n}\nKeyboard.$inject = ['config.keyboard', 'eventBus'];\nKeyboard.prototype._keydownHandler = function (event) {\n  this._keyHandler(event, KEYDOWN_EVENT);\n};\nKeyboard.prototype._keyupHandler = function (event) {\n  this._keyHandler(event, KEYUP_EVENT);\n};\nKeyboard.prototype._keyHandler = function (event, type) {\n  var eventBusResult;\n  if (this._isEventIgnored(event)) {\n    return;\n  }\n  var context = {\n    keyEvent: event\n  };\n  eventBusResult = this._eventBus.fire(type || KEYDOWN_EVENT, context);\n  if (eventBusResult) {\n    event.preventDefault();\n  }\n};\nKeyboard.prototype._isEventIgnored = function (event) {\n  return false;\n};\n\n/**\n * Bind keyboard events to the given DOM node.\n *\n * @overlord\n * @deprecated No longer in use since version 15.0.0.\n *\n * @param {EventTarget} node\n */\n/**\n * Bind keyboard events to the canvas node.\n */\nKeyboard.prototype.bind = function (node) {\n  // legacy <node> argument provided\n  if (node) {\n    console.error('unsupported argument <node>', new Error(compatMessage));\n  }\n\n  // make sure that the keyboard is only bound once to the DOM\n  this.unbind();\n  node = this._node = this._target;\n\n  // bind key events\n  min_dom__WEBPACK_IMPORTED_MODULE_9__.event.bind(node, 'keydown', this._keydownHandler);\n  min_dom__WEBPACK_IMPORTED_MODULE_9__.event.bind(node, 'keyup', this._keyupHandler);\n  this._fire('bind');\n};\n\n/**\n * @return {EventTarget}\n */\nKeyboard.prototype.getBinding = function () {\n  return this._node;\n};\nKeyboard.prototype.unbind = function () {\n  var node = this._node;\n  if (node) {\n    this._fire('unbind');\n\n    // unbind key events\n    min_dom__WEBPACK_IMPORTED_MODULE_9__.event.unbind(node, 'keydown', this._keydownHandler);\n    min_dom__WEBPACK_IMPORTED_MODULE_9__.event.unbind(node, 'keyup', this._keyupHandler);\n  }\n  this._node = null;\n};\n\n/**\n * @param {string} event\n */\nKeyboard.prototype._fire = function (event) {\n  this._eventBus.fire('keyboard.' + event, {\n    node: this._node\n  });\n};\n\n/**\n * Add a listener function that is notified with `KeyboardEvent` whenever\n * the keyboard is bound and the user presses a key. If no priority is\n * provided, the default value of 1000 is used.\n *\n * @param {number} [priority]\n * @param {Listener} listener\n * @param {string} [type='keyboard.keydown']\n */\nKeyboard.prototype.addListener = function (priority, listener, type) {\n  if ((0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isFunction)(priority)) {\n    type = listener;\n    listener = priority;\n    priority = DEFAULT_PRIORITY$2;\n  }\n  this._eventBus.on(type || KEYDOWN_EVENT, priority, listener);\n};\n\n/**\n * Remove a listener function.\n *\n * @param {Listener} listener\n * @param {string} [type='keyboard.keydown']\n */\nKeyboard.prototype.removeListener = function (listener, type) {\n  this._eventBus.off(type || KEYDOWN_EVENT, listener);\n};\nKeyboard.prototype.hasModifier = hasModifier;\nKeyboard.prototype.isCmd = isCmd;\nKeyboard.prototype.isShift = isShift;\nKeyboard.prototype.isKey = isKey;\n\nvar LOW_PRIORITY$1 = 500;\n\n/**\n * Adds default keyboard bindings.\n *\n * This does not pull in any features will bind only actions that\n * have previously been registered against the editorActions component.\n *\n * @param {EventBus} eventBus\n * @param {Keyboard} keyboard\n */\nfunction KeyboardBindings(eventBus, keyboard) {\n  var self = this;\n  eventBus.on('editorActions.init', LOW_PRIORITY$1, function (event) {\n    var editorActions = event.editorActions;\n    self.registerBindings(keyboard, editorActions);\n  });\n}\nKeyboardBindings.$inject = ['eventBus', 'keyboard'];\n\n/**\n * Register available keyboard bindings.\n *\n * @param {Keyboard} keyboard\n * @param {EditorActions} editorActions\n */\nKeyboardBindings.prototype.registerBindings = function (keyboard, editorActions) {\n  /**\n   * Add keyboard binding if respective editor action\n   * is registered.\n   *\n   * @param {string} action name\n   * @param {Function} fn that implements the key binding\n   */\n  function addListener(action, fn) {\n    if (editorActions.isRegistered(action)) {\n      keyboard.addListener(fn);\n    }\n  }\n\n  // undo\n  // (CTRL|CMD) + Z\n  addListener('undo', function (context) {\n    var event = context.keyEvent;\n    if (isUndo(event)) {\n      editorActions.trigger('undo');\n      return true;\n    }\n  });\n\n  // redo\n  // CTRL + Y\n  // CMD + SHIFT + Z\n  addListener('redo', function (context) {\n    var event = context.keyEvent;\n    if (isRedo(event)) {\n      editorActions.trigger('redo');\n      return true;\n    }\n  });\n\n  // copy\n  // CTRL/CMD + C\n  addListener('copy', function (context) {\n    var event = context.keyEvent;\n    if (isCopy(event)) {\n      editorActions.trigger('copy');\n      return true;\n    }\n  });\n\n  // paste\n  // CTRL/CMD + V\n  addListener('paste', function (context) {\n    var event = context.keyEvent;\n    if (isPaste(event)) {\n      editorActions.trigger('paste');\n      return true;\n    }\n  });\n\n  // zoom in one step\n  // CTRL/CMD + +\n  addListener('stepZoom', function (context) {\n    var event = context.keyEvent;\n\n    // quirk: it has to be triggered by `=` as well to work on international keyboard layout\n    // cf: https://github.com/bpmn-io/bpmn-js/issues/1362#issuecomment-722989754\n    if (isKey(['+', 'Add', '='], event) && isCmd(event)) {\n      editorActions.trigger('stepZoom', {\n        value: 1\n      });\n      return true;\n    }\n  });\n\n  // zoom out one step\n  // CTRL + -\n  addListener('stepZoom', function (context) {\n    var event = context.keyEvent;\n    if (isKey(['-', 'Subtract'], event) && isCmd(event)) {\n      editorActions.trigger('stepZoom', {\n        value: -1\n      });\n      return true;\n    }\n  });\n\n  // zoom to the default level\n  // CTRL + 0\n  addListener('zoom', function (context) {\n    var event = context.keyEvent;\n    if (isKey('0', event) && isCmd(event)) {\n      editorActions.trigger('zoom', {\n        value: 1\n      });\n      return true;\n    }\n  });\n\n  // delete selected element\n  // DEL\n  addListener('removeSelection', function (context) {\n    var event = context.keyEvent;\n    if (isKey(['Backspace', 'Delete', 'Del'], event)) {\n      editorActions.trigger('removeSelection');\n      return true;\n    }\n  });\n};\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nvar KeyboardModule = {\n  __init__: ['keyboard', 'keyboardBindings'],\n  keyboard: ['type', Keyboard],\n  keyboardBindings: ['type', KeyboardBindings]\n};\n\nconst LOW_PRIORITY = 500;\nclass FormEditorKeyboardBindings {\n  constructor(eventBus, keyboard) {\n    eventBus.on('editorActions.init', LOW_PRIORITY, event => {\n      const {\n        editorActions\n      } = event;\n      this.registerBindings(keyboard, editorActions);\n    });\n  }\n  registerBindings(keyboard, editorActions) {\n    function addListener(action, fn) {\n      if (editorActions.isRegistered(action)) {\n        keyboard.addListener(fn);\n      }\n    }\n\n    // undo\n    // (CTRL|CMD) + Z\n    addListener('undo', context => {\n      const {\n        keyEvent\n      } = context;\n      if (isUndo(keyEvent)) {\n        editorActions.trigger('undo');\n        return true;\n      }\n    });\n\n    // redo\n    // CTRL + Y\n    // CMD + SHIFT + Z\n    addListener('redo', context => {\n      const {\n        keyEvent\n      } = context;\n      if (isRedo(keyEvent)) {\n        editorActions.trigger('redo');\n        return true;\n      }\n    });\n  }\n}\nFormEditorKeyboardBindings.$inject = ['eventBus', 'keyboard'];\n\nconst FormEditorKeyboardModule = {\n  __depends__: [KeyboardModule],\n  __init__: ['keyboardBindings'],\n  keyboardBindings: ['type', FormEditorKeyboardBindings]\n};\n\nconst DraggingModule = {\n  __init__: ['dragging'],\n  dragging: ['type', Dragging]\n};\n\n/**\n * @typedef {import('didi').Injector} Injector\n *\n * @typedef {import('../core/Types').ElementLike} ElementLike\n *\n * @typedef {import('../core/EventBus').default} EventBus\n * @typedef {import('./CommandHandler').default} CommandHandler\n *\n * @typedef { any } CommandContext\n * @typedef { {\n *   new (...args: any[]) : CommandHandler\n * } } CommandHandlerConstructor\n * @typedef { {\n *   [key: string]: CommandHandler;\n * } } CommandHandlerMap\n * @typedef { {\n *   command: string;\n *   context: any;\n *   id?: any;\n * } } CommandStackAction\n * @typedef { {\n *   actions: CommandStackAction[];\n *   dirty: ElementLike[];\n *   trigger: 'execute' | 'undo' | 'redo' | 'clear' | null;\n *   atomic?: boolean;\n * } } CurrentExecution\n */\n\n/**\n * A service that offers un- and redoable execution of commands.\n *\n * The command stack is responsible for executing modeling actions\n * in a un- and redoable manner. To do this it delegates the actual\n * command execution to {@link CommandHandler}s.\n *\n * Command handlers provide {@link CommandHandler#execute(ctx)} and\n * {@link CommandHandler#revert(ctx)} methods to un- and redo a command\n * identified by a command context.\n *\n *\n * ## Life-Cycle events\n *\n * In the process the command stack fires a number of life-cycle events\n * that other components to participate in the command execution.\n *\n *    * preExecute\n *    * preExecuted\n *    * execute\n *    * executed\n *    * postExecute\n *    * postExecuted\n *    * revert\n *    * reverted\n *\n * A special event is used for validating, whether a command can be\n * performed prior to its execution.\n *\n *    * canExecute\n *\n * Each of the events is fired as `commandStack.{eventName}` and\n * `commandStack.{commandName}.{eventName}`, respectively. This gives\n * components fine grained control on where to hook into.\n *\n * The event object fired transports `command`, the name of the\n * command and `context`, the command context.\n *\n *\n * ## Creating Command Handlers\n *\n * Command handlers should provide the {@link CommandHandler#execute(ctx)}\n * and {@link CommandHandler#revert(ctx)} methods to implement\n * redoing and undoing of a command.\n *\n * A command handler _must_ ensure undo is performed properly in order\n * not to break the undo chain. It must also return the shapes that\n * got changed during the `execute` and `revert` operations.\n *\n * Command handlers may execute other modeling operations (and thus\n * commands) in their `preExecute(d)` and `postExecute(d)` phases. The command\n * stack will properly group all commands together into a logical unit\n * that may be re- and undone atomically.\n *\n * Command handlers must not execute other commands from within their\n * core implementation (`execute`, `revert`).\n *\n *\n * ## Change Tracking\n *\n * During the execution of the CommandStack it will keep track of all\n * elements that have been touched during the command's execution.\n *\n * At the end of the CommandStack execution it will notify interested\n * components via an 'elements.changed' event with all the dirty\n * elements.\n *\n * The event can be picked up by components that are interested in the fact\n * that elements have been changed. One use case for this is updating\n * their graphical representation after moving / resizing or deletion.\n *\n * @see CommandHandler\n *\n * @param {EventBus} eventBus\n * @param {Injector} injector\n */\nfunction CommandStack(eventBus, injector) {\n  /**\n   * A map of all registered command handlers.\n   *\n   * @type {CommandHandlerMap}\n   */\n  this._handlerMap = {};\n\n  /**\n   * A stack containing all re/undoable actions on the diagram\n   *\n   * @type {CommandStackAction[]}\n   */\n  this._stack = [];\n\n  /**\n   * The current index on the stack\n   *\n   * @type {number}\n   */\n  this._stackIdx = -1;\n\n  /**\n   * Current active commandStack execution\n   *\n   * @type {CurrentExecution}\n   */\n  this._currentExecution = {\n    actions: [],\n    dirty: [],\n    trigger: null\n  };\n\n  /**\n   * @type {Injector}\n   */\n  this._injector = injector;\n\n  /**\n   * @type EventBus\n   */\n  this._eventBus = eventBus;\n\n  /**\n   * @type { number }\n   */\n  this._uid = 1;\n  eventBus.on(['diagram.destroy', 'diagram.clear'], function () {\n    this.clear(false);\n  }, this);\n}\nCommandStack.$inject = ['eventBus', 'injector'];\n\n/**\n * Execute a command.\n *\n * @param {string} command The command to execute.\n * @param {CommandContext} context The context with which to execute the command.\n */\nCommandStack.prototype.execute = function (command, context) {\n  if (!command) {\n    throw new Error('command required');\n  }\n  this._currentExecution.trigger = 'execute';\n  const action = {\n    command: command,\n    context: context\n  };\n  this._pushAction(action);\n  this._internalExecute(action);\n  this._popAction();\n};\n\n/**\n * Check whether a command can be executed.\n *\n * Implementors may hook into the mechanism on two ways:\n *\n *   * in event listeners:\n *\n *     Users may prevent the execution via an event listener.\n *     It must prevent the default action for `commandStack.(<command>.)canExecute` events.\n *\n *   * in command handlers:\n *\n *     If the method {@link CommandHandler#canExecute} is implemented in a handler\n *     it will be called to figure out whether the execution is allowed.\n *\n * @param {string} command The command to execute.\n * @param {CommandContext} context The context with which to execute the command.\n *\n * @return {boolean} Whether the command can be executed with the given context.\n */\nCommandStack.prototype.canExecute = function (command, context) {\n  const action = {\n    command: command,\n    context: context\n  };\n  const handler = this._getHandler(command);\n  let result = this._fire(command, 'canExecute', action);\n\n  // handler#canExecute will only be called if no listener\n  // decided on a result already\n  if (result === undefined) {\n    if (!handler) {\n      return false;\n    }\n    if (handler.canExecute) {\n      result = handler.canExecute(context);\n    }\n  }\n  return result;\n};\n\n/**\n * Clear the command stack, erasing all undo / redo history.\n *\n * @param {boolean} [emit=true] Whether to fire an event. Defaults to `true`.\n */\nCommandStack.prototype.clear = function (emit) {\n  this._stack.length = 0;\n  this._stackIdx = -1;\n  if (emit !== false) {\n    this._fire('changed', {\n      trigger: 'clear'\n    });\n  }\n};\n\n/**\n * Undo last command(s)\n */\nCommandStack.prototype.undo = function () {\n  let action = this._getUndoAction(),\n    next;\n  if (action) {\n    this._currentExecution.trigger = 'undo';\n    this._pushAction(action);\n    while (action) {\n      this._internalUndo(action);\n      next = this._getUndoAction();\n      if (!next || next.id !== action.id) {\n        break;\n      }\n      action = next;\n    }\n    this._popAction();\n  }\n};\n\n/**\n * Redo last command(s)\n */\nCommandStack.prototype.redo = function () {\n  let action = this._getRedoAction(),\n    next;\n  if (action) {\n    this._currentExecution.trigger = 'redo';\n    this._pushAction(action);\n    while (action) {\n      this._internalExecute(action, true);\n      next = this._getRedoAction();\n      if (!next || next.id !== action.id) {\n        break;\n      }\n      action = next;\n    }\n    this._popAction();\n  }\n};\n\n/**\n * Register a handler instance with the command stack.\n *\n * @param {string} command Command to be executed.\n * @param {CommandHandler} handler Handler to execute the command.\n */\nCommandStack.prototype.register = function (command, handler) {\n  this._setHandler(command, handler);\n};\n\n/**\n * Register a handler type with the command stack  by instantiating it and\n * injecting its dependencies.\n *\n * @param {string} command Command to be executed.\n * @param {CommandHandlerConstructor} handlerCls Constructor to instantiate a {@link CommandHandler}.\n */\nCommandStack.prototype.registerHandler = function (command, handlerCls) {\n  if (!command || !handlerCls) {\n    throw new Error('command and handlerCls must be defined');\n  }\n  const handler = this._injector.instantiate(handlerCls);\n  this.register(command, handler);\n};\n\n/**\n * @return {boolean}\n */\nCommandStack.prototype.canUndo = function () {\n  return !!this._getUndoAction();\n};\n\n/**\n * @return {boolean}\n */\nCommandStack.prototype.canRedo = function () {\n  return !!this._getRedoAction();\n};\n\n// stack access  //////////////////////\n\nCommandStack.prototype._getRedoAction = function () {\n  return this._stack[this._stackIdx + 1];\n};\nCommandStack.prototype._getUndoAction = function () {\n  return this._stack[this._stackIdx];\n};\n\n// internal functionality //////////////////////\n\nCommandStack.prototype._internalUndo = function (action) {\n  const command = action.command,\n    context = action.context;\n  const handler = this._getHandler(command);\n\n  // guard against illegal nested command stack invocations\n  this._atomicDo(() => {\n    this._fire(command, 'revert', action);\n    if (handler.revert) {\n      this._markDirty(handler.revert(context));\n    }\n    this._revertedAction(action);\n    this._fire(command, 'reverted', action);\n  });\n};\nCommandStack.prototype._fire = function (command, qualifier, event) {\n  if (arguments.length < 3) {\n    event = qualifier;\n    qualifier = null;\n  }\n  const names = qualifier ? [command + '.' + qualifier, qualifier] : [command];\n  let result;\n  event = this._eventBus.createEvent(event);\n  for (const name of names) {\n    result = this._eventBus.fire('commandStack.' + name, event);\n    if (event.cancelBubble) {\n      break;\n    }\n  }\n  return result;\n};\nCommandStack.prototype._createId = function () {\n  return this._uid++;\n};\nCommandStack.prototype._atomicDo = function (fn) {\n  const execution = this._currentExecution;\n  execution.atomic = true;\n  try {\n    fn();\n  } finally {\n    execution.atomic = false;\n  }\n};\nCommandStack.prototype._internalExecute = function (action, redo) {\n  const command = action.command,\n    context = action.context;\n  const handler = this._getHandler(command);\n  if (!handler) {\n    throw new Error('no command handler registered for <' + command + '>');\n  }\n  this._pushAction(action);\n  if (!redo) {\n    this._fire(command, 'preExecute', action);\n    if (handler.preExecute) {\n      handler.preExecute(context);\n    }\n    this._fire(command, 'preExecuted', action);\n  }\n\n  // guard against illegal nested command stack invocations\n  this._atomicDo(() => {\n    this._fire(command, 'execute', action);\n    if (handler.execute) {\n      // actual execute + mark return results as dirty\n      this._markDirty(handler.execute(context));\n    }\n\n    // log to stack\n    this._executedAction(action, redo);\n    this._fire(command, 'executed', action);\n  });\n  if (!redo) {\n    this._fire(command, 'postExecute', action);\n    if (handler.postExecute) {\n      handler.postExecute(context);\n    }\n    this._fire(command, 'postExecuted', action);\n  }\n  this._popAction();\n};\nCommandStack.prototype._pushAction = function (action) {\n  const execution = this._currentExecution,\n    actions = execution.actions;\n  const baseAction = actions[0];\n  if (execution.atomic) {\n    throw new Error('illegal invocation in <execute> or <revert> phase (action: ' + action.command + ')');\n  }\n  if (!action.id) {\n    action.id = baseAction && baseAction.id || this._createId();\n  }\n  actions.push(action);\n};\nCommandStack.prototype._popAction = function () {\n  const execution = this._currentExecution,\n    trigger = execution.trigger,\n    actions = execution.actions,\n    dirty = execution.dirty;\n  actions.pop();\n  if (!actions.length) {\n    this._eventBus.fire('elements.changed', {\n      elements: (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.uniqueBy)('id', dirty.reverse())\n    });\n    dirty.length = 0;\n    this._fire('changed', {\n      trigger: trigger\n    });\n    execution.trigger = null;\n  }\n};\nCommandStack.prototype._markDirty = function (elements) {\n  const execution = this._currentExecution;\n  if (!elements) {\n    return;\n  }\n  elements = (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isArray)(elements) ? elements : [elements];\n  execution.dirty = execution.dirty.concat(elements);\n};\nCommandStack.prototype._executedAction = function (action, redo) {\n  const stackIdx = ++this._stackIdx;\n  if (!redo) {\n    this._stack.splice(stackIdx, this._stack.length, action);\n  }\n};\nCommandStack.prototype._revertedAction = function (action) {\n  this._stackIdx--;\n};\nCommandStack.prototype._getHandler = function (command) {\n  return this._handlerMap[command];\n};\nCommandStack.prototype._setHandler = function (command, handler) {\n  if (!command || !handler) {\n    throw new Error('command and handler required');\n  }\n  if (this._handlerMap[command]) {\n    throw new Error('overriding handler for command <' + command + '>');\n  }\n  this._handlerMap[command] = handler;\n};\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nvar commandModule = {\n  commandStack: ['type', CommandStack]\n};\n\n/**\n * @typedef {import('../core/Types').ElementLike} ElementLike\n * @typedef {import('../core/EventBus').default} EventBus\n * @typedef {import('./CommandStack').CommandContext} CommandContext\n *\n * @typedef {string|string[]} Events\n * @typedef { (context: CommandContext) => ElementLike[] | void } HandlerFunction\n * @typedef { (context: CommandContext) => void } ComposeHandlerFunction\n */\n\nvar DEFAULT_PRIORITY$1 = 1000;\n\n/**\n * A utility that can be used to plug into the command execution for\n * extension and/or validation.\n *\n * @class\n * @constructor\n *\n * @example\n *\n * ```javascript\n * import CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n *\n * class CommandLogger extends CommandInterceptor {\n *   constructor(eventBus) {\n *     super(eventBus);\n *\n *   this.preExecute('shape.create', (event) => {\n *     console.log('commandStack.shape-create.preExecute', event);\n *   });\n * }\n * ```\n *\n * @param {EventBus} eventBus\n */\nfunction CommandInterceptor(eventBus) {\n  /**\n   * @type {EventBus}\n   */\n  this._eventBus = eventBus;\n}\nCommandInterceptor.$inject = ['eventBus'];\nfunction unwrapEvent(fn, that) {\n  return function (event) {\n    return fn.call(that || null, event.context, event.command, event);\n  };\n}\n\n/**\n * Intercept a command during one of the phases.\n *\n * @param {Events} [events] command(s) to intercept\n * @param {string} [hook] phase to intercept\n * @param {number} [priority]\n * @param {ComposeHandlerFunction|HandlerFunction} handlerFn\n * @param {boolean} [unwrap] whether the event should be unwrapped\n * @param {any} [that]\n */\nCommandInterceptor.prototype.on = function (events, hook, priority, handlerFn, unwrap, that) {\n  if ((0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isFunction)(hook) || (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isNumber)(hook)) {\n    that = unwrap;\n    unwrap = handlerFn;\n    handlerFn = priority;\n    priority = hook;\n    hook = null;\n  }\n  if ((0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isFunction)(priority)) {\n    that = unwrap;\n    unwrap = handlerFn;\n    handlerFn = priority;\n    priority = DEFAULT_PRIORITY$1;\n  }\n  if ((0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isObject)(unwrap)) {\n    that = unwrap;\n    unwrap = false;\n  }\n  if (!(0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isFunction)(handlerFn)) {\n    throw new Error('handlerFn must be a function');\n  }\n  if (!(0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isArray)(events)) {\n    events = [events];\n  }\n  var eventBus = this._eventBus;\n  (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.forEach)(events, function (event) {\n    // concat commandStack(.event)?(.hook)?\n    var fullEvent = ['commandStack', event, hook].filter(function (e) {\n      return e;\n    }).join('.');\n    eventBus.on(fullEvent, priority, unwrap ? unwrapEvent(handlerFn, that) : handlerFn, that);\n  });\n};\n\n/**\n * Add a <canExecute> phase of command interceptor.\n *\n * @param {Events} [events] command(s) to intercept\n * @param {number} [priority]\n * @param {ComposeHandlerFunction|HandlerFunction} handlerFn\n * @param {boolean} [unwrap] whether the event should be unwrapped\n * @param {any} [that]\n */\nCommandInterceptor.prototype.canExecute = createHook('canExecute');\n\n/**\n * Add a <preExecute> phase of command interceptor.\n *\n * @param {Events} [events] command(s) to intercept\n * @param {number} [priority]\n * @param {ComposeHandlerFunction|HandlerFunction} handlerFn\n * @param {boolean} [unwrap] whether the event should be unwrapped\n * @param {any} [that]\n */\nCommandInterceptor.prototype.preExecute = createHook('preExecute');\n\n/**\n * Add a <preExecuted> phase of command interceptor.\n *\n * @param {Events} [events] command(s) to intercept\n * @param {number} [priority]\n * @param {ComposeHandlerFunction|HandlerFunction} handlerFn\n * @param {boolean} [unwrap] whether the event should be unwrapped\n * @param {any} [that]\n */\nCommandInterceptor.prototype.preExecuted = createHook('preExecuted');\n\n/**\n * Add a <execute> phase of command interceptor.\n *\n * @param {Events} [events] command(s) to intercept\n * @param {number} [priority]\n * @param {ComposeHandlerFunction|HandlerFunction} handlerFn\n * @param {boolean} [unwrap] whether the event should be unwrapped\n * @param {any} [that]\n */\nCommandInterceptor.prototype.execute = createHook('execute');\n\n/**\n * Add a <executed> phase of command interceptor.\n *\n * @param {Events} [events] command(s) to intercept\n * @param {number} [priority]\n * @param {ComposeHandlerFunction|HandlerFunction} handlerFn\n * @param {boolean} [unwrap] whether the event should be unwrapped\n * @param {any} [that]\n */\nCommandInterceptor.prototype.executed = createHook('executed');\n\n/**\n * Add a <postExecute> phase of command interceptor.\n *\n * @param {Events} [events] command(s) to intercept\n * @param {number} [priority]\n * @param {ComposeHandlerFunction|HandlerFunction} handlerFn\n * @param {boolean} [unwrap] whether the event should be unwrapped\n * @param {any} [that]\n */\nCommandInterceptor.prototype.postExecute = createHook('postExecute');\n\n/**\n * Add a <postExecuted> phase of command interceptor.\n *\n * @param {Events} [events] command(s) to intercept\n * @param {number} [priority]\n * @param {ComposeHandlerFunction|HandlerFunction} handlerFn\n * @param {boolean} [unwrap] whether the event should be unwrapped\n * @param {any} [that]\n */\nCommandInterceptor.prototype.postExecuted = createHook('postExecuted');\n\n/**\n * Add a <revert> phase of command interceptor.\n *\n * @param {Events} [events] command(s) to intercept\n * @param {number} [priority]\n * @param {ComposeHandlerFunction|HandlerFunction} handlerFn\n * @param {boolean} [unwrap] whether the event should be unwrapped\n * @param {any} [that]\n */\nCommandInterceptor.prototype.revert = createHook('revert');\n\n/**\n * Add a <reverted> phase of command interceptor.\n *\n * @param {Events} [events] command(s) to intercept\n * @param {number} [priority]\n * @param {ComposeHandlerFunction|HandlerFunction} handlerFn\n * @param {boolean} [unwrap] whether the event should be unwrapped\n * @param {any} [that]\n */\nCommandInterceptor.prototype.reverted = createHook('reverted');\n\n/*\n * Add prototype methods for each phase of command execution (e.g. execute,\n * revert).\n *\n * @param {string} hook\n *\n * @return { (\n *   events?: Events,\n *   priority?: number,\n *   handlerFn: ComposeHandlerFunction|HandlerFunction,\n *   unwrap?: boolean\n * ) => any }\n */\nfunction createHook(hook) {\n  /**\n   * @this {CommandInterceptor}\n   *\n   * @param {Events} [events]\n   * @param {number} [priority]\n   * @param {ComposeHandlerFunction|HandlerFunction} handlerFn\n   * @param {boolean} [unwrap]\n   * @param {any} [that]\n   */\n  const hookFn = function (events, priority, handlerFn, unwrap, that) {\n    if ((0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isFunction)(events) || (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isNumber)(events)) {\n      that = unwrap;\n      unwrap = handlerFn;\n      handlerFn = priority;\n      priority = events;\n      events = null;\n    }\n    this.on(events, hook, priority, handlerFn, unwrap, that);\n  };\n  return hookFn;\n}\n\nclass IdBehavior extends CommandInterceptor {\n  constructor(eventBus, modeling) {\n    super(eventBus);\n    this.preExecute('formField.remove', function (context) {\n      const {\n        formField\n      } = context;\n      const {\n        id\n      } = formField;\n      modeling.unclaimId(formField, id);\n    }, true);\n    this.preExecute('formField.edit', function (context) {\n      const {\n        formField,\n        properties\n      } = context;\n      if ('id' in properties) {\n        modeling.unclaimId(formField, formField.id);\n        modeling.claimId(formField, properties.id);\n      }\n    }, true);\n  }\n}\nIdBehavior.$inject = ['eventBus', 'modeling'];\n\nclass KeyBehavior extends CommandInterceptor {\n  constructor(eventBus, modeling, formFields) {\n    super(eventBus);\n    this.preExecute('formField.remove', function (context) {\n      const {\n        formField\n      } = context;\n      const {\n        key,\n        type\n      } = formField;\n      const {\n        config\n      } = formFields.get(type);\n      if (config.keyed) {\n        modeling.unclaimKey(formField, key);\n      }\n    }, true);\n    this.preExecute('formField.edit', function (context) {\n      const {\n        formField,\n        properties\n      } = context;\n      const {\n        key,\n        type\n      } = formField;\n      const {\n        config\n      } = formFields.get(type);\n      if (config.keyed && 'key' in properties) {\n        modeling.unclaimKey(formField, key);\n        modeling.claimKey(formField, properties.key);\n      }\n    }, true);\n  }\n}\nKeyBehavior.$inject = ['eventBus', 'modeling', 'formFields'];\n\nclass PathBehavior extends CommandInterceptor {\n  constructor(eventBus, modeling, formFields) {\n    super(eventBus);\n    this.preExecute('formField.remove', function (context) {\n      const {\n        formField\n      } = context;\n      const {\n        path,\n        type\n      } = formField;\n      const {\n        config\n      } = formFields.get(type);\n      if (config.pathed) {\n        modeling.unclaimPath(formField, path);\n      }\n    }, true);\n    this.preExecute('formField.edit', function (context) {\n      const {\n        formField,\n        properties\n      } = context;\n      const {\n        path,\n        type\n      } = formField;\n      const {\n        config\n      } = formFields.get(type);\n      if (config.pathed && 'path' in properties) {\n        modeling.unclaimPath(formField, path);\n        modeling.claimPath(formField, properties.path);\n      }\n    }, true);\n  }\n}\nPathBehavior.$inject = ['eventBus', 'modeling', 'formFields'];\n\nclass ValidateBehavior extends CommandInterceptor {\n  constructor(eventBus) {\n    super(eventBus);\n\n    /**\n     * Remove custom validation if <validationType> is about to be added.\n     */\n    this.preExecute('formField.edit', function (context) {\n      const {\n        properties\n      } = context;\n      const {\n        validate = {}\n      } = properties;\n      if (validate.validationType) {\n        const newValidate = {\n          ...validate\n        };\n        delete newValidate.minLength;\n        delete newValidate.maxLength;\n        delete newValidate.pattern;\n        properties['validate'] = newValidate;\n      }\n    }, true);\n  }\n}\nValidateBehavior.$inject = ['eventBus'];\n\nclass OptionsSourceBehavior extends CommandInterceptor {\n  constructor(eventBus) {\n    super(eventBus);\n\n    /**\n     * Cleanup properties on changing the values source.\n     *\n     * 1) Remove other sources, e.g. set `values` => remove `valuesKey` and `valuesExpression`\n     * 2) Remove default values for all other values sources\n     */\n    this.preExecute('formField.edit', function (context) {\n      const {\n        properties\n      } = context;\n      const newProperties = {};\n      if (!isValuesSourceUpdate(properties)) {\n        return;\n      }\n\n      // clean up value sources that are not to going to be set\n      Object.values(_bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.OPTIONS_SOURCES).forEach(source => {\n        const path = _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.OPTIONS_SOURCES_PATHS[source];\n        if ((0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(properties, path) == undefined) {\n          newProperties[_bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.OPTIONS_SOURCES_PATHS[source]] = undefined;\n        }\n      });\n\n      // clean up default value\n      if ((0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(properties, _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.OPTIONS_SOURCES_PATHS[_bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.OPTIONS_SOURCES.EXPRESSION]) !== undefined || (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(properties, _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.OPTIONS_SOURCES_PATHS[_bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.OPTIONS_SOURCES.INPUT]) !== undefined) {\n        newProperties['defaultValue'] = undefined;\n      }\n      context.properties = {\n        ...properties,\n        ...newProperties\n      };\n    }, true);\n  }\n}\nOptionsSourceBehavior.$inject = ['eventBus'];\n\n// helper ///////////////////\n\nfunction isValuesSourceUpdate(properties) {\n  return Object.values(_bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.OPTIONS_SOURCES_PATHS).some(path => {\n    return (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(properties, path) !== undefined;\n  });\n}\n\nconst COLUMNS_SOURCE_PROPERTIES = {\n  columns: 'columns',\n  columnsExpression: 'columnsExpression'\n};\nclass ColumnsSourceBehavior extends CommandInterceptor {\n  constructor(eventBus) {\n    super(eventBus);\n    this.preExecute('formField.edit', function (context) {\n      const {\n        properties,\n        oldProperties\n      } = context;\n      const isColumnSourceUpdate = Object.values(COLUMNS_SOURCE_PROPERTIES).some(path => {\n        return (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(properties, [path]) !== undefined;\n      });\n      if (!isColumnSourceUpdate) {\n        return;\n      }\n      const columns = (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(properties, [COLUMNS_SOURCE_PROPERTIES.columns]);\n      const oldColumns = (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(oldProperties, [COLUMNS_SOURCE_PROPERTIES.columns]);\n      const columnsExpression = (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(properties, [COLUMNS_SOURCE_PROPERTIES.columnsExpression]);\n      const oldColumnsExpression = (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(oldProperties, [COLUMNS_SOURCE_PROPERTIES.columnsExpression]);\n      if ((0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isArray)(columns) && !(0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isDefined)(oldColumns)) {\n        context.properties = {\n          ...properties,\n          columnsExpression: undefined\n        };\n        return;\n      }\n      if ((0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isString)(columnsExpression) && !(0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isString)(oldColumnsExpression)) {\n        context.properties = {\n          ...properties,\n          columns: undefined\n        };\n        return;\n      }\n    }, true);\n  }\n}\nColumnsSourceBehavior.$inject = ['eventBus'];\n\nclass TableDataSourceBehavior extends CommandInterceptor {\n  constructor(eventBus) {\n    super(eventBus);\n    this.preExecute('formField.add', function (context) {\n      const {\n        formField\n      } = context;\n      if ((0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(formField, ['type']) !== 'table') {\n        return;\n      }\n      context.formField = {\n        ...formField,\n        dataSource: `=${formField.id}`\n      };\n    }, true);\n  }\n}\nTableDataSourceBehavior.$inject = ['eventBus'];\n\nconst BehaviorModule = {\n  __init__: ['idBehavior', 'keyBehavior', 'pathBehavior', 'validateBehavior', 'optionsSourceBehavior', 'columnsSourceBehavior', 'tableDataSourceBehavior'],\n  idBehavior: ['type', IdBehavior],\n  keyBehavior: ['type', KeyBehavior],\n  pathBehavior: ['type', PathBehavior],\n  validateBehavior: ['type', ValidateBehavior],\n  optionsSourceBehavior: ['type', OptionsSourceBehavior],\n  columnsSourceBehavior: ['type', ColumnsSourceBehavior],\n  tableDataSourceBehavior: ['type', TableDataSourceBehavior]\n};\n\nfunction arrayAdd$1(array, index, item) {\n  array.splice(index, 0, item);\n  return array;\n}\nfunction arrayRemove(array, index) {\n  array.splice(index, 1);\n  return array;\n}\nfunction updatePath(formFieldRegistry, formField, index) {\n  const parent = formFieldRegistry.get(formField._parent);\n  refreshPathsRecursively(formField, [...parent._path, 'components', index]);\n  return formField;\n}\nfunction refreshPathsRecursively(formField, path) {\n  formField._path = path;\n  const components = formField.components || [];\n  components.forEach((component, index) => {\n    refreshPathsRecursively(component, [...path, 'components', index]);\n  });\n}\nfunction updateRow(formField, rowId) {\n  formField.layout = {\n    ...(formField.layout || {}),\n    row: rowId\n  };\n  return formField;\n}\n\nclass FormLayoutUpdater extends CommandInterceptor {\n  constructor(eventBus, formLayouter, modeling, formEditor) {\n    super(eventBus);\n    this._eventBus = eventBus;\n    this._formLayouter = formLayouter;\n    this._modeling = modeling;\n    this._formEditor = formEditor;\n\n    // @ts-ignore\n    this.preExecute(['formField.add', 'formField.remove', 'formField.move', 'id.updateClaim'], event => this.updateRowIds(event));\n\n    // we need that as the state got updates\n    // on the next tick (not in post execute)\n    eventBus.on('changed', context => {\n      const {\n        schema\n      } = context;\n      this.updateLayout(schema);\n    });\n  }\n  updateLayout(schema) {\n    this._formLayouter.clear();\n    this._formLayouter.calculateLayout((0,_bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.clone)(schema));\n  }\n  updateRowIds(event) {\n    const {\n      schema\n    } = this._formEditor._getState();\n    const setRowIds = parent => {\n      if (!parent.components || !parent.components.length) {\n        return;\n      }\n      parent.components.forEach(formField => {\n        const row = this._formLayouter.getRowForField(formField);\n        updateRow(formField, row.id);\n\n        // handle children recursively\n        setRowIds(formField);\n      });\n    };\n\n    // make sure rows are persisted in schema (e.g. for migration case)\n    setRowIds(schema);\n  }\n}\nFormLayoutUpdater.$inject = ['eventBus', 'formLayouter', 'modeling', 'formEditor'];\n\nclass AddFormFieldHandler {\n  /**\n   * @constructor\n   * @param { import('../../../FormEditor').FormEditor } formEditor\n   * @param { import('../../../core/FormFieldRegistry').FormFieldRegistry } formFieldRegistry\n   */\n  constructor(formEditor, formFieldRegistry) {\n    this._formEditor = formEditor;\n    this._formFieldRegistry = formFieldRegistry;\n  }\n  execute(context) {\n    const {\n      formField,\n      targetFormField,\n      targetIndex\n    } = context;\n    const {\n      schema\n    } = this._formEditor._getState();\n    const targetPath = [...targetFormField._path, 'components'];\n    formField._parent = targetFormField.id;\n\n    // (1) Add new form field\n    arrayAdd$1((0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(schema, targetPath), targetIndex, formField);\n\n    // (2) Update internal paths of new form field and its siblings (and their children)\n    (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(schema, targetPath).forEach((formField, index) => updatePath(this._formFieldRegistry, formField, index));\n\n    // (3) Add new form field to form field registry\n    this._formFieldRegistry.add(formField);\n\n    // TODO: Create updater/change support that automatically updates paths and schema on command execution\n    this._formEditor._setState({\n      schema\n    });\n  }\n  revert(context) {\n    const {\n      formField,\n      targetFormField,\n      targetIndex\n    } = context;\n    const {\n      schema\n    } = this._formEditor._getState();\n    const targetPath = [...targetFormField._path, 'components'];\n\n    // (1) Remove new form field\n    arrayRemove((0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(schema, targetPath), targetIndex);\n\n    // (2) Update internal paths of new form field and its siblings (and their children)\n    (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(schema, targetPath).forEach((formField, index) => updatePath(this._formFieldRegistry, formField, index));\n\n    // (3) Remove new form field from form field registry\n    this._formFieldRegistry.remove(formField);\n\n    // TODO: Create updater/change support that automatically updates paths and schema on command execution\n    this._formEditor._setState({\n      schema\n    });\n  }\n}\nAddFormFieldHandler.$inject = ['formEditor', 'formFieldRegistry'];\n\nclass EditFormFieldHandler {\n  /**\n   * @constructor\n   * @param { import('../../../FormEditor').FormEditor } formEditor\n   * @param { import('../../../core/FormFieldRegistry').FormFieldRegistry } formFieldRegistry\n   */\n  constructor(formEditor, formFieldRegistry) {\n    this._formEditor = formEditor;\n    this._formFieldRegistry = formFieldRegistry;\n  }\n  execute(context) {\n    const {\n      formField,\n      properties\n    } = context;\n    let {\n      schema\n    } = this._formEditor._getState();\n    const oldProperties = {};\n    for (let key in properties) {\n      oldProperties[key] = formField[key];\n      const property = properties[key];\n      if (key === 'id') {\n        if (property !== formField.id) {\n          this._formFieldRegistry.updateId(formField, property);\n        }\n      } else {\n        formField[key] = property;\n      }\n    }\n    context.oldProperties = oldProperties;\n\n    // TODO: Create updater/change support that automatically updates paths and schema on command execution\n    this._formEditor._setState({\n      schema\n    });\n    return formField;\n  }\n  revert(context) {\n    const {\n      formField,\n      oldProperties\n    } = context;\n    let {\n      schema\n    } = this._formEditor._getState();\n    for (let key in oldProperties) {\n      const property = oldProperties[key];\n      if (key === 'id') {\n        if (property !== formField.id) {\n          this._formFieldRegistry.updateId(formField, property);\n        }\n      } else {\n        formField[key] = property;\n      }\n    }\n\n    // TODO: Create updater/change support that automatically updates paths and schema on command execution\n    this._formEditor._setState({\n      schema\n    });\n    return formField;\n  }\n}\nEditFormFieldHandler.$inject = ['formEditor', 'formFieldRegistry'];\n\nclass MoveFormFieldHandler {\n  /**\n   * @constructor\n   * @param { import('../../../FormEditor').FormEditor } formEditor\n   * @param { import('../../../core/FormFieldRegistry').FormFieldRegistry } formFieldRegistry\n   * @param { import('@bpmn-io/form-js-viewer').PathRegistry } pathRegistry\n   * @param { import('@bpmn-io/form-js-viewer').FormLayouter } formLayouter\n   */\n  constructor(formEditor, formFieldRegistry, pathRegistry, formLayouter) {\n    this._formEditor = formEditor;\n    this._formFieldRegistry = formFieldRegistry;\n    this._pathRegistry = pathRegistry;\n    this._formLayouter = formLayouter;\n  }\n  execute(context) {\n    this.moveFormField(context);\n  }\n  revert(context) {\n    let {\n      sourceFormField,\n      targetFormField,\n      sourceIndex,\n      targetIndex,\n      sourceRow,\n      targetRow\n    } = context;\n    this.moveFormField({\n      sourceFormField: targetFormField,\n      targetFormField: sourceFormField,\n      sourceIndex: targetIndex,\n      targetIndex: sourceIndex,\n      sourceRow: targetRow,\n      targetRow: sourceRow\n    }, true);\n  }\n  moveFormField(context, revert) {\n    let {\n      sourceFormField,\n      targetFormField,\n      sourceIndex,\n      targetIndex,\n      targetRow\n    } = context;\n    let {\n      schema\n    } = this._formEditor._getState();\n    const sourcePath = [...sourceFormField._path, 'components'];\n    if (sourceFormField.id === targetFormField.id) {\n      if (revert) {\n        if (sourceIndex > targetIndex) {\n          sourceIndex--;\n        }\n      } else {\n        if (sourceIndex < targetIndex) {\n          targetIndex--;\n        }\n      }\n      const formField = (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(schema, [...sourcePath, sourceIndex]);\n\n      // (1) Add to row or create new one\n      updateRow(formField, targetRow ? targetRow.id : this._formLayouter.nextRowId());\n\n      // (2) Move form field\n      (0,array_move__WEBPACK_IMPORTED_MODULE_10__.arrayMoveMutable)((0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(schema, sourcePath), sourceIndex, targetIndex);\n\n      // (3) Update internal paths of new form field and its siblings (and their children)\n      (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(schema, sourcePath).forEach((formField, index) => updatePath(this._formFieldRegistry, formField, index));\n    } else {\n      const formField = (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(schema, [...sourcePath, sourceIndex]);\n\n      // (1) Deregister form field (and children) from path registry\n      this._pathRegistry.executeRecursivelyOnFields(formField, ({\n        field\n      }) => {\n        this._pathRegistry.unclaimPath(this._pathRegistry.getValuePath(field));\n      });\n      formField._parent = targetFormField.id;\n\n      // (2) Remove form field\n      arrayRemove((0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(schema, sourcePath), sourceIndex);\n\n      // (3) Update internal paths of siblings (and their children)\n      (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(schema, sourcePath).forEach((formField, index) => updatePath(this._formFieldRegistry, formField, index));\n      const targetPath = [...targetFormField._path, 'components'];\n\n      // (4) Add to row or create new one\n      updateRow(formField, targetRow ? targetRow.id : this._formLayouter.nextRowId());\n\n      // (5) Add form field\n      arrayAdd$1((0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(schema, targetPath), targetIndex, formField);\n\n      // (6) Update internal paths of siblings (and their children)\n      (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(schema, targetPath).forEach((formField, index) => updatePath(this._formFieldRegistry, formField, index));\n\n      // (7) Reregister form field (and children) from path registry\n      this._pathRegistry.executeRecursivelyOnFields(formField, ({\n        field,\n        isClosed,\n        isRepeatable\n      }) => {\n        this._pathRegistry.claimPath(this._pathRegistry.getValuePath(field), {\n          isClosed,\n          isRepeatable,\n          claimerId: field.id\n        });\n      });\n    }\n\n    // TODO: Create updater/change support that automatically updates paths and schema on command execution\n    this._formEditor._setState({\n      schema\n    });\n  }\n}\nMoveFormFieldHandler.$inject = ['formEditor', 'formFieldRegistry', 'pathRegistry', 'formLayouter'];\n\nclass RemoveFormFieldHandler {\n  /**\n   * @constructor\n   * @param { import('../../../FormEditor').FormEditor } formEditor\n   * @param { import('../../../core/FormFieldRegistry').FormFieldRegistry } formFieldRegistry\n   */\n  constructor(formEditor, formFieldRegistry) {\n    this._formEditor = formEditor;\n    this._formFieldRegistry = formFieldRegistry;\n  }\n  execute(context) {\n    const {\n      sourceFormField,\n      sourceIndex\n    } = context;\n    let {\n      schema\n    } = this._formEditor._getState();\n    const sourcePath = [...sourceFormField._path, 'components'];\n    const formField = context.formField = (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(schema, [...sourcePath, sourceIndex]);\n\n    // (1) Remove form field\n    arrayRemove((0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(schema, sourcePath), sourceIndex);\n\n    // (2) Update internal paths of its siblings (and their children)\n    (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(schema, sourcePath).forEach((formField, index) => updatePath(this._formFieldRegistry, formField, index));\n\n    // (3) Remove form field and children from form field registry\n    (0,_bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.runRecursively)(formField, formField => this._formFieldRegistry.remove(formField));\n\n    // TODO: Create updater/change support that automatically updates paths and schema on command execution\n    this._formEditor._setState({\n      schema\n    });\n  }\n  revert(context) {\n    const {\n      formField,\n      sourceFormField,\n      sourceIndex\n    } = context;\n    let {\n      schema\n    } = this._formEditor._getState();\n    const sourcePath = [...sourceFormField._path, 'components'];\n\n    // (1) Add form field\n    arrayAdd$1((0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(schema, sourcePath), sourceIndex, formField);\n\n    // (2) Update internal paths of its siblings (and their children)\n    (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(schema, sourcePath).forEach((formField, index) => updatePath(this._formFieldRegistry, formField, index));\n\n    // (3) Add form field and children to form field registry\n    (0,_bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.runRecursively)(formField, formField => this._formFieldRegistry.add(formField));\n\n    // TODO: Create updater/change support that automatically updates paths and schema on command execution\n    this._formEditor._setState({\n      schema\n    });\n  }\n}\nRemoveFormFieldHandler.$inject = ['formEditor', 'formFieldRegistry'];\n\nclass UpdateIdClaimHandler {\n  /**\n   * @constructor\n   * @param { import('../../../core/FormFieldRegistry').FormFieldRegistry } formFieldRegistry\n   */\n  constructor(formFieldRegistry) {\n    this._formFieldRegistry = formFieldRegistry;\n  }\n  execute(context) {\n    const {\n      claiming,\n      formField,\n      id\n    } = context;\n    if (claiming) {\n      this._formFieldRegistry._ids.claim(id, formField);\n    } else {\n      this._formFieldRegistry._ids.unclaim(id);\n    }\n  }\n  revert(context) {\n    const {\n      claiming,\n      formField,\n      id\n    } = context;\n    if (claiming) {\n      this._formFieldRegistry._ids.unclaim(id);\n    } else {\n      this._formFieldRegistry._ids.claim(id, formField);\n    }\n  }\n}\nUpdateIdClaimHandler.$inject = ['formFieldRegistry'];\n\nclass UpdateKeyClaimHandler {\n  /**\n   * @constructor\n   * @param { import('@bpmn-io/form-js-viewer').PathRegistry } pathRegistry\n   */\n  constructor(pathRegistry) {\n    this._pathRegistry = pathRegistry;\n  }\n  execute(context) {\n    const {\n      claiming,\n      formField,\n      key\n    } = context;\n    const options = {\n      replacements: {\n        [formField.id]: key\n      }\n    };\n    const valuePath = this._pathRegistry.getValuePath(formField, options);\n    if (claiming) {\n      this._pathRegistry.claimPath(valuePath, {\n        isClosed: true,\n        claimerId: formField.id\n      });\n    } else {\n      this._pathRegistry.unclaimPath(valuePath);\n    }\n\n    // cache path for revert\n    context.valuePath = valuePath;\n  }\n  revert(context) {\n    const {\n      claiming,\n      formField,\n      valuePath\n    } = context;\n    if (claiming) {\n      this._pathRegistry.unclaimPath(valuePath);\n    } else {\n      this._pathRegistry.claimPath(valuePath, {\n        isClosed: true,\n        claimerId: formField.id\n      });\n    }\n  }\n}\nUpdateKeyClaimHandler.$inject = ['pathRegistry'];\n\nclass UpdatePathClaimHandler {\n  /**\n   * @constructor\n   * @param { import('@bpmn-io/form-js-viewer').PathRegistry } pathRegistry\n   */\n  constructor(pathRegistry) {\n    this._pathRegistry = pathRegistry;\n  }\n  execute(context) {\n    const {\n      claiming,\n      formField,\n      path\n    } = context;\n    const options = {\n      replacements: {\n        [formField.id]: path\n      }\n    };\n    const valuePaths = [];\n    if (claiming) {\n      this._pathRegistry.executeRecursivelyOnFields(formField, ({\n        field,\n        isClosed,\n        isRepeatable\n      }) => {\n        const valuePath = this._pathRegistry.getValuePath(field, options);\n        valuePaths.push({\n          valuePath,\n          isClosed,\n          isRepeatable,\n          claimerId: field.id\n        });\n        this._pathRegistry.claimPath(valuePath, {\n          isClosed,\n          isRepeatable,\n          claimerId: field.id\n        });\n      });\n    } else {\n      this._pathRegistry.executeRecursivelyOnFields(formField, ({\n        field,\n        isClosed,\n        isRepeatable\n      }) => {\n        const valuePath = this._pathRegistry.getValuePath(field, options);\n        valuePaths.push({\n          valuePath,\n          isClosed,\n          isRepeatable,\n          claimerId: field.id\n        });\n        this._pathRegistry.unclaimPath(valuePath);\n      });\n    }\n\n    // cache path info for revert\n    context.valuePaths = valuePaths;\n  }\n  revert(context) {\n    const {\n      claiming,\n      valuePaths\n    } = context;\n    if (claiming) {\n      valuePaths.forEach(({\n        valuePath\n      }) => {\n        this._pathRegistry.unclaimPath(valuePath);\n      });\n    } else {\n      valuePaths.forEach(({\n        valuePath,\n        isClosed,\n        isRepeatable,\n        claimerId\n      }) => {\n        this._pathRegistry.claimPath(valuePath, {\n          isClosed,\n          isRepeatable,\n          claimerId\n        });\n      });\n    }\n  }\n}\nUpdatePathClaimHandler.$inject = ['pathRegistry'];\n\nclass Modeling {\n  constructor(commandStack, eventBus, formEditor, formFieldRegistry, fieldFactory) {\n    this._commandStack = commandStack;\n    this._formEditor = formEditor;\n    this._formFieldRegistry = formFieldRegistry;\n    this._fieldFactory = fieldFactory;\n    eventBus.on('form.init', () => {\n      this.registerHandlers();\n    });\n  }\n  registerHandlers() {\n    Object.entries(this.getHandlers()).forEach(([id, handler]) => {\n      this._commandStack.registerHandler(id, handler);\n    });\n  }\n  getHandlers() {\n    return {\n      'formField.add': AddFormFieldHandler,\n      'formField.edit': EditFormFieldHandler,\n      'formField.move': MoveFormFieldHandler,\n      'formField.remove': RemoveFormFieldHandler,\n      'id.updateClaim': UpdateIdClaimHandler,\n      'key.updateClaim': UpdateKeyClaimHandler,\n      'path.updateClaim': UpdatePathClaimHandler\n    };\n  }\n  addFormField(attrs, targetFormField, targetIndex) {\n    const formField = this._fieldFactory.create(attrs);\n    const context = {\n      formField,\n      targetFormField,\n      targetIndex\n    };\n    this._commandStack.execute('formField.add', context);\n    return formField;\n  }\n  editFormField(formField, properties, value) {\n    if (!(0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isObject)(properties)) {\n      properties = {\n        [properties]: value\n      };\n    }\n    const context = {\n      formField,\n      properties\n    };\n    this._commandStack.execute('formField.edit', context);\n  }\n  moveFormField(formField, sourceFormField, targetFormField, sourceIndex, targetIndex, sourceRow, targetRow) {\n    const context = {\n      formField,\n      sourceFormField,\n      targetFormField,\n      sourceIndex,\n      targetIndex,\n      sourceRow,\n      targetRow\n    };\n    this._commandStack.execute('formField.move', context);\n  }\n  removeFormField(formField, sourceFormField, sourceIndex) {\n    const context = {\n      formField,\n      sourceFormField,\n      sourceIndex\n    };\n    this._commandStack.execute('formField.remove', context);\n  }\n  claimId(formField, id) {\n    const context = {\n      formField,\n      id,\n      claiming: true\n    };\n    this._commandStack.execute('id.updateClaim', context);\n  }\n  unclaimId(formField, id) {\n    const context = {\n      formField,\n      id,\n      claiming: false\n    };\n    this._commandStack.execute('id.updateClaim', context);\n  }\n  claimKey(formField, key) {\n    const context = {\n      formField,\n      key,\n      claiming: true\n    };\n    this._commandStack.execute('key.updateClaim', context);\n  }\n  unclaimKey(formField, key) {\n    const context = {\n      formField,\n      key,\n      claiming: false\n    };\n    this._commandStack.execute('key.updateClaim', context);\n  }\n  claimPath(formField, path) {\n    const context = {\n      formField,\n      path,\n      claiming: true\n    };\n    this._commandStack.execute('path.updateClaim', context);\n  }\n  unclaimPath(formField, path) {\n    const context = {\n      formField,\n      path,\n      claiming: false\n    };\n    this._commandStack.execute('path.updateClaim', context);\n  }\n}\nModeling.$inject = ['commandStack', 'eventBus', 'formEditor', 'formFieldRegistry', 'fieldFactory'];\n\nconst ModelingModule = {\n  __depends__: [BehaviorModule, commandModule],\n  __init__: ['formLayoutUpdater', 'modeling'],\n  formLayoutUpdater: ['type', FormLayoutUpdater],\n  modeling: ['type', Modeling]\n};\n\nclass Selection {\n  constructor(eventBus) {\n    this._eventBus = eventBus;\n    this._selection = null;\n  }\n  get() {\n    return this._selection;\n  }\n  set(selection) {\n    if (this._selection === selection) {\n      return;\n    }\n    this._selection = selection;\n    this._eventBus.fire('selection.changed', {\n      selection: this._selection\n    });\n  }\n  toggle(selection) {\n    const newSelection = this._selection === selection ? null : selection;\n    this.set(newSelection);\n  }\n  clear() {\n    this.set(null);\n  }\n  isSelected(formField) {\n    return this._selection === formField;\n  }\n}\nSelection.$inject = ['eventBus'];\n\nclass SelectionBehavior {\n  constructor(eventBus, selection) {\n    eventBus.on(['commandStack.formField.add.postExecuted', 'commandStack.formField.move.postExecuted'], ({\n      context\n    }) => {\n      const {\n        formField\n      } = context;\n      selection.set(formField);\n    });\n    eventBus.on('commandStack.formField.remove.postExecuted', ({\n      context\n    }) => {\n      const {\n        sourceFormField,\n        sourceIndex\n      } = context;\n      const formField = sourceFormField.components[sourceIndex] || sourceFormField.components[sourceIndex - 1];\n      if (formField) {\n        selection.set(formField);\n      } else {\n        selection.clear();\n      }\n    });\n    eventBus.on('formField.remove', ({\n      formField\n    }) => {\n      if (selection.isSelected(formField)) {\n        selection.clear();\n      }\n    });\n  }\n}\nSelectionBehavior.$inject = ['eventBus', 'selection'];\n\nconst SelectionModule = {\n  __init__: ['selection', 'selectionBehavior'],\n  selection: ['type', Selection],\n  selectionBehavior: ['type', SelectionBehavior]\n};\n\n/**\n * Base class for sectionable UI modules.\n *\n * @property {EventBus} _eventBus - EventBus instance used for event handling.\n * @property {string} managerType - Type of the render manager. Used to form event names.\n *\n * @class SectionModuleBase\n */\nclass SectionModuleBase {\n  /**\n   * Create a SectionModuleBase instance.\n   *\n   * @param {any} eventBus - The EventBus instance used for event handling.\n   * @param {string} sectionKey - The type of render manager. Used to form event names.\n   *\n   * @constructor\n   */\n  constructor(eventBus, sectionKey) {\n    this._eventBus = eventBus;\n    this._sectionKey = sectionKey;\n    this._eventBus.on(`${this._sectionKey}.section.rendered`, () => {\n      this.isSectionRendered = true;\n    });\n    this._eventBus.on(`${this._sectionKey}.section.destroyed`, () => {\n      this.isSectionRendered = false;\n    });\n  }\n\n  /**\n   * Attach the managed section to a parent node.\n   *\n   * @param {HTMLElement} container - The parent node to attach to.\n   */\n  attachTo(container) {\n    this._onceSectionRendered(() => this._eventBus.fire(`${this._sectionKey}.attach`, {\n      container\n    }));\n  }\n\n  /**\n   * Detach the managed section from its parent node.\n   */\n  detach() {\n    this._onceSectionRendered(() => this._eventBus.fire(`${this._sectionKey}.detach`));\n  }\n\n  /**\n   * Reset the managed section to its initial state.\n   */\n  reset() {\n    this._onceSectionRendered(() => this._eventBus.fire(`${this._sectionKey}.reset`));\n  }\n\n  /**\n   * Circumvents timing issues.\n   */\n  _onceSectionRendered(callback) {\n    if (this.isSectionRendered) {\n      callback();\n    } else {\n      this._eventBus.once(`${this._sectionKey}.section.rendered`, callback);\n    }\n  }\n}\n\nclass PaletteRenderer extends SectionModuleBase {\n  constructor(eventBus) {\n    super(eventBus, 'palette');\n  }\n}\nPaletteRenderer.$inject = ['eventBus'];\n\nconst PaletteModule = {\n  __init__: ['palette'],\n  palette: ['type', PaletteRenderer]\n};\n\nvar ArrowIcon = function ArrowIcon(props) {\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"svg\", {\n    ...props,\n    children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"path\", {\n      fillRule: \"evenodd\",\n      d: \"m11.657 8-4.95 4.95a1 1 0 0 1-1.414-1.414L8.828 8 5.293 4.464A1 1 0 1 1 6.707 3.05L11.657 8Z\"\n    })\n  });\n};\nArrowIcon.defaultProps = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: \"16\",\n  height: \"16\"\n};\nvar CloseIcon = function CloseIcon(props) {\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"svg\", {\n    ...props,\n    children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"path\", {\n      fillRule: \"evenodd\",\n      d: \"m12 4.7-.7-.7L8 7.3 4.7 4l-.7.7L7.3 8 4 11.3l.7.7L8 8.7l3.3 3.3.7-.7L8.7 8 12 4.7Z\",\n      fill: \"currentColor\"\n    })\n  });\n};\nCloseIcon.defaultProps = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: \"16\",\n  height: \"16\"\n};\nvar CreateIcon = function CreateIcon(props) {\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"svg\", {\n    ...props,\n    children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"path\", {\n      fillRule: \"evenodd\",\n      d: \"M9 13V9h4a1 1 0 0 0 0-2H9V3a1 1 0 1 0-2 0v4H3a1 1 0 1 0 0 2h4v4a1 1 0 0 0 2 0Z\"\n    })\n  });\n};\nCreateIcon.defaultProps = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: \"16\",\n  height: \"16\"\n};\nvar DeleteIcon = function DeleteIcon(props) {\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"svg\", {\n    ...props,\n    children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"path\", {\n      fillRule: \"evenodd\",\n      d: \"M12 6v7c0 1.1-.4 1.55-1.5 1.55h-5C4.4 14.55 4 14.1 4 13V6h8Zm-1.5 1.5h-5v4.3c0 .66.5 1.2 1.111 1.2H9.39c.611 0 1.111-.54 1.111-1.2V7.5ZM13 3h-2l-1-1H6L5 3H3v1.5h10V3Z\"\n    })\n  });\n};\nDeleteIcon.defaultProps = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: \"16\",\n  height: \"16\"\n};\nvar DragIcon = function DragIcon(props) {\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"svg\", {\n    ...props,\n    children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"path\", {\n      fill: \"#fff\",\n      style: {\n        mixBlendMode: \"multiply\"\n      },\n      d: \"M0 0h16v16H0z\"\n    }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"path\", {\n      fill: \"#fff\",\n      style: {\n        mixBlendMode: \"multiply\"\n      },\n      d: \"M0 0h16v16H0z\"\n    }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"path\", {\n      d: \"M7 3H5v2h2V3zm4 0H9v2h2V3zM7 7H5v2h2V7zm4 0H9v2h2V7zm-4 4H5v2h2v-2zm4 0H9v2h2v-2z\",\n      fill: \"#161616\"\n    })]\n  });\n};\nDragIcon.defaultProps = {\n  width: \"16\",\n  height: \"16\",\n  fill: \"none\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n};\nvar ExternalLinkIcon = function ExternalLinkIcon(props) {\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"svg\", {\n    ...props,\n    children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"path\", {\n      fillRule: \"evenodd\",\n      clipRule: \"evenodd\",\n      d: \"M12.637 12.637v-4.72h1.362v4.721c0 .36-.137.676-.411.95-.275.275-.591.412-.95.412H3.362c-.38 0-.703-.132-.967-.396A1.315 1.315 0 0 1 2 12.638V3.362c0-.38.132-.703.396-.967S2.982 2 3.363 2h4.553v1.363H3.363v9.274h9.274ZM14 2H9.28l-.001 1.362h2.408L5.065 9.984l.95.95 6.622-6.622v2.409H14V2Z\",\n      fill: \"currentcolor\"\n    })\n  });\n};\nExternalLinkIcon.defaultProps = {\n  width: \"16\",\n  height: \"16\",\n  fill: \"none\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n};\nvar FeelIcon$1 = function FeelIcon(props) {\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"svg\", {\n    ...props,\n    children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"path\", {\n      d: \"M3.617 11.99c-.137.684-.392 1.19-.765 1.518-.362.328-.882.492-1.558.492H0l.309-1.579h1.264l1.515-7.64h-.912l.309-1.579h.911l.236-1.191c.137-.685.387-1.192.75-1.52C4.753.164 5.277 0 5.953 0h1.294L6.94 1.579H5.675l-.323 1.623h1.264l-.309 1.579H5.043l-1.426 7.208ZM5.605 11.021l3.029-4.155L7.28 3.202h2.073l.706 2.547h.176l1.691-2.547H14l-3.014 4.051 1.338 3.768H10.25l-.706-2.606H9.37L7.678 11.02H5.605Z\",\n      fill: \"currentcolor\"\n    })\n  });\n};\nFeelIcon$1.defaultProps = {\n  width: \"14\",\n  height: \"14\",\n  fill: \"none\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n};\nvar LaunchIcon = function LaunchIcon(props) {\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"svg\", {\n    ...props,\n    children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"path\", {\n      d: \"M26 28H6a2.003 2.003 0 0 1-2-2V6a2.003 2.003 0 0 1 2-2h10v2H6v20h20V16h2v10a2.003 2.003 0 0 1-2 2Z\"\n    }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"path\", {\n      d: \"M20 2v2h6.586L18 12.586 19.414 14 28 5.414V12h2V2H20z\"\n    })]\n  });\n};\nLaunchIcon.defaultProps = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 32 32\"\n};\nvar OpenPopupIcon = function OpenPopupIcon(props) {\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"svg\", {\n    ...props,\n    children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"path\", {\n      d: \"M6 15v-1H2.7L7 9.7 6.3 9 2 13.3V10H1v5zm4-14v1h3.3L9 6.3l.7.7L14 2.7V6h1V1z\"\n    })\n  });\n};\nOpenPopupIcon.defaultProps = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 16 16\"\n};\nfunction Header(props) {\n  const {\n    element,\n    headerProvider\n  } = props;\n  const {\n    getElementIcon,\n    getDocumentationRef,\n    getElementLabel,\n    getTypeLabel\n  } = headerProvider;\n  const label = getElementLabel(element);\n  const type = getTypeLabel(element);\n  const documentationRef = getDocumentationRef && getDocumentationRef(element);\n  const ElementIcon = getElementIcon(element);\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n    class: \"bio-properties-panel-header\",\n    children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n      class: \"bio-properties-panel-header-icon\",\n      children: ElementIcon && (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(ElementIcon, {\n        width: \"32\",\n        height: \"32\",\n        viewBox: \"0 0 32 32\"\n      })\n    }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n      class: \"bio-properties-panel-header-labels\",\n      children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n        title: type,\n        class: \"bio-properties-panel-header-type\",\n        children: type\n      }), label ? (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n        title: label,\n        class: \"bio-properties-panel-header-label\",\n        children: label\n      }) : null]\n    }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n      class: \"bio-properties-panel-header-actions\",\n      children: documentationRef ? (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"a\", {\n        rel: \"noreferrer\",\n        class: \"bio-properties-panel-header-link\",\n        href: documentationRef,\n        title: \"Open documentation\",\n        target: \"_blank\",\n        children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(ExternalLinkIcon, {})\n      }) : null\n    })]\n  });\n}\nconst DescriptionContext = (0,preact__WEBPACK_IMPORTED_MODULE_6__.createContext)({\n  description: {},\n  getDescriptionForId: () => {}\n});\nconst ErrorsContext = (0,preact__WEBPACK_IMPORTED_MODULE_6__.createContext)({\n  errors: {}\n});\n\n/**\n * @typedef {Function} <propertiesPanel.showEntry> callback\n *\n * @example\n *\n * useEvent('propertiesPanel.showEntry', ({ focus = false, ...rest }) => {\n *   // ...\n * });\n *\n * @param {Object} context\n * @param {boolean} [context.focus]\n *\n * @returns void\n */\n\nconst EventContext = (0,preact__WEBPACK_IMPORTED_MODULE_6__.createContext)({\n  eventBus: null\n});\n\n/**\n * @typedef { {\n *   parserDialect?: import('@bpmn-io/feel-editor').ParserDialect,\n *   builtins?: import('@bpmn-io/feel-editor').Variable[],\n *   dialect?: import('@bpmn-io/feel-editor').Dialect\n * } } FeelLanguageContextType\n */\n\n/**\n * @type {import('preact').Context<FeelLanguageContextType>}\n */\nconst FeelLanguageContext = (0,preact__WEBPACK_IMPORTED_MODULE_6__.createContext)({});\nconst LayoutContext = (0,preact__WEBPACK_IMPORTED_MODULE_6__.createContext)({\n  layout: {},\n  setLayout: () => {},\n  getLayoutForKey: () => {},\n  setLayoutForKey: () => {}\n});\nconst TooltipContext = (0,preact__WEBPACK_IMPORTED_MODULE_6__.createContext)({\n  tooltip: {},\n  getTooltipForId: () => {}\n});\n\n/**\n * Accesses the global TooltipContext and returns a tooltip for a given id and element.\n *\n * @example\n * ```jsx\n * function TextField(props) {\n *   const tooltip = useTooltipContext('input1', element);\n * }\n * ```\n *\n * @param {string} id\n * @param {object} element\n *\n * @returns {string}\n */\nfunction useTooltipContext(id, element) {\n  const {\n    getTooltipForId\n  } = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useContext)(TooltipContext);\n  return getTooltipForId(id, element);\n}\nfunction TooltipWrapper(props) {\n  const {\n    forId,\n    element\n  } = props;\n  const contextDescription = useTooltipContext(forId, element);\n  const value = props.value || contextDescription;\n  if (!value) {\n    return props.children;\n  }\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(Tooltip, {\n    ...props,\n    value: value,\n    forId: `bio-properties-panel-${forId}`\n  });\n}\nfunction Tooltip(props) {\n  const {\n    forId,\n    value,\n    parent,\n    direction = 'right',\n    position\n  } = props;\n  const [visible, setVisible] = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useState)(false);\n\n  // Tooltip will be shown after SHOW_DELAY ms from hovering over the source element.\n  const SHOW_DELAY = 200;\n  let timeout = null;\n  const wrapperRef = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useRef)(null);\n  const tooltipRef = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useRef)(null);\n  const show = (_, delay) => {\n    if (visible) return;\n    if (delay) {\n      timeout = setTimeout(() => {\n        setVisible(true);\n      }, SHOW_DELAY);\n    } else {\n      setVisible(true);\n    }\n  };\n  const hide = () => {\n    clearTimeout(timeout);\n    setVisible(false);\n  };\n  const handleMouseLeave = ({\n    relatedTarget\n  }) => {\n    // Don't hide the tooltip when moving mouse between the wrapper and the tooltip.\n    if (relatedTarget === wrapperRef.current || relatedTarget === tooltipRef.current || relatedTarget?.parentElement === tooltipRef.current) {\n      return;\n    }\n    hide();\n  };\n  const handleFocusOut = e => {\n    const {\n      target\n    } = e;\n\n    // Don't hide the tooltip if the wrapper or the tooltip itself is clicked.\n    const isHovered = target.matches(':hover') || tooltipRef.current?.matches(':hover');\n    if (target === wrapperRef.current && isHovered) {\n      e.stopPropagation();\n      return;\n    }\n    hide();\n  };\n  const hideTooltipViaEscape = e => {\n    e.code === 'Escape' && hide();\n  };\n  const renderTooltip = () => {\n    return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n      class: `bio-properties-panel-tooltip ${direction}`,\n      role: \"tooltip\",\n      id: \"bio-properties-panel-tooltip\",\n      \"aria-labelledby\": forId,\n      style: position || getTooltipPosition(wrapperRef.current),\n      ref: tooltipRef,\n      onClick: e => e.stopPropagation(),\n      onMouseLeave: handleMouseLeave,\n      children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n        class: \"bio-properties-panel-tooltip-content\",\n        children: value\n      }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n        class: \"bio-properties-panel-tooltip-arrow\"\n      })]\n    });\n  };\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n    class: \"bio-properties-panel-tooltip-wrapper\",\n    tabIndex: \"0\",\n    ref: wrapperRef,\n    onMouseEnter: e => show(e, true),\n    onMouseLeave: handleMouseLeave,\n    onFocus: show,\n    onBlur: handleFocusOut,\n    onKeyDown: hideTooltipViaEscape,\n    children: [props.children, visible ? parent ? (0,preact_compat__WEBPACK_IMPORTED_MODULE_7__.createPortal)(renderTooltip(), parent.current) : renderTooltip() : null]\n  });\n}\n\n// helper\n\nfunction getTooltipPosition(refElement) {\n  const refPosition = refElement.getBoundingClientRect();\n  const right = `calc(100% - ${refPosition.x}px)`;\n  const top = `${refPosition.top - 10}px`;\n  return `right: ${right}; top: ${top};`;\n}\n\n/**\n * Accesses the global DescriptionContext and returns a description for a given id and element.\n *\n * @example\n * ```jsx\n * function TextField(props) {\n *   const description = useDescriptionContext('input1', element);\n * }\n * ```\n *\n * @param {string} id\n * @param {object} element\n *\n * @returns {string}\n */\nfunction useDescriptionContext(id, element) {\n  const {\n    getDescriptionForId\n  } = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useContext)(DescriptionContext);\n  return getDescriptionForId(id, element);\n}\nfunction useDebounce(callback, debounceFn) {\n  const debouncedCallback = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useCallback)(debounceFn(callback), [callback, debounceFn]);\n\n  // make sure previous call is not stalled\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    return () => {\n      debouncedCallback.cancel?.();\n    };\n  }, [debouncedCallback]);\n  return debouncedCallback;\n}\nfunction useError(id) {\n  const {\n    errors\n  } = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useContext)(ErrorsContext);\n  return errors[id];\n}\nfunction useErrors() {\n  const {\n    errors\n  } = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useContext)(ErrorsContext);\n  return errors;\n}\n\n/**\n * Subscribe to an event immediately. Update subscription after inputs changed.\n *\n * @param {string} event\n * @param {Function} callback\n */\nfunction useEvent(event, callback, eventBus) {\n  const eventContext = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useContext)(EventContext);\n  if (!eventBus) {\n    ({\n      eventBus\n    } = eventContext);\n  }\n  const didMount = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useRef)(false);\n\n  // (1) subscribe immediately\n  if (eventBus && !didMount.current) {\n    eventBus.on(event, callback);\n  }\n\n  // (2) update subscription after inputs changed\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    if (eventBus && didMount.current) {\n      eventBus.on(event, callback);\n    }\n    didMount.current = true;\n    return () => {\n      if (eventBus) {\n        eventBus.off(event, callback);\n      }\n    };\n  }, [callback, event, eventBus]);\n}\n\n/**\n * Creates a state that persists in the global LayoutContext.\n *\n * @example\n * ```jsx\n * function Group(props) {\n *   const [ open, setOpen ] = useLayoutState([ 'groups', 'foo', 'open' ], false);\n * }\n * ```\n *\n * @param {(string|number)[]} path\n * @param {any} [defaultValue]\n *\n * @returns {[ any, Function ]}\n */\nfunction useLayoutState(path, defaultValue) {\n  const {\n    getLayoutForKey,\n    setLayoutForKey\n  } = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useContext)(LayoutContext);\n  const layoutForKey = getLayoutForKey(path, defaultValue);\n  const setState = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useCallback)(newValue => {\n    setLayoutForKey(path, newValue);\n  }, [setLayoutForKey]);\n  return [layoutForKey, setState];\n}\n\n/**\n * @pinussilvestrus: we need to introduce our own hook to persist the previous\n * state on updates.\n *\n * cf. https://reactjs.org/docs/hooks-faq.html#how-to-get-the-previous-props-or-state\n */\n\nfunction usePrevious(value) {\n  const ref = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useRef)();\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    ref.current = value;\n  });\n  return ref.current;\n}\n\n/**\n * Subscribe to `propertiesPanel.showEntry`.\n *\n * @param {string} id\n *\n * @returns {import('preact').Ref}\n */\nfunction useShowEntryEvent(id) {\n  const {\n    onShow\n  } = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useContext)(LayoutContext);\n  const ref = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useRef)();\n  const focus = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useRef)(false);\n  const onShowEntry = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useCallback)(event => {\n    if (event.id === id) {\n      onShow();\n      if (!focus.current) {\n        focus.current = true;\n      }\n    }\n  }, [id]);\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    if (focus.current && ref.current) {\n      if ((0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isFunction)(ref.current.focus)) {\n        ref.current.focus();\n      }\n      if ((0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isFunction)(ref.current.select)) {\n        ref.current.select();\n      }\n      focus.current = false;\n    }\n  });\n  useEvent('propertiesPanel.showEntry', onShowEntry);\n  return ref;\n}\n\n/**\n * @callback setSticky\n * @param {boolean} value\n */\n\n/**\n * Use IntersectionObserver to identify when DOM element is in sticky mode.\n * If sticky is observered setSticky(true) will be called.\n * If sticky mode is left, setSticky(false) will be called.\n *\n *\n * @param {Object} ref\n * @param {string} scrollContainerSelector\n * @param {setSticky} setSticky\n */\nfunction useStickyIntersectionObserver(ref, scrollContainerSelector, setSticky) {\n  const [scrollContainer, setScrollContainer] = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useState)((0,min_dom__WEBPACK_IMPORTED_MODULE_9__.query)(scrollContainerSelector));\n  const updateScrollContainer = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useCallback)(() => {\n    const newScrollContainer = (0,min_dom__WEBPACK_IMPORTED_MODULE_9__.query)(scrollContainerSelector);\n    if (newScrollContainer !== scrollContainer) {\n      setScrollContainer(newScrollContainer);\n    }\n  }, [scrollContainerSelector, scrollContainer]);\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    updateScrollContainer();\n  }, [updateScrollContainer]);\n  useEvent('propertiesPanel.attach', updateScrollContainer);\n  useEvent('propertiesPanel.detach', updateScrollContainer);\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    const Observer = IntersectionObserver;\n\n    // return early if IntersectionObserver is not available\n    if (!Observer) {\n      return;\n    }\n\n    // TODO(@barmac): test this\n    if (!ref.current || !scrollContainer) {\n      return;\n    }\n    const observer = new Observer(entries => {\n      // scroll container is unmounted, do not update sticky state\n      if (scrollContainer.scrollHeight === 0) {\n        return;\n      }\n      entries.forEach(entry => {\n        if (entry.intersectionRatio < 1) {\n          setSticky(true);\n        } else if (entry.intersectionRatio === 1) {\n          setSticky(false);\n        }\n      });\n    }, {\n      root: scrollContainer,\n      rootMargin: '0px 0px 999999% 0px',\n      // Use bottom margin to avoid stickyness when scrolling out to bottom\n      threshold: [1]\n    });\n    observer.observe(ref.current);\n\n    // Unobserve if unmounted\n    return () => {\n      observer.unobserve(ref.current);\n    };\n  }, [ref.current, scrollContainer, setSticky]);\n}\n\n/**\n * Creates a static function reference with changing body.\n * This is necessary when external libraries require a callback function\n * that has references to state variables.\n *\n * Usage:\n * const callback = useStaticCallback((val) => {val === currentState});\n *\n * The `callback` reference is static and can be safely used in external\n * libraries or as a prop that does not cause rerendering of children.\n *\n * @param {Function} callback function with changing reference\n * @returns {Function} static function reference\n */\nfunction useStaticCallback(callback) {\n  const callbackRef = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useRef)(callback);\n  callbackRef.current = callback;\n  return (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useCallback)((...args) => callbackRef.current(...args), []);\n}\nfunction useElementVisible(element) {\n  const [visible, setVisible] = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useState)(!!element && !!element.clientHeight);\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useLayoutEffect)(() => {\n    if (!element) return;\n    const resizeObserver = new ResizeObserver(([entry]) => {\n      requestAnimationFrame(() => {\n        const newVisible = !!entry.contentRect.height;\n        if (newVisible !== visible) {\n          setVisible(newVisible);\n        }\n      });\n    });\n    resizeObserver.observe(element);\n    return () => resizeObserver.disconnect();\n  }, [element, visible]);\n  return visible;\n}\nfunction Group(props) {\n  const {\n    element,\n    entries = [],\n    id,\n    label,\n    shouldOpen = false\n  } = props;\n  const groupRef = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useRef)(null);\n  const [open, setOpen] = useLayoutState(['groups', id, 'open'], shouldOpen);\n  const onShow = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useCallback)(() => setOpen(true), [setOpen]);\n  const toggleOpen = () => setOpen(!open);\n  const [edited, setEdited] = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useState)(false);\n  const [sticky, setSticky] = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useState)(false);\n\n  // set edited state depending on all entries\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    // TODO(@barmac): replace with CSS when `:has()` is supported in all major browsers, or rewrite as in https://github.com/camunda/camunda-modeler/issues/3815#issuecomment-1733038161\n    const scheduled = requestAnimationFrame(() => {\n      const hasOneEditedEntry = entries.find(entry => {\n        const {\n          id,\n          isEdited\n        } = entry;\n        const entryNode = (0,min_dom__WEBPACK_IMPORTED_MODULE_9__.query)(`[data-entry-id=\"${id}\"]`);\n        if (!(0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isFunction)(isEdited) || !entryNode) {\n          return false;\n        }\n        const inputNode = (0,min_dom__WEBPACK_IMPORTED_MODULE_9__.query)('.bio-properties-panel-input', entryNode);\n        return isEdited(inputNode);\n      });\n      setEdited(hasOneEditedEntry);\n    });\n    return () => cancelAnimationFrame(scheduled);\n  }, [entries, setEdited]);\n\n  // set error state depending on all entries\n  const allErrors = useErrors();\n  const hasErrors = entries.some(entry => allErrors[entry.id]);\n\n  // set css class when group is sticky to top\n  useStickyIntersectionObserver(groupRef, 'div.bio-properties-panel-scroll-container', setSticky);\n  const propertiesPanelContext = {\n    ...(0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useContext)(LayoutContext),\n    onShow\n  };\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n    class: \"bio-properties-panel-group\",\n    \"data-group-id\": 'group-' + id,\n    ref: groupRef,\n    children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n      class: classnames__WEBPACK_IMPORTED_MODULE_3___default()('bio-properties-panel-group-header', edited ? '' : 'empty', open ? 'open' : '', sticky && open ? 'sticky' : ''),\n      onClick: toggleOpen,\n      children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n        title: props.tooltip ? null : label,\n        \"data-title\": label,\n        class: \"bio-properties-panel-group-header-title\",\n        children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(TooltipWrapper, {\n          value: props.tooltip,\n          forId: 'group-' + id,\n          element: element,\n          parent: groupRef,\n          children: label\n        })\n      }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n        class: \"bio-properties-panel-group-header-buttons\",\n        children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(DataMarker, {\n          edited: edited,\n          hasErrors: hasErrors\n        }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"button\", {\n          type: \"button\",\n          title: \"Toggle section\",\n          class: \"bio-properties-panel-group-header-button bio-properties-panel-arrow\",\n          children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(ArrowIcon, {\n            class: open ? 'bio-properties-panel-arrow-down' : 'bio-properties-panel-arrow-right'\n          })\n        })]\n      })]\n    }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n      class: classnames__WEBPACK_IMPORTED_MODULE_3___default()('bio-properties-panel-group-entries', open ? 'open' : ''),\n      children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(LayoutContext.Provider, {\n        value: propertiesPanelContext,\n        children: entries.map(entry => {\n          const {\n            component: Component,\n            id\n          } = entry;\n          return (0,preact__WEBPACK_IMPORTED_MODULE_6__.createElement)(Component, {\n            ...entry,\n            element: element,\n            key: id\n          });\n        })\n      })\n    })]\n  });\n}\nfunction DataMarker(props) {\n  const {\n    edited,\n    hasErrors\n  } = props;\n  if (hasErrors) {\n    return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n      title: \"Section contains an error\",\n      class: \"bio-properties-panel-dot bio-properties-panel-dot--error\"\n    });\n  }\n  if (edited) {\n    return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n      title: \"Section contains edits\",\n      class: \"bio-properties-panel-dot\"\n    });\n  }\n  return null;\n}\n\n/**\n * @typedef { {\n *  text: (element: object) => string,\n *  icon?: (element: Object) => import('preact').Component\n * } } PlaceholderDefinition\n *\n * @param { PlaceholderDefinition } props\n */\nfunction Placeholder(props) {\n  const {\n    text,\n    icon: Icon\n  } = props;\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n    class: \"bio-properties-panel open\",\n    children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"section\", {\n      class: \"bio-properties-panel-placeholder\",\n      children: [Icon && (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(Icon, {\n        class: \"bio-properties-panel-placeholder-icon\"\n      }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"p\", {\n        class: \"bio-properties-panel-placeholder-text\",\n        children: text\n      })]\n    })\n  });\n}\nconst DEFAULT_LAYOUT = {};\nconst DEFAULT_DESCRIPTION = {};\nconst DEFAULT_TOOLTIP = {};\n\n/**\n * @typedef { {\n *    component: import('preact').Component,\n *    id: String,\n *    isEdited?: Function\n * } } EntryDefinition\n *\n * @typedef { {\n *    autoFocusEntry: String,\n *    autoOpen?: Boolean,\n *    entries: Array<EntryDefinition>,\n *    id: String,\n *    label: String,\n *    remove: (event: MouseEvent) => void\n * } } ListItemDefinition\n *\n * @typedef { {\n *    add: (event: MouseEvent) => void,\n *    component: import('preact').Component,\n *    element: Object,\n *    id: String,\n *    items: Array<ListItemDefinition>,\n *    label: String,\n *    shouldOpen?: Boolean\n * } } ListGroupDefinition\n *\n * @typedef { {\n *    component?: import('preact').Component,\n *    entries: Array<EntryDefinition>,\n *    id: String,\n *    label: String,\n *    shouldOpen?: Boolean\n * } } GroupDefinition\n *\n *  @typedef { {\n *    [id: String]: GetDescriptionFunction\n * } } DescriptionConfig\n *\n *  @typedef { {\n *    [id: String]: GetTooltipFunction\n * } } TooltipConfig\n *\n * @callback { {\n * @param {string} id\n * @param {Object} element\n * @returns {string}\n * } } GetDescriptionFunction\n *\n * @callback { {\n * @param {string} id\n * @param {Object} element\n * @returns {string}\n * } } GetTooltipFunction\n *\n * @typedef { {\n *  getEmpty: (element: object) => import('./components/Placeholder').PlaceholderDefinition,\n *  getMultiple: (element: Object) => import('./components/Placeholder').PlaceholderDefinition\n * } } PlaceholderProvider\n *\n */\n\n/**\n * A basic properties panel component. Describes *how* content will be rendered, accepts\n * data from implementor to describe *what* will be rendered.\n *\n * @param {Object} props\n * @param {Object|Array} props.element\n * @param {import('./components/Header').HeaderProvider} props.headerProvider\n * @param {PlaceholderProvider} [props.placeholderProvider]\n * @param {Array<GroupDefinition|ListGroupDefinition>} props.groups\n * @param {Object} [props.layoutConfig]\n * @param {Function} [props.layoutChanged]\n * @param {DescriptionConfig} [props.descriptionConfig]\n * @param {Function} [props.descriptionLoaded]\n * @param {TooltipConfig} [props.tooltipConfig]\n * @param {Function} [props.tooltipLoaded]\n * @param {HTMLElement} [props.feelPopupContainer]\n * @param {Function} [props.getFeelPopupLinks]\n * @param {Object} [props.eventBus]\n */\nfunction PropertiesPanel$1(props) {\n  const {\n    element,\n    headerProvider,\n    placeholderProvider,\n    groups,\n    layoutConfig,\n    layoutChanged,\n    descriptionConfig,\n    descriptionLoaded,\n    tooltipConfig,\n    tooltipLoaded,\n    eventBus\n  } = props;\n\n  // set-up layout context\n  const [layout, setLayout] = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useState)(createLayout(layoutConfig));\n\n  // react to external changes in the layout config\n  useUpdateLayoutEffect(() => {\n    const newLayout = createLayout(layoutConfig);\n    setLayout(newLayout);\n  }, [layoutConfig]);\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    if (typeof layoutChanged === 'function') {\n      layoutChanged(layout);\n    }\n  }, [layout, layoutChanged]);\n  const getLayoutForKey = (key, defaultValue) => {\n    return (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(layout, key, defaultValue);\n  };\n  const setLayoutForKey = (key, config) => {\n    const newLayout = (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.assign)({}, layout);\n    (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.set)(newLayout, key, config);\n    setLayout(newLayout);\n  };\n  const layoutContext = {\n    layout,\n    setLayout,\n    getLayoutForKey,\n    setLayoutForKey\n  };\n\n  // set-up description context\n  const description = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => createDescriptionContext(descriptionConfig), [descriptionConfig]);\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    if (typeof descriptionLoaded === 'function') {\n      descriptionLoaded(description);\n    }\n  }, [description, descriptionLoaded]);\n  const getDescriptionForId = (id, element) => {\n    return description[id] && description[id](element);\n  };\n  const descriptionContext = {\n    description,\n    getDescriptionForId\n  };\n\n  // set-up tooltip context\n  const tooltip = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => createTooltipContext(tooltipConfig), [tooltipConfig]);\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    if (typeof tooltipLoaded === 'function') {\n      tooltipLoaded(tooltip);\n    }\n  }, [tooltip, tooltipLoaded]);\n  const getTooltipForId = (id, element) => {\n    return tooltip[id] && tooltip[id](element);\n  };\n  const tooltipContext = {\n    tooltip,\n    getTooltipForId\n  };\n  const [errors, setErrors] = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useState)({});\n  const onSetErrors = ({\n    errors\n  }) => setErrors(errors);\n  useEvent('propertiesPanel.setErrors', onSetErrors, eventBus);\n  const errorsContext = {\n    errors\n  };\n  const eventContext = {\n    eventBus\n  };\n  const propertiesPanelContext = {\n    element\n  };\n\n  // empty state\n  if (placeholderProvider && !element) {\n    return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(Placeholder, {\n      ...placeholderProvider.getEmpty()\n    });\n  }\n\n  // multiple state\n  if (placeholderProvider && (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isArray)(element)) {\n    return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(Placeholder, {\n      ...placeholderProvider.getMultiple()\n    });\n  }\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(LayoutContext.Provider, {\n    value: propertiesPanelContext,\n    children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(ErrorsContext.Provider, {\n      value: errorsContext,\n      children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(DescriptionContext.Provider, {\n        value: descriptionContext,\n        children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(TooltipContext.Provider, {\n          value: tooltipContext,\n          children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(LayoutContext.Provider, {\n            value: layoutContext,\n            children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(EventContext.Provider, {\n              value: eventContext,\n              children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n                class: \"bio-properties-panel\",\n                children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(Header, {\n                  element: element,\n                  headerProvider: headerProvider\n                }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n                  class: \"bio-properties-panel-scroll-container\",\n                  children: groups.map(group => {\n                    const {\n                      component: Component = Group,\n                      id\n                    } = group;\n                    return (0,preact__WEBPACK_IMPORTED_MODULE_6__.createElement)(Component, {\n                      ...group,\n                      key: id,\n                      element: element\n                    });\n                  })\n                })]\n              })\n            })\n          })\n        })\n      })\n    })\n  });\n}\n\n// helpers //////////////////\n\nfunction createLayout(overrides = {}, defaults = DEFAULT_LAYOUT) {\n  return {\n    ...defaults,\n    ...overrides\n  };\n}\nfunction createDescriptionContext(overrides = {}) {\n  return {\n    ...DEFAULT_DESCRIPTION,\n    ...overrides\n  };\n}\nfunction createTooltipContext(overrides = {}) {\n  return {\n    ...DEFAULT_TOOLTIP,\n    ...overrides\n  };\n}\n\n// hooks //////////////////\n\n/**\n * This hook behaves like useLayoutEffect, but does not trigger on the first render.\n *\n * @param {Function} effect\n * @param {Array} deps\n */\nfunction useUpdateLayoutEffect(effect, deps) {\n  const isMounted = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useRef)(false);\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useLayoutEffect)(() => {\n    if (isMounted.current) {\n      return effect();\n    } else {\n      isMounted.current = true;\n    }\n  }, deps);\n}\n\n/**\n * @typedef { {\n *   [key: string]: string;\n * } } TranslateReplacements\n */\n\n/**\n * A simple translation stub to be used for multi-language support.\n * Can be easily replaced with a more sophisticated solution.\n *\n * @param {string} template to interpolate\n * @param {TranslateReplacements} [replacements] a map with substitutes\n *\n * @return {string} the translated string\n */\nfunction translateFallback(template, replacements) {\n  replacements = replacements || {};\n  return template.replace(/{([^}]+)}/g, function (_, key) {\n    return replacements[key] || '{' + key + '}';\n  });\n}\nfunction CollapsibleEntry(props) {\n  const {\n    element,\n    entries = [],\n    id,\n    label,\n    open: shouldOpen,\n    remove,\n    translate = translateFallback\n  } = props;\n  const [open, setOpen] = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useState)(shouldOpen);\n  const toggleOpen = () => setOpen(!open);\n  const {\n    onShow\n  } = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useContext)(LayoutContext);\n  const propertiesPanelContext = {\n    ...(0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useContext)(LayoutContext),\n    onShow: (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useCallback)(() => {\n      setOpen(true);\n      if ((0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isFunction)(onShow)) {\n        onShow();\n      }\n    }, [onShow, setOpen])\n  };\n  const placeholderLabel = translate('<empty>');\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n    \"data-entry-id\": id,\n    class: classnames__WEBPACK_IMPORTED_MODULE_3___default()('bio-properties-panel-collapsible-entry', open ? 'open' : ''),\n    children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n      class: \"bio-properties-panel-collapsible-entry-header\",\n      onClick: toggleOpen,\n      children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n        title: label || placeholderLabel,\n        class: classnames__WEBPACK_IMPORTED_MODULE_3___default()('bio-properties-panel-collapsible-entry-header-title', !label && 'empty'),\n        children: label || placeholderLabel\n      }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"button\", {\n        type: \"button\",\n        title: translate('Toggle list item'),\n        class: \"bio-properties-panel-arrow  bio-properties-panel-collapsible-entry-arrow\",\n        children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(ArrowIcon, {\n          class: open ? 'bio-properties-panel-arrow-down' : 'bio-properties-panel-arrow-right'\n        })\n      }), remove ? (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"button\", {\n        type: \"button\",\n        title: translate('Delete item'),\n        class: \"bio-properties-panel-remove-entry\",\n        onClick: remove,\n        children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(DeleteIcon, {})\n      }) : null]\n    }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n      class: classnames__WEBPACK_IMPORTED_MODULE_3___default()('bio-properties-panel-collapsible-entry-entries', open ? 'open' : ''),\n      children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(LayoutContext.Provider, {\n        value: propertiesPanelContext,\n        children: entries.map(entry => {\n          const {\n            component: Component,\n            id\n          } = entry;\n          return (0,preact__WEBPACK_IMPORTED_MODULE_6__.createElement)(Component, {\n            ...entry,\n            element: element,\n            key: id\n          });\n        })\n      })\n    })]\n  });\n}\nfunction ListItem(props) {\n  const {\n    autoFocusEntry,\n    autoOpen,\n    translate = translateFallback\n  } = props;\n\n  // focus specified entry on auto open\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    if (autoOpen && autoFocusEntry) {\n      const entry = (0,min_dom__WEBPACK_IMPORTED_MODULE_9__.query)(`[data-entry-id=\"${autoFocusEntry}\"]`);\n      const focusableInput = (0,min_dom__WEBPACK_IMPORTED_MODULE_9__.query)('.bio-properties-panel-input', entry);\n      if (focusableInput) {\n        if ((0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isFunction)(focusableInput.select)) {\n          focusableInput.select();\n        } else if ((0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isFunction)(focusableInput.focus)) {\n          focusableInput.focus();\n        }\n        focusableInput.scrollIntoView();\n      }\n    }\n  }, [autoOpen, autoFocusEntry]);\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n    class: \"bio-properties-panel-list-item\",\n    children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(CollapsibleEntry, {\n      ...props,\n      open: autoOpen,\n      translate: translate\n    })\n  });\n}\nconst noop$6 = () => {};\n\n/**\n * @param {import('../PropertiesPanel').ListGroupDefinition} props\n */\nfunction ListGroup(props) {\n  const {\n    add,\n    element,\n    id,\n    items,\n    label,\n    shouldOpen = false,\n    translate = translateFallback\n  } = props;\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    if (props.shouldSort != undefined) {\n      console.warn('the property \\'shouldSort\\' is no longer supported');\n    }\n  }, [props.shouldSort]);\n  const groupRef = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useRef)(null);\n  const [open, setOpen] = useLayoutState(['groups', id, 'open'], shouldOpen);\n  const [sticky, setSticky] = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useState)(false);\n  const onShow = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useCallback)(() => setOpen(true), [setOpen]);\n  const [localItems, setLocalItems] = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useState)([]);\n\n  // Flag to mark that add button was clicked in the last render cycle\n  const [addTriggered, setAddTriggered] = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useState)(false);\n  const prevElement = usePrevious(element);\n  const toggleOpen = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useCallback)(() => setOpen(!open), [open]);\n  const openItemIds = element === prevElement && open && addTriggered ? getNewItemIds(items, localItems) : [];\n\n  // reset local state after items changed\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    setLocalItems(items);\n    setAddTriggered(false);\n  }, [items]);\n\n  // set css class when group is sticky to top\n  useStickyIntersectionObserver(groupRef, 'div.bio-properties-panel-scroll-container', setSticky);\n  const hasItems = !!items.length;\n  const propertiesPanelContext = {\n    ...(0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useContext)(LayoutContext),\n    onShow\n  };\n  const handleAddClick = e => {\n    setAddTriggered(true);\n    setOpen(true);\n    add(e);\n  };\n  const allErrors = useErrors();\n  const hasError = items.some(item => {\n    if (allErrors[item.id]) {\n      return true;\n    }\n    if (!item.entries) {\n      return;\n    }\n\n    // also check if the error is nested, e.g. for name-value entries\n    return item.entries.some(entry => allErrors[entry.id]);\n  });\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n    class: \"bio-properties-panel-group\",\n    \"data-group-id\": 'group-' + id,\n    ref: groupRef,\n    children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n      class: classnames__WEBPACK_IMPORTED_MODULE_3___default()('bio-properties-panel-group-header', hasItems ? '' : 'empty', hasItems && open ? 'open' : '', sticky && open ? 'sticky' : ''),\n      onClick: hasItems ? toggleOpen : noop$6,\n      children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n        title: props.tooltip ? null : label,\n        \"data-title\": label,\n        class: \"bio-properties-panel-group-header-title\",\n        children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(TooltipWrapper, {\n          value: props.tooltip,\n          forId: 'group-' + id,\n          element: element,\n          parent: groupRef,\n          children: label\n        })\n      }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n        class: \"bio-properties-panel-group-header-buttons\",\n        children: [add ? (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"button\", {\n          type: \"button\",\n          title: translate('Create new list item'),\n          class: \"bio-properties-panel-group-header-button bio-properties-panel-add-entry\",\n          onClick: handleAddClick,\n          children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(CreateIcon, {}), !hasItems ? (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"span\", {\n            class: \"bio-properties-panel-add-entry-label\",\n            children: translate('Create')\n          }) : null]\n        }) : null, hasItems ? (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n          title: translate(`List contains {numOfItems} item${items.length != 1 ? 's' : ''}`, {\n            numOfItems: items.length\n          }),\n          class: classnames__WEBPACK_IMPORTED_MODULE_3___default()('bio-properties-panel-list-badge', hasError ? 'bio-properties-panel-list-badge--error' : ''),\n          children: items.length\n        }) : null, hasItems ? (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"button\", {\n          type: \"button\",\n          title: translate('Toggle section'),\n          class: \"bio-properties-panel-group-header-button bio-properties-panel-arrow\",\n          children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(ArrowIcon, {\n            class: open ? 'bio-properties-panel-arrow-down' : 'bio-properties-panel-arrow-right'\n          })\n        }) : null]\n      })]\n    }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n      class: classnames__WEBPACK_IMPORTED_MODULE_3___default()('bio-properties-panel-list', open && hasItems ? 'open' : ''),\n      children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(LayoutContext.Provider, {\n        value: propertiesPanelContext,\n        children: items.map((item, index) => {\n          if (!item) {\n            return;\n          }\n          const {\n            id\n          } = item;\n\n          // if item was added, open it\n          // existing items will not be affected as autoOpen\n          // is only applied on first render\n          const autoOpen = openItemIds.includes(item.id);\n          return (0,preact__WEBPACK_IMPORTED_MODULE_6__.createElement)(ListItem, {\n            ...item,\n            autoOpen: autoOpen,\n            element: element,\n            index: index,\n            key: id,\n            translate: translate\n          });\n        })\n      })\n    })]\n  });\n}\nfunction getNewItemIds(newItems, oldItems) {\n  const newIds = newItems.map(item => item.id);\n  const oldIds = oldItems.map(item => item.id);\n  return newIds.filter(itemId => !oldIds.includes(itemId));\n}\nfunction Description$1(props) {\n  const {\n    element,\n    forId,\n    value\n  } = props;\n  const contextDescription = useDescriptionContext(forId, element);\n  const description = value || contextDescription;\n  if (description) {\n    return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n      class: \"bio-properties-panel-description\",\n      children: description\n    });\n  }\n}\nfunction Checkbox(props) {\n  const {\n    id,\n    label,\n    onChange,\n    disabled,\n    value = false,\n    onFocus,\n    onBlur,\n    tooltip\n  } = props;\n  const [localValue, setLocalValue] = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useState)(value);\n  const handleChangeCallback = ({\n    target\n  }) => {\n    onChange(target.checked);\n  };\n  const handleChange = e => {\n    handleChangeCallback(e);\n    setLocalValue(e.target.value);\n  };\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    if (value === localValue) {\n      return;\n    }\n    setLocalValue(value);\n  }, [value]);\n  const ref = useShowEntryEvent(id);\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n    class: \"bio-properties-panel-checkbox\",\n    children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"input\", {\n      ref: ref,\n      id: prefixId$8(id),\n      name: id,\n      onFocus: onFocus,\n      onBlur: onBlur,\n      type: \"checkbox\",\n      class: \"bio-properties-panel-input\",\n      onChange: handleChange,\n      checked: localValue,\n      disabled: disabled\n    }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"label\", {\n      for: prefixId$8(id),\n      class: \"bio-properties-panel-label\",\n      children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(TooltipWrapper, {\n        value: tooltip,\n        forId: id,\n        element: props.element,\n        children: label\n      })\n    })]\n  });\n}\n\n/**\n * @param {Object} props\n * @param {Object} props.element\n * @param {String} props.id\n * @param {String} props.description\n * @param {String} props.label\n * @param {Function} props.getValue\n * @param {Function} props.setValue\n * @param {Function} props.onFocus\n * @param {Function} props.onBlur\n * @param {string|import('preact').Component} props.tooltip\n * @param {boolean} [props.disabled]\n */\nfunction CheckboxEntry(props) {\n  const {\n    element,\n    id,\n    description,\n    label,\n    getValue,\n    setValue,\n    disabled,\n    onFocus,\n    onBlur,\n    tooltip\n  } = props;\n  const value = getValue(element);\n  const error = useError(id);\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n    class: \"bio-properties-panel-entry bio-properties-panel-checkbox-entry\",\n    \"data-entry-id\": id,\n    children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(Checkbox, {\n      disabled: disabled,\n      id: id,\n      label: label,\n      onChange: setValue,\n      onFocus: onFocus,\n      onBlur: onBlur,\n      value: value,\n      tooltip: tooltip,\n      element: element\n    }, element), error && (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n      class: \"bio-properties-panel-error\",\n      children: error\n    }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(Description$1, {\n      forId: id,\n      element: element,\n      value: description\n    })]\n  });\n}\nfunction isEdited$8(node) {\n  return node && !!node.checked;\n}\n\n// helpers /////////////////\n\nfunction prefixId$8(id) {\n  return `bio-properties-panel-${id}`;\n}\nfunction OpenPopupButton({\n  onClick,\n  title = 'Open pop-up editor'\n}) {\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"button\", {\n    type: \"button\",\n    title: title,\n    class: 'bio-properties-panel-open-feel-popup',\n    onClick: onClick,\n    children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(OpenPopupIcon, {})\n  });\n}\nconst noop$5 = () => {};\n\n/**\n * Buffer `.focus()` calls while the editor is not initialized.\n * Set Focus inside when the editor is ready.\n */\nconst useBufferedFocus$1 = function (editor, ref) {\n  const [buffer, setBuffer] = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useState)(undefined);\n  ref.current = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => ({\n    focus: offset => {\n      if (editor) {\n        editor.focus(offset);\n      } else {\n        if (typeof offset === 'undefined') {\n          offset = Infinity;\n        }\n        setBuffer(offset);\n      }\n    }\n  }), [editor]);\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    if (typeof buffer !== 'undefined' && editor) {\n      editor.focus(buffer);\n      setBuffer(false);\n    }\n  }, [editor, buffer]);\n};\nconst TemplatingEditor = (0,preact_compat__WEBPACK_IMPORTED_MODULE_7__.forwardRef)((props, ref) => {\n  const {\n    onInput,\n    disabled,\n    tooltipContainer,\n    enableGutters,\n    value,\n    onLint = noop$5,\n    onOpenPopup = noop$5,\n    popupOpen,\n    contentAttributes = {},\n    hostLanguage = null,\n    singleLine = false\n  } = props;\n  const inputRef = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useRef)();\n  const [editor, setEditor] = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useState)();\n  const [localValue, setLocalValue] = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useState)(value || '');\n  useBufferedFocus$1(editor, ref);\n  const handleInput = useStaticCallback(newValue => {\n    onInput(newValue);\n    setLocalValue(newValue);\n  });\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    let editor;\n    editor = new feelers__WEBPACK_IMPORTED_MODULE_11__.FeelersEditor({\n      container: inputRef.current,\n      onChange: handleInput,\n      value: localValue,\n      onLint,\n      contentAttributes,\n      tooltipContainer,\n      enableGutters,\n      hostLanguage,\n      singleLine,\n      lineWrap: true\n    });\n    setEditor(editor);\n    return () => {\n      onLint([]);\n      inputRef.current.innerHTML = '';\n      setEditor(null);\n    };\n  }, []);\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    if (!editor) {\n      return;\n    }\n    if (value === localValue) {\n      return;\n    }\n    editor.setValue(value);\n    setLocalValue(value);\n  }, [value]);\n  const handleClick = () => {\n    ref.current.focus();\n  };\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n    class: classnames__WEBPACK_IMPORTED_MODULE_3___default()('bio-properties-panel-feelers-editor-container', popupOpen ? 'popupOpen' : null),\n    children: [popupOpen && (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n      class: \"bio-properties-panel-feelers-editor__popup-placeholder\",\n      children: \"Opened in popup\"\n    }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n      name: props.name,\n      class: classnames__WEBPACK_IMPORTED_MODULE_3___default()('bio-properties-panel-feelers-editor bio-properties-panel-input', localValue ? 'edited' : null, disabled ? 'disabled' : null),\n      ref: inputRef,\n      onClick: handleClick\n    }), !disabled && (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(OpenPopupButton, {\n      onClick: () => onOpenPopup('feelers')\n    })]\n  });\n});\nconst noop$4 = () => {};\n\n/**\n * Buffer `.focus()` calls while the editor is not initialized.\n * Set Focus inside when the editor is ready.\n */\nconst useBufferedFocus = function (editor, ref) {\n  const [buffer, setBuffer] = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useState)(undefined);\n  ref.current = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => ({\n    focus: offset => {\n      if (editor) {\n        editor.focus(offset);\n      } else {\n        if (typeof offset === 'undefined') {\n          offset = Infinity;\n        }\n        setBuffer(offset);\n      }\n    }\n  }), [editor]);\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    if (typeof buffer !== 'undefined' && editor) {\n      editor.focus(buffer);\n      setBuffer(false);\n    }\n  }, [editor, buffer]);\n};\nconst FeelEditor = (0,preact_compat__WEBPACK_IMPORTED_MODULE_7__.forwardRef)((props, ref) => {\n  const {\n    contentAttributes,\n    enableGutters,\n    value,\n    onInput,\n    onFeelToggle = noop$4,\n    onLint = noop$4,\n    onOpenPopup = noop$4,\n    placeholder,\n    popupOpen,\n    disabled,\n    tooltipContainer,\n    variables,\n    feelLanguageContext\n  } = props;\n  const inputRef = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useRef)();\n  const [editor, setEditor] = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useState)();\n  const [localValue, setLocalValue] = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useState)(value || '');\n  const {\n    builtins,\n    dialect,\n    parserDialect\n  } = feelLanguageContext || {};\n  useBufferedFocus(editor, ref);\n  const handleInput = useStaticCallback(newValue => {\n    onInput(newValue);\n    setLocalValue(newValue);\n  });\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    let editor;\n\n    /* Trigger FEEL toggle when\n     *\n     * - `backspace` is pressed\n     * - AND the cursor is at the beginning of the input\n     */\n    const onKeyDown = e => {\n      if (e.key !== 'Backspace' || !editor) {\n        return;\n      }\n      const selection = editor.getSelection();\n      const range = selection.ranges[selection.mainIndex];\n      if (range.from === 0 && range.to === 0) {\n        onFeelToggle();\n      }\n    };\n    editor = new _bpmn_io_feel_editor__WEBPACK_IMPORTED_MODULE_12__[\"default\"]({\n      container: inputRef.current,\n      onChange: handleInput,\n      onKeyDown: onKeyDown,\n      onLint: onLint,\n      placeholder: placeholder,\n      tooltipContainer: tooltipContainer,\n      value: localValue,\n      variables,\n      builtins,\n      dialect,\n      parserDialect,\n      extensions: [...(enableGutters ? [(0,_codemirror_view__WEBPACK_IMPORTED_MODULE_13__.lineNumbers)()] : []), _codemirror_view__WEBPACK_IMPORTED_MODULE_13__.EditorView.lineWrapping],\n      contentAttributes\n    });\n    setEditor(editor);\n    return () => {\n      onLint([]);\n      inputRef.current.innerHTML = '';\n      setEditor(null);\n    };\n  }, []);\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    if (!editor) {\n      return;\n    }\n    if (value === localValue) {\n      return;\n    }\n    editor.setValue(value);\n    setLocalValue(value);\n  }, [value]);\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    if (!editor) {\n      return;\n    }\n    editor.setVariables(variables);\n  }, [variables]);\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    if (!editor) {\n      return;\n    }\n    editor.setPlaceholder(placeholder);\n  }, [placeholder]);\n  const handleClick = () => {\n    ref.current.focus();\n  };\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n    class: classnames__WEBPACK_IMPORTED_MODULE_3___default()('bio-properties-panel-feel-editor-container', disabled ? 'disabled' : null, popupOpen ? 'popupOpen' : null),\n    children: [popupOpen && (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n      class: \"bio-properties-panel-feel-editor__open-popup-placeholder\",\n      children: \"Opened in editor\"\n    }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n      name: props.name,\n      class: classnames__WEBPACK_IMPORTED_MODULE_3___default()('bio-properties-panel-input', localValue ? 'edited' : null),\n      ref: inputRef,\n      onClick: handleClick\n    }), !disabled && (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(OpenPopupButton, {\n      onClick: () => onOpenPopup('feel')\n    })]\n  });\n});\nfunction FeelIndicator(props) {\n  const {\n    active\n  } = props;\n  if (!active) {\n    return null;\n  }\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"span\", {\n    class: \"bio-properties-panel-feel-indicator\",\n    children: \"=\"\n  });\n}\nconst noop$3 = () => {};\n\n/**\n * @param {Object} props\n * @param {Object} props.label\n * @param {String} props.feel\n */\nfunction FeelIcon(props) {\n  const {\n    feel = false,\n    active,\n    disabled = false,\n    onClick = noop$3\n  } = props;\n  const feelRequiredLabel = 'FEEL expression is mandatory';\n  const feelOptionalLabel = `Click to ${active ? 'remove' : 'set a'} dynamic value with FEEL expression`;\n  const handleClick = e => {\n    onClick(e);\n\n    // when pointer event was created from keyboard, keep focus on button\n    if (!e.pointerType) {\n      e.stopPropagation();\n    }\n  };\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"button\", {\n    type: \"button\",\n    class: classnames__WEBPACK_IMPORTED_MODULE_3___default()('bio-properties-panel-feel-icon', active ? 'active' : null, feel === 'required' ? 'required' : 'optional'),\n    onClick: handleClick,\n    disabled: feel === 'required' || disabled,\n    title: feel === 'required' ? feelRequiredLabel : feelOptionalLabel,\n    children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(FeelIcon$1, {})\n  });\n}\nfunction ToggleSwitch(props) {\n  const {\n    id,\n    label,\n    onInput,\n    value,\n    switcherLabel,\n    inline,\n    onFocus,\n    onBlur,\n    inputRef,\n    tooltip\n  } = props;\n  const [localValue, setLocalValue] = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useState)(value);\n  const handleInputCallback = async () => {\n    onInput(!value);\n  };\n  const handleInput = e => {\n    handleInputCallback();\n    setLocalValue(e.target.value);\n  };\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    if (value === localValue) {\n      return;\n    }\n    setLocalValue(value);\n  }, [value]);\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n    class: classnames__WEBPACK_IMPORTED_MODULE_3___default()('bio-properties-panel-toggle-switch', {\n      inline\n    }),\n    children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"label\", {\n      class: \"bio-properties-panel-label\",\n      for: prefixId$7(id),\n      children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(TooltipWrapper, {\n        value: tooltip,\n        forId: id,\n        element: props.element,\n        children: label\n      })\n    }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n      class: \"bio-properties-panel-field-wrapper\",\n      children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"label\", {\n        class: \"bio-properties-panel-toggle-switch__switcher\",\n        children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"input\", {\n          ref: inputRef,\n          id: prefixId$7(id),\n          class: \"bio-properties-panel-input\",\n          type: \"checkbox\",\n          onFocus: onFocus,\n          onBlur: onBlur,\n          name: id,\n          onInput: handleInput,\n          checked: !!localValue\n        }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"span\", {\n          class: \"bio-properties-panel-toggle-switch__slider\"\n        })]\n      }), switcherLabel && (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"p\", {\n        class: \"bio-properties-panel-toggle-switch__label\",\n        children: switcherLabel\n      })]\n    })]\n  });\n}\n\n/**\n * @param {Object} props\n * @param {Object} props.element\n * @param {String} props.id\n * @param {String} props.description\n * @param {String} props.label\n * @param {String} props.switcherLabel\n * @param {Boolean} props.inline\n * @param {Function} props.getValue\n * @param {Function} props.setValue\n * @param {Function} props.onFocus\n * @param {Function} props.onBlur\n * @param {string|import('preact').Component} props.tooltip\n */\nfunction ToggleSwitchEntry(props) {\n  const {\n    element,\n    id,\n    description,\n    label,\n    switcherLabel,\n    inline,\n    getValue,\n    setValue,\n    onFocus,\n    onBlur,\n    tooltip\n  } = props;\n  const value = getValue(element);\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n    class: \"bio-properties-panel-entry bio-properties-panel-toggle-switch-entry\",\n    \"data-entry-id\": id,\n    children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(ToggleSwitch, {\n      id: id,\n      label: label,\n      value: value,\n      onInput: setValue,\n      onFocus: onFocus,\n      onBlur: onBlur,\n      switcherLabel: switcherLabel,\n      inline: inline,\n      tooltip: tooltip,\n      element: element\n    }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(Description$1, {\n      forId: id,\n      element: element,\n      value: description\n    })]\n  });\n}\nfunction isEdited$7(node) {\n  return node && !!node.checked;\n}\n\n// helpers /////////////////\n\nfunction prefixId$7(id) {\n  return `bio-properties-panel-${id}`;\n}\nfunction NumberField(props) {\n  const {\n    debounce,\n    disabled,\n    displayLabel = true,\n    id,\n    inputRef,\n    label,\n    max,\n    min,\n    onInput,\n    step,\n    value = '',\n    onFocus,\n    onBlur,\n    tooltip\n  } = props;\n  const [localValue, setLocalValue] = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useState)(value);\n  const handleInputCallback = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => {\n    return debounce(target => {\n      if (target.validity.valid) {\n        onInput(target.value ? parseFloat(target.value) : undefined);\n      }\n    });\n  }, [onInput, debounce]);\n  const handleInput = e => {\n    handleInputCallback(e.target);\n    setLocalValue(e.target.value);\n  };\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    if (value === localValue) {\n      return;\n    }\n    setLocalValue(value);\n  }, [value]);\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n    class: \"bio-properties-panel-numberfield\",\n    children: [displayLabel && (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"label\", {\n      for: prefixId$6(id),\n      class: \"bio-properties-panel-label\",\n      children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(TooltipWrapper, {\n        value: tooltip,\n        forId: id,\n        element: props.element,\n        children: label\n      })\n    }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"input\", {\n      id: prefixId$6(id),\n      ref: inputRef,\n      type: \"number\",\n      name: id,\n      spellCheck: \"false\",\n      autoComplete: \"off\",\n      disabled: disabled,\n      class: \"bio-properties-panel-input\",\n      max: max,\n      min: min,\n      onInput: handleInput,\n      onFocus: onFocus,\n      onBlur: onBlur,\n      step: step,\n      value: localValue\n    })]\n  });\n}\n\n/**\n * @param {Object} props\n * @param {Boolean} props.debounce\n * @param {String} props.description\n * @param {Boolean} props.disabled\n * @param {Object} props.element\n * @param {Function} props.getValue\n * @param {String} props.id\n * @param {String} props.label\n * @param {String} props.max\n * @param {String} props.min\n * @param {Function} props.setValue\n * @param {Function} props.onFocus\n * @param {Function} props.onBlur\n * @param {String} props.step\n * @param {Function} props.validate\n */\nfunction NumberFieldEntry(props) {\n  const {\n    debounce,\n    description,\n    disabled,\n    element,\n    getValue,\n    id,\n    label,\n    max,\n    min,\n    setValue,\n    step,\n    onFocus,\n    onBlur,\n    validate,\n    tooltip\n  } = props;\n  const globalError = useError(id);\n  const [localError, setLocalError] = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useState)(null);\n  let value = getValue(element);\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    if ((0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isFunction)(validate)) {\n      const newValidationError = validate(value) || null;\n      setLocalError(newValidationError);\n    }\n  }, [value, validate]);\n  const onInput = newValue => {\n    let newValidationError = null;\n    if ((0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isFunction)(validate)) {\n      newValidationError = validate(newValue) || null;\n    }\n    setValue(newValue, newValidationError);\n    setLocalError(newValidationError);\n  };\n  const error = globalError || localError;\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n    class: classnames__WEBPACK_IMPORTED_MODULE_3___default()('bio-properties-panel-entry', error ? 'has-error' : ''),\n    \"data-entry-id\": id,\n    children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(NumberField, {\n      debounce: debounce,\n      disabled: disabled,\n      id: id,\n      label: label,\n      onFocus: onFocus,\n      onBlur: onBlur,\n      onInput: onInput,\n      max: max,\n      min: min,\n      step: step,\n      value: value,\n      tooltip: tooltip\n    }, element), error && (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n      class: \"bio-properties-panel-error\",\n      children: error\n    }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(Description$1, {\n      forId: id,\n      element: element,\n      value: description\n    })]\n  });\n}\nfunction isEdited$6(node) {\n  return node && !!node.value;\n}\n\n// helpers /////////////////\n\nfunction prefixId$6(id) {\n  return `bio-properties-panel-${id}`;\n}\nconst noop$2 = () => {};\n\n/**\n * @typedef {'required'|'optional'|'static'} FeelType\n */\n\n/**\n * @param {Object} props\n * @param {Boolean} props.debounce\n * @param {String} props.id\n * @param {Object} props.element\n * @param {String} props.label\n * @param {String} props.hostLanguage\n * @param {Function} props.onInput\n * @param {Function} props.onBlur\n * @param {Function} props.onError\n * @param {FeelType} [props.feel]\n * @param {String} props.value\n * @param {Boolean} [props.singleLine]\n * @param {Function} props.tooltipContainer\n * @param {Function | import('preact').Component} props.OptionalComponent\n * @param {Boolean} props.disabled\n * @param {Array} props.variables\n * @param {string} [props.placeholder]\n * @param {string | import('preact').Component} props.tooltip\n */\nfunction FeelTextfield(props) {\n  const {\n    debounce,\n    id,\n    element,\n    label,\n    hostLanguage,\n    onInput,\n    onBlur,\n    onError,\n    placeholder,\n    feel,\n    value = '',\n    disabled = false,\n    variables,\n    singleLine,\n    tooltipContainer,\n    OptionalComponent = OptionalFeelInput,\n    tooltip\n  } = props;\n  const [localValue, setLocalValue] = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useState)(value);\n  const editorRef = useShowEntryEvent(id);\n  const containerRef = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useRef)();\n  const feelActive = (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isString)(localValue) && localValue.startsWith('=') || feel === 'required';\n  const feelOnlyValue = (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isString)(localValue) && localValue.startsWith('=') ? localValue.substring(1) : localValue;\n  const feelLanguageContext = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useContext)(FeelLanguageContext);\n  const [focus, _setFocus] = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useState)(undefined);\n  const {\n    eventBus\n  } = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useContext)(EventContext);\n  const [isPopupOpen, setIsPopupOpen] = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useState)(false);\n  const setFocus = (offset = 0) => {\n    const hasFocus = containerRef.current.contains(document.activeElement);\n\n    // Keep caret position if it is already focused, otherwise focus at the end\n    const position = hasFocus ? document.activeElement.selectionStart : Infinity;\n    _setFocus(position + offset);\n  };\n\n  /**\n   * @type { import('min-dash').DebouncedFunction }\n   */\n  const handleInputCallback = useDebounce(onInput, debounce);\n  const handleInput = newValue => {\n    // we don't commit empty FEEL expressions,\n    // but instead serialize them as <undefined>\n    const newModelValue = newValue === '' || newValue === '=' ? undefined : newValue;\n    handleInputCallback(newModelValue);\n  };\n  const handleFeelToggle = useStaticCallback(() => {\n    if (feel === 'required') {\n      return;\n    }\n    if (!feelActive) {\n      setLocalValue('=' + localValue);\n      handleInput('=' + localValue);\n    } else {\n      setLocalValue(feelOnlyValue);\n      handleInput(feelOnlyValue);\n    }\n  });\n  const handleLocalInput = newValue => {\n    if (feelActive) {\n      newValue = '=' + newValue;\n    }\n    if (newValue === localValue) {\n      return;\n    }\n    setLocalValue(newValue);\n    handleInput(newValue);\n    if (!feelActive && (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isString)(newValue) && newValue.startsWith('=')) {\n      // focus is behind `=` sign that will be removed\n      setFocus(-1);\n    }\n  };\n  const handleOnBlur = e => {\n    if (e.target.type === 'checkbox') {\n      onInput(e.target.checked);\n    } else {\n      const trimmedValue = e.target.value.trim();\n      onInput(trimmedValue);\n    }\n    if (onBlur) {\n      onBlur(e);\n    }\n  };\n  const handleLint = useStaticCallback((lint = []) => {\n    const syntaxError = lint.some(report => report.type === 'Syntax Error');\n    if (syntaxError) {\n      onError('Unparsable FEEL expression.');\n    } else {\n      onError(undefined);\n    }\n  });\n  const handleOpenPopup = (type = 'feel') => {\n    const isOpen = eventBus.fire('propertiesPanel.openPopup', {\n      element,\n      entryId: id,\n      hostLanguage,\n      label,\n      onInput: handleLocalInput,\n      singleLine,\n      sourceElement: editorRef.current,\n      tooltipContainer,\n      type,\n      value: feelOnlyValue,\n      variables,\n      feelLanguageContext\n    });\n    if (isOpen) {\n      eventBus.once('propertiesPanelPopup.close', () => {\n        setIsPopupOpen(false);\n      });\n    }\n    setIsPopupOpen(isOpen === true);\n  };\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    if (typeof focus !== 'undefined') {\n      editorRef.current.focus(focus);\n      _setFocus(undefined);\n    }\n  }, [focus]);\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    if (value === localValue) {\n      return;\n    }\n\n    // External value change removed content => keep FEEL configuration\n    if (!value) {\n      setLocalValue(feelActive ? '=' : '');\n      return;\n    }\n    setLocalValue(value);\n  }, [value]);\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    return () => {\n      eventBus.fire('propertiesPanel.closePopup');\n    };\n  }, []);\n\n  // copy-paste integration\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    const copyHandler = event => {\n      if (!feelActive) {\n        return;\n      }\n      event.clipboardData.setData('application/FEEL', event.clipboardData.getData('text'));\n    };\n    const pasteHandler = event => {\n      if (feelActive || isPopupOpen) {\n        return;\n      }\n      const data = event.clipboardData.getData('application/FEEL');\n      if (data) {\n        setTimeout(() => {\n          handleFeelToggle();\n          setFocus();\n        });\n      }\n    };\n    containerRef.current.addEventListener('copy', copyHandler);\n    containerRef.current.addEventListener('cut', copyHandler);\n    containerRef.current.addEventListener('paste', pasteHandler);\n    return () => {\n      containerRef.current.removeEventListener('copy', copyHandler);\n      containerRef.current.removeEventListener('cut', copyHandler);\n      containerRef.current.removeEventListener('paste', pasteHandler);\n    };\n  }, [containerRef, feelActive, handleFeelToggle, setFocus]);\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n    class: classnames__WEBPACK_IMPORTED_MODULE_3___default()('bio-properties-panel-feel-entry', {\n      'feel-active': feelActive\n    }),\n    children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"label\", {\n      for: prefixId$5(id),\n      class: \"bio-properties-panel-label\",\n      onClick: () => setFocus(),\n      children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(TooltipWrapper, {\n        value: tooltip,\n        forId: id,\n        element: props.element,\n        children: label\n      }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(FeelIcon, {\n        label: label,\n        feel: feel,\n        onClick: handleFeelToggle,\n        active: feelActive\n      })]\n    }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n      class: \"bio-properties-panel-feel-container\",\n      ref: containerRef,\n      children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(FeelIndicator, {\n        active: feelActive,\n        disabled: feel !== 'optional' || disabled,\n        onClick: handleFeelToggle\n      }), feelActive ? (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(FeelEditor, {\n        name: id,\n        onInput: handleLocalInput,\n        contentAttributes: {\n          'id': prefixId$5(id),\n          'aria-label': label\n        },\n        disabled: disabled,\n        popupOpen: isPopupOpen,\n        onFeelToggle: () => {\n          handleFeelToggle();\n          setFocus(true);\n        },\n        onLint: handleLint,\n        onOpenPopup: handleOpenPopup,\n        placeholder: placeholder,\n        value: feelOnlyValue,\n        variables: variables,\n        feelLanguageContext: feelLanguageContext,\n        ref: editorRef,\n        tooltipContainer: tooltipContainer\n      }) : (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(OptionalComponent, {\n        ...props,\n        popupOpen: isPopupOpen,\n        onInput: handleLocalInput,\n        onBlur: handleOnBlur,\n        contentAttributes: {\n          'id': prefixId$5(id),\n          'aria-label': label\n        },\n        value: localValue,\n        ref: editorRef,\n        onOpenPopup: handleOpenPopup,\n        containerRef: containerRef\n      })]\n    })]\n  });\n}\nconst OptionalFeelInput = (0,preact_compat__WEBPACK_IMPORTED_MODULE_7__.forwardRef)((props, ref) => {\n  const {\n    id,\n    disabled,\n    onInput,\n    value,\n    onFocus,\n    onBlur,\n    placeholder\n  } = props;\n  const inputRef = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useRef)();\n\n  // To be consistent with the FEEL editor, set focus at start of input\n  // this ensures clean editing experience when switching with the keyboard\n  ref.current = {\n    focus: position => {\n      const input = inputRef.current;\n      if (!input) {\n        return;\n      }\n      input.focus();\n      if (typeof position === 'number') {\n        if (position > value.length) {\n          position = value.length;\n        }\n        input.setSelectionRange(position, position);\n      }\n    }\n  };\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"input\", {\n    id: prefixId$5(id),\n    type: \"text\",\n    ref: inputRef,\n    name: id,\n    spellCheck: \"false\",\n    autoComplete: \"off\",\n    disabled: disabled,\n    class: \"bio-properties-panel-input\",\n    onInput: e => onInput(e.target.value),\n    onFocus: onFocus,\n    onBlur: onBlur,\n    placeholder: placeholder,\n    value: value || ''\n  });\n});\nconst OptionalFeelNumberField = (0,preact_compat__WEBPACK_IMPORTED_MODULE_7__.forwardRef)((props, ref) => {\n  const {\n    id,\n    debounce,\n    disabled,\n    onInput,\n    value,\n    min,\n    max,\n    step,\n    onFocus,\n    onBlur\n  } = props;\n  const inputRef = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useRef)();\n\n  // To be consistent with the FEEL editor, set focus at start of input\n  // this ensures clean editing experience when switching with the keyboard\n  ref.current = {\n    focus: position => {\n      const input = inputRef.current;\n      if (!input) {\n        return;\n      }\n      input.focus();\n      if (typeof position === 'number' && position !== Infinity) {\n        if (position > value.length) {\n          position = value.length;\n        }\n        input.setSelectionRange(position, position);\n      }\n    }\n  };\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(NumberField, {\n    id: id,\n    debounce: debounce,\n    disabled: disabled,\n    displayLabel: false,\n    inputRef: inputRef,\n    max: max,\n    min: min,\n    onInput: onInput,\n    step: step,\n    value: value,\n    onFocus: onFocus,\n    onBlur: onBlur\n  });\n});\n(0,preact_compat__WEBPACK_IMPORTED_MODULE_7__.forwardRef)((props, ref) => {\n  const {\n    id,\n    disabled,\n    onInput,\n    value,\n    onFocus,\n    onBlur,\n    placeholder\n  } = props;\n  const inputRef = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useRef)();\n\n  // To be consistent with the FEEL editor, set focus at start of input\n  // this ensures clean editing experience when switching with the keyboard\n  ref.current = {\n    focus: () => {\n      const input = inputRef.current;\n      if (!input) {\n        return;\n      }\n      input.focus();\n      input.setSelectionRange(0, 0);\n    }\n  };\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"textarea\", {\n    id: prefixId$5(id),\n    type: \"text\",\n    ref: inputRef,\n    name: id,\n    spellCheck: \"false\",\n    autoComplete: \"off\",\n    disabled: disabled,\n    class: \"bio-properties-panel-input\",\n    onInput: e => onInput(e.target.value),\n    onFocus: onFocus,\n    onBlur: onBlur,\n    placeholder: placeholder,\n    value: value || '',\n    \"data-gramm\": \"false\"\n  });\n});\nconst OptionalFeelToggleSwitch = (0,preact_compat__WEBPACK_IMPORTED_MODULE_7__.forwardRef)((props, ref) => {\n  const {\n    id,\n    onInput,\n    value,\n    onFocus,\n    onBlur,\n    switcherLabel\n  } = props;\n  const inputRef = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useRef)();\n\n  // To be consistent with the FEEL editor, set focus at start of input\n  // this ensures clean editing experience when switching with the keyboard\n  ref.current = {\n    focus: () => {\n      const input = inputRef.current;\n      if (!input) {\n        return;\n      }\n      input.focus();\n    }\n  };\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(ToggleSwitch, {\n    id: id,\n    value: value,\n    inputRef: inputRef,\n    onInput: onInput,\n    onFocus: onFocus,\n    onBlur: onBlur,\n    switcherLabel: switcherLabel\n  });\n});\n(0,preact_compat__WEBPACK_IMPORTED_MODULE_7__.forwardRef)((props, ref) => {\n  const {\n    id,\n    disabled,\n    onInput,\n    value,\n    onFocus,\n    onBlur\n  } = props;\n  const inputRef = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useRef)();\n  const handleChange = ({\n    target\n  }) => {\n    onInput(target.checked);\n  };\n\n  // To be consistent with the FEEL editor, set focus at start of input\n  // this ensures clean editing experience when switching with the keyboard\n  ref.current = {\n    focus: () => {\n      const input = inputRef.current;\n      if (!input) {\n        return;\n      }\n      input.focus();\n    }\n  };\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"input\", {\n    ref: inputRef,\n    id: prefixId$5(id),\n    name: id,\n    onFocus: onFocus,\n    onBlur: onBlur,\n    type: \"checkbox\",\n    class: \"bio-properties-panel-input\",\n    onChange: handleChange,\n    checked: value,\n    disabled: disabled\n  });\n});\n\n/**\n * @param {Object} props\n * @param {Object} props.element\n * @param {String} props.id\n * @param {String} props.description\n * @param {Boolean} props.debounce\n * @param {Boolean} props.disabled\n * @param {FeelType} [props.feel]\n * @param {String} props.label\n * @param {Function} props.getValue\n * @param {Function} props.setValue\n * @param {Function} props.tooltipContainer\n * @param {Function} props.validate\n * @param {Function} props.show\n * @param {Function} props.example\n * @param {Array} props.variables\n * @param {Function} props.onFocus\n * @param {Function} props.onBlur\n * @param {string} [props.placeholder]\n * @param {string|import('preact').Component} props.tooltip\n */\nfunction FeelEntry(props) {\n  const {\n    element,\n    id,\n    description,\n    debounce,\n    disabled,\n    feel,\n    label,\n    getValue,\n    setValue,\n    tooltipContainer,\n    hostLanguage,\n    singleLine,\n    validate,\n    show = noop$2,\n    example,\n    variables,\n    onFocus,\n    onBlur,\n    placeholder,\n    tooltip\n  } = props;\n  const [validationError, setValidationError] = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useState)(null);\n  const [localError, setLocalError] = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useState)(null);\n  let value = getValue(element);\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    if ((0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isFunction)(validate)) {\n      const newValidationError = validate(value) || null;\n      setValidationError(newValidationError);\n    }\n  }, [value, validate]);\n  const onInput = useStaticCallback(newValue => {\n    const value = getValue(element);\n    let newValidationError = null;\n    if ((0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isFunction)(validate)) {\n      newValidationError = validate(newValue) || null;\n    }\n\n    // don't create multiple commandStack entries for the same value\n    if (newValue !== value) {\n      setValue(newValue, newValidationError);\n    }\n    setValidationError(newValidationError);\n  });\n  const onError = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useCallback)(err => {\n    setLocalError(err);\n  }, []);\n  const temporaryError = useError(id);\n  const error = temporaryError || localError || validationError;\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n    class: classnames__WEBPACK_IMPORTED_MODULE_3___default()(props.class, 'bio-properties-panel-entry', error ? 'has-error' : ''),\n    \"data-entry-id\": id,\n    children: [(0,preact__WEBPACK_IMPORTED_MODULE_6__.createElement)(FeelTextfield, {\n      ...props,\n      debounce: debounce,\n      disabled: disabled,\n      feel: feel,\n      id: id,\n      key: element,\n      label: label,\n      onInput: onInput,\n      onError: onError,\n      onFocus: onFocus,\n      onBlur: onBlur,\n      placeholder: placeholder,\n      example: example,\n      hostLanguage: hostLanguage,\n      singleLine: singleLine,\n      show: show,\n      value: value,\n      variables: variables,\n      tooltipContainer: tooltipContainer,\n      OptionalComponent: props.OptionalComponent,\n      tooltip: tooltip\n    }), error && (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n      class: \"bio-properties-panel-error\",\n      children: error\n    }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(Description$1, {\n      forId: id,\n      element: element,\n      value: description\n    })]\n  });\n}\n\n/**\n * @param {Object} props\n * @param {Object} props.element\n * @param {String} props.id\n * @param {String} props.description\n * @param {Boolean} props.debounce\n * @param {Boolean} props.disabled\n * @param {String} props.max\n * @param {String} props.min\n * @param {String} props.step\n * @param {FeelType} [props.feel]\n * @param {String} props.label\n * @param {Function} props.getValue\n * @param {Function} props.setValue\n * @param {Function} props.tooltipContainer\n * @param {Function} props.validate\n * @param {Function} props.show\n * @param {Function} props.example\n * @param {Array} props.variables\n * @param {Function} props.onFocus\n * @param {Function} props.onBlur\n */\nfunction FeelNumberEntry(props) {\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(FeelEntry, {\n    class: \"bio-properties-panel-feel-number\",\n    OptionalComponent: OptionalFeelNumberField,\n    ...props\n  });\n}\n\n/**\n * @param {Object} props\n * @param {Object} props.element\n * @param {String} props.id\n * @param {String} props.description\n * @param {Boolean} props.debounce\n * @param {Boolean} props.disabled\n * @param {FeelType} [props.feel]\n * @param {String} props.label\n * @param {Function} props.getValue\n * @param {Function} props.setValue\n * @param {Function} props.tooltipContainer\n * @param {Function} props.validate\n * @param {Function} props.show\n * @param {Function} props.example\n * @param {Array} props.variables\n * @param {Function} props.onFocus\n * @param {Function} props.onBlur\n */\nfunction FeelToggleSwitchEntry(props) {\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(FeelEntry, {\n    class: \"bio-properties-panel-feel-toggle-switch\",\n    OptionalComponent: OptionalFeelToggleSwitch,\n    ...props\n  });\n}\n\n/**\n * @param {Object} props\n * @param {Object} props.element\n * @param {String} props.id\n * @param {String} props.description\n * @param {String} props.hostLanguage\n * @param {Boolean} props.singleLine\n * @param {Boolean} props.debounce\n * @param {Boolean} props.disabled\n * @param {FeelType} [props.feel]\n * @param {String} props.label\n * @param {Function} props.getValue\n * @param {Function} props.setValue\n * @param {Function} props.tooltipContainer\n * @param {Function} props.validate\n * @param {Function} props.show\n * @param {Function} props.example\n * @param {Array} props.variables\n * @param {Function} props.onFocus\n * @param {Function} props.onBlur\n */\nfunction FeelTemplatingEntry(props) {\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(FeelEntry, {\n    class: \"bio-properties-panel-feel-templating\",\n    OptionalComponent: TemplatingEditor,\n    ...props\n  });\n}\nfunction isEdited$5(node) {\n  if (!node) {\n    return false;\n  }\n  if (node.type === 'checkbox') {\n    return !!node.checked || node.classList.contains('edited');\n  }\n  return !!node.value || node.classList.contains('edited');\n}\n\n// helpers /////////////////\n\nfunction prefixId$5(id) {\n  return `bio-properties-panel-${id}`;\n}\nfunction Select(props) {\n  const {\n    id,\n    label,\n    onChange,\n    options = [],\n    value = '',\n    disabled,\n    onFocus,\n    onBlur,\n    tooltip\n  } = props;\n  const ref = useShowEntryEvent(id);\n  const [localValue, setLocalValue] = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useState)(value);\n  const handleChangeCallback = ({\n    target\n  }) => {\n    onChange(target.value);\n  };\n  const handleChange = e => {\n    handleChangeCallback(e);\n    setLocalValue(e.target.value);\n  };\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    if (value === localValue) {\n      return;\n    }\n    setLocalValue(value);\n  }, [value]);\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n    class: \"bio-properties-panel-select\",\n    children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"label\", {\n      for: prefixId$4(id),\n      class: \"bio-properties-panel-label\",\n      children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(TooltipWrapper, {\n        value: tooltip,\n        forId: id,\n        element: props.element,\n        children: label\n      })\n    }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"select\", {\n      ref: ref,\n      id: prefixId$4(id),\n      name: id,\n      class: \"bio-properties-panel-input\",\n      onInput: handleChange,\n      onFocus: onFocus,\n      onBlur: onBlur,\n      value: localValue,\n      disabled: disabled,\n      children: options.map((option, idx) => {\n        if (option.children) {\n          return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"optgroup\", {\n            label: option.label,\n            children: option.children.map((child, idx) => (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"option\", {\n              value: child.value,\n              disabled: child.disabled,\n              children: child.label\n            }, idx))\n          }, idx);\n        }\n        return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"option\", {\n          value: option.value,\n          disabled: option.disabled,\n          children: option.label\n        }, idx);\n      })\n    })]\n  });\n}\n\n/**\n * @param {object} props\n * @param {object} props.element\n * @param {string} props.id\n * @param {string} [props.description]\n * @param {string} props.label\n * @param {Function} props.getValue\n * @param {Function} props.setValue\n * @param {Function} props.onFocus\n * @param {Function} props.onBlur\n * @param {Function} props.getOptions\n * @param {boolean} [props.disabled]\n * @param {Function} [props.validate]\n * @param {string|import('preact').Component} props.tooltip\n */\nfunction SelectEntry(props) {\n  const {\n    element,\n    id,\n    description,\n    label,\n    getValue,\n    setValue,\n    getOptions,\n    disabled,\n    onFocus,\n    onBlur,\n    validate,\n    tooltip\n  } = props;\n  const options = getOptions(element);\n  const globalError = useError(id);\n  const [localError, setLocalError] = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useState)(null);\n  let value = getValue(element);\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    if ((0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isFunction)(validate)) {\n      const newValidationError = validate(value) || null;\n      setLocalError(newValidationError);\n    }\n  }, [value, validate]);\n  const onChange = newValue => {\n    let newValidationError = null;\n    if ((0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isFunction)(validate)) {\n      newValidationError = validate(newValue) || null;\n    }\n    setValue(newValue, newValidationError);\n    setLocalError(newValidationError);\n  };\n  const error = globalError || localError;\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n    class: classnames__WEBPACK_IMPORTED_MODULE_3___default()('bio-properties-panel-entry', error ? 'has-error' : ''),\n    \"data-entry-id\": id,\n    children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(Select, {\n      id: id,\n      label: label,\n      value: value,\n      onChange: onChange,\n      onFocus: onFocus,\n      onBlur: onBlur,\n      options: options,\n      disabled: disabled,\n      tooltip: tooltip,\n      element: element\n    }, element), error && (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n      class: \"bio-properties-panel-error\",\n      children: error\n    }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(Description$1, {\n      forId: id,\n      element: element,\n      value: description\n    })]\n  });\n}\nfunction isEdited$3(node) {\n  return node && !!node.value;\n}\n\n// helpers /////////////////\n\nfunction prefixId$4(id) {\n  return `bio-properties-panel-${id}`;\n}\nfunction resizeToContents(element) {\n  element.style.height = 'auto';\n\n  // a 2px pixel offset is required to prevent scrollbar from\n  // appearing on OS with a full length scroll bar (Windows/Linux)\n  element.style.height = `${element.scrollHeight + 2}px`;\n}\nfunction TextArea(props) {\n  const {\n    id,\n    label,\n    debounce,\n    onInput,\n    value = '',\n    disabled,\n    monospace,\n    onFocus,\n    onBlur,\n    autoResize = true,\n    placeholder,\n    rows = autoResize ? 1 : 2,\n    tooltip\n  } = props;\n  const [localValue, setLocalValue] = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useState)(value);\n  const ref = useShowEntryEvent(id);\n  const visible = useElementVisible(ref.current);\n\n  /**\n   * @type { import('min-dash').DebouncedFunction }\n   */\n  const handleInputCallback = useDebounce(onInput, debounce);\n  const handleInput = newValue => {\n    const newModelValue = newValue === '' ? undefined : newValue;\n    handleInputCallback(newModelValue);\n  };\n  const handleLocalInput = e => {\n    autoResize && resizeToContents(e.target);\n    if (e.target.value === localValue) {\n      return;\n    }\n    setLocalValue(e.target.value);\n    handleInput(e.target.value);\n  };\n  const handleOnBlur = e => {\n    const trimmedValue = e.target.value.trim();\n\n    // trim and commit on blur\n    onInput(trimmedValue);\n    if (onBlur) {\n      onBlur(e);\n    }\n  };\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useLayoutEffect)(() => {\n    autoResize && resizeToContents(ref.current);\n  }, []);\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useLayoutEffect)(() => {\n    visible && autoResize && resizeToContents(ref.current);\n  }, [visible]);\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    if (value === localValue) {\n      return;\n    }\n    setLocalValue(value);\n  }, [value]);\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n    class: \"bio-properties-panel-textarea\",\n    children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"label\", {\n      for: prefixId$2(id),\n      class: \"bio-properties-panel-label\",\n      children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(TooltipWrapper, {\n        value: tooltip,\n        forId: id,\n        element: props.element,\n        children: label\n      })\n    }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"textarea\", {\n      ref: ref,\n      id: prefixId$2(id),\n      name: id,\n      spellCheck: \"false\",\n      class: classnames__WEBPACK_IMPORTED_MODULE_3___default()('bio-properties-panel-input', monospace ? 'bio-properties-panel-input-monospace' : '', autoResize ? 'auto-resize' : ''),\n      onInput: handleLocalInput,\n      onFocus: onFocus,\n      onBlur: handleOnBlur,\n      placeholder: placeholder,\n      rows: rows,\n      value: localValue,\n      disabled: disabled,\n      \"data-gramm\": \"false\"\n    })]\n  });\n}\n\n/**\n * @param {object} props\n * @param {object} props.element\n * @param {string} props.id\n * @param {string} props.description\n * @param {boolean} props.debounce\n * @param {string} props.label\n * @param {Function} props.getValue\n * @param {Function} props.setValue\n * @param {Function} props.onFocus\n * @param {Function} props.onBlur\n * @param {number} props.rows\n * @param {boolean} props.monospace\n * @param {Function} [props.validate]\n * @param {boolean} [props.disabled]\n */\nfunction TextAreaEntry(props) {\n  const {\n    element,\n    id,\n    description,\n    debounce,\n    label,\n    getValue,\n    setValue,\n    rows,\n    monospace,\n    disabled,\n    validate,\n    onFocus,\n    onBlur,\n    placeholder,\n    autoResize,\n    tooltip\n  } = props;\n  const globalError = useError(id);\n  const [localError, setLocalError] = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useState)(null);\n  let value = getValue(element);\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    if ((0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isFunction)(validate)) {\n      const newValidationError = validate(value) || null;\n      setLocalError(newValidationError);\n    }\n  }, [value, validate]);\n  const onInput = useStaticCallback(newValue => {\n    const value = getValue(element);\n    let newValidationError = null;\n    if ((0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isFunction)(validate)) {\n      newValidationError = validate(newValue) || null;\n    }\n    if (newValue !== value) {\n      setValue(newValue, newValidationError);\n    }\n    setLocalError(newValidationError);\n  });\n  const error = globalError || localError;\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n    class: classnames__WEBPACK_IMPORTED_MODULE_3___default()('bio-properties-panel-entry', error ? 'has-error' : ''),\n    \"data-entry-id\": id,\n    children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(TextArea, {\n      id: id,\n      label: label,\n      value: value,\n      onInput: onInput,\n      onFocus: onFocus,\n      onBlur: onBlur,\n      rows: rows,\n      debounce: debounce,\n      monospace: monospace,\n      disabled: disabled,\n      placeholder: placeholder,\n      autoResize: autoResize,\n      tooltip: tooltip,\n      element: element\n    }, element), error && (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n      class: \"bio-properties-panel-error\",\n      children: error\n    }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(Description$1, {\n      forId: id,\n      element: element,\n      value: description\n    })]\n  });\n}\nfunction isEdited$1(node) {\n  return node && !!node.value;\n}\n\n// helpers /////////////////\n\nfunction prefixId$2(id) {\n  return `bio-properties-panel-${id}`;\n}\nfunction Textfield(props) {\n  const {\n    debounce,\n    disabled = false,\n    id,\n    label,\n    onInput,\n    onFocus,\n    onBlur,\n    placeholder,\n    value = '',\n    tooltip\n  } = props;\n  const [localValue, setLocalValue] = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useState)(value || '');\n  const ref = useShowEntryEvent(id);\n\n  /**\n   * @type { import('min-dash').DebouncedFunction }\n   */\n  const handleInputCallback = useDebounce(onInput, debounce);\n  const handleOnBlur = e => {\n    const trimmedValue = e.target.value.trim();\n\n    // trim and commit on blur\n    onInput(trimmedValue);\n    if (onBlur) {\n      onBlur(e);\n    }\n  };\n  const handleInput = newValue => {\n    const newModelValue = newValue === '' ? undefined : newValue;\n    handleInputCallback(newModelValue);\n  };\n  const handleLocalInput = e => {\n    if (e.target.value === localValue) {\n      return;\n    }\n    setLocalValue(e.target.value);\n    handleInput(e.target.value);\n  };\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    if (value === localValue) {\n      return;\n    }\n    setLocalValue(value);\n  }, [value]);\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n    class: \"bio-properties-panel-textfield\",\n    children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"label\", {\n      for: prefixId$1(id),\n      class: \"bio-properties-panel-label\",\n      children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(TooltipWrapper, {\n        value: tooltip,\n        forId: id,\n        element: props.element,\n        children: label\n      })\n    }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"input\", {\n      ref: ref,\n      id: prefixId$1(id),\n      type: \"text\",\n      name: id,\n      spellCheck: \"false\",\n      autoComplete: \"off\",\n      disabled: disabled,\n      class: \"bio-properties-panel-input\",\n      onInput: handleLocalInput,\n      onFocus: onFocus,\n      onBlur: handleOnBlur,\n      placeholder: placeholder,\n      value: localValue\n    })]\n  });\n}\n\n/**\n * @param {Object} props\n * @param {Object} props.element\n * @param {String} props.id\n * @param {String} props.description\n * @param {Boolean} props.debounce\n * @param {Boolean} props.disabled\n * @param {String} props.label\n * @param {Function} props.getValue\n * @param {Function} props.setValue\n * @param {Function} props.onFocus\n * @param {Function} props.onBlur\n * @param {string|import('preact').Component} props.tooltip\n * @param {Function} props.validate\n */\nfunction TextfieldEntry(props) {\n  const {\n    element,\n    id,\n    description,\n    debounce,\n    disabled,\n    label,\n    getValue,\n    setValue,\n    validate,\n    onFocus,\n    onBlur,\n    placeholder,\n    tooltip\n  } = props;\n  const globalError = useError(id);\n  const [localError, setLocalError] = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useState)(null);\n  let value = getValue(element);\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    if ((0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isFunction)(validate)) {\n      const newValidationError = validate(value) || null;\n      setLocalError(newValidationError);\n    }\n  }, [value, validate]);\n  const onInput = useStaticCallback(newValue => {\n    const value = getValue(element);\n    let newValidationError = null;\n    if ((0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isFunction)(validate)) {\n      newValidationError = validate(newValue) || null;\n    }\n    if (newValue !== value) {\n      setValue(newValue, newValidationError);\n    }\n    setLocalError(newValidationError);\n  });\n  const error = globalError || localError;\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n    class: classnames__WEBPACK_IMPORTED_MODULE_3___default()('bio-properties-panel-entry', error ? 'has-error' : ''),\n    \"data-entry-id\": id,\n    children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(Textfield, {\n      debounce: debounce,\n      disabled: disabled,\n      id: id,\n      label: label,\n      onInput: onInput,\n      onFocus: onFocus,\n      onBlur: onBlur,\n      placeholder: placeholder,\n      value: value,\n      tooltip: tooltip,\n      element: element\n    }, element), error && (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n      class: \"bio-properties-panel-error\",\n      children: error\n    }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(Description$1, {\n      forId: id,\n      element: element,\n      value: description\n    })]\n  });\n}\nfunction isEdited(node) {\n  return node && !!node.value;\n}\n\n// helpers /////////////////\n\nfunction prefixId$1(id) {\n  return `bio-properties-panel-${id}`;\n}\n\n/**\n * Add a dragger that calls back the passed function with\n * { event, delta } on drag.\n *\n * @example\n *\n * function dragMove(event, delta) {\n *   // we are dragging (!!)\n * }\n *\n * domElement.addEventListener('dragstart', dragger(dragMove));\n *\n * @param {Function} fn\n * @param {Element} [dragPreview]\n *\n * @return {Function} drag start callback function\n */\nfunction createDragger(fn, dragPreview) {\n  let self;\n  let startX, startY;\n\n  /** drag start */\n  function onDragStart(event) {\n    self = this;\n    startX = event.clientX;\n    startY = event.clientY;\n\n    // (1) prevent preview image\n    if (event.dataTransfer) {\n      event.dataTransfer.setDragImage(dragPreview || emptyCanvas(), 0, 0);\n    }\n\n    // (2) setup drag listeners\n\n    // attach drag + cleanup event\n    // we need to do this to make sure we track cursor\n    // movements before we reach other drag event handlers,\n    // e.g. in child containers.\n    document.addEventListener('dragover', onDrag, true);\n    document.addEventListener('dragenter', preventDefault, true);\n    document.addEventListener('dragend', onEnd);\n    document.addEventListener('drop', preventDefault);\n  }\n  function onDrag(event) {\n    const delta = {\n      x: event.clientX - startX,\n      y: event.clientY - startY\n    };\n\n    // call provided fn with event, delta\n    return fn.call(self, event, delta);\n  }\n  function onEnd() {\n    document.removeEventListener('dragover', onDrag, true);\n    document.removeEventListener('dragenter', preventDefault, true);\n    document.removeEventListener('dragend', onEnd);\n    document.removeEventListener('drop', preventDefault);\n  }\n  return onDragStart;\n}\nfunction preventDefault(event) {\n  event.preventDefault();\n  event.stopPropagation();\n}\nfunction emptyCanvas() {\n  return (0,min_dom__WEBPACK_IMPORTED_MODULE_9__.domify)('<canvas width=\"0\" height=\"0\" />');\n}\nconst noop = () => {};\n\n/**\n * A generic popup component.\n *\n * @param {Object} props\n * @param {string} [props.className]\n * @param {boolean} [props.delayInitialFocus]\n * @param {{top: number, left: number}} [props.position]\n * @param {number} [props.width]\n * @param {number} [props.height]\n * @param {Function} props.onClose\n * @param {Function} [props.onPostActivate]\n * @param {Function} [props.onPostDeactivate]\n * @param {boolean} [props.returnFocus]\n * @param {boolean} [props.closeOnEscape]\n * @param {string} props.title\n * @param {Ref} [ref]\n */\nfunction PopupComponent(props, globalRef) {\n  const {\n    className,\n    delayInitialFocus,\n    position,\n    width,\n    height,\n    onClose,\n    onPostActivate = noop,\n    onPostDeactivate = noop,\n    returnFocus = true,\n    closeOnEscape = true,\n    title\n  } = props;\n  const focusTrapRef = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useRef)(null);\n  const localRef = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useRef)(null);\n  const popupRef = globalRef || localRef;\n  const handleKeydown = event => {\n    // do not allow keyboard events to bubble\n    event.stopPropagation();\n    if (closeOnEscape && event.key === 'Escape') {\n      onClose();\n    }\n  };\n\n  // re-activate focus trap on focus\n  const handleFocus = () => {\n    if (focusTrapRef.current) {\n      focusTrapRef.current.activate();\n    }\n  };\n  let style = {};\n  if (position) {\n    style = {\n      ...style,\n      top: position.top + 'px',\n      left: position.left + 'px'\n    };\n  }\n  if (width) {\n    style.width = width + 'px';\n  }\n  if (height) {\n    style.height = height + 'px';\n  }\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    if (popupRef.current) {\n      popupRef.current.addEventListener('focusin', handleFocus);\n    }\n    return () => {\n      if (popupRef.current) {\n        popupRef.current.removeEventListener('focusin', handleFocus);\n      }\n    };\n  }, [popupRef]);\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    if (popupRef.current) {\n      focusTrapRef.current = focus_trap__WEBPACK_IMPORTED_MODULE_14__.createFocusTrap(popupRef.current, {\n        clickOutsideDeactivates: true,\n        delayInitialFocus,\n        fallbackFocus: popupRef.current,\n        onPostActivate,\n        onPostDeactivate,\n        returnFocusOnDeactivate: returnFocus\n      });\n      focusTrapRef.current.activate();\n    }\n    return () => focusTrapRef.current && focusTrapRef.current.deactivate();\n  }, [popupRef]);\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n    \"aria-label\": title,\n    tabIndex: -1,\n    ref: popupRef,\n    onKeyDown: handleKeydown,\n    role: \"dialog\",\n    class: classnames__WEBPACK_IMPORTED_MODULE_3___default()('bio-properties-panel-popup', className),\n    style: style,\n    children: props.children\n  });\n}\nconst Popup = (0,preact_compat__WEBPACK_IMPORTED_MODULE_7__.forwardRef)(PopupComponent);\nPopup.Title = Title;\nPopup.Body = Body;\nPopup.Footer = Footer;\nfunction Title(props) {\n  const {\n    children,\n    className,\n    draggable,\n    eventBus,\n    title,\n    showCloseButton = false,\n    closeButtonTooltip = 'Close popup',\n    onClose,\n    ...rest\n  } = props;\n\n  // we can't use state as we need to\n  // manipulate this inside dragging events\n  const context = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useRef)({\n    startPosition: null,\n    newPosition: null\n  });\n  const dragPreviewRef = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useRef)();\n  const titleRef = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useRef)();\n  const onMove = (event, delta) => {\n    cancel(event);\n    const {\n      x: dx,\n      y: dy\n    } = delta;\n    const newPosition = {\n      x: context.current.startPosition.x + dx,\n      y: context.current.startPosition.y + dy\n    };\n    const popupParent = getPopupParent(titleRef.current);\n    popupParent.style.top = newPosition.y + 'px';\n    popupParent.style.left = newPosition.x + 'px';\n    eventBus?.fire('feelPopup.dragover', {\n      newPosition,\n      delta\n    });\n  };\n  const onMoveStart = event => {\n    // initialize drag handler\n    const onDragStart = createDragger(onMove, dragPreviewRef.current);\n    onDragStart(event);\n    event.stopPropagation();\n    const popupParent = getPopupParent(titleRef.current);\n    const bounds = popupParent.getBoundingClientRect();\n    context.current.startPosition = {\n      x: bounds.left,\n      y: bounds.top\n    };\n    eventBus?.fire('feelPopup.dragstart');\n  };\n  const onMoveEnd = () => {\n    context.current.newPosition = null;\n    eventBus?.fire('feelPopup.dragend');\n  };\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n    class: classnames__WEBPACK_IMPORTED_MODULE_3___default()('bio-properties-panel-popup__header', draggable && 'draggable', className),\n    ref: titleRef,\n    draggable: draggable,\n    onDragStart: onMoveStart,\n    onDragEnd: onMoveEnd,\n    ...rest,\n    children: [draggable && (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.Fragment, {\n      children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n        ref: dragPreviewRef,\n        class: \"bio-properties-panel-popup__drag-preview\"\n      }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n        class: \"bio-properties-panel-popup__drag-handle\",\n        children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(DragIcon, {})\n      })]\n    }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n      class: \"bio-properties-panel-popup__title\",\n      children: title\n    }), children, showCloseButton && (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"button\", {\n      title: closeButtonTooltip,\n      class: \"bio-properties-panel-popup__close\",\n      onClick: onClose,\n      children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(CloseIcon, {})\n    })]\n  });\n}\nfunction Body(props) {\n  const {\n    children,\n    className,\n    ...rest\n  } = props;\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n    class: classnames__WEBPACK_IMPORTED_MODULE_3___default()('bio-properties-panel-popup__body', className),\n    ...rest,\n    children: children\n  });\n}\nfunction Footer(props) {\n  const {\n    children,\n    className,\n    ...rest\n  } = props;\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n    class: classnames__WEBPACK_IMPORTED_MODULE_3___default()('bio-properties-panel-popup__footer', className),\n    ...rest,\n    children: props.children\n  });\n}\n\n// helpers //////////////////////\n\nfunction getPopupParent(node) {\n  return node.closest('.bio-properties-panel-popup');\n}\nfunction cancel(event) {\n  event.preventDefault();\n  event.stopPropagation();\n}\nconst FEEL_POPUP_WIDTH = 700;\nconst FEEL_POPUP_HEIGHT = 250;\n\n/**\n * FEEL expression editor popup component\n * @param {FeelPopupProps} props\n */\nfunction FeelPopup$1(props) {\n  const {\n    entryId,\n    onInput,\n    onClose,\n    title,\n    type,\n    value,\n    links,\n    variables,\n    position,\n    hostLanguage,\n    singleLine,\n    sourceElement,\n    tooltipContainer,\n    eventBus,\n    feelLanguageContext\n  } = props;\n  const editorRef = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useRef)();\n  const popupRef = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useRef)();\n  const isAutoCompletionOpen = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useRef)(false);\n  const handleSetReturnFocus = () => {\n    sourceElement && sourceElement.focus();\n  };\n  const onKeyDownCapture = event => {\n    // we use capture here to make sure we handle the event before the editor does\n    if (event.key === 'Escape') {\n      isAutoCompletionOpen.current = autoCompletionOpen(event.target);\n    }\n  };\n  const onKeyDown = event => {\n    if (event.key === 'Escape') {\n      // close popup only if auto completion is not open\n      if (!isAutoCompletionOpen.current) {\n        onClose();\n        isAutoCompletionOpen.current = false;\n      }\n    }\n  };\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    // set focus on editor when popup is opened\n    if (editorRef.current) {\n      editorRef.current.focus();\n    }\n  }, [editorRef]);\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(Popup, {\n    className: \"bio-properties-panel-feel-popup\",\n    position: position,\n    title: title,\n    returnFocus: false,\n    closeOnEscape: false,\n    delayInitialFocus: false,\n    onPostDeactivate: handleSetReturnFocus,\n    height: FEEL_POPUP_HEIGHT,\n    width: FEEL_POPUP_WIDTH,\n    ref: popupRef,\n    children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(Popup.Title, {\n      title: title,\n      eventBus: eventBus,\n      showCloseButton: true,\n      closeButtonTooltip: \"Save and close\",\n      onClose: onClose,\n      draggable: true,\n      children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.Fragment, {\n        children: (links || []).map((link, index) => {\n          return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"a\", {\n            rel: \"noreferrer\",\n            href: link.href,\n            target: \"_blank\",\n            class: \"bio-properties-panel-feel-popup__title-link\",\n            children: [link.title, (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(LaunchIcon, {})]\n          }, index);\n        })\n      })\n    }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(Popup.Body, {\n      children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n        onKeyDownCapture: onKeyDownCapture,\n        onKeyDown: onKeyDown,\n        class: \"bio-properties-panel-feel-popup__body\",\n        children: [type === 'feel' && (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(FeelEditor, {\n          enableGutters: true,\n          id: prefixId(entryId),\n          name: entryId,\n          onInput: onInput,\n          value: value,\n          variables: variables,\n          feelLanguageContext: feelLanguageContext,\n          ref: editorRef,\n          tooltipContainer: tooltipContainer\n        }), type === 'feelers' && (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(TemplatingEditor, {\n          id: prefixId(entryId),\n          contentAttributes: {\n            'aria-label': title\n          },\n          enableGutters: true,\n          hostLanguage: hostLanguage,\n          name: entryId,\n          onInput: onInput,\n          value: value,\n          ref: editorRef,\n          singleLine: singleLine,\n          tooltipContainer: tooltipContainer\n        })]\n      })\n    })]\n  });\n}\nfunction prefixId(id) {\n  return `bio-properties-panel-${id}`;\n}\nfunction autoCompletionOpen(element) {\n  const editor = element.closest('.cm-editor');\n  return editor ? editor.querySelector('.cm-tooltip-autocomplete') : null;\n}\nfunction getPopupTitle({\n  element,\n  label\n}) {\n  let popupTitle = '';\n  if (element && element.type) {\n    popupTitle = `${element.type} / `;\n  }\n  return `${popupTitle}${label}`;\n}\nfunction getPopupPosition() {\n  const viewportWidth = window.innerWidth || document.documentElement.clientWidth;\n  const viewportHeight = window.innerHeight || document.documentElement.clientHeight;\n  return {\n    left: Math.max(0, (viewportWidth - FEEL_POPUP_WIDTH) / 2),\n    top: Math.max(0, (viewportHeight - FEEL_POPUP_HEIGHT) / 2)\n  };\n}\n\n/**\n * FEEL popup component, built as a singleton.\n *\n * In order to implement a custom replacement, handle the following events:\n * - `propertiesPanel.openPopup`\n * - `propertiesPanel.closePopup`\n * - `propertiesPanel.detach`\n *\n * Within the custom renderer, make sure to emit the following events:\n *  - `feelPopup.open` - fired before the popup is mounted\n *  - `feelPopup.opened` - fired after the popup is mounted. Event context contains the DOM node of the popup as `domNode`\n *  - `feelPopup.close` - fired before the popup is unmounted. Event context contains the DOM node of the popup as `domNode`\n *  - `feelPopup.closed` - fired after the popup is unmounted\n */\nclass FeelPopup {\n  constructor(eventBus, config = {}) {\n    this._eventBus = eventBus;\n    this._config = config;\n    this._isOpen = false;\n    eventBus.on('propertiesPanel.openPopup', (_, context) => {\n      this.open(context.entryId, context, context.sourceElement);\n\n      // return true to indicate that popup was opened\n      return true;\n    });\n    eventBus.on(['propertiesPanel.closePopup', 'propertiesPanel.detach'], () => {\n      this.close();\n    });\n  }\n\n  /**\n   * Check if the FEEL popup is open.\n   * @return {Boolean}\n   */\n  isOpen() {\n    return this._isOpen;\n  }\n\n  /**\n   * Open the FEEL popup.\n   *\n   * @param {String} entryId\n   * @param {Object} popupConfig\n   * @param {HTMLElement} sourceElement\n   */\n  open(entryId, popupConfig, sourceElement) {\n    // close before opening a new one\n    this.close();\n    this._openPopup({\n      ...popupConfig,\n      entryId,\n      sourceElement\n    });\n  }\n\n  /**\n   * Close the FEEL popup.\n   */\n  close() {\n    this._closePopup();\n  }\n  _openPopup(context) {\n    const {\n      element,\n      label,\n      sourceElement,\n      type\n    } = context;\n    this._isOpen = true;\n    this._eventBus.fire('propertiesPanelPopup.open', {\n      container: this._config.feelPopupContainer,\n      config: {\n        ...context,\n        links: this._config.getFeelPopupLinks?.(type) || [],\n        onClose: () => {\n          this._closePopup();\n\n          // setTimeout to ensure the focus happens after the DOM updates make it focusable\n          setTimeout(() => {\n            sourceElement && sourceElement.focus();\n          }, 0);\n        },\n        position: getPopupPosition(),\n        title: getPopupTitle({\n          element,\n          label\n        })\n      }\n    });\n  }\n  _closePopup() {\n    if (this._isOpen) {\n      this._isOpen = false;\n      this._eventBus.fire('propertiesPanelPopup.close');\n    }\n  }\n}\nFeelPopup.$inject = ['eventBus', 'config.propertiesPanel'];\nclass FeelPopupRenderer {\n  constructor(eventBus) {\n    this._eventBus = eventBus;\n    this._container = null;\n    this._element = null;\n    eventBus.on('propertiesPanelPopup.open', context => {\n      this._renderPopup(context);\n    });\n    eventBus.on('propertiesPanelPopup.close', () => {\n      this._removePopup();\n    });\n  }\n  _renderPopup(context) {\n    let {\n      container,\n      config\n    } = context;\n    container = this._container = getContainer(container) || document.body;\n    const element = this._element = createElement();\n    container.appendChild(element);\n\n    // TODO(philippfromme): there is no useService in this context, so we need\n    // to pass the event bus as a prop or create a context provider, however,\n    // a custom renderer would have to use that context provider as well to have\n    // access to the event bus and other services\n    this._emit('feelPopup.open');\n    (0,preact__WEBPACK_IMPORTED_MODULE_6__.render)((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(FeelPopup$1, {\n      ...config,\n      eventBus: this._eventBus\n    }), element);\n    this._emit('feelPopup.opened', {\n      domNode: element\n    });\n  }\n  _removePopup() {\n    if (!this._container) {\n      return;\n    }\n    this._emit('feelPopup.close', {\n      domNode: this._element\n    });\n    (0,preact__WEBPACK_IMPORTED_MODULE_6__.render)(null, this._element);\n    this._container.removeChild(this._element);\n    this._container = null;\n    this._emit('feelPopup.closed');\n  }\n  _emit(event, context) {\n    this._eventBus.fire(event, context);\n  }\n}\nFeelPopupRenderer.$inject = ['eventBus'];\n\n// helpers /////////////////\n\nfunction createElement() {\n  const element = document.createElement('div');\n  element.classList.add('bio-properties-panel-popup-container');\n  return element;\n}\nfunction getContainer(container) {\n  if ((0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isString)(container)) {\n    return (0,min_dom__WEBPACK_IMPORTED_MODULE_9__.query)(container);\n  }\n  return container;\n}\nvar index = {\n  __init__: ['feelPopup', 'feelPopupRenderer'],\n  feelPopup: ['type', FeelPopup],\n  feelPopupRenderer: ['type', FeelPopupRenderer]\n};\n\n/**\n * @param {string} type\n * @param {boolean} [strict]\n *\n * @returns {any}\n */\nfunction getService(type, strict) {}\nconst FormPropertiesPanelContext = (0,preact__WEBPACK_IMPORTED_MODULE_6__.createContext)({\n  getService\n});\n\nfunction getPropertiesPanelHeaderProvider(options = {}) {\n  const {\n    getDocumentationRef,\n    formFields\n  } = options;\n  return {\n    getElementLabel: field => {\n      const {\n        type\n      } = field;\n      const fieldDefinition = formFields.get(type).config;\n      return fieldDefinition.getSubheading ? fieldDefinition.getSubheading(field) : field.label;\n    },\n    getElementIcon: field => {\n      const {\n        type\n      } = field;\n      const fieldDefinition = formFields.get(type).config;\n      const Icon = fieldDefinition.icon || (0,_bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.iconsByType)(type);\n      if (Icon) {\n        return function IconComponent() {\n          return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(Icon, {\n            width: \"36\",\n            height: \"36\",\n            viewBox: \"0 0 54 54\"\n          });\n        };\n      } else if (fieldDefinition.iconUrl) {\n        return getPaletteIcon({\n          iconUrl: fieldDefinition.iconUrl,\n          label: fieldDefinition.label\n        });\n      }\n    },\n    getTypeLabel: field => {\n      const {\n        type\n      } = field;\n      if (type === 'default') {\n        return 'Form';\n      }\n      const fieldDefinition = formFields.get(type).config;\n      return fieldDefinition.name || fieldDefinition.label || type;\n    },\n    getDocumentationRef\n  };\n}\n\n/**\n * Provide placeholders for empty and multiple state.\n */\nconst PropertiesPanelPlaceholderProvider = {\n  getEmpty: () => {\n    return {\n      text: 'Select a form field to edit its properties.'\n    };\n  },\n  getMultiple: () => {\n    return {\n      text: 'Multiple form fields are selected. Select a single form field to edit its properties.'\n    };\n  }\n};\n\nconst EMPTY = {};\nfunction PropertiesPanel(props) {\n  const {\n    eventBus,\n    getProviders,\n    injector\n  } = props;\n  const formEditor = injector.get('formEditor');\n  const modeling = injector.get('modeling');\n  const selectionModule = injector.get('selection');\n  const propertiesPanelConfig = injector.get('config.propertiesPanel') || EMPTY;\n  const {\n    feelPopupContainer\n  } = propertiesPanelConfig;\n  const [state, setState] = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useState)({\n    selectedFormField: selectionModule.get() || formEditor._getState().schema\n  });\n  const selectedFormField = state.selectedFormField;\n  const refresh = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useCallback)(field => {\n    // TODO(skaiir): rework state management, re-rendering the whole properties panel is not the way to go\n    // https://github.com/bpmn-io/form-js/issues/686\n    setState({\n      selectedFormField: selectionModule.get() || formEditor._getState().schema\n    });\n\n    // notify interested parties on property panel updates\n    eventBus.fire('propertiesPanel.updated', {\n      formField: field\n    });\n  }, [eventBus, formEditor, selectionModule]);\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useLayoutEffect)(() => {\n    /**\n     * TODO(pinussilvestrus): update with actual updated element,\n     * once we have a proper updater/change support\n     */\n    eventBus.on('changed', refresh);\n    eventBus.on('import.done', refresh);\n    eventBus.on('selection.changed', refresh);\n    return () => {\n      eventBus.off('changed', refresh);\n      eventBus.off('import.done', refresh);\n      eventBus.off('selection.changed', refresh);\n    };\n  }, [eventBus, refresh]);\n  const getService = (type, strict = true) => injector.get(type, strict);\n  const propertiesPanelContext = {\n    getService\n  };\n  const onFocus = () => eventBus.fire('propertiesPanel.focusin');\n  const onBlur = () => eventBus.fire('propertiesPanel.focusout');\n  const editField = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useCallback)((formField, key, value) => modeling.editFormField(formField, key, value), [modeling]);\n\n  // retrieve groups for selected form field\n  const providers = getProviders(selectedFormField);\n  const groups = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => {\n    return (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.reduce)(providers, function (groups, provider) {\n      // do not collect groups for multi element state\n      if ((0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isArray)(selectedFormField)) {\n        return [];\n      }\n      const updater = provider.getGroups(selectedFormField, editField);\n      return updater(groups);\n    }, []);\n  }, [providers, selectedFormField, editField]);\n  const formFields = getService('formFields');\n  const PropertiesPanelHeaderProvider = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => getPropertiesPanelHeaderProvider({\n    getDocumentationRef: propertiesPanelConfig.getDocumentationRef,\n    formFields\n  }), [formFields, propertiesPanelConfig]);\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n    class: \"fjs-properties-panel\",\n    \"data-field\": selectedFormField && selectedFormField.id,\n    onFocusCapture: onFocus,\n    onBlurCapture: onBlur,\n    children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(FormPropertiesPanelContext.Provider, {\n      value: propertiesPanelContext,\n      children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(PropertiesPanel$1, {\n        element: selectedFormField,\n        eventBus: eventBus,\n        groups: groups,\n        headerProvider: PropertiesPanelHeaderProvider,\n        placeholderProvider: PropertiesPanelPlaceholderProvider,\n        feelPopupContainer: feelPopupContainer\n      })\n    })\n  });\n}\n\nconst DEFAULT_PRIORITY = 1000;\n\n/**\n * @typedef { { parent: Element } } PropertiesPanelConfig\n * @typedef { import('../../core/EventBus').EventBus } EventBus\n * @typedef { import('../../types').Injector } Injector\n * @typedef { { getGroups: ({ formField, editFormField }) => ({ groups}) => Array } } PropertiesProvider\n */\n\n/**\n * @param {PropertiesPanelConfig} propertiesPanelConfig\n * @param {Injector} injector\n * @param {EventBus} eventBus\n */\nclass PropertiesPanelRenderer {\n  constructor(propertiesPanelConfig, injector, eventBus) {\n    const {\n      parent\n    } = propertiesPanelConfig || {};\n    this._eventBus = eventBus;\n    this._injector = injector;\n    this._container = (0,min_dom__WEBPACK_IMPORTED_MODULE_9__.domify)('<div class=\"fjs-properties-container\" input-handle-modified-keys=\"y,z\"></div>');\n    if (parent) {\n      this.attachTo(parent);\n    }\n    this._eventBus.once('formEditor.rendered', 500, () => {\n      this._render();\n    });\n  }\n\n  /**\n   * Attach the properties panel to a parent node.\n   *\n   * @param {HTMLElement} container\n   */\n  attachTo(container) {\n    if (!container) {\n      throw new Error('container required');\n    }\n    if (typeof container === 'string') {\n      container = (0,min_dom__WEBPACK_IMPORTED_MODULE_9__.query)(container);\n    }\n\n    // (1) detach from old parent\n    this.detach();\n\n    // (2) append to parent container\n    container.appendChild(this._container);\n\n    // (3) notify interested parties\n    this._eventBus.fire('propertiesPanel.attach');\n  }\n\n  /**\n   * Detach the properties panel from its parent node.\n   */\n  detach() {\n    const parentNode = this._container.parentNode;\n    if (parentNode) {\n      parentNode.removeChild(this._container);\n      this._eventBus.fire('propertiesPanel.detach');\n    }\n  }\n  _render() {\n    (0,preact__WEBPACK_IMPORTED_MODULE_6__.render)((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(PropertiesPanel, {\n      getProviders: this._getProviders.bind(this),\n      eventBus: this._eventBus,\n      injector: this._injector\n    }), this._container);\n    this._eventBus.fire('propertiesPanel.rendered');\n  }\n  _destroy() {\n    if (this._container) {\n      (0,preact__WEBPACK_IMPORTED_MODULE_6__.render)(null, this._container);\n      this._eventBus.fire('propertiesPanel.destroyed');\n    }\n  }\n\n  /**\n   * Register a new properties provider to the properties panel.\n   *\n   * @param {PropertiesProvider} provider\n   * @param {Number} [priority]\n   */\n  registerProvider(provider, priority) {\n    if (!priority) {\n      priority = DEFAULT_PRIORITY;\n    }\n    if (typeof provider.getGroups !== 'function') {\n      console.error('Properties provider does not implement #getGroups(element) API');\n      return;\n    }\n    this._eventBus.on('propertiesPanel.getProviders', priority, function (event) {\n      event.providers.push(provider);\n    });\n    this._eventBus.fire('propertiesPanel.providersChanged');\n  }\n  _getProviders() {\n    const event = this._eventBus.createEvent({\n      type: 'propertiesPanel.getProviders',\n      providers: []\n    });\n    this._eventBus.fire(event);\n    return event.providers;\n  }\n}\nPropertiesPanelRenderer.$inject = ['config.propertiesPanel', 'injector', 'eventBus'];\n\nfunction ActionEntry(props) {\n  const {\n    editField,\n    field\n  } = props;\n  const entries = [];\n  entries.push({\n    id: 'action',\n    component: Action,\n    editField: editField,\n    field: field,\n    isEdited: isEdited$3,\n    isDefaultVisible: field => field.type === 'button'\n  });\n  return entries;\n}\nfunction Action(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n  const path = ['action'];\n  const getValue = () => {\n    return (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, path, '');\n  };\n  const setValue = value => {\n    return editField(field, path, value);\n  };\n  const getOptions = () => [{\n    label: 'Submit',\n    value: 'submit'\n  }, {\n    label: 'Reset',\n    value: 'reset'\n  }];\n  return SelectEntry({\n    element: field,\n    getOptions,\n    getValue,\n    id,\n    label: 'Action',\n    setValue\n  });\n}\n\nfunction useService(type, strict) {\n  const {\n    getService\n  } = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useContext)(FormPropertiesPanelContext);\n  return getService(type, strict);\n}\n\n/**\n * Retrieve list of variables from the form schema.\n *\n * @returns { string[] } list of variables used in form schema\n */\nfunction useVariables() {\n  const form = useService('formEditor');\n  const schema = form.getSchema();\n  return (0,_bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.getSchemaVariables)(schema);\n}\n\nfunction AltTextEntry(props) {\n  const {\n    editField,\n    field\n  } = props;\n  const entries = [];\n  entries.push({\n    id: 'alt',\n    component: AltText,\n    editField: editField,\n    field: field,\n    isEdited: isEdited$5,\n    isDefaultVisible: field => ['image'].includes(field.type)\n  });\n  return entries;\n}\nfunction AltText(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n  const debounce = useService('debounce');\n  const variables = useVariables().map(name => ({\n    name\n  }));\n  const path = ['alt'];\n  const getValue = () => {\n    return (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, path, '');\n  };\n  const setValue = value => {\n    return editField(field, path, value);\n  };\n  return FeelTemplatingEntry({\n    debounce,\n    element: field,\n    feel: 'optional',\n    getValue,\n    id,\n    label: 'Alternative text',\n    tooltip: 'Descriptive text for screen reader accessibility.',\n    setValue,\n    singleLine: true,\n    variables\n  });\n}\n\nconst AUTO_OPTION_VALUE = '';\nfunction ColumnsEntry(props) {\n  const {\n    editField,\n    field\n  } = props;\n  const entries = [{\n    id: 'columns',\n    component: Columns,\n    field,\n    editField,\n    isEdited: isEdited$3\n  }];\n  return entries;\n}\nfunction Columns(props) {\n  const {\n    field,\n    editField,\n    id\n  } = props;\n  useService('debounce');\n  const formLayoutValidator = useService('formLayoutValidator');\n  const validate = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useCallback)(value => {\n    return formLayoutValidator.validateField(field, value ? parseInt(value) : null);\n  }, [field, formLayoutValidator]);\n  const setValue = (value, error) => {\n    if (error) {\n      return;\n    }\n    const layout = (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, ['layout'], {});\n    const newValue = value ? parseInt(value) : null;\n    editField(field, ['layout'], (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.set)(layout, ['columns'], newValue));\n  };\n  const getValue = () => {\n    return (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, ['layout', 'columns']);\n  };\n  const getOptions = () => {\n    return [{\n      label: 'Auto',\n      value: AUTO_OPTION_VALUE\n    },\n    // todo(pinussilvestrus): make options dependant on field type\n    // cf. https://github.com/bpmn-io/form-js/issues/575\n    ...asArray(16).filter(i => i >= MIN_COLUMNS).map(asOption)];\n  };\n  return SelectEntry({\n    element: field,\n    id,\n    label: 'Columns',\n    getOptions,\n    getValue,\n    setValue,\n    validate\n  });\n}\n\n// helper /////////\n\nfunction asOption(number) {\n  return {\n    value: number,\n    label: number.toString()\n  };\n}\nfunction asArray(length) {\n  return Array.from({\n    length\n  }).map((_, i) => i + 1);\n}\n\nfunction arrayAdd(array, index, item) {\n  const copy = [...array];\n  copy.splice(index, 0, item);\n  return copy;\n}\nfunction countDecimals(number) {\n  const num = (0,big_js__WEBPACK_IMPORTED_MODULE_15__[\"default\"])(number);\n  if (num.toString() === num.toFixed(0)) return 0;\n  return num.toFixed().split('.')[1].length || 0;\n}\n\n/**\n *\n * @param {unknown} value\n * @returns {boolean}\n */\nfunction isValidNumber(value) {\n  return (typeof value === 'number' || typeof value === 'string') && value !== '' && !isNaN(Number(value));\n}\n\n/**\n * @param {string} path\n */\nfunction isValidDotPath(path) {\n  return /^\\w+(\\.\\w+)*$/.test(path);\n}\n\n/**\n * @param {string} path\n */\nfunction isProhibitedPath(path) {\n  const prohibitedSegments = ['__proto__', 'prototype', 'constructor'];\n  return path.split('.').some(segment => prohibitedSegments.includes(segment));\n}\nconst LABELED_NON_INPUTS = ['button', 'group', 'dynamiclist', 'iframe', 'table', 'documentPreview'];\nconst INPUTS = ['checkbox', 'checklist', 'datetime', 'number', 'radio', 'select', 'taglist', 'textfield', 'textarea', 'filepicker'];\nconst OPTIONS_INPUTS = ['checklist', 'radio', 'select', 'taglist'];\nfunction hasEntryConfigured(formFieldDefinition, entryId) {\n  const {\n    propertiesPanelEntries = []\n  } = formFieldDefinition;\n  if (!propertiesPanelEntries.length) {\n    return false;\n  }\n  return propertiesPanelEntries.some(id => id === entryId);\n}\nfunction hasOptionsGroupsConfigured(formFieldDefinition) {\n  const {\n    propertiesPanelEntries = []\n  } = formFieldDefinition;\n  if (!propertiesPanelEntries.length) {\n    return false;\n  }\n  return propertiesPanelEntries.some(id => id === 'values');\n}\n\n/**\n * @param {string} path\n */\nfunction hasIntegerPathSegment(path) {\n  return path.split('.').some(segment => /^\\d+$/.test(segment));\n}\n\n/**\n * Factory for isEdited functions that check against a default.\n *\n * @param {string} defaultValue The default value to check against.\n * @param {boolean} [includeEmptyAsDefault=true] If true, an empty value (e.g., '') is also considered a default state.\n * @return {(node: HTMLElement) => boolean} A function that returns true if the node's value is edited.\n */\nfunction isEditedFromDefaultFactory(defaultValue, includeEmptyAsDefault = true) {\n  return node => {\n    if (!node) {\n      return false;\n    }\n\n    /**\n     * @type {HTMLElement|null}\n     */\n    const codeMirrorContent = node.querySelector('.cm-content');\n    const isCodeMirrorEditor = !!codeMirrorContent;\n    const value = isCodeMirrorEditor ? codeMirrorContent.innerText : /** @type {HTMLInputElement} */node.value;\n    if (includeEmptyAsDefault && !value) {\n      return false;\n    }\n    return value !== defaultValue;\n  };\n}\nfunction isTrueDefaultToggleSwitchEntryEdited(node) {\n  return node && !node.checked;\n}\n\nfunction DescriptionEntry(props) {\n  const {\n    editField,\n    field\n  } = props;\n  const entries = [];\n  entries.push({\n    id: 'description',\n    component: Description,\n    editField: editField,\n    field: field,\n    isEdited: isEdited$5,\n    isDefaultVisible: field => field.type !== 'filepicker' && INPUTS.includes(field.type)\n  });\n  return entries;\n}\nfunction Description(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n  const debounce = useService('debounce');\n  const variables = useVariables().map(name => ({\n    name\n  }));\n  const path = ['description'];\n  const getValue = () => {\n    return (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, path, '');\n  };\n  const setValue = value => {\n    return editField(field, path, value);\n  };\n  return FeelTemplatingEntry({\n    debounce,\n    element: field,\n    getValue,\n    id,\n    label: 'Field description',\n    singleLine: true,\n    setValue,\n    variables\n  });\n}\n\nconst EMPTY_OPTION = '';\nfunction DefaultValueEntry(props) {\n  const {\n    editField,\n    field\n  } = props;\n  const {\n    type\n  } = field;\n  const entries = [];\n  function isDefaultVisible(matchers) {\n    return field => {\n      // Only make default values available when they are statically defined\n      if (!INPUTS.includes(type) || OPTIONS_INPUTS.includes(type) && !field.values) {\n        return false;\n      }\n      return matchers(field);\n    };\n  }\n  const defaultValueBase = {\n    editField,\n    field,\n    id: 'defaultValue',\n    label: 'Default value'\n  };\n  entries.push({\n    ...defaultValueBase,\n    component: DefaultValueCheckbox,\n    isEdited: isEdited$3,\n    isDefaultVisible: isDefaultVisible(field => field.type === 'checkbox')\n  });\n  entries.push({\n    ...defaultValueBase,\n    component: DefaultValueNumber,\n    isEdited: isEdited,\n    isDefaultVisible: isDefaultVisible(field => field.type === 'number')\n  });\n  entries.push({\n    ...defaultValueBase,\n    component: DefaultValueSingleSelect,\n    isEdited: isEdited$3,\n    isDefaultVisible: isDefaultVisible(field => field.type === 'radio' || field.type === 'select')\n  });\n\n  // todo(Skaiir): implement a multiselect equivalent (cf. https://github.com/bpmn-io/form-js/issues/265)\n\n  entries.push({\n    ...defaultValueBase,\n    component: DefaultValueTextfield,\n    isEdited: isEdited,\n    isDefaultVisible: isDefaultVisible(field => field.type === 'textfield')\n  });\n  entries.push({\n    ...defaultValueBase,\n    component: DefaultValueTextarea,\n    isEdited: isEdited$1,\n    isDefaultVisible: isDefaultVisible(field => field.type === 'textarea')\n  });\n  return entries;\n}\nfunction DefaultValueCheckbox(props) {\n  const {\n    editField,\n    field,\n    id,\n    label\n  } = props;\n  const {\n    defaultValue\n  } = field;\n  const path = ['defaultValue'];\n  const getOptions = () => {\n    return [{\n      label: 'Checked',\n      value: 'true'\n    }, {\n      label: 'Not checked',\n      value: 'false'\n    }];\n  };\n  const setValue = value => {\n    return editField(field, path, parseStringToBoolean(value));\n  };\n  const getValue = () => {\n    return parseBooleanToString(defaultValue);\n  };\n  return SelectEntry({\n    element: field,\n    getOptions,\n    getValue,\n    id,\n    label,\n    setValue\n  });\n}\nfunction DefaultValueNumber(props) {\n  const {\n    editField,\n    field,\n    id,\n    label\n  } = props;\n  const {\n    decimalDigits,\n    serializeToString = false\n  } = field;\n  const debounce = useService('debounce');\n  const path = ['defaultValue'];\n  const getValue = e => {\n    let value = (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, path);\n    if (!isValidNumber(value)) return;\n\n    // Enforces decimal notation so that we do not submit defaults in exponent form\n    return serializeToString ? (0,big_js__WEBPACK_IMPORTED_MODULE_15__[\"default\"])(value).toFixed() : value;\n  };\n  const setValue = (value, error) => {\n    if (error) {\n      return;\n    }\n    let newValue;\n    if (isValidNumber(value)) {\n      newValue = serializeToString ? value : Number(value);\n    }\n    return editField(field, path, newValue);\n  };\n  const decimalDigitsSet = decimalDigits || decimalDigits === 0;\n  const validate = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useCallback)(value => {\n    if (value === undefined || value === null) {\n      return;\n    }\n    if (!isValidNumber(value)) {\n      return 'Should be a valid number';\n    }\n    if (decimalDigitsSet && countDecimals(value) > decimalDigits) {\n      return `Should not contain more than ${decimalDigits} decimal digits`;\n    }\n  }, [decimalDigitsSet, decimalDigits]);\n  return TextfieldEntry({\n    debounce,\n    label,\n    element: field,\n    getValue,\n    id,\n    setValue,\n    validate\n  });\n}\nfunction DefaultValueSingleSelect(props) {\n  const {\n    editField,\n    field,\n    id,\n    label\n  } = props;\n  const {\n    defaultValue = EMPTY_OPTION,\n    values = []\n  } = field;\n  const path = ['defaultValue'];\n  const getOptions = () => {\n    return [{\n      label: '<none>',\n      value: EMPTY_OPTION\n    }, ...values];\n  };\n  const setValue = value => {\n    return editField(field, path, value.length ? value : undefined);\n  };\n  const getValue = () => {\n    return defaultValue;\n  };\n  return SelectEntry({\n    element: field,\n    getOptions,\n    getValue,\n    id,\n    label,\n    setValue\n  });\n}\nfunction DefaultValueTextfield(props) {\n  const {\n    editField,\n    field,\n    id,\n    label\n  } = props;\n  const debounce = useService('debounce');\n  const path = ['defaultValue'];\n  const getValue = () => {\n    return (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, path, '');\n  };\n  const setValue = value => {\n    return editField(field, path, value);\n  };\n  return TextfieldEntry({\n    debounce,\n    element: field,\n    getValue,\n    id,\n    label,\n    setValue\n  });\n}\nfunction DefaultValueTextarea(props) {\n  const {\n    editField,\n    field,\n    id,\n    label\n  } = props;\n  const debounce = useService('debounce');\n  const path = ['defaultValue'];\n  const getValue = () => {\n    return (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, path, '');\n  };\n  const setValue = value => {\n    return editField(field, path, value);\n  };\n  return TextAreaEntry({\n    debounce,\n    element: field,\n    getValue,\n    id,\n    label,\n    setValue\n  });\n}\n\n// helpers /////////////////\n\nfunction parseStringToBoolean(value) {\n  if (value === 'true') {\n    return true;\n  }\n  return false;\n}\nfunction parseBooleanToString(value) {\n  if (value === true) {\n    return 'true';\n  }\n  return 'false';\n}\n\nfunction DisabledEntry(props) {\n  const {\n    editField,\n    field\n  } = props;\n  const entries = [];\n  entries.push({\n    id: 'disabled',\n    component: Disabled,\n    editField: editField,\n    field: field,\n    isEdited: isEdited$7,\n    isDefaultVisible: field => INPUTS.includes(field.type)\n  });\n  return entries;\n}\nfunction Disabled(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n  const path = ['disabled'];\n  const getValue = () => {\n    return (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, path, '');\n  };\n  const setValue = value => {\n    return editField(field, path, value);\n  };\n  return ToggleSwitchEntry({\n    element: field,\n    getValue,\n    id,\n    label: 'Disabled',\n    tooltip: 'Disable this field when it should not be interactive for end-users. Its data will not be submitted. This setting takes precedence over read-only.',\n    inline: true,\n    setValue\n  });\n}\n\nfunction IdEntry(props) {\n  const {\n    editField,\n    field\n  } = props;\n  const entries = [];\n  entries.push({\n    id: 'id',\n    component: Id,\n    editField: editField,\n    field: field,\n    isEdited: isEdited,\n    isDefaultVisible: field => field.type === 'default'\n  });\n  return entries;\n}\nfunction Id(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n  const formFieldRegistry = useService('formFieldRegistry');\n  const debounce = useService('debounce');\n  const path = ['id'];\n  const getValue = () => {\n    return (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, path, '');\n  };\n  const setValue = (value, error) => {\n    if (error) {\n      return;\n    }\n    return editField(field, path, value);\n  };\n  const validate = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useCallback)(value => {\n    if (typeof value !== 'string' || value.length === 0) {\n      return 'Must not be empty.';\n    }\n    const assigned = formFieldRegistry._ids.assigned(value);\n    if (assigned && assigned !== field) {\n      return 'Must be unique.';\n    }\n    return validateId(value) || null;\n  }, [formFieldRegistry, field]);\n  return TextfieldEntry({\n    debounce,\n    element: field,\n    getValue,\n    id,\n    label: 'ID',\n    setValue,\n    validate\n  });\n}\n\n// id structural validation /////////////\n\nconst SPACE_REGEX = /\\s/;\n\n// for QName validation as per http://www.w3.org/TR/REC-xml/#NT-NameChar\nconst QNAME_REGEX = /^([a-z][\\w-.]*:)?[a-z_][\\w-.]*$/i;\n\n// for ID validation as per BPMN Schema (QName - Namespace)\nconst ID_REGEX = /^[a-z_][\\w-.]*$/i;\nfunction validateId(idValue) {\n  if (containsSpace(idValue)) {\n    return 'Must not contain spaces.';\n  }\n  if (!ID_REGEX.test(idValue)) {\n    if (QNAME_REGEX.test(idValue)) {\n      return 'Must not contain prefix.';\n    }\n    return 'Must be a valid QName.';\n  }\n}\nfunction containsSpace(value) {\n  return SPACE_REGEX.test(value);\n}\n\nfunction KeyEntry(props) {\n  const {\n    editField,\n    field,\n    getService\n  } = props;\n  const entries = [];\n  entries.push({\n    id: 'key',\n    component: Key$2,\n    editField: editField,\n    field: field,\n    isEdited: isEdited,\n    isDefaultVisible: field => {\n      const formFields = getService('formFields');\n      const {\n        config\n      } = formFields.get(field.type);\n      return config.keyed;\n    }\n  });\n  return entries;\n}\nfunction Key$2(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n  const pathRegistry = useService('pathRegistry');\n  const debounce = useService('debounce');\n  const path = ['key'];\n  const getValue = () => {\n    return (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, path, '');\n  };\n  const setValue = (value, error) => {\n    if (error) {\n      return;\n    }\n    return editField(field, path, value);\n  };\n  const validate = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useCallback)(value => {\n    if (value === field.key) {\n      return null;\n    }\n    if (!(0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isString)(value) || value.length === 0) {\n      return 'Must not be empty.';\n    }\n    if (!isValidDotPath(value)) {\n      return 'Must be a variable or a dot separated path.';\n    }\n    if (hasIntegerPathSegment(value)) {\n      return 'Must not contain numerical path segments.';\n    }\n    if (isProhibitedPath(value)) {\n      return 'Must not be a prohibited path.';\n    }\n    const replacements = {\n      [field.id]: value.split('.')\n    };\n    const oldPath = pathRegistry.getValuePath(field);\n    const newPath = pathRegistry.getValuePath(field, {\n      replacements\n    });\n\n    // unclaim temporarily to avoid self-conflicts\n    pathRegistry.unclaimPath(oldPath);\n    const canClaim = pathRegistry.canClaimPath(newPath, {\n      isClosed: true,\n      claimerId: field.id\n    });\n    pathRegistry.claimPath(oldPath, {\n      isClosed: true,\n      claimerId: field.id\n    });\n    return canClaim ? null : 'Must not conflict with other key/path assignments.';\n  }, [field, pathRegistry]);\n  return TextfieldEntry({\n    debounce,\n    description: 'Binds to a form variable',\n    element: field,\n    getValue,\n    id,\n    label: 'Key',\n    tooltip: 'Use a unique \"key\" to link the form element and the related input/output data. When dealing with nested data, break it down in the user task\\'s input mapping before using it.',\n    setValue,\n    validate\n  });\n}\n\nfunction PathEntry(props) {\n  const {\n    editField,\n    field,\n    getService\n  } = props;\n  const {\n    type\n  } = field;\n  const entries = [];\n  const formFieldDefinition = getService('formFields').get(type);\n  if (formFieldDefinition && formFieldDefinition.config.pathed) {\n    entries.push({\n      id: 'path',\n      component: Path,\n      editField: editField,\n      field: field,\n      isEdited: isEdited\n    });\n  }\n  return entries;\n}\nfunction Path(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n  const debounce = useService('debounce');\n  const pathRegistry = useService('pathRegistry');\n  const fieldConfig = useService('formFields').get(field.type).config;\n  const isRepeating = fieldConfig.repeatable && field.isRepeating;\n  const path = ['path'];\n  const getValue = () => {\n    return (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, path, '');\n  };\n  const setValue = (value, error) => {\n    if (error) {\n      return;\n    }\n    return editField(field, path, value);\n  };\n  const validate = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useCallback)(value => {\n    if (!value && isRepeating) {\n      return 'Must not be empty';\n    }\n\n    // Early return for empty value in non-repeating cases or if the field path hasn't changed\n    if (!value && !isRepeating || value === field.path) {\n      return null;\n    }\n\n    // Validate dot-separated path format\n    if (!isValidDotPath(value)) {\n      const msg = isRepeating ? 'Must be a variable or a dot-separated path' : 'Must be empty, a variable or a dot-separated path';\n      return msg;\n    }\n\n    // Check for integer segments in the path\n    if (hasIntegerPathSegment(value)) {\n      return 'Must not contain numerical path segments.';\n    }\n\n    // Check for special prohibited paths\n    if (isProhibitedPath(value)) {\n      return 'Must not be a prohibited path.';\n    }\n\n    // Check for path collisions\n    const options = {\n      replacements: {\n        [field.id]: value.split('.')\n      }\n    };\n    const canClaim = pathRegistry.executeRecursivelyOnFields(field, ({\n      field,\n      isClosed,\n      isRepeatable\n    }) => {\n      const path = pathRegistry.getValuePath(field, options);\n      return pathRegistry.canClaimPath(path, {\n        isClosed,\n        isRepeatable,\n        claimerId: field.id\n      });\n    });\n    if (!canClaim) {\n      return 'Must not cause two binding paths to collide';\n    }\n\n    // If all checks pass\n    return null;\n  }, [field, isRepeating, pathRegistry]);\n  const tooltip = isRepeating ? 'Routes the children of this component into a form variable, may be left empty to route at the root level.' : 'Routes the children of this component into a form variable.';\n  return TextfieldEntry({\n    debounce,\n    description: 'Where the child variables of this component are pathed to.',\n    element: field,\n    getValue,\n    id,\n    label: 'Path',\n    tooltip,\n    setValue,\n    validate\n  });\n}\n\nfunction simpleBoolEntryFactory(options) {\n  const {\n    id,\n    label,\n    description,\n    path,\n    props,\n    getValue,\n    setValue,\n    isDefaultVisible,\n    isTrueDefault = false\n  } = options;\n  const {\n    editField,\n    field\n  } = props;\n  return {\n    id,\n    label,\n    path,\n    field,\n    editField,\n    description,\n    component: SimpleBoolComponent,\n    isEdited: isTrueDefault ? isTrueDefaultToggleSwitchEntryEdited : isEdited$7,\n    isDefaultVisible,\n    getValue,\n    setValue\n  };\n}\nconst SimpleBoolComponent = props => {\n  const {\n    id,\n    label,\n    path,\n    field,\n    editField,\n    getValue = () => (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, path, ''),\n    setValue = value => editField(field, path, value || false),\n    description\n  } = props;\n  return ToggleSwitchEntry({\n    element: field,\n    getValue,\n    id,\n    label,\n    setValue,\n    inline: true,\n    description\n  });\n};\n\nfunction simpleSelectEntryFactory(options) {\n  const {\n    id,\n    label,\n    path,\n    props,\n    optionsArray\n  } = options;\n  const {\n    editField,\n    field\n  } = props;\n  return {\n    id,\n    label,\n    path,\n    field,\n    editField,\n    optionsArray,\n    component: SimpleSelectComponent,\n    isEdited: isEdited$3\n  };\n}\nconst SimpleSelectComponent = props => {\n  const {\n    id,\n    label,\n    path,\n    field,\n    editField,\n    optionsArray\n  } = props;\n  const getValue = () => (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, path, '');\n  const setValue = value => editField(field, path, value);\n  const getOptions = () => optionsArray;\n  return SelectEntry({\n    label,\n    element: field,\n    getOptions,\n    getValue,\n    id,\n    setValue\n  });\n};\n\nfunction simpleRangeIntegerEntryFactory(options) {\n  const {\n    id,\n    label,\n    path,\n    props,\n    min,\n    max\n  } = options;\n  const {\n    editField,\n    field\n  } = props;\n  return {\n    id,\n    label,\n    path,\n    field,\n    editField,\n    min,\n    max,\n    component: SimpleRangeIntegerEntry,\n    isEdited: isEdited\n  };\n}\nconst SimpleRangeIntegerEntry = props => {\n  const {\n    id,\n    label,\n    path,\n    field,\n    editField,\n    min = Number.MIN_SAFE_INTEGER,\n    max = Number.MAX_SAFE_INTEGER\n  } = props;\n  const debounce = useService('debounce');\n  const getValue = () => {\n    const value = (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, path);\n    const isValid = isValidNumber(value) && Number.isInteger(value);\n    return isValid ? value : null;\n  };\n  const setValue = (value, error) => {\n    if (error) {\n      return;\n    }\n    editField(field, path, Number(value));\n  };\n  const validate = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useCallback)(value => {\n    if (value === undefined || value === null || value === '') {\n      return;\n    }\n    if (!Number.isInteger(Number(value))) {\n      return 'Should be an integer.';\n    }\n    if ((0,big_js__WEBPACK_IMPORTED_MODULE_15__[\"default\"])(value).cmp(min) < 0) {\n      return `Should be at least ${min}.`;\n    }\n    if ((0,big_js__WEBPACK_IMPORTED_MODULE_15__[\"default\"])(value).cmp(max) > 0) {\n      return `Should be at most ${max}.`;\n    }\n  }, [min, max]);\n  return TextfieldEntry({\n    debounce,\n    label,\n    element: field,\n    getValue,\n    id,\n    setValue,\n    validate\n  });\n};\n\nfunction GroupAppearanceEntry(props) {\n  const {\n    field\n  } = props;\n  const {\n    type\n  } = field;\n  if (!['group', 'dynamiclist'].includes(type)) {\n    return [];\n  }\n  const entries = [simpleBoolEntryFactory({\n    id: 'showOutline',\n    path: ['showOutline'],\n    label: 'Show outline',\n    isTrueDefault: true,\n    props\n  })];\n  return entries;\n}\n\nfunction LabelEntry(props) {\n  const {\n    field,\n    editField\n  } = props;\n  const entries = [];\n  entries.push({\n    id: 'date-label',\n    component: DateLabel,\n    editField,\n    field,\n    isEdited: isEdited$5,\n    isDefaultVisible: function (field) {\n      return field.type === 'datetime' && (field.subtype === _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.DATETIME_SUBTYPES.DATE || field.subtype === _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.DATETIME_SUBTYPES.DATETIME);\n    }\n  });\n  entries.push({\n    id: 'time-label',\n    component: TimeLabel,\n    editField,\n    field,\n    isEdited: isEdited$5,\n    isDefaultVisible: function (field) {\n      return field.type === 'datetime' && (field.subtype === _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.DATETIME_SUBTYPES.TIME || field.subtype === _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.DATETIME_SUBTYPES.DATETIME);\n    }\n  });\n  const isSimplyLabeled = field => {\n    return [...INPUTS.filter(input => input !== 'datetime'), ...LABELED_NON_INPUTS].includes(field.type);\n  };\n  entries.push({\n    id: 'label',\n    component: Label$2,\n    editField,\n    field,\n    isEdited: isEdited$5,\n    isDefaultVisible: isSimplyLabeled\n  });\n  return entries;\n}\nfunction Label$2(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n  const debounce = useService('debounce');\n  const variables = useVariables().map(name => ({\n    name\n  }));\n  const path = ['label'];\n  const getValue = () => {\n    return (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, path, '');\n  };\n  const setValue = value => {\n    return editField(field, path, value || '');\n  };\n  const label = getLabelText(field.type);\n  return FeelTemplatingEntry({\n    debounce,\n    element: field,\n    getValue,\n    id,\n    label,\n    singleLine: true,\n    setValue,\n    variables\n  });\n}\nfunction DateLabel(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n  const debounce = useService('debounce');\n  const variables = useVariables().map(name => ({\n    name\n  }));\n  const path = _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.DATE_LABEL_PATH;\n  const getValue = () => {\n    return (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, path, '');\n  };\n  const setValue = value => {\n    return editField(field, path, value || '');\n  };\n  return FeelTemplatingEntry({\n    debounce,\n    element: field,\n    getValue,\n    id,\n    label: 'Date label',\n    singleLine: true,\n    setValue,\n    variables\n  });\n}\nfunction TimeLabel(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n  const debounce = useService('debounce');\n  const variables = useVariables().map(name => ({\n    name\n  }));\n  const path = _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.TIME_LABEL_PATH;\n  const getValue = () => {\n    return (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, path, '');\n  };\n  const setValue = value => {\n    return editField(field, path, value || '');\n  };\n  return FeelTemplatingEntry({\n    debounce,\n    element: field,\n    getValue,\n    id,\n    label: 'Time label',\n    singleLine: true,\n    setValue,\n    variables\n  });\n}\n\n// helpers //////////\n\n/**\n * @param {string} type\n * @returns {string}\n */\nfunction getLabelText(type) {\n  switch (type) {\n    case 'group':\n    case 'dynamiclist':\n      return 'Group label';\n    case 'table':\n      return 'Table label';\n    case 'iframe':\n    case 'documentPreview':\n      return 'Title';\n    default:\n      return 'Field label';\n  }\n}\n\nfunction HeightEntry(props) {\n  const {\n    editField,\n    field,\n    id,\n    description,\n    isDefaultVisible,\n    defaultValue\n  } = props;\n  const entries = [];\n  entries.push({\n    id: id + '-height',\n    component: Height,\n    description,\n    isEdited: isEdited$6,\n    editField,\n    field,\n    defaultValue,\n    isDefaultVisible: field => {\n      if ((0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isFunction)(isDefaultVisible)) {\n        return isDefaultVisible(field);\n      }\n      return field.type === 'spacer';\n    }\n  });\n  return entries;\n}\nfunction Height(props) {\n  const {\n    description,\n    editField,\n    field,\n    id\n  } = props;\n  const debounce = useService('debounce');\n  const getValue = e => (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, ['height'], null);\n  const setValue = (value, error) => {\n    if (error) {\n      return;\n    }\n    editField(field, ['height'], value);\n  };\n  return NumberFieldEntry({\n    debounce,\n    description,\n    label: 'Height',\n    element: field,\n    id,\n    getValue,\n    setValue,\n    validate: validate$9\n  });\n}\n\n// helpers //////////\n\n/**\n * @param {number|void} value\n * @returns {string|null}\n */\nconst validate$9 = value => {\n  if (typeof value !== 'number') {\n    return 'A number is required.';\n  }\n  if (!Number.isInteger(value)) {\n    return 'Should be an integer.';\n  }\n  if (value < 1) {\n    return 'Should be greater than zero.';\n  }\n};\n\nfunction IFrameHeightEntry(props) {\n  return [...HeightEntry({\n    ...props,\n    description: 'Height of the container in pixels.',\n    isDefaultVisible: field => field.type === 'iframe'\n  })];\n}\n\nconst HTTPS_PATTERN = /^(https):\\/\\/*/i;\nfunction IFrameUrlEntry(props) {\n  const {\n    editField,\n    field\n  } = props;\n  const entries = [];\n  entries.push({\n    id: 'url',\n    component: Url,\n    editField: editField,\n    field: field,\n    isEdited: isEdited$5,\n    isDefaultVisible: field => field.type === 'iframe'\n  });\n  return entries;\n}\nfunction Url(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n  const debounce = useService('debounce');\n  const variables = useVariables().map(name => ({\n    name\n  }));\n  const path = ['url'];\n  const getValue = () => {\n    return (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, path, '');\n  };\n  const setValue = value => {\n    return editField(field, path, value);\n  };\n  return FeelTemplatingEntry({\n    debounce,\n    element: field,\n    feel: 'optional',\n    getValue,\n    id,\n    label: 'URL',\n    setValue,\n    singleLine: true,\n    tooltip: getTooltip$1(),\n    validate: validate$8,\n    variables\n  });\n}\n\n// helper //////////////////////\n\nfunction getTooltip$1() {\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.Fragment, {\n    children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"p\", {\n      children: \"Enter a HTTPS URL to a source or populate it dynamically via a template or an expression (e.g., to pass a value from the variable).\"\n    }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"p\", {\n      children: \"Please make sure that the URL is safe as it might impose security risks.\"\n    }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"p\", {\n      children: [\"Not all external sources can be displayed in the iFrame. Read more about it in the\", ' ', (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"a\", {\n        target: \"_blank\",\n        href: \"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Frame-Options\",\n        rel: \"noreferrer\",\n        children: \"X-FRAME-OPTIONS documentation\"\n      }), \".\"]\n    })]\n  });\n}\n\n/**\n * @param {string|void} value\n * @returns {string|null}\n */\nconst validate$8 = value => {\n  if (!value || value.startsWith('=')) {\n    return;\n  }\n  if (!HTTPS_PATTERN.test(value)) {\n    return 'For security reasons the URL must start with \"https\".';\n  }\n};\n\nfunction ImageSourceEntry(props) {\n  const {\n    editField,\n    field\n  } = props;\n  const entries = [];\n  entries.push({\n    id: 'source',\n    component: Source$1,\n    editField: editField,\n    field: field,\n    isEdited: isEdited$5,\n    isDefaultVisible: field => field.type === 'image'\n  });\n  return entries;\n}\nfunction Source$1(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n  const debounce = useService('debounce');\n  const variables = useVariables().map(name => ({\n    name\n  }));\n  const path = ['source'];\n  const getValue = () => {\n    return (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, path, '');\n  };\n  const setValue = value => {\n    return editField(field, path, value);\n  };\n  return FeelTemplatingEntry({\n    debounce,\n    description: 'Expression or static value (link/data URI)',\n    element: field,\n    feel: 'optional',\n    getValue,\n    id,\n    label: 'Image source',\n    tooltip: 'Link referring to a hosted image, or use a data URI directly to embed image data into the form.',\n    setValue,\n    singleLine: true,\n    variables\n  });\n}\n\nconst isTextEdited = isEditedFromDefaultFactory(_bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.TEXT_VIEW_DEFAULT_TEXT, false);\nfunction TextEntry(props) {\n  const {\n    editField,\n    field\n  } = props;\n  const entries = [{\n    id: 'text',\n    component: Text,\n    editField: editField,\n    field: field,\n    isEdited: isTextEdited,\n    isDefaultVisible: field => field.type === 'text'\n  }];\n  return entries;\n}\nfunction Text(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n  const debounce = useService('debounce');\n  const variables = useVariables().map(name => ({\n    name\n  }));\n  const path = ['text'];\n  const getValue = () => {\n    return (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, path, '');\n  };\n  const setValue = value => {\n    return editField(field, path, value || '');\n  };\n  return FeelTemplatingEntry({\n    debounce,\n    description: description$3,\n    element: field,\n    getValue,\n    id,\n    label: 'Text',\n    hostLanguage: 'markdown',\n    setValue,\n    variables\n  });\n}\nconst description$3 = (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.Fragment, {\n  children: [\"Supports markdown and templating.\", ' ', (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"a\", {\n    href: \"https://docs.camunda.io/docs/components/modeler/forms/form-element-library/forms-element-library-text/\",\n    target: \"_blank\",\n    rel: \"noreferrer\",\n    children: \"Learn more\"\n  })]\n});\n\nfunction HtmlEntry(props) {\n  const {\n    editField,\n    field\n  } = props;\n  const entries = [{\n    id: 'content',\n    component: Content,\n    editField: editField,\n    field: field,\n    isEdited: isEdited$5,\n    isDefaultVisible: field => field.type === 'html'\n  }];\n  return entries;\n}\nfunction Content(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n  const debounce = useService('debounce');\n  const variables = useVariables().map(name => ({\n    name\n  }));\n  const path = ['content'];\n  const getValue = () => {\n    return (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, path, '');\n  };\n  const setValue = value => {\n    return editField(field, path, value || '');\n  };\n  return FeelTemplatingEntry({\n    debounce,\n    description: description$2,\n    element: field,\n    getValue,\n    id,\n    label: 'Content',\n    hostLanguage: 'html',\n    validate: validate$7,\n    setValue,\n    variables\n  });\n}\n\n// helpers //////////\n\nconst description$2 = (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.Fragment, {\n  children: [\"Supports HTML, styling, and templating. Styles are automatically scoped to the HTML component.\", ' ', (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"a\", {\n    href: \"https://docs.camunda.io/docs/components/modeler/forms/form-element-library/forms-element-library-html/\",\n    target: \"_blank\",\n    rel: \"noreferrer\",\n    children: \"Learn more\"\n  })]\n});\n\n/**\n * @param {string|void} value\n * @returns {string|null}\n */\nconst validate$7 = value => {\n  // allow empty state\n  if (typeof value !== 'string' || value === '') {\n    return null;\n  }\n\n  // allow expressions\n  if (value.startsWith('=')) {\n    return null;\n  }\n};\n\nfunction NumberEntries(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n  const entries = [];\n  entries.push({\n    id: id + '-decimalDigits',\n    component: NumberDecimalDigits,\n    isEdited: isEdited$6,\n    editField,\n    field,\n    isDefaultVisible: field => field.type === 'number'\n  });\n  entries.push({\n    id: id + '-step',\n    component: NumberArrowStep,\n    isEdited: isEdited,\n    editField,\n    field,\n    isDefaultVisible: field => field.type === 'number'\n  });\n  return entries;\n}\nfunction NumberDecimalDigits(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n  const debounce = useService('debounce');\n  const getValue = e => (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, ['decimalDigits']);\n  const setValue = (value, error) => {\n    if (error) {\n      return;\n    }\n    editField(field, ['decimalDigits'], value);\n  };\n  return NumberFieldEntry({\n    debounce,\n    label: 'Decimal digits',\n    element: field,\n    step: 'any',\n    getValue,\n    id,\n    setValue,\n    validate: validateNumberEntries\n  });\n}\nfunction NumberArrowStep(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n  const {\n    decimalDigits\n  } = field;\n  const debounce = useService('debounce');\n  const getValue = e => {\n    let value = (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, ['increment']);\n    if (!isValidNumber(value)) return null;\n    return value;\n  };\n  const clearLeadingZeroes = value => {\n    if (!value) return value;\n    const trimmed = value.replace(/^0+/g, '');\n    return (trimmed.startsWith('.') ? '0' : '') + trimmed;\n  };\n  const setValue = (value, error) => {\n    if (error) {\n      return;\n    }\n    editField(field, ['increment'], clearLeadingZeroes(value));\n  };\n  const decimalDigitsSet = decimalDigits || decimalDigits === 0;\n  const validate = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useCallback)(value => {\n    if (value === undefined || value === null) {\n      return;\n    }\n    if (!isValidNumber(value)) {\n      return 'Should be a valid number.';\n    }\n    if ((0,big_js__WEBPACK_IMPORTED_MODULE_15__[\"default\"])(value).cmp(0) <= 0) {\n      return 'Should be greater than zero.';\n    }\n    if (decimalDigitsSet) {\n      const minimumValue = (0,big_js__WEBPACK_IMPORTED_MODULE_15__[\"default\"])(`1e-${decimalDigits}`);\n      if ((0,big_js__WEBPACK_IMPORTED_MODULE_15__[\"default\"])(value).cmp(minimumValue) < 0) {\n        return `Should be at least ${minimumValue.toString()}.`;\n      }\n      if (countDecimals(value) > decimalDigits) {\n        return `Should not contain more than ${decimalDigits} decimal digits.`;\n      }\n    }\n  }, [decimalDigitsSet, decimalDigits]);\n  return TextfieldEntry({\n    debounce,\n    label: 'Increment',\n    element: field,\n    getValue,\n    id,\n    setValue,\n    validate\n  });\n}\n\n// helpers //////////\n\n/**\n * @param {number|void} value\n * @returns {string|void}\n */\nconst validateNumberEntries = value => {\n  if (typeof value !== 'number') {\n    return;\n  }\n  if (!Number.isInteger(value)) {\n    return 'Should be an integer.';\n  }\n  if (value < 0) {\n    return 'Should be greater than or equal to zero.';\n  }\n};\n\nfunction ExpressionFieldEntries(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n  const entries = [];\n  entries.push({\n    id: `${id}-expression`,\n    component: ExpressionFieldExpression,\n    isEdited: isEdited$5,\n    editField,\n    field,\n    isDefaultVisible: field => field.type === 'expression'\n  });\n  entries.push({\n    id: `${id}-computeOn`,\n    component: ExpressionFieldComputeOn,\n    isEdited: isEdited$3,\n    editField,\n    field,\n    isDefaultVisible: field => field.type === 'expression'\n  });\n  return entries;\n}\nfunction ExpressionFieldExpression(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n  const debounce = useService('debounce');\n  const variables = useVariables().map(name => ({\n    name\n  }));\n  const getValue = () => field.expression || '';\n  const setValue = value => {\n    editField(field, ['expression'], value);\n  };\n  return FeelEntry({\n    debounce,\n    description: 'Define an expression to calculate the value of this field',\n    element: field,\n    feel: 'required',\n    getValue,\n    id,\n    label: 'Target value',\n    setValue,\n    variables\n  });\n}\nfunction ExpressionFieldComputeOn(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n  const getValue = () => field.computeOn || '';\n  const setValue = value => {\n    editField(field, ['computeOn'], value);\n  };\n  const getOptions = () => [{\n    value: 'change',\n    label: 'Value changes'\n  }, {\n    value: 'presubmit',\n    label: 'Form submission'\n  }];\n  return SelectEntry({\n    id,\n    label: 'Compute on',\n    getValue,\n    setValue,\n    getOptions\n  });\n}\n\nfunction NumberSerializationEntry(props) {\n  const {\n    editField,\n    field\n  } = props;\n  const entries = [];\n  entries.push({\n    id: 'serialize-to-string',\n    component: SerializeToString,\n    isEdited: isEdited$8,\n    editField,\n    field,\n    isDefaultVisible: field => field.type === 'number'\n  });\n  return entries;\n}\nfunction SerializeToString(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n  const {\n    defaultValue\n  } = field;\n  const path = ['serializeToString'];\n  const getValue = () => {\n    return (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, path, '');\n  };\n  const setValue = value => {\n    // Whenever changing the formatting, make sure to change the default value type along with it\n    if (defaultValue || defaultValue === 0) {\n      editField(field, ['defaultValue'], value ? (0,big_js__WEBPACK_IMPORTED_MODULE_15__[\"default\"])(defaultValue).toFixed() : Number(defaultValue));\n    }\n    return editField(field, path, value);\n  };\n  return CheckboxEntry({\n    element: field,\n    getValue,\n    id,\n    label: 'Output as string',\n    description: 'Allows arbitrary precision values',\n    setValue\n  });\n}\n\nfunction DateTimeEntry(props) {\n  const {\n    editField,\n    field\n  } = props;\n  const entries = [{\n    id: 'subtype',\n    component: DateTimeSubtypeSelect,\n    isEdited: isEdited$3,\n    editField,\n    field,\n    isDefaultVisible: field => field.type === 'datetime'\n  }];\n  entries.push({\n    id: 'use24h',\n    component: Use24h,\n    isEdited: isEdited$8,\n    editField,\n    field,\n    isDefaultVisible: field => field.type === 'datetime' && (field.subtype === _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.DATETIME_SUBTYPES.TIME || field.subtype === _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.DATETIME_SUBTYPES.DATETIME)\n  });\n  return entries;\n}\nfunction DateTimeSubtypeSelect(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n  const getValue = e => (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.DATETIME_SUBTYPE_PATH);\n  const clearTimeConfig = () => {\n    const timeConfigPaths = [_bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.TIME_LABEL_PATH, _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.TIME_USE24H_PATH, _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.TIME_INTERVAL_PATH, _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.TIME_SERIALISING_FORMAT_PATH];\n    for (const path of timeConfigPaths) {\n      editField(field, path, undefined);\n    }\n  };\n  const initTimeConfig = () => {\n    editField(field, _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.TIME_LABEL_PATH, 'Time');\n    editField(field, _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.TIME_SERIALISING_FORMAT_PATH, _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.TIME_SERIALISING_FORMATS.UTC_OFFSET);\n    editField(field, _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.TIME_INTERVAL_PATH, 15);\n  };\n  const clearDateConfig = () => {\n    const dateConfigPaths = [_bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.DATE_LABEL_PATH, _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.DATE_DISALLOW_PAST_PATH];\n    for (const path of dateConfigPaths) {\n      editField(field, path, undefined);\n    }\n  };\n  const initDateConfig = () => {\n    editField(field, _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.DATE_LABEL_PATH, 'Date');\n  };\n  const setValue = value => {\n    const oldValue = getValue();\n    if (oldValue === value) return;\n    if (value === _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.DATETIME_SUBTYPES.DATE) {\n      clearTimeConfig();\n      oldValue === _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.DATETIME_SUBTYPES.TIME && initDateConfig();\n    } else if (value === _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.DATETIME_SUBTYPES.TIME) {\n      clearDateConfig();\n      oldValue === _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.DATETIME_SUBTYPES.DATE && initTimeConfig();\n    } else if (value === _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.DATETIME_SUBTYPES.DATETIME) {\n      oldValue === _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.DATETIME_SUBTYPES.DATE && initTimeConfig();\n      oldValue === _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.DATETIME_SUBTYPES.TIME && initDateConfig();\n    }\n    return editField(field, _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.DATETIME_SUBTYPE_PATH, value);\n  };\n  const getDatetimeSubtypes = () => {\n    return Object.values(_bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.DATETIME_SUBTYPES).map(subtype => ({\n      label: _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.DATETIME_SUBTYPES_LABELS[subtype],\n      value: subtype\n    }));\n  };\n  return SelectEntry({\n    label: 'Subtype',\n    element: field,\n    getOptions: getDatetimeSubtypes,\n    getValue,\n    id,\n    setValue\n  });\n}\nfunction Use24h(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n  const path = _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.TIME_USE24H_PATH;\n  const getValue = () => {\n    return (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, path, '');\n  };\n  const setValue = value => {\n    return editField(field, path, value);\n  };\n  return CheckboxEntry({\n    element: field,\n    getValue,\n    id,\n    label: 'Use 24h',\n    setValue\n  });\n}\n\nconst isTimeIntervalEdited = isEditedFromDefaultFactory('15');\nfunction DateTimeConstraintsEntry(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n  function isDefaultVisible(subtypes) {\n    return field => {\n      if (field.type !== 'datetime') {\n        return false;\n      }\n      return subtypes.includes(field.subtype);\n    };\n  }\n  const entries = [];\n  entries.push({\n    id: id + '-timeInterval',\n    component: TimeIntervalSelect,\n    isEdited: isTimeIntervalEdited,\n    editField,\n    field,\n    isDefaultVisible: isDefaultVisible([_bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.DATETIME_SUBTYPES.TIME, _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.DATETIME_SUBTYPES.DATETIME])\n  });\n  entries.push({\n    id: id + '-disallowPassedDates',\n    component: DisallowPassedDates,\n    isEdited: isEdited$8,\n    editField,\n    field,\n    isDefaultVisible: isDefaultVisible([_bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.DATETIME_SUBTYPES.DATE, _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.DATETIME_SUBTYPES.DATETIME])\n  });\n  return entries;\n}\nfunction DisallowPassedDates(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n  const path = _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.DATE_DISALLOW_PAST_PATH;\n  const getValue = () => {\n    return (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, path, '');\n  };\n  const setValue = value => {\n    return editField(field, path, value);\n  };\n  return CheckboxEntry({\n    element: field,\n    getValue,\n    id,\n    label: 'Disallow past dates',\n    setValue\n  });\n}\nfunction TimeIntervalSelect(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n  const timeIntervals = [1, 5, 10, 15, 30, 60];\n  const getValue = e => (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.TIME_INTERVAL_PATH);\n  const setValue = value => editField(field, _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.TIME_INTERVAL_PATH, parseInt(value));\n  const getTimeIntervals = () => {\n    return timeIntervals.map(timeInterval => ({\n      label: timeInterval === 60 ? '1h' : timeInterval + 'm',\n      value: timeInterval\n    }));\n  };\n  return SelectEntry({\n    label: 'Time interval',\n    element: field,\n    getOptions: getTimeIntervals,\n    getValue,\n    id,\n    setValue\n  });\n}\n\nconst isTimeFormatEdited = isEditedFromDefaultFactory(_bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.TIME_SERIALISING_FORMATS.UTC_OFFSET);\nfunction DateTimeFormatEntry(props) {\n  const {\n    editField,\n    field\n  } = props;\n  const entries = [];\n  entries.push({\n    id: 'time-format',\n    component: TimeFormatSelect,\n    isEdited: isTimeFormatEdited,\n    editField,\n    field,\n    isDefaultVisible: field => field.type === 'datetime' && (field.subtype === _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.DATETIME_SUBTYPES.TIME || field.subtype === _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.DATETIME_SUBTYPES.DATETIME)\n  });\n  return entries;\n}\nfunction TimeFormatSelect(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n  const getValue = e => (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.TIME_SERIALISING_FORMAT_PATH);\n  const setValue = value => editField(field, _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.TIME_SERIALISING_FORMAT_PATH, value);\n  const getTimeSerialisingFormats = () => {\n    return Object.values(_bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.TIME_SERIALISING_FORMATS).map(format => ({\n      label: _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.TIME_SERIALISINGFORMAT_LABELS[format],\n      value: format\n    }));\n  };\n  return SelectEntry({\n    label: 'Time format',\n    element: field,\n    getOptions: getTimeSerialisingFormats,\n    getValue,\n    id,\n    setValue\n  });\n}\n\nfunction SelectEntries(props) {\n  const entries = [simpleBoolEntryFactory({\n    id: 'searchable',\n    path: ['searchable'],\n    label: 'Searchable',\n    props,\n    isDefaultVisible: field => field.type === 'select'\n  })];\n  return entries;\n}\n\nfunction ValueEntry(props) {\n  const {\n    editField,\n    field,\n    idPrefix,\n    index,\n    validateFactory\n  } = props;\n  const entries = [{\n    component: Label$1,\n    editField,\n    field,\n    id: idPrefix + '-label',\n    idPrefix,\n    index,\n    validateFactory\n  }, {\n    component: Value$1,\n    editField,\n    field,\n    id: idPrefix + '-value',\n    idPrefix,\n    index,\n    validateFactory\n  }];\n  return entries;\n}\nfunction Label$1(props) {\n  const {\n    editField,\n    field,\n    id,\n    index,\n    validateFactory\n  } = props;\n  const debounce = useService('debounce');\n  const setValue = (value, error) => {\n    if (error) {\n      return;\n    }\n    const values = (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, ['values']);\n    return editField(field, 'values', (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.set)(values, [index, 'label'], value));\n  };\n  const getValue = () => {\n    return (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, ['values', index, 'label']);\n  };\n  const validate = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => validateFactory((0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, ['values', index, 'label']), entry => entry.label), [field, index, validateFactory]);\n  return TextfieldEntry({\n    debounce,\n    element: field,\n    getValue,\n    id,\n    label: 'Label',\n    setValue,\n    validate\n  });\n}\nfunction Value$1(props) {\n  const {\n    editField,\n    field,\n    id,\n    index,\n    validateFactory\n  } = props;\n  const debounce = useService('debounce');\n  const setValue = (value, error) => {\n    if (error) {\n      return;\n    }\n    const {\n      defaultValue\n    } = field;\n    const values = (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, ['values']);\n    const previousValue = (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, ['values', index, 'value']);\n    if (!(0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isNil)(defaultValue) && defaultValue === previousValue) {\n      (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.set)(field, ['defaultValue'], value);\n    }\n    return editField(field, 'values', (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.set)(values, [index, 'value'], value));\n  };\n  const getValue = () => {\n    return (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, ['values', index, 'value']);\n  };\n  const validate = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => validateFactory((0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, ['values', index, 'value']), entry => entry.value), [field, index, validateFactory]);\n  return TextfieldEntry({\n    debounce,\n    element: field,\n    getValue,\n    id,\n    label: 'Value',\n    setValue,\n    validate\n  });\n}\n\nfunction CustomValueEntry(props) {\n  const {\n    editField,\n    field,\n    idPrefix,\n    index,\n    validateFactory\n  } = props;\n  const entries = [{\n    component: Key$1,\n    editField,\n    field,\n    id: idPrefix + '-key',\n    idPrefix,\n    index,\n    validateFactory\n  }, {\n    component: Value,\n    editField,\n    field,\n    id: idPrefix + '-value',\n    idPrefix,\n    index,\n    validateFactory\n  }];\n  return entries;\n}\nfunction Key$1(props) {\n  const {\n    editField,\n    field,\n    id,\n    index,\n    validateFactory\n  } = props;\n  const debounce = useService('debounce');\n  const setValue = (value, error) => {\n    if (error) {\n      return;\n    }\n    const properties = (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, ['properties']);\n    const key = Object.keys(properties)[index];\n    return editField(field, 'properties', updateKey(properties, key, value));\n  };\n  const getValue = () => {\n    return Object.keys((0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, ['properties']))[index];\n  };\n  const validate = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => validateFactory(Object.keys((0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, ['properties']))[index]), [validateFactory, field, index]);\n  return TextfieldEntry({\n    debounce,\n    element: field,\n    getValue,\n    id,\n    label: 'Key',\n    setValue,\n    validate\n  });\n}\nfunction Value(props) {\n  const {\n    editField,\n    field,\n    id,\n    index,\n    validateFactory\n  } = props;\n  const debounce = useService('debounce');\n  const setValue = value => {\n    const properties = (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, ['properties']);\n    const key = Object.keys(properties)[index];\n    editField(field, 'properties', updateValue(properties, key, value));\n  };\n  const getValue = () => {\n    const properties = (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, ['properties']);\n    const key = Object.keys(properties)[index];\n    return (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, ['properties', key]);\n  };\n  return TextfieldEntry({\n    debounce,\n    element: field,\n    getValue,\n    id,\n    label: 'Value',\n    setValue,\n    validate: validateFactory(getValue())\n  });\n}\n\n// helpers //////////\n\n/**\n * Returns copy of object with updated value.\n *\n * @param {Object} properties\n * @param {string} key\n * @param {string} value\n *\n * @returns {Object}\n */\nfunction updateValue(properties, key, value) {\n  return {\n    ...properties,\n    [key]: value\n  };\n}\n\n/**\n * Returns copy of object with updated key.\n *\n * @param {Object} properties\n * @param {string} oldKey\n * @param {string} newKey\n *\n * @returns {Object}\n */\nfunction updateKey(properties, oldKey, newKey) {\n  return Object.entries(properties).reduce((newProperties, entry) => {\n    const [key, value] = entry;\n    return {\n      ...newProperties,\n      [key === oldKey ? newKey : key]: value\n    };\n  }, {});\n}\n\nfunction AutoFocusSelectEntry(props) {\n  const {\n    autoFocusEntry,\n    element,\n    getValue\n  } = props;\n  const value = getValue(element);\n  const prevValue = usePrevious(value);\n  const eventBus = useService('eventBus');\n\n  // auto focus specifc other entry when selected value changed\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    if (autoFocusEntry && prevValue && value !== prevValue) {\n      // @Note(pinussilvestrus): There is an issue in the properties\n      // panel so we have to wait a bit before showing the entry.\n      // Cf. https://github.com/camunda/linting/blob/4f5328e2722f73ae60ae584c5f576eaec3999cb2/lib/modeler/Linting.js#L37\n      setTimeout(() => {\n        eventBus.fire('propertiesPanel.showEntry', {\n          id: autoFocusEntry\n        });\n      });\n    }\n  }, [value, autoFocusEntry, prevValue, eventBus]);\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(SelectEntry, {\n    ...props\n  });\n}\n\nconst isOptionsSourceEdited = isEditedFromDefaultFactory(_bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.OPTIONS_SOURCES.STATIC);\nfunction OptionsSourceSelectEntry(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n  return [{\n    id: id + '-select',\n    component: ValuesSourceSelect,\n    isEdited: isOptionsSourceEdited,\n    editField,\n    field\n  }];\n}\nfunction ValuesSourceSelect(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n  const getValue = _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.getOptionsSource;\n  const setValue = value => {\n    let newField = field;\n    const newProperties = {};\n    newProperties[_bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.OPTIONS_SOURCES_PATHS[value]] = _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.OPTIONS_SOURCES_DEFAULTS[value];\n    newField = editField(field, newProperties);\n    return newField;\n  };\n  const getOptionsSourceOptions = () => {\n    return Object.values(_bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.OPTIONS_SOURCES).map(valueSource => ({\n      label: _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.OPTIONS_SOURCES_LABELS[valueSource],\n      value: valueSource\n    }));\n  };\n  return AutoFocusSelectEntry({\n    autoFocusEntry: getAutoFocusEntryId$1(field),\n    label: 'Type',\n    element: field,\n    getOptions: getOptionsSourceOptions,\n    getValue,\n    id,\n    setValue\n  });\n}\n\n// helpers //////////\n\nfunction getAutoFocusEntryId$1(field) {\n  const valuesSource = (0,_bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.getOptionsSource)(field);\n  if (valuesSource === _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.OPTIONS_SOURCES.EXPRESSION) {\n    return 'optionsExpression-expression';\n  } else if (valuesSource === _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.OPTIONS_SOURCES.INPUT) {\n    return 'dynamicOptions-key';\n  } else if (valuesSource === _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.OPTIONS_SOURCES.STATIC) {\n    return 'staticOptions-0-label';\n  }\n  return null;\n}\n\nfunction InputKeyOptionsSourceEntry(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n  return [{\n    id: id + '-key',\n    component: InputValuesKey,\n    isEdited: isEdited,\n    editField,\n    field\n  }];\n}\nfunction InputValuesKey(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n  const debounce = useService('debounce');\n  const path = _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.OPTIONS_SOURCES_PATHS[_bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.OPTIONS_SOURCES.INPUT];\n  const schema = '[\\n  {\\n    \"label\": \"dollar\",\\n    \"value\": \"$\"\\n  }\\n]';\n  const tooltip = (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n    children: [\"The input property may be an array of simple values or alternatively follow this schema:\", (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"pre\", {\n      children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"code\", {\n        children: schema\n      })\n    })]\n  });\n  const getValue = () => (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, path, '');\n  const setValue = (value, error) => {\n    if (error) {\n      return;\n    }\n    editField(field, path, value || '');\n  };\n  return TextfieldEntry({\n    debounce,\n    description: 'Define which input property to populate the values from',\n    tooltip,\n    element: field,\n    getValue,\n    id,\n    label: 'Input values key',\n    setValue,\n    validate: validate$6\n  });\n}\n\n// helpers //////////\n\n/**\n * @param {string|void} value\n * @returns {string|null}\n */\nconst validate$6 = value => {\n  if (typeof value !== 'string' || value.length === 0) {\n    return 'Must not be empty.';\n  }\n  if (/\\s/.test(value)) {\n    return 'Must not contain spaces.';\n  }\n  return null;\n};\n\nfunction StaticOptionsSourceEntry(props) {\n  const {\n    editField,\n    field,\n    id: idPrefix\n  } = props;\n  const {\n    values\n  } = field;\n  const addEntry = e => {\n    e.stopPropagation();\n    const index = values.length + 1;\n    const entry = getIndexedEntry(index, values);\n    editField(field, _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.OPTIONS_SOURCES_PATHS[_bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.OPTIONS_SOURCES.STATIC], arrayAdd(values, values.length, entry));\n  };\n  const removeEntry = entry => {\n    if (field.defaultValue === entry.value) {\n      editField(field, {\n        values: (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.without)(values, entry),\n        defaultValue: undefined\n      });\n    } else {\n      editField(field, _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.OPTIONS_SOURCES_PATHS[_bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.OPTIONS_SOURCES.STATIC], (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.without)(values, entry));\n    }\n  };\n  const validateFactory = (key, getValue) => {\n    return value => {\n      if (value === key) {\n        return;\n      }\n      if (typeof value !== 'string' || value.length === 0) {\n        return 'Must not be empty.';\n      }\n      const isValueAssigned = values.find(entry => getValue(entry) === value);\n      if (isValueAssigned) {\n        return 'Must be unique.';\n      }\n    };\n  };\n  const items = values.map((entry, index) => {\n    const id = idPrefix + '-' + index;\n    return {\n      id,\n      label: entry.label,\n      entries: ValueEntry({\n        editField,\n        field,\n        idPrefix: id,\n        index,\n        validateFactory\n      }),\n      autoFocusEntry: id + '-label',\n      remove: () => removeEntry(entry)\n    };\n  });\n  return {\n    items,\n    add: addEntry\n  };\n}\n\n// helper\n\nfunction getIndexedEntry(index, values) {\n  const entry = {\n    label: 'Value',\n    value: 'value'\n  };\n  while (labelOrValueIsAlreadyAssignedForIndex(index, values)) {\n    index++;\n  }\n  if (index > 1) {\n    entry.label += ` ${index}`;\n    entry.value += `${index}`;\n  }\n  return entry;\n}\nfunction labelOrValueIsAlreadyAssignedForIndex(index, values) {\n  return values.some(existingEntry => existingEntry.label === `Value ${index}` || existingEntry.value === `value${index}`);\n}\n\nfunction AdornerEntry(props) {\n  const {\n    editField,\n    field\n  } = props;\n  const entries = [];\n  const onChange = key => {\n    return value => {\n      const appearance = (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, ['appearance'], {});\n      editField(field, ['appearance'], (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.set)(appearance, [key], value));\n    };\n  };\n  const getValue = key => {\n    return () => {\n      return (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, ['appearance', key]);\n    };\n  };\n  entries.push({\n    id: 'prefix-adorner',\n    component: PrefixAdorner,\n    isEdited: isEdited$5,\n    editField,\n    field,\n    onChange,\n    getValue,\n    isDefaultVisible: field => ['number', 'textfield'].includes(field.type)\n  });\n  entries.push({\n    id: 'suffix-adorner',\n    component: SuffixAdorner,\n    isEdited: isEdited$5,\n    editField,\n    field,\n    onChange,\n    getValue,\n    isDefaultVisible: field => ['number', 'textfield'].includes(field.type)\n  });\n  return entries;\n}\nfunction PrefixAdorner(props) {\n  const {\n    field,\n    id,\n    onChange,\n    getValue\n  } = props;\n  const debounce = useService('debounce');\n  const variables = useVariables().map(name => ({\n    name\n  }));\n  return FeelTemplatingEntry({\n    debounce,\n    element: field,\n    feel: 'optional',\n    getValue: getValue('prefixAdorner'),\n    id,\n    label: 'Prefix',\n    setValue: onChange('prefixAdorner'),\n    singleLine: true,\n    variables\n  });\n}\nfunction SuffixAdorner(props) {\n  const {\n    field,\n    id,\n    onChange,\n    getValue\n  } = props;\n  const debounce = useService('debounce');\n  const variables = useVariables().map(name => ({\n    name\n  }));\n  return FeelTemplatingEntry({\n    debounce,\n    element: field,\n    getValue: getValue('suffixAdorner'),\n    id,\n    label: 'Suffix',\n    setValue: onChange('suffixAdorner'),\n    singleLine: true,\n    variables\n  });\n}\n\nfunction ReadonlyEntry(props) {\n  const {\n    editField,\n    field\n  } = props;\n  const {\n    disabled\n  } = field;\n  const entries = [];\n  if (!disabled) {\n    entries.push({\n      id: 'readonly',\n      component: Readonly,\n      editField: editField,\n      field: field,\n      isEdited: isEdited$5,\n      isDefaultVisible: field => INPUTS.includes(field.type)\n    });\n  }\n  return entries;\n}\nfunction Readonly(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n  const debounce = useService('debounce');\n  const variables = useVariables().map(name => ({\n    name\n  }));\n  const path = ['readonly'];\n  const getValue = () => {\n    return (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, path, '');\n  };\n  const setValue = value => {\n    return editField(field, path, value || false);\n  };\n  return FeelToggleSwitchEntry({\n    debounce,\n    element: field,\n    feel: 'optional',\n    getValue,\n    id,\n    label: 'Read only',\n    tooltip: 'Make this field read-only when it cannot be edited by the end-user, but its content is important for them to see. Its data will still be submitted.',\n    setValue,\n    variables\n  });\n}\n\nfunction LayouterAppearanceEntry(props) {\n  const {\n    field\n  } = props;\n  if (!['group', 'dynamiclist'].includes(field.type)) {\n    return [];\n  }\n  const entries = [simpleSelectEntryFactory({\n    id: 'verticalAlignment',\n    path: ['verticalAlignment'],\n    label: 'Vertical alignment',\n    optionsArray: [{\n      value: 'start',\n      label: 'Top'\n    }, {\n      value: 'center',\n      label: 'Center'\n    }, {\n      value: 'end',\n      label: 'Bottom'\n    }],\n    props\n  })];\n  return entries;\n}\n\nfunction RepeatableEntry(props) {\n  const {\n    field,\n    getService\n  } = props;\n  const {\n    type\n  } = field;\n  const formFieldDefinition = getService('formFields').get(type);\n  if (!formFieldDefinition || !formFieldDefinition.config.repeatable) {\n    return [];\n  }\n  const entries = [simpleRangeIntegerEntryFactory({\n    id: 'defaultRepetitions',\n    path: ['defaultRepetitions'],\n    label: 'Default number of items',\n    min: 1,\n    max: 100,\n    props\n  }), simpleBoolEntryFactory({\n    id: 'allowAddRemove',\n    path: ['allowAddRemove'],\n    label: 'Allow add/delete items',\n    props\n  }), simpleBoolEntryFactory({\n    id: 'disableCollapse',\n    path: ['disableCollapse'],\n    label: 'Disable collapse',\n    props\n  })];\n  if (!field.disableCollapse) {\n    const nonCollapseItemsEntry = simpleRangeIntegerEntryFactory({\n      id: 'nonCollapsedItems',\n      path: ['nonCollapsedItems'],\n      label: 'Number of non-collapsing items',\n      min: 1,\n      props\n    });\n    entries.push(nonCollapseItemsEntry);\n  }\n  return entries;\n}\n\nfunction ConditionEntry(props) {\n  const {\n    editField,\n    field\n  } = props;\n  return [{\n    id: 'conditional-hide',\n    component: Condition,\n    editField: editField,\n    field: field,\n    isEdited: isEdited$5\n  }];\n}\nfunction Condition(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n  const debounce = useService('debounce');\n  const variables = useVariables().map(name => ({\n    name\n  }));\n  const path = ['conditional', 'hide'];\n  const getValue = () => {\n    return (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, path, '');\n  };\n  const setValue = value => {\n    if (!value) {\n      return editField(field, 'conditional', undefined);\n    }\n    return editField(field, 'conditional', {\n      hide: value\n    });\n  };\n  let label = 'Hide if';\n  let description = 'Condition under which the field is hidden';\n\n  // special case for expression fields which do not render\n  if (field.type === 'expression') {\n    label = 'Deactivate if';\n    description = 'Condition under which the field is deactivated';\n  }\n  return FeelEntry({\n    debounce,\n    description,\n    element: field,\n    feel: 'required',\n    getValue,\n    id,\n    label,\n    setValue,\n    variables\n  });\n}\n\nfunction OptionsExpressionEntry(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n  return [{\n    id: id + '-expression',\n    component: OptionsExpression,\n    isEdited: isEdited$5,\n    editField,\n    field\n  }];\n}\nfunction OptionsExpression(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n  const debounce = useService('debounce');\n  const variables = useVariables().map(name => ({\n    name\n  }));\n  const path = _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.OPTIONS_SOURCES_PATHS[_bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.OPTIONS_SOURCES.EXPRESSION];\n  const schema = '[\\n  {\\n    \"label\": \"dollar\",\\n    \"value\": \"$\"\\n  }\\n]';\n  const tooltip = (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n    children: [\"The expression may result in an array of simple values or alternatively follow this schema:\", (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"pre\", {\n      children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"code\", {\n        children: schema\n      })\n    })]\n  });\n  const getValue = () => (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, path, '');\n  const setValue = value => editField(field, path, value || '');\n  return FeelEntry({\n    debounce,\n    description: 'Define an expression to populate the options from.',\n    tooltip,\n    element: field,\n    feel: 'required',\n    getValue,\n    id,\n    label: 'Options expression',\n    setValue,\n    variables\n  });\n}\n\nfunction TableDataSourceEntry(props) {\n  const {\n    editField,\n    field\n  } = props;\n  const entries = [];\n  entries.push({\n    id: 'dataSource',\n    component: Source,\n    editField: editField,\n    field: field,\n    isEdited: isEdited$5,\n    isDefaultVisible: field => field.type === 'table'\n  });\n  return entries;\n}\nfunction Source(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n  const debounce = useService('debounce');\n  const variables = useVariables().map(name => ({\n    name\n  }));\n  const path = ['dataSource'];\n  const getValue = () => {\n    return (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, path, field.id);\n  };\n  const setValue = (value, error) => {\n    if (error) {\n      return;\n    }\n    editField(field, path, value);\n  };\n  return FeelTemplatingEntry({\n    debounce,\n    description: 'Specify the source from which to populate the table',\n    element: field,\n    feel: 'required',\n    getValue,\n    id,\n    label: 'Data source',\n    tooltip: 'Enter a form input variable that contains the data for the table or define an expression to populate the data dynamically.',\n    setValue,\n    singleLine: true,\n    variables,\n    validate: validate$5\n  });\n}\n\n// helper ////////////////\n\n/**\n * @param {string|void} value\n * @returns {string|null}\n */\nconst validate$5 = value => {\n  if (!(0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isString)(value) || value.length === 0) {\n    return 'Must not be empty.';\n  }\n  if (value.startsWith('=')) {\n    return null;\n  }\n  if (!isValidDotPath(value)) {\n    return 'Must be a variable or a dot separated path.';\n  }\n  if (hasIntegerPathSegment(value)) {\n    return 'Must not contain numerical path segments.';\n  }\n  return null;\n};\n\nfunction PaginationEntry(props) {\n  const {\n    editField,\n    field\n  } = props;\n  const entries = [];\n  entries.push({\n    id: 'pagination',\n    component: Pagination,\n    editField: editField,\n    field: field,\n    isEdited: isEdited$7,\n    isDefaultVisible: field => field.type === 'table'\n  });\n  return entries;\n}\nfunction Pagination(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n  const defaultRowCount = 10;\n  const path = ['rowCount'];\n  const getValue = () => {\n    return (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isNumber)((0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, path));\n  };\n\n  /**\n   * @param {boolean} value\n   */\n  const setValue = value => {\n    value ? editField(field, path, defaultRowCount) : editField(field, path, undefined);\n  };\n  return ToggleSwitchEntry({\n    element: field,\n    getValue,\n    id,\n    label: 'Pagination',\n    inline: true,\n    setValue\n  });\n}\n\nconst path$2 = ['rowCount'];\nfunction RowCountEntry(props) {\n  const {\n    editField,\n    field\n  } = props;\n  const entries = [];\n  entries.push({\n    id: 'rowCount',\n    component: RowCount,\n    isEdited: isEdited$6,\n    editField,\n    field,\n    isDefaultVisible: field => field.type === 'table' && (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isNumber)((0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, path$2))\n  });\n  return entries;\n}\nfunction RowCount(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n  const debounce = useService('debounce');\n  const getValue = () => (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, path$2);\n\n  /**\n   * @param {number|void} value\n   * @param {string|null} error\n   * @returns {void}\n   */\n  const setValue = (value, error) => {\n    if (error) {\n      return;\n    }\n    editField(field, path$2, value);\n  };\n  return NumberFieldEntry({\n    debounce,\n    label: 'Number of rows per page',\n    element: field,\n    id,\n    getValue,\n    setValue,\n    validate: validate$4\n  });\n}\n\n// helpers //////////\n\n/**\n * @param {string|void} value\n * @returns {string|null}\n */\nconst validate$4 = value => {\n  if ((0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isNil)(value)) {\n    return null;\n  }\n  if (!(0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isNumber)(value)) {\n    return 'Must be number';\n  }\n  if (!Number.isInteger(value)) {\n    return 'Should be an integer.';\n  }\n  if (value < 1) {\n    return 'Should be greater than zero.';\n  }\n  return null;\n};\n\nconst OPTIONS = {\n  static: {\n    label: 'List of items',\n    value: 'static'\n  },\n  expression: {\n    label: 'Expression',\n    value: 'expression'\n  }\n};\nconst SELECT_OPTIONS = Object.values(OPTIONS);\nconst COLUMNS_PATH = ['columns'];\nconst COLUMNS_EXPRESSION_PATH = ['columnsExpression'];\nconst isHeadersSourceEdited = isEditedFromDefaultFactory(OPTIONS.static.value);\nfunction HeadersSourceSelectEntry(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n  return [{\n    id: id + '-select',\n    component: HeadersSourceSelect,\n    isEdited: isHeadersSourceEdited,\n    editField,\n    field\n  }];\n}\nfunction HeadersSourceSelect(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n\n  /**\n   * @returns {string|void}\n   */\n  const getValue = () => {\n    const columns = (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, COLUMNS_PATH);\n    const columnsExpression = (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, COLUMNS_EXPRESSION_PATH);\n    if ((0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isString)(columnsExpression)) {\n      return OPTIONS.expression.value;\n    }\n    if ((0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isArray)(columns)) {\n      return OPTIONS.static.value;\n    }\n  };\n\n  /**\n   * @param {string|void} value\n   */\n  const setValue = value => {\n    switch (value) {\n      case OPTIONS.static.value:\n        editField(field, {\n          columns: [{\n            label: 'Column',\n            key: 'inputVariable'\n          }]\n        });\n        break;\n      case OPTIONS.expression.value:\n        editField(field, {\n          columnsExpression: '='\n        });\n        break;\n    }\n  };\n  const getValuesSourceOptions = () => {\n    return SELECT_OPTIONS;\n  };\n  return AutoFocusSelectEntry({\n    autoFocusEntry: getAutoFocusEntryId(field),\n    label: 'Type',\n    element: field,\n    getOptions: getValuesSourceOptions,\n    getValue,\n    id,\n    setValue\n  });\n}\n\n// helpers //////////\n\nfunction getAutoFocusEntryId(field) {\n  const columns = (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, COLUMNS_PATH);\n  const columnsExpression = (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, COLUMNS_EXPRESSION_PATH);\n  if ((0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isString)(columnsExpression)) {\n    return `${field.id}-columnsExpression`;\n  }\n  if ((0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isArray)(columns)) {\n    return `${field.id}-columns-0-label`;\n  }\n  return null;\n}\n\nconst PATH = ['columnsExpression'];\nfunction ColumnsExpressionEntry(props) {\n  const {\n    editField,\n    field\n  } = props;\n  const entries = [];\n  entries.push({\n    id: `${field.id}-columnsExpression`,\n    component: ColumnsExpression,\n    editField: editField,\n    field: field,\n    isEdited: isEdited$5,\n    isDefaultVisible: field => field.type === 'table' && (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isString)((0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, PATH))\n  });\n  return entries;\n}\nfunction ColumnsExpression(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n  const debounce = useService('debounce');\n  const variables = useVariables().map(name => ({\n    name\n  }));\n  const getValue = () => {\n    return (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, PATH);\n  };\n\n  /**\n   * @param {string|void} value\n   * @param {string|void} error\n   * @returns {void}\n   */\n  const setValue = (value, error) => {\n    if (error) {\n      return;\n    }\n    editField(field, PATH, value);\n  };\n  const schema = '[\\n  {\\n    \"key\": \"column_1\",\\n    \"label\": \"Column 1\"\\n  }\\n]';\n  const tooltip = (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n    children: [\"The expression may result in an array of simple values or alternatively follow this schema:\", (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"pre\", {\n      children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"code\", {\n        children: schema\n      })\n    })]\n  });\n  return FeelTemplatingEntry({\n    debounce,\n    description: 'Specify an expression to populate column items',\n    element: field,\n    feel: 'required',\n    getValue,\n    id,\n    label: 'Expression',\n    tooltip,\n    setValue,\n    singleLine: true,\n    variables,\n    validate: validate$3\n  });\n}\n\n// helpers //////////\n\n/**\n * @param {string|void} value\n * @returns {string|null}\n */\nconst validate$3 = value => {\n  if (!(0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isString)(value) || value.length === 0 || value === '=') {\n    return 'Must not be empty.';\n  }\n  return null;\n};\n\nconst path$1 = 'columns';\nconst labelPath = 'label';\nconst keyPath = 'key';\nfunction ColumnEntry(props) {\n  const {\n    editField,\n    field,\n    idPrefix,\n    index\n  } = props;\n  const entries = [{\n    component: Label,\n    editField,\n    field,\n    id: idPrefix + '-label',\n    idPrefix,\n    index\n  }, {\n    component: Key,\n    editField,\n    field,\n    id: idPrefix + '-key',\n    idPrefix,\n    index\n  }];\n  return entries;\n}\nfunction Label(props) {\n  const {\n    editField,\n    field,\n    id,\n    index\n  } = props;\n  const debounce = useService('debounce');\n\n  /**\n   * @param {string|void} value\n   * @param {string|void} error\n   * @returns {void}\n   */\n  const setValue = (value, error) => {\n    if (error) {\n      return;\n    }\n    const columns = (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, [path$1]);\n    editField(field, path$1, (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.set)(columns, [index, labelPath], value));\n  };\n  const getValue = () => {\n    return (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, [path$1, index, labelPath]);\n  };\n  return TextfieldEntry({\n    debounce,\n    element: field,\n    getValue,\n    id,\n    label: 'Label',\n    setValue\n  });\n}\nfunction Key(props) {\n  const {\n    editField,\n    field,\n    id,\n    index\n  } = props;\n  const debounce = useService('debounce');\n\n  /**\n   * @param {string|void} value\n   * @param {string|void} error\n   * @returns {void}\n   */\n  const setValue = (value, error) => {\n    if (error) {\n      return;\n    }\n    const columns = (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, [path$1]);\n    editField(field, path$1, (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.set)(columns, [index, keyPath], value));\n  };\n  const getValue = () => {\n    return (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, [path$1, index, keyPath]);\n  };\n  return TextfieldEntry({\n    debounce,\n    element: field,\n    getValue,\n    id,\n    label: 'Key',\n    setValue,\n    validate: validate$2\n  });\n}\n\n// helpers //////////////////////\n\n/**\n * @param {string|void} value\n * @returns {string|null}\n */\nfunction validate$2(value) {\n  if (!(0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isString)(value) || value.length === 0) {\n    return 'Must not be empty.';\n  }\n  return null;\n}\n\nconst path = ['columns'];\nfunction StaticColumnsSourceEntry(props) {\n  const {\n    editField,\n    field,\n    id: idPrefix\n  } = props;\n  const {\n    columns\n  } = field;\n  const addEntry = event => {\n    event.stopPropagation();\n    const entry = {\n      label: 'Column',\n      key: 'inputVariable'\n    };\n    editField(field, path, arrayAdd(columns, columns.length, entry));\n  };\n  const removeEntry = entry => {\n    editField(field, path, (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.without)(columns, entry));\n  };\n  const items = columns.map((entry, index) => {\n    const id = `${idPrefix}-${index}`;\n    return {\n      id,\n      label: entry.label || entry.key,\n      entries: ColumnEntry({\n        editField,\n        field,\n        idPrefix: id,\n        index\n      }),\n      autoFocusEntry: `${id}-label`,\n      remove: () => removeEntry(entry)\n    };\n  });\n  return {\n    items,\n    add: addEntry\n  };\n}\n\nfunction VersionTagEntry(props) {\n  const {\n    editField,\n    field\n  } = props;\n  const entries = [];\n  entries.push({\n    id: 'versionTag',\n    component: VersionTag,\n    editField: editField,\n    field: field,\n    isEdited: isEdited,\n    isDefaultVisible: field => field.type === 'default'\n  });\n  return entries;\n}\nfunction VersionTag(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n  const debounce = useService('debounce');\n  const path = ['versionTag'];\n  const getValue = () => {\n    return (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, path, '');\n  };\n  const setValue = (value, error) => {\n    if (error) {\n      return;\n    }\n    return editField(field, path, value);\n  };\n  const tooltip = (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n    children: \"Version tag by which this form can be referenced.\"\n  });\n  return TextfieldEntry({\n    debounce,\n    element: field,\n    getValue,\n    id,\n    label: 'Version tag',\n    setValue,\n    tooltip\n  });\n}\n\nfunction AcceptEntry(props) {\n  const {\n    editField,\n    field\n  } = props;\n  const entries = [];\n  entries.push({\n    id: 'accept',\n    component: Accept,\n    editField: editField,\n    field: field,\n    isEdited: isEdited$5,\n    isDefaultVisible: field => field.type === 'filepicker'\n  });\n  return entries;\n}\nfunction Accept(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n  const debounce = useService('debounce');\n  const variables = useVariables().map(name => ({\n    name\n  }));\n  const path = ['accept'];\n  const getValue = () => {\n    return (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, path, '');\n  };\n  const setValue = value => {\n    return editField(field, path, value);\n  };\n  return FeelTemplatingEntry({\n    debounce,\n    element: field,\n    getValue,\n    id,\n    label: 'Supported file formats',\n    singleLine: true,\n    setValue,\n    variables,\n    description: description$1\n  });\n}\n\n// helpers //////////\n\nconst description$1 = (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.Fragment, {\n  children: [\"A comma-separated list of\", ' ', (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"a\", {\n    href: \"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/file#unique_file_type_specifiers\",\n    target: \"_blank\",\n    rel: \"noreferrer\",\n    children: \"file type specifiers\"\n  })]\n});\n\nfunction MultipleEntry(props) {\n  const {\n    editField,\n    field\n  } = props;\n  const entries = [];\n  entries.push({\n    id: 'multiple',\n    component: Multiple,\n    editField: editField,\n    field: field,\n    isEdited: isEdited$5,\n    isDefaultVisible: field => field.type === 'filepicker'\n  });\n  return entries;\n}\nfunction Multiple(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n  const debounce = useService('debounce');\n  const variables = useVariables().map(name => ({\n    name\n  }));\n  const path = ['multiple'];\n  const getValue = () => {\n    return (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, path, '');\n  };\n  const setValue = value => {\n    return editField(field, path, value);\n  };\n  return FeelToggleSwitchEntry({\n    debounce,\n    element: field,\n    feel: 'optional',\n    getValue,\n    id,\n    label: 'Upload multiple files',\n    inline: true,\n    setValue,\n    variables\n  });\n}\n\nfunction DocumentsDataSourceEntry(props) {\n  const {\n    editField,\n    field\n  } = props;\n  const entries = [];\n  entries.push({\n    id: 'dataSource',\n    component: DocumentsDataSource,\n    editField: editField,\n    field: field,\n    isEdited: isEdited$5,\n    isDefaultVisible: field => field.type === 'documentPreview'\n  });\n  return entries;\n}\nfunction DocumentsDataSource(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n  const debounce = useService('debounce');\n  const variables = useVariables().map(name => ({\n    name\n  }));\n  const path = ['dataSource'];\n  const getValue = () => {\n    return (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, path, '');\n  };\n  const setValue = value => {\n    return editField(field, path, value);\n  };\n  const schema = `[\n  {\n    \"documentId\": \"u123\",\n    \"endpoint\": \"https://api.example.com/documents/u123\",\n    \"metadata\": {\n      \"fileName\": \"Document.pdf\",\n      \"contentType\": \"application/pdf\"\n    }\n  }\n]`;\n  const tooltip = (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n    children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"p\", {\n      children: \"A source is a JSON object containing metadata for a document or an array of documents.\"\n    }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"p\", {\n      children: \"Each entry must include a document ID, name, and MIME type.\"\n    }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"p\", {\n      children: \"Additional details are optional. The expected format is as follows:\"\n    }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"pre\", {\n      children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"code\", {\n        children: schema\n      })\n    }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"p\", {\n      children: \"When using Camunda Tasklist UI, additional document reference attributes are automatically handled. Modifying the document reference may affect the document preview functionality.\"\n    }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"p\", {\n      children: [\"Learn more in our\", ' ', (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"a\", {\n        href: \"https://docs.camunda.io/docs/components/modeler/forms/form-element-library/forms-element-library-document-preview/\",\n        target: \"_blank\",\n        rel: \"noopener noreferrer\",\n        children: \"documentation\"\n      }), \".\"]\n    })]\n  });\n  return FeelTemplatingEntry({\n    debounce,\n    element: field,\n    getValue,\n    id,\n    label: 'Document reference',\n    feel: 'required',\n    singleLine: true,\n    setValue,\n    variables,\n    tooltip,\n    validate: validate$1\n  });\n}\n\n// helpers //////////\n\n/**\n * @param {string|undefined} value\n * @returns {string|null}\n */\nconst validate$1 = value => {\n  if (typeof value !== 'string' || value.length === 0) {\n    return 'The document data source is required.';\n  }\n};\n\nfunction MaxHeightEntry(props) {\n  const {\n    editField,\n    field\n  } = props;\n  const entries = [];\n  entries.push({\n    id: 'maxHeight',\n    component: MaxHeight,\n    editField: editField,\n    field: field,\n    isEdited: isEdited$6,\n    isDefaultVisible: field => field.type === 'documentPreview'\n  });\n  return entries;\n}\nfunction MaxHeight(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n  const debounce = useService('debounce');\n  const path = ['maxHeight'];\n  const getValue = () => {\n    return (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, path, '');\n  };\n  const setValue = value => {\n    return editField(field, path, value);\n  };\n  return NumberFieldEntry({\n    debounce,\n    label: 'Max height of preview container',\n    element: field,\n    id,\n    getValue,\n    setValue,\n    validate,\n    description\n  });\n}\n\n// helpers //////////\n\n/**\n * @param {string|number|undefined} value\n * @returns {string|null}\n */\nconst validate = value => {\n  if (value === undefined || value === '') {\n    return null;\n  }\n  if (typeof value === 'string') {\n    return 'Value must be a number.';\n  }\n  if (!Number.isInteger(value)) {\n    return 'Should be an integer.';\n  }\n  if (value < 1) {\n    return 'Should be greater than zero.';\n  }\n};\nconst description = (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.Fragment, {\n  children: \"Documents with height that exceeds the defined value will be vertically scrollable\"\n});\n\nfunction GeneralGroup(field, editField, getService) {\n  const entries = [...IdEntry({\n    field,\n    editField\n  }), ...VersionTagEntry({\n    field,\n    editField\n  }), ...LabelEntry({\n    field,\n    editField\n  }), ...DescriptionEntry({\n    field,\n    editField\n  }), ...KeyEntry({\n    field,\n    editField,\n    getService\n  }), ...PathEntry({\n    field,\n    editField,\n    getService\n  }), ...RepeatableEntry({\n    field,\n    editField,\n    getService\n  }), ...DefaultValueEntry({\n    field,\n    editField\n  }), ...ActionEntry({\n    field,\n    editField\n  }), ...DateTimeEntry({\n    field,\n    editField\n  }), ...TextEntry({\n    field,\n    editField}), ...HtmlEntry({\n    field,\n    editField}), ...IFrameUrlEntry({\n    field,\n    editField\n  }), ...IFrameHeightEntry({\n    field,\n    editField\n  }), ...HeightEntry({\n    field,\n    editField\n  }), ...NumberEntries({\n    field,\n    editField\n  }), ...ExpressionFieldEntries({\n    field,\n    editField\n  }), ...ImageSourceEntry({\n    field,\n    editField\n  }), ...AltTextEntry({\n    field,\n    editField\n  }), ...SelectEntries({\n    field,\n    editField\n  }), ...AcceptEntry({\n    field,\n    editField\n  }), ...MultipleEntry({\n    field,\n    editField\n  }), ...DisabledEntry({\n    field,\n    editField\n  }), ...ReadonlyEntry({\n    field,\n    editField\n  }), ...TableDataSourceEntry({\n    field,\n    editField\n  }), ...PaginationEntry({\n    field,\n    editField\n  }), ...RowCountEntry({\n    field,\n    editField\n  }), ...DocumentsDataSourceEntry({\n    field,\n    editField\n  })];\n  if (entries.length === 0) {\n    return null;\n  }\n  return {\n    id: 'general',\n    label: 'General',\n    entries\n  };\n}\n\nfunction SerializationGroup(field, editField) {\n  const entries = [...NumberSerializationEntry({\n    field,\n    editField\n  }), ...DateTimeFormatEntry({\n    field,\n    editField\n  })];\n  if (!entries.length) {\n    return null;\n  }\n  return {\n    id: 'serialization',\n    label: 'Serialization',\n    entries\n  };\n}\n\nfunction ConstraintsGroup(field, editField) {\n  const entries = [...DateTimeConstraintsEntry({\n    field,\n    editField\n  })];\n  if (!entries.length) {\n    return null;\n  }\n  return {\n    id: 'constraints',\n    label: 'Constraints',\n    entries\n  };\n}\n\nconst VALIDATION_TYPE_OPTIONS = {\n  custom: {\n    value: '',\n    label: 'Custom'\n  },\n  email: {\n    value: 'email',\n    label: 'Email'\n  },\n  phone: {\n    value: 'phone',\n    label: 'Phone'\n  }\n};\nfunction ValidationGroup(field, editField) {\n  const {\n    type\n  } = field;\n  const validate = (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, ['validate'], {});\n  const isCustomValidation = [undefined, VALIDATION_TYPE_OPTIONS.custom.value].includes(validate.validationType);\n  const hasPattern = !!(0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, ['validate', 'pattern']);\n  const onChange = key => {\n    return value => {\n      const validate = (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, ['validate'], {});\n      editField(field, ['validate'], (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.set)(validate, [key], value));\n    };\n  };\n  const getValue = key => {\n    return () => {\n      return (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, ['validate', key]);\n    };\n  };\n  let entries = [{\n    id: 'required',\n    component: Required,\n    getValue,\n    field,\n    isEdited: isEdited$8,\n    onChange,\n    isDefaultVisible: field => INPUTS.includes(field.type)\n  }];\n  entries.push({\n    id: 'validationType',\n    component: ValidationType,\n    getValue,\n    field,\n    editField,\n    isEdited: isEdited,\n    onChange,\n    isDefaultVisible: field => field.type === 'textfield'\n  });\n  entries.push({\n    id: 'minLength',\n    component: MinLength,\n    getValue,\n    field,\n    isEdited: isEdited$5,\n    onChange,\n    isDefaultVisible: field => INPUTS.includes(field.type) && (type === 'textarea' || type === 'textfield' && isCustomValidation)\n  }, {\n    id: 'maxLength',\n    component: MaxLength,\n    getValue,\n    field,\n    isEdited: isEdited$5,\n    onChange,\n    isDefaultVisible: field => INPUTS.includes(field.type) && (type === 'textarea' || type === 'textfield' && isCustomValidation)\n  });\n  entries.push({\n    id: 'pattern',\n    component: Pattern,\n    getValue,\n    field,\n    isEdited: isEdited,\n    onChange,\n    isDefaultVisible: field => INPUTS.includes(field.type) && type === 'textfield' && isCustomValidation\n  });\n  entries.push({\n    id: 'patternErrorMessage',\n    component: PatternErrorMessage,\n    getValue,\n    field,\n    isEdited: isEdited,\n    onChange,\n    isDefaultVisible: field => INPUTS.includes(field.type) && type === 'textfield' && isCustomValidation && hasPattern\n  });\n  entries.push({\n    id: 'min',\n    component: Min,\n    getValue,\n    field,\n    isEdited: isEdited$5,\n    onChange,\n    isDefaultVisible: field => field.type === 'number'\n  }, {\n    id: 'max',\n    component: Max,\n    getValue,\n    field,\n    isEdited: isEdited$5,\n    onChange,\n    isDefaultVisible: field => field.type === 'number'\n  });\n  return {\n    id: 'validation',\n    label: 'Validation',\n    entries\n  };\n}\nfunction Required(props) {\n  const {\n    field,\n    getValue,\n    id,\n    onChange\n  } = props;\n  return CheckboxEntry({\n    element: field,\n    getValue: getValue('required'),\n    id,\n    label: 'Required',\n    setValue: onChange('required')\n  });\n}\nfunction MinLength(props) {\n  const {\n    field,\n    getValue,\n    id,\n    onChange\n  } = props;\n  const debounce = useService('debounce');\n  const variables = useVariables().map(name => ({\n    name\n  }));\n  return FeelNumberEntry({\n    debounce,\n    element: field,\n    feel: 'optional',\n    getValue: getValue('minLength'),\n    id,\n    label: 'Minimum length',\n    min: 0,\n    setValue: onChange('minLength'),\n    variables\n  });\n}\nfunction MaxLength(props) {\n  const {\n    field,\n    getValue,\n    id,\n    onChange\n  } = props;\n  const debounce = useService('debounce');\n  const variables = useVariables().map(name => ({\n    name\n  }));\n  return FeelNumberEntry({\n    debounce,\n    element: field,\n    feel: 'optional',\n    getValue: getValue('maxLength'),\n    id,\n    label: 'Maximum length',\n    min: 0,\n    setValue: onChange('maxLength'),\n    variables\n  });\n}\nfunction Pattern(props) {\n  const {\n    field,\n    getValue,\n    id,\n    onChange\n  } = props;\n  const debounce = useService('debounce');\n  return TextfieldEntry({\n    debounce,\n    element: field,\n    getValue: getValue('pattern'),\n    id,\n    label: 'Custom regular expression',\n    setValue: onChange('pattern')\n  });\n}\nfunction PatternErrorMessage(props) {\n  const {\n    field,\n    getValue,\n    id,\n    onChange\n  } = props;\n  const debounce = useService('debounce');\n  return TextfieldEntry({\n    debounce,\n    element: field,\n    getValue: getValue('patternErrorMessage'),\n    id,\n    label: 'Custom error message',\n    tooltip: 'The error message to display when the input does not match the regular expression.',\n    setValue: onChange('patternErrorMessage')\n  });\n}\nfunction Min(props) {\n  const {\n    field,\n    getValue,\n    id,\n    onChange\n  } = props;\n  const debounce = useService('debounce');\n  const variables = useVariables().map(name => ({\n    name\n  }));\n  return FeelNumberEntry({\n    debounce,\n    element: field,\n    feel: 'optional',\n    id,\n    label: 'Minimum',\n    step: 'any',\n    getValue: getValue('min'),\n    setValue: onChange('min'),\n    variables\n  });\n}\nfunction Max(props) {\n  const {\n    field,\n    getValue,\n    id,\n    onChange\n  } = props;\n  const debounce = useService('debounce');\n  const variables = useVariables().map(name => ({\n    name\n  }));\n  return FeelNumberEntry({\n    debounce,\n    element: field,\n    feel: 'optional',\n    id,\n    label: 'Maximum',\n    step: 'any',\n    getValue: getValue('max'),\n    setValue: onChange('max'),\n    variables\n  });\n}\nfunction ValidationType(props) {\n  const {\n    field,\n    getValue,\n    id,\n    onChange\n  } = props;\n  useService('debounce');\n  const setValue = validationType => {\n    onChange('validationType')(validationType || undefined);\n  };\n  return SelectEntry({\n    element: field,\n    getValue: getValue('validationType'),\n    id,\n    label: 'Validation pattern',\n    setValue,\n    getOptions: () => Object.values(VALIDATION_TYPE_OPTIONS),\n    tooltip: getValue('validationType')() === VALIDATION_TYPE_OPTIONS.phone.value ? 'The built-in phone validation pattern is based on the E.164 standard with no spaces. Ex: +491234567890' : undefined\n  });\n}\n\nfunction OptionsGroups(field, editField, getService) {\n  const {\n    type\n  } = field;\n  const formFields = getService('formFields');\n  const fieldDefinition = formFields.get(type).config;\n  if (!OPTIONS_INPUTS.includes(type) && !hasOptionsGroupsConfigured(fieldDefinition)) {\n    return [];\n  }\n  const context = {\n    editField,\n    field\n  };\n  const id = 'valuesSource';\n\n  /**\n   * @type {Array<Group|ListGroup>}\n   */\n  const groups = [{\n    id,\n    label: 'Options source',\n    tooltip: getValuesTooltip(),\n    component: Group,\n    entries: OptionsSourceSelectEntry({\n      ...context,\n      id\n    })\n  }];\n  const valuesSource = (0,_bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.getOptionsSource)(field);\n  if (valuesSource === _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.OPTIONS_SOURCES.INPUT) {\n    const id = 'dynamicOptions';\n    groups.push({\n      id,\n      label: 'Dynamic options',\n      component: Group,\n      entries: InputKeyOptionsSourceEntry({\n        ...context,\n        id\n      })\n    });\n  } else if (valuesSource === _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.OPTIONS_SOURCES.STATIC) {\n    const id = 'staticOptions';\n    groups.push({\n      id,\n      label: 'Static options',\n      component: ListGroup,\n      ...StaticOptionsSourceEntry({\n        ...context,\n        id\n      })\n    });\n  } else if (valuesSource === _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.OPTIONS_SOURCES.EXPRESSION) {\n    const id = 'optionsExpression';\n    groups.push({\n      id,\n      label: 'Options expression',\n      component: Group,\n      entries: OptionsExpressionEntry({\n        ...context,\n        id\n      })\n    });\n  }\n  return groups;\n}\n\n// helpers //////////\n\nfunction getValuesTooltip() {\n  return '\"Static\" defines a constant, predefined set of form options.\\n\\n' + '\"Input data\" defines options that are populated dynamically, adjusting based on variable data for flexible responses to different conditions or inputs.\\n\\n' + '\"Expression\" defines options that are populated from a FEEL expression.';\n}\n\nfunction CustomPropertiesGroup(field, editField) {\n  const {\n    properties = {},\n    type\n  } = field;\n  if (type === 'default') {\n    return null;\n  }\n  const addEntry = event => {\n    event.stopPropagation();\n    let index = Object.keys(properties).length + 1;\n    while (`key${index}` in properties) {\n      index++;\n    }\n    editField(field, ['properties'], {\n      ...properties,\n      [`key${index}`]: 'value'\n    });\n  };\n  const validateFactory = key => {\n    return value => {\n      if (value === key) {\n        return;\n      }\n      if (typeof value !== 'string' || value.length === 0) {\n        return 'Must not be empty.';\n      }\n      if ((0,min_dash__WEBPACK_IMPORTED_MODULE_2__.has)(properties, value)) {\n        return 'Must be unique.';\n      }\n    };\n  };\n  const items = Object.keys(properties).map((key, index) => {\n    const removeEntry = event => {\n      event.stopPropagation();\n      return editField(field, ['properties'], removeKey(properties, key));\n    };\n    const id = `property-${field.id}-${index}`;\n    return {\n      autoFocusEntry: id + '-key',\n      entries: CustomValueEntry({\n        editField,\n        field,\n        idPrefix: id,\n        index,\n        validateFactory\n      }),\n      id,\n      label: key || '',\n      remove: removeEntry\n    };\n  });\n  return {\n    add: addEntry,\n    component: ListGroup,\n    id: 'custom-values',\n    items,\n    label: 'Custom properties',\n    tooltip: 'Add properties directly to the form schema, useful to configure functionality in custom-built task applications and form renderers.'\n  };\n}\n\n// helpers //////////\n\n/**\n * Returns copy of object without key.\n *\n * @param {Object} properties\n * @param {string} oldKey\n *\n * @returns {Object}\n */\nfunction removeKey(properties, oldKey) {\n  return Object.entries(properties).reduce((newProperties, entry) => {\n    const [key, value] = entry;\n    if (key === oldKey) {\n      return newProperties;\n    }\n    return {\n      ...newProperties,\n      [key]: value\n    };\n  }, {});\n}\n\nfunction AppearanceGroup(field, editField, getService) {\n  const entries = [...AdornerEntry({\n    field,\n    editField\n  }), ...GroupAppearanceEntry({\n    field,\n    editField\n  }), ...LayouterAppearanceEntry({\n    field,\n    editField\n  }), ...MaxHeightEntry({\n    field,\n    editField\n  })];\n  if (!entries.length) {\n    return null;\n  }\n  return {\n    id: 'appearance',\n    label: 'Appearance',\n    entries\n  };\n}\n\nfunction LayoutGroup(field, editField) {\n  const {\n    type\n  } = field;\n  if (type === 'default') {\n    return null;\n  }\n  const entries = [...ColumnsEntry({\n    field,\n    editField\n  })];\n  if (entries.length === 0) {\n    return null;\n  }\n  return {\n    id: 'layout',\n    label: 'Layout',\n    entries\n  };\n}\n\nfunction SecurityAttributesGroup(field, editField) {\n  const {\n    type\n  } = field;\n  if (type !== 'iframe') {\n    return null;\n  }\n  const entries = createEntries({\n    field,\n    editField\n  });\n  if (!entries.length) {\n    return null;\n  }\n  return {\n    id: 'securityAttributes',\n    label: 'Security attributes',\n    entries,\n    tooltip: getTooltip()\n  };\n}\nfunction createEntries(props) {\n  const {\n    editField,\n    field\n  } = props;\n  const securityEntries = _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.SECURITY_ATTRIBUTES_DEFINITIONS.map(definition => {\n    const {\n      label,\n      property\n    } = definition;\n    return simpleBoolEntryFactory({\n      id: property,\n      label: label,\n      isDefaultVisible: field => field.type === 'iframe',\n      path: ['security', property],\n      props,\n      getValue: () => (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, ['security', property]),\n      setValue: value => {\n        const security = (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, ['security'], {});\n        editField(field, ['security'], (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.set)(security, [property], value));\n      }\n    });\n  });\n  return [{\n    component: Advisory\n  }, ...securityEntries];\n}\nconst Advisory = props => {\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n    class: \"bio-properties-panel-description fjs-properties-panel-detached-description\",\n    children: \"These options can incur security risks, especially if used in combination with dynamic links. Ensure that you are aware of them, that you trust the source url and only enable what your use case requires.\"\n  });\n};\n\n// helpers //////////\n\nfunction getTooltip() {\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.Fragment, {\n    children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"p\", {\n      children: [\"Allow the iframe to access more functionality of your browser, details regarding the various options can be found in the\", ' ', (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"a\", {\n        target: \"_blank\",\n        href: \"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe\",\n        rel: \"noreferrer\",\n        children: \"MDN iFrame documentation.\"\n      })]\n    })\n  });\n}\n\nfunction ConditionGroup(field, editField) {\n  const {\n    type\n  } = field;\n  if (type === 'default') {\n    return null;\n  }\n  const entries = [...ConditionEntry({\n    field,\n    editField\n  })];\n  return {\n    id: 'condition',\n    label: 'Condition',\n    entries\n  };\n}\n\nfunction TableHeaderGroups(field, editField) {\n  const {\n    type,\n    id: fieldId\n  } = field;\n  if (type !== 'table') {\n    return [];\n  }\n  const areStaticColumnsEnabled = (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isArray)((0,min_dash__WEBPACK_IMPORTED_MODULE_2__.get)(field, ['columns']));\n\n  /**\n   * @type {Array<Group>}\n   */\n  const groups = [{\n    id: `${fieldId}-columnsSource`,\n    label: 'Headers source',\n    tooltip: TOOLTIP_TEXT,\n    component: Group,\n    entries: [...HeadersSourceSelectEntry({\n      field,\n      editField\n    }), ...ColumnsExpressionEntry({\n      field,\n      editField\n    })]\n  }];\n  if (areStaticColumnsEnabled) {\n    const id = `${fieldId}-columns`;\n    groups.push({\n      id,\n      label: 'Header items',\n      component: ListGroup,\n      ...StaticColumnsSourceEntry({\n        field,\n        editField,\n        id\n      })\n    });\n  }\n  return groups;\n}\n\n// helpers //////////\n\nconst TOOLTIP_TEXT = `\"List of items\" defines a constant, predefined set of form options.\n\n\"Expression\" defines options that are populated from a FEEL expression.\n`;\n\nclass PropertiesProvider {\n  constructor(propertiesPanel, injector) {\n    this._injector = injector;\n    propertiesPanel.registerProvider(this);\n  }\n  _filterVisibleEntries(groups, field, getService) {\n    return groups.forEach(group => {\n      const {\n        entries\n      } = group;\n      const {\n        type\n      } = field;\n      const formFields = getService('formFields');\n      const fieldDefinition = formFields.get(type).config;\n      if (!entries) {\n        return;\n      }\n      group.entries = entries.filter(entry => {\n        const {\n          isDefaultVisible\n        } = entry;\n        if (!isDefaultVisible) {\n          return true;\n        }\n        return isDefaultVisible(field) || hasEntryConfigured(fieldDefinition, entry.id);\n      });\n    });\n  }\n  getGroups(field, editField) {\n    return groups => {\n      if (!field) {\n        return groups;\n      }\n      const getService = (type, strict = true) => this._injector.get(type, strict);\n      groups = [...groups, GeneralGroup(field, editField, getService), ...OptionsGroups(field, editField, getService), ...TableHeaderGroups(field, editField), SecurityAttributesGroup(field, editField), ConditionGroup(field, editField), LayoutGroup(field, editField), AppearanceGroup(field, editField), SerializationGroup(field, editField), ConstraintsGroup(field, editField), ValidationGroup(field, editField), CustomPropertiesGroup(field, editField)].filter(group => group != null);\n      this._filterVisibleEntries(groups, field, getService);\n\n      // contract: if a group has no entries or items, it should not be displayed at all\n      return groups.filter(group => {\n        return group.items || group.entries && group.entries.length;\n      });\n    };\n  }\n}\nPropertiesProvider.$inject = ['propertiesPanel', 'injector'];\n\nconst PropertiesPanelModule = {\n  __depends__: [index],\n  __init__: ['propertiesPanel', 'propertiesProvider'],\n  propertiesPanel: ['type', PropertiesPanelRenderer],\n  propertiesProvider: ['type', PropertiesProvider]\n};\n\n/**\n * Manages the rendering of visual plugins.\n * @constructor\n * @param {Object} eventBus - Event bus for the application.\n */\nclass RenderInjector extends SectionModuleBase {\n  constructor(eventBus) {\n    super(eventBus, 'renderInjector');\n    this._eventBus = eventBus;\n    this.registeredRenderers = [];\n  }\n\n  /**\n   * Inject a new renderer into the injector.\n   * @param {string} identifier - Identifier for the renderer.\n   * @param {Function} Renderer - The renderer function.\n   */\n  attachRenderer(identifier, Renderer) {\n    this.registeredRenderers = [...this.registeredRenderers, {\n      identifier,\n      Renderer\n    }];\n  }\n\n  /**\n   * Detach a renderer from the by key injector.\n   * @param {string} identifier - Identifier for the renderer.\n   */\n  detachRenderer(identifier) {\n    this.registeredRenderers = this.registeredRenderers.filter(r => r.identifier !== identifier);\n  }\n\n  /**\n   * Returns the registered renderers.\n   * @returns {Array} Array of registered renderers.\n   */\n  fetchRenderers() {\n    return this.registeredRenderers;\n  }\n}\nRenderInjector.$inject = ['eventBus'];\n\nconst RenderInjectionModule = {\n  __init__: ['renderInjector'],\n  renderInjector: ['type', RenderInjector]\n};\n\nvar _path;\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nvar SvgRepeat = function SvgRepeat(props) {\n  return /*#__PURE__*/preact_compat__WEBPACK_IMPORTED_MODULE_7__.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 16,\n    height: 16,\n    fill: \"none\"\n  }, props), _path || (_path = /*#__PURE__*/preact_compat__WEBPACK_IMPORTED_MODULE_7__.createElement(\"path\", {\n    fill: \"currentColor\",\n    d: \"M3 3h10.086l-1.793-1.793L12 .5l3 3-3 3-.707-.707L13.086 4H3v3.5H2V4a1 1 0 0 1 1-1M4.707 10.207 2.914 12H13V8.5h1V12a1 1 0 0 1-1 1H2.914l1.793 1.793L4 15.5l-3-3 3-3z\"\n  })));\n};\n\nclass EditorRepeatRenderManager {\n  constructor(formFields, formFieldRegistry) {\n    this._formFields = formFields;\n    this._formFieldRegistry = formFieldRegistry;\n    this.RepeatFooter = this.RepeatFooter.bind(this);\n  }\n\n  /**\n   * Checks whether a field should be repeatable.\n   *\n   * @param {string} id - The id of the field to check\n   * @returns {boolean} - True if repeatable, false otherwise\n   */\n  isFieldRepeating(id) {\n    if (!id) {\n      return false;\n    }\n    const formField = this._formFieldRegistry.get(id);\n    const formFieldDefinition = this._formFields.get(formField.type);\n    return formFieldDefinition.config.repeatable && formField.isRepeating;\n  }\n  RepeatFooter() {\n    return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(\"div\", {\n      className: \"fjs-repeat-render-footer\",\n      children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(SvgRepeat, {}), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"span\", {\n        children: \"Repeatable\"\n      })]\n    });\n  }\n}\nEditorRepeatRenderManager.$inject = ['formFields', 'formFieldRegistry'];\n\nconst RepeatRenderModule = {\n  __init__: ['repeatRenderManager'],\n  repeatRenderManager: ['type', EditorRepeatRenderManager]\n};\n\nconst ids = new ids__WEBPACK_IMPORTED_MODULE_0__[\"default\"]([32, 36, 1]);\n\n/**\n * @typedef { import('./types').Injector } Injector\n * @typedef { import('./types').Module } Module\n * @typedef { import('./types').Schema } Schema\n *\n * @typedef { import('./types').FormEditorOptions } FormEditorOptions\n * @typedef { import('./types').FormEditorProperties } FormEditorProperties\n *\n * @typedef { {\n *   properties: FormEditorProperties,\n *   schema: Schema\n * } } State\n *\n * @typedef { (type:string, priority:number, handler:Function) => void } OnEventWithPriority\n * @typedef { (type:string, handler:Function) => void } OnEventWithOutPriority\n * @typedef { OnEventWithPriority & OnEventWithOutPriority } OnEventType\n */\n\n/**\n * The form editor.\n */\nclass FormEditor {\n  /**\n   * @constructor\n   * @param {FormEditorOptions} options\n   */\n  constructor(options = {}) {\n    /**\n     * @public\n     * @type {OnEventType}\n     */\n    this.on = this._onEvent;\n\n    /**\n     * @public\n     * @type {String}\n     */\n    this._id = ids.next();\n\n    /**\n     * @private\n     * @type {Element}\n     */\n    this._container = (0,_bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.createFormContainer)();\n    this._container.setAttribute('tabindex', '0');\n    const {\n      container,\n      exporter,\n      injector = this._createInjector(options, this._container),\n      properties = {}\n    } = options;\n\n    /**\n     * @private\n     * @type {any}\n     */\n    this.exporter = exporter;\n\n    /**\n     * @private\n     * @type {State}\n     */\n    this._state = {\n      properties,\n      schema: null\n    };\n    this.get = injector.get;\n    this.invoke = injector.invoke;\n    this.get('eventBus').fire('form.init');\n    if (container) {\n      this.attachTo(container);\n    }\n  }\n  clear() {\n    // clear form services\n    this._emit('diagram.clear');\n\n    // clear diagram services (e.g. EventBus)\n    this._emit('form.clear');\n  }\n  destroy() {\n    // destroy form services\n    this.get('eventBus').fire('form.destroy');\n\n    // destroy diagram services (e.g. EventBus)\n    this.get('eventBus').fire('diagram.destroy');\n    this._detach(false);\n  }\n\n  /**\n   * @param {Schema} schema\n   *\n   * @return {Promise<{ warnings: Array<any> }>}\n   */\n  importSchema(schema) {\n    return new Promise((resolve, reject) => {\n      try {\n        this.clear();\n        const {\n          schema: importedSchema,\n          warnings\n        } = this.get('importer').importSchema(schema);\n        this._setState({\n          schema: importedSchema\n        });\n        this._emit('import.done', {\n          warnings\n        });\n        return resolve({\n          warnings\n        });\n      } catch (error) {\n        this._emit('import.done', {\n          error: error,\n          warnings: error.warnings || []\n        });\n        return reject(error);\n      }\n    });\n  }\n\n  /**\n   * @returns {Schema}\n   */\n  saveSchema() {\n    return this.getSchema();\n  }\n\n  /**\n   * @returns {Schema}\n   */\n  getSchema() {\n    const {\n      schema\n    } = this._getState();\n    return exportSchema(schema, this.exporter, _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.schemaVersion);\n  }\n\n  /**\n   * @param {Element|string} parentNode\n   */\n  attachTo(parentNode) {\n    if (!parentNode) {\n      throw new Error('parentNode required');\n    }\n    this.detach();\n    if ((0,min_dash__WEBPACK_IMPORTED_MODULE_2__.isString)(parentNode)) {\n      parentNode = document.querySelector(parentNode);\n    }\n    const container = this._container;\n    parentNode.appendChild(container);\n    this._emit('attach');\n  }\n  detach() {\n    this._detach();\n  }\n\n  /**\n   * @internal\n   *\n   * @param {boolean} [emit]\n   */\n  _detach(emit = true) {\n    const container = this._container,\n      parentNode = container.parentNode;\n    if (!parentNode) {\n      return;\n    }\n    if (emit) {\n      this._emit('detach');\n    }\n    parentNode.removeChild(container);\n  }\n\n  /**\n   * @param {any} property\n   * @param {any} value\n   */\n  setProperty(property, value) {\n    const properties = (0,min_dash__WEBPACK_IMPORTED_MODULE_2__.set)(this._getState().properties, [property], value);\n    this._setState({\n      properties\n    });\n  }\n\n  /**\n   * @param {string} type\n   * @param {Function} handler\n   */\n  off(type, handler) {\n    this.get('eventBus').off(type, handler);\n  }\n\n  /**\n   * @internal\n   *\n   * @param {FormEditorOptions} options\n   * @param {Element} container\n   *\n   * @returns {Injector}\n   */\n  _createInjector(options, container) {\n    const {\n      modules = this._getModules(),\n      additionalModules = [],\n      renderer = {},\n      ...config\n    } = options;\n    const enrichedConfig = {\n      ...config,\n      renderer: {\n        ...renderer,\n        container\n      }\n    };\n    return (0,_bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.createInjector)([{\n      config: ['value', enrichedConfig]\n    }, {\n      formEditor: ['value', this]\n    }, CoreModule, ...modules, ...additionalModules]);\n  }\n\n  /**\n   * @internal\n   */\n  _emit(type, data) {\n    this.get('eventBus').fire(type, data);\n  }\n\n  /**\n   * @internal\n   */\n  _getState() {\n    return this._state;\n  }\n\n  /**\n   * @internal\n   */\n  _setState(state) {\n    this._state = {\n      ...this._state,\n      ...state\n    };\n    this._emit('changed', this._getState());\n  }\n\n  /**\n   * @internal\n   */\n  _getModules() {\n    return [ModelingModule, EditorActionsModule, FormEditorKeyboardModule, DraggingModule, SelectionModule, PaletteModule, EditorExpressionLanguageModule, _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.MarkdownRendererModule, PropertiesPanelModule, RenderInjectionModule, RepeatRenderModule];\n  }\n\n  /**\n   * @internal\n   */\n  _onEvent(type, priority, handler) {\n    this.get('eventBus').on(type, priority, handler);\n  }\n}\n\n// helpers //////////\n\nfunction exportSchema(schema, exporter, schemaVersion) {\n  const exportDetails = exporter ? {\n    exporter\n  } : {};\n  const cleanedSchema = (0,_bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_1__.clone)(schema, (name, value) => {\n    if (['_parent', '_path'].includes(name)) {\n      return undefined;\n    }\n    return value;\n  });\n  return {\n    ...cleanedSchema,\n    ...exportDetails,\n    schemaVersion\n  };\n}\n\n/**\n * @typedef { import('./types').CreateFormEditorOptions } CreateFormEditorOptions\n */\n\n/**\n * Create a form editor.\n *\n * @param {CreateFormEditorOptions} options\n *\n * @return {Promise<FormEditor>}\n */\nfunction createFormEditor(options) {\n  const {\n    schema,\n    ...rest\n  } = options;\n  const formEditor = new FormEditor(rest);\n  return formEditor.importSchema(schema).then(() => {\n    return formEditor;\n  });\n}\n\n\n//# sourceMappingURL=index.es.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vbm9kZV9tb2R1bGVzL0BicG1uLWlvL2Zvcm0tanMtZWRpdG9yL2Rpc3QvaW5kZXguZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFzQjtBQUM0M0I7QUFDMTFCO0FBQzJIO0FBQy9JO0FBQ21DO0FBQ3VDO0FBQ25CO0FBQ3BEO0FBQzRGO0FBQzVGO0FBQ2lCO0FBQ1Y7QUFDTjtBQUNFO0FBQ2lCO0FBQ25CO0FBQ2Y7O0FBRXpCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLG9DQUFvQztBQUNsRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixtQkFBbUIsS0FBSztBQUN2RCxvQ0FBb0Msb0JBQW9CO0FBQ3hELGlFQUFpRTtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELG9CQUFvQjtBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FB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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsU0FBUztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxnQkFBZ0I7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVywyQkFBMkIseUNBQXlDLHFCQUFxQjtBQUNwRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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Q0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLE9BQU87QUFDUDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxPQUFPO0FBQ1AsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsa0RBQVE7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FB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QUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxXQUFXLDZDQUFHO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxXQUFXLDZDQUFHO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsV0FBVyw2Q0FBRztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyw2Q0FBRztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHlEQUFXO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyw2Q0FBRztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHlEQUFXO0FBQzlCO0FBQ0E7QUFDQTtBQUNBLFNBQVMsa0RBQVE7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsNkNBQUc7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQix5REFBVztBQUM5QjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQiw2Q0FBRztBQUN4QjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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QUFDSjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsV0FBVyw2Q0FBRztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsV0FBVyw2Q0FBRztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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Q0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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YSxtQkFBbUI7QUFDaEMsYUFBYSxTQUFTO0FBQ3RCO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLHVFQUFjO0FBQ3pCO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSwySkFBMkosMkVBQXNCO0FBQ2pMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSix3QkFBd0IsOERBQUs7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsY0FBYyw0Q0FBNEM7QUFDMUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyx5QkFBeUI7QUFDcEM7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRXVMO0FBQ3ZMIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FtdW5kYS1tb2RlbGVyLWNsaWVudC8uLi9ub2RlX21vZHVsZXMvQGJwbW4taW8vZm9ybS1qcy1lZGl0b3IvZGlzdC9pbmRleC5lcy5qcz9mYWJmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBJZHMgZnJvbSAnaWRzJztcbmltcG9ydCB7IEZvcm1GaWVsZFJlZ2lzdHJ5IGFzIEZvcm1GaWVsZFJlZ2lzdHJ5JDEsIGljb25zQnlUeXBlLCBMYWJlbCBhcyBMYWJlbCQzLCBJRnJhbWUsIFRleHQgYXMgVGV4dCQxLCBIdG1sLCBUYWJsZSwgRXhwcmVzc2lvbkZpZWxkLCBEb2N1bWVudFByZXZpZXcsIEZvcm1GaWVsZHMsIHNhbml0aXplSW1hZ2VTb3VyY2UsIGdldEFuY2VzdHJ5TGlzdCwgRm9ybUNvbnRleHQsIEZvcm1SZW5kZXJDb250ZXh0LCBGb3JtQ29tcG9uZW50LCBnZXRTY3JvbGxDb250YWluZXIsIEZpZWxkRmFjdG9yeSwgRm9ybUxheW91dGVyLCBQYXRoUmVnaXN0cnksIEltcG9ydGVyLCBGZWVsRXhwcmVzc2lvbkxhbmd1YWdlLCBPUFRJT05TX1NPVVJDRVMsIE9QVElPTlNfU09VUkNFU19QQVRIUywgY2xvbmUsIHJ1blJlY3Vyc2l2ZWx5LCBnZXRTY2hlbWFWYXJpYWJsZXMsIERBVEVUSU1FX1NVQlRZUEVTLCBEQVRFX0xBQkVMX1BBVEgsIFRJTUVfTEFCRUxfUEFUSCwgVEVYVF9WSUVXX0RFRkFVTFRfVEVYVCwgVElNRV9VU0UyNEhfUEFUSCwgREFURVRJTUVfU1VCVFlQRV9QQVRILCBEQVRFVElNRV9TVUJUWVBFU19MQUJFTFMsIFRJTUVfSU5URVJWQUxfUEFUSCwgVElNRV9TRVJJQUxJU0lOR19GT1JNQVRfUEFUSCwgREFURV9ESVNBTExPV19QQVNUX1BBVEgsIFRJTUVfU0VSSUFMSVNJTkdfRk9STUFUUywgVElNRV9TRVJJQUxJU0lOR0ZPUk1BVF9MQUJFTFMsIGdldE9wdGlvbnNTb3VyY2UsIE9QVElPTlNfU09VUkNFU19ERUZBVUxUUywgT1BUSU9OU19TT1VSQ0VTX0xBQkVMUywgU0VDVVJJVFlfQVRUUklCVVRFU19ERUZJTklUSU9OUywgY3JlYXRlRm9ybUNvbnRhaW5lciwgY3JlYXRlSW5qZWN0b3IsIE1hcmtkb3duUmVuZGVyZXJNb2R1bGUsIHNjaGVtYVZlcnNpb24gfSBmcm9tICdAYnBtbi1pby9mb3JtLWpzLXZpZXdlcic7XG5leHBvcnQgeyBzY2hlbWFWZXJzaW9uIH0gZnJvbSAnQGJwbW4taW8vZm9ybS1qcy12aWV3ZXInO1xuaW1wb3J0IHsgaXNBcnJheSwgaXNGdW5jdGlvbiwgaXNOdW1iZXIsIGJpbmQsIGFzc2lnbiwgZGVib3VuY2UsIGZvckVhY2gsIGlzU3RyaW5nLCB1bmlxdWVCeSwgaXNPYmplY3QsIGdldCwgaXNEZWZpbmVkLCBzZXQgYXMgc2V0JDEsIHJlZHVjZSwgaXNOaWwsIHdpdGhvdXQsIGhhcyB9IGZyb20gJ21pbi1kYXNoJztcbmltcG9ydCBjbGFzc25hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IHsganN4cywganN4LCBGcmFnbWVudCBhcyBGcmFnbWVudCQxIH0gZnJvbSAncHJlYWN0L2pzeC1ydW50aW1lJztcbmltcG9ydCB7IHVzZUNvbnRleHQsIHVzZVJlZiwgdXNlRWZmZWN0LCB1c2VNZW1vLCB1c2VTdGF0ZSwgdXNlQ2FsbGJhY2ssIHVzZUxheW91dEVmZmVjdCB9IGZyb20gJ3ByZWFjdC9ob29rcyc7XG5pbXBvcnQgeyBjcmVhdGVDb250ZXh0LCBGcmFnbWVudCwgcmVuZGVyLCBjcmVhdGVFbGVtZW50IGFzIGNyZWF0ZUVsZW1lbnQkMSB9IGZyb20gJ3ByZWFjdCc7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdwcmVhY3QvY29tcGF0JztcbmltcG9ydCB7IGNyZWF0ZVBvcnRhbCwgdXNlUmVmIGFzIHVzZVJlZiQxLCB1c2VDb250ZXh0IGFzIHVzZUNvbnRleHQkMSwgdXNlRWZmZWN0IGFzIHVzZUVmZmVjdCQxLCBmb3J3YXJkUmVmIH0gZnJvbSAncHJlYWN0L2NvbXBhdCc7XG5pbXBvcnQgZHJhZ3VsYSBmcm9tICdAYnBtbi1pby9kcmFnZ2xlJztcbmltcG9ydCB7IGNsYXNzZXMsIHF1ZXJ5LCBldmVudCwgZG9taWZ5IH0gZnJvbSAnbWluLWRvbSc7XG5pbXBvcnQgeyBhcnJheU1vdmVNdXRhYmxlIH0gZnJvbSAnYXJyYXktbW92ZSc7XG5pbXBvcnQgeyBGZWVsZXJzRWRpdG9yIH0gZnJvbSAnZmVlbGVycyc7XG5pbXBvcnQgRWRpdG9yIGZyb20gJ0BicG1uLWlvL2ZlZWwtZWRpdG9yJztcbmltcG9ydCB7IGxpbmVOdW1iZXJzLCBFZGl0b3JWaWV3IH0gZnJvbSAnQGNvZGVtaXJyb3Ivdmlldyc7XG5pbXBvcnQgKiBhcyBmb2N1c1RyYXAgZnJvbSAnZm9jdXMtdHJhcCc7XG5pbXBvcnQgQmlnIGZyb20gJ2JpZy5qcyc7XG5cbnZhciBGTl9SRUYgPSAnX19mbic7XG52YXIgREVGQVVMVF9QUklPUklUWSQzID0gMTAwMDtcbnZhciBzbGljZSA9IEFycmF5LnByb3RvdHlwZS5zbGljZTtcblxuLyoqXG4gKiBAdHlwZWRlZiB7IHtcbiAqICAgc3RvcFByb3BhZ2F0aW9uKCk6IHZvaWQ7XG4gKiAgIHByZXZlbnREZWZhdWx0KCk6IHZvaWQ7XG4gKiAgIGNhbmNlbEJ1YmJsZTogYm9vbGVhbjtcbiAqICAgZGVmYXVsdFByZXZlbnRlZDogYm9vbGVhbjtcbiAqICAgcmV0dXJuVmFsdWU6IGFueTtcbiAqIH0gfSBFdmVudFxuICovXG5cbi8qKlxuICogQHRlbXBsYXRlIEVcbiAqXG4gKiBAdHlwZWRlZiB7IChldmVudDogRSAmIEV2ZW50LCAuLi5hbnkpID0+IGFueSB9IEV2ZW50QnVzRXZlbnRDYWxsYmFja1xuICovXG5cbi8qKlxuICogQHR5cGVkZWYgeyB7XG4gKiAgcHJpb3JpdHk6IG51bWJlcjtcbiAqICBuZXh0OiBFdmVudEJ1c0xpc3RlbmVyIHwgbnVsbDtcbiAqICBjYWxsYmFjazogRXZlbnRCdXNFdmVudENhbGxiYWNrPGFueT47XG4gKiB9IH0gRXZlbnRCdXNMaXN0ZW5lclxuICovXG5cbi8qKlxuICogQSBnZW5lcmFsIHB1cnBvc2UgZXZlbnQgYnVzLlxuICpcbiAqIFRoaXMgY29tcG9uZW50IGlzIHVzZWQgdG8gY29tbXVuaWNhdGUgYWNyb3NzIGEgZGlhZ3JhbSBpbnN0YW5jZS5cbiAqIE90aGVyIHBhcnRzIG9mIGEgZGlhZ3JhbSBjYW4gdXNlIGl0IHRvIGxpc3RlbiB0byBhbmQgYnJvYWRjYXN0IGV2ZW50cy5cbiAqXG4gKlxuICogIyMgUmVnaXN0ZXJpbmcgZm9yIEV2ZW50c1xuICpcbiAqIFRoZSBldmVudCBidXMgcHJvdmlkZXMgdGhlIHtAbGluayBFdmVudEJ1cyNvbn0gYW5kIHtAbGluayBFdmVudEJ1cyNvbmNlfVxuICogbWV0aG9kcyB0byByZWdpc3RlciBmb3IgZXZlbnRzLiB7QGxpbmsgRXZlbnRCdXMjb2ZmfSBjYW4gYmUgdXNlZCB0b1xuICogcmVtb3ZlIGV2ZW50IHJlZ2lzdHJhdGlvbnMuIExpc3RlbmVycyByZWNlaXZlIGFuIGluc3RhbmNlIG9mIHtAbGluayBFdmVudH1cbiAqIGFzIHRoZSBmaXJzdCBhcmd1bWVudC4gSXQgYWxsb3dzIHRoZW0gdG8gaG9vayBpbnRvIHRoZSBldmVudCBleGVjdXRpb24uXG4gKlxuICogYGBgamF2YXNjcmlwdFxuICpcbiAqIC8vIGxpc3RlbiBmb3IgZXZlbnRcbiAqIGV2ZW50QnVzLm9uKCdmb28nLCBmdW5jdGlvbihldmVudCkge1xuICpcbiAqICAgLy8gYWNjZXNzIGV2ZW50IHR5cGVcbiAqICAgZXZlbnQudHlwZTsgLy8gJ2ZvbydcbiAqXG4gKiAgIC8vIHN0b3AgcHJvcGFnYXRpb24gdG8gb3RoZXIgbGlzdGVuZXJzXG4gKiAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICpcbiAqICAgLy8gcHJldmVudCBldmVudCBkZWZhdWx0XG4gKiAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gKiB9KTtcbiAqXG4gKiAvLyBsaXN0ZW4gZm9yIGV2ZW50IHdpdGggY3VzdG9tIHBheWxvYWRcbiAqIGV2ZW50QnVzLm9uKCdiYXInLCBmdW5jdGlvbihldmVudCwgcGF5bG9hZCkge1xuICogICBjb25zb2xlLmxvZyhwYXlsb2FkKTtcbiAqIH0pO1xuICpcbiAqIC8vIGxpc3RlbiBmb3IgZXZlbnQgcmV0dXJuaW5nIHZhbHVlXG4gKiBldmVudEJ1cy5vbignZm9vYmFyJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAqXG4gKiAgIC8vIHN0b3AgZXZlbnQgcHJvcGFnYXRpb24gKyBwcmV2ZW50IGRlZmF1bHRcbiAqICAgcmV0dXJuIGZhbHNlO1xuICpcbiAqICAgLy8gc3RvcCBldmVudCBwcm9wYWdhdGlvbiArIHJldHVybiBjdXN0b20gcmVzdWx0XG4gKiAgIHJldHVybiB7XG4gKiAgICAgY29tcGxleDogJ2xpc3RlbmluZyByZXN1bHQnXG4gKiAgIH07XG4gKiB9KTtcbiAqXG4gKlxuICogLy8gbGlzdGVuIHdpdGggY3VzdG9tIHByaW9yaXR5IChkZWZhdWx0PTEwMDAsIGhpZ2hlciBpcyBiZXR0ZXIpXG4gKiBldmVudEJ1cy5vbigncHJpb3JpdHlmb28nLCAxNTAwLCBmdW5jdGlvbihldmVudCkge1xuICogICBjb25zb2xlLmxvZygnaW52b2tlZCBmaXJzdCEnKTtcbiAqIH0pO1xuICpcbiAqXG4gKiAvLyBsaXN0ZW4gZm9yIGV2ZW50IGFuZCBwYXNzIHRoZSBjb250ZXh0IChgdGhpc2ApXG4gKiBldmVudEJ1cy5vbignZm9vYmFyJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAqICAgdGhpcy5mb28oKTtcbiAqIH0sIHRoaXMpO1xuICogYGBgXG4gKlxuICpcbiAqICMjIEVtaXR0aW5nIEV2ZW50c1xuICpcbiAqIEV2ZW50cyBjYW4gYmUgZW1pdHRlZCB2aWEgdGhlIGV2ZW50IGJ1cyB1c2luZyB7QGxpbmsgRXZlbnRCdXMjZmlyZX0uXG4gKlxuICogYGBgamF2YXNjcmlwdFxuICpcbiAqIC8vIGZhbHNlIGluZGljYXRlcyB0aGF0IHRoZSBkZWZhdWx0IGFjdGlvblxuICogLy8gd2FzIHByZXZlbnRlZCBieSBsaXN0ZW5lcnNcbiAqIGlmIChldmVudEJ1cy5maXJlKCdmb28nKSA9PT0gZmFsc2UpIHtcbiAqICAgY29uc29sZS5sb2coJ2RlZmF1bHQgaGFzIGJlZW4gcHJldmVudGVkIScpO1xuICogfTtcbiAqXG4gKlxuICogLy8gY3VzdG9tIGFyZ3MgKyByZXR1cm4gdmFsdWUgbGlzdGVuZXJcbiAqIGV2ZW50QnVzLm9uKCdzdW0nLCBmdW5jdGlvbihldmVudCwgYSwgYikge1xuICogICByZXR1cm4gYSArIGI7XG4gKiB9KTtcbiAqXG4gKiAvLyB5b3UgY2FuIHBhc3MgY3VzdG9tIGFyZ3VtZW50cyArIHJldHJpZXZlIHJlc3VsdCB2YWx1ZXMuXG4gKiB2YXIgc3VtID0gZXZlbnRCdXMuZmlyZSgnc3VtJywgMSwgMik7XG4gKiBjb25zb2xlLmxvZyhzdW0pOyAvLyAzXG4gKiBgYGBcbiAqXG4gKiBAdGVtcGxhdGUgW0V2ZW50TWFwPW51bGxdXG4gKi9cbmZ1bmN0aW9uIEV2ZW50QnVzKCkge1xuICAvKipcbiAgICogQHR5cGUgeyBSZWNvcmQ8c3RyaW5nLCBFdmVudEJ1c0xpc3RlbmVyPiB9XG4gICAqL1xuICB0aGlzLl9saXN0ZW5lcnMgPSB7fTtcblxuICAvLyBjbGVhbnVwIG9uIGRlc3Ryb3kgb24gbG93ZXN0IHByaW9yaXR5IHRvIGFsbG93XG4gIC8vIG1lc3NhZ2UgcGFzc2luZyB1bnRpbCB0aGUgYml0dGVyIGVuZFxuICB0aGlzLm9uKCdkaWFncmFtLmRlc3Ryb3knLCAxLCB0aGlzLl9kZXN0cm95LCB0aGlzKTtcbn1cblxuLyoqXG4gKiBAb3ZlcmxvcmRcbiAqXG4gKiBSZWdpc3RlciBhbiBldmVudCBsaXN0ZW5lciBmb3IgZXZlbnRzIHdpdGggdGhlIGdpdmVuIG5hbWUuXG4gKlxuICogVGhlIGNhbGxiYWNrIHdpbGwgYmUgaW52b2tlZCB3aXRoIGBldmVudCwgLi4uYWRkaXRpb25hbEFyZ3VtZW50c2BcbiAqIHRoYXQgaGF2ZSBiZWVuIHBhc3NlZCB0byB7QGxpbmsgRXZlbnRCdXMjZmlyZX0uXG4gKlxuICogUmV0dXJuaW5nIGZhbHNlIGZyb20gYSBsaXN0ZW5lciB3aWxsIHByZXZlbnQgdGhlIGV2ZW50cyBkZWZhdWx0IGFjdGlvblxuICogKGlmIGFueSBpcyBzcGVjaWZpZWQpLiBUbyBzdG9wIGFuIGV2ZW50IGZyb20gYmVpbmcgcHJvY2Vzc2VkIGZ1cnRoZXIgaW5cbiAqIG90aGVyIGxpc3RlbmVycyBleGVjdXRlIHtAbGluayBFdmVudCNzdG9wUHJvcGFnYXRpb259LlxuICpcbiAqIFJldHVybmluZyBhbnl0aGluZyBidXQgYHVuZGVmaW5lZGAgZnJvbSBhIGxpc3RlbmVyIHdpbGwgc3RvcCB0aGUgbGlzdGVuZXIgcHJvcGFnYXRpb24uXG4gKlxuICogQHRlbXBsYXRlIFRcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ3xzdHJpbmdbXX0gZXZlbnRzIHRvIHN1YnNjcmliZSB0b1xuICogQHBhcmFtIHtudW1iZXJ9IFtwcmlvcml0eT0xMDAwXSBsaXN0ZW4gcHJpb3JpdHlcbiAqIEBwYXJhbSB7RXZlbnRCdXNFdmVudENhbGxiYWNrPFQ+fSBjYWxsYmFja1xuICogQHBhcmFtIHthbnl9IFt0aGF0XSBjYWxsYmFjayBjb250ZXh0XG4gKi9cbi8qKlxuICogUmVnaXN0ZXIgYW4gZXZlbnQgbGlzdGVuZXIgZm9yIGV2ZW50cyB3aXRoIHRoZSBnaXZlbiBuYW1lLlxuICpcbiAqIFRoZSBjYWxsYmFjayB3aWxsIGJlIGludm9rZWQgd2l0aCBgZXZlbnQsIC4uLmFkZGl0aW9uYWxBcmd1bWVudHNgXG4gKiB0aGF0IGhhdmUgYmVlbiBwYXNzZWQgdG8ge0BsaW5rIEV2ZW50QnVzI2ZpcmV9LlxuICpcbiAqIFJldHVybmluZyBmYWxzZSBmcm9tIGEgbGlzdGVuZXIgd2lsbCBwcmV2ZW50IHRoZSBldmVudHMgZGVmYXVsdCBhY3Rpb25cbiAqIChpZiBhbnkgaXMgc3BlY2lmaWVkKS4gVG8gc3RvcCBhbiBldmVudCBmcm9tIGJlaW5nIHByb2Nlc3NlZCBmdXJ0aGVyIGluXG4gKiBvdGhlciBsaXN0ZW5lcnMgZXhlY3V0ZSB7QGxpbmsgRXZlbnQjc3RvcFByb3BhZ2F0aW9ufS5cbiAqXG4gKiBSZXR1cm5pbmcgYW55dGhpbmcgYnV0IGB1bmRlZmluZWRgIGZyb20gYSBsaXN0ZW5lciB3aWxsIHN0b3AgdGhlIGxpc3RlbmVyIHByb3BhZ2F0aW9uLlxuICpcbiAqIEB0ZW1wbGF0ZSB7a2V5b2YgRXZlbnRNYXB9IEV2ZW50TmFtZVxuICpcbiAqIEBwYXJhbSB7RXZlbnROYW1lfSBldmVudHMgdG8gc3Vic2NyaWJlIHRvXG4gKiBAcGFyYW0ge251bWJlcn0gW3ByaW9yaXR5PTEwMDBdIGxpc3RlbiBwcmlvcml0eVxuICogQHBhcmFtIHtFdmVudEJ1c0V2ZW50Q2FsbGJhY2s8RXZlbnRNYXBbRXZlbnROYW1lXT59IGNhbGxiYWNrXG4gKiBAcGFyYW0ge2FueX0gW3RoYXRdIGNhbGxiYWNrIGNvbnRleHRcbiAqL1xuRXZlbnRCdXMucHJvdG90eXBlLm9uID0gZnVuY3Rpb24gKGV2ZW50cywgcHJpb3JpdHksIGNhbGxiYWNrLCB0aGF0KSB7XG4gIGV2ZW50cyA9IGlzQXJyYXkoZXZlbnRzKSA/IGV2ZW50cyA6IFtldmVudHNdO1xuICBpZiAoaXNGdW5jdGlvbihwcmlvcml0eSkpIHtcbiAgICB0aGF0ID0gY2FsbGJhY2s7XG4gICAgY2FsbGJhY2sgPSBwcmlvcml0eTtcbiAgICBwcmlvcml0eSA9IERFRkFVTFRfUFJJT1JJVFkkMztcbiAgfVxuICBpZiAoIWlzTnVtYmVyKHByaW9yaXR5KSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJpb3JpdHkgbXVzdCBiZSBhIG51bWJlcicpO1xuICB9XG4gIHZhciBhY3R1YWxDYWxsYmFjayA9IGNhbGxiYWNrO1xuICBpZiAodGhhdCkge1xuICAgIGFjdHVhbENhbGxiYWNrID0gYmluZChjYWxsYmFjaywgdGhhdCk7XG5cbiAgICAvLyBtYWtlIHN1cmUgd2UgcmVtZW1iZXIgYW5kIGFyZSBhYmxlIHRvIHJlbW92ZVxuICAgIC8vIGJvdW5kIGNhbGxiYWNrcyB2aWEge0BsaW5rICNvZmZ9IHVzaW5nIHRoZSBvcmlnaW5hbFxuICAgIC8vIGNhbGxiYWNrXG4gICAgYWN0dWFsQ2FsbGJhY2tbRk5fUkVGXSA9IGNhbGxiYWNrW0ZOX1JFRl0gfHwgY2FsbGJhY2s7XG4gIH1cbiAgdmFyIHNlbGYgPSB0aGlzO1xuICBldmVudHMuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgIHNlbGYuX2FkZExpc3RlbmVyKGUsIHtcbiAgICAgIHByaW9yaXR5OiBwcmlvcml0eSxcbiAgICAgIGNhbGxiYWNrOiBhY3R1YWxDYWxsYmFjayxcbiAgICAgIG5leHQ6IG51bGxcbiAgICB9KTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIEBvdmVybG9yZFxuICpcbiAqIFJlZ2lzdGVyIGFuIGV2ZW50IGxpc3RlbmVyIHRoYXQgaXMgY2FsbGVkIG9ubHkgb25jZS5cbiAqXG4gKiBAdGVtcGxhdGUgVFxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfHN0cmluZ1tdfSBldmVudHMgdG8gc3Vic2NyaWJlIHRvXG4gKiBAcGFyYW0ge251bWJlcn0gW3ByaW9yaXR5PTEwMDBdIHRoZSBsaXN0ZW4gcHJpb3JpdHlcbiAqIEBwYXJhbSB7RXZlbnRCdXNFdmVudENhbGxiYWNrPFQ+fSBjYWxsYmFja1xuICogQHBhcmFtIHthbnl9IFt0aGF0XSBjYWxsYmFjayBjb250ZXh0XG4gKi9cbi8qKlxuICogUmVnaXN0ZXIgYW4gZXZlbnQgbGlzdGVuZXIgdGhhdCBpcyBjYWxsZWQgb25seSBvbmNlLlxuICpcbiAqIEB0ZW1wbGF0ZSB7a2V5b2YgRXZlbnRNYXB9IEV2ZW50TmFtZVxuICpcbiAqIEBwYXJhbSB7RXZlbnROYW1lfSBldmVudHMgdG8gc3Vic2NyaWJlIHRvXG4gKiBAcGFyYW0ge251bWJlcn0gW3ByaW9yaXR5PTEwMDBdIGxpc3RlbiBwcmlvcml0eVxuICogQHBhcmFtIHtFdmVudEJ1c0V2ZW50Q2FsbGJhY2s8RXZlbnRNYXBbRXZlbnROYW1lXT59IGNhbGxiYWNrXG4gKiBAcGFyYW0ge2FueX0gW3RoYXRdIGNhbGxiYWNrIGNvbnRleHRcbiAqL1xuRXZlbnRCdXMucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbiAoZXZlbnRzLCBwcmlvcml0eSwgY2FsbGJhY2ssIHRoYXQpIHtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICBpZiAoaXNGdW5jdGlvbihwcmlvcml0eSkpIHtcbiAgICB0aGF0ID0gY2FsbGJhY2s7XG4gICAgY2FsbGJhY2sgPSBwcmlvcml0eTtcbiAgICBwcmlvcml0eSA9IERFRkFVTFRfUFJJT1JJVFkkMztcbiAgfVxuICBpZiAoIWlzTnVtYmVyKHByaW9yaXR5KSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJpb3JpdHkgbXVzdCBiZSBhIG51bWJlcicpO1xuICB9XG4gIGZ1bmN0aW9uIHdyYXBwZWRDYWxsYmFjaygpIHtcbiAgICB3cmFwcGVkQ2FsbGJhY2suX19pc1RvbWIgPSB0cnVlO1xuICAgIHZhciByZXN1bHQgPSBjYWxsYmFjay5hcHBseSh0aGF0LCBhcmd1bWVudHMpO1xuICAgIHNlbGYub2ZmKGV2ZW50cywgd3JhcHBlZENhbGxiYWNrKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLy8gbWFrZSBzdXJlIHdlIHJlbWVtYmVyIGFuZCBhcmUgYWJsZSB0byByZW1vdmVcbiAgLy8gYm91bmQgY2FsbGJhY2tzIHZpYSB7QGxpbmsgI29mZn0gdXNpbmcgdGhlIG9yaWdpbmFsXG4gIC8vIGNhbGxiYWNrXG4gIHdyYXBwZWRDYWxsYmFja1tGTl9SRUZdID0gY2FsbGJhY2s7XG4gIHRoaXMub24oZXZlbnRzLCBwcmlvcml0eSwgd3JhcHBlZENhbGxiYWNrKTtcbn07XG5cbi8qKlxuICogUmVtb3ZlcyBldmVudCBsaXN0ZW5lcnMgYnkgZXZlbnQgYW5kIGNhbGxiYWNrLlxuICpcbiAqIElmIG5vIGNhbGxiYWNrIGlzIGdpdmVuLCBhbGwgbGlzdGVuZXJzIGZvciBhIGdpdmVuIGV2ZW50IG5hbWUgYXJlIGJlaW5nIHJlbW92ZWQuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd8c3RyaW5nW119IGV2ZW50c1xuICogQHBhcmFtIHtFdmVudEJ1c0V2ZW50Q2FsbGJhY2s8dW5rbm93bj59IFtjYWxsYmFja11cbiAqL1xuRXZlbnRCdXMucHJvdG90eXBlLm9mZiA9IGZ1bmN0aW9uIChldmVudHMsIGNhbGxiYWNrKSB7XG4gIGV2ZW50cyA9IGlzQXJyYXkoZXZlbnRzKSA/IGV2ZW50cyA6IFtldmVudHNdO1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIGV2ZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChldmVudCkge1xuICAgIHNlbGYuX3JlbW92ZUxpc3RlbmVyKGV2ZW50LCBjYWxsYmFjayk7XG4gIH0pO1xufTtcblxuLyoqXG4gKiBDcmVhdGUgYW4gZXZlbnQgcmVjb2duaXplZCBiZSB0aGUgZXZlbnQgYnVzLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhIEV2ZW50IGRhdGEuXG4gKlxuICogQHJldHVybiB7RXZlbnR9IEFuIGV2ZW50IHRoYXQgd2lsbCBiZSByZWNvZ25pemVkIGJ5IHRoZSBldmVudCBidXMuXG4gKi9cbkV2ZW50QnVzLnByb3RvdHlwZS5jcmVhdGVFdmVudCA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gIHZhciBldmVudCA9IG5ldyBJbnRlcm5hbEV2ZW50KCk7XG4gIGV2ZW50LmluaXQoZGF0YSk7XG4gIHJldHVybiBldmVudDtcbn07XG5cbi8qKlxuICogRmlyZXMgYW4gZXZlbnQuXG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiBgYGBqYXZhc2NyaXB0XG4gKiAvLyBmaXJlIGV2ZW50IGJ5IG5hbWVcbiAqIGV2ZW50cy5maXJlKCdmb28nKTtcbiAqXG4gKiAvLyBmaXJlIGV2ZW50IG9iamVjdCB3aXRoIG5lc3RlZCB0eXBlXG4gKiB2YXIgZXZlbnQgPSB7IHR5cGU6ICdmb28nIH07XG4gKiBldmVudHMuZmlyZShldmVudCk7XG4gKlxuICogLy8gZmlyZSBldmVudCB3aXRoIGV4cGxpY2l0IHR5cGVcbiAqIHZhciBldmVudCA9IHsgeDogMTAsIHk6IDIwIH07XG4gKiBldmVudHMuZmlyZSgnZWxlbWVudC5tb3ZlZCcsIGV2ZW50KTtcbiAqXG4gKiAvLyBwYXNzIGFkZGl0aW9uYWwgYXJndW1lbnRzIHRvIHRoZSBldmVudFxuICogZXZlbnRzLm9uKCdmb28nLCBmdW5jdGlvbihldmVudCwgYmFyKSB7XG4gKiAgIGFsZXJ0KGJhcik7XG4gKiB9KTtcbiAqXG4gKiBldmVudHMuZmlyZSh7IHR5cGU6ICdmb28nIH0sICdJIGFtIGJhciEnKTtcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBbdHlwZV0gZXZlbnQgdHlwZVxuICogQHBhcmFtIHtPYmplY3R9IFtkYXRhXSBldmVudCBvciBldmVudCBkYXRhXG4gKiBAcGFyYW0gey4uLmFueX0gW2FyZ3NdIGFkZGl0aW9uYWwgYXJndW1lbnRzIHRoZSBjYWxsYmFjayB3aWxsIGJlIGNhbGxlZCB3aXRoLlxuICpcbiAqIEByZXR1cm4ge2FueX0gVGhlIHJldHVybiB2YWx1ZS4gV2lsbCBiZSBzZXQgdG8gYGZhbHNlYCBpZiB0aGUgZGVmYXVsdCB3YXMgcHJldmVudGVkLlxuICovXG5FdmVudEJ1cy5wcm90b3R5cGUuZmlyZSA9IGZ1bmN0aW9uICh0eXBlLCBkYXRhKSB7XG4gIHZhciBldmVudCwgZmlyc3RMaXN0ZW5lciwgcmV0dXJuVmFsdWUsIGFyZ3M7XG4gIGFyZ3MgPSBzbGljZS5jYWxsKGFyZ3VtZW50cyk7XG4gIGlmICh0eXBlb2YgdHlwZSA9PT0gJ29iamVjdCcpIHtcbiAgICBkYXRhID0gdHlwZTtcbiAgICB0eXBlID0gZGF0YS50eXBlO1xuICB9XG4gIGlmICghdHlwZSkge1xuICAgIHRocm93IG5ldyBFcnJvcignbm8gZXZlbnQgdHlwZSBzcGVjaWZpZWQnKTtcbiAgfVxuICBmaXJzdExpc3RlbmVyID0gdGhpcy5fbGlzdGVuZXJzW3R5cGVdO1xuICBpZiAoIWZpcnN0TGlzdGVuZXIpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyB3ZSBtYWtlIHN1cmUgd2UgZmlyZSBpbnN0YW5jZXMgb2Ygb3VyIGhvbWUgbWFkZVxuICAvLyBldmVudHMgaGVyZS4gV2Ugd3JhcCB0aGVtIG9ubHkgb25jZSwgdGhvdWdoXG4gIGlmIChkYXRhIGluc3RhbmNlb2YgSW50ZXJuYWxFdmVudCkge1xuICAgIC8vIHdlIGFyZSBmaW5lLCB3ZSBhbHJlYWQgaGF2ZSBhbiBldmVudFxuICAgIGV2ZW50ID0gZGF0YTtcbiAgfSBlbHNlIHtcbiAgICBldmVudCA9IHRoaXMuY3JlYXRlRXZlbnQoZGF0YSk7XG4gIH1cblxuICAvLyBlbnN1cmUgd2UgcGFzcyB0aGUgZXZlbnQgYXMgdGhlIGZpcnN0IHBhcmFtZXRlclxuICBhcmdzWzBdID0gZXZlbnQ7XG5cbiAgLy8gb3JpZ2luYWwgZXZlbnQgdHlwZSAoaW4gY2FzZSB3ZSBkZWxlZ2F0ZSlcbiAgdmFyIG9yaWdpbmFsVHlwZSA9IGV2ZW50LnR5cGU7XG5cbiAgLy8gdXBkYXRlIGV2ZW50IHR5cGUgYmVmb3JlIGRlbGVnYXRpb25cbiAgaWYgKHR5cGUgIT09IG9yaWdpbmFsVHlwZSkge1xuICAgIGV2ZW50LnR5cGUgPSB0eXBlO1xuICB9XG4gIHRyeSB7XG4gICAgcmV0dXJuVmFsdWUgPSB0aGlzLl9pbnZva2VMaXN0ZW5lcnMoZXZlbnQsIGFyZ3MsIGZpcnN0TGlzdGVuZXIpO1xuICB9IGZpbmFsbHkge1xuICAgIC8vIHJlc2V0IGV2ZW50IHR5cGUgYWZ0ZXIgZGVsZWdhdGlvblxuICAgIGlmICh0eXBlICE9PSBvcmlnaW5hbFR5cGUpIHtcbiAgICAgIGV2ZW50LnR5cGUgPSBvcmlnaW5hbFR5cGU7XG4gICAgfVxuICB9XG5cbiAgLy8gc2V0IHRoZSByZXR1cm4gdmFsdWUgdG8gZmFsc2UgaWYgdGhlIGV2ZW50IGRlZmF1bHRcbiAgLy8gZ290IHByZXZlbnRlZCBhbmQgbm8gb3RoZXIgcmV0dXJuIHZhbHVlIGV4aXN0c1xuICBpZiAocmV0dXJuVmFsdWUgPT09IHVuZGVmaW5lZCAmJiBldmVudC5kZWZhdWx0UHJldmVudGVkKSB7XG4gICAgcmV0dXJuVmFsdWUgPSBmYWxzZTtcbiAgfVxuICByZXR1cm4gcmV0dXJuVmFsdWU7XG59O1xuXG4vKipcbiAqIEhhbmRsZSBhbiBlcnJvciBieSBmaXJpbmcgYW4gZXZlbnQuXG4gKlxuICogQHBhcmFtIHtFcnJvcn0gZXJyb3IgVGhlIGVycm9yIHRvIGJlIGhhbmRsZWQuXG4gKlxuICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgZXJyb3Igd2FzIGhhbmRsZWQuXG4gKi9cbkV2ZW50QnVzLnByb3RvdHlwZS5oYW5kbGVFcnJvciA9IGZ1bmN0aW9uIChlcnJvcikge1xuICByZXR1cm4gdGhpcy5maXJlKCdlcnJvcicsIHtcbiAgICBlcnJvcjogZXJyb3JcbiAgfSkgPT09IGZhbHNlO1xufTtcbkV2ZW50QnVzLnByb3RvdHlwZS5fZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5fbGlzdGVuZXJzID0ge307XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50XG4gKiBAcGFyYW0ge2FueVtdfSBhcmdzXG4gKiBAcGFyYW0ge0V2ZW50QnVzTGlzdGVuZXJ9IGxpc3RlbmVyXG4gKlxuICogQHJldHVybiB7YW55fVxuICovXG5FdmVudEJ1cy5wcm90b3R5cGUuX2ludm9rZUxpc3RlbmVycyA9IGZ1bmN0aW9uIChldmVudCwgYXJncywgbGlzdGVuZXIpIHtcbiAgdmFyIHJldHVyblZhbHVlO1xuICB3aGlsZSAobGlzdGVuZXIpIHtcbiAgICAvLyBoYW5kbGUgc3RvcHBlZCBwcm9wYWdhdGlvblxuICAgIGlmIChldmVudC5jYW5jZWxCdWJibGUpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICByZXR1cm5WYWx1ZSA9IHRoaXMuX2ludm9rZUxpc3RlbmVyKGV2ZW50LCBhcmdzLCBsaXN0ZW5lcik7XG4gICAgbGlzdGVuZXIgPSBsaXN0ZW5lci5uZXh0O1xuICB9XG4gIHJldHVybiByZXR1cm5WYWx1ZTtcbn07XG5cbi8qKlxuICogQHBhcmFtIHtFdmVudH0gZXZlbnRcbiAqIEBwYXJhbSB7YW55W119IGFyZ3NcbiAqIEBwYXJhbSB7RXZlbnRCdXNMaXN0ZW5lcn0gbGlzdGVuZXJcbiAqXG4gKiBAcmV0dXJuIHthbnl9XG4gKi9cbkV2ZW50QnVzLnByb3RvdHlwZS5faW52b2tlTGlzdGVuZXIgPSBmdW5jdGlvbiAoZXZlbnQsIGFyZ3MsIGxpc3RlbmVyKSB7XG4gIHZhciByZXR1cm5WYWx1ZTtcbiAgaWYgKGxpc3RlbmVyLmNhbGxiYWNrLl9faXNUb21iKSB7XG4gICAgcmV0dXJuIHJldHVyblZhbHVlO1xuICB9XG4gIHRyeSB7XG4gICAgLy8gcmV0dXJuaW5nIGZhbHNlIHByZXZlbnRzIHRoZSBkZWZhdWx0IGFjdGlvblxuICAgIHJldHVyblZhbHVlID0gaW52b2tlRnVuY3Rpb24obGlzdGVuZXIuY2FsbGJhY2ssIGFyZ3MpO1xuXG4gICAgLy8gc3RvcCBwcm9wYWdhdGlvbiBvbiByZXR1cm4gdmFsdWVcbiAgICBpZiAocmV0dXJuVmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgZXZlbnQucmV0dXJuVmFsdWUgPSByZXR1cm5WYWx1ZTtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH1cblxuICAgIC8vIHByZXZlbnQgZGVmYXVsdCBvbiByZXR1cm4gZmFsc2VcbiAgICBpZiAocmV0dXJuVmFsdWUgPT09IGZhbHNlKSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpZiAoIXRoaXMuaGFuZGxlRXJyb3IoZXJyb3IpKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCd1bmhhbmRsZWQgZXJyb3IgaW4gZXZlbnQgbGlzdGVuZXInLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJldHVyblZhbHVlO1xufTtcblxuLyoqXG4gKiBBZGQgbmV3IGxpc3RlbmVyIHdpdGggYSBjZXJ0YWluIHByaW9yaXR5IHRvIHRoZSBsaXN0XG4gKiBvZiBsaXN0ZW5lcnMgKGZvciB0aGUgZ2l2ZW4gZXZlbnQpLlxuICpcbiAqIFRoZSBzZW1hbnRpY3Mgb2YgbGlzdGVuZXIgcmVnaXN0cmF0aW9uIC8gbGlzdGVuZXIgZXhlY3V0aW9uIGFyZVxuICogZmlyc3QgcmVnaXN0ZXIsIGZpcnN0IHNlcnZlOiBOZXcgbGlzdGVuZXJzIHdpbGwgYWx3YXlzIGJlIGluc2VydGVkXG4gKiBhZnRlciBleGlzdGluZyBsaXN0ZW5lcnMgd2l0aCB0aGUgc2FtZSBwcmlvcml0eS5cbiAqXG4gKiBFeGFtcGxlOiBJbnNlcnRpbmcgdHdvIGxpc3RlbmVycyB3aXRoIHByaW9yaXR5IDEwMDAgYW5kIDEzMDBcbiAqXG4gKiAgICAqIGJlZm9yZTogWyAxNTAwLCAxNTAwLCAxMDAwLCAxMDAwIF1cbiAqICAgICogYWZ0ZXI6IFsgMTUwMCwgMTUwMCwgKG5ldz0xMzAwKSwgMTAwMCwgMTAwMCwgKG5ldz0xMDAwKSBdXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50XG4gKiBAcGFyYW0ge0V2ZW50QnVzTGlzdGVuZXJ9IG5ld0xpc3RlbmVyXG4gKi9cbkV2ZW50QnVzLnByb3RvdHlwZS5fYWRkTGlzdGVuZXIgPSBmdW5jdGlvbiAoZXZlbnQsIG5ld0xpc3RlbmVyKSB7XG4gIHZhciBsaXN0ZW5lciA9IHRoaXMuX2dldExpc3RlbmVycyhldmVudCksXG4gICAgcHJldmlvdXNMaXN0ZW5lcjtcblxuICAvLyBubyBwcmlvciBsaXN0ZW5lcnNcbiAgaWYgKCFsaXN0ZW5lcikge1xuICAgIHRoaXMuX3NldExpc3RlbmVycyhldmVudCwgbmV3TGlzdGVuZXIpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIGVuc3VyZSB3ZSBvcmRlciBsaXN0ZW5lcnMgYnkgcHJpb3JpdHkgZnJvbVxuICAvLyAwIChoaWdoKSB0byBuID4gMCAobG93KVxuICB3aGlsZSAobGlzdGVuZXIpIHtcbiAgICBpZiAobGlzdGVuZXIucHJpb3JpdHkgPCBuZXdMaXN0ZW5lci5wcmlvcml0eSkge1xuICAgICAgbmV3TGlzdGVuZXIubmV4dCA9IGxpc3RlbmVyO1xuICAgICAgaWYgKHByZXZpb3VzTGlzdGVuZXIpIHtcbiAgICAgICAgcHJldmlvdXNMaXN0ZW5lci5uZXh0ID0gbmV3TGlzdGVuZXI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9zZXRMaXN0ZW5lcnMoZXZlbnQsIG5ld0xpc3RlbmVyKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcHJldmlvdXNMaXN0ZW5lciA9IGxpc3RlbmVyO1xuICAgIGxpc3RlbmVyID0gbGlzdGVuZXIubmV4dDtcbiAgfVxuXG4gIC8vIGFkZCBuZXcgbGlzdGVuZXIgdG8gYmFja1xuICBwcmV2aW91c0xpc3RlbmVyLm5leHQgPSBuZXdMaXN0ZW5lcjtcbn07XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAqXG4gKiBAcmV0dXJuIHtFdmVudEJ1c0xpc3RlbmVyfVxuICovXG5FdmVudEJ1cy5wcm90b3R5cGUuX2dldExpc3RlbmVycyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gIHJldHVybiB0aGlzLl9saXN0ZW5lcnNbbmFtZV07XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gKiBAcGFyYW0ge0V2ZW50QnVzTGlzdGVuZXJ9IGxpc3RlbmVyXG4gKi9cbkV2ZW50QnVzLnByb3RvdHlwZS5fc2V0TGlzdGVuZXJzID0gZnVuY3Rpb24gKG5hbWUsIGxpc3RlbmVyKSB7XG4gIHRoaXMuX2xpc3RlbmVyc1tuYW1lXSA9IGxpc3RlbmVyO1xufTtcbkV2ZW50QnVzLnByb3RvdHlwZS5fcmVtb3ZlTGlzdGVuZXIgPSBmdW5jdGlvbiAoZXZlbnQsIGNhbGxiYWNrKSB7XG4gIHZhciBsaXN0ZW5lciA9IHRoaXMuX2dldExpc3RlbmVycyhldmVudCksXG4gICAgbmV4dExpc3RlbmVyLFxuICAgIHByZXZpb3VzTGlzdGVuZXIsXG4gICAgbGlzdGVuZXJDYWxsYmFjaztcbiAgaWYgKCFjYWxsYmFjaykge1xuICAgIC8vIGNsZWFyIGxpc3RlbmVyc1xuICAgIHRoaXMuX3NldExpc3RlbmVycyhldmVudCwgbnVsbCk7XG4gICAgcmV0dXJuO1xuICB9XG4gIHdoaWxlIChsaXN0ZW5lcikge1xuICAgIG5leHRMaXN0ZW5lciA9IGxpc3RlbmVyLm5leHQ7XG4gICAgbGlzdGVuZXJDYWxsYmFjayA9IGxpc3RlbmVyLmNhbGxiYWNrO1xuICAgIGlmIChsaXN0ZW5lckNhbGxiYWNrID09PSBjYWxsYmFjayB8fCBsaXN0ZW5lckNhbGxiYWNrW0ZOX1JFRl0gPT09IGNhbGxiYWNrKSB7XG4gICAgICBpZiAocHJldmlvdXNMaXN0ZW5lcikge1xuICAgICAgICBwcmV2aW91c0xpc3RlbmVyLm5leHQgPSBuZXh0TGlzdGVuZXI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBuZXcgZmlyc3QgbGlzdGVuZXJcbiAgICAgICAgdGhpcy5fc2V0TGlzdGVuZXJzKGV2ZW50LCBuZXh0TGlzdGVuZXIpO1xuICAgICAgfVxuICAgIH1cbiAgICBwcmV2aW91c0xpc3RlbmVyID0gbGlzdGVuZXI7XG4gICAgbGlzdGVuZXIgPSBuZXh0TGlzdGVuZXI7XG4gIH1cbn07XG5cbi8qKlxuICogQSBldmVudCB0aGF0IGlzIGVtaXR0ZWQgdmlhIHRoZSBldmVudCBidXMuXG4gKi9cbmZ1bmN0aW9uIEludGVybmFsRXZlbnQoKSB7fVxuSW50ZXJuYWxFdmVudC5wcm90b3R5cGUuc3RvcFByb3BhZ2F0aW9uID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLmNhbmNlbEJ1YmJsZSA9IHRydWU7XG59O1xuSW50ZXJuYWxFdmVudC5wcm90b3R5cGUucHJldmVudERlZmF1bHQgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuZGVmYXVsdFByZXZlbnRlZCA9IHRydWU7XG59O1xuSW50ZXJuYWxFdmVudC5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gIGFzc2lnbih0aGlzLCBkYXRhIHx8IHt9KTtcbn07XG5cbi8qKlxuICogSW52b2tlIGZ1bmN0aW9uLiBCZSBmYXN0Li4uXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqIEBwYXJhbSB7YW55W119IGFyZ3NcbiAqXG4gKiBAcmV0dXJuIHthbnl9XG4gKi9cbmZ1bmN0aW9uIGludm9rZUZ1bmN0aW9uKGZuLCBhcmdzKSB7XG4gIHJldHVybiBmbi5hcHBseShudWxsLCBhcmdzKTtcbn1cblxuLyoqXG4gKiBBIGZhY3RvcnkgdG8gY3JlYXRlIGEgY29uZmlndXJhYmxlIGRlYm91bmNlci5cbiAqXG4gKiBAcGFyYW0ge251bWJlcnxib29sZWFufSBbY29uZmlnPXRydWVdXG4gKi9cbmZ1bmN0aW9uIERlYm91bmNlRmFjdG9yeShjb25maWcgPSB0cnVlKSB7XG4gIGNvbnN0IHRpbWVvdXQgPSB0eXBlb2YgY29uZmlnID09PSAnbnVtYmVyJyA/IGNvbmZpZyA6IGNvbmZpZyA/IDMwMCA6IDA7XG4gIGlmICh0aW1lb3V0KSB7XG4gICAgcmV0dXJuIGZuID0+IGRlYm91bmNlKGZuLCB0aW1lb3V0KTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZm4gPT4gZm47XG4gIH1cbn1cbkRlYm91bmNlRmFjdG9yeS4kaW5qZWN0ID0gWydjb25maWcuZGVib3VuY2UnXTtcblxuY2xhc3MgRm9ybUZpZWxkUmVnaXN0cnkgZXh0ZW5kcyBGb3JtRmllbGRSZWdpc3RyeSQxIHtcbiAgLyoqXG4gICAqIFVwZGF0ZXMgYSBmb3JtIGZpZWxkcyBpZC5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IGZvcm1GaWVsZFxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmV3SWRcbiAgICovXG4gIHVwZGF0ZUlkKGZvcm1GaWVsZCwgbmV3SWQpIHtcbiAgICB0aGlzLl92YWxpZGF0ZUlkKG5ld0lkKTtcbiAgICB0aGlzLl9ldmVudEJ1cy5maXJlKCdmb3JtRmllbGQudXBkYXRlSWQnLCB7XG4gICAgICBmb3JtRmllbGQsXG4gICAgICBuZXdJZDogbmV3SWRcbiAgICB9KTtcbiAgICB0aGlzLnJlbW92ZShmb3JtRmllbGQpO1xuICAgIGZvcm1GaWVsZC5pZCA9IG5ld0lkO1xuICAgIHRoaXMuYWRkKGZvcm1GaWVsZCk7XG5cbiAgICAvLyBUT0RPKG5pa2t1KTogbWFrZSB0aGlzIGEgcHJvcGVyIG9iamVjdCBncmFwaCBzbyB3ZVxuICAgIC8vIGRvIG5vdCBoYXZlIHRvIGRlYWwgd2l0aCBJRHMgdGhpcyB3YXkuLi5cbiAgICBpZiAoJ2NvbXBvbmVudHMnIGluIGZvcm1GaWVsZCkge1xuICAgICAgZm9yIChjb25zdCBjb21wb25lbnQgb2YgZm9ybUZpZWxkLmNvbXBvbmVudHMpIHtcbiAgICAgICAgY29tcG9uZW50Ll9wYXJlbnQgPSBuZXdJZDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVmFsaWRhdGUgdGhlIHN1aXRhYmlsaXR5IG9mIHRoZSBnaXZlbiBpZCBhbmQgc2lnbmFscyBhIHByb2JsZW1cbiAgICogd2l0aCBhbiBleGNlcHRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZFxuICAgKlxuICAgKiBAdGhyb3dzIHtFcnJvcn0gaWYgaWQgaXMgZW1wdHkgb3IgYWxyZWFkeSBhc3NpZ25lZFxuICAgKi9cbiAgX3ZhbGlkYXRlSWQoaWQpIHtcbiAgICBpZiAoIWlkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2Zvcm1GaWVsZCBtdXN0IGhhdmUgYW4gaWQnKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuZ2V0KGlkKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdmb3JtRmllbGQgd2l0aCBpZCAnICsgaWQgKyAnIGFscmVhZHkgYWRkZWQnKTtcbiAgICB9XG4gIH1cbn1cblxuY29uc3QgTUFYX0NPTFVNTlNfUEVSX1JPVyA9IDE2O1xuY29uc3QgTUFYX0NPTFVNTlMgPSAxNjtcbmNvbnN0IE1JTl9DT0xVTU5TID0gMjtcbmNvbnN0IE1BWF9GSUVMRFNfUEVSX1JPVyA9IDQ7XG5jbGFzcyBGb3JtTGF5b3V0VmFsaWRhdG9yIHtcbiAgLyoqXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKlxuICAgKiBAcGFyYW0geyBpbXBvcnQoJy4vRm9ybUxheW91dGVyJykuRm9ybUxheW91dGVyIH0gZm9ybUxheW91dGVyXG4gICAqIEBwYXJhbSB7IGltcG9ydCgnLi9Gb3JtRmllbGRSZWdpc3RyeScpLkZvcm1GaWVsZFJlZ2lzdHJ5IH0gZm9ybUZpZWxkUmVnaXN0cnlcbiAgICovXG4gIGNvbnN0cnVjdG9yKGZvcm1MYXlvdXRlciwgZm9ybUZpZWxkUmVnaXN0cnkpIHtcbiAgICB0aGlzLl9mb3JtTGF5b3V0ZXIgPSBmb3JtTGF5b3V0ZXI7XG4gICAgdGhpcy5fZm9ybUZpZWxkUmVnaXN0cnkgPSBmb3JtRmllbGRSZWdpc3RyeTtcbiAgfVxuICB2YWxpZGF0ZUZpZWxkKGZpZWxkID0ge30sIGNvbHVtbnMsIHJvdykge1xuICAgIC8vIGFsbG93IGVtcHR5IChhdXRvIGNvbHVtbnMpXG4gICAgaWYgKE51bWJlci5pc0ludGVnZXIoY29sdW1ucykpIHtcbiAgICAgIC8vIGFsbG93IG1pbmltdW0gY29sc1xuICAgICAgaWYgKGNvbHVtbnMgPCBNSU5fQ09MVU1OUykge1xuICAgICAgICByZXR1cm4gYE1pbmltdW0gJHtNSU5fQ09MVU1OU30gY29sdW1ucyBhcmUgYWxsb3dlZGA7XG4gICAgICB9XG5cbiAgICAgIC8vIGFsbG93IG1heGltdW0gY29sc1xuICAgICAgaWYgKGNvbHVtbnMgPiBNQVhfQ09MVU1OUykge1xuICAgICAgICByZXR1cm4gYE1heGltdW0gJHtNQVhfQ09MVU1OU30gY29sdW1ucyBhcmUgYWxsb3dlZGA7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghcm93KSB7XG4gICAgICByb3cgPSB0aGlzLl9mb3JtTGF5b3V0ZXIuZ2V0Um93Rm9yRmllbGQoZmllbGQpO1xuICAgIH1cblxuICAgIC8vIGNhbGN1bGF0ZSBjb2x1bW5zIHdpdGggYW5kIHdpdGhvdXQgdXBkYXRlZCBmaWVsZFxuICAgIGxldCBzdW1Db2x1bW5zID0gcGFyc2VJbnQoY29sdW1ucykgfHwgMDtcbiAgICBsZXQgc3VtRmllbGRzID0gMTtcbiAgICBsZXQgc3VtQXV0b0NvbHMgPSBjb2x1bW5zID8gMCA6IDE7XG4gICAgcm93LmNvbXBvbmVudHMuZm9yRWFjaChpZCA9PiB7XG4gICAgICBpZiAoZmllbGQuaWQgPT09IGlkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGNvbXBvbmVudCA9IHRoaXMuX2Zvcm1GaWVsZFJlZ2lzdHJ5LmdldChpZCk7XG4gICAgICBjb25zdCBjb2xzID0gKGNvbXBvbmVudC5sYXlvdXQgfHwge30pLmNvbHVtbnM7XG4gICAgICBpZiAoIWNvbHMpIHtcbiAgICAgICAgc3VtQXV0b0NvbHMrKztcbiAgICAgIH1cbiAgICAgIHN1bUNvbHVtbnMgKz0gcGFyc2VJbnQoY29scykgfHwgMDtcbiAgICAgIHN1bUZpZWxkcysrO1xuICAgIH0pO1xuXG4gICAgLy8gZG8gbm90IGFsbG93IG92ZXJmbG93c1xuICAgIGlmIChzdW1Db2x1bW5zID4gTUFYX0NPTFVNTlNfUEVSX1JPVyB8fCBzdW1BdXRvQ29scyA+IDAgJiYgc3VtQ29sdW1ucyA+IGNhbGN1bGF0ZU1heENvbHVtbnNXaXRoQXV0byhzdW1BdXRvQ29scykgfHwgY29sdW1ucyA9PT0gTUFYX0NPTFVNTlNfUEVSX1JPVyAmJiBzdW1GaWVsZHMgPiAxKSB7XG4gICAgICByZXR1cm4gYE5ldyB2YWx1ZSBleGNlZWRzIHRoZSBtYXhpbXVtIG9mICR7TUFYX0NPTFVNTlNfUEVSX1JPV30gY29sdW1ucyBwZXIgcm93YDtcbiAgICB9XG4gICAgaWYgKHN1bUZpZWxkcyA+IE1BWF9GSUVMRFNfUEVSX1JPVykge1xuICAgICAgcmV0dXJuIGBNYXhpbXVtICR7TUFYX0ZJRUxEU19QRVJfUk9XfSBmaWVsZHMgcGVyIHJvdyBhcmUgYWxsb3dlZGA7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5Gb3JtTGF5b3V0VmFsaWRhdG9yLiRpbmplY3QgPSBbJ2Zvcm1MYXlvdXRlcicsICdmb3JtRmllbGRSZWdpc3RyeSddO1xuXG4vLyBoZWxwZXIgLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4vLyBvbiBub3JtYWwgc2NyZWVuIHNpemVzLCBhdXRvIGNvbHVtbnMgdGFrZSBtaW5pbXVtIDIgY29sdW1uc1xuZnVuY3Rpb24gY2FsY3VsYXRlTWF4Q29sdW1uc1dpdGhBdXRvKGF1dG9Db2xzKSB7XG4gIHJldHVybiBNQVhfQ09MVU1OU19QRVJfUk9XIC0gYXV0b0NvbHMgKiAyO1xufVxuXG5jb25zdCBlbXB0eUltYWdlID0gY3JlYXRlRW1wdHlJbWFnZSgpO1xuZnVuY3Rpb24gZWRpdG9yRm9ybUZpZWxkQ2xhc3Nlcyh0eXBlLCB7XG4gIGRpc2FibGVkID0gZmFsc2Vcbn0gPSB7fSkge1xuICBpZiAoIXR5cGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3R5cGUgcmVxdWlyZWQnKTtcbiAgfVxuICByZXR1cm4gY2xhc3NuYW1lcygnZmpzLWZvcm0tZmllbGQnLCBgZmpzLWZvcm0tZmllbGQtJHt0eXBlfWAsIHtcbiAgICAnZmpzLWRpc2FibGVkJzogZGlzYWJsZWRcbiAgfSk7XG59XG5cbi8qKlxuICogQWRkIGEgZHJhZ2dlciB0aGF0IGNhbGxzIGJhY2sgdGhlIHBhc3NlZCBmdW5jdGlvbiB3aXRoXG4gKiB7IGV2ZW50LCBkZWx0YSB9IG9uIGRyYWcuXG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiBmdW5jdGlvbiBkcmFnTW92ZShldmVudCwgZGVsdGEpIHtcbiAqICAgLy8gd2UgYXJlIGRyYWdnaW5nICghISlcbiAqIH1cbiAqXG4gKiBkb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdzdGFydCcsIGRyYWdnZXIoZHJhZ01vdmUpKTtcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICpcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufSBkcmFnIHN0YXJ0IGNhbGxiYWNrIGZ1bmN0aW9uXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZURyYWdnZXIkMShmbikge1xuICBsZXQgc2VsZjtcbiAgbGV0IHN0YXJ0WCwgc3RhcnRZO1xuXG4gIC8qKiBkcmFnIHN0YXJ0ICovXG4gIGZ1bmN0aW9uIG9uRHJhZ1N0YXJ0KGV2ZW50KSB7XG4gICAgc2VsZiA9IHRoaXM7XG4gICAgc3RhcnRYID0gZXZlbnQuY2xpZW50WDtcbiAgICBzdGFydFkgPSBldmVudC5jbGllbnRZO1xuXG4gICAgLy8gKDEpIGhpZGUgZHJhZyBwcmV2aWV3IGltYWdlXG4gICAgaWYgKGV2ZW50LmRhdGFUcmFuc2Zlcikge1xuICAgICAgZXZlbnQuZGF0YVRyYW5zZmVyLnNldERyYWdJbWFnZShlbXB0eUltYWdlLCAwLCAwKTtcbiAgICB9XG5cbiAgICAvLyAoMikgc2V0dXAgZHJhZyBsaXN0ZW5lcnNcblxuICAgIC8vIGF0dGFjaCBkcmFnICsgY2xlYW51cCBldmVudFxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgb25EcmFnKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdkcmFnZW5kJywgb25FbmQpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCBwcmV2ZW50RGVmYXVsdCQxKTtcbiAgfVxuICBmdW5jdGlvbiBvbkRyYWcoZXZlbnQpIHtcbiAgICBjb25zdCBkZWx0YSA9IHtcbiAgICAgIHg6IGV2ZW50LmNsaWVudFggLSBzdGFydFgsXG4gICAgICB5OiBldmVudC5jbGllbnRZIC0gc3RhcnRZXG4gICAgfTtcblxuICAgIC8vIGNhbGwgcHJvdmlkZWQgZm4gd2l0aCBldmVudCwgZGVsdGFcbiAgICByZXR1cm4gZm4uY2FsbChzZWxmLCBldmVudCwgZGVsdGEpO1xuICB9XG4gIGZ1bmN0aW9uIG9uRW5kKCkge1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgb25EcmFnKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdkcmFnZW5kJywgb25FbmQpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCBwcmV2ZW50RGVmYXVsdCQxKTtcbiAgfVxuICByZXR1cm4gb25EcmFnU3RhcnQ7XG59XG5cbi8qKlxuICogVGhyb3R0bGUgZnVuY3Rpb24gY2FsbCBhY2NvcmRpbmcgVUkgdXBkYXRlIGN5Y2xlLlxuICpcbiAqIEBwYXJhbSAge0Z1bmN0aW9ufSBmblxuICpcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufSB0aHJvdHRsZWQgZm5cbiAqL1xuZnVuY3Rpb24gdGhyb3R0bGUoZm4pIHtcbiAgbGV0IGFjdGl2ZSA9IGZhbHNlO1xuICBsZXQgbGFzdEFyZ3MgPSBbXTtcbiAgbGV0IGxhc3RUaGlzID0gdW5kZWZpbmVkO1xuICByZXR1cm4gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICBsYXN0QXJncyA9IGFyZ3M7XG4gICAgbGFzdFRoaXMgPSB0aGlzO1xuICAgIGlmIChhY3RpdmUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYWN0aXZlID0gdHJ1ZTtcbiAgICBmbi5hcHBseShsYXN0VGhpcywgbGFzdEFyZ3MpO1xuICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKCkge1xuICAgICAgbGFzdEFyZ3MgPSBsYXN0VGhpcyA9IGFjdGl2ZSA9IHVuZGVmaW5lZDtcbiAgICB9KTtcbiAgfTtcbn1cbmZ1bmN0aW9uIHByZXZlbnREZWZhdWx0JDEoZXZlbnQpIHtcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG59XG5mdW5jdGlvbiBjcmVhdGVFbXB0eUltYWdlKCkge1xuICBjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTtcbiAgaW1nLnNyYyA9ICdkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGhBUUFCQUlBQUFBQUFBUC8vL3lINUJBRUFBQUFBTEFBQUFBQUJBQUVBQUFJQlJBQTcnO1xuICByZXR1cm4gaW1nO1xufVxuXG5mdW5jdGlvbiBFZGl0b3JJRnJhbWUocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGZpZWxkLFxuICAgIGRvbUlkXG4gIH0gPSBwcm9wcztcbiAgY29uc3Qge1xuICAgIGxhYmVsXG4gIH0gPSBmaWVsZDtcbiAgY29uc3QgSWNvbiA9IGljb25zQnlUeXBlKGZpZWxkLnR5cGUpO1xuICByZXR1cm4ganN4cyhcImRpdlwiLCB7XG4gICAgY2xhc3M6IGVkaXRvckZvcm1GaWVsZENsYXNzZXMoZmllbGQudHlwZSksXG4gICAgY2hpbGRyZW46IFtqc3goTGFiZWwkMywge1xuICAgICAgaWQ6IGRvbUlkLFxuICAgICAgbGFiZWw6IGxhYmVsXG4gICAgfSksIGpzeChcImRpdlwiLCB7XG4gICAgICBjbGFzczogXCJmanMtaWZyYW1lLXBsYWNlaG9sZGVyXCIsXG4gICAgICBpZDogZG9tSWQsXG4gICAgICBjaGlsZHJlbjoganN4cyhcInBcIiwge1xuICAgICAgICBjbGFzczogXCJmanMtaWZyYW1lLXBsYWNlaG9sZGVyLXRleHRcIixcbiAgICAgICAgY2hpbGRyZW46IFtqc3goSWNvbiwge1xuICAgICAgICAgIHdpZHRoOiBcIjMyXCIsXG4gICAgICAgICAgaGVpZ2h0OiBcIjI0XCIsXG4gICAgICAgICAgdmlld0JveDogXCIwIDAgNTYgNTZcIlxuICAgICAgICB9KSwgXCJpRnJhbWVcIl1cbiAgICAgIH0pXG4gICAgfSldXG4gIH0pO1xufVxuRWRpdG9ySUZyYW1lLmNvbmZpZyA9IElGcmFtZS5jb25maWc7XG5cbmNvbnN0IERyYWdBbmREcm9wQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQoe1xuICBkcmFrZTogbnVsbFxufSk7XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGVcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW3N0cmljdF1cbiAqXG4gKiBAcmV0dXJucyB7YW55fVxuICovXG5mdW5jdGlvbiBnZXRTZXJ2aWNlJDEodHlwZSwgc3RyaWN0KSB7fVxuY29uc3QgRm9ybUVkaXRvckNvbnRleHQgPSBjcmVhdGVDb250ZXh0KHtcbiAgZ2V0U2VydmljZTogZ2V0U2VydmljZSQxXG59KTtcblxuZnVuY3Rpb24gdXNlU2VydmljZSQxKHR5cGUsIHN0cmljdCkge1xuICBjb25zdCB7XG4gICAgZ2V0U2VydmljZVxuICB9ID0gdXNlQ29udGV4dChGb3JtRWRpdG9yQ29udGV4dCk7XG4gIHJldHVybiBnZXRTZXJ2aWNlKHR5cGUsIHN0cmljdCk7XG59XG5cbmZ1bmN0aW9uIHVzZVByZXZpb3VzJDEodmFsdWUsIGRlZmF1bHRWYWx1ZSA9IG51bGwpIHtcbiAgY29uc3QgcmVmID0gdXNlUmVmKGRlZmF1bHRWYWx1ZSk7XG4gIHVzZUVmZmVjdCgoKSA9PiByZWYuY3VycmVudCA9IHZhbHVlLCBbdmFsdWVdKTtcbiAgcmV0dXJuIHJlZi5jdXJyZW50O1xufVxuXG4vKipcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIC0gZnVuY3Rpb24gdG8gZGVib3VuY2VcbiAqL1xuZnVuY3Rpb24gdXNlRGVib3VuY2UkMShmbikge1xuICBjb25zdCBkZWJvdW5jZSA9IHVzZVNlcnZpY2UkMSgnZGVib3VuY2UnKTtcbiAgY29uc3QgY2FsbGJhY2sgPSB1c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4gZGVib3VuY2UoZm4pO1xuICB9LCBbZGVib3VuY2UsIGZuXSk7XG5cbiAgLy8gY2xlYW51cCBhc3luYyBzaWRlLWVmZmVjdCBpZiBjYWxsYmFjayAjZmx1c2ggaXMgcHJvdmlkZWQuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHR5cGVvZiBjYWxsYmFjay5mbHVzaCA9PT0gJ2Z1bmN0aW9uJyAmJiBjYWxsYmFjay5mbHVzaCgpO1xuICAgIH07XG4gIH0sIFtjYWxsYmFja10pO1xuICByZXR1cm4gY2FsbGJhY2s7XG59XG5cbnZhciBfcGF0aCQ1O1xuZnVuY3Rpb24gX2V4dGVuZHMkNSgpIHsgcmV0dXJuIF9leHRlbmRzJDUgPSBPYmplY3QuYXNzaWduID8gT2JqZWN0LmFzc2lnbi5iaW5kKCkgOiBmdW5jdGlvbiAobikgeyBmb3IgKHZhciBlID0gMTsgZSA8IGFyZ3VtZW50cy5sZW5ndGg7IGUrKykgeyB2YXIgdCA9IGFyZ3VtZW50c1tlXTsgZm9yICh2YXIgciBpbiB0KSAoe30pLmhhc093blByb3BlcnR5LmNhbGwodCwgcikgJiYgKG5bcl0gPSB0W3JdKTsgfSByZXR1cm4gbjsgfSwgX2V4dGVuZHMkNS5hcHBseShudWxsLCBhcmd1bWVudHMpOyB9XG52YXIgU3ZnQ2xvc2UgPSBmdW5jdGlvbiBTdmdDbG9zZShwcm9wcykge1xuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgX2V4dGVuZHMkNSh7XG4gICAgeG1sbnM6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixcbiAgICB3aWR0aDogMTYsXG4gICAgaGVpZ2h0OiAxNixcbiAgICBmaWxsOiBcImN1cnJlbnRDb2xvclwiXG4gIH0sIHByb3BzKSwgX3BhdGgkNSB8fCAoX3BhdGgkNSA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7XG4gICAgZmlsbFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIGQ6IFwibTEyIDQuNy0uNy0uN0w4IDcuMyA0LjcgNGwtLjcuN0w3LjMgOCA0IDExLjNsLjcuN0w4IDguN2wzLjMgMy4zLjctLjdMOC43IDh6XCIsXG4gICAgY2xpcFJ1bGU6IFwiZXZlbm9kZFwiXG4gIH0pKSk7XG59O1xuXG52YXIgX3BhdGgkNCwgX3BhdGgyJDE7XG5mdW5jdGlvbiBfZXh0ZW5kcyQ0KCkgeyByZXR1cm4gX2V4dGVuZHMkNCA9IE9iamVjdC5hc3NpZ24gPyBPYmplY3QuYXNzaWduLmJpbmQoKSA6IGZ1bmN0aW9uIChuKSB7IGZvciAodmFyIGUgPSAxOyBlIDwgYXJndW1lbnRzLmxlbmd0aDsgZSsrKSB7IHZhciB0ID0gYXJndW1lbnRzW2VdOyBmb3IgKHZhciByIGluIHQpICh7fSkuaGFzT3duUHJvcGVydHkuY2FsbCh0LCByKSAmJiAobltyXSA9IHRbcl0pOyB9IHJldHVybiBuOyB9LCBfZXh0ZW5kcyQ0LmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7IH1cbnZhciBTdmdEZWxldGUgPSBmdW5jdGlvbiBTdmdEZWxldGUocHJvcHMpIHtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwic3ZnXCIsIF9leHRlbmRzJDQoe1xuICAgIHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsXG4gICAgd2lkdGg6IDE2LFxuICAgIGhlaWdodDogMTYsXG4gICAgZmlsbDogXCJub25lXCJcbiAgfSwgcHJvcHMpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInJlY3RcIiwge1xuICAgIHdpZHRoOiAxNixcbiAgICBoZWlnaHQ6IDE2LFxuICAgIHg6IDAuNTM2LFxuICAgIGZpbGw6IFwiI2ZmZlwiLFxuICAgIHJ4OiAzLFxuICAgIHN0eWxlOiB7XG4gICAgICBtaXhCbGVuZE1vZGU6IFwibXVsdGlwbHlcIlxuICAgIH1cbiAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7XG4gICAgZmlsbDogXCIjZmZmXCIsXG4gICAgZDogXCJNMCAwaDE2djE2SDB6XCIsXG4gICAgc3R5bGU6IHtcbiAgICAgIG1peEJsZW5kTW9kZTogXCJtdWx0aXBseVwiXG4gICAgfSxcbiAgICB0cmFuc2Zvcm06IFwidHJhbnNsYXRlKC41MzYpXCJcbiAgfSksIF9wYXRoJDQgfHwgKF9wYXRoJDQgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInBhdGhcIiwge1xuICAgIGZpbGw6IFwiY3VycmVudGNvbG9yXCIsXG4gICAgZDogXCJNNy41MzYgNmgtMXY2aDF6bTMgMGgtMXY2aDF6XCJcbiAgfSkpLCBfcGF0aDIkMSB8fCAoX3BhdGgyJDEgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInBhdGhcIiwge1xuICAgIGZpbGw6IFwiY3VycmVudGNvbG9yXCIsXG4gICAgZDogXCJNMi41MzYgM3YxaDF2MTBhMSAxIDAgMCAwIDEgMWg4YTEgMSAwIDAgMCAxLTFWNGgxVjN6bTIgMTFWNGg4djEwem02LTEzaC00djFoNHpcIlxuICB9KSkpO1xufTtcblxudmFyIF9wYXRoJDM7XG5mdW5jdGlvbiBfZXh0ZW5kcyQzKCkgeyByZXR1cm4gX2V4dGVuZHMkMyA9IE9iamVjdC5hc3NpZ24gPyBPYmplY3QuYXNzaWduLmJpbmQoKSA6IGZ1bmN0aW9uIChuKSB7IGZvciAodmFyIGUgPSAxOyBlIDwgYXJndW1lbnRzLmxlbmd0aDsgZSsrKSB7IHZhciB0ID0gYXJndW1lbnRzW2VdOyBmb3IgKHZhciByIGluIHQpICh7fSkuaGFzT3duUHJvcGVydHkuY2FsbCh0LCByKSAmJiAobltyXSA9IHRbcl0pOyB9IHJldHVybiBuOyB9LCBfZXh0ZW5kcyQzLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7IH1cbnZhciBTdmdEcmFnZ2FibGUgPSBmdW5jdGlvbiBTdmdEcmFnZ2FibGUocHJvcHMpIHtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwic3ZnXCIsIF9leHRlbmRzJDMoe1xuICAgIHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsXG4gICAgeG1sU3BhY2U6IFwicHJlc2VydmVcIixcbiAgICB3aWR0aDogMTYsXG4gICAgaGVpZ2h0OiAxNixcbiAgICBmaWxsOiBcImN1cnJlbnRjb2xvclwiLFxuICAgIHZpZXdCb3g6IFwiMCAwIDMyIDMyXCJcbiAgfSwgcHJvcHMpLCBfcGF0aCQzIHx8IChfcGF0aCQzID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHtcbiAgICBkOiBcIk0xMCA2aDR2NGgtNHptOCAwaDR2NGgtNHptLTggOGg0djRoLTR6bTggMGg0djRoLTR6bS04IDhoNHY0aC00em04IDBoNHY0aC00elwiXG4gIH0pKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHtcbiAgICBkOiBcIk0wIDBoMzJ2MzJIMHpcIixcbiAgICBzdHlsZToge1xuICAgICAgZmlsbDogXCJub25lXCJcbiAgICB9XG4gIH0pKTtcbn07XG5cbnZhciBfcGF0aCQyO1xuZnVuY3Rpb24gX2V4dGVuZHMkMigpIHsgcmV0dXJuIF9leHRlbmRzJDIgPSBPYmplY3QuYXNzaWduID8gT2JqZWN0LmFzc2lnbi5iaW5kKCkgOiBmdW5jdGlvbiAobikgeyBmb3IgKHZhciBlID0gMTsgZSA8IGFyZ3VtZW50cy5sZW5ndGg7IGUrKykgeyB2YXIgdCA9IGFyZ3VtZW50c1tlXTsgZm9yICh2YXIgciBpbiB0KSAoe30pLmhhc093blByb3BlcnR5LmNhbGwodCwgcikgJiYgKG5bcl0gPSB0W3JdKTsgfSByZXR1cm4gbjsgfSwgX2V4dGVuZHMkMi5hcHBseShudWxsLCBhcmd1bWVudHMpOyB9XG52YXIgU3ZnU2VhcmNoID0gZnVuY3Rpb24gU3ZnU2VhcmNoKHByb3BzKSB7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInN2Z1wiLCBfZXh0ZW5kcyQyKHtcbiAgICB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLFxuICAgIHdpZHRoOiAxNSxcbiAgICBoZWlnaHQ6IDE1LFxuICAgIGZpbGw6IFwibm9uZVwiXG4gIH0sIHByb3BzKSwgX3BhdGgkMiB8fCAoX3BhdGgkMiA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7XG4gICAgZmlsbDogXCJjdXJyZW50Q29sb3JcIixcbiAgICBkOiBcIm0xNC41IDEzLjc5My0zLjc3Ni0zLjc3NmE1LjUwOCA1LjUwOCAwIDEgMC0uNzA3LjcwN2wzLjc3NiAzLjc3NnpNMiA2LjVhNC41IDQuNSAwIDEgMSA5IDAgNC41IDQuNSAwIDAgMS05IDBcIlxuICB9KSkpO1xufTtcblxudmFyIF9wYXRoJDEsIF9yZWN0LCBfbWFzaywgX3BhdGgyLCBfcGF0aDMsIF9wYXRoNCwgX3BhdGg1LCBfcGF0aDY7XG5mdW5jdGlvbiBfZXh0ZW5kcyQxKCkgeyByZXR1cm4gX2V4dGVuZHMkMSA9IE9iamVjdC5hc3NpZ24gPyBPYmplY3QuYXNzaWduLmJpbmQoKSA6IGZ1bmN0aW9uIChuKSB7IGZvciAodmFyIGUgPSAxOyBlIDwgYXJndW1lbnRzLmxlbmd0aDsgZSsrKSB7IHZhciB0ID0gYXJndW1lbnRzW2VdOyBmb3IgKHZhciByIGluIHQpICh7fSkuaGFzT3duUHJvcGVydHkuY2FsbCh0LCByKSAmJiAobltyXSA9IHRbcl0pOyB9IHJldHVybiBuOyB9LCBfZXh0ZW5kcyQxLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7IH1cbnZhciBTdmdFbXB0eUZvcm0gPSBmdW5jdGlvbiBTdmdFbXB0eUZvcm0ocHJvcHMpIHtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwic3ZnXCIsIF9leHRlbmRzJDEoe1xuICAgIHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsXG4gICAgd2lkdGg6IDEyNixcbiAgICBoZWlnaHQ6IDk2LFxuICAgIGZpbGw6IFwibm9uZVwiXG4gIH0sIHByb3BzKSwgX3BhdGgkMSB8fCAoX3BhdGgkMSA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7XG4gICAgZmlsbDogXCIjRkY4MzJCXCIsXG4gICAgZmlsbFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIGQ6IFwiTTcwIDc4djhhMyAzIDAgMCAxLTMgM2gtOHYtNWg2di02em0wLTE2aC01VjQ2aDV6bTAtMzJoLTV2LTZoLTZ2LTVoOGEzIDMgMCAwIDEgMyAzek00MyAxOXY1SDI3di01em0tMzIgMHY1SDV2Nkgwdi04YTMgMyAwIDAgMSAzLTN6TTAgNDZoNXYxNkgwem0wIDMyaDV2Nmg2djVIM2EzIDMgMCAwIDEtMy0zem0yNyAxMXYtNWgxNnY1elwiLFxuICAgIGNsaXBSdWxlOiBcImV2ZW5vZGRcIlxuICB9KSksIF9yZWN0IHx8IChfcmVjdCA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwicmVjdFwiLCB7XG4gICAgd2lkdGg6IDcwLFxuICAgIGhlaWdodDogNzAsXG4gICAgZmlsbDogXCIjRTVFNUU1XCIsXG4gICAgcng6IDMsXG4gICAgdHJhbnNmb3JtOiBcIm1hdHJpeCgtMSAwIDAgMSA5NCAwKVwiXG4gIH0pKSwgX21hc2sgfHwgKF9tYXNrID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJtYXNrXCIsIHtcbiAgICBpZDogXCJFbXB0eUZvcm1fc3ZnX19hXCIsXG4gICAgZmlsbDogXCIjZmZmXCJcbiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHtcbiAgICBmaWxsUnVsZTogXCJldmVub2RkXCIsXG4gICAgZDogXCJNODcuMDg1IDg4LjY4NCA3NS40MyA0NS4xODVsNDMuNDk5IDExLjY1Ni0xMS4wNDQgOC4wNzIgOC41NTcgOC41NTYtMTIuNzI4IDEyLjcyOC04LjU1Ny04LjU1NnpcIixcbiAgICBjbGlwUnVsZTogXCJldmVub2RkXCJcbiAgfSkpKSwgX3BhdGgyIHx8IChfcGF0aDIgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInBhdGhcIiwge1xuICAgIGZpbGw6IFwiIzM5MzkzOVwiLFxuICAgIGZpbGxSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBkOiBcIk04Ny4wODUgODguNjg0IDc1LjQzIDQ1LjE4NWw0My40OTkgMTEuNjU2LTExLjA0NCA4LjA3MiA4LjU1NyA4LjU1Ni0xMi43MjggMTIuNzI4LTguNTU3LTguNTU2elwiLFxuICAgIGNsaXBSdWxlOiBcImV2ZW5vZGRcIlxuICB9KSksIF9wYXRoMyB8fCAoX3BhdGgzID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHtcbiAgICBmaWxsOiBcIiMzOTM5MzlcIixcbiAgICBkOiBcIk03NS40MyA0NS4xODUgNzAuNiA0Ni40OGwtMi4yNDEtOC4zNjUgOC4zNjUgMi4yNDJ6bTExLjY1NSA0My40OTkgNC4wMzcgMi45NS02LjE2MyA4LjQzMi0yLjcwNC0xMC4wODh6bTMxLjg0NC0zMS44NDMgMS4yOTQtNC44MyAxMC4wODggMi43MDMtOC40MzIgNi4xNjN6bS0xMS4wNDQgOC4wNzItMy41MzUgMy41MzUtNC4xMjgtNC4xMjcgNC43MTMtMy40NDV6bTguNTU3IDguNTU2IDMuNTM1LTMuNTM1IDMuNTM2IDMuNTM1LTMuNTM2IDMuNTM2em0tMTIuNzI4IDEyLjcyOCAzLjUzNiAzLjUzNi0zLjUzNiAzLjUzNS0zLjUzNi0zLjUzNXptLTguNTU3LTguNTU2LTQuMDM2LTIuOTUxIDMuNDQ0LTQuNzEzIDQuMTI4IDQuMTI4ek04MC4yNiA0My44OSA5MS45MTUgODcuMzlsLTkuNjYgMi41ODhMNzAuNiA0Ni40OHptMzcuMzc1IDE3Ljc4TDc0LjEzNiA1MC4wMTRsMi41ODgtOS42NiA0My40OTkgMTEuNjU2em0tMTIuNjk5LS43OTUgMTEuMDQzLTguMDcyIDUuOTAxIDguMDczLTExLjA0MyA4LjA3MnptNy45NzEgMTYuMTI5LTguNTU2LTguNTU3IDcuMDcxLTcuMDcgOC41NTYgOC41NTZ6bS0xMi43MjggNS42NTcgMTIuNzI4LTEyLjcyOCA3LjA3MSA3LjA3LTEyLjcyNyAxMi43Mjl6bS0xLjQ4NS04LjU1NyA4LjU1NyA4LjU1Ny03LjA3MiA3LjA3LTguNTU2LTguNTU2ek04My4wNDkgODUuNzMzIDkxLjEyIDc0LjY5bDguMDczIDUuOTAxLTguMDcyIDExLjA0NHpcIixcbiAgICBtYXNrOiBcInVybCgjRW1wdHlGb3JtX3N2Z19fYSlcIlxuICB9KSksIF9wYXRoNCB8fCAoX3BhdGg0ID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHtcbiAgICBzdHJva2U6IFwiIzAwMFwiLFxuICAgIHN0cm9rZUxpbmVjYXA6IFwicm91bmRcIixcbiAgICBzdHJva2VXaWR0aDogMyxcbiAgICBkOiBcIm02OS40MzEgMzkuMTYzLTkuMTkyLTkuMTkyXCJcbiAgfSkpLCBfcGF0aDUgfHwgKF9wYXRoNSA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7XG4gICAgc3Ryb2tlOiBcIiMwMDBcIixcbiAgICBzdHJva2VMaW5lY2FwOiBcInJvdW5kXCIsXG4gICAgc3Ryb2tlV2lkdGg6IDMsXG4gICAgZDogXCJNMS41LTEuNWg4XCIsXG4gICAgdHJhbnNmb3JtOiBcIm1hdHJpeCgtMSAwIDAgMSA2OC4yMTMgNTAuMTIzKVwiXG4gIH0pKSwgX3BhdGg2IHx8IChfcGF0aDYgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInBhdGhcIiwge1xuICAgIHN0cm9rZTogXCIjMDAwXCIsXG4gICAgc3Ryb2tlTGluZWNhcDogXCJyb3VuZFwiLFxuICAgIHN0cm9rZVdpZHRoOiAzLFxuICAgIGQ6IFwiTTc4Ljk2OSAzNi4zNjd2LThcIlxuICB9KSkpO1xufTtcblxuZnVuY3Rpb24gRWRpdG9yVGV4dChwcm9wcykge1xuICBjb25zdCB7XG4gICAgdHlwZSxcbiAgICB0ZXh0ID0gJydcbiAgfSA9IHByb3BzLmZpZWxkO1xuICBjb25zdCBJY29uID0gaWNvbnNCeVR5cGUoJ3RleHQnKTtcbiAgY29uc3QgdGVtcGxhdGluZyA9IHVzZVNlcnZpY2UkMSgndGVtcGxhdGluZycpO1xuICBjb25zdCBleHByZXNzaW9uTGFuZ3VhZ2UgPSB1c2VTZXJ2aWNlJDEoJ2V4cHJlc3Npb25MYW5ndWFnZScpO1xuICBpZiAoIXRleHQgfHwgIXRleHQudHJpbSgpKSB7XG4gICAgcmV0dXJuIGpzeChcImRpdlwiLCB7XG4gICAgICBjbGFzczogZWRpdG9yRm9ybUZpZWxkQ2xhc3Nlcyh0eXBlKSxcbiAgICAgIGNoaWxkcmVuOiBqc3hzKFwiZGl2XCIsIHtcbiAgICAgICAgY2xhc3M6IFwiZmpzLWZvcm0tZmllbGQtcGxhY2Vob2xkZXJcIixcbiAgICAgICAgY2hpbGRyZW46IFtqc3goSWNvbiwge1xuICAgICAgICAgIHZpZXdCb3g6IFwiMCAwIDU0IDU0XCJcbiAgICAgICAgfSksIFwiVGV4dCB2aWV3IGlzIGVtcHR5XCJdXG4gICAgICB9KVxuICAgIH0pO1xuICB9XG4gIGlmIChleHByZXNzaW9uTGFuZ3VhZ2UuaXNFeHByZXNzaW9uKHRleHQpKSB7XG4gICAgcmV0dXJuIGpzeChcImRpdlwiLCB7XG4gICAgICBjbGFzczogZWRpdG9yRm9ybUZpZWxkQ2xhc3Nlcyh0eXBlKSxcbiAgICAgIGNoaWxkcmVuOiBqc3hzKFwiZGl2XCIsIHtcbiAgICAgICAgY2xhc3M6IFwiZmpzLWZvcm0tZmllbGQtcGxhY2Vob2xkZXJcIixcbiAgICAgICAgY2hpbGRyZW46IFtqc3goSWNvbiwge1xuICAgICAgICAgIHZpZXdCb3g6IFwiMCAwIDU0IDU0XCJcbiAgICAgICAgfSksIFwiVGV4dCB2aWV3IGlzIHBvcHVsYXRlZCBieSBhbiBleHByZXNzaW9uXCJdXG4gICAgICB9KVxuICAgIH0pO1xuICB9XG4gIGlmICh0ZW1wbGF0aW5nLmlzVGVtcGxhdGUodGV4dCkpIHtcbiAgICByZXR1cm4ganN4KFwiZGl2XCIsIHtcbiAgICAgIGNsYXNzOiBlZGl0b3JGb3JtRmllbGRDbGFzc2VzKHR5cGUpLFxuICAgICAgY2hpbGRyZW46IGpzeHMoXCJkaXZcIiwge1xuICAgICAgICBjbGFzczogXCJmanMtZm9ybS1maWVsZC1wbGFjZWhvbGRlclwiLFxuICAgICAgICBjaGlsZHJlbjogW2pzeChJY29uLCB7XG4gICAgICAgICAgdmlld0JveDogXCIwIDAgNTQgNTRcIlxuICAgICAgICB9KSwgXCJUZXh0IHZpZXcgaXMgdGVtcGxhdGVkXCJdXG4gICAgICB9KVxuICAgIH0pO1xuICB9XG4gIHJldHVybiBqc3goVGV4dCQxLCB7XG4gICAgLi4ucHJvcHMsXG4gICAgZGlzYWJsZUxpbmtzOiB0cnVlXG4gIH0pO1xufVxuRWRpdG9yVGV4dC5jb25maWcgPSBUZXh0JDEuY29uZmlnO1xuXG5mdW5jdGlvbiBFZGl0b3JIdG1sKHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICB0eXBlLFxuICAgIGNvbnRlbnQgPSAnJ1xuICB9ID0gcHJvcHMuZmllbGQ7XG4gIGNvbnN0IEljb24gPSBpY29uc0J5VHlwZSh0eXBlKTtcbiAgY29uc3QgdGVtcGxhdGluZyA9IHVzZVNlcnZpY2UkMSgndGVtcGxhdGluZycpO1xuICBjb25zdCBleHByZXNzaW9uTGFuZ3VhZ2UgPSB1c2VTZXJ2aWNlJDEoJ2V4cHJlc3Npb25MYW5ndWFnZScpO1xuICBpZiAoIWNvbnRlbnQgfHwgIWNvbnRlbnQudHJpbSgpKSB7XG4gICAgcmV0dXJuIGpzeChcImRpdlwiLCB7XG4gICAgICBjbGFzczogZWRpdG9yRm9ybUZpZWxkQ2xhc3Nlcyh0eXBlKSxcbiAgICAgIGNoaWxkcmVuOiBqc3hzKFwiZGl2XCIsIHtcbiAgICAgICAgY2xhc3M6IFwiZmpzLWZvcm0tZmllbGQtcGxhY2Vob2xkZXJcIixcbiAgICAgICAgY2hpbGRyZW46IFtqc3goSWNvbiwge1xuICAgICAgICAgIHZpZXdCb3g6IFwiMCAwIDU0IDU0XCJcbiAgICAgICAgfSksIFwiSHRtbCB2aWV3IGlzIGVtcHR5XCJdXG4gICAgICB9KVxuICAgIH0pO1xuICB9XG4gIGlmIChleHByZXNzaW9uTGFuZ3VhZ2UuaXNFeHByZXNzaW9uKGNvbnRlbnQpKSB7XG4gICAgcmV0dXJuIGpzeChcImRpdlwiLCB7XG4gICAgICBjbGFzczogZWRpdG9yRm9ybUZpZWxkQ2xhc3Nlcyh0eXBlKSxcbiAgICAgIGNoaWxkcmVuOiBqc3hzKFwiZGl2XCIsIHtcbiAgICAgICAgY2xhc3M6IFwiZmpzLWZvcm0tZmllbGQtcGxhY2Vob2xkZXJcIixcbiAgICAgICAgY2hpbGRyZW46IFtqc3goSWNvbiwge1xuICAgICAgICAgIHZpZXdCb3g6IFwiMCAwIDU0IDU0XCJcbiAgICAgICAgfSksIFwiSHRtbCB2aWV3IGlzIHBvcHVsYXRlZCBieSBhbiBleHByZXNzaW9uXCJdXG4gICAgICB9KVxuICAgIH0pO1xuICB9XG4gIGlmICh0ZW1wbGF0aW5nLmlzVGVtcGxhdGUoY29udGVudCkpIHtcbiAgICByZXR1cm4ganN4KFwiZGl2XCIsIHtcbiAgICAgIGNsYXNzOiBlZGl0b3JGb3JtRmllbGRDbGFzc2VzKHR5cGUpLFxuICAgICAgY2hpbGRyZW46IGpzeHMoXCJkaXZcIiwge1xuICAgICAgICBjbGFzczogXCJmanMtZm9ybS1maWVsZC1wbGFjZWhvbGRlclwiLFxuICAgICAgICBjaGlsZHJlbjogW2pzeChJY29uLCB7XG4gICAgICAgICAgdmlld0JveDogXCIwIDAgNTQgNTRcIlxuICAgICAgICB9KSwgXCJIdG1sIHZpZXcgaXMgdGVtcGxhdGVkXCJdXG4gICAgICB9KVxuICAgIH0pO1xuICB9XG4gIHJldHVybiBqc3goSHRtbCwge1xuICAgIC4uLnByb3BzLFxuICAgIGRpc2FibGVMaW5rczogdHJ1ZVxuICB9KTtcbn1cbkVkaXRvckh0bWwuY29uZmlnID0gSHRtbC5jb25maWc7XG5cbmZ1bmN0aW9uIEVkaXRvclRhYmxlKHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBjb2x1bW5zRXhwcmVzc2lvbixcbiAgICBjb2x1bW5zLFxuICAgIGlkLFxuICAgIGxhYmVsXG4gIH0gPSBwcm9wcy5maWVsZDtcbiAgY29uc3Qgc2hvdWxkVXNlTW9ja0NvbHVtbnMgPSB0eXBlb2YgY29sdW1uc0V4cHJlc3Npb24gPT09ICdzdHJpbmcnICYmIGNvbHVtbnNFeHByZXNzaW9uLmxlbmd0aCA+IDAgfHwgQXJyYXkuaXNBcnJheShjb2x1bW5zKSAmJiBjb2x1bW5zLmxlbmd0aCA9PT0gMDtcbiAgY29uc3QgZWRpdG9yQ29sdW1ucyA9IHNob3VsZFVzZU1vY2tDb2x1bW5zID8gW3tcbiAgICBrZXk6ICcxJyxcbiAgICBsYWJlbDogJ0NvbHVtbiAxJ1xuICB9LCB7XG4gICAga2V5OiAnMicsXG4gICAgbGFiZWw6ICdDb2x1bW4gMidcbiAgfSwge1xuICAgIGtleTogJzMnLFxuICAgIGxhYmVsOiAnQ29sdW1uIDMnXG4gIH1dIDogY29sdW1ucztcbiAgY29uc3QgcHJlZml4SWQgPSBgZmpzLWZvcm0tJHtpZH1gO1xuICByZXR1cm4ganN4cyhcImRpdlwiLCB7XG4gICAgY2xhc3M6IGVkaXRvckZvcm1GaWVsZENsYXNzZXMoJ3RhYmxlJywge1xuICAgICAgZGlzYWJsZWQ6IHRydWVcbiAgICB9KSxcbiAgICBjaGlsZHJlbjogW2pzeChMYWJlbCQzLCB7XG4gICAgICBpZDogcHJlZml4SWQsXG4gICAgICBsYWJlbDogbGFiZWxcbiAgICB9KSwganN4KFwiZGl2XCIsIHtcbiAgICAgIGNsYXNzOiBcImZqcy10YWJsZS1taWRkbGUtY29udGFpbmVyXCIsXG4gICAgICBjaGlsZHJlbjoganN4KFwiZGl2XCIsIHtcbiAgICAgICAgY2xhc3M6IFwiZmpzLXRhYmxlLWlubmVyLWNvbnRhaW5lclwiLFxuICAgICAgICBjaGlsZHJlbjoganN4cyhcInRhYmxlXCIsIHtcbiAgICAgICAgICBjbGFzczogY2xhc3NuYW1lcygnZmpzLXRhYmxlJywgJ2Zqcy1kaXNhYmxlZCcpLFxuICAgICAgICAgIGlkOiBwcmVmaXhJZCxcbiAgICAgICAgICBjaGlsZHJlbjogW2pzeChcInRoZWFkXCIsIHtcbiAgICAgICAgICAgIGNsYXNzOiBcImZqcy10YWJsZS1oZWFkXCIsXG4gICAgICAgICAgICBjaGlsZHJlbjoganN4KFwidHJcIiwge1xuICAgICAgICAgICAgICBjbGFzczogXCJmanMtdGFibGUtdHJcIixcbiAgICAgICAgICAgICAgY2hpbGRyZW46IGVkaXRvckNvbHVtbnMubWFwKCh7XG4gICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgIGxhYmVsXG4gICAgICAgICAgICAgIH0pID0+IGpzeChcInRoXCIsIHtcbiAgICAgICAgICAgICAgICBjbGFzczogXCJmanMtdGFibGUtdGhcIixcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogbGFiZWxcbiAgICAgICAgICAgICAgfSwga2V5KSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSksIGpzeChcInRib2R5XCIsIHtcbiAgICAgICAgICAgIGNsYXNzOiBcImZqcy10YWJsZS1ib2R5XCIsXG4gICAgICAgICAgICBjaGlsZHJlbjoganN4KFwidHJcIiwge1xuICAgICAgICAgICAgICBjbGFzczogXCJmanMtdGFibGUtdHJcIixcbiAgICAgICAgICAgICAgY2hpbGRyZW46IGVkaXRvckNvbHVtbnMubWFwKCh7XG4gICAgICAgICAgICAgICAga2V5XG4gICAgICAgICAgICAgIH0pID0+IGpzeChcInRkXCIsIHtcbiAgICAgICAgICAgICAgICBjbGFzczogXCJmanMtdGFibGUtdGRcIixcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogXCJDb250ZW50XCJcbiAgICAgICAgICAgICAgfSwga2V5KSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSldXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH0pXVxuICB9KTtcbn1cbkVkaXRvclRhYmxlLmNvbmZpZyA9IFRhYmxlLmNvbmZpZztcblxuY29uc3QgdHlwZSA9ICdleHByZXNzaW9uJztcbmZ1bmN0aW9uIEVkaXRvckV4cHJlc3Npb25GaWVsZChwcm9wcykge1xuICBjb25zdCB7XG4gICAgZmllbGRcbiAgfSA9IHByb3BzO1xuICBjb25zdCB7XG4gICAgZXhwcmVzc2lvbiA9ICcnLFxuICAgIGtleVxuICB9ID0gZmllbGQ7XG4gIGNvbnN0IEljb24gPSBpY29uc0J5VHlwZSgnZXhwcmVzc2lvbicpO1xuICBjb25zdCBleHByZXNzaW9uTGFuZ3VhZ2UgPSB1c2VTZXJ2aWNlJDEoJ2V4cHJlc3Npb25MYW5ndWFnZScpO1xuICBsZXQgcGxhY2Vob2xkZXJDb250ZW50ID0gJ0V4cHJlc3Npb24gaXMgZW1wdHknO1xuICBpZiAoZXhwcmVzc2lvbi50cmltKCkgJiYgZXhwcmVzc2lvbkxhbmd1YWdlLmlzRXhwcmVzc2lvbihleHByZXNzaW9uKSkge1xuICAgIHBsYWNlaG9sZGVyQ29udGVudCA9IGBFeHByZXNzaW9uIGZvciAnJHtrZXl9J2A7XG4gIH1cbiAgcmV0dXJuIGpzeChcImRpdlwiLCB7XG4gICAgY2xhc3M6IGVkaXRvckZvcm1GaWVsZENsYXNzZXModHlwZSksXG4gICAgY2hpbGRyZW46IGpzeHMoXCJkaXZcIiwge1xuICAgICAgY2xhc3M6IFwiZmpzLWZvcm0tZmllbGQtcGxhY2Vob2xkZXJcIixcbiAgICAgIGNoaWxkcmVuOiBbanN4KEljb24sIHtcbiAgICAgICAgdmlld0JveDogXCIwIDAgNTQgNTRcIlxuICAgICAgfSksIHBsYWNlaG9sZGVyQ29udGVudF1cbiAgICB9KVxuICB9KTtcbn1cbkVkaXRvckV4cHJlc3Npb25GaWVsZC5jb25maWcgPSB7XG4gIC4uLkV4cHJlc3Npb25GaWVsZC5jb25maWcsXG4gIGVzY2FwZUdyaWRSZW5kZXI6IGZhbHNlXG59O1xuXG5mdW5jdGlvbiBFZGl0b3JEb2N1bWVudFByZXZpZXcocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGZpZWxkLFxuICAgIGRvbUlkXG4gIH0gPSBwcm9wcztcbiAgY29uc3Qge1xuICAgIGxhYmVsXG4gIH0gPSBmaWVsZDtcbiAgY29uc3QgSWNvbiA9IGljb25zQnlUeXBlKGZpZWxkLnR5cGUpO1xuICByZXR1cm4ganN4cyhcImRpdlwiLCB7XG4gICAgY2xhc3M6IGVkaXRvckZvcm1GaWVsZENsYXNzZXMoZmllbGQudHlwZSksXG4gICAgY2hpbGRyZW46IFtqc3goTGFiZWwkMywge1xuICAgICAgaWQ6IGRvbUlkLFxuICAgICAgbGFiZWw6IGxhYmVsXG4gICAgfSksIGpzeChcImRpdlwiLCB7XG4gICAgICBjbGFzczogXCJmanMtZG9jdW1lbnRQcmV2aWV3LXBsYWNlaG9sZGVyXCIsXG4gICAgICBpZDogZG9tSWQsXG4gICAgICBjaGlsZHJlbjoganN4cyhcInBcIiwge1xuICAgICAgICBjbGFzczogXCJmanMtZG9jdW1lbnRQcmV2aWV3LXBsYWNlaG9sZGVyLXRleHRcIixcbiAgICAgICAgY2hpbGRyZW46IFtqc3goSWNvbiwge1xuICAgICAgICAgIHdpZHRoOiBcIjMyXCIsXG4gICAgICAgICAgaGVpZ2h0OiBcIjI0XCIsXG4gICAgICAgICAgdmlld0JveDogXCIwIDAgNTYgNTZcIlxuICAgICAgICB9KSwgXCJEb2N1bWVudCBwcmV2aWV3XCJdXG4gICAgICB9KVxuICAgIH0pXVxuICB9KTtcbn1cbkVkaXRvckRvY3VtZW50UHJldmlldy5jb25maWcgPSBEb2N1bWVudFByZXZpZXcuY29uZmlnO1xuXG5jb25zdCBlZGl0b3JGb3JtRmllbGRzID0gW0VkaXRvcklGcmFtZSwgRWRpdG9yVGV4dCwgRWRpdG9ySHRtbCwgRWRpdG9yVGFibGUsIEVkaXRvckV4cHJlc3Npb25GaWVsZCwgRWRpdG9yRG9jdW1lbnRQcmV2aWV3XTtcblxuY2xhc3MgRWRpdG9yRm9ybUZpZWxkcyBleHRlbmRzIEZvcm1GaWVsZHMge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIGVkaXRvckZvcm1GaWVsZHMuZm9yRWFjaChmb3JtRmllbGQgPT4ge1xuICAgICAgdGhpcy5yZWdpc3Rlcihmb3JtRmllbGQuY29uZmlnLnR5cGUsIGZvcm1GaWVsZCk7XG4gICAgfSk7XG4gIH1cbn1cblxuY29uc3QgTW9kdWxhclNlY3Rpb24gPSBwcm9wcyA9PiB7XG4gIGNvbnN0IHtcbiAgICByb290Q2xhc3MsXG4gICAgUm9vdEVsZW1lbnQsXG4gICAgc2VjdGlvbixcbiAgICBjaGlsZHJlblxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IGV2ZW50QnVzID0gdXNlU2VydmljZSQxKCdldmVudEJ1cycpO1xuICBjb25zdCBzZWN0aW9uQ29uZmlnID0gdXNlU2VydmljZSQxKGBjb25maWcuJHtzZWN0aW9ufWApO1xuICBjb25zdCBbcGFyZW50LCBzZXRQYXJlbnRdID0gdXNlU3RhdGUoc2VjdGlvbkNvbmZpZyAmJiBzZWN0aW9uQ29uZmlnLnBhcmVudCB8fCBudWxsKTtcbiAgY29uc3QgW3Nob3VsZFJlbmRlciwgc2V0U2hvdWxkUmVuZGVyXSA9IHVzZVN0YXRlKHRydWUpO1xuICBjb25zdCBQYXJlbnRFbGVtZW50ID0gdXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKHBhcmVudCA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgcGFyZW50ID09PSAnc3RyaW5nJykge1xuICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocGFyZW50KTtcbiAgICAgIGlmICghZWxlbWVudCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFRhcmdldCByb290IGVsZW1lbnQgd2l0aCBzZWxlY3RvciAnJHtwYXJlbnR9JyBub3QgZm91bmQgZm9yIHNlY3Rpb24gJyR7c2VjdGlvbn0nYCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihwYXJlbnQpO1xuICAgIH1cblxuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBpZiAoIShwYXJlbnQgaW5zdGFuY2VvZiBFbGVtZW50KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBUYXJnZXQgcm9vdCBlbGVtZW50IGZvciBzZWN0aW9uICcke3NlY3Rpb259JyBtdXN0IGJlIGEgdmFsaWQgc2VsZWN0b3Igb3IgRE9NIGVsZW1lbnRgKTtcbiAgICB9XG4gICAgcmV0dXJuIHBhcmVudDtcbiAgfSwgW3NlY3Rpb24sIHBhcmVudF0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IG9uQXR0YWNoID0gKHtcbiAgICAgIGNvbnRhaW5lclxuICAgIH0pID0+IHtcbiAgICAgIHNldFBhcmVudChjb250YWluZXIpO1xuICAgICAgc2V0U2hvdWxkUmVuZGVyKHRydWUpO1xuICAgIH07XG4gICAgY29uc3Qgb25EZXRhY2ggPSAoKSA9PiB7XG4gICAgICBzZXRQYXJlbnQobnVsbCk7XG4gICAgICBzZXRTaG91bGRSZW5kZXIoZmFsc2UpO1xuICAgIH07XG4gICAgY29uc3Qgb25SZXNldCA9ICgpID0+IHtcbiAgICAgIHNldFBhcmVudChudWxsKTtcbiAgICAgIHNldFNob3VsZFJlbmRlcih0cnVlKTtcbiAgICB9O1xuICAgIGV2ZW50QnVzLm9uKGAke3NlY3Rpb259LmF0dGFjaGAsIG9uQXR0YWNoKTtcbiAgICBldmVudEJ1cy5vbihgJHtzZWN0aW9ufS5kZXRhY2hgLCBvbkRldGFjaCk7XG4gICAgZXZlbnRCdXMub24oYCR7c2VjdGlvbn0ucmVzZXRgLCBvblJlc2V0KTtcbiAgICBldmVudEJ1cy5maXJlKGAke3NlY3Rpb259LnNlY3Rpb24ucmVuZGVyZWRgKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgZXZlbnRCdXMub2ZmKGAke3NlY3Rpb259LmF0dGFjaGAsIG9uQXR0YWNoKTtcbiAgICAgIGV2ZW50QnVzLm9mZihgJHtzZWN0aW9ufS5kZXRhY2hgLCBvbkRldGFjaCk7XG4gICAgICBldmVudEJ1cy5vZmYoYCR7c2VjdGlvbn0ucmVzZXRgLCBvblJlc2V0KTtcbiAgICAgIGV2ZW50QnVzLmZpcmUoYCR7c2VjdGlvbn0uc2VjdGlvbi5kZXN0cm95ZWRgKTtcbiAgICB9O1xuICB9LCBbZXZlbnRCdXMsIHNlY3Rpb25dKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoc2hvdWxkUmVuZGVyKSB7XG4gICAgICBldmVudEJ1cy5maXJlKGAke3NlY3Rpb259LnJlbmRlcmVkYCwge1xuICAgICAgICBlbGVtZW50OiBQYXJlbnRFbGVtZW50XG4gICAgICB9KTtcbiAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIGV2ZW50QnVzLmZpcmUoYCR7c2VjdGlvbn0uZGVzdHJveWVkYCwge1xuICAgICAgICAgIGVsZW1lbnQ6IFBhcmVudEVsZW1lbnRcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgIH1cbiAgfSwgW2V2ZW50QnVzLCBzZWN0aW9uLCBzaG91bGRSZW5kZXIsIFBhcmVudEVsZW1lbnRdKTtcbiAgY29uc3QgUm9vdCA9IHVzZUNhbGxiYWNrKCh7XG4gICAgY2hpbGRyZW5cbiAgfSkgPT4gUm9vdEVsZW1lbnQgPyBqc3goUm9vdEVsZW1lbnQsIHtcbiAgICBjaGlsZHJlbjogY2hpbGRyZW5cbiAgfSkgOiBqc3goXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogcm9vdENsYXNzLFxuICAgIGNoaWxkcmVuOiBjaGlsZHJlblxuICB9KSwgW3Jvb3RDbGFzcywgUm9vdEVsZW1lbnRdKTtcbiAgcmV0dXJuIHNob3VsZFJlbmRlciA/IHBhcmVudCA/IGNyZWF0ZVBvcnRhbChqc3goUm9vdCwge1xuICAgIGNoaWxkcmVuOiBjaGlsZHJlblxuICB9KSwgUGFyZW50RWxlbWVudCkgOiBqc3goUm9vdCwge1xuICAgIGNoaWxkcmVuOiBjaGlsZHJlblxuICB9KSA6IG51bGw7XG59O1xuXG5jb25zdCBGaWxsQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQoe1xuICBhZGRGaWxsKHVpZCwgcHJvcHMpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZpbGxDb250ZXh0LmFkZEZpbGwoKSB1bmluaXRpYWxpemVkJyk7XG4gIH0sXG4gIHJlbW92ZUZpbGwodWlkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdGaWxsQ29udGV4dC5hZGRGaWxsKCkgdW5pbml0aWFsaXplZCcpO1xuICB9XG59KTtcblxuY29uc3QgRmlsbCA9IHByb3BzID0+IHtcbiAgY29uc3QgdWlkID0gdXNlUmVmJDEoU3ltYm9sKCdmaWxsX3VpZCcpKTtcbiAgY29uc3QgZmlsbENvbnRleHQgPSB1c2VDb250ZXh0JDEoRmlsbENvbnRleHQpO1xuICB1c2VFZmZlY3QkMSgoKSA9PiB7XG4gICAgaWYgKCFmaWxsQ29udGV4dCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBmaWxsQ29udGV4dC5hZGRGaWxsKHtcbiAgICAgIGlkOiB1aWQsXG4gICAgICAuLi5wcm9wc1xuICAgIH0pO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBmaWxsQ29udGV4dC5yZW1vdmVGaWxsKHVpZCk7XG4gICAgfTtcbiAgfSwgW2ZpbGxDb250ZXh0LCBwcm9wc10pO1xuICByZXR1cm4gbnVsbDtcbn07XG5cbmNvbnN0IFNsb3RDb250ZXh0ID0gY3JlYXRlQ29udGV4dCh7XG4gIGZpbGxzOiBbXVxufSk7XG5cbmNvbnN0IFNsb3QgPSBwcm9wcyA9PiB7XG4gIGNvbnN0IHtcbiAgICBuYW1lLFxuICAgIGZpbGxSb290ID0gRmlsbEZyYWdtZW50LFxuICAgIGdyb3VwRm4gPSBfZ3JvdXBCeUdyb3VwTmFtZSxcbiAgICBzZXBhcmF0b3JGbiA9IGtleSA9PiBudWxsLFxuICAgIGxpbWl0XG4gIH0gPSBwcm9wcztcbiAgY29uc3Qge1xuICAgIGZpbGxzXG4gIH0gPSB1c2VDb250ZXh0KFNsb3RDb250ZXh0KTtcbiAgY29uc3QgZmlsdGVyZWQgPSB1c2VNZW1vKCgpID0+IGZpbGxzLmZpbHRlcihmaWxsID0+IGZpbGwuc2xvdCA9PT0gbmFtZSksIFtmaWxscywgbmFtZV0pO1xuICBjb25zdCBjcm9wcGVkID0gdXNlTWVtbygoKSA9PiBsaW1pdCA/IGZpbHRlcmVkLnNsaWNlKDAsIGxpbWl0KSA6IGZpbHRlcmVkLCBbZmlsdGVyZWQsIGxpbWl0XSk7XG4gIGNvbnN0IGdyb3VwcyA9IHVzZU1lbW8oKCkgPT4gZ3JvdXBGbihjcm9wcGVkKSwgW2Nyb3BwZWQsIGdyb3VwRm5dKTtcbiAgY29uc3QgZmlsbHNBbmRTZXBhcmF0b3JzID0gdXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIGJ1aWxkRmlsbHMoZ3JvdXBzLCBmaWxsUm9vdCwgc2VwYXJhdG9yRm4pO1xuICB9LCBbZ3JvdXBzLCBmaWxsUm9vdCwgc2VwYXJhdG9yRm5dKTtcbiAgcmV0dXJuIGZpbGxzQW5kU2VwYXJhdG9ycztcbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhIEZyYWdtZW50IGZvciBhIGZpbGwuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGZpbGwgRmlsbCB0byBiZSByZW5kZXJlZFxuICogQHJldHVybnMge09iamVjdH0gUHJlYWN0IEZyYWdtZW50IGNvbnRhaW5pbmcgZmlsbCdzIGNoaWxkcmVuXG4gKi9cbmNvbnN0IEZpbGxGcmFnbWVudCA9IGZpbGwgPT4ganN4KEZyYWdtZW50LCB7XG4gIGNoaWxkcmVuOiBmaWxsLmNoaWxkcmVuXG59LCBmaWxsLmlkKTtcblxuLyoqXG4gKiBDcmVhdGVzIGFuIGFycmF5IG9mIGZpbGxzLCB3aXRoIHNlcGFyYXRvcnMgaW5zZXJ0ZWQgYmV0d2VlbiBncm91cHMuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gZ3JvdXBzIEdyb3VwcyBvZiBmaWxsc1xuICogQHBhcmFtIHtGdW5jdGlvbn0gZmlsbFJlbmRlcmVyIEZ1bmN0aW9uIHRvIGNyZWF0ZSBhIGZpbGxcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHNlcGFyYXRvclJlbmRlcmVyIEZ1bmN0aW9uIHRvIGNyZWF0ZSBhIHNlcGFyYXRvclxuICogQHJldHVybnMge0FycmF5fSBBcnJheSBvZiBmaWxscyBhbmQgc2VwYXJhdG9yc1xuICovXG5jb25zdCBidWlsZEZpbGxzID0gKGdyb3VwcywgZmlsbFJlbmRlcmVyLCBzZXBhcmF0b3JSZW5kZXJlcikgPT4ge1xuICBjb25zdCByZXN1bHQgPSBbXTtcbiAgZ3JvdXBzLmZvckVhY2goKGFycmF5LCBpZHgpID0+IHtcbiAgICBpZiAoaWR4ICE9PSAwKSB7XG4gICAgICBjb25zdCBzZXBhcmF0b3IgPSBzZXBhcmF0b3JSZW5kZXJlcihgX19zZXBhcmF0b3JfJHtpZHh9YCk7XG4gICAgICBpZiAoc2VwYXJhdG9yKSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKHNlcGFyYXRvcik7XG4gICAgICB9XG4gICAgfVxuICAgIGFycmF5LmZvckVhY2goZmlsbCA9PiB7XG4gICAgICByZXN1bHQucHVzaChmaWxsUmVuZGVyZXIoZmlsbCkpO1xuICAgIH0pO1xuICB9KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbi8qKlxuICogR3JvdXBzIGZpbGxzIGJ5IGdyb3VwIG5hbWUgcHJvcGVydHkuXG4gKi9cbmNvbnN0IF9ncm91cEJ5R3JvdXBOYW1lID0gZmlsbHMgPT4ge1xuICBjb25zdCBncm91cHMgPSBbXTtcbiAgY29uc3QgZ3JvdXBzQnlJZCA9IHt9O1xuICBmaWxscy5mb3JFYWNoKGZ1bmN0aW9uIChmaWxsKSB7XG4gICAgY29uc3Qge1xuICAgICAgZ3JvdXA6IGdyb3VwTmFtZSA9ICd6X2RlZmF1bHQnXG4gICAgfSA9IGZpbGw7XG4gICAgbGV0IGdyb3VwID0gZ3JvdXBzQnlJZFtncm91cE5hbWVdO1xuICAgIGlmICghZ3JvdXApIHtcbiAgICAgIGdyb3Vwc0J5SWRbZ3JvdXBOYW1lXSA9IGdyb3VwID0gW107XG4gICAgICBncm91cHMucHVzaChncm91cCk7XG4gICAgfVxuICAgIGdyb3VwLnB1c2goZmlsbCk7XG4gIH0pO1xuICBncm91cHMuZm9yRWFjaChncm91cCA9PiBncm91cC5zb3J0KF9jb21wYXJlUHJpb3JpdHkpKTtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKGdyb3Vwc0J5SWQpLnNvcnQoKS5tYXAoaWQgPT4gZ3JvdXBzQnlJZFtpZF0pO1xufTtcblxuLyoqXG4gKiBDb21wYXJlcyBmaWxscyBieSBwcmlvcml0eS5cbiAqL1xuY29uc3QgX2NvbXBhcmVQcmlvcml0eSA9IChhLCBiKSA9PiB7XG4gIHJldHVybiAoYi5wcmlvcml0eSB8fCAwKSAtIChhLnByaW9yaXR5IHx8IDApO1xufTtcblxuY29uc3Qgbm9vcCQxID0gKCkgPT4ge307XG5jb25zdCBTbG90RmlsbFJvb3QgPSBwcm9wcyA9PiB7XG4gIGNvbnN0IFtmaWxscywgc2V0RmlsbHNdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCB7XG4gICAgb25TZXRGaWxsID0gbm9vcCQxLFxuICAgIG9uUmVtb3ZlRmlsbCA9IG5vb3AkMVxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IGZpbGxDb250ZXh0ID0gdXNlTWVtbygoKSA9PiAoe1xuICAgIGFkZEZpbGw6IGZpbGwgPT4ge1xuICAgICAgc2V0RmlsbHMoZmlsbHMgPT4gWy4uLmZpbGxzLmZpbHRlcihmID0+IGYuaWQgIT09IGZpbGwuaWQpLCBmaWxsXSk7XG4gICAgICBvblNldEZpbGwoZmlsbCk7XG4gICAgfSxcbiAgICByZW1vdmVGaWxsOiBpZCA9PiB7XG4gICAgICBzZXRGaWxscyhmaWxscyA9PiBmaWxscy5maWx0ZXIoZiA9PiBmLmlkICE9PSBpZCkpO1xuICAgICAgb25SZW1vdmVGaWxsKGlkKTtcbiAgICB9XG4gIH0pLCBbb25SZW1vdmVGaWxsLCBvblNldEZpbGxdKTtcbiAgY29uc3Qgc2xvdENvbnRleHQgPSB1c2VNZW1vKCgpID0+ICh7XG4gICAgZmlsbHNcbiAgfSksIFtmaWxsc10pO1xuICByZXR1cm4ganN4KFNsb3RDb250ZXh0LlByb3ZpZGVyLCB7XG4gICAgdmFsdWU6IHNsb3RDb250ZXh0LFxuICAgIGNoaWxkcmVuOiBqc3goRmlsbENvbnRleHQuUHJvdmlkZXIsIHtcbiAgICAgIHZhbHVlOiBmaWxsQ29udGV4dCxcbiAgICAgIGNoaWxkcmVuOiBwcm9wcy5jaGlsZHJlblxuICAgIH0pXG4gIH0pO1xufTtcblxuZnVuY3Rpb24gUGFsZXR0ZUVudHJ5KHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICB0eXBlLFxuICAgIGxhYmVsLFxuICAgIGljb24sXG4gICAgaWNvblVybCxcbiAgICBnZXRQYWxldHRlSWNvblxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IG1vZGVsaW5nID0gdXNlU2VydmljZSQxKCdtb2RlbGluZycpO1xuICBjb25zdCBmb3JtRWRpdG9yID0gdXNlU2VydmljZSQxKCdmb3JtRWRpdG9yJyk7XG4gIGNvbnN0IEljb24gPSBnZXRQYWxldHRlSWNvbih7XG4gICAgaWNvbixcbiAgICBpY29uVXJsLFxuICAgIGxhYmVsLFxuICAgIHR5cGVcbiAgfSk7XG4gIGNvbnN0IG9uS2V5RG93biA9IGV2ZW50ID0+IHtcbiAgICBpZiAoZXZlbnQuY29kZSA9PT0gJ0VudGVyJykge1xuICAgICAgY29uc3Qge1xuICAgICAgICBmaWVsZFR5cGU6IHR5cGVcbiAgICAgIH0gPSBldmVudC50YXJnZXQuZGF0YXNldDtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgc2NoZW1hXG4gICAgICB9ID0gZm9ybUVkaXRvci5fZ2V0U3RhdGUoKTtcblxuICAgICAgLy8gYWRkIG5ldyBmb3JtIGZpZWxkIHRvIGxhc3QgcG9zaXRpb25cbiAgICAgIG1vZGVsaW5nLmFkZEZvcm1GaWVsZCh7XG4gICAgICAgIHR5cGVcbiAgICAgIH0sIHNjaGVtYSwgc2NoZW1hLmNvbXBvbmVudHMubGVuZ3RoKTtcbiAgICB9XG4gIH07XG4gIHJldHVybiBqc3hzKFwiYnV0dG9uXCIsIHtcbiAgICB0eXBlOiBcImJ1dHRvblwiLFxuICAgIGNsYXNzOiBcImZqcy1wYWxldHRlLWZpZWxkIGZqcy1kcmFnLWNvcHkgZmpzLW5vLWRyb3BcIixcbiAgICBcImRhdGEtZmllbGQtdHlwZVwiOiB0eXBlLFxuICAgIHRpdGxlOiBgQ3JlYXRlICR7Z2V0SW5kZWZpbml0ZUFydGljbGUodHlwZSl9ICR7bGFiZWx9IGVsZW1lbnRgLFxuICAgIG9uS2V5RG93bjogb25LZXlEb3duLFxuICAgIGNoaWxkcmVuOiBbSWNvbiA/IGpzeChJY29uLCB7XG4gICAgICBjbGFzczogXCJmanMtcGFsZXR0ZS1maWVsZC1pY29uXCIsXG4gICAgICB3aWR0aDogXCIzNlwiLFxuICAgICAgaGVpZ2h0OiBcIjM2XCIsXG4gICAgICB2aWV3Qm94OiBcIjAgMCA1NCA1NFwiXG4gICAgfSkgOiBudWxsLCBqc3goXCJzcGFuXCIsIHtcbiAgICAgIGNsYXNzOiBcImZqcy1wYWxldHRlLWZpZWxkLXRleHRcIixcbiAgICAgIGNoaWxkcmVuOiBsYWJlbFxuICAgIH0pXVxuICB9KTtcbn1cblxuLy8gaGVscGVycyAvLy8vLy8vLy8vL1xuXG5mdW5jdGlvbiBnZXRJbmRlZmluaXRlQXJ0aWNsZSh0eXBlKSB7XG4gIGlmIChbJ2ltYWdlJ10uaW5jbHVkZXModHlwZSkpIHtcbiAgICByZXR1cm4gJ2FuJztcbiAgfVxuICByZXR1cm4gJ2EnO1xufVxuXG5jb25zdCBQQUxFVFRFX0dST1VQUyA9IFt7XG4gIGxhYmVsOiAnSW5wdXQnLFxuICBpZDogJ2Jhc2ljLWlucHV0J1xufSwge1xuICBsYWJlbDogJ1NlbGVjdGlvbicsXG4gIGlkOiAnc2VsZWN0aW9uJ1xufSwge1xuICBsYWJlbDogJ1ByZXNlbnRhdGlvbicsXG4gIGlkOiAncHJlc2VudGF0aW9uJ1xufSwge1xuICBsYWJlbDogJ0NvbnRhaW5lcnMnLFxuICBpZDogJ2NvbnRhaW5lcidcbn0sIHtcbiAgbGFiZWw6ICdBY3Rpb24nLFxuICBpZDogJ2FjdGlvbidcbn1dO1xuZnVuY3Rpb24gUGFsZXR0ZShwcm9wcykge1xuICBjb25zdCBmb3JtRmllbGRzID0gdXNlU2VydmljZSQxKCdmb3JtRmllbGRzJyk7XG4gIGNvbnN0IGluaXRpYWxQYWxldHRlRW50cmllcyA9IHVzZVJlZihjb2xsZWN0UGFsZXR0ZUVudHJpZXMoZm9ybUZpZWxkcykpO1xuICBjb25zdCBbcGFsZXR0ZUVudHJpZXMsIHNldFBhbGV0dGVFbnRyaWVzXSA9IHVzZVN0YXRlKGluaXRpYWxQYWxldHRlRW50cmllcy5jdXJyZW50KTtcbiAgY29uc3QgW3NlYXJjaFRlcm0sIHNldFNlYXJjaFRlcm1dID0gdXNlU3RhdGUoJycpO1xuXG4gIC8qKiBAdHlwZSB7aW1wb3J0KFwicHJlYWN0XCIpLlJlZk9iamVjdDxIVE1MSW5wdXRFbGVtZW50Pn0gKi9cbiAgY29uc3QgaW5wdXRSZWYgPSB1c2VSZWYoKTtcbiAgY29uc3QgZ3JvdXBzID0gZ3JvdXBFbnRyaWVzKHBhbGV0dGVFbnRyaWVzKTtcbiAgY29uc3Qgc2ltcGxpZnlTdHJpbmcgPSB1c2VDYWxsYmFjayhzdHIgPT4ge1xuICAgIHJldHVybiBzdHIudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9cXHMrL2csICcnKTtcbiAgfSwgW10pO1xuICBjb25zdCBmaWx0ZXIgPSB1c2VDYWxsYmFjayhlbnRyeSA9PiB7XG4gICAgY29uc3Qgc2ltcGxpZmllZFNlYXJjaFRlcm0gPSBzaW1wbGlmeVN0cmluZyhzZWFyY2hUZXJtKTtcbiAgICBpZiAoIXNpbXBsaWZpZWRTZWFyY2hUZXJtKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgY29uc3Qgc2ltcGxpZmllZEVudHJ5TGFiZWwgPSBzaW1wbGlmeVN0cmluZyhlbnRyeS5sYWJlbCk7XG4gICAgY29uc3Qgc2ltcGxpZmllZEVudHJ5VHlwZSA9IHNpbXBsaWZ5U3RyaW5nKGVudHJ5LnR5cGUpO1xuICAgIHJldHVybiBzaW1wbGlmaWVkRW50cnlMYWJlbC5pbmNsdWRlcyhzaW1wbGlmaWVkU2VhcmNoVGVybSkgfHwgc2ltcGxpZmllZEVudHJ5VHlwZS5pbmNsdWRlcyhzaW1wbGlmaWVkU2VhcmNoVGVybSk7XG4gIH0sIFtzZWFyY2hUZXJtLCBzaW1wbGlmeVN0cmluZ10pO1xuXG4gIC8vIGZpbHRlciBlbnRyaWVzIG9uIHNlYXJjaCBjaGFuZ2VcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBlbnRyaWVzID0gaW5pdGlhbFBhbGV0dGVFbnRyaWVzLmN1cnJlbnQuZmlsdGVyKGZpbHRlcik7XG4gICAgc2V0UGFsZXR0ZUVudHJpZXMoZW50cmllcyk7XG4gIH0sIFtmaWx0ZXIsIHNlYXJjaFRlcm1dKTtcbiAgY29uc3QgaGFuZGxlSW5wdXQgPSB1c2VDYWxsYmFjayhldmVudCA9PiB7XG4gICAgc2V0U2VhcmNoVGVybSgoKSA9PiBldmVudC50YXJnZXQudmFsdWUpO1xuICB9LCBbc2V0U2VhcmNoVGVybV0pO1xuICBjb25zdCBoYW5kbGVDbGVhciA9IHVzZUNhbGxiYWNrKGV2ZW50ID0+IHtcbiAgICBzZXRTZWFyY2hUZXJtKCcnKTtcbiAgICBpbnB1dFJlZi5jdXJyZW50LmZvY3VzKCk7XG4gIH0sIFtpbnB1dFJlZiwgc2V0U2VhcmNoVGVybV0pO1xuICByZXR1cm4ganN4cyhcImRpdlwiLCB7XG4gICAgY2xhc3M6IFwiZmpzLXBhbGV0dGVcIixcbiAgICBjaGlsZHJlbjogW2pzeChcImRpdlwiLCB7XG4gICAgICBjbGFzczogXCJmanMtcGFsZXR0ZS1oZWFkZXJcIixcbiAgICAgIHRpdGxlOiBcIkNvbXBvbmVudHNcIixcbiAgICAgIGNoaWxkcmVuOiBcIkNvbXBvbmVudHNcIlxuICAgIH0pLCBqc3hzKFwiZGl2XCIsIHtcbiAgICAgIGNsYXNzOiBcImZqcy1wYWxldHRlLXNlYXJjaC1jb250YWluZXJcIixcbiAgICAgIGNoaWxkcmVuOiBbanN4KFwic3BhblwiLCB7XG4gICAgICAgIGNsYXNzOiBcImZqcy1wYWxldHRlLXNlYXJjaC1pY29uXCIsXG4gICAgICAgIGNoaWxkcmVuOiBqc3goU3ZnU2VhcmNoLCB7fSlcbiAgICAgIH0pLCBqc3goXCJpbnB1dFwiLCB7XG4gICAgICAgIGNsYXNzOiBcImZqcy1wYWxldHRlLXNlYXJjaFwiLFxuICAgICAgICByZWY6IGlucHV0UmVmLFxuICAgICAgICB0eXBlOiBcInRleHRcIixcbiAgICAgICAgcGxhY2Vob2xkZXI6IFwiU2VhcmNoIGNvbXBvbmVudHNcIixcbiAgICAgICAgdmFsdWU6IHNlYXJjaFRlcm0sXG4gICAgICAgIG9uSW5wdXQ6IGhhbmRsZUlucHV0XG4gICAgICB9KSwgc2VhcmNoVGVybSAmJiBqc3goXCJidXR0b25cIiwge1xuICAgICAgICB0eXBlOiBcImJ1dHRvblwiLFxuICAgICAgICB0aXRsZTogXCJDbGVhciBjb250ZW50XCIsXG4gICAgICAgIGNsYXNzOiBcImZqcy1wYWxldHRlLXNlYXJjaC1jbGVhclwiLFxuICAgICAgICBvbkNsaWNrOiBoYW5kbGVDbGVhcixcbiAgICAgICAgY2hpbGRyZW46IGpzeChTdmdDbG9zZSwge30pXG4gICAgICB9KV1cbiAgICB9KSwganN4cyhcImRpdlwiLCB7XG4gICAgICBjbGFzczogXCJmanMtcGFsZXR0ZS1lbnRyaWVzXCIsXG4gICAgICBjaGlsZHJlbjogW2dyb3Vwcy5tYXAoKHtcbiAgICAgICAgbGFiZWwsXG4gICAgICAgIGVudHJpZXMsXG4gICAgICAgIGlkXG4gICAgICB9KSA9PiBqc3hzKFwiZGl2XCIsIHtcbiAgICAgICAgY2xhc3M6IFwiZmpzLXBhbGV0dGUtZ3JvdXBcIixcbiAgICAgICAgXCJkYXRhLWdyb3VwLWlkXCI6IGlkLFxuICAgICAgICBjaGlsZHJlbjogW2pzeChcInNwYW5cIiwge1xuICAgICAgICAgIGNsYXNzOiBcImZqcy1wYWxldHRlLWdyb3VwLXRpdGxlXCIsXG4gICAgICAgICAgY2hpbGRyZW46IGxhYmVsXG4gICAgICAgIH0pLCBqc3goXCJkaXZcIiwge1xuICAgICAgICAgIGNsYXNzOiBcImZqcy1wYWxldHRlLWZpZWxkcyBmanMtZHJhZy1jb250YWluZXIgZmpzLW5vLWRyb3BcIixcbiAgICAgICAgICBjaGlsZHJlbjogZW50cmllcy5tYXAoZW50cnkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGpzeChQYWxldHRlRW50cnksIHtcbiAgICAgICAgICAgICAgZ2V0UGFsZXR0ZUljb246IGdldFBhbGV0dGVJY29uLFxuICAgICAgICAgICAgICAuLi5lbnRyeVxuICAgICAgICAgICAgfSwgZW50cnkudHlwZSk7XG4gICAgICAgICAgfSlcbiAgICAgICAgfSldXG4gICAgICB9LCBpZCkpLCBncm91cHMubGVuZ3RoID09IDAgJiYganN4KFwiZGl2XCIsIHtcbiAgICAgICAgY2xhc3M6IFwiZmpzLXBhbGV0dGUtbm8tZW50cmllc1wiLFxuICAgICAgICBjaGlsZHJlbjogXCJObyBjb21wb25lbnRzIGZvdW5kLlwiXG4gICAgICB9KV1cbiAgICB9KSwganN4KFwiZGl2XCIsIHtcbiAgICAgIGNsYXNzOiBcImZqcy1wYWxldHRlLWZvb3RlclwiLFxuICAgICAgY2hpbGRyZW46IGpzeChTbG90LCB7XG4gICAgICAgIG5hbWU6IFwiZWRpdG9yLXBhbGV0dGVfX2Zvb3RlclwiLFxuICAgICAgICBmaWxsUm9vdDogRmlsbFJvb3RcbiAgICAgIH0pXG4gICAgfSldXG4gIH0pO1xufVxuY29uc3QgRmlsbFJvb3QgPSBmaWxsID0+IGpzeChcImRpdlwiLCB7XG4gIGNsYXNzTmFtZTogXCJmanMtcGFsZXR0ZS1mb290ZXItZmlsbFwiLFxuICBjaGlsZHJlbjogZmlsbC5jaGlsZHJlblxufSk7XG5cbi8vIGhlbHBlcnMgLy8vLy8vL1xuXG5mdW5jdGlvbiBncm91cEVudHJpZXMoZW50cmllcykge1xuICBjb25zdCBncm91cHMgPSBQQUxFVFRFX0dST1VQUy5tYXAoZ3JvdXAgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICAuLi5ncm91cCxcbiAgICAgIGVudHJpZXM6IFtdXG4gICAgfTtcbiAgfSk7XG4gIGNvbnN0IGdldEdyb3VwID0gaWQgPT4gZ3JvdXBzLmZpbmQoZ3JvdXAgPT4gaWQgPT09IGdyb3VwLmlkKTtcbiAgZW50cmllcy5mb3JFYWNoKGVudHJ5ID0+IHtcbiAgICBjb25zdCB7XG4gICAgICBncm91cFxuICAgIH0gPSBlbnRyeTtcbiAgICBnZXRHcm91cChncm91cCkuZW50cmllcy5wdXNoKGVudHJ5KTtcbiAgfSk7XG4gIHJldHVybiBncm91cHMuZmlsdGVyKGcgPT4gZy5lbnRyaWVzLmxlbmd0aCk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIGxpc3Qgb2YgcGFsZXR0ZSBlbnRyaWVzLlxuICpcbiAqIEBwYXJhbSB7Rm9ybUZpZWxkc30gZm9ybUZpZWxkc1xuICogQHJldHVybnMge0FycmF5PFBhbGV0dGVFbnRyeT59XG4gKi9cbmZ1bmN0aW9uIGNvbGxlY3RQYWxldHRlRW50cmllcyhmb3JtRmllbGRzKSB7XG4gIHJldHVybiBPYmplY3QuZW50cmllcyhmb3JtRmllbGRzLl9mb3JtRmllbGRzKS5tYXAoKFt0eXBlLCBmb3JtRmllbGRdKSA9PiB7XG4gICAgY29uc3Qge1xuICAgICAgY29uZmlnOiBmaWVsZENvbmZpZ1xuICAgIH0gPSBmb3JtRmllbGQ7XG4gICAgcmV0dXJuIHtcbiAgICAgIC8vIGZpZWxkQ29uZmlnLmxhYmVsIGlzIHVzZWQgdG8gbWFpbnRhaW4gYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgd2l0aCBjdXN0b20gZm9ybSBmaWVsZHNcbiAgICAgIGxhYmVsOiBmaWVsZENvbmZpZy5uYW1lIHx8IGZpZWxkQ29uZmlnLmxhYmVsLFxuICAgICAgdHlwZTogdHlwZSxcbiAgICAgIGdyb3VwOiBmaWVsZENvbmZpZy5ncm91cCxcbiAgICAgIGljb246IGZpZWxkQ29uZmlnLmljb24sXG4gICAgICBpY29uVXJsOiBmaWVsZENvbmZpZy5pY29uVXJsXG4gICAgfTtcbiAgfSkuZmlsdGVyKCh7XG4gICAgdHlwZVxuICB9KSA9PiB0eXBlICE9PSAnZGVmYXVsdCcpO1xufVxuXG4vKipcbiAqIFRoZXJlIGFyZSB2YXJpb3VzIG9wdGlvbnMgdG8gc3BlY2lmeSBhbiBpY29uIGZvciBhIHBhbGV0dGUgZW50cnkuXG4gKlxuICogYSkgdmlhIGBpY29uVXJsYCBwcm9wZXJ0eSBpbiBhIGZvcm0gZmllbGQgY29uZmlnXG4gKiBiKSB2aWEgYGljb25gIHByb3BlcnR5IGluIGEgZm9ybSBmaWVsZCBjb25maWdcbiAqIGMpIHZpYSBzdGF0aWNhbGx5IGRlZmluZWQgaWNvbnNCeVR5cGUgKGZhbGxiYWNrKVxuICovXG5mdW5jdGlvbiBnZXRQYWxldHRlSWNvbihlbnRyeSkge1xuICBjb25zdCB7XG4gICAgaWNvbixcbiAgICBpY29uVXJsLFxuICAgIHR5cGUsXG4gICAgbGFiZWxcbiAgfSA9IGVudHJ5O1xuICBsZXQgSWNvbjtcbiAgaWYgKGljb25VcmwpIHtcbiAgICBJY29uID0gZnVuY3Rpb24gSWNvbigpIHtcbiAgICAgIHJldHVybiBqc3goXCJpbWdcIiwge1xuICAgICAgICBjbGFzczogXCJmanMtZmllbGQtaWNvbi1pbWFnZVwiLFxuICAgICAgICB3aWR0aDogMzYsXG4gICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgbWFyZ2luOiAnYXV0bydcbiAgICAgICAgfSxcbiAgICAgICAgYWx0OiBsYWJlbCxcbiAgICAgICAgc3JjOiBzYW5pdGl6ZUltYWdlU291cmNlKGljb25VcmwpXG4gICAgICB9KTtcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIEljb24gPSBpY29uIHx8IGljb25zQnlUeXBlKHR5cGUpO1xuICB9XG4gIHJldHVybiBJY29uO1xufVxuXG5jb25zdCBJbmplY3RlZFJlbmRlcnNSb290ID0gKCkgPT4ge1xuICBjb25zdCByZW5kZXJJbmplY3RvciA9IHVzZVNlcnZpY2UkMSgncmVuZGVySW5qZWN0b3InKTtcbiAgY29uc3QgaW5qZWN0ZWRSZW5kZXJlcnMgPSByZW5kZXJJbmplY3Rvci5mZXRjaFJlbmRlcmVycygpO1xuICBjb25zdCBpbmplY3RlZFByb3BzID0gdXNlTWVtbygoKSA9PiAoe1xuICAgIHVzZVNlcnZpY2U6IHVzZVNlcnZpY2UkMSxcbiAgICBjb21wb25lbnRzOiB7XG4gICAgICBGaWxsLFxuICAgICAgU2xvdFxuICAgIH1cbiAgfSksIFtdKTtcbiAgcmV0dXJuIGpzeChGcmFnbWVudCwge1xuICAgIGNoaWxkcmVuOiBpbmplY3RlZFJlbmRlcmVycy5tYXAoKHtcbiAgICAgIFJlbmRlcmVyXG4gICAgfSwgaW5kZXgpID0+IGpzeChSZW5kZXJlciwge1xuICAgICAgLi4uaW5qZWN0ZWRQcm9wc1xuICAgIH0sIGluZGV4KSlcbiAgfSk7XG59O1xuXG5jb25zdCBDVVJTT1JfQ0xTX1BBVFRFUk4gPSAvXmZqcy1jdXJzb3ItLiokLztcbmZ1bmN0aW9uIHNldChtb2RlKSB7XG4gIGNvbnN0IGNsYXNzZXMkMSA9IGNsYXNzZXMoZG9jdW1lbnQuYm9keSk7XG4gIGNsYXNzZXMkMS5yZW1vdmVNYXRjaGluZyhDVVJTT1JfQ0xTX1BBVFRFUk4pO1xuICBpZiAobW9kZSkge1xuICAgIGNsYXNzZXMkMS5hZGQoJ2Zqcy1jdXJzb3ItJyArIG1vZGUpO1xuICB9XG59XG5mdW5jdGlvbiB1bnNldCgpIHtcbiAgc2V0KG51bGwpO1xufVxuXG5jb25zdCBEUkFHX0NPTlRBSU5FUl9DTFMgPSAnZmpzLWRyYWctY29udGFpbmVyJztcbmNvbnN0IERST1BfQ09OVEFJTkVSX1ZFUlRJQ0FMX0NMUyA9ICdmanMtZHJvcC1jb250YWluZXItdmVydGljYWwnO1xuY29uc3QgRFJPUF9DT05UQUlORVJfSE9SSVpPTlRBTF9DTFMgPSAnZmpzLWRyb3AtY29udGFpbmVyLWhvcml6b250YWwnO1xuY29uc3QgRFJBR19NT1ZFX0NMUyA9ICdmanMtZHJhZy1tb3ZlJztcbmNvbnN0IERSQUdfUk9XX01PVkVfQ0xTID0gJ2Zqcy1kcmFnLXJvdy1tb3ZlJztcbmNvbnN0IERSQUdfQ09QWV9DTFMgPSAnZmpzLWRyYWctY29weSc7XG5jb25zdCBEUkFHX05PX0RST1BfQ0xTID0gJ2Zqcy1uby1kcm9wJztcbmNvbnN0IERSQUdfTk9fTU9WRV9DTFMgPSAnZmpzLW5vLW1vdmUnO1xuY29uc3QgRVJST1JfRFJPUF9DTFMgPSAnZmpzLWVycm9yLWRyb3AnO1xuXG4vKipcbiAqIEB0eXBlZGVmIHsgeyBpZDogU3RyaW5nLCBjb21wb25lbnRzOiBBcnJheTxhbnk+IH0gfSBGb3JtUm93XG4gKi9cblxuY2xhc3MgRHJhZ2dpbmcge1xuICAvKipcbiAgICogQGNvbnN0cnVjdG9yXG4gICAqXG4gICAqIEBwYXJhbSB7IGltcG9ydCgnLi4vLi4vY29yZS9Gb3JtRmllbGRSZWdpc3RyeScpLkZvcm1GaWVsZFJlZ2lzdHJ5IH0gZm9ybUZpZWxkUmVnaXN0cnlcbiAgICogQHBhcmFtIHsgaW1wb3J0KCcuLi8uLi9jb3JlL0Zvcm1MYXlvdXRlcicpLkZvcm1MYXlvdXRlciB9IGZvcm1MYXlvdXRlclxuICAgKiBAcGFyYW0geyBpbXBvcnQoJy4uLy4uL2NvcmUvRm9ybUxheW91dFZhbGlkYXRvcicpLkZvcm1MYXlvdXRWYWxpZGF0b3IgfSBmb3JtTGF5b3V0VmFsaWRhdG9yXG4gICAqIEBwYXJhbSB7IGltcG9ydCgnLi4vLi4vY29yZS9FdmVudEJ1cycpLkV2ZW50QnVzIH0gZXZlbnRCdXNcbiAgICogQHBhcmFtIHsgaW1wb3J0KCcuLi9tb2RlbGluZy9Nb2RlbGluZycpLk1vZGVsaW5nIH0gbW9kZWxpbmdcbiAgICogQHBhcmFtIHsgaW1wb3J0KCdAYnBtbi1pby9mb3JtLWpzLXZpZXdlcicpLlBhdGhSZWdpc3RyeSB9IHBhdGhSZWdpc3RyeVxuICAgKi9cbiAgY29uc3RydWN0b3IoZm9ybUZpZWxkUmVnaXN0cnksIGZvcm1MYXlvdXRlciwgZm9ybUxheW91dFZhbGlkYXRvciwgZXZlbnRCdXMsIG1vZGVsaW5nLCBwYXRoUmVnaXN0cnkpIHtcbiAgICB0aGlzLl9mb3JtRmllbGRSZWdpc3RyeSA9IGZvcm1GaWVsZFJlZ2lzdHJ5O1xuICAgIHRoaXMuX2Zvcm1MYXlvdXRlciA9IGZvcm1MYXlvdXRlcjtcbiAgICB0aGlzLl9mb3JtTGF5b3V0VmFsaWRhdG9yID0gZm9ybUxheW91dFZhbGlkYXRvcjtcbiAgICB0aGlzLl9ldmVudEJ1cyA9IGV2ZW50QnVzO1xuICAgIHRoaXMuX21vZGVsaW5nID0gbW9kZWxpbmc7XG4gICAgdGhpcy5fcGF0aFJlZ2lzdHJ5ID0gcGF0aFJlZ2lzdHJ5O1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZXMgcG9zaXRpb24gaW4gZm9ybSBzY2hlbWEgZ2l2ZW4gdGhlIGRyb3BwZWQgcGxhY2UuXG4gICAqXG4gICAqIEBwYXJhbSB7IEZvcm1Sb3cgfSB0YXJnZXRSb3dcbiAgICogQHBhcmFtIHsgYW55IH0gdGFyZ2V0Rm9ybUZpZWxkXG4gICAqIEBwYXJhbSB7IEhUTUxFbGVtZW50IH0gc2libGluZ1xuICAgKiBAcmV0dXJucyB7IG51bWJlciB9XG4gICAqL1xuICBnZXRUYXJnZXRJbmRleCh0YXJnZXRSb3csIHRhcmdldEZvcm1GaWVsZCwgc2libGluZykge1xuICAgIC8qKiBAdHlwZSBIVE1MRWxlbWVudCAqL1xuICAgIGNvbnN0IHNpYmxpbmdGb3JtRmllbGROb2RlID0gc2libGluZyAmJiBzaWJsaW5nLnF1ZXJ5U2VsZWN0b3IoJy5manMtZWxlbWVudCcpO1xuICAgIGNvbnN0IHNpYmxpbmdGb3JtRmllbGQgPSBzaWJsaW5nRm9ybUZpZWxkTm9kZSAmJiB0aGlzLl9mb3JtRmllbGRSZWdpc3RyeS5nZXQoc2libGluZ0Zvcm1GaWVsZE5vZGUuZGF0YXNldC5pZCk7XG5cbiAgICAvLyAoMSkgZHJvcHBlZCBiZWZvcmUgZXhpc3RpbmcgZmllbGQgPT4gcGxhY2UgYmVmb3JlXG4gICAgaWYgKHNpYmxpbmdGb3JtRmllbGQpIHtcbiAgICAgIHJldHVybiBnZXRGb3JtRmllbGRJbmRleCQxKHRhcmdldEZvcm1GaWVsZCwgc2libGluZ0Zvcm1GaWVsZCk7XG4gICAgfVxuXG4gICAgLy8gKDIpIGRyb3BwZWQgaW4gcm93ID0+IHBsYWNlIGF0IHRoZSBlbmQgb2Ygcm93IChhZnRlciBsYXN0IGZpZWxkIGluIHJvdylcbiAgICBpZiAodGFyZ2V0Um93KSB7XG4gICAgICByZXR1cm4gZ2V0Rm9ybUZpZWxkSW5kZXgkMSh0YXJnZXRGb3JtRmllbGQsIHRoaXMuX2Zvcm1GaWVsZFJlZ2lzdHJ5LmdldCh0YXJnZXRSb3cuY29tcG9uZW50c1t0YXJnZXRSb3cuY29tcG9uZW50cy5sZW5ndGggLSAxXSkpICsgMTtcbiAgICB9XG5cbiAgICAvLyAoMykgZHJvcHBlZCBhcyBsYXN0IGl0ZW1cbiAgICByZXR1cm4gdGFyZ2V0Rm9ybUZpZWxkLmNvbXBvbmVudHMubGVuZ3RoO1xuICB9XG4gIHZhbGlkYXRlRHJvcChlbGVtZW50LCB0YXJnZXQpIHtcbiAgICBjb25zdCBmb3JtRmllbGROb2RlID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZmpzLWVsZW1lbnQnKTtcbiAgICBjb25zdCB0YXJnZXRSb3cgPSB0aGlzLl9mb3JtTGF5b3V0ZXIuZ2V0Um93KHRhcmdldC5kYXRhc2V0LnJvd0lkKTtcbiAgICBsZXQgY29sdW1ucztcbiAgICBsZXQgZm9ybUZpZWxkO1xuICAgIGxldCB0YXJnZXRQYXJlbnRJZDtcbiAgICBpZiAoZm9ybUZpZWxkTm9kZSkge1xuICAgICAgZm9ybUZpZWxkID0gdGhpcy5fZm9ybUZpZWxkUmVnaXN0cnkuZ2V0KGZvcm1GaWVsZE5vZGUuZGF0YXNldC5pZCk7XG4gICAgICBpZiAoIWZvcm1GaWVsZCkge1xuICAgICAgICByZXR1cm4gJ05vIGFzc29jaWF0ZWQgZm9ybSBmaWVsZCBpbiB0aGUgcmVnaXN0cnknO1xuICAgICAgfVxuICAgICAgY29sdW1ucyA9IChmb3JtRmllbGQubGF5b3V0IHx8IHt9KS5jb2x1bW5zO1xuXG4gICAgICAvLyAoMSkgY2hlY2sgZm9yIHJvdyBjb25zdHJhaW50c1xuICAgICAgaWYgKGlzUm93KHRhcmdldCkpIHtcbiAgICAgICAgdGFyZ2V0UGFyZW50SWQgPSBnZXRGb3JtUGFyZW50KHRhcmdldCkuZGF0YXNldC5pZDtcbiAgICAgICAgY29uc3Qgcm93RXJyb3IgPSB0aGlzLl9mb3JtTGF5b3V0VmFsaWRhdG9yLnZhbGlkYXRlRmllbGQoZm9ybUZpZWxkLCBjb2x1bW5zLCB0YXJnZXRSb3cpO1xuICAgICAgICBpZiAocm93RXJyb3IpIHtcbiAgICAgICAgICByZXR1cm4gcm93RXJyb3I7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRhcmdldFBhcmVudElkID0gdGFyZ2V0LmRhdGFzZXQuaWQ7XG4gICAgICB9XG5cbiAgICAgIC8vICgyKSBjaGVjayB0YXJnZXQgaXMgYSB2YWxpZCBwYXJlbnRcbiAgICAgIGlmICghdGFyZ2V0UGFyZW50SWQpIHtcbiAgICAgICAgcmV0dXJuICdEcm9wIGlzIG5vdCBhIHZhbGlkIHRhcmdldCc7XG4gICAgICB9XG5cbiAgICAgIC8vICgzKSBjaGVjayAgZm9yIHBhdGggY29sbGlzaW9uc1xuICAgICAgY29uc3QgdGFyZ2V0UGFyZW50Rm9ybUZpZWxkID0gdGhpcy5fZm9ybUZpZWxkUmVnaXN0cnkuZ2V0KHRhcmdldFBhcmVudElkKTtcbiAgICAgIGNvbnN0IGN1cnJlbnRQYXJlbnRGb3JtRmllbGQgPSB0aGlzLl9mb3JtRmllbGRSZWdpc3RyeS5nZXQoZm9ybUZpZWxkLl9wYXJlbnQpO1xuICAgICAgaWYgKHRhcmdldFBhcmVudEZvcm1GaWVsZCAhPT0gY3VycmVudFBhcmVudEZvcm1GaWVsZCkge1xuICAgICAgICBjb25zdCB0YXJnZXRQYXJlbnRQYXRoID0gdGhpcy5fcGF0aFJlZ2lzdHJ5LmdldFZhbHVlUGF0aCh0YXJnZXRQYXJlbnRGb3JtRmllbGQpO1xuICAgICAgICBjb25zdCBjdXJyZW50UGFyZW50UGF0aCA9IHRoaXMuX3BhdGhSZWdpc3RyeS5nZXRWYWx1ZVBhdGgoY3VycmVudFBhcmVudEZvcm1GaWVsZCk7XG4gICAgICAgIGlmICh0YXJnZXRQYXJlbnRQYXRoLmpvaW4oJy4nKSAhPT0gY3VycmVudFBhcmVudFBhdGguam9pbignLicpKSB7XG4gICAgICAgICAgY29uc3QgaXNEcm9wQWxsb3dlZEJ5UGF0aFJlZ2lzdHJ5ID0gdGhpcy5fcGF0aFJlZ2lzdHJ5LmV4ZWN1dGVSZWN1cnNpdmVseU9uRmllbGRzKGZvcm1GaWVsZCwgKHtcbiAgICAgICAgICAgIGZpZWxkLFxuICAgICAgICAgICAgaXNDbG9zZWQsXG4gICAgICAgICAgICBpc1JlcGVhdGFibGVcbiAgICAgICAgICB9KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICAgICAgICBjdXRvZmZOb2RlOiBjdXJyZW50UGFyZW50Rm9ybUZpZWxkLmlkXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgZmllbGRQYXRoID0gdGhpcy5fcGF0aFJlZ2lzdHJ5LmdldFZhbHVlUGF0aChmaWVsZCwgb3B0aW9ucyk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcGF0aFJlZ2lzdHJ5LmNhbkNsYWltUGF0aChbLi4udGFyZ2V0UGFyZW50UGF0aCwgLi4uZmllbGRQYXRoXSwge1xuICAgICAgICAgICAgICBpc0Nsb3NlZCxcbiAgICAgICAgICAgICAgaXNSZXBlYXRhYmxlLFxuICAgICAgICAgICAgICBrbm93bkFuY2VzdG9ySWRzOiBnZXRBbmNlc3RyeUxpc3QodGFyZ2V0UGFyZW50SWQsIHRoaXMuX2Zvcm1GaWVsZFJlZ2lzdHJ5KVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgaWYgKCFpc0Ryb3BBbGxvd2VkQnlQYXRoUmVnaXN0cnkpIHtcbiAgICAgICAgICAgIHJldHVybiAnRHJvcCBub3QgYWxsb3dlZCBieSBwYXRoIHJlZ2lzdHJ5JztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgbW92ZUZpZWxkKGVsZW1lbnQsIHNvdXJjZSwgdGFyZ2V0Um93LCB0YXJnZXRGb3JtRmllbGQsIHRhcmdldEluZGV4KSB7XG4gICAgY29uc3QgZm9ybUZpZWxkTm9kZSA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLmZqcy1lbGVtZW50Jyk7XG4gICAgY29uc3QgZm9ybUZpZWxkID0gdGhpcy5fZm9ybUZpZWxkUmVnaXN0cnkuZ2V0KGZvcm1GaWVsZE5vZGUuZGF0YXNldC5pZCk7XG4gICAgY29uc3Qgc291cmNlUGFyZW50ID0gZ2V0Rm9ybVBhcmVudChzb3VyY2UpO1xuICAgIGNvbnN0IHNvdXJjZUZvcm1GaWVsZCA9IHRoaXMuX2Zvcm1GaWVsZFJlZ2lzdHJ5LmdldChzb3VyY2VQYXJlbnQuZGF0YXNldC5pZCk7XG4gICAgY29uc3Qgc291cmNlSW5kZXggPSBnZXRGb3JtRmllbGRJbmRleCQxKHNvdXJjZUZvcm1GaWVsZCwgZm9ybUZpZWxkKTtcbiAgICBjb25zdCBzb3VyY2VSb3cgPSB0aGlzLl9mb3JtTGF5b3V0ZXIuZ2V0Um93Rm9yRmllbGQoZm9ybUZpZWxkKTtcbiAgICB0aGlzLl9tb2RlbGluZy5tb3ZlRm9ybUZpZWxkKGZvcm1GaWVsZCwgc291cmNlRm9ybUZpZWxkLCB0YXJnZXRGb3JtRmllbGQsIHNvdXJjZUluZGV4LCB0YXJnZXRJbmRleCwgc291cmNlUm93LCB0YXJnZXRSb3cpO1xuICB9XG4gIGNyZWF0ZU5ld0ZpZWxkKGVsZW1lbnQsIHRhcmdldFJvdywgdGFyZ2V0Rm9ybUZpZWxkLCB0YXJnZXRJbmRleCkge1xuICAgIGNvbnN0IHR5cGUgPSBlbGVtZW50LmRhdGFzZXQuZmllbGRUeXBlO1xuICAgIGxldCBhdHRycyA9IHtcbiAgICAgIHR5cGVcbiAgICB9O1xuICAgIGF0dHJzID0ge1xuICAgICAgLi4uYXR0cnMsXG4gICAgICBfcGFyZW50OiB0YXJnZXRGb3JtRmllbGQuaWQsXG4gICAgICBsYXlvdXQ6IHtcbiAgICAgICAgcm93OiB0YXJnZXRSb3cgPyB0YXJnZXRSb3cuaWQgOiB0aGlzLl9mb3JtTGF5b3V0ZXIubmV4dFJvd0lkKCksXG4gICAgICAgIC8vIGVuYWJsZSBhdXRvIGNvbHVtbnNcbiAgICAgICAgY29sdW1uczogbnVsbFxuICAgICAgfVxuICAgIH07XG4gICAgdGhpcy5fbW9kZWxpbmcuYWRkRm9ybUZpZWxkKGF0dHJzLCB0YXJnZXRGb3JtRmllbGQsIHRhcmdldEluZGV4KTtcbiAgfVxuICBoYW5kbGVSb3dEcm9wKGVsLCB0YXJnZXQsIHNvdXJjZSwgc2libGluZykge1xuICAgIGNvbnN0IHRhcmdldEZvcm1GaWVsZCA9IHRoaXMuX2Zvcm1GaWVsZFJlZ2lzdHJ5LmdldCh0YXJnZXQuZGF0YXNldC5pZCk7XG4gICAgY29uc3Qgcm93Tm9kZSA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy5manMtbGF5b3V0LXJvdycpO1xuICAgIGNvbnN0IHJvdyA9IHRoaXMuX2Zvcm1MYXlvdXRlci5nZXRSb3cocm93Tm9kZS5kYXRhc2V0LnJvd0lkKTtcblxuICAgIC8vIG1vdmUgZWFjaCBmaWVsZCBpbiB0aGUgcm93IGJlZm9yZSBmaXJzdCBmaWVsZCBvZiBzaWJsaW5nIHJvd1xuICAgIHJvdy5jb21wb25lbnRzLmZvckVhY2goKGlkLCBpbmRleCkgPT4ge1xuICAgICAgY29uc3QgZm9ybUZpZWxkID0gdGhpcy5fZm9ybUZpZWxkUmVnaXN0cnkuZ2V0KGlkKTtcbiAgICAgIGNvbnN0IHNvdXJjZVBhcmVudCA9IGdldEZvcm1QYXJlbnQoc291cmNlKTtcbiAgICAgIGNvbnN0IHNvdXJjZUZvcm1GaWVsZCA9IHRoaXMuX2Zvcm1GaWVsZFJlZ2lzdHJ5LmdldChzb3VyY2VQYXJlbnQuZGF0YXNldC5pZCk7XG4gICAgICBjb25zdCBzaWJsaW5nUm93Tm9kZSA9IHNpYmxpbmcgJiYgc2libGluZy5xdWVyeVNlbGVjdG9yKCcuZmpzLWxheW91dC1yb3cnKTtcbiAgICAgIGNvbnN0IHNpYmxpbmdSb3cgPSBzaWJsaW5nUm93Tm9kZSAmJiB0aGlzLl9mb3JtTGF5b3V0ZXIuZ2V0Um93KHNpYmxpbmdSb3dOb2RlLmRhdGFzZXQucm93SWQpO1xuICAgICAgY29uc3Qgc2libGluZ0Zvcm1GaWVsZCA9IHNpYmxpbmcgJiYgdGhpcy5fZm9ybUZpZWxkUmVnaXN0cnkuZ2V0KHNpYmxpbmdSb3cuY29tcG9uZW50c1swXSk7XG4gICAgICBjb25zdCBzb3VyY2VJbmRleCA9IGdldEZvcm1GaWVsZEluZGV4JDEoc291cmNlRm9ybUZpZWxkLCBmb3JtRmllbGQpO1xuICAgICAgY29uc3QgdGFyZ2V0SW5kZXggPSAoc2libGluZ1Jvd05vZGUgPyBnZXRGb3JtRmllbGRJbmRleCQxKHRhcmdldEZvcm1GaWVsZCwgc2libGluZ0Zvcm1GaWVsZCkgOiB0YXJnZXRGb3JtRmllbGQuY29tcG9uZW50cy5sZW5ndGgpICsgaW5kZXg7XG4gICAgICB0aGlzLl9tb2RlbGluZy5tb3ZlRm9ybUZpZWxkKGZvcm1GaWVsZCwgc291cmNlRm9ybUZpZWxkLCB0YXJnZXRGb3JtRmllbGQsIHNvdXJjZUluZGV4LCB0YXJnZXRJbmRleCwgcm93LCByb3cpO1xuICAgIH0pO1xuICB9XG4gIGhhbmRsZUVsZW1lbnREcm9wKGVsLCB0YXJnZXQsIHNvdXJjZSwgc2libGluZywgZHJha2UpIHtcbiAgICAvLyAoMSkgZGV0ZWN0IGRyb3AgdGFyZ2V0XG4gICAgY29uc3QgdGFyZ2V0Rm9ybUZpZWxkID0gdGhpcy5fZm9ybUZpZWxkUmVnaXN0cnkuZ2V0KGdldEZvcm1QYXJlbnQodGFyZ2V0KS5kYXRhc2V0LmlkKTtcbiAgICBsZXQgdGFyZ2V0Um93O1xuXG4gICAgLy8gKDIuMSkgZHJvcHBlZCBpbiBleGlzdGluZyByb3dcbiAgICBpZiAoaXNSb3codGFyZ2V0KSkge1xuICAgICAgdGFyZ2V0Um93ID0gdGhpcy5fZm9ybUxheW91dGVyLmdldFJvdyh0YXJnZXQuZGF0YXNldC5yb3dJZCk7XG4gICAgfVxuXG4gICAgLy8gKDIuMikgdmFsaWRhdGUgd2hldGhlciBkcm9wIGlzIGFsbG93ZWRcbiAgICBjb25zdCB2YWxpZGF0aW9uRXJyb3IgPSB0aGlzLnZhbGlkYXRlRHJvcChlbCwgdGFyZ2V0KTtcbiAgICBpZiAodmFsaWRhdGlvbkVycm9yKSB7XG4gICAgICByZXR1cm4gZHJha2UuY2FuY2VsKHRydWUpO1xuICAgIH1cbiAgICBkcmFrZS5yZW1vdmUoKTtcblxuICAgIC8vICgzKSBkZXRlY3QgcG9zaXRpb24gdG8gZHJvcCBmaWVsZCBpbiBzY2hlbWEgb3JkZXJcbiAgICBjb25zdCB0YXJnZXRJbmRleCA9IHRoaXMuZ2V0VGFyZ2V0SW5kZXgodGFyZ2V0Um93LCB0YXJnZXRGb3JtRmllbGQsIHNpYmxpbmcpO1xuXG4gICAgLy8gKDQpIGNyZWF0ZSBuZXcgZmllbGQgb3IgbW92ZSBleGlzdGluZ1xuICAgIGlmIChpc1BhbGV0dGUoc291cmNlKSkge1xuICAgICAgdGhpcy5jcmVhdGVOZXdGaWVsZChlbCwgdGFyZ2V0Um93LCB0YXJnZXRGb3JtRmllbGQsIHRhcmdldEluZGV4KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tb3ZlRmllbGQoZWwsIHNvdXJjZSwgdGFyZ2V0Um93LCB0YXJnZXRGb3JtRmllbGQsIHRhcmdldEluZGV4KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHsgeyBjb250YWluZXI6IEFycmF5PHN0cmluZz4sIGRpcmVjdGlvbjogc3RyaW5nLCBtaXJyb3JDb250YWluZXI6IHN0cmluZyB9IH0gb3B0aW9uc1xuICAgKi9cbiAgY3JlYXRlRHJhZ3VsYUluc3RhbmNlKG9wdGlvbnMpIHtcbiAgICBjb25zdCB7XG4gICAgICBjb250YWluZXIsXG4gICAgICBtaXJyb3JDb250YWluZXJcbiAgICB9ID0gb3B0aW9ucyB8fCB7fTtcbiAgICBsZXQgZHJhZ3VsYU9wdGlvbnMgPSB7XG4gICAgICBkaXJlY3Rpb246IGZ1bmN0aW9uIChlbCwgdGFyZ2V0KSB7XG4gICAgICAgIGlmIChpc1Jvdyh0YXJnZXQpKSB7XG4gICAgICAgICAgcmV0dXJuICdob3Jpem9udGFsJztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJ3ZlcnRpY2FsJztcbiAgICAgIH0sXG4gICAgICBtaXJyb3JDb250YWluZXIsXG4gICAgICBpc0NvbnRhaW5lcihlbCkge1xuICAgICAgICByZXR1cm4gY29udGFpbmVyLnNvbWUoY2xzID0+IGVsLmNsYXNzTGlzdC5jb250YWlucyhjbHMpKTtcbiAgICAgIH0sXG4gICAgICBtb3ZlcyhlbCwgc291cmNlLCBoYW5kbGUpIHtcbiAgICAgICAgcmV0dXJuICFoYW5kbGUuY2xhc3NMaXN0LmNvbnRhaW5zKERSQUdfTk9fTU9WRV9DTFMpICYmIChlbC5jbGFzc0xpc3QuY29udGFpbnMoRFJBR19NT1ZFX0NMUykgfHwgZWwuY2xhc3NMaXN0LmNvbnRhaW5zKERSQUdfQ09QWV9DTFMpIHx8IGVsLmNsYXNzTGlzdC5jb250YWlucyhEUkFHX1JPV19NT1ZFX0NMUykpO1xuICAgICAgfSxcbiAgICAgIGNvcHkoZWwpIHtcbiAgICAgICAgcmV0dXJuIGVsLmNsYXNzTGlzdC5jb250YWlucyhEUkFHX0NPUFlfQ0xTKTtcbiAgICAgIH0sXG4gICAgICBhY2NlcHRzOiAoZWwsIHRhcmdldCkgPT4ge1xuICAgICAgICB1bnNldERyb3BOb3RBbGxvd2VkKHRhcmdldCk7XG5cbiAgICAgICAgLy8gYWxsb3cgZHJvcHBpbmcgcm93cyBvbmx5IGJldHdlZW4gcm93c1xuICAgICAgICBpZiAoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKERSQUdfUk9XX01PVkVfQ0xTKSkge1xuICAgICAgICAgIHJldHVybiAhdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhEUk9QX0NPTlRBSU5FUl9IT1JJWk9OVEFMX0NMUyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyB2YWxpZGF0ZSBmaWVsZCBkcm9wXG4gICAgICAgIGNvbnN0IHZhbGlkYXRpb25FcnJvciA9IHRoaXMudmFsaWRhdGVEcm9wKGVsLCB0YXJnZXQpO1xuICAgICAgICBpZiAodmFsaWRhdGlvbkVycm9yKSB7XG4gICAgICAgICAgLy8gc2V0IGVycm9yIGZlZWRiYWNrIHRvIHJvd1xuICAgICAgICAgIHNldERyb3BOb3RBbGxvd2VkKHRhcmdldCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICF0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKERSQUdfTk9fRFJPUF9DTFMpO1xuICAgICAgfSxcbiAgICAgIHRyYW5zZm9ybU9mZnNldDogKG9mZnNldCwgZXZlbnQsIGVsZW1lbnQpID0+IHtcbiAgICAgICAgaWYgKGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKERSQUdfUk9XX01PVkVfQ0xTKSkge1xuICAgICAgICAgIGNvbnN0IHJvd09mZnNldCA9IHtcbiAgICAgICAgICAgIHg6IC01LFxuICAgICAgICAgICAgeTogLTYwXG4gICAgICAgICAgfTtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbGVmdDogZXZlbnQuY2xpZW50WCArIHJvd09mZnNldC54LFxuICAgICAgICAgICAgdG9wOiBldmVudC5jbGllbnRZICsgcm93T2Zmc2V0LnlcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhEUkFHX01PVkVfQ0xTKSkge1xuICAgICAgICAgIGNvbnN0IGljb25PZmZzZXQgPSB7XG4gICAgICAgICAgICB4OiAtNSxcbiAgICAgICAgICAgIHk6IC0xNVxuICAgICAgICAgIH07XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGxlZnQ6IGV2ZW50LmNsaWVudFggKyBpY29uT2Zmc2V0LngsXG4gICAgICAgICAgICB0b3A6IGV2ZW50LmNsaWVudFkgKyBpY29uT2Zmc2V0LnlcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvZmZzZXQ7XG4gICAgICB9LFxuICAgICAgc2xpZGVGYWN0b3JYOiAxMCxcbiAgICAgIHNsaWRlRmFjdG9yWTogNVxuICAgIH07XG4gICAgY29uc3QgZHJhZ3VsYUluc3RhbmNlID0gZHJhZ3VsYShkcmFndWxhT3B0aW9ucyk7XG5cbiAgICAvLyBiaW5kIGxpZmUgY3ljbGUgZXZlbnRzXG4gICAgZHJhZ3VsYUluc3RhbmNlLm9uKCdkcmFnJywgKGVsZW1lbnQsIHNvdXJjZSkgPT4ge1xuICAgICAgdGhpcy5lbWl0KCdkcmFnLnN0YXJ0Jywge1xuICAgICAgICBlbGVtZW50LFxuICAgICAgICBzb3VyY2VcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIGRyYWd1bGFJbnN0YW5jZS5vbignZHJhZ2VuZCcsIGVsZW1lbnQgPT4ge1xuICAgICAgdGhpcy5lbWl0KCdkcmFnLmVuZCcsIHtcbiAgICAgICAgZWxlbWVudFxuICAgICAgfSk7XG4gICAgfSk7XG4gICAgZHJhZ3VsYUluc3RhbmNlLm9uKCdkcm9wJywgKGVsZW1lbnQsIHRhcmdldCwgc291cmNlLCBzaWJsaW5nKSA9PiB7XG4gICAgICB0aGlzLmVtaXQoJ2RyYWcuZHJvcCcsIHtcbiAgICAgICAgZWxlbWVudCxcbiAgICAgICAgdGFyZ2V0LFxuICAgICAgICBzb3VyY2UsXG4gICAgICAgIHNpYmxpbmdcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIGRyYWd1bGFJbnN0YW5jZS5vbignb3ZlcicsIChlbGVtZW50LCBjb250YWluZXIsIHNvdXJjZSkgPT4ge1xuICAgICAgdGhpcy5lbWl0KCdkcmFnLmhvdmVyJywge1xuICAgICAgICBlbGVtZW50LFxuICAgICAgICBjb250YWluZXIsXG4gICAgICAgIHNvdXJjZVxuICAgICAgfSk7XG4gICAgfSk7XG4gICAgZHJhZ3VsYUluc3RhbmNlLm9uKCdvdXQnLCAoZWxlbWVudCwgY29udGFpbmVyLCBzb3VyY2UpID0+IHtcbiAgICAgIHRoaXMuZW1pdCgnZHJhZy5vdXQnLCB7XG4gICAgICAgIGVsZW1lbnQsXG4gICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgc291cmNlXG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBkcmFndWxhSW5zdGFuY2Uub24oJ2NhbmNlbCcsIChlbGVtZW50LCBjb250YWluZXIsIHNvdXJjZSkgPT4ge1xuICAgICAgdGhpcy5lbWl0KCdkcmFnLmNhbmNlbCcsIHtcbiAgICAgICAgZWxlbWVudCxcbiAgICAgICAgY29udGFpbmVyLFxuICAgICAgICBzb3VyY2VcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIGRyYWd1bGFJbnN0YW5jZS5vbignZHJvcCcsIChlbCwgdGFyZ2V0LCBzb3VyY2UsIHNpYmxpbmcpID0+IHtcbiAgICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICAgIGRyYWd1bGFJbnN0YW5jZS5yZW1vdmUoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyAoMSkgaGFuZGxlIHJvdyBkcm9wXG4gICAgICBpZiAoaXNEcmFnUm93KGVsKSkge1xuICAgICAgICB0aGlzLmhhbmRsZVJvd0Ryb3AoZWwsIHRhcmdldCwgc291cmNlLCBzaWJsaW5nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vICgyKSBoYW5kbGUgZm9ybSBmaWVsZCBkcm9wXG4gICAgICAgIHRoaXMuaGFuZGxlRWxlbWVudERyb3AoZWwsIHRhcmdldCwgc291cmNlLCBzaWJsaW5nLCBkcmFndWxhSW5zdGFuY2UpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHRoaXMuZW1pdCgnZHJhZ3VsYS5jcmVhdGVkJywgZHJhZ3VsYUluc3RhbmNlKTtcbiAgICByZXR1cm4gZHJhZ3VsYUluc3RhbmNlO1xuICB9XG4gIGVtaXQoZXZlbnQsIGNvbnRleHQpIHtcbiAgICB0aGlzLl9ldmVudEJ1cy5maXJlKGV2ZW50LCBjb250ZXh0KTtcbiAgfVxufVxuRHJhZ2dpbmcuJGluamVjdCA9IFsnZm9ybUZpZWxkUmVnaXN0cnknLCAnZm9ybUxheW91dGVyJywgJ2Zvcm1MYXlvdXRWYWxpZGF0b3InLCAnZXZlbnRCdXMnLCAnbW9kZWxpbmcnLCAncGF0aFJlZ2lzdHJ5J107XG5cbi8vIGhlbHBlciAvLy8vLy8vLy8vXG5cbmZ1bmN0aW9uIGdldEZvcm1GaWVsZEluZGV4JDEocGFyZW50LCBmb3JtRmllbGQpIHtcbiAgbGV0IGZpZWxkRm9ybUluZGV4ID0gcGFyZW50LmNvbXBvbmVudHMubGVuZ3RoO1xuICBwYXJlbnQuY29tcG9uZW50cy5mb3JFYWNoKCh7XG4gICAgaWRcbiAgfSwgaW5kZXgpID0+IHtcbiAgICBpZiAoaWQgPT09IGZvcm1GaWVsZC5pZCkge1xuICAgICAgZmllbGRGb3JtSW5kZXggPSBpbmRleDtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gZmllbGRGb3JtSW5kZXg7XG59XG5mdW5jdGlvbiBpc1Jvdyhub2RlKSB7XG4gIHJldHVybiBub2RlLmNsYXNzTGlzdC5jb250YWlucygnZmpzLWxheW91dC1yb3cnKTtcbn1cbmZ1bmN0aW9uIGlzRHJhZ1Jvdyhub2RlKSB7XG4gIHJldHVybiBub2RlLmNsYXNzTGlzdC5jb250YWlucyhEUkFHX1JPV19NT1ZFX0NMUyk7XG59XG5mdW5jdGlvbiBpc1BhbGV0dGUobm9kZSkge1xuICByZXR1cm4gbm9kZS5jbGFzc0xpc3QuY29udGFpbnMoJ2Zqcy1wYWxldHRlLWZpZWxkcycpO1xufVxuZnVuY3Rpb24gZ2V0Rm9ybVBhcmVudChub2RlKSB7XG4gIHJldHVybiBub2RlLmNsb3Nlc3QoJy5manMtZWxlbWVudCcpO1xufVxuZnVuY3Rpb24gc2V0RHJvcE5vdEFsbG93ZWQobm9kZSkge1xuICBub2RlLmNsYXNzTGlzdC5hZGQoRVJST1JfRFJPUF9DTFMpO1xuICBzZXQoJ25vdC1hbGxvd2VkJyk7XG59XG5mdW5jdGlvbiB1bnNldERyb3BOb3RBbGxvd2VkKG5vZGUpIHtcbiAgbm9kZS5jbGFzc0xpc3QucmVtb3ZlKEVSUk9SX0RST1BfQ0xTKTtcbiAgc2V0KCdncmFiYmluZycpO1xufVxuXG5mdW5jdGlvbiBGaWVsZERyYWdQcmV2aWV3KHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBjbGFzczogY2xhc3NOYW1lLFxuICAgIEljb24sXG4gICAgbGFiZWxcbiAgfSA9IHByb3BzO1xuICByZXR1cm4ganN4cyhcImRpdlwiLCB7XG4gICAgY2xhc3M6IGNsYXNzbmFtZXMoJ2Zqcy1maWVsZC1wcmV2aWV3JywgY2xhc3NOYW1lKSxcbiAgICBjaGlsZHJlbjogW2pzeChJY29uLCB7XG4gICAgICBjbGFzczogXCJmanMtZmllbGQtcHJldmlldy1pY29uXCIsXG4gICAgICB3aWR0aDogXCIzNlwiLFxuICAgICAgaGVpZ2h0OiBcIjM2XCIsXG4gICAgICB2aWV3Qm94OiBcIjAgMCA1NCA1NFwiXG4gICAgfSksIGpzeChcInNwYW5cIiwge1xuICAgICAgY2xhc3M6IFwiZmpzLWZpZWxkLXByZXZpZXctdGV4dFwiLFxuICAgICAgY2hpbGRyZW46IGxhYmVsXG4gICAgfSldXG4gIH0pO1xufVxuXG5jb25zdCBDT0xVTU5TX1JFR0VYID0gL15jZHMtLWNvbCgtbGcpPy87XG5jb25zdCBFTEVNRU5UX1JFU0laSU5HX0NMUyA9ICdmanMtZWxlbWVudC1yZXNpemluZyc7XG5jb25zdCBHUklEX09GRlNFVF9QWCA9IDE2O1xuZnVuY3Rpb24gRmllbGRSZXNpemVyKHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBmaWVsZCxcbiAgICBwb3NpdGlvblxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IHJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgZm9ybUxheW91dFZhbGlkYXRvciA9IHVzZVNlcnZpY2UkMSgnZm9ybUxheW91dFZhbGlkYXRvcicpO1xuICBjb25zdCBtb2RlbGluZyA9IHVzZVNlcnZpY2UkMSgnbW9kZWxpbmcnKTtcblxuICAvLyB3ZSBjYW4ndCB1c2Ugc3RhdGUgYXMgd2UgbmVlZCB0b1xuICAvLyBtYW5pcHVsYXRlIHRoaXMgaW5zaWRlIGRyYWdnaW5nIGV2ZW50c1xuICBjb25zdCBjb250ZXh0ID0gdXNlUmVmKHtcbiAgICBzdGFydENvbHVtbnM6IDAsXG4gICAgbmV3Q29sdW1uczogMFxuICB9KTtcbiAgY29uc3Qgb25SZXNpemUgPSB0aHJvdHRsZSgoXywgZGVsdGEpID0+IHtcbiAgICBjb25zdCB7XG4gICAgICB4OiBkeFxuICAgIH0gPSBkZWx0YTtcbiAgICBjb25zdCB7XG4gICAgICBsYXlvdXQgPSB7fVxuICAgIH0gPSBmaWVsZDtcbiAgICBjb25zdCBuZXdDb2x1bW5zID0gY2FsY3VsYXRlTmV3Q29sdW1ucyhyZWYuY3VycmVudCwgbGF5b3V0LmNvbHVtbnMgfHwgY29udGV4dC5jdXJyZW50LnN0YXJ0Q29sdW1ucywgZHgsIHBvc2l0aW9uKTtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBmb3JtTGF5b3V0VmFsaWRhdG9yLnZhbGlkYXRlRmllbGQoZmllbGQsIG5ld0NvbHVtbnMpO1xuICAgIGlmICghZXJyb3JNZXNzYWdlKSB7XG4gICAgICBjb250ZXh0LmN1cnJlbnQubmV3Q29sdW1ucyA9IG5ld0NvbHVtbnM7XG5cbiAgICAgIC8vIG1ha2UgdmlzdWFsIHVwZGF0ZXMgdG8gcHJldmlldyBjaGFuZ2VcbiAgICAgIGNvbnN0IGNvbHVtbk5vZGUgPSByZWYuY3VycmVudC5jbG9zZXN0KCcuZmpzLWxheW91dC1jb2x1bW4nKTtcbiAgICAgIHJlbW92ZU1hdGNoaW5nKGNvbHVtbk5vZGUsIENPTFVNTlNfUkVHRVgpO1xuICAgICAgY29sdW1uTm9kZS5jbGFzc0xpc3QuYWRkKGBjZHMtLWNvbC1sZy0ke25ld0NvbHVtbnN9YCk7XG4gICAgfVxuICB9KTtcbiAgY29uc3Qgb25SZXNpemVTdGFydCA9IGV2ZW50ID0+IHtcbiAgICBjb25zdCB0YXJnZXQgPSBnZXRFbGVtZW50Tm9kZShmaWVsZCk7XG4gICAgY29uc3QgcGFyZW50ID0gZ2V0UGFyZW50KHRhcmdldCk7XG5cbiAgICAvLyBpbml0aWFsaXplIGRyYWcgaGFuZGxlclxuICAgIGNvbnN0IG9uRHJhZ1N0YXJ0ID0gY3JlYXRlRHJhZ2dlciQxKG9uUmVzaXplKTtcbiAgICBvbkRyYWdTdGFydChldmVudCk7XG5cbiAgICAvLyBtaXRpZ2F0ZSBhdXRvIGNvbHVtbnMgb24gdGhlIGdyaWQgdGhhdFxuICAgIC8vIGhhcyBhIG9mZnNldCBvZiAxNnB4ICgxcmVtKSB0byBib3RoIHNpZGVcbiAgICBjb25zdCBjb2x1bW5Ob2RlID0gZ2V0Q29sdW1uTm9kZSh0YXJnZXQpO1xuICAgIGNvbnN0IHN0YXJ0V2lkdGggPSBjb2x1bW5Ob2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoICsgR1JJRF9PRkZTRVRfUFg7XG4gICAgY29udGV4dC5jdXJyZW50LnN0YXJ0Q29sdW1ucyA9IGFzQ29sdW1ucyhzdGFydFdpZHRoLCBwYXJlbnQpO1xuICAgIHNldFJlc2l6aW5nKHRhcmdldCwgcG9zaXRpb24pO1xuICB9O1xuICBjb25zdCBvblJlc2l6ZUVuZCA9ICgpID0+IHtcbiAgICBjb25zdCB7XG4gICAgICBsYXlvdXQgPSB7fVxuICAgIH0gPSBmaWVsZDtcbiAgICBpZiAoY29udGV4dC5jdXJyZW50Lm5ld0NvbHVtbnMpIHtcbiAgICAgIG1vZGVsaW5nLmVkaXRGb3JtRmllbGQoZmllbGQsICdsYXlvdXQnLCB7XG4gICAgICAgIC4uLmxheW91dCxcbiAgICAgICAgY29sdW1uczogY29udGV4dC5jdXJyZW50Lm5ld0NvbHVtbnNcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCB0YXJnZXQgPSBnZXRFbGVtZW50Tm9kZShmaWVsZCk7XG4gICAgdW5zZXRSZXNpemluZyh0YXJnZXQsIHBvc2l0aW9uKTtcbiAgICBjb250ZXh0LmN1cnJlbnQubmV3Q29sdW1ucyA9IG51bGw7XG4gIH07XG4gIGlmIChmaWVsZC50eXBlID09PSAnZGVmYXVsdCcpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4ganN4KFwiZGl2XCIsIHtcbiAgICByZWY6IHJlZixcbiAgICBjbGFzczogY2xhc3NuYW1lcygnZmpzLWZpZWxkLXJlc2l6ZS1oYW5kbGUnLCAnZmpzLWZpZWxkLXJlc2l6ZS1oYW5kbGUtJyArIHBvc2l0aW9uLCBEUkFHX05PX01PVkVfQ0xTKSxcbiAgICBkcmFnZ2FibGU6IHRydWUsXG4gICAgb25EcmFnU3RhcnQ6IG9uUmVzaXplU3RhcnQsXG4gICAgb25EcmFnRW5kOiBvblJlc2l6ZUVuZFxuICB9KTtcbn1cblxuLy8gaGVscGVyIC8vLy8vL1xuXG5mdW5jdGlvbiBhc0NvbHVtbnMod2lkdGgsIHBhcmVudCkge1xuICBjb25zdCB0b3RhbFdpZHRoID0gcGFyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xuICBjb25zdCBvbmVDb2x1bW4gPSAxIC8gMTYgKiB0b3RhbFdpZHRoO1xuICByZXR1cm4gTWF0aC5yb3VuZCh3aWR0aCAvIG9uZUNvbHVtbik7XG59XG5mdW5jdGlvbiBjYWxjdWxhdGVOZXdDb2x1bW5zKG5vZGUsIGN1cnJlbnRDb2x1bW5zLCBkZWx0YVgsIHBvc2l0aW9uKSB7XG4gIGNvbnN0IHBhcmVudCA9IGdldFBhcmVudChub2RlKTtcblxuICAvLyBpbnZlcnQgZGVsdGEgaWYgd2UgYXJlIHJlc2l6aW5nIGZyb20gdGhlIGxlZnRcbiAgaWYgKHBvc2l0aW9uID09PSAnbGVmdCcpIHtcbiAgICBkZWx0YVggPSBkZWx0YVggKiAtMTtcbiAgfVxuICBjb25zdCBkZWx0YUNvbHVtbnMgPSBhc0NvbHVtbnMoZGVsdGFYLCBwYXJlbnQpO1xuICByZXR1cm4gY3VycmVudENvbHVtbnMgKyBkZWx0YUNvbHVtbnM7XG59XG5mdW5jdGlvbiBnZXRQYXJlbnQobm9kZSkge1xuICByZXR1cm4gbm9kZS5jbG9zZXN0KCcuZmpzLWxheW91dC1yb3cnKTtcbn1cbmZ1bmN0aW9uIHJlbW92ZU1hdGNoaW5nKG5vZGUsIHJlZ2V4KSB7XG4gIHJldHVybiBjbGFzc2VzKG5vZGUpLnJlbW92ZU1hdGNoaW5nKHJlZ2V4KTtcbn1cbmZ1bmN0aW9uIGdldENvbHVtbk5vZGUobm9kZSkge1xuICByZXR1cm4gbm9kZS5jbG9zZXN0KCcuZmpzLWxheW91dC1jb2x1bW4nKTtcbn1cbmZ1bmN0aW9uIGdldEVsZW1lbnROb2RlKGZpZWxkKSB7XG4gIHJldHVybiBxdWVyeSgnLmZqcy1lbGVtZW50W2RhdGEtaWQ9XCInICsgZmllbGQuaWQgKyAnXCJdJyk7XG59XG5mdW5jdGlvbiBzZXRSZXNpemluZyhub2RlLCBwb3NpdGlvbikge1xuICBjbGFzc2VzKG5vZGUpLmFkZChFTEVNRU5UX1JFU0laSU5HX0NMUyArICctJyArIHBvc2l0aW9uKTtcbn1cbmZ1bmN0aW9uIHVuc2V0UmVzaXppbmcobm9kZSwgcG9zaXRpb24pIHtcbiAgY2xhc3Nlcyhub2RlKS5yZW1vdmUoRUxFTUVOVF9SRVNJWklOR19DTFMgKyAnLScgKyBwb3NpdGlvbik7XG59XG5cbmZ1bmN0aW9uIENvbnRleHRQYWQocHJvcHMpIHtcbiAgaWYgKCFwcm9wcy5jaGlsZHJlbikge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiBqc3goXCJkaXZcIiwge1xuICAgIGNsYXNzOiBcImZqcy1jb250ZXh0LXBhZFwiLFxuICAgIGNoaWxkcmVuOiBwcm9wcy5jaGlsZHJlblxuICB9KTtcbn1cbmZ1bmN0aW9uIEVtcHR5R3JvdXAoKSB7XG4gIHJldHVybiBqc3goXCJkaXZcIiwge1xuICAgIGNsYXNzOiBcImZqcy1lbXB0eS1jb21wb25lbnRcIixcbiAgICBjaGlsZHJlbjoganN4KFwic3BhblwiLCB7XG4gICAgICBjbGFzczogXCJmanMtZW1wdHktY29tcG9uZW50LXRleHRcIixcbiAgICAgIGNoaWxkcmVuOiBcIkRyYWcgYW5kIGRyb3AgY29tcG9uZW50cyBoZXJlLlwiXG4gICAgfSlcbiAgfSk7XG59XG5mdW5jdGlvbiBFbXB0eUZvcm0oKSB7XG4gIHJldHVybiBqc3goXCJkaXZcIiwge1xuICAgIGNsYXNzOiBcImZqcy1lbXB0eS1lZGl0b3JcIixcbiAgICBjaGlsZHJlbjoganN4cyhcImRpdlwiLCB7XG4gICAgICBjbGFzczogXCJmanMtZW1wdHktZWRpdG9yLWNhcmRcIixcbiAgICAgIGNoaWxkcmVuOiBbanN4KFN2Z0VtcHR5Rm9ybSwge30pLCBqc3goXCJoMlwiLCB7XG4gICAgICAgIGNoaWxkcmVuOiBcIkJ1aWxkIHlvdXIgZm9ybVwiXG4gICAgICB9KSwganN4KFwic3BhblwiLCB7XG4gICAgICAgIGNoaWxkcmVuOiBcIkRyYWcgYW5kIGRyb3AgY29tcG9uZW50cyBoZXJlIHRvIHN0YXJ0IGRlc2lnbmluZy5cIlxuICAgICAgfSksIGpzeChcInNwYW5cIiwge1xuICAgICAgICBjaGlsZHJlbjogXCJVc2UgdGhlIHByZXZpZXcgd2luZG93IHRvIHRlc3QgeW91ciBmb3JtLlwiXG4gICAgICB9KV1cbiAgICB9KVxuICB9KTtcbn1cbmZ1bmN0aW9uIEVtcHR5KHByb3BzKSB7XG4gIGlmIChbJ2dyb3VwJywgJ2R5bmFtaWNsaXN0J10uaW5jbHVkZXMocHJvcHMuZmllbGQudHlwZSkpIHtcbiAgICByZXR1cm4ganN4KEVtcHR5R3JvdXAsIHt9KTtcbiAgfVxuICBpZiAocHJvcHMuZmllbGQudHlwZSA9PT0gJ2RlZmF1bHQnKSB7XG4gICAgcmV0dXJuIGpzeChFbXB0eUZvcm0sIHt9KTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIEVsZW1lbnQkMShwcm9wcykge1xuICBjb25zdCBldmVudEJ1cyA9IHVzZVNlcnZpY2UkMSgnZXZlbnRCdXMnKSxcbiAgICBmb3JtRmllbGRSZWdpc3RyeSA9IHVzZVNlcnZpY2UkMSgnZm9ybUZpZWxkUmVnaXN0cnknKSxcbiAgICBmb3JtRmllbGRzID0gdXNlU2VydmljZSQxKCdmb3JtRmllbGRzJyksXG4gICAgbW9kZWxpbmcgPSB1c2VTZXJ2aWNlJDEoJ21vZGVsaW5nJyksXG4gICAgc2VsZWN0aW9uID0gdXNlU2VydmljZSQxKCdzZWxlY3Rpb24nKTtcbiAgY29uc3Qge1xuICAgIGhvdmVySW5mb1xuICB9ID0gdXNlQ29udGV4dChGb3JtUmVuZGVyQ29udGV4dCk7XG4gIGNvbnN0IHtcbiAgICBmaWVsZFxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IHtcbiAgICBpZCxcbiAgICB0eXBlLFxuICAgIHNob3dPdXRsaW5lXG4gIH0gPSBmaWVsZDtcblxuICAvKiogQHR5cGUge2ltcG9ydChcInByZWFjdFwiKS5SZWZPYmplY3Q8SFRNTERpdkVsZW1lbnQ+fSAqL1xuICBjb25zdCByZWYgPSB1c2VSZWYoKTtcbiAgY29uc3QgW2hvdmVyZWQsIHNldEhvdmVyZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZ1bmN0aW9uIHNjcm9sbEludG9WaWV3KHtcbiAgICAgIHNlbGVjdGlvblxuICAgIH0pIHtcbiAgICAgIGNvbnN0IHNjcm9sbENvbnRhaW5lciA9IGdldFNjcm9sbENvbnRhaW5lcihyZWYuY3VycmVudCk7XG4gICAgICBpZiAoIXNlbGVjdGlvbiB8fCBzZWxlY3Rpb24udHlwZSA9PT0gJ2RlZmF1bHQnIHx8IHNlbGVjdGlvbi5pZCAhPT0gaWQgfHwgIXNjcm9sbENvbnRhaW5lciB8fCAhcmVmLmN1cnJlbnQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgZWxlbWVudEJvdW5kcyA9IHJlZi5jdXJyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgY29uc3Qgc2Nyb2xsQ29udGFpbmVyQm91bmRzID0gc2Nyb2xsQ29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgY29uc3QgaXNFbGVtZW50TGFyZ2VyID0gZWxlbWVudEJvdW5kcy5oZWlnaHQgPiBzY3JvbGxDb250YWluZXJCb3VuZHMuaGVpZ2h0O1xuICAgICAgY29uc3QgaXNOb3RGdWxseVZpc2libGUgPSBlbGVtZW50Qm91bmRzLmJvdHRvbSA+IHNjcm9sbENvbnRhaW5lckJvdW5kcy5ib3R0b20gfHwgZWxlbWVudEJvdW5kcy50b3AgPCBzY3JvbGxDb250YWluZXJCb3VuZHMudG9wO1xuICAgICAgaWYgKGlzTm90RnVsbHlWaXNpYmxlICYmICFpc0VsZW1lbnRMYXJnZXIpIHtcbiAgICAgICAgcmVmLmN1cnJlbnQuc2Nyb2xsSW50b1ZpZXcoe1xuICAgICAgICAgIGJlaGF2aW9yOiAnYXV0bycsXG4gICAgICAgICAgYmxvY2s6ICduZWFyZXN0J1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgZXZlbnRCdXMub24oJ3NlbGVjdGlvbi5jaGFuZ2VkJywgc2Nyb2xsSW50b1ZpZXcpO1xuICAgIHJldHVybiAoKSA9PiBldmVudEJ1cy5vZmYoJ3NlbGVjdGlvbi5jaGFuZ2VkJywgc2Nyb2xsSW50b1ZpZXcpO1xuICB9LCBbZXZlbnRCdXMsIGlkXSk7XG4gIHVzZUxheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHNlbGVjdGlvbi5pc1NlbGVjdGVkKGZpZWxkKSkge1xuICAgICAgcmVmLmN1cnJlbnQuZm9jdXMoKTtcbiAgICB9XG4gIH0sIFtzZWxlY3Rpb24sIGZpZWxkXSk7XG4gIGNvbnN0IG9uQ2xpY2sgPSB1c2VDYWxsYmFjayhldmVudCA9PiB7XG4gICAgLy8gVE9ETyhuaWtrdSk6IHJlZmFjdG9yIHRoaXMgdG8gdXNlIHByb3BlciBET00gZGVsZWdhdGlvblxuICAgIGNvbnN0IGZpZWxkRWwgPSBldmVudC50YXJnZXQuY2xvc2VzdCgnW2RhdGEtaWRdJyk7XG4gICAgaWYgKCFmaWVsZEVsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGlkID0gZmllbGRFbC5kYXRhc2V0LmlkO1xuICAgIGlmIChpZCA9PT0gZmllbGQuaWQpIHtcbiAgICAgIHNlbGVjdGlvbi50b2dnbGUoZmllbGQpO1xuICAgIH1cbiAgfSwgW2ZpZWxkLCBzZWxlY3Rpb25dKTtcbiAgY29uc3QgaXNTZWxlY3RlZCA9IHNlbGVjdGlvbi5pc1NlbGVjdGVkKGZpZWxkKTtcbiAgY29uc3QgY2xhc3NTdHJpbmcgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCBjbGFzc2VzID0gW107XG4gICAgaWYgKHByb3BzLmNsYXNzKSB7XG4gICAgICBjbGFzc2VzLnB1c2goLi4ucHJvcHMuY2xhc3Muc3BsaXQoJyAnKSk7XG4gICAgfVxuICAgIGlmIChpc1NlbGVjdGVkKSB7XG4gICAgICBjbGFzc2VzLnB1c2goJ2Zqcy1lZGl0b3Itc2VsZWN0ZWQnKTtcbiAgICB9XG4gICAgY29uc3QgZ3JvdXBsaWtlID0gWydncm91cCcsICdkeW5hbWljbGlzdCddLmluY2x1ZGVzKHR5cGUpO1xuICAgIGlmIChncm91cGxpa2UpIHtcbiAgICAgIGNsYXNzZXMucHVzaChzaG93T3V0bGluZSA/ICdmanMtb3V0bGluZWQnIDogJ2Zqcy1kYXNoZWQtb3V0bGluZWQnKTtcbiAgICB9XG4gICAgaWYgKGhvdmVyZWQpIHtcbiAgICAgIGNsYXNzZXMucHVzaCgnZmpzLWVkaXRvci1ob3ZlcmVkJyk7XG4gICAgfVxuICAgIHJldHVybiBjbGFzc2VzLmpvaW4oJyAnKTtcbiAgfSwgW2hvdmVyZWQsIGlzU2VsZWN0ZWQsIHByb3BzLmNsYXNzLCBzaG93T3V0bGluZSwgdHlwZV0pO1xuICBjb25zdCBvblJlbW92ZSA9IGV2ZW50ID0+IHtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBjb25zdCBwYXJlbnRGaWVsZCA9IGZvcm1GaWVsZFJlZ2lzdHJ5LmdldChmaWVsZC5fcGFyZW50KTtcbiAgICBjb25zdCBpbmRleCA9IGdldEZvcm1GaWVsZEluZGV4KHBhcmVudEZpZWxkLCBmaWVsZCk7XG4gICAgbW9kZWxpbmcucmVtb3ZlRm9ybUZpZWxkKGZpZWxkLCBwYXJlbnRGaWVsZCwgaW5kZXgpO1xuICB9O1xuICBjb25zdCBvbktleVByZXNzID0gZXZlbnQgPT4ge1xuICAgIGlmIChldmVudC5rZXkgPT09ICdFbnRlcicpIHtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgc2VsZWN0aW9uLnRvZ2dsZShmaWVsZCk7XG4gICAgfVxuICB9O1xuICByZXR1cm4ganN4cyhcImRpdlwiLCB7XG4gICAgY2xhc3M6IGNsYXNzU3RyaW5nLFxuICAgIFwiZGF0YS1pZFwiOiBpZCxcbiAgICBcImRhdGEtZmllbGQtdHlwZVwiOiB0eXBlLFxuICAgIHRhYkluZGV4OiB0eXBlID09PSAnZGVmYXVsdCcgPyAtMSA6IDAsXG4gICAgb25DbGljazogb25DbGljayxcbiAgICBvbktleVByZXNzOiBvbktleVByZXNzLFxuICAgIG9uTW91c2VPdmVyOiBlID0+IHtcbiAgICAgIGlmIChob3ZlckluZm8uY2xlYW51cCkge1xuICAgICAgICBob3ZlckluZm8uY2xlYW51cCgpO1xuICAgICAgfVxuICAgICAgc2V0SG92ZXJlZCh0cnVlKTtcbiAgICAgIGhvdmVySW5mby5jbGVhbnVwID0gKCkgPT4gc2V0SG92ZXJlZChmYWxzZSk7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH0sXG4gICAgcmVmOiByZWYsXG4gICAgY2hpbGRyZW46IFtqc3goRGVidWdDb2x1bW5zLCB7XG4gICAgICBmaWVsZDogZmllbGRcbiAgICB9KSwganN4KENvbnRleHRQYWQsIHtcbiAgICAgIGNoaWxkcmVuOiBzZWxlY3Rpb24uaXNTZWxlY3RlZChmaWVsZCkgJiYgZmllbGQudHlwZSAhPT0gJ2RlZmF1bHQnID8ganN4KFwiYnV0dG9uXCIsIHtcbiAgICAgICAgdHlwZTogXCJidXR0b25cIixcbiAgICAgICAgdGl0bGU6IGdldFJlbW92ZUJ1dHRvblRpdGxlKGZpZWxkLCBmb3JtRmllbGRzKSxcbiAgICAgICAgY2xhc3M6IFwiZmpzLWNvbnRleHQtcGFkLWl0ZW1cIixcbiAgICAgICAgb25DbGljazogb25SZW1vdmUsXG4gICAgICAgIGNoaWxkcmVuOiBqc3goU3ZnRGVsZXRlLCB7fSlcbiAgICAgIH0pIDogbnVsbFxuICAgIH0pLCBwcm9wcy5jaGlsZHJlbiwganN4KEZpZWxkUmVzaXplciwge1xuICAgICAgcG9zaXRpb246IFwibGVmdFwiLFxuICAgICAgZmllbGQ6IGZpZWxkXG4gICAgfSksIGpzeChGaWVsZFJlc2l6ZXIsIHtcbiAgICAgIHBvc2l0aW9uOiBcInJpZ2h0XCIsXG4gICAgICBmaWVsZDogZmllbGRcbiAgICB9KV1cbiAgfSk7XG59XG5mdW5jdGlvbiBEZWJ1Z0NvbHVtbnMocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGZpZWxkXG4gIH0gPSBwcm9wcztcbiAgY29uc3QgZGVidWdDb2x1bW5zQ29uZmlnID0gdXNlU2VydmljZSQxKCdjb25maWcuZGVidWdDb2x1bW5zJyk7XG4gIGlmICghZGVidWdDb2x1bW5zQ29uZmlnIHx8IGZpZWxkLnR5cGUgPT0gJ2RlZmF1bHQnKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIGpzeChcImRpdlwiLCB7XG4gICAgc3R5bGU6IFwid2lkdGg6IGZpdC1jb250ZW50OyBwYWRkaW5nOiAycHggNnB4OyBoZWlnaHQ6IDE2cHg7IGJhY2tncm91bmQ6IHZhcigtLWNvbG9yLWJsdWUtMjA1LTEwMC05NSk7IGRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogY2VudGVyOyBhbGlnbi1pdGVtczogY2VudGVyOyBwb3NpdGlvbjogYWJzb2x1dGU7IGJvdHRvbTogLTJweDsgei1pbmRleDogMjsgZm9udC1zaXplOiAxMHB4OyByaWdodDogM3B4O1wiLFxuICAgIGNsYXNzOiBcImZqcy1kZWJ1Zy1jb2x1bW5zXCIsXG4gICAgY2hpbGRyZW46IChmaWVsZC5sYXlvdXQgfHwge30pLmNvbHVtbnMgfHwgJ2F1dG8nXG4gIH0pO1xufVxuZnVuY3Rpb24gQ2hpbGRyZW4ocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGZpZWxkXG4gIH0gPSBwcm9wcztcbiAgY29uc3Qge1xuICAgIGlkXG4gIH0gPSBmaWVsZDtcbiAgY29uc3QgY2xhc3NlcyA9IFsnZmpzLWNoaWxkcmVuJywgRFJPUF9DT05UQUlORVJfVkVSVElDQUxfQ0xTXTtcbiAgaWYgKHByb3BzLmNsYXNzKSB7XG4gICAgY2xhc3Nlcy5wdXNoKC4uLnByb3BzLmNsYXNzLnNwbGl0KCcgJykpO1xuICB9XG4gIHJldHVybiBqc3goXCJkaXZcIiwge1xuICAgIGNsYXNzOiBjbGFzc2VzLmpvaW4oJyAnKSxcbiAgICBcImRhdGEtaWRcIjogaWQsXG4gICAgY2hpbGRyZW46IHByb3BzLmNoaWxkcmVuXG4gIH0pO1xufVxuZnVuY3Rpb24gUm93KHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICByb3dcbiAgfSA9IHByb3BzO1xuICBjb25zdCB7XG4gICAgaWRcbiAgfSA9IHJvdztcbiAgY29uc3QgY2xhc3NlcyA9IFtEUk9QX0NPTlRBSU5FUl9IT1JJWk9OVEFMX0NMU107XG4gIGlmIChwcm9wcy5jbGFzcykge1xuICAgIGNsYXNzZXMucHVzaCguLi5wcm9wcy5jbGFzcy5zcGxpdCgnICcpKTtcbiAgfVxuICByZXR1cm4ganN4cyhcImRpdlwiLCB7XG4gICAgY2xhc3M6IGNsYXNzbmFtZXMoRFJBR19ST1dfTU9WRV9DTFMpLFxuICAgIGNoaWxkcmVuOiBbanN4KFwic3BhblwiLCB7XG4gICAgICBjbGFzczogXCJmanMtcm93LWRyYWdnZXJcIixcbiAgICAgIGNoaWxkcmVuOiBqc3goU3ZnRHJhZ2dhYmxlLCB7fSlcbiAgICB9KSwganN4KFwiZGl2XCIsIHtcbiAgICAgIGNsYXNzOiBjbGFzc2VzLmpvaW4oJyAnKSxcbiAgICAgIHN0eWxlOiBwcm9wcy5zdHlsZSxcbiAgICAgIFwiZGF0YS1yb3ctaWRcIjogaWQsXG4gICAgICBjaGlsZHJlbjogcHJvcHMuY2hpbGRyZW5cbiAgICB9KV1cbiAgfSk7XG59XG5mdW5jdGlvbiBDb2x1bW4ocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGZpZWxkXG4gIH0gPSBwcm9wcztcbiAgY29uc3QgY2xhc3NlcyA9IFtEUkFHX01PVkVfQ0xTXTtcbiAgaWYgKGZpZWxkLnR5cGUgPT09ICdkZWZhdWx0Jykge1xuICAgIHJldHVybiBwcm9wcy5jaGlsZHJlbjtcbiAgfVxuICBpZiAocHJvcHMuY2xhc3MpIHtcbiAgICBjbGFzc2VzLnB1c2goLi4ucHJvcHMuY2xhc3Muc3BsaXQoJyAnKSk7XG4gIH1cbiAgcmV0dXJuIGpzeChcImRpdlwiLCB7XG4gICAgXCJkYXRhLWZpZWxkLXR5cGVcIjogZmllbGQudHlwZSxcbiAgICBjbGFzczogY2xhc3Nlcy5qb2luKCcgJyksXG4gICAgY2hpbGRyZW46IHByb3BzLmNoaWxkcmVuXG4gIH0pO1xufVxuZnVuY3Rpb24gRm9ybUVkaXRvciQxKCkge1xuICBjb25zdCBkcmFnZ2luZyA9IHVzZVNlcnZpY2UkMSgnZHJhZ2dpbmcnKSxcbiAgICBldmVudEJ1cyA9IHVzZVNlcnZpY2UkMSgnZXZlbnRCdXMnKSxcbiAgICBmb3JtRWRpdG9yID0gdXNlU2VydmljZSQxKCdmb3JtRWRpdG9yJyksXG4gICAgaW5qZWN0b3IgPSB1c2VTZXJ2aWNlJDEoJ2luamVjdG9yJyksXG4gICAgc2VsZWN0aW9uID0gdXNlU2VydmljZSQxKCdzZWxlY3Rpb24nKSxcbiAgICBwcm9wZXJ0aWVzUGFuZWwgPSB1c2VTZXJ2aWNlJDEoJ3Byb3BlcnRpZXNQYW5lbCcpLFxuICAgIHByb3BlcnRpZXNQYW5lbENvbmZpZyA9IHVzZVNlcnZpY2UkMSgnY29uZmlnLnByb3BlcnRpZXNQYW5lbCcpO1xuICBjb25zdCB7XG4gICAgc2NoZW1hLFxuICAgIHByb3BlcnRpZXNcbiAgfSA9IGZvcm1FZGl0b3IuX2dldFN0YXRlKCk7XG4gIGNvbnN0IHtcbiAgICBhcmlhTGFiZWxcbiAgfSA9IHByb3BlcnRpZXM7XG4gIGNvbnN0IGZvcm1Db250YWluZXJSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IHByb3BlcnRpZXNQYW5lbFJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgWywgc2V0U2VsZWN0aW9uXSA9IHVzZVN0YXRlKHNjaGVtYSk7XG4gIGNvbnN0IFtoYXNJbml0aWFsaXplZCwgc2V0SGFzSW5pdGlhbGl6ZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZ1bmN0aW9uIGhhbmRsZVNlbGVjdGlvbkNoYW5nZWQoZXZlbnQpIHtcbiAgICAgIHNldFNlbGVjdGlvbihldmVudC5zZWxlY3Rpb24gfHwgc2NoZW1hKTtcbiAgICB9XG4gICAgZXZlbnRCdXMub24oJ3NlbGVjdGlvbi5jaGFuZ2VkJywgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlZCk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGV2ZW50QnVzLm9mZignc2VsZWN0aW9uLmNoYW5nZWQnLCBoYW5kbGVTZWxlY3Rpb25DaGFuZ2VkKTtcbiAgICB9O1xuICB9LCBbZXZlbnRCdXMsIHNjaGVtYV0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNldFNlbGVjdGlvbihzZWxlY3Rpb24uZ2V0KCkgfHwgc2NoZW1hKTtcbiAgfSwgW3NlbGVjdGlvbiwgc2NoZW1hXSk7XG4gIGNvbnN0IFtkcmFrZSwgc2V0RHJha2VdID0gdXNlU3RhdGUobnVsbCk7XG4gIGNvbnN0IGRyYWdBbmREcm9wQ29udGV4dCA9IHtcbiAgICBkcmFrZVxuICB9O1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGxldCBkcmFndWxhSW5zdGFuY2UgPSBkcmFnZ2luZy5jcmVhdGVEcmFndWxhSW5zdGFuY2Uoe1xuICAgICAgY29udGFpbmVyOiBbRFJBR19DT05UQUlORVJfQ0xTLCBEUk9QX0NPTlRBSU5FUl9WRVJUSUNBTF9DTFMsIERST1BfQ09OVEFJTkVSX0hPUklaT05UQUxfQ0xTXSxcbiAgICAgIG1pcnJvckNvbnRhaW5lcjogZm9ybUNvbnRhaW5lclJlZi5jdXJyZW50XG4gICAgfSk7XG4gICAgc2V0RHJha2UoZHJhZ3VsYUluc3RhbmNlKTtcbiAgICBjb25zdCBvbkRldGFjaCA9ICgpID0+IHtcbiAgICAgIGlmIChkcmFndWxhSW5zdGFuY2UpIHtcbiAgICAgICAgZHJhZ3VsYUluc3RhbmNlLmRlc3Ryb3koKTtcbiAgICAgICAgZXZlbnRCdXMuZmlyZSgnZHJhZ3VsYS5kZXN0cm95ZWQnKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IG9uQXR0YWNoID0gKCkgPT4ge1xuICAgICAgb25EZXRhY2goKTtcbiAgICAgIGRyYWd1bGFJbnN0YW5jZSA9IGRyYWdnaW5nLmNyZWF0ZURyYWd1bGFJbnN0YW5jZSh7XG4gICAgICAgIGNvbnRhaW5lcjogW0RSQUdfQ09OVEFJTkVSX0NMUywgRFJPUF9DT05UQUlORVJfVkVSVElDQUxfQ0xTLCBEUk9QX0NPTlRBSU5FUl9IT1JJWk9OVEFMX0NMU10sXG4gICAgICAgIG1pcnJvckNvbnRhaW5lcjogZm9ybUNvbnRhaW5lclJlZi5jdXJyZW50XG4gICAgICB9KTtcbiAgICAgIHNldERyYWtlKGRyYWd1bGFJbnN0YW5jZSk7XG4gICAgfTtcbiAgICBjb25zdCBvbkNyZWF0ZSA9IGRyYWtlID0+IHtcbiAgICAgIHNldERyYWtlKGRyYWtlKTtcbiAgICB9O1xuICAgIGNvbnN0IG9uRHJhZ1N0YXJ0ID0gKCkgPT4ge1xuICAgICAgc2V0KCdncmFiYmluZycpO1xuICAgIH07XG4gICAgY29uc3Qgb25EcmFnRW5kID0gKCkgPT4ge1xuICAgICAgdW5zZXQoKTtcbiAgICB9O1xuICAgIGV2ZW50QnVzLm9uKCdhdHRhY2gnLCBvbkF0dGFjaCk7XG4gICAgZXZlbnRCdXMub24oJ2RldGFjaCcsIG9uRGV0YWNoKTtcbiAgICBldmVudEJ1cy5vbignZHJhZ3VsYS5jcmVhdGVkJywgb25DcmVhdGUpO1xuICAgIGV2ZW50QnVzLm9uKCdkcmFnLnN0YXJ0Jywgb25EcmFnU3RhcnQpO1xuICAgIGV2ZW50QnVzLm9uKCdkcmFnLmVuZCcsIG9uRHJhZ0VuZCk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIG9uRGV0YWNoKCk7XG4gICAgICBldmVudEJ1cy5vZmYoJ2F0dGFjaCcsIG9uQXR0YWNoKTtcbiAgICAgIGV2ZW50QnVzLm9mZignZGV0YWNoJywgb25EZXRhY2gpO1xuICAgICAgZXZlbnRCdXMub2ZmKCdkcmFndWxhLmNyZWF0ZWQnLCBvbkNyZWF0ZSk7XG4gICAgICBldmVudEJ1cy5vZmYoJ2RyYWcuc3RhcnQnLCBvbkRyYWdTdGFydCk7XG4gICAgICBldmVudEJ1cy5vZmYoJ2RyYWcuZW5kJywgb25EcmFnRW5kKTtcbiAgICB9O1xuICB9LCBbZHJhZ2dpbmcsIGV2ZW50QnVzXSk7XG5cbiAgLy8gZmlyZSBldmVudCBhZnRlciByZW5kZXIgdG8gbm90aWZ5IGludGVyZXN0ZWQgcGFydGllc1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChoYXNJbml0aWFsaXplZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzZXRIYXNJbml0aWFsaXplZCh0cnVlKTtcbiAgICBldmVudEJ1cy5maXJlKCdyZW5kZXJlZCcpO1xuXG4gICAgLy8ga2VlcCBkZXByZWNhdGVkIGV2ZW50IHRvIGVuc3VyZSBiYWNrd2FyZCBjb21wYXRpYmlsaXR5XG4gICAgZXZlbnRCdXMuZmlyZSgnZm9ybUVkaXRvci5yZW5kZXJlZCcpO1xuICB9LCBbZXZlbnRCdXMsIGhhc0luaXRpYWxpemVkXSk7XG4gIGNvbnN0IGZvcm1SZW5kZXJDb250ZXh0ID0gdXNlTWVtbygoKSA9PiAoe1xuICAgIENoaWxkcmVuLFxuICAgIENvbHVtbixcbiAgICBFbGVtZW50OiBFbGVtZW50JDEsXG4gICAgRW1wdHksXG4gICAgUm93LFxuICAgIGhvdmVySW5mbzoge31cbiAgfSksIFtdKTtcbiAgY29uc3QgZm9ybUNvbnRleHQgPSB1c2VNZW1vKCgpID0+ICh7XG4gICAgZ2V0U2VydmljZSh0eXBlLCBzdHJpY3QgPSB0cnVlKSB7XG4gICAgICAvLyBUT0RPKHBoaWxpcHBmcm9tbWUpOiBjbGVhbiB1cFxuICAgICAgaWYgKHR5cGUgPT09ICdmb3JtJykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIF9nZXRTdGF0ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIGRhdGE6IHt9LFxuICAgICAgICAgICAgICBlcnJvcnM6IHt9LFxuICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgICAgYXJpYUxhYmVsLFxuICAgICAgICAgICAgICAgIGRpc2FibGVkOiB0cnVlXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHNjaGVtYVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICByZXR1cm4gaW5qZWN0b3IuZ2V0KHR5cGUsIHN0cmljdCk7XG4gICAgfSxcbiAgICBmb3JtSWQ6IGZvcm1FZGl0b3IuX2lkXG4gIH0pLCBbYXJpYUxhYmVsLCBmb3JtRWRpdG9yLCBpbmplY3Rvciwgc2NoZW1hXSk7XG4gIGNvbnN0IG9uU3VibWl0ID0gdXNlQ2FsbGJhY2soKCkgPT4ge30sIFtdKTtcbiAgY29uc3Qgb25SZXNldCA9IHVzZUNhbGxiYWNrKCgpID0+IHt9LCBbXSk7XG5cbiAgLy8gYXR0YWNoIGRlZmF1bHQgcHJvcGVydGllcyBwYW5lbFxuICBjb25zdCBoYXNEZWZhdWx0UHJvcGVydGllc1BhbmVsID0gZGVmYXVsdFByb3BlcnRpZXNQYW5lbChwcm9wZXJ0aWVzUGFuZWxDb25maWcpO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChoYXNEZWZhdWx0UHJvcGVydGllc1BhbmVsKSB7XG4gICAgICBwcm9wZXJ0aWVzUGFuZWwuYXR0YWNoVG8ocHJvcGVydGllc1BhbmVsUmVmLmN1cnJlbnQpO1xuICAgIH1cbiAgfSwgW3Byb3BlcnRpZXNQYW5lbFJlZiwgcHJvcGVydGllc1BhbmVsLCBoYXNEZWZhdWx0UHJvcGVydGllc1BhbmVsXSk7XG4gIHJldHVybiBqc3goXCJkaXZcIiwge1xuICAgIGNsYXNzOiBcImZqcy1mb3JtLWVkaXRvclwiLFxuICAgIGNoaWxkcmVuOiBqc3hzKFNsb3RGaWxsUm9vdCwge1xuICAgICAgY2hpbGRyZW46IFtqc3hzKERyYWdBbmREcm9wQ29udGV4dC5Qcm92aWRlciwge1xuICAgICAgICB2YWx1ZTogZHJhZ0FuZERyb3BDb250ZXh0LFxuICAgICAgICBjaGlsZHJlbjogW2pzeChNb2R1bGFyU2VjdGlvbiwge1xuICAgICAgICAgIHJvb3RDbGFzczogXCJmanMtcGFsZXR0ZS1jb250YWluZXJcIixcbiAgICAgICAgICBzZWN0aW9uOiBcInBhbGV0dGVcIixcbiAgICAgICAgICBjaGlsZHJlbjoganN4KFBhbGV0dGUsIHt9KVxuICAgICAgICB9KSwganN4KFwiZGl2XCIsIHtcbiAgICAgICAgICByZWY6IGZvcm1Db250YWluZXJSZWYsXG4gICAgICAgICAgY2xhc3M6IFwiZmpzLWZvcm0tY29udGFpbmVyXCIsXG4gICAgICAgICAgY2hpbGRyZW46IGpzeChGb3JtQ29udGV4dC5Qcm92aWRlciwge1xuICAgICAgICAgICAgdmFsdWU6IGZvcm1Db250ZXh0LFxuICAgICAgICAgICAgY2hpbGRyZW46IGpzeChGb3JtUmVuZGVyQ29udGV4dC5Qcm92aWRlciwge1xuICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgIHZhbHVlOiBmb3JtUmVuZGVyQ29udGV4dCxcbiAgICAgICAgICAgICAgY2hpbGRyZW46IGpzeChGb3JtQ29tcG9uZW50LCB7XG4gICAgICAgICAgICAgICAgb25TdWJtaXQ6IG9uU3VibWl0LFxuICAgICAgICAgICAgICAgIG9uUmVzZXQ6IG9uUmVzZXRcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSlcbiAgICAgICAgfSksIGpzeChDcmVhdGVQcmV2aWV3LCB7fSldXG4gICAgICB9KSwgaGFzRGVmYXVsdFByb3BlcnRpZXNQYW5lbCAmJiBqc3goXCJkaXZcIiwge1xuICAgICAgICBjbGFzczogXCJmanMtZWRpdG9yLXByb3BlcnRpZXMtY29udGFpbmVyXCIsXG4gICAgICAgIHJlZjogcHJvcGVydGllc1BhbmVsUmVmXG4gICAgICB9KSwganN4KE1vZHVsYXJTZWN0aW9uLCB7XG4gICAgICAgIHJvb3RDbGFzczogXCJmanMtcmVuZGVyLWluamVjdG9yLWNvbnRhaW5lclwiLFxuICAgICAgICBzZWN0aW9uOiBcInJlbmRlckluamVjdG9yXCIsXG4gICAgICAgIGNoaWxkcmVuOiBqc3goSW5qZWN0ZWRSZW5kZXJzUm9vdCwge30pXG4gICAgICB9KV1cbiAgICB9KVxuICB9KTtcbn1cbmZ1bmN0aW9uIGdldEZvcm1GaWVsZEluZGV4KHBhcmVudCwgZm9ybUZpZWxkKSB7XG4gIGxldCBmaWVsZEZvcm1JbmRleCA9IHBhcmVudC5jb21wb25lbnRzLmxlbmd0aDtcbiAgcGFyZW50LmNvbXBvbmVudHMuZm9yRWFjaCgoe1xuICAgIGlkXG4gIH0sIGluZGV4KSA9PiB7XG4gICAgaWYgKGlkID09PSBmb3JtRmllbGQuaWQpIHtcbiAgICAgIGZpZWxkRm9ybUluZGV4ID0gaW5kZXg7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIGZpZWxkRm9ybUluZGV4O1xufVxuZnVuY3Rpb24gQ3JlYXRlUHJldmlldyhwcm9wcykge1xuICBjb25zdCB7XG4gICAgZHJha2VcbiAgfSA9IHVzZUNvbnRleHQoRHJhZ0FuZERyb3BDb250ZXh0KTtcbiAgY29uc3QgZm9ybUZpZWxkcyA9IHVzZVNlcnZpY2UkMSgnZm9ybUZpZWxkcycpO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghZHJha2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZnVuY3Rpb24gaGFuZGxlQ2xvbmVkKGNsb25lLCBvcmlnaW5hbCwgdHlwZSkge1xuICAgICAgY29uc3QgZmllbGRUeXBlID0gY2xvbmUuZGF0YXNldC5maWVsZFR5cGU7XG5cbiAgICAgIC8vICgxKSBmaWVsZCBwcmV2aWV3XG4gICAgICBpZiAoZmllbGRUeXBlKSB7XG4gICAgICAgIGNvbnN0IHBhbGV0dGVFbnRyeSA9IGZpbmRQYWxldHRlRW50cnkoZmllbGRUeXBlLCBmb3JtRmllbGRzKTtcbiAgICAgICAgaWYgKCFwYWxldHRlRW50cnkpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgIGxhYmVsXG4gICAgICAgIH0gPSBwYWxldHRlRW50cnk7XG4gICAgICAgIGNvbnN0IEljb24gPSBnZXRQYWxldHRlSWNvbihwYWxldHRlRW50cnkpO1xuICAgICAgICBjbG9uZS5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgY2xvbmUuY2xhc3MgPSAnZ3UtbWlycm9yJztcbiAgICAgICAgY2xvbmUuY2xhc3NMaXN0LmFkZCgnZmpzLWZpZWxkLXByZXZpZXctY29udGFpbmVyJyk7XG4gICAgICAgIGlmIChvcmlnaW5hbC5jbGFzc0xpc3QuY29udGFpbnMoJ2Zqcy1wYWxldHRlLWZpZWxkJykpIHtcbiAgICAgICAgICAvLyBkZWZhdWx0IHRvIGF1dG8gY29sdW1ucyB3aGVuIGNyZWF0aW5nIGZyb20gcGFsZXR0ZVxuICAgICAgICAgIGNsb25lLmNsYXNzTGlzdC5hZGQoJ2Nkcy0tY29sJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyB0b2RvKHBpbnVzc2lsdmVzdHJ1cyk6IGRyYWd1bGEsIGhvdyB0byBtaXRpZ2F0ZSBjdXJzb3IgcG9zaXRpb25cbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2JldmFjcXVhL2RyYWd1bGEvaXNzdWVzLzI4NVxuICAgICAgICByZW5kZXIoanN4KEZpZWxkRHJhZ1ByZXZpZXcsIHtcbiAgICAgICAgICBsYWJlbDogbGFiZWwsXG4gICAgICAgICAgSWNvbjogSWNvblxuICAgICAgICB9KSwgY2xvbmUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gKDIpIHJvdyBwcmV2aWV3XG5cbiAgICAgICAgLy8gcmVtb3ZlIGVsZW1lbnRzIGZyb20gY29weSAoY29udGV4dCBwYWQsIHJvdyBkcmFnZ2VyLCAuLi4pXG4gICAgICAgIFsnZmpzLWNvbnRleHQtcGFkJywgJ2Zqcy1yb3ctZHJhZ2dlcicsICdmanMtZGVidWctY29sdW1ucyddLmZvckVhY2goY2xzID0+IHtcbiAgICAgICAgICBjb25zdCBjbG9uZU5vZGUgPSBjbG9uZS5xdWVyeVNlbGVjdG9yQWxsKCcuJyArIGNscyk7XG4gICAgICAgICAgY2xvbmVOb2RlLmxlbmd0aCAmJiBjbG9uZU5vZGUuZm9yRWFjaChlID0+IGUucmVtb3ZlKCkpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBtaXJyb3IgZ3JpZFxuICAgICAgICBjbG9uZS5jbGFzc0xpc3QuYWRkKCdjZHMtLWdyaWQnKTtcbiAgICAgICAgY2xvbmUuY2xhc3NMaXN0LmFkZCgnY2RzLS1ncmlkLS1jb25kZW5zZWQnKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZHJha2Uub24oJ2Nsb25lZCcsIGhhbmRsZUNsb25lZCk7XG4gICAgcmV0dXJuICgpID0+IGRyYWtlLm9mZignY2xvbmVkJywgaGFuZGxlQ2xvbmVkKTtcbiAgfSwgW2RyYWtlLCBmb3JtRmllbGRzXSk7XG4gIHJldHVybiBudWxsO1xufVxuXG4vLyBoZWxwZXIgLy8vLy8vXG5cbmZ1bmN0aW9uIGZpbmRQYWxldHRlRW50cnkodHlwZSwgZm9ybUZpZWxkcykge1xuICByZXR1cm4gY29sbGVjdFBhbGV0dGVFbnRyaWVzKGZvcm1GaWVsZHMpLmZpbmQoZW50cnkgPT4gZW50cnkudHlwZSA9PT0gdHlwZSk7XG59XG5mdW5jdGlvbiBkZWZhdWx0UHJvcGVydGllc1BhbmVsKHByb3BlcnRpZXNQYW5lbENvbmZpZykge1xuICByZXR1cm4gIShwcm9wZXJ0aWVzUGFuZWxDb25maWcgJiYgcHJvcGVydGllc1BhbmVsQ29uZmlnLnBhcmVudCk7XG59XG5mdW5jdGlvbiBnZXRSZW1vdmVCdXR0b25UaXRsZShmb3JtRmllbGQsIGZvcm1GaWVsZHMpIHtcbiAgY29uc3QgZW50cnkgPSBmaW5kUGFsZXR0ZUVudHJ5KGZvcm1GaWVsZC50eXBlLCBmb3JtRmllbGRzKTtcbiAgaWYgKCFlbnRyeSkge1xuICAgIHJldHVybiAnUmVtb3ZlIGZvcm0gZmllbGQnO1xuICB9XG4gIHJldHVybiBgUmVtb3ZlICR7ZW50cnkubGFiZWx9YDtcbn1cblxuY2xhc3MgUmVuZGVyZXIge1xuICBjb25zdHJ1Y3RvcihyZW5kZXJDb25maWcsIGV2ZW50QnVzLCBmb3JtRWRpdG9yLCBpbmplY3Rvcikge1xuICAgIGNvbnN0IHtcbiAgICAgIGNvbnRhaW5lcixcbiAgICAgIGNvbXBhY3QgPSBmYWxzZVxuICAgIH0gPSByZW5kZXJDb25maWc7XG4gICAgZXZlbnRCdXMub24oJ2Zvcm0uaW5pdCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vIGVtaXQgPGNhbnZhcy5pbml0PiBzbyBkZXBlbmRlbnQgY29tcG9uZW50cyBjYW4gaG9vayBpblxuICAgICAgLy8gdGhpcyBpcyByZXF1aXJlZCB0byByZWdpc3RlciBrZXlib2FyZCBiaW5kaW5nc1xuICAgICAgZXZlbnRCdXMuZmlyZSgnY2FudmFzLmluaXQnLCB7XG4gICAgICAgIHN2ZzogY29udGFpbmVyLFxuICAgICAgICB2aWV3cG9ydDogbnVsbFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvLyBmb2N1cyBjb250YWluZXIgb24gb3ZlciBpZiBubyBzZWxlY3Rpb25cbiAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IGRvY3VtZW50LmJvZHkpIHtcbiAgICAgICAgY29udGFpbmVyLmZvY3VzKHtcbiAgICAgICAgICBwcmV2ZW50U2Nyb2xsOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gZW5zdXJlIHdlIGZvY3VzIHRoZSBjb250YWluZXIgaWYgdGhlIHVzZXJzIGNsaWNrc1xuICAgIC8vIGluc2lkZTsgdGhpcyBmb2xsb3dzIGlucHV0IGZvY3VzIGhhbmRsaW5nIGNsb3NlbHlcbiAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIC8vIGZvcmNlIGZvY3VzIHdoZW4gY2xpY2tpbmcgY29udGFpbmVyXG4gICAgICBpZiAoIWNvbnRhaW5lci5jb250YWlucyhkb2N1bWVudC5hY3RpdmVFbGVtZW50KSkge1xuICAgICAgICBjb250YWluZXIuZm9jdXMoe1xuICAgICAgICAgIHByZXZlbnRTY3JvbGw6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgY29uc3QgQXBwID0gKCkgPT4ge1xuICAgICAgY29uc3QgW3N0YXRlLCBzZXRTdGF0ZV0gPSB1c2VTdGF0ZShmb3JtRWRpdG9yLl9nZXRTdGF0ZSgpKTtcbiAgICAgIGNvbnN0IGZvcm1FZGl0b3JDb250ZXh0ID0ge1xuICAgICAgICBnZXRTZXJ2aWNlKHR5cGUsIHN0cmljdCA9IHRydWUpIHtcbiAgICAgICAgICByZXR1cm4gaW5qZWN0b3IuZ2V0KHR5cGUsIHN0cmljdCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBmb3JtRWRpdG9yLm9uKCdjaGFuZ2VkJywgbmV3U3RhdGUgPT4ge1xuICAgICAgICBzZXRTdGF0ZShuZXdTdGF0ZSk7XG4gICAgICB9KTtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgc2NoZW1hXG4gICAgICB9ID0gc3RhdGU7XG4gICAgICBpZiAoIXNjaGVtYSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBqc3goXCJkaXZcIiwge1xuICAgICAgICBjbGFzczogYGZqcy1jb250YWluZXIgZmpzLWVkaXRvci1jb250YWluZXIgJHtjb21wYWN0ID8gJ2Zqcy1lZGl0b3ItY29tcGFjdCcgOiAnJ31gLFxuICAgICAgICBjaGlsZHJlbjoganN4KEZvcm1FZGl0b3JDb250ZXh0LlByb3ZpZGVyLCB7XG4gICAgICAgICAgdmFsdWU6IGZvcm1FZGl0b3JDb250ZXh0LFxuICAgICAgICAgIGNoaWxkcmVuOiBqc3goRm9ybUVkaXRvciQxLCB7fSlcbiAgICAgICAgfSlcbiAgICAgIH0pO1xuICAgIH07XG4gICAgZXZlbnRCdXMub24oJ2Zvcm0uaW5pdCcsICgpID0+IHtcbiAgICAgIHJlbmRlcihqc3goQXBwLCB7fSksIGNvbnRhaW5lcik7XG4gICAgfSk7XG4gICAgZXZlbnRCdXMub24oJ2Zvcm0uZGVzdHJveScsICgpID0+IHtcbiAgICAgIHJlbmRlcihudWxsLCBjb250YWluZXIpO1xuICAgIH0pO1xuICB9XG59XG5SZW5kZXJlci4kaW5qZWN0ID0gWydjb25maWcucmVuZGVyZXInLCAnZXZlbnRCdXMnLCAnZm9ybUVkaXRvcicsICdpbmplY3RvciddO1xuXG5jb25zdCBSZW5kZXJNb2R1bGUgPSB7XG4gIF9faW5pdF9fOiBbJ2Zvcm1GaWVsZHMnLCAncmVuZGVyZXInXSxcbiAgZm9ybUZpZWxkczogWyd0eXBlJywgRWRpdG9yRm9ybUZpZWxkc10sXG4gIHJlbmRlcmVyOiBbJ3R5cGUnLCBSZW5kZXJlcl1cbn07XG5cbmNvbnN0IENvcmVNb2R1bGUgPSB7XG4gIF9fZGVwZW5kc19fOiBbUmVuZGVyTW9kdWxlXSxcbiAgZGVib3VuY2U6IFsnZmFjdG9yeScsIERlYm91bmNlRmFjdG9yeV0sXG4gIGV2ZW50QnVzOiBbJ3R5cGUnLCBFdmVudEJ1c10sXG4gIGltcG9ydGVyOiBbJ3R5cGUnLCBJbXBvcnRlcl0sXG4gIGZvcm1GaWVsZFJlZ2lzdHJ5OiBbJ3R5cGUnLCBGb3JtRmllbGRSZWdpc3RyeV0sXG4gIHBhdGhSZWdpc3RyeTogWyd0eXBlJywgUGF0aFJlZ2lzdHJ5XSxcbiAgZm9ybUxheW91dGVyOiBbJ3R5cGUnLCBGb3JtTGF5b3V0ZXJdLFxuICBmb3JtTGF5b3V0VmFsaWRhdG9yOiBbJ3R5cGUnLCBGb3JtTGF5b3V0VmFsaWRhdG9yXSxcbiAgZmllbGRGYWN0b3J5OiBbJ3R5cGUnLCBGaWVsZEZhY3RvcnldXG59O1xuXG4vKipcbiAqIEB0eXBlZGVmIHtpbXBvcnQoJ2RpZGknKS5JbmplY3Rvcn0gSW5qZWN0b3JcbiAqXG4gKiBAdHlwZWRlZiB7aW1wb3J0KCcuLi8uLi9jb3JlL0V2ZW50QnVzJykuZGVmYXVsdH0gRXZlbnRCdXNcbiAqL1xuXG52YXIgTk9UX1JFR0lTVEVSRURfRVJST1IgPSAnaXMgbm90IGEgcmVnaXN0ZXJlZCBhY3Rpb24nLFxuICBJU19SRUdJU1RFUkVEX0VSUk9SID0gJ2lzIGFscmVhZHkgcmVnaXN0ZXJlZCc7XG5cbi8qKlxuICogQW4gaW50ZXJmYWNlIHRoYXQgcHJvdmlkZXMgYWNjZXNzIHRvIG1vZGVsaW5nIGFjdGlvbnMgYnkgZGVjb3VwbGluZ1xuICogdGhlIG9uZSB3aG8gcmVxdWVzdHMgdGhlIGFjdGlvbiB0byBiZSB0cmlnZ2VyZWQgYW5kIHRoZSB0cmlnZ2VyIGl0c2VsZi5cbiAqXG4gKiBJdCdzIHBvc3NpYmxlIHRvIGFkZCBuZXcgYWN0aW9ucyBieSByZWdpc3RlcmluZyB0aGVtIHdpdGggwrRyZWdpc3RlckFjdGlvbsK0XG4gKiBhbmQgbGlrZXdpc2UgdW5yZWdpc3RlciBleGlzdGluZyBvbmVzIHdpdGggwrR1bnJlZ2lzdGVyQWN0aW9uwrQuXG4gKlxuICpcbiAqICMjIExpZmUtQ3ljbGUgYW5kIGNvbmZpZ3VyYXRpb25cbiAqXG4gKiBUaGUgZWRpdG9yIGFjdGlvbnMgd2lsbCB3YWl0IGZvciBkaWFncmFtIGluaXRpYWxpemF0aW9uIGJlZm9yZVxuICogcmVnaXN0ZXJpbmcgZGVmYXVsdCBhY3Rpb25zIF9hbmRfIGZpcmluZyBhbiBgZWRpdG9yQWN0aW9ucy5pbml0YCBldmVudC5cbiAqXG4gKiBJbnRlcmVzdGVkIHBhcnRpZXMgbWF5IGxpc3RlbiB0byB0aGUgYGVkaXRvckFjdGlvbnMuaW5pdGAgZXZlbnQgd2l0aFxuICogbG93IHByaW9yaXR5IHRvIGNoZWNrLCB3aGljaCBhY3Rpb25zIGdvdCByZWdpc3RlcmVkLiBPdGhlciBjb21wb25lbnRzXG4gKiBtYXkgdXNlIHRoZSBldmVudCB0byByZWdpc3RlciB0aGVpciBvd24gYWN0aW9ucyB2aWEgYHJlZ2lzdGVyQWN0aW9uYC5cbiAqXG4gKiBAcGFyYW0ge0V2ZW50QnVzfSBldmVudEJ1c1xuICogQHBhcmFtIHtJbmplY3Rvcn0gaW5qZWN0b3JcbiAqL1xuZnVuY3Rpb24gRWRpdG9yQWN0aW9ucyhldmVudEJ1cywgaW5qZWN0b3IpIHtcbiAgLy8gaW5pdGlhbGl6ZSBhY3Rpb25zXG4gIHRoaXMuX2FjdGlvbnMgPSB7fTtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICBldmVudEJ1cy5vbignZGlhZ3JhbS5pbml0JywgZnVuY3Rpb24gKCkge1xuICAgIC8vIGFsbCBkaWFncmFtIG1vZHVsZXMgZ290IGxvYWRlZDsgY2hlY2sgd2hpY2ggb25lc1xuICAgIC8vIGFyZSBhdmFpbGFibGUgYW5kIHJlZ2lzdGVyIHRoZSByZXNwZWN0aXZlIGRlZmF1bHQgYWN0aW9uc1xuICAgIHNlbGYuX3JlZ2lzdGVyRGVmYXVsdEFjdGlvbnMoaW5qZWN0b3IpO1xuXG4gICAgLy8gYXNrIGludGVyZXN0ZWQgcGFydGllcyB0byByZWdpc3RlciBhdmFpbGFibGUgZWRpdG9yXG4gICAgLy8gYWN0aW9ucyBvbiBkaWFncmFtIGluaXRpYWxpemF0aW9uXG4gICAgZXZlbnRCdXMuZmlyZSgnZWRpdG9yQWN0aW9ucy5pbml0Jywge1xuICAgICAgZWRpdG9yQWN0aW9uczogc2VsZlxuICAgIH0pO1xuICB9KTtcbn1cbkVkaXRvckFjdGlvbnMuJGluamVjdCA9IFsnZXZlbnRCdXMnLCAnaW5qZWN0b3InXTtcblxuLyoqXG4gKiBSZWdpc3RlciBkZWZhdWx0IGFjdGlvbnMuXG4gKlxuICogQHBhcmFtIHtJbmplY3Rvcn0gaW5qZWN0b3JcbiAqL1xuRWRpdG9yQWN0aW9ucy5wcm90b3R5cGUuX3JlZ2lzdGVyRGVmYXVsdEFjdGlvbnMgPSBmdW5jdGlvbiAoaW5qZWN0b3IpIHtcbiAgLy8gKDEpIHJldHJpZXZlIG9wdGlvbmFsIGNvbXBvbmVudHMgdG8gaW50ZWdyYXRlIHdpdGhcblxuICB2YXIgY29tbWFuZFN0YWNrID0gaW5qZWN0b3IuZ2V0KCdjb21tYW5kU3RhY2snLCBmYWxzZSk7XG4gIHZhciBtb2RlbGluZyA9IGluamVjdG9yLmdldCgnbW9kZWxpbmcnLCBmYWxzZSk7XG4gIHZhciBzZWxlY3Rpb24gPSBpbmplY3Rvci5nZXQoJ3NlbGVjdGlvbicsIGZhbHNlKTtcbiAgdmFyIHpvb21TY3JvbGwgPSBpbmplY3Rvci5nZXQoJ3pvb21TY3JvbGwnLCBmYWxzZSk7XG4gIHZhciBjb3B5UGFzdGUgPSBpbmplY3Rvci5nZXQoJ2NvcHlQYXN0ZScsIGZhbHNlKTtcbiAgdmFyIGNhbnZhcyA9IGluamVjdG9yLmdldCgnY2FudmFzJywgZmFsc2UpO1xuICB2YXIgcnVsZXMgPSBpbmplY3Rvci5nZXQoJ3J1bGVzJywgZmFsc2UpO1xuICB2YXIga2V5Ym9hcmRNb3ZlID0gaW5qZWN0b3IuZ2V0KCdrZXlib2FyZE1vdmUnLCBmYWxzZSk7XG4gIHZhciBrZXlib2FyZE1vdmVTZWxlY3Rpb24gPSBpbmplY3Rvci5nZXQoJ2tleWJvYXJkTW92ZVNlbGVjdGlvbicsIGZhbHNlKTtcblxuICAvLyAoMikgY2hlY2sgY29tcG9uZW50cyBhbmQgcmVnaXN0ZXIgYWN0aW9uc1xuXG4gIGlmIChjb21tYW5kU3RhY2spIHtcbiAgICB0aGlzLnJlZ2lzdGVyKCd1bmRvJywgZnVuY3Rpb24gKCkge1xuICAgICAgY29tbWFuZFN0YWNrLnVuZG8oKTtcbiAgICB9KTtcbiAgICB0aGlzLnJlZ2lzdGVyKCdyZWRvJywgZnVuY3Rpb24gKCkge1xuICAgICAgY29tbWFuZFN0YWNrLnJlZG8oKTtcbiAgICB9KTtcbiAgfVxuICBpZiAoY29weVBhc3RlICYmIHNlbGVjdGlvbikge1xuICAgIHRoaXMucmVnaXN0ZXIoJ2NvcHknLCBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgc2VsZWN0ZWRFbGVtZW50cyA9IHNlbGVjdGlvbi5nZXQoKTtcbiAgICAgIGlmIChzZWxlY3RlZEVsZW1lbnRzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gY29weVBhc3RlLmNvcHkoc2VsZWN0ZWRFbGVtZW50cyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgaWYgKGNvcHlQYXN0ZSkge1xuICAgIHRoaXMucmVnaXN0ZXIoJ3Bhc3RlJywgZnVuY3Rpb24gKCkge1xuICAgICAgY29weVBhc3RlLnBhc3RlKCk7XG4gICAgfSk7XG4gIH1cbiAgaWYgKHpvb21TY3JvbGwpIHtcbiAgICB0aGlzLnJlZ2lzdGVyKCdzdGVwWm9vbScsIGZ1bmN0aW9uIChvcHRzKSB7XG4gICAgICB6b29tU2Nyb2xsLnN0ZXBab29tKG9wdHMudmFsdWUpO1xuICAgIH0pO1xuICB9XG4gIGlmIChjYW52YXMpIHtcbiAgICB0aGlzLnJlZ2lzdGVyKCd6b29tJywgZnVuY3Rpb24gKG9wdHMpIHtcbiAgICAgIGNhbnZhcy56b29tKG9wdHMudmFsdWUpO1xuICAgIH0pO1xuICB9XG4gIGlmIChtb2RlbGluZyAmJiBzZWxlY3Rpb24gJiYgcnVsZXMpIHtcbiAgICB0aGlzLnJlZ2lzdGVyKCdyZW1vdmVTZWxlY3Rpb24nLCBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgc2VsZWN0ZWRFbGVtZW50cyA9IHNlbGVjdGlvbi5nZXQoKTtcbiAgICAgIGlmICghc2VsZWN0ZWRFbGVtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdmFyIGFsbG93ZWQgPSBydWxlcy5hbGxvd2VkKCdlbGVtZW50cy5kZWxldGUnLCB7XG4gICAgICAgICAgZWxlbWVudHM6IHNlbGVjdGVkRWxlbWVudHNcbiAgICAgICAgfSksXG4gICAgICAgIHJlbW92YWJsZUVsZW1lbnRzO1xuICAgICAgaWYgKGFsbG93ZWQgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gZWxzZSBpZiAoaXNBcnJheShhbGxvd2VkKSkge1xuICAgICAgICByZW1vdmFibGVFbGVtZW50cyA9IGFsbG93ZWQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZW1vdmFibGVFbGVtZW50cyA9IHNlbGVjdGVkRWxlbWVudHM7XG4gICAgICB9XG4gICAgICBpZiAocmVtb3ZhYmxlRWxlbWVudHMubGVuZ3RoKSB7XG4gICAgICAgIG1vZGVsaW5nLnJlbW92ZUVsZW1lbnRzKHJlbW92YWJsZUVsZW1lbnRzLnNsaWNlKCkpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIGlmIChrZXlib2FyZE1vdmUpIHtcbiAgICB0aGlzLnJlZ2lzdGVyKCdtb3ZlQ2FudmFzJywgZnVuY3Rpb24gKG9wdHMpIHtcbiAgICAgIGtleWJvYXJkTW92ZS5tb3ZlQ2FudmFzKG9wdHMpO1xuICAgIH0pO1xuICB9XG4gIGlmIChrZXlib2FyZE1vdmVTZWxlY3Rpb24pIHtcbiAgICB0aGlzLnJlZ2lzdGVyKCdtb3ZlU2VsZWN0aW9uJywgZnVuY3Rpb24gKG9wdHMpIHtcbiAgICAgIGtleWJvYXJkTW92ZVNlbGVjdGlvbi5tb3ZlU2VsZWN0aW9uKG9wdHMuZGlyZWN0aW9uLCBvcHRzLmFjY2VsZXJhdGVkKTtcbiAgICB9KTtcbiAgfVxufTtcblxuLyoqXG4gKiBUcmlnZ2VycyBhIHJlZ2lzdGVyZWQgYWN0aW9uXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGFjdGlvblxuICogQHBhcmFtIHtPYmplY3R9IG9wdHNcbiAqXG4gKiBAcmV0dXJuIHt1bmtub3dufSBSZXR1cm5zIHdoYXQgdGhlIHJlZ2lzdGVyZWQgbGlzdGVuZXIgcmV0dXJuc1xuICovXG5FZGl0b3JBY3Rpb25zLnByb3RvdHlwZS50cmlnZ2VyID0gZnVuY3Rpb24gKGFjdGlvbiwgb3B0cykge1xuICBpZiAoIXRoaXMuX2FjdGlvbnNbYWN0aW9uXSkge1xuICAgIHRocm93IGVycm9yKGFjdGlvbiwgTk9UX1JFR0lTVEVSRURfRVJST1IpO1xuICB9XG4gIHJldHVybiB0aGlzLl9hY3Rpb25zW2FjdGlvbl0ob3B0cyk7XG59O1xuXG4vKipcbiAqIFJlZ2lzdGVycyBhIGNvbGxlY3Rpb25zIG9mIGFjdGlvbnMuXG4gKiBUaGUga2V5IG9mIHRoZSBvYmplY3Qgd2lsbCBiZSB0aGUgbmFtZSBvZiB0aGUgYWN0aW9uLlxuICpcbiAqIEBleGFtcGxlXG4gKlxuICogYGBgamF2YXNjcmlwdFxuICogdmFyIGFjdGlvbnMgPSB7XG4gKiAgIHNwYWNlVG9vbDogZnVuY3Rpb24oKSB7XG4gKiAgICAgc3BhY2VUb29sLmFjdGl2YXRlU2VsZWN0aW9uKCk7XG4gKiAgIH0sXG4gKiAgIGxhc3NvVG9vbDogZnVuY3Rpb24oKSB7XG4gKiAgICAgbGFzc29Ub29sLmFjdGl2YXRlU2VsZWN0aW9uKCk7XG4gKiAgIH1cbiAqIF07XG4gKlxuICogZWRpdG9yQWN0aW9ucy5yZWdpc3RlcihhY3Rpb25zKTtcbiAqXG4gKiBlZGl0b3JBY3Rpb25zLmlzUmVnaXN0ZXJlZCgnc3BhY2VUb29sJyk7IC8vIHRydWVcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBhY3Rpb25zXG4gKi9cbkVkaXRvckFjdGlvbnMucHJvdG90eXBlLnJlZ2lzdGVyID0gZnVuY3Rpb24gKGFjdGlvbnMsIGxpc3RlbmVyKSB7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgaWYgKHR5cGVvZiBhY3Rpb25zID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiB0aGlzLl9yZWdpc3RlckFjdGlvbihhY3Rpb25zLCBsaXN0ZW5lcik7XG4gIH1cbiAgZm9yRWFjaChhY3Rpb25zLCBmdW5jdGlvbiAobGlzdGVuZXIsIGFjdGlvbikge1xuICAgIHNlbGYuX3JlZ2lzdGVyQWN0aW9uKGFjdGlvbiwgbGlzdGVuZXIpO1xuICB9KTtcbn07XG5cbi8qKlxuICogUmVnaXN0ZXJzIGEgbGlzdGVuZXIgdG8gYW4gYWN0aW9uIGtleVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBhY3Rpb25cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGxpc3RlbmVyXG4gKi9cbkVkaXRvckFjdGlvbnMucHJvdG90eXBlLl9yZWdpc3RlckFjdGlvbiA9IGZ1bmN0aW9uIChhY3Rpb24sIGxpc3RlbmVyKSB7XG4gIGlmICh0aGlzLmlzUmVnaXN0ZXJlZChhY3Rpb24pKSB7XG4gICAgdGhyb3cgZXJyb3IoYWN0aW9uLCBJU19SRUdJU1RFUkVEX0VSUk9SKTtcbiAgfVxuICB0aGlzLl9hY3Rpb25zW2FjdGlvbl0gPSBsaXN0ZW5lcjtcbn07XG5cbi8qKlxuICogVW5yZWdpc3RlciBhbiBleGlzdGluZyBhY3Rpb25cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gYWN0aW9uXG4gKi9cbkVkaXRvckFjdGlvbnMucHJvdG90eXBlLnVucmVnaXN0ZXIgPSBmdW5jdGlvbiAoYWN0aW9uKSB7XG4gIGlmICghdGhpcy5pc1JlZ2lzdGVyZWQoYWN0aW9uKSkge1xuICAgIHRocm93IGVycm9yKGFjdGlvbiwgTk9UX1JFR0lTVEVSRURfRVJST1IpO1xuICB9XG4gIHRoaXMuX2FjdGlvbnNbYWN0aW9uXSA9IHVuZGVmaW5lZDtcbn07XG5cbi8qKlxuICogUmV0dXJucyB0aGUgaWRlbnRpZmllcnMgb2YgYWxsIGN1cnJlbnRseSByZWdpc3RlcmVkIGVkaXRvciBhY3Rpb25zXG4gKlxuICogQHJldHVybiB7c3RyaW5nW119XG4gKi9cbkVkaXRvckFjdGlvbnMucHJvdG90eXBlLmdldEFjdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLl9hY3Rpb25zKTtcbn07XG5cbi8qKlxuICogQ2hlY2tzIHdldGhlciB0aGUgZ2l2ZW4gYWN0aW9uIGlzIHJlZ2lzdGVyZWRcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gYWN0aW9uXG4gKlxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuRWRpdG9yQWN0aW9ucy5wcm90b3R5cGUuaXNSZWdpc3RlcmVkID0gZnVuY3Rpb24gKGFjdGlvbikge1xuICByZXR1cm4gISF0aGlzLl9hY3Rpb25zW2FjdGlvbl07XG59O1xuZnVuY3Rpb24gZXJyb3IoYWN0aW9uLCBtZXNzYWdlKSB7XG4gIHJldHVybiBuZXcgRXJyb3IoYWN0aW9uICsgJyAnICsgbWVzc2FnZSk7XG59XG5cbi8qKlxuICogQHR5cGUgeyBpbXBvcnQoJ2RpZGknKS5Nb2R1bGVEZWNsYXJhdGlvbiB9XG4gKi9cbnZhciBCYXNlRWRpdG9yQWN0aW9uc01vZHVsZSA9IHtcbiAgX19pbml0X186IFsnZWRpdG9yQWN0aW9ucyddLFxuICBlZGl0b3JBY3Rpb25zOiBbJ3R5cGUnLCBFZGl0b3JBY3Rpb25zXVxufTtcblxuY2xhc3MgRm9ybUVkaXRvckFjdGlvbnMgZXh0ZW5kcyBFZGl0b3JBY3Rpb25zIHtcbiAgY29uc3RydWN0b3IoZXZlbnRCdXMsIGluamVjdG9yKSB7XG4gICAgc3VwZXIoZXZlbnRCdXMsIGluamVjdG9yKTtcbiAgICBldmVudEJ1cy5vbignZm9ybS5pbml0JywgKCkgPT4ge1xuICAgICAgdGhpcy5fcmVnaXN0ZXJEZWZhdWx0QWN0aW9ucyhpbmplY3Rvcik7XG4gICAgICBldmVudEJ1cy5maXJlKCdlZGl0b3JBY3Rpb25zLmluaXQnLCB7XG4gICAgICAgIGVkaXRvckFjdGlvbnM6IHRoaXNcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG4gIF9yZWdpc3RlckRlZmF1bHRBY3Rpb25zKGluamVjdG9yKSB7XG4gICAgY29uc3QgY29tbWFuZFN0YWNrID0gaW5qZWN0b3IuZ2V0KCdjb21tYW5kU3RhY2snLCBmYWxzZSksXG4gICAgICBmb3JtRmllbGRSZWdpc3RyeSA9IGluamVjdG9yLmdldCgnZm9ybUZpZWxkUmVnaXN0cnknLCBmYWxzZSksXG4gICAgICBzZWxlY3Rpb24gPSBpbmplY3Rvci5nZXQoJ3NlbGVjdGlvbicsIGZhbHNlKTtcbiAgICBpZiAoY29tbWFuZFN0YWNrKSB7XG4gICAgICAvLyBAdHMtaWdub3JlXG4gICAgICB0aGlzLnJlZ2lzdGVyKCd1bmRvJywgKCkgPT4ge1xuICAgICAgICBjb21tYW5kU3RhY2sudW5kbygpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgIHRoaXMucmVnaXN0ZXIoJ3JlZG8nLCAoKSA9PiB7XG4gICAgICAgIGNvbW1hbmRTdGFjay5yZWRvKCk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGZvcm1GaWVsZFJlZ2lzdHJ5ICYmIHNlbGVjdGlvbikge1xuICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgdGhpcy5yZWdpc3Rlcignc2VsZWN0Rm9ybUZpZWxkJywgKG9wdGlvbnMgPSB7fSkgPT4ge1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgaWRcbiAgICAgICAgfSA9IG9wdGlvbnM7XG4gICAgICAgIGlmICghaWQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZm9ybUZpZWxkID0gZm9ybUZpZWxkUmVnaXN0cnkuZ2V0KGlkKTtcbiAgICAgICAgaWYgKGZvcm1GaWVsZCkge1xuICAgICAgICAgIHNlbGVjdGlvbi5zZXQoZm9ybUZpZWxkKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG59XG5Gb3JtRWRpdG9yQWN0aW9ucy4kaW5qZWN0ID0gWydldmVudEJ1cycsICdpbmplY3RvciddO1xuXG5jb25zdCBFZGl0b3JBY3Rpb25zTW9kdWxlID0ge1xuICBfX2RlcGVuZHNfXzogW0Jhc2VFZGl0b3JBY3Rpb25zTW9kdWxlXSxcbiAgZWRpdG9yQWN0aW9uczogWyd0eXBlJywgRm9ybUVkaXRvckFjdGlvbnNdXG59O1xuXG5jbGFzcyBFZGl0b3JUZW1wbGF0aW5nIHtcbiAgLy8gc2FtZSBydWxlcyBhcyB2aWV3ZXIgdGVtcGxhdGluZ1xuICBpc1RlbXBsYXRlKHZhbHVlKSB7XG4gICAgcmV0dXJuIGlzU3RyaW5nKHZhbHVlKSAmJiAodmFsdWUuc3RhcnRzV2l0aCgnPScpIHx8IC97ey8udGVzdCh2YWx1ZSkpO1xuICB9XG5cbiAgLy8gcmV0dXJuIHRoZSB0ZW1wbGF0ZSByYXcsIGFzIHdlIHVzdWFsbHkganVzdCB3YW50IHRvIGRpc3BsYXkgdGhhdFxuICBldmFsdWF0ZSh0ZW1wbGF0ZSkge1xuICAgIHJldHVybiB0ZW1wbGF0ZTtcbiAgfVxufVxuRWRpdG9yVGVtcGxhdGluZy4kaW5qZWN0ID0gW107XG5cbmNvbnN0IEVkaXRvckV4cHJlc3Npb25MYW5ndWFnZU1vZHVsZSA9IHtcbiAgX19pbml0X186IFsnZXhwcmVzc2lvbkxhbmd1YWdlJywgJ3RlbXBsYXRpbmcnXSxcbiAgZXhwcmVzc2lvbkxhbmd1YWdlOiBbJ3R5cGUnLCBGZWVsRXhwcmVzc2lvbkxhbmd1YWdlXSxcbiAgdGVtcGxhdGluZzogWyd0eXBlJywgRWRpdG9yVGVtcGxhdGluZ11cbn07XG5cbnZhciBLRVlTX0NPUFkgPSBbJ2MnLCAnQyddO1xudmFyIEtFWVNfUEFTVEUgPSBbJ3YnLCAnViddO1xudmFyIEtFWVNfUkVETyA9IFsneScsICdZJ107XG52YXIgS0VZU19VTkRPID0gWyd6JywgJ1onXTtcblxuLyoqXHJcbiAqIFJldHVybnMgdHJ1ZSBpZiBldmVudCB3YXMgdHJpZ2dlcmVkIHdpdGggYW55IG1vZGlmaWVyXHJcbiAqIEBwYXJhbSB7S2V5Ym9hcmRFdmVudH0gZXZlbnRcclxuICovXG5mdW5jdGlvbiBoYXNNb2RpZmllcihldmVudCkge1xuICByZXR1cm4gZXZlbnQuY3RybEtleSB8fCBldmVudC5tZXRhS2V5IHx8IGV2ZW50LnNoaWZ0S2V5IHx8IGV2ZW50LmFsdEtleTtcbn1cblxuLyoqXHJcbiAqIEBwYXJhbSB7S2V5Ym9hcmRFdmVudH0gZXZlbnRcclxuICogQHJldHVybiB7Ym9vbGVhbn1cclxuICovXG5mdW5jdGlvbiBpc0NtZChldmVudCkge1xuICAvLyBlbnN1cmUgd2UgZG9uJ3QgcmVhY3QgdG8gQWx0R3JcbiAgLy8gKG1hcHBlZCB0byBDVFJMICsgQUxUKVxuICBpZiAoZXZlbnQuYWx0S2V5KSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiBldmVudC5jdHJsS2V5IHx8IGV2ZW50Lm1ldGFLZXk7XG59XG5cbi8qKlxyXG4gKiBDaGVja3MgaWYga2V5IHByZXNzZWQgaXMgb25lIG9mIHByb3ZpZGVkIGtleXMuXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfHN0cmluZ1tdfSBrZXlzXHJcbiAqIEBwYXJhbSB7S2V5Ym9hcmRFdmVudH0gZXZlbnRcclxuICogQHJldHVybiB7Ym9vbGVhbn1cclxuICovXG5mdW5jdGlvbiBpc0tleShrZXlzLCBldmVudCkge1xuICBrZXlzID0gaXNBcnJheShrZXlzKSA/IGtleXMgOiBba2V5c107XG4gIHJldHVybiBrZXlzLmluZGV4T2YoZXZlbnQua2V5KSAhPT0gLTEgfHwga2V5cy5pbmRleE9mKGV2ZW50LmNvZGUpICE9PSAtMTtcbn1cblxuLyoqXHJcbiAqIEBwYXJhbSB7S2V5Ym9hcmRFdmVudH0gZXZlbnRcclxuICovXG5mdW5jdGlvbiBpc1NoaWZ0KGV2ZW50KSB7XG4gIHJldHVybiBldmVudC5zaGlmdEtleTtcbn1cblxuLyoqXHJcbiAqIEBwYXJhbSB7S2V5Ym9hcmRFdmVudH0gZXZlbnRcclxuICovXG5mdW5jdGlvbiBpc0NvcHkoZXZlbnQpIHtcbiAgcmV0dXJuIGlzQ21kKGV2ZW50KSAmJiBpc0tleShLRVlTX0NPUFksIGV2ZW50KTtcbn1cblxuLyoqXHJcbiAqIEBwYXJhbSB7S2V5Ym9hcmRFdmVudH0gZXZlbnRcclxuICovXG5mdW5jdGlvbiBpc1Bhc3RlKGV2ZW50KSB7XG4gIHJldHVybiBpc0NtZChldmVudCkgJiYgaXNLZXkoS0VZU19QQVNURSwgZXZlbnQpO1xufVxuXG4vKipcclxuICogQHBhcmFtIHtLZXlib2FyZEV2ZW50fSBldmVudFxyXG4gKi9cbmZ1bmN0aW9uIGlzVW5kbyhldmVudCkge1xuICByZXR1cm4gaXNDbWQoZXZlbnQpICYmICFpc1NoaWZ0KGV2ZW50KSAmJiBpc0tleShLRVlTX1VORE8sIGV2ZW50KTtcbn1cblxuLyoqXHJcbiAqIEBwYXJhbSB7S2V5Ym9hcmRFdmVudH0gZXZlbnRcclxuICovXG5mdW5jdGlvbiBpc1JlZG8oZXZlbnQpIHtcbiAgcmV0dXJuIGlzQ21kKGV2ZW50KSAmJiAoaXNLZXkoS0VZU19SRURPLCBldmVudCkgfHwgaXNLZXkoS0VZU19VTkRPLCBldmVudCkgJiYgaXNTaGlmdChldmVudCkpO1xufVxuXG4vKipcbiAqIEB0eXBlZGVmIHtpbXBvcnQoJy4uLy4uL2NvcmUvRXZlbnRCdXMnKS5kZWZhdWx0fSBFdmVudEJ1c1xuICpcbiAqIEB0eXBlZGVmIHsoeyBrZXlFdmVudDogS2V5Ym9hcmRFdmVudCB9KSA9PiBhbnl9IExpc3RlbmVyXG4gKi9cblxudmFyIEtFWURPV05fRVZFTlQgPSAna2V5Ym9hcmQua2V5ZG93bicsXG4gIEtFWVVQX0VWRU5UID0gJ2tleWJvYXJkLmtleXVwJztcbnZhciBERUZBVUxUX1BSSU9SSVRZJDIgPSAxMDAwO1xudmFyIGNvbXBhdE1lc3NhZ2UgPSAnS2V5Ym9hcmQgYmluZGluZyBpcyBub3cgaW1wbGljaXQ7IGV4cGxpY2l0IGJpbmRpbmcgdG8gYW4gZWxlbWVudCBnb3QgcmVtb3ZlZC4gRm9yIG1vcmUgaW5mb3JtYXRpb24sIHNlZSBodHRwczovL2dpdGh1Yi5jb20vYnBtbi1pby9kaWFncmFtLWpzL2lzc3Vlcy82NjEnO1xuXG4vKipcbiAqIEEga2V5Ym9hcmQgYWJzdHJhY3Rpb24gdGhhdCBtYXkgYmUgYWN0aXZhdGVkIGFuZFxuICogZGVhY3RpdmF0ZWQgYnkgdXNlcnMgYXQgd2lsbCwgY29uc3VtaW5nIGdsb2JhbCBrZXkgZXZlbnRzXG4gKiBhbmQgdHJpZ2dlcmluZyBkaWFncmFtIGFjdGlvbnMuXG4gKlxuICogRm9yIGtleXMgcHJlc3NlZCBkb3duLCBrZXlib2FyZCBmaXJlcyBga2V5Ym9hcmQua2V5ZG93bmAgZXZlbnQuXG4gKiBUaGUgZXZlbnQgY29udGV4dCBjb250YWlucyBvbmUgZmllbGQgd2hpY2ggaXMgYEtleWJvYXJkRXZlbnRgIGV2ZW50LlxuICpcbiAqIFRoZSBpbXBsZW1lbnRhdGlvbiBmaXJlcyB0aGUgZm9sbG93aW5nIGtleSBldmVudHMgdGhhdCBhbGxvd1xuICogb3RoZXIgY29tcG9uZW50cyB0byBob29rIGludG8ga2V5IGhhbmRsaW5nOlxuICpcbiAqICAtIGtleWJvYXJkLmJpbmRcbiAqICAtIGtleWJvYXJkLnVuYmluZFxuICogIC0ga2V5Ym9hcmQuaW5pdFxuICogIC0ga2V5Ym9hcmQuZGVzdHJveVxuICpcbiAqIEFsbCBldmVudHMgY29udGFpbiBvbmUgZmllbGQgd2hpY2ggaXMgbm9kZS5cbiAqXG4gKiBTcGVjaWZ5IHRoZSBpbml0aWFsIGtleWJvYXJkIGJpbmRpbmcgc3RhdGUgdmlhIHRoZVxuICogYGtleWJvYXJkLmJpbmQ9dHJ1ZXxmYWxzZWAgY29uZmlndXJhdGlvbiBvcHRpb24uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZ1xuICogQHBhcmFtIHtib29sZWFufSBbY29uZmlnLmJpbmRdXG4gKiBAcGFyYW0ge0V2ZW50QnVzfSBldmVudEJ1c1xuICovXG5mdW5jdGlvbiBLZXlib2FyZChjb25maWcsIGV2ZW50QnVzKSB7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgdGhpcy5fY29uZmlnID0gY29uZmlnID0gY29uZmlnIHx8IHt9O1xuICB0aGlzLl9ldmVudEJ1cyA9IGV2ZW50QnVzO1xuICB0aGlzLl9rZXlkb3duSGFuZGxlciA9IHRoaXMuX2tleWRvd25IYW5kbGVyLmJpbmQodGhpcyk7XG4gIHRoaXMuX2tleXVwSGFuZGxlciA9IHRoaXMuX2tleXVwSGFuZGxlci5iaW5kKHRoaXMpO1xuXG4gIC8vIHByb3Blcmx5IGNsZWFuIGRvbSByZWdpc3RyYXRpb25zXG4gIGV2ZW50QnVzLm9uKCdkaWFncmFtLmRlc3Ryb3knLCBmdW5jdGlvbiAoKSB7XG4gICAgc2VsZi5fZmlyZSgnZGVzdHJveScpO1xuICAgIHNlbGYudW5iaW5kKCk7XG4gIH0pO1xuICBpZiAoY29uZmlnLmJpbmRUbykge1xuICAgIGNvbnNvbGUuZXJyb3IoJ3Vuc3VwcG9ydGVkIGNvbmZpZ3VyYXRpb24gPGtleWJvYXJkLmJpbmRUbz4nLCBuZXcgRXJyb3IoY29tcGF0TWVzc2FnZSkpO1xuICB9XG4gIHZhciBiaW5kID0gY29uZmlnICYmIGNvbmZpZy5iaW5kICE9PSBmYWxzZTtcbiAgZXZlbnRCdXMub24oJ2NhbnZhcy5pbml0JywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgc2VsZi5fdGFyZ2V0ID0gZXZlbnQuc3ZnO1xuICAgIGlmIChiaW5kKSB7XG4gICAgICBzZWxmLmJpbmQoKTtcbiAgICB9XG4gICAgc2VsZi5fZmlyZSgnaW5pdCcpO1xuICB9KTtcbn1cbktleWJvYXJkLiRpbmplY3QgPSBbJ2NvbmZpZy5rZXlib2FyZCcsICdldmVudEJ1cyddO1xuS2V5Ym9hcmQucHJvdG90eXBlLl9rZXlkb3duSGFuZGxlciA9IGZ1bmN0aW9uIChldmVudCkge1xuICB0aGlzLl9rZXlIYW5kbGVyKGV2ZW50LCBLRVlET1dOX0VWRU5UKTtcbn07XG5LZXlib2FyZC5wcm90b3R5cGUuX2tleXVwSGFuZGxlciA9IGZ1bmN0aW9uIChldmVudCkge1xuICB0aGlzLl9rZXlIYW5kbGVyKGV2ZW50LCBLRVlVUF9FVkVOVCk7XG59O1xuS2V5Ym9hcmQucHJvdG90eXBlLl9rZXlIYW5kbGVyID0gZnVuY3Rpb24gKGV2ZW50LCB0eXBlKSB7XG4gIHZhciBldmVudEJ1c1Jlc3VsdDtcbiAgaWYgKHRoaXMuX2lzRXZlbnRJZ25vcmVkKGV2ZW50KSkge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgY29udGV4dCA9IHtcbiAgICBrZXlFdmVudDogZXZlbnRcbiAgfTtcbiAgZXZlbnRCdXNSZXN1bHQgPSB0aGlzLl9ldmVudEJ1cy5maXJlKHR5cGUgfHwgS0VZRE9XTl9FVkVOVCwgY29udGV4dCk7XG4gIGlmIChldmVudEJ1c1Jlc3VsdCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIH1cbn07XG5LZXlib2FyZC5wcm90b3R5cGUuX2lzRXZlbnRJZ25vcmVkID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gIHJldHVybiBmYWxzZTtcbn07XG5cbi8qKlxuICogQmluZCBrZXlib2FyZCBldmVudHMgdG8gdGhlIGdpdmVuIERPTSBub2RlLlxuICpcbiAqIEBvdmVybG9yZFxuICogQGRlcHJlY2F0ZWQgTm8gbG9uZ2VyIGluIHVzZSBzaW5jZSB2ZXJzaW9uIDE1LjAuMC5cbiAqXG4gKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fSBub2RlXG4gKi9cbi8qKlxuICogQmluZCBrZXlib2FyZCBldmVudHMgdG8gdGhlIGNhbnZhcyBub2RlLlxuICovXG5LZXlib2FyZC5wcm90b3R5cGUuYmluZCA9IGZ1bmN0aW9uIChub2RlKSB7XG4gIC8vIGxlZ2FjeSA8bm9kZT4gYXJndW1lbnQgcHJvdmlkZWRcbiAgaWYgKG5vZGUpIHtcbiAgICBjb25zb2xlLmVycm9yKCd1bnN1cHBvcnRlZCBhcmd1bWVudCA8bm9kZT4nLCBuZXcgRXJyb3IoY29tcGF0TWVzc2FnZSkpO1xuICB9XG5cbiAgLy8gbWFrZSBzdXJlIHRoYXQgdGhlIGtleWJvYXJkIGlzIG9ubHkgYm91bmQgb25jZSB0byB0aGUgRE9NXG4gIHRoaXMudW5iaW5kKCk7XG4gIG5vZGUgPSB0aGlzLl9ub2RlID0gdGhpcy5fdGFyZ2V0O1xuXG4gIC8vIGJpbmQga2V5IGV2ZW50c1xuICBldmVudC5iaW5kKG5vZGUsICdrZXlkb3duJywgdGhpcy5fa2V5ZG93bkhhbmRsZXIpO1xuICBldmVudC5iaW5kKG5vZGUsICdrZXl1cCcsIHRoaXMuX2tleXVwSGFuZGxlcik7XG4gIHRoaXMuX2ZpcmUoJ2JpbmQnKTtcbn07XG5cbi8qKlxuICogQHJldHVybiB7RXZlbnRUYXJnZXR9XG4gKi9cbktleWJvYXJkLnByb3RvdHlwZS5nZXRCaW5kaW5nID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5fbm9kZTtcbn07XG5LZXlib2FyZC5wcm90b3R5cGUudW5iaW5kID0gZnVuY3Rpb24gKCkge1xuICB2YXIgbm9kZSA9IHRoaXMuX25vZGU7XG4gIGlmIChub2RlKSB7XG4gICAgdGhpcy5fZmlyZSgndW5iaW5kJyk7XG5cbiAgICAvLyB1bmJpbmQga2V5IGV2ZW50c1xuICAgIGV2ZW50LnVuYmluZChub2RlLCAna2V5ZG93bicsIHRoaXMuX2tleWRvd25IYW5kbGVyKTtcbiAgICBldmVudC51bmJpbmQobm9kZSwgJ2tleXVwJywgdGhpcy5fa2V5dXBIYW5kbGVyKTtcbiAgfVxuICB0aGlzLl9ub2RlID0gbnVsbDtcbn07XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50XG4gKi9cbktleWJvYXJkLnByb3RvdHlwZS5fZmlyZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICB0aGlzLl9ldmVudEJ1cy5maXJlKCdrZXlib2FyZC4nICsgZXZlbnQsIHtcbiAgICBub2RlOiB0aGlzLl9ub2RlXG4gIH0pO1xufTtcblxuLyoqXG4gKiBBZGQgYSBsaXN0ZW5lciBmdW5jdGlvbiB0aGF0IGlzIG5vdGlmaWVkIHdpdGggYEtleWJvYXJkRXZlbnRgIHdoZW5ldmVyXG4gKiB0aGUga2V5Ym9hcmQgaXMgYm91bmQgYW5kIHRoZSB1c2VyIHByZXNzZXMgYSBrZXkuIElmIG5vIHByaW9yaXR5IGlzXG4gKiBwcm92aWRlZCwgdGhlIGRlZmF1bHQgdmFsdWUgb2YgMTAwMCBpcyB1c2VkLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBbcHJpb3JpdHldXG4gKiBAcGFyYW0ge0xpc3RlbmVyfSBsaXN0ZW5lclxuICogQHBhcmFtIHtzdHJpbmd9IFt0eXBlPSdrZXlib2FyZC5rZXlkb3duJ11cbiAqL1xuS2V5Ym9hcmQucHJvdG90eXBlLmFkZExpc3RlbmVyID0gZnVuY3Rpb24gKHByaW9yaXR5LCBsaXN0ZW5lciwgdHlwZSkge1xuICBpZiAoaXNGdW5jdGlvbihwcmlvcml0eSkpIHtcbiAgICB0eXBlID0gbGlzdGVuZXI7XG4gICAgbGlzdGVuZXIgPSBwcmlvcml0eTtcbiAgICBwcmlvcml0eSA9IERFRkFVTFRfUFJJT1JJVFkkMjtcbiAgfVxuICB0aGlzLl9ldmVudEJ1cy5vbih0eXBlIHx8IEtFWURPV05fRVZFTlQsIHByaW9yaXR5LCBsaXN0ZW5lcik7XG59O1xuXG4vKipcbiAqIFJlbW92ZSBhIGxpc3RlbmVyIGZ1bmN0aW9uLlxuICpcbiAqIEBwYXJhbSB7TGlzdGVuZXJ9IGxpc3RlbmVyXG4gKiBAcGFyYW0ge3N0cmluZ30gW3R5cGU9J2tleWJvYXJkLmtleWRvd24nXVxuICovXG5LZXlib2FyZC5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIgPSBmdW5jdGlvbiAobGlzdGVuZXIsIHR5cGUpIHtcbiAgdGhpcy5fZXZlbnRCdXMub2ZmKHR5cGUgfHwgS0VZRE9XTl9FVkVOVCwgbGlzdGVuZXIpO1xufTtcbktleWJvYXJkLnByb3RvdHlwZS5oYXNNb2RpZmllciA9IGhhc01vZGlmaWVyO1xuS2V5Ym9hcmQucHJvdG90eXBlLmlzQ21kID0gaXNDbWQ7XG5LZXlib2FyZC5wcm90b3R5cGUuaXNTaGlmdCA9IGlzU2hpZnQ7XG5LZXlib2FyZC5wcm90b3R5cGUuaXNLZXkgPSBpc0tleTtcblxudmFyIExPV19QUklPUklUWSQxID0gNTAwO1xuXG4vKipcbiAqIEFkZHMgZGVmYXVsdCBrZXlib2FyZCBiaW5kaW5ncy5cbiAqXG4gKiBUaGlzIGRvZXMgbm90IHB1bGwgaW4gYW55IGZlYXR1cmVzIHdpbGwgYmluZCBvbmx5IGFjdGlvbnMgdGhhdFxuICogaGF2ZSBwcmV2aW91c2x5IGJlZW4gcmVnaXN0ZXJlZCBhZ2FpbnN0IHRoZSBlZGl0b3JBY3Rpb25zIGNvbXBvbmVudC5cbiAqXG4gKiBAcGFyYW0ge0V2ZW50QnVzfSBldmVudEJ1c1xuICogQHBhcmFtIHtLZXlib2FyZH0ga2V5Ym9hcmRcbiAqL1xuZnVuY3Rpb24gS2V5Ym9hcmRCaW5kaW5ncyhldmVudEJ1cywga2V5Ym9hcmQpIHtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICBldmVudEJ1cy5vbignZWRpdG9yQWN0aW9ucy5pbml0JywgTE9XX1BSSU9SSVRZJDEsIGZ1bmN0aW9uIChldmVudCkge1xuICAgIHZhciBlZGl0b3JBY3Rpb25zID0gZXZlbnQuZWRpdG9yQWN0aW9ucztcbiAgICBzZWxmLnJlZ2lzdGVyQmluZGluZ3Moa2V5Ym9hcmQsIGVkaXRvckFjdGlvbnMpO1xuICB9KTtcbn1cbktleWJvYXJkQmluZGluZ3MuJGluamVjdCA9IFsnZXZlbnRCdXMnLCAna2V5Ym9hcmQnXTtcblxuLyoqXG4gKiBSZWdpc3RlciBhdmFpbGFibGUga2V5Ym9hcmQgYmluZGluZ3MuXG4gKlxuICogQHBhcmFtIHtLZXlib2FyZH0ga2V5Ym9hcmRcbiAqIEBwYXJhbSB7RWRpdG9yQWN0aW9uc30gZWRpdG9yQWN0aW9uc1xuICovXG5LZXlib2FyZEJpbmRpbmdzLnByb3RvdHlwZS5yZWdpc3RlckJpbmRpbmdzID0gZnVuY3Rpb24gKGtleWJvYXJkLCBlZGl0b3JBY3Rpb25zKSB7XG4gIC8qKlxuICAgKiBBZGQga2V5Ym9hcmQgYmluZGluZyBpZiByZXNwZWN0aXZlIGVkaXRvciBhY3Rpb25cbiAgICogaXMgcmVnaXN0ZXJlZC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGFjdGlvbiBuYW1lXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIHRoYXQgaW1wbGVtZW50cyB0aGUga2V5IGJpbmRpbmdcbiAgICovXG4gIGZ1bmN0aW9uIGFkZExpc3RlbmVyKGFjdGlvbiwgZm4pIHtcbiAgICBpZiAoZWRpdG9yQWN0aW9ucy5pc1JlZ2lzdGVyZWQoYWN0aW9uKSkge1xuICAgICAga2V5Ym9hcmQuYWRkTGlzdGVuZXIoZm4pO1xuICAgIH1cbiAgfVxuXG4gIC8vIHVuZG9cbiAgLy8gKENUUkx8Q01EKSArIFpcbiAgYWRkTGlzdGVuZXIoJ3VuZG8nLCBmdW5jdGlvbiAoY29udGV4dCkge1xuICAgIHZhciBldmVudCA9IGNvbnRleHQua2V5RXZlbnQ7XG4gICAgaWYgKGlzVW5kbyhldmVudCkpIHtcbiAgICAgIGVkaXRvckFjdGlvbnMudHJpZ2dlcigndW5kbycpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9KTtcblxuICAvLyByZWRvXG4gIC8vIENUUkwgKyBZXG4gIC8vIENNRCArIFNISUZUICsgWlxuICBhZGRMaXN0ZW5lcigncmVkbycsIGZ1bmN0aW9uIChjb250ZXh0KSB7XG4gICAgdmFyIGV2ZW50ID0gY29udGV4dC5rZXlFdmVudDtcbiAgICBpZiAoaXNSZWRvKGV2ZW50KSkge1xuICAgICAgZWRpdG9yQWN0aW9ucy50cmlnZ2VyKCdyZWRvJyk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIGNvcHlcbiAgLy8gQ1RSTC9DTUQgKyBDXG4gIGFkZExpc3RlbmVyKCdjb3B5JywgZnVuY3Rpb24gKGNvbnRleHQpIHtcbiAgICB2YXIgZXZlbnQgPSBjb250ZXh0LmtleUV2ZW50O1xuICAgIGlmIChpc0NvcHkoZXZlbnQpKSB7XG4gICAgICBlZGl0b3JBY3Rpb25zLnRyaWdnZXIoJ2NvcHknKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gcGFzdGVcbiAgLy8gQ1RSTC9DTUQgKyBWXG4gIGFkZExpc3RlbmVyKCdwYXN0ZScsIGZ1bmN0aW9uIChjb250ZXh0KSB7XG4gICAgdmFyIGV2ZW50ID0gY29udGV4dC5rZXlFdmVudDtcbiAgICBpZiAoaXNQYXN0ZShldmVudCkpIHtcbiAgICAgIGVkaXRvckFjdGlvbnMudHJpZ2dlcigncGFzdGUnKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gem9vbSBpbiBvbmUgc3RlcFxuICAvLyBDVFJML0NNRCArICtcbiAgYWRkTGlzdGVuZXIoJ3N0ZXBab29tJywgZnVuY3Rpb24gKGNvbnRleHQpIHtcbiAgICB2YXIgZXZlbnQgPSBjb250ZXh0LmtleUV2ZW50O1xuXG4gICAgLy8gcXVpcms6IGl0IGhhcyB0byBiZSB0cmlnZ2VyZWQgYnkgYD1gIGFzIHdlbGwgdG8gd29yayBvbiBpbnRlcm5hdGlvbmFsIGtleWJvYXJkIGxheW91dFxuICAgIC8vIGNmOiBodHRwczovL2dpdGh1Yi5jb20vYnBtbi1pby9icG1uLWpzL2lzc3Vlcy8xMzYyI2lzc3VlY29tbWVudC03MjI5ODk3NTRcbiAgICBpZiAoaXNLZXkoWycrJywgJ0FkZCcsICc9J10sIGV2ZW50KSAmJiBpc0NtZChldmVudCkpIHtcbiAgICAgIGVkaXRvckFjdGlvbnMudHJpZ2dlcignc3RlcFpvb20nLCB7XG4gICAgICAgIHZhbHVlOiAxXG4gICAgICB9KTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gem9vbSBvdXQgb25lIHN0ZXBcbiAgLy8gQ1RSTCArIC1cbiAgYWRkTGlzdGVuZXIoJ3N0ZXBab29tJywgZnVuY3Rpb24gKGNvbnRleHQpIHtcbiAgICB2YXIgZXZlbnQgPSBjb250ZXh0LmtleUV2ZW50O1xuICAgIGlmIChpc0tleShbJy0nLCAnU3VidHJhY3QnXSwgZXZlbnQpICYmIGlzQ21kKGV2ZW50KSkge1xuICAgICAgZWRpdG9yQWN0aW9ucy50cmlnZ2VyKCdzdGVwWm9vbScsIHtcbiAgICAgICAgdmFsdWU6IC0xXG4gICAgICB9KTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gem9vbSB0byB0aGUgZGVmYXVsdCBsZXZlbFxuICAvLyBDVFJMICsgMFxuICBhZGRMaXN0ZW5lcignem9vbScsIGZ1bmN0aW9uIChjb250ZXh0KSB7XG4gICAgdmFyIGV2ZW50ID0gY29udGV4dC5rZXlFdmVudDtcbiAgICBpZiAoaXNLZXkoJzAnLCBldmVudCkgJiYgaXNDbWQoZXZlbnQpKSB7XG4gICAgICBlZGl0b3JBY3Rpb25zLnRyaWdnZXIoJ3pvb20nLCB7XG4gICAgICAgIHZhbHVlOiAxXG4gICAgICB9KTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gZGVsZXRlIHNlbGVjdGVkIGVsZW1lbnRcbiAgLy8gREVMXG4gIGFkZExpc3RlbmVyKCdyZW1vdmVTZWxlY3Rpb24nLCBmdW5jdGlvbiAoY29udGV4dCkge1xuICAgIHZhciBldmVudCA9IGNvbnRleHQua2V5RXZlbnQ7XG4gICAgaWYgKGlzS2V5KFsnQmFja3NwYWNlJywgJ0RlbGV0ZScsICdEZWwnXSwgZXZlbnQpKSB7XG4gICAgICBlZGl0b3JBY3Rpb25zLnRyaWdnZXIoJ3JlbW92ZVNlbGVjdGlvbicpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9KTtcbn07XG5cbi8qKlxuICogQHR5cGUgeyBpbXBvcnQoJ2RpZGknKS5Nb2R1bGVEZWNsYXJhdGlvbiB9XG4gKi9cbnZhciBLZXlib2FyZE1vZHVsZSA9IHtcbiAgX19pbml0X186IFsna2V5Ym9hcmQnLCAna2V5Ym9hcmRCaW5kaW5ncyddLFxuICBrZXlib2FyZDogWyd0eXBlJywgS2V5Ym9hcmRdLFxuICBrZXlib2FyZEJpbmRpbmdzOiBbJ3R5cGUnLCBLZXlib2FyZEJpbmRpbmdzXVxufTtcblxuY29uc3QgTE9XX1BSSU9SSVRZID0gNTAwO1xuY2xhc3MgRm9ybUVkaXRvcktleWJvYXJkQmluZGluZ3Mge1xuICBjb25zdHJ1Y3RvcihldmVudEJ1cywga2V5Ym9hcmQpIHtcbiAgICBldmVudEJ1cy5vbignZWRpdG9yQWN0aW9ucy5pbml0JywgTE9XX1BSSU9SSVRZLCBldmVudCA9PiB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGVkaXRvckFjdGlvbnNcbiAgICAgIH0gPSBldmVudDtcbiAgICAgIHRoaXMucmVnaXN0ZXJCaW5kaW5ncyhrZXlib2FyZCwgZWRpdG9yQWN0aW9ucyk7XG4gICAgfSk7XG4gIH1cbiAgcmVnaXN0ZXJCaW5kaW5ncyhrZXlib2FyZCwgZWRpdG9yQWN0aW9ucykge1xuICAgIGZ1bmN0aW9uIGFkZExpc3RlbmVyKGFjdGlvbiwgZm4pIHtcbiAgICAgIGlmIChlZGl0b3JBY3Rpb25zLmlzUmVnaXN0ZXJlZChhY3Rpb24pKSB7XG4gICAgICAgIGtleWJvYXJkLmFkZExpc3RlbmVyKGZuKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyB1bmRvXG4gICAgLy8gKENUUkx8Q01EKSArIFpcbiAgICBhZGRMaXN0ZW5lcigndW5kbycsIGNvbnRleHQgPT4ge1xuICAgICAgY29uc3Qge1xuICAgICAgICBrZXlFdmVudFxuICAgICAgfSA9IGNvbnRleHQ7XG4gICAgICBpZiAoaXNVbmRvKGtleUV2ZW50KSkge1xuICAgICAgICBlZGl0b3JBY3Rpb25zLnRyaWdnZXIoJ3VuZG8nKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyByZWRvXG4gICAgLy8gQ1RSTCArIFlcbiAgICAvLyBDTUQgKyBTSElGVCArIFpcbiAgICBhZGRMaXN0ZW5lcigncmVkbycsIGNvbnRleHQgPT4ge1xuICAgICAgY29uc3Qge1xuICAgICAgICBrZXlFdmVudFxuICAgICAgfSA9IGNvbnRleHQ7XG4gICAgICBpZiAoaXNSZWRvKGtleUV2ZW50KSkge1xuICAgICAgICBlZGl0b3JBY3Rpb25zLnRyaWdnZXIoJ3JlZG8nKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbkZvcm1FZGl0b3JLZXlib2FyZEJpbmRpbmdzLiRpbmplY3QgPSBbJ2V2ZW50QnVzJywgJ2tleWJvYXJkJ107XG5cbmNvbnN0IEZvcm1FZGl0b3JLZXlib2FyZE1vZHVsZSA9IHtcbiAgX19kZXBlbmRzX186IFtLZXlib2FyZE1vZHVsZV0sXG4gIF9faW5pdF9fOiBbJ2tleWJvYXJkQmluZGluZ3MnXSxcbiAga2V5Ym9hcmRCaW5kaW5nczogWyd0eXBlJywgRm9ybUVkaXRvcktleWJvYXJkQmluZGluZ3NdXG59O1xuXG5jb25zdCBEcmFnZ2luZ01vZHVsZSA9IHtcbiAgX19pbml0X186IFsnZHJhZ2dpbmcnXSxcbiAgZHJhZ2dpbmc6IFsndHlwZScsIERyYWdnaW5nXVxufTtcblxuLyoqXG4gKiBAdHlwZWRlZiB7aW1wb3J0KCdkaWRpJykuSW5qZWN0b3J9IEluamVjdG9yXG4gKlxuICogQHR5cGVkZWYge2ltcG9ydCgnLi4vY29yZS9UeXBlcycpLkVsZW1lbnRMaWtlfSBFbGVtZW50TGlrZVxuICpcbiAqIEB0eXBlZGVmIHtpbXBvcnQoJy4uL2NvcmUvRXZlbnRCdXMnKS5kZWZhdWx0fSBFdmVudEJ1c1xuICogQHR5cGVkZWYge2ltcG9ydCgnLi9Db21tYW5kSGFuZGxlcicpLmRlZmF1bHR9IENvbW1hbmRIYW5kbGVyXG4gKlxuICogQHR5cGVkZWYgeyBhbnkgfSBDb21tYW5kQ29udGV4dFxuICogQHR5cGVkZWYgeyB7XG4gKiAgIG5ldyAoLi4uYXJnczogYW55W10pIDogQ29tbWFuZEhhbmRsZXJcbiAqIH0gfSBDb21tYW5kSGFuZGxlckNvbnN0cnVjdG9yXG4gKiBAdHlwZWRlZiB7IHtcbiAqICAgW2tleTogc3RyaW5nXTogQ29tbWFuZEhhbmRsZXI7XG4gKiB9IH0gQ29tbWFuZEhhbmRsZXJNYXBcbiAqIEB0eXBlZGVmIHsge1xuICogICBjb21tYW5kOiBzdHJpbmc7XG4gKiAgIGNvbnRleHQ6IGFueTtcbiAqICAgaWQ/OiBhbnk7XG4gKiB9IH0gQ29tbWFuZFN0YWNrQWN0aW9uXG4gKiBAdHlwZWRlZiB7IHtcbiAqICAgYWN0aW9uczogQ29tbWFuZFN0YWNrQWN0aW9uW107XG4gKiAgIGRpcnR5OiBFbGVtZW50TGlrZVtdO1xuICogICB0cmlnZ2VyOiAnZXhlY3V0ZScgfCAndW5kbycgfCAncmVkbycgfCAnY2xlYXInIHwgbnVsbDtcbiAqICAgYXRvbWljPzogYm9vbGVhbjtcbiAqIH0gfSBDdXJyZW50RXhlY3V0aW9uXG4gKi9cblxuLyoqXG4gKiBBIHNlcnZpY2UgdGhhdCBvZmZlcnMgdW4tIGFuZCByZWRvYWJsZSBleGVjdXRpb24gb2YgY29tbWFuZHMuXG4gKlxuICogVGhlIGNvbW1hbmQgc3RhY2sgaXMgcmVzcG9uc2libGUgZm9yIGV4ZWN1dGluZyBtb2RlbGluZyBhY3Rpb25zXG4gKiBpbiBhIHVuLSBhbmQgcmVkb2FibGUgbWFubmVyLiBUbyBkbyB0aGlzIGl0IGRlbGVnYXRlcyB0aGUgYWN0dWFsXG4gKiBjb21tYW5kIGV4ZWN1dGlvbiB0byB7QGxpbmsgQ29tbWFuZEhhbmRsZXJ9cy5cbiAqXG4gKiBDb21tYW5kIGhhbmRsZXJzIHByb3ZpZGUge0BsaW5rIENvbW1hbmRIYW5kbGVyI2V4ZWN1dGUoY3R4KX0gYW5kXG4gKiB7QGxpbmsgQ29tbWFuZEhhbmRsZXIjcmV2ZXJ0KGN0eCl9IG1ldGhvZHMgdG8gdW4tIGFuZCByZWRvIGEgY29tbWFuZFxuICogaWRlbnRpZmllZCBieSBhIGNvbW1hbmQgY29udGV4dC5cbiAqXG4gKlxuICogIyMgTGlmZS1DeWNsZSBldmVudHNcbiAqXG4gKiBJbiB0aGUgcHJvY2VzcyB0aGUgY29tbWFuZCBzdGFjayBmaXJlcyBhIG51bWJlciBvZiBsaWZlLWN5Y2xlIGV2ZW50c1xuICogdGhhdCBvdGhlciBjb21wb25lbnRzIHRvIHBhcnRpY2lwYXRlIGluIHRoZSBjb21tYW5kIGV4ZWN1dGlvbi5cbiAqXG4gKiAgICAqIHByZUV4ZWN1dGVcbiAqICAgICogcHJlRXhlY3V0ZWRcbiAqICAgICogZXhlY3V0ZVxuICogICAgKiBleGVjdXRlZFxuICogICAgKiBwb3N0RXhlY3V0ZVxuICogICAgKiBwb3N0RXhlY3V0ZWRcbiAqICAgICogcmV2ZXJ0XG4gKiAgICAqIHJldmVydGVkXG4gKlxuICogQSBzcGVjaWFsIGV2ZW50IGlzIHVzZWQgZm9yIHZhbGlkYXRpbmcsIHdoZXRoZXIgYSBjb21tYW5kIGNhbiBiZVxuICogcGVyZm9ybWVkIHByaW9yIHRvIGl0cyBleGVjdXRpb24uXG4gKlxuICogICAgKiBjYW5FeGVjdXRlXG4gKlxuICogRWFjaCBvZiB0aGUgZXZlbnRzIGlzIGZpcmVkIGFzIGBjb21tYW5kU3RhY2sue2V2ZW50TmFtZX1gIGFuZFxuICogYGNvbW1hbmRTdGFjay57Y29tbWFuZE5hbWV9LntldmVudE5hbWV9YCwgcmVzcGVjdGl2ZWx5LiBUaGlzIGdpdmVzXG4gKiBjb21wb25lbnRzIGZpbmUgZ3JhaW5lZCBjb250cm9sIG9uIHdoZXJlIHRvIGhvb2sgaW50by5cbiAqXG4gKiBUaGUgZXZlbnQgb2JqZWN0IGZpcmVkIHRyYW5zcG9ydHMgYGNvbW1hbmRgLCB0aGUgbmFtZSBvZiB0aGVcbiAqIGNvbW1hbmQgYW5kIGBjb250ZXh0YCwgdGhlIGNvbW1hbmQgY29udGV4dC5cbiAqXG4gKlxuICogIyMgQ3JlYXRpbmcgQ29tbWFuZCBIYW5kbGVyc1xuICpcbiAqIENvbW1hbmQgaGFuZGxlcnMgc2hvdWxkIHByb3ZpZGUgdGhlIHtAbGluayBDb21tYW5kSGFuZGxlciNleGVjdXRlKGN0eCl9XG4gKiBhbmQge0BsaW5rIENvbW1hbmRIYW5kbGVyI3JldmVydChjdHgpfSBtZXRob2RzIHRvIGltcGxlbWVudFxuICogcmVkb2luZyBhbmQgdW5kb2luZyBvZiBhIGNvbW1hbmQuXG4gKlxuICogQSBjb21tYW5kIGhhbmRsZXIgX211c3RfIGVuc3VyZSB1bmRvIGlzIHBlcmZvcm1lZCBwcm9wZXJseSBpbiBvcmRlclxuICogbm90IHRvIGJyZWFrIHRoZSB1bmRvIGNoYWluLiBJdCBtdXN0IGFsc28gcmV0dXJuIHRoZSBzaGFwZXMgdGhhdFxuICogZ290IGNoYW5nZWQgZHVyaW5nIHRoZSBgZXhlY3V0ZWAgYW5kIGByZXZlcnRgIG9wZXJhdGlvbnMuXG4gKlxuICogQ29tbWFuZCBoYW5kbGVycyBtYXkgZXhlY3V0ZSBvdGhlciBtb2RlbGluZyBvcGVyYXRpb25zIChhbmQgdGh1c1xuICogY29tbWFuZHMpIGluIHRoZWlyIGBwcmVFeGVjdXRlKGQpYCBhbmQgYHBvc3RFeGVjdXRlKGQpYCBwaGFzZXMuIFRoZSBjb21tYW5kXG4gKiBzdGFjayB3aWxsIHByb3Blcmx5IGdyb3VwIGFsbCBjb21tYW5kcyB0b2dldGhlciBpbnRvIGEgbG9naWNhbCB1bml0XG4gKiB0aGF0IG1heSBiZSByZS0gYW5kIHVuZG9uZSBhdG9taWNhbGx5LlxuICpcbiAqIENvbW1hbmQgaGFuZGxlcnMgbXVzdCBub3QgZXhlY3V0ZSBvdGhlciBjb21tYW5kcyBmcm9tIHdpdGhpbiB0aGVpclxuICogY29yZSBpbXBsZW1lbnRhdGlvbiAoYGV4ZWN1dGVgLCBgcmV2ZXJ0YCkuXG4gKlxuICpcbiAqICMjIENoYW5nZSBUcmFja2luZ1xuICpcbiAqIER1cmluZyB0aGUgZXhlY3V0aW9uIG9mIHRoZSBDb21tYW5kU3RhY2sgaXQgd2lsbCBrZWVwIHRyYWNrIG9mIGFsbFxuICogZWxlbWVudHMgdGhhdCBoYXZlIGJlZW4gdG91Y2hlZCBkdXJpbmcgdGhlIGNvbW1hbmQncyBleGVjdXRpb24uXG4gKlxuICogQXQgdGhlIGVuZCBvZiB0aGUgQ29tbWFuZFN0YWNrIGV4ZWN1dGlvbiBpdCB3aWxsIG5vdGlmeSBpbnRlcmVzdGVkXG4gKiBjb21wb25lbnRzIHZpYSBhbiAnZWxlbWVudHMuY2hhbmdlZCcgZXZlbnQgd2l0aCBhbGwgdGhlIGRpcnR5XG4gKiBlbGVtZW50cy5cbiAqXG4gKiBUaGUgZXZlbnQgY2FuIGJlIHBpY2tlZCB1cCBieSBjb21wb25lbnRzIHRoYXQgYXJlIGludGVyZXN0ZWQgaW4gdGhlIGZhY3RcbiAqIHRoYXQgZWxlbWVudHMgaGF2ZSBiZWVuIGNoYW5nZWQuIE9uZSB1c2UgY2FzZSBmb3IgdGhpcyBpcyB1cGRhdGluZ1xuICogdGhlaXIgZ3JhcGhpY2FsIHJlcHJlc2VudGF0aW9uIGFmdGVyIG1vdmluZyAvIHJlc2l6aW5nIG9yIGRlbGV0aW9uLlxuICpcbiAqIEBzZWUgQ29tbWFuZEhhbmRsZXJcbiAqXG4gKiBAcGFyYW0ge0V2ZW50QnVzfSBldmVudEJ1c1xuICogQHBhcmFtIHtJbmplY3Rvcn0gaW5qZWN0b3JcbiAqL1xuZnVuY3Rpb24gQ29tbWFuZFN0YWNrKGV2ZW50QnVzLCBpbmplY3Rvcikge1xuICAvKipcbiAgICogQSBtYXAgb2YgYWxsIHJlZ2lzdGVyZWQgY29tbWFuZCBoYW5kbGVycy5cbiAgICpcbiAgICogQHR5cGUge0NvbW1hbmRIYW5kbGVyTWFwfVxuICAgKi9cbiAgdGhpcy5faGFuZGxlck1hcCA9IHt9O1xuXG4gIC8qKlxuICAgKiBBIHN0YWNrIGNvbnRhaW5pbmcgYWxsIHJlL3VuZG9hYmxlIGFjdGlvbnMgb24gdGhlIGRpYWdyYW1cbiAgICpcbiAgICogQHR5cGUge0NvbW1hbmRTdGFja0FjdGlvbltdfVxuICAgKi9cbiAgdGhpcy5fc3RhY2sgPSBbXTtcblxuICAvKipcbiAgICogVGhlIGN1cnJlbnQgaW5kZXggb24gdGhlIHN0YWNrXG4gICAqXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqL1xuICB0aGlzLl9zdGFja0lkeCA9IC0xO1xuXG4gIC8qKlxuICAgKiBDdXJyZW50IGFjdGl2ZSBjb21tYW5kU3RhY2sgZXhlY3V0aW9uXG4gICAqXG4gICAqIEB0eXBlIHtDdXJyZW50RXhlY3V0aW9ufVxuICAgKi9cbiAgdGhpcy5fY3VycmVudEV4ZWN1dGlvbiA9IHtcbiAgICBhY3Rpb25zOiBbXSxcbiAgICBkaXJ0eTogW10sXG4gICAgdHJpZ2dlcjogbnVsbFxuICB9O1xuXG4gIC8qKlxuICAgKiBAdHlwZSB7SW5qZWN0b3J9XG4gICAqL1xuICB0aGlzLl9pbmplY3RvciA9IGluamVjdG9yO1xuXG4gIC8qKlxuICAgKiBAdHlwZSBFdmVudEJ1c1xuICAgKi9cbiAgdGhpcy5fZXZlbnRCdXMgPSBldmVudEJ1cztcblxuICAvKipcbiAgICogQHR5cGUgeyBudW1iZXIgfVxuICAgKi9cbiAgdGhpcy5fdWlkID0gMTtcbiAgZXZlbnRCdXMub24oWydkaWFncmFtLmRlc3Ryb3knLCAnZGlhZ3JhbS5jbGVhciddLCBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5jbGVhcihmYWxzZSk7XG4gIH0sIHRoaXMpO1xufVxuQ29tbWFuZFN0YWNrLiRpbmplY3QgPSBbJ2V2ZW50QnVzJywgJ2luamVjdG9yJ107XG5cbi8qKlxuICogRXhlY3V0ZSBhIGNvbW1hbmQuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGNvbW1hbmQgVGhlIGNvbW1hbmQgdG8gZXhlY3V0ZS5cbiAqIEBwYXJhbSB7Q29tbWFuZENvbnRleHR9IGNvbnRleHQgVGhlIGNvbnRleHQgd2l0aCB3aGljaCB0byBleGVjdXRlIHRoZSBjb21tYW5kLlxuICovXG5Db21tYW5kU3RhY2sucHJvdG90eXBlLmV4ZWN1dGUgPSBmdW5jdGlvbiAoY29tbWFuZCwgY29udGV4dCkge1xuICBpZiAoIWNvbW1hbmQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvbW1hbmQgcmVxdWlyZWQnKTtcbiAgfVxuICB0aGlzLl9jdXJyZW50RXhlY3V0aW9uLnRyaWdnZXIgPSAnZXhlY3V0ZSc7XG4gIGNvbnN0IGFjdGlvbiA9IHtcbiAgICBjb21tYW5kOiBjb21tYW5kLFxuICAgIGNvbnRleHQ6IGNvbnRleHRcbiAgfTtcbiAgdGhpcy5fcHVzaEFjdGlvbihhY3Rpb24pO1xuICB0aGlzLl9pbnRlcm5hbEV4ZWN1dGUoYWN0aW9uKTtcbiAgdGhpcy5fcG9wQWN0aW9uKCk7XG59O1xuXG4vKipcbiAqIENoZWNrIHdoZXRoZXIgYSBjb21tYW5kIGNhbiBiZSBleGVjdXRlZC5cbiAqXG4gKiBJbXBsZW1lbnRvcnMgbWF5IGhvb2sgaW50byB0aGUgbWVjaGFuaXNtIG9uIHR3byB3YXlzOlxuICpcbiAqICAgKiBpbiBldmVudCBsaXN0ZW5lcnM6XG4gKlxuICogICAgIFVzZXJzIG1heSBwcmV2ZW50IHRoZSBleGVjdXRpb24gdmlhIGFuIGV2ZW50IGxpc3RlbmVyLlxuICogICAgIEl0IG11c3QgcHJldmVudCB0aGUgZGVmYXVsdCBhY3Rpb24gZm9yIGBjb21tYW5kU3RhY2suKDxjb21tYW5kPi4pY2FuRXhlY3V0ZWAgZXZlbnRzLlxuICpcbiAqICAgKiBpbiBjb21tYW5kIGhhbmRsZXJzOlxuICpcbiAqICAgICBJZiB0aGUgbWV0aG9kIHtAbGluayBDb21tYW5kSGFuZGxlciNjYW5FeGVjdXRlfSBpcyBpbXBsZW1lbnRlZCBpbiBhIGhhbmRsZXJcbiAqICAgICBpdCB3aWxsIGJlIGNhbGxlZCB0byBmaWd1cmUgb3V0IHdoZXRoZXIgdGhlIGV4ZWN1dGlvbiBpcyBhbGxvd2VkLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBjb21tYW5kIFRoZSBjb21tYW5kIHRvIGV4ZWN1dGUuXG4gKiBAcGFyYW0ge0NvbW1hbmRDb250ZXh0fSBjb250ZXh0IFRoZSBjb250ZXh0IHdpdGggd2hpY2ggdG8gZXhlY3V0ZSB0aGUgY29tbWFuZC5cbiAqXG4gKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoZSBjb21tYW5kIGNhbiBiZSBleGVjdXRlZCB3aXRoIHRoZSBnaXZlbiBjb250ZXh0LlxuICovXG5Db21tYW5kU3RhY2sucHJvdG90eXBlLmNhbkV4ZWN1dGUgPSBmdW5jdGlvbiAoY29tbWFuZCwgY29udGV4dCkge1xuICBjb25zdCBhY3Rpb24gPSB7XG4gICAgY29tbWFuZDogY29tbWFuZCxcbiAgICBjb250ZXh0OiBjb250ZXh0XG4gIH07XG4gIGNvbnN0IGhhbmRsZXIgPSB0aGlzLl9nZXRIYW5kbGVyKGNvbW1hbmQpO1xuICBsZXQgcmVzdWx0ID0gdGhpcy5fZmlyZShjb21tYW5kLCAnY2FuRXhlY3V0ZScsIGFjdGlvbik7XG5cbiAgLy8gaGFuZGxlciNjYW5FeGVjdXRlIHdpbGwgb25seSBiZSBjYWxsZWQgaWYgbm8gbGlzdGVuZXJcbiAgLy8gZGVjaWRlZCBvbiBhIHJlc3VsdCBhbHJlYWR5XG4gIGlmIChyZXN1bHQgPT09IHVuZGVmaW5lZCkge1xuICAgIGlmICghaGFuZGxlcikge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoaGFuZGxlci5jYW5FeGVjdXRlKSB7XG4gICAgICByZXN1bHQgPSBoYW5kbGVyLmNhbkV4ZWN1dGUoY29udGV4dCk7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG4vKipcbiAqIENsZWFyIHRoZSBjb21tYW5kIHN0YWNrLCBlcmFzaW5nIGFsbCB1bmRvIC8gcmVkbyBoaXN0b3J5LlxuICpcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW2VtaXQ9dHJ1ZV0gV2hldGhlciB0byBmaXJlIGFuIGV2ZW50LiBEZWZhdWx0cyB0byBgdHJ1ZWAuXG4gKi9cbkNvbW1hbmRTdGFjay5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoZW1pdCkge1xuICB0aGlzLl9zdGFjay5sZW5ndGggPSAwO1xuICB0aGlzLl9zdGFja0lkeCA9IC0xO1xuICBpZiAoZW1pdCAhPT0gZmFsc2UpIHtcbiAgICB0aGlzLl9maXJlKCdjaGFuZ2VkJywge1xuICAgICAgdHJpZ2dlcjogJ2NsZWFyJ1xuICAgIH0pO1xuICB9XG59O1xuXG4vKipcbiAqIFVuZG8gbGFzdCBjb21tYW5kKHMpXG4gKi9cbkNvbW1hbmRTdGFjay5wcm90b3R5cGUudW5kbyA9IGZ1bmN0aW9uICgpIHtcbiAgbGV0IGFjdGlvbiA9IHRoaXMuX2dldFVuZG9BY3Rpb24oKSxcbiAgICBuZXh0O1xuICBpZiAoYWN0aW9uKSB7XG4gICAgdGhpcy5fY3VycmVudEV4ZWN1dGlvbi50cmlnZ2VyID0gJ3VuZG8nO1xuICAgIHRoaXMuX3B1c2hBY3Rpb24oYWN0aW9uKTtcbiAgICB3aGlsZSAoYWN0aW9uKSB7XG4gICAgICB0aGlzLl9pbnRlcm5hbFVuZG8oYWN0aW9uKTtcbiAgICAgIG5leHQgPSB0aGlzLl9nZXRVbmRvQWN0aW9uKCk7XG4gICAgICBpZiAoIW5leHQgfHwgbmV4dC5pZCAhPT0gYWN0aW9uLmlkKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgYWN0aW9uID0gbmV4dDtcbiAgICB9XG4gICAgdGhpcy5fcG9wQWN0aW9uKCk7XG4gIH1cbn07XG5cbi8qKlxuICogUmVkbyBsYXN0IGNvbW1hbmQocylcbiAqL1xuQ29tbWFuZFN0YWNrLnByb3RvdHlwZS5yZWRvID0gZnVuY3Rpb24gKCkge1xuICBsZXQgYWN0aW9uID0gdGhpcy5fZ2V0UmVkb0FjdGlvbigpLFxuICAgIG5leHQ7XG4gIGlmIChhY3Rpb24pIHtcbiAgICB0aGlzLl9jdXJyZW50RXhlY3V0aW9uLnRyaWdnZXIgPSAncmVkbyc7XG4gICAgdGhpcy5fcHVzaEFjdGlvbihhY3Rpb24pO1xuICAgIHdoaWxlIChhY3Rpb24pIHtcbiAgICAgIHRoaXMuX2ludGVybmFsRXhlY3V0ZShhY3Rpb24sIHRydWUpO1xuICAgICAgbmV4dCA9IHRoaXMuX2dldFJlZG9BY3Rpb24oKTtcbiAgICAgIGlmICghbmV4dCB8fCBuZXh0LmlkICE9PSBhY3Rpb24uaWQpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBhY3Rpb24gPSBuZXh0O1xuICAgIH1cbiAgICB0aGlzLl9wb3BBY3Rpb24oKTtcbiAgfVxufTtcblxuLyoqXG4gKiBSZWdpc3RlciBhIGhhbmRsZXIgaW5zdGFuY2Ugd2l0aCB0aGUgY29tbWFuZCBzdGFjay5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gY29tbWFuZCBDb21tYW5kIHRvIGJlIGV4ZWN1dGVkLlxuICogQHBhcmFtIHtDb21tYW5kSGFuZGxlcn0gaGFuZGxlciBIYW5kbGVyIHRvIGV4ZWN1dGUgdGhlIGNvbW1hbmQuXG4gKi9cbkNvbW1hbmRTdGFjay5wcm90b3R5cGUucmVnaXN0ZXIgPSBmdW5jdGlvbiAoY29tbWFuZCwgaGFuZGxlcikge1xuICB0aGlzLl9zZXRIYW5kbGVyKGNvbW1hbmQsIGhhbmRsZXIpO1xufTtcblxuLyoqXG4gKiBSZWdpc3RlciBhIGhhbmRsZXIgdHlwZSB3aXRoIHRoZSBjb21tYW5kIHN0YWNrICBieSBpbnN0YW50aWF0aW5nIGl0IGFuZFxuICogaW5qZWN0aW5nIGl0cyBkZXBlbmRlbmNpZXMuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGNvbW1hbmQgQ29tbWFuZCB0byBiZSBleGVjdXRlZC5cbiAqIEBwYXJhbSB7Q29tbWFuZEhhbmRsZXJDb25zdHJ1Y3Rvcn0gaGFuZGxlckNscyBDb25zdHJ1Y3RvciB0byBpbnN0YW50aWF0ZSBhIHtAbGluayBDb21tYW5kSGFuZGxlcn0uXG4gKi9cbkNvbW1hbmRTdGFjay5wcm90b3R5cGUucmVnaXN0ZXJIYW5kbGVyID0gZnVuY3Rpb24gKGNvbW1hbmQsIGhhbmRsZXJDbHMpIHtcbiAgaWYgKCFjb21tYW5kIHx8ICFoYW5kbGVyQ2xzKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjb21tYW5kIGFuZCBoYW5kbGVyQ2xzIG11c3QgYmUgZGVmaW5lZCcpO1xuICB9XG4gIGNvbnN0IGhhbmRsZXIgPSB0aGlzLl9pbmplY3Rvci5pbnN0YW50aWF0ZShoYW5kbGVyQ2xzKTtcbiAgdGhpcy5yZWdpc3Rlcihjb21tYW5kLCBoYW5kbGVyKTtcbn07XG5cbi8qKlxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuQ29tbWFuZFN0YWNrLnByb3RvdHlwZS5jYW5VbmRvID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gISF0aGlzLl9nZXRVbmRvQWN0aW9uKCk7XG59O1xuXG4vKipcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbkNvbW1hbmRTdGFjay5wcm90b3R5cGUuY2FuUmVkbyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuICEhdGhpcy5fZ2V0UmVkb0FjdGlvbigpO1xufTtcblxuLy8gc3RhY2sgYWNjZXNzICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbkNvbW1hbmRTdGFjay5wcm90b3R5cGUuX2dldFJlZG9BY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLl9zdGFja1t0aGlzLl9zdGFja0lkeCArIDFdO1xufTtcbkNvbW1hbmRTdGFjay5wcm90b3R5cGUuX2dldFVuZG9BY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLl9zdGFja1t0aGlzLl9zdGFja0lkeF07XG59O1xuXG4vLyBpbnRlcm5hbCBmdW5jdGlvbmFsaXR5IC8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuQ29tbWFuZFN0YWNrLnByb3RvdHlwZS5faW50ZXJuYWxVbmRvID0gZnVuY3Rpb24gKGFjdGlvbikge1xuICBjb25zdCBjb21tYW5kID0gYWN0aW9uLmNvbW1hbmQsXG4gICAgY29udGV4dCA9IGFjdGlvbi5jb250ZXh0O1xuICBjb25zdCBoYW5kbGVyID0gdGhpcy5fZ2V0SGFuZGxlcihjb21tYW5kKTtcblxuICAvLyBndWFyZCBhZ2FpbnN0IGlsbGVnYWwgbmVzdGVkIGNvbW1hbmQgc3RhY2sgaW52b2NhdGlvbnNcbiAgdGhpcy5fYXRvbWljRG8oKCkgPT4ge1xuICAgIHRoaXMuX2ZpcmUoY29tbWFuZCwgJ3JldmVydCcsIGFjdGlvbik7XG4gICAgaWYgKGhhbmRsZXIucmV2ZXJ0KSB7XG4gICAgICB0aGlzLl9tYXJrRGlydHkoaGFuZGxlci5yZXZlcnQoY29udGV4dCkpO1xuICAgIH1cbiAgICB0aGlzLl9yZXZlcnRlZEFjdGlvbihhY3Rpb24pO1xuICAgIHRoaXMuX2ZpcmUoY29tbWFuZCwgJ3JldmVydGVkJywgYWN0aW9uKTtcbiAgfSk7XG59O1xuQ29tbWFuZFN0YWNrLnByb3RvdHlwZS5fZmlyZSA9IGZ1bmN0aW9uIChjb21tYW5kLCBxdWFsaWZpZXIsIGV2ZW50KSB7XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMykge1xuICAgIGV2ZW50ID0gcXVhbGlmaWVyO1xuICAgIHF1YWxpZmllciA9IG51bGw7XG4gIH1cbiAgY29uc3QgbmFtZXMgPSBxdWFsaWZpZXIgPyBbY29tbWFuZCArICcuJyArIHF1YWxpZmllciwgcXVhbGlmaWVyXSA6IFtjb21tYW5kXTtcbiAgbGV0IHJlc3VsdDtcbiAgZXZlbnQgPSB0aGlzLl9ldmVudEJ1cy5jcmVhdGVFdmVudChldmVudCk7XG4gIGZvciAoY29uc3QgbmFtZSBvZiBuYW1lcykge1xuICAgIHJlc3VsdCA9IHRoaXMuX2V2ZW50QnVzLmZpcmUoJ2NvbW1hbmRTdGFjay4nICsgbmFtZSwgZXZlbnQpO1xuICAgIGlmIChldmVudC5jYW5jZWxCdWJibGUpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufTtcbkNvbW1hbmRTdGFjay5wcm90b3R5cGUuX2NyZWF0ZUlkID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5fdWlkKys7XG59O1xuQ29tbWFuZFN0YWNrLnByb3RvdHlwZS5fYXRvbWljRG8gPSBmdW5jdGlvbiAoZm4pIHtcbiAgY29uc3QgZXhlY3V0aW9uID0gdGhpcy5fY3VycmVudEV4ZWN1dGlvbjtcbiAgZXhlY3V0aW9uLmF0b21pYyA9IHRydWU7XG4gIHRyeSB7XG4gICAgZm4oKTtcbiAgfSBmaW5hbGx5IHtcbiAgICBleGVjdXRpb24uYXRvbWljID0gZmFsc2U7XG4gIH1cbn07XG5Db21tYW5kU3RhY2sucHJvdG90eXBlLl9pbnRlcm5hbEV4ZWN1dGUgPSBmdW5jdGlvbiAoYWN0aW9uLCByZWRvKSB7XG4gIGNvbnN0IGNvbW1hbmQgPSBhY3Rpb24uY29tbWFuZCxcbiAgICBjb250ZXh0ID0gYWN0aW9uLmNvbnRleHQ7XG4gIGNvbnN0IGhhbmRsZXIgPSB0aGlzLl9nZXRIYW5kbGVyKGNvbW1hbmQpO1xuICBpZiAoIWhhbmRsZXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ25vIGNvbW1hbmQgaGFuZGxlciByZWdpc3RlcmVkIGZvciA8JyArIGNvbW1hbmQgKyAnPicpO1xuICB9XG4gIHRoaXMuX3B1c2hBY3Rpb24oYWN0aW9uKTtcbiAgaWYgKCFyZWRvKSB7XG4gICAgdGhpcy5fZmlyZShjb21tYW5kLCAncHJlRXhlY3V0ZScsIGFjdGlvbik7XG4gICAgaWYgKGhhbmRsZXIucHJlRXhlY3V0ZSkge1xuICAgICAgaGFuZGxlci5wcmVFeGVjdXRlKGNvbnRleHQpO1xuICAgIH1cbiAgICB0aGlzLl9maXJlKGNvbW1hbmQsICdwcmVFeGVjdXRlZCcsIGFjdGlvbik7XG4gIH1cblxuICAvLyBndWFyZCBhZ2FpbnN0IGlsbGVnYWwgbmVzdGVkIGNvbW1hbmQgc3RhY2sgaW52b2NhdGlvbnNcbiAgdGhpcy5fYXRvbWljRG8oKCkgPT4ge1xuICAgIHRoaXMuX2ZpcmUoY29tbWFuZCwgJ2V4ZWN1dGUnLCBhY3Rpb24pO1xuICAgIGlmIChoYW5kbGVyLmV4ZWN1dGUpIHtcbiAgICAgIC8vIGFjdHVhbCBleGVjdXRlICsgbWFyayByZXR1cm4gcmVzdWx0cyBhcyBkaXJ0eVxuICAgICAgdGhpcy5fbWFya0RpcnR5KGhhbmRsZXIuZXhlY3V0ZShjb250ZXh0KSk7XG4gICAgfVxuXG4gICAgLy8gbG9nIHRvIHN0YWNrXG4gICAgdGhpcy5fZXhlY3V0ZWRBY3Rpb24oYWN0aW9uLCByZWRvKTtcbiAgICB0aGlzLl9maXJlKGNvbW1hbmQsICdleGVjdXRlZCcsIGFjdGlvbik7XG4gIH0pO1xuICBpZiAoIXJlZG8pIHtcbiAgICB0aGlzLl9maXJlKGNvbW1hbmQsICdwb3N0RXhlY3V0ZScsIGFjdGlvbik7XG4gICAgaWYgKGhhbmRsZXIucG9zdEV4ZWN1dGUpIHtcbiAgICAgIGhhbmRsZXIucG9zdEV4ZWN1dGUoY29udGV4dCk7XG4gICAgfVxuICAgIHRoaXMuX2ZpcmUoY29tbWFuZCwgJ3Bvc3RFeGVjdXRlZCcsIGFjdGlvbik7XG4gIH1cbiAgdGhpcy5fcG9wQWN0aW9uKCk7XG59O1xuQ29tbWFuZFN0YWNrLnByb3RvdHlwZS5fcHVzaEFjdGlvbiA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcbiAgY29uc3QgZXhlY3V0aW9uID0gdGhpcy5fY3VycmVudEV4ZWN1dGlvbixcbiAgICBhY3Rpb25zID0gZXhlY3V0aW9uLmFjdGlvbnM7XG4gIGNvbnN0IGJhc2VBY3Rpb24gPSBhY3Rpb25zWzBdO1xuICBpZiAoZXhlY3V0aW9uLmF0b21pYykge1xuICAgIHRocm93IG5ldyBFcnJvcignaWxsZWdhbCBpbnZvY2F0aW9uIGluIDxleGVjdXRlPiBvciA8cmV2ZXJ0PiBwaGFzZSAoYWN0aW9uOiAnICsgYWN0aW9uLmNvbW1hbmQgKyAnKScpO1xuICB9XG4gIGlmICghYWN0aW9uLmlkKSB7XG4gICAgYWN0aW9uLmlkID0gYmFzZUFjdGlvbiAmJiBiYXNlQWN0aW9uLmlkIHx8IHRoaXMuX2NyZWF0ZUlkKCk7XG4gIH1cbiAgYWN0aW9ucy5wdXNoKGFjdGlvbik7XG59O1xuQ29tbWFuZFN0YWNrLnByb3RvdHlwZS5fcG9wQWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICBjb25zdCBleGVjdXRpb24gPSB0aGlzLl9jdXJyZW50RXhlY3V0aW9uLFxuICAgIHRyaWdnZXIgPSBleGVjdXRpb24udHJpZ2dlcixcbiAgICBhY3Rpb25zID0gZXhlY3V0aW9uLmFjdGlvbnMsXG4gICAgZGlydHkgPSBleGVjdXRpb24uZGlydHk7XG4gIGFjdGlvbnMucG9wKCk7XG4gIGlmICghYWN0aW9ucy5sZW5ndGgpIHtcbiAgICB0aGlzLl9ldmVudEJ1cy5maXJlKCdlbGVtZW50cy5jaGFuZ2VkJywge1xuICAgICAgZWxlbWVudHM6IHVuaXF1ZUJ5KCdpZCcsIGRpcnR5LnJldmVyc2UoKSlcbiAgICB9KTtcbiAgICBkaXJ0eS5sZW5ndGggPSAwO1xuICAgIHRoaXMuX2ZpcmUoJ2NoYW5nZWQnLCB7XG4gICAgICB0cmlnZ2VyOiB0cmlnZ2VyXG4gICAgfSk7XG4gICAgZXhlY3V0aW9uLnRyaWdnZXIgPSBudWxsO1xuICB9XG59O1xuQ29tbWFuZFN0YWNrLnByb3RvdHlwZS5fbWFya0RpcnR5ID0gZnVuY3Rpb24gKGVsZW1lbnRzKSB7XG4gIGNvbnN0IGV4ZWN1dGlvbiA9IHRoaXMuX2N1cnJlbnRFeGVjdXRpb247XG4gIGlmICghZWxlbWVudHMpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgZWxlbWVudHMgPSBpc0FycmF5KGVsZW1lbnRzKSA/IGVsZW1lbnRzIDogW2VsZW1lbnRzXTtcbiAgZXhlY3V0aW9uLmRpcnR5ID0gZXhlY3V0aW9uLmRpcnR5LmNvbmNhdChlbGVtZW50cyk7XG59O1xuQ29tbWFuZFN0YWNrLnByb3RvdHlwZS5fZXhlY3V0ZWRBY3Rpb24gPSBmdW5jdGlvbiAoYWN0aW9uLCByZWRvKSB7XG4gIGNvbnN0IHN0YWNrSWR4ID0gKyt0aGlzLl9zdGFja0lkeDtcbiAgaWYgKCFyZWRvKSB7XG4gICAgdGhpcy5fc3RhY2suc3BsaWNlKHN0YWNrSWR4LCB0aGlzLl9zdGFjay5sZW5ndGgsIGFjdGlvbik7XG4gIH1cbn07XG5Db21tYW5kU3RhY2sucHJvdG90eXBlLl9yZXZlcnRlZEFjdGlvbiA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcbiAgdGhpcy5fc3RhY2tJZHgtLTtcbn07XG5Db21tYW5kU3RhY2sucHJvdG90eXBlLl9nZXRIYW5kbGVyID0gZnVuY3Rpb24gKGNvbW1hbmQpIHtcbiAgcmV0dXJuIHRoaXMuX2hhbmRsZXJNYXBbY29tbWFuZF07XG59O1xuQ29tbWFuZFN0YWNrLnByb3RvdHlwZS5fc2V0SGFuZGxlciA9IGZ1bmN0aW9uIChjb21tYW5kLCBoYW5kbGVyKSB7XG4gIGlmICghY29tbWFuZCB8fCAhaGFuZGxlcikge1xuICAgIHRocm93IG5ldyBFcnJvcignY29tbWFuZCBhbmQgaGFuZGxlciByZXF1aXJlZCcpO1xuICB9XG4gIGlmICh0aGlzLl9oYW5kbGVyTWFwW2NvbW1hbmRdKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdvdmVycmlkaW5nIGhhbmRsZXIgZm9yIGNvbW1hbmQgPCcgKyBjb21tYW5kICsgJz4nKTtcbiAgfVxuICB0aGlzLl9oYW5kbGVyTWFwW2NvbW1hbmRdID0gaGFuZGxlcjtcbn07XG5cbi8qKlxuICogQHR5cGUgeyBpbXBvcnQoJ2RpZGknKS5Nb2R1bGVEZWNsYXJhdGlvbiB9XG4gKi9cbnZhciBjb21tYW5kTW9kdWxlID0ge1xuICBjb21tYW5kU3RhY2s6IFsndHlwZScsIENvbW1hbmRTdGFja11cbn07XG5cbi8qKlxuICogQHR5cGVkZWYge2ltcG9ydCgnLi4vY29yZS9UeXBlcycpLkVsZW1lbnRMaWtlfSBFbGVtZW50TGlrZVxuICogQHR5cGVkZWYge2ltcG9ydCgnLi4vY29yZS9FdmVudEJ1cycpLmRlZmF1bHR9IEV2ZW50QnVzXG4gKiBAdHlwZWRlZiB7aW1wb3J0KCcuL0NvbW1hbmRTdGFjaycpLkNvbW1hbmRDb250ZXh0fSBDb21tYW5kQ29udGV4dFxuICpcbiAqIEB0eXBlZGVmIHtzdHJpbmd8c3RyaW5nW119IEV2ZW50c1xuICogQHR5cGVkZWYgeyAoY29udGV4dDogQ29tbWFuZENvbnRleHQpID0+IEVsZW1lbnRMaWtlW10gfCB2b2lkIH0gSGFuZGxlckZ1bmN0aW9uXG4gKiBAdHlwZWRlZiB7IChjb250ZXh0OiBDb21tYW5kQ29udGV4dCkgPT4gdm9pZCB9IENvbXBvc2VIYW5kbGVyRnVuY3Rpb25cbiAqL1xuXG52YXIgREVGQVVMVF9QUklPUklUWSQxID0gMTAwMDtcblxuLyoqXG4gKiBBIHV0aWxpdHkgdGhhdCBjYW4gYmUgdXNlZCB0byBwbHVnIGludG8gdGhlIGNvbW1hbmQgZXhlY3V0aW9uIGZvclxuICogZXh0ZW5zaW9uIGFuZC9vciB2YWxpZGF0aW9uLlxuICpcbiAqIEBjbGFzc1xuICogQGNvbnN0cnVjdG9yXG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiBgYGBqYXZhc2NyaXB0XG4gKiBpbXBvcnQgQ29tbWFuZEludGVyY2VwdG9yIGZyb20gJ2RpYWdyYW0tanMvbGliL2NvbW1hbmQvQ29tbWFuZEludGVyY2VwdG9yJztcbiAqXG4gKiBjbGFzcyBDb21tYW5kTG9nZ2VyIGV4dGVuZHMgQ29tbWFuZEludGVyY2VwdG9yIHtcbiAqICAgY29uc3RydWN0b3IoZXZlbnRCdXMpIHtcbiAqICAgICBzdXBlcihldmVudEJ1cyk7XG4gKlxuICogICB0aGlzLnByZUV4ZWN1dGUoJ3NoYXBlLmNyZWF0ZScsIChldmVudCkgPT4ge1xuICogICAgIGNvbnNvbGUubG9nKCdjb21tYW5kU3RhY2suc2hhcGUtY3JlYXRlLnByZUV4ZWN1dGUnLCBldmVudCk7XG4gKiAgIH0pO1xuICogfVxuICogYGBgXG4gKlxuICogQHBhcmFtIHtFdmVudEJ1c30gZXZlbnRCdXNcbiAqL1xuZnVuY3Rpb24gQ29tbWFuZEludGVyY2VwdG9yKGV2ZW50QnVzKSB7XG4gIC8qKlxuICAgKiBAdHlwZSB7RXZlbnRCdXN9XG4gICAqL1xuICB0aGlzLl9ldmVudEJ1cyA9IGV2ZW50QnVzO1xufVxuQ29tbWFuZEludGVyY2VwdG9yLiRpbmplY3QgPSBbJ2V2ZW50QnVzJ107XG5mdW5jdGlvbiB1bndyYXBFdmVudChmbiwgdGhhdCkge1xuICByZXR1cm4gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgcmV0dXJuIGZuLmNhbGwodGhhdCB8fCBudWxsLCBldmVudC5jb250ZXh0LCBldmVudC5jb21tYW5kLCBldmVudCk7XG4gIH07XG59XG5cbi8qKlxuICogSW50ZXJjZXB0IGEgY29tbWFuZCBkdXJpbmcgb25lIG9mIHRoZSBwaGFzZXMuXG4gKlxuICogQHBhcmFtIHtFdmVudHN9IFtldmVudHNdIGNvbW1hbmQocykgdG8gaW50ZXJjZXB0XG4gKiBAcGFyYW0ge3N0cmluZ30gW2hvb2tdIHBoYXNlIHRvIGludGVyY2VwdFxuICogQHBhcmFtIHtudW1iZXJ9IFtwcmlvcml0eV1cbiAqIEBwYXJhbSB7Q29tcG9zZUhhbmRsZXJGdW5jdGlvbnxIYW5kbGVyRnVuY3Rpb259IGhhbmRsZXJGblxuICogQHBhcmFtIHtib29sZWFufSBbdW53cmFwXSB3aGV0aGVyIHRoZSBldmVudCBzaG91bGQgYmUgdW53cmFwcGVkXG4gKiBAcGFyYW0ge2FueX0gW3RoYXRdXG4gKi9cbkNvbW1hbmRJbnRlcmNlcHRvci5wcm90b3R5cGUub24gPSBmdW5jdGlvbiAoZXZlbnRzLCBob29rLCBwcmlvcml0eSwgaGFuZGxlckZuLCB1bndyYXAsIHRoYXQpIHtcbiAgaWYgKGlzRnVuY3Rpb24oaG9vaykgfHwgaXNOdW1iZXIoaG9vaykpIHtcbiAgICB0aGF0ID0gdW53cmFwO1xuICAgIHVud3JhcCA9IGhhbmRsZXJGbjtcbiAgICBoYW5kbGVyRm4gPSBwcmlvcml0eTtcbiAgICBwcmlvcml0eSA9IGhvb2s7XG4gICAgaG9vayA9IG51bGw7XG4gIH1cbiAgaWYgKGlzRnVuY3Rpb24ocHJpb3JpdHkpKSB7XG4gICAgdGhhdCA9IHVud3JhcDtcbiAgICB1bndyYXAgPSBoYW5kbGVyRm47XG4gICAgaGFuZGxlckZuID0gcHJpb3JpdHk7XG4gICAgcHJpb3JpdHkgPSBERUZBVUxUX1BSSU9SSVRZJDE7XG4gIH1cbiAgaWYgKGlzT2JqZWN0KHVud3JhcCkpIHtcbiAgICB0aGF0ID0gdW53cmFwO1xuICAgIHVud3JhcCA9IGZhbHNlO1xuICB9XG4gIGlmICghaXNGdW5jdGlvbihoYW5kbGVyRm4pKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdoYW5kbGVyRm4gbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG4gIH1cbiAgaWYgKCFpc0FycmF5KGV2ZW50cykpIHtcbiAgICBldmVudHMgPSBbZXZlbnRzXTtcbiAgfVxuICB2YXIgZXZlbnRCdXMgPSB0aGlzLl9ldmVudEJ1cztcbiAgZm9yRWFjaChldmVudHMsIGZ1bmN0aW9uIChldmVudCkge1xuICAgIC8vIGNvbmNhdCBjb21tYW5kU3RhY2soLmV2ZW50KT8oLmhvb2spP1xuICAgIHZhciBmdWxsRXZlbnQgPSBbJ2NvbW1hbmRTdGFjaycsIGV2ZW50LCBob29rXS5maWx0ZXIoZnVuY3Rpb24gKGUpIHtcbiAgICAgIHJldHVybiBlO1xuICAgIH0pLmpvaW4oJy4nKTtcbiAgICBldmVudEJ1cy5vbihmdWxsRXZlbnQsIHByaW9yaXR5LCB1bndyYXAgPyB1bndyYXBFdmVudChoYW5kbGVyRm4sIHRoYXQpIDogaGFuZGxlckZuLCB0aGF0KTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIEFkZCBhIDxjYW5FeGVjdXRlPiBwaGFzZSBvZiBjb21tYW5kIGludGVyY2VwdG9yLlxuICpcbiAqIEBwYXJhbSB7RXZlbnRzfSBbZXZlbnRzXSBjb21tYW5kKHMpIHRvIGludGVyY2VwdFxuICogQHBhcmFtIHtudW1iZXJ9IFtwcmlvcml0eV1cbiAqIEBwYXJhbSB7Q29tcG9zZUhhbmRsZXJGdW5jdGlvbnxIYW5kbGVyRnVuY3Rpb259IGhhbmRsZXJGblxuICogQHBhcmFtIHtib29sZWFufSBbdW53cmFwXSB3aGV0aGVyIHRoZSBldmVudCBzaG91bGQgYmUgdW53cmFwcGVkXG4gKiBAcGFyYW0ge2FueX0gW3RoYXRdXG4gKi9cbkNvbW1hbmRJbnRlcmNlcHRvci5wcm90b3R5cGUuY2FuRXhlY3V0ZSA9IGNyZWF0ZUhvb2soJ2NhbkV4ZWN1dGUnKTtcblxuLyoqXG4gKiBBZGQgYSA8cHJlRXhlY3V0ZT4gcGhhc2Ugb2YgY29tbWFuZCBpbnRlcmNlcHRvci5cbiAqXG4gKiBAcGFyYW0ge0V2ZW50c30gW2V2ZW50c10gY29tbWFuZChzKSB0byBpbnRlcmNlcHRcbiAqIEBwYXJhbSB7bnVtYmVyfSBbcHJpb3JpdHldXG4gKiBAcGFyYW0ge0NvbXBvc2VIYW5kbGVyRnVuY3Rpb258SGFuZGxlckZ1bmN0aW9ufSBoYW5kbGVyRm5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW3Vud3JhcF0gd2hldGhlciB0aGUgZXZlbnQgc2hvdWxkIGJlIHVud3JhcHBlZFxuICogQHBhcmFtIHthbnl9IFt0aGF0XVxuICovXG5Db21tYW5kSW50ZXJjZXB0b3IucHJvdG90eXBlLnByZUV4ZWN1dGUgPSBjcmVhdGVIb29rKCdwcmVFeGVjdXRlJyk7XG5cbi8qKlxuICogQWRkIGEgPHByZUV4ZWN1dGVkPiBwaGFzZSBvZiBjb21tYW5kIGludGVyY2VwdG9yLlxuICpcbiAqIEBwYXJhbSB7RXZlbnRzfSBbZXZlbnRzXSBjb21tYW5kKHMpIHRvIGludGVyY2VwdFxuICogQHBhcmFtIHtudW1iZXJ9IFtwcmlvcml0eV1cbiAqIEBwYXJhbSB7Q29tcG9zZUhhbmRsZXJGdW5jdGlvbnxIYW5kbGVyRnVuY3Rpb259IGhhbmRsZXJGblxuICogQHBhcmFtIHtib29sZWFufSBbdW53cmFwXSB3aGV0aGVyIHRoZSBldmVudCBzaG91bGQgYmUgdW53cmFwcGVkXG4gKiBAcGFyYW0ge2FueX0gW3RoYXRdXG4gKi9cbkNvbW1hbmRJbnRlcmNlcHRvci5wcm90b3R5cGUucHJlRXhlY3V0ZWQgPSBjcmVhdGVIb29rKCdwcmVFeGVjdXRlZCcpO1xuXG4vKipcbiAqIEFkZCBhIDxleGVjdXRlPiBwaGFzZSBvZiBjb21tYW5kIGludGVyY2VwdG9yLlxuICpcbiAqIEBwYXJhbSB7RXZlbnRzfSBbZXZlbnRzXSBjb21tYW5kKHMpIHRvIGludGVyY2VwdFxuICogQHBhcmFtIHtudW1iZXJ9IFtwcmlvcml0eV1cbiAqIEBwYXJhbSB7Q29tcG9zZUhhbmRsZXJGdW5jdGlvbnxIYW5kbGVyRnVuY3Rpb259IGhhbmRsZXJGblxuICogQHBhcmFtIHtib29sZWFufSBbdW53cmFwXSB3aGV0aGVyIHRoZSBldmVudCBzaG91bGQgYmUgdW53cmFwcGVkXG4gKiBAcGFyYW0ge2FueX0gW3RoYXRdXG4gKi9cbkNvbW1hbmRJbnRlcmNlcHRvci5wcm90b3R5cGUuZXhlY3V0ZSA9IGNyZWF0ZUhvb2soJ2V4ZWN1dGUnKTtcblxuLyoqXG4gKiBBZGQgYSA8ZXhlY3V0ZWQ+IHBoYXNlIG9mIGNvbW1hbmQgaW50ZXJjZXB0b3IuXG4gKlxuICogQHBhcmFtIHtFdmVudHN9IFtldmVudHNdIGNvbW1hbmQocykgdG8gaW50ZXJjZXB0XG4gKiBAcGFyYW0ge251bWJlcn0gW3ByaW9yaXR5XVxuICogQHBhcmFtIHtDb21wb3NlSGFuZGxlckZ1bmN0aW9ufEhhbmRsZXJGdW5jdGlvbn0gaGFuZGxlckZuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFt1bndyYXBdIHdoZXRoZXIgdGhlIGV2ZW50IHNob3VsZCBiZSB1bndyYXBwZWRcbiAqIEBwYXJhbSB7YW55fSBbdGhhdF1cbiAqL1xuQ29tbWFuZEludGVyY2VwdG9yLnByb3RvdHlwZS5leGVjdXRlZCA9IGNyZWF0ZUhvb2soJ2V4ZWN1dGVkJyk7XG5cbi8qKlxuICogQWRkIGEgPHBvc3RFeGVjdXRlPiBwaGFzZSBvZiBjb21tYW5kIGludGVyY2VwdG9yLlxuICpcbiAqIEBwYXJhbSB7RXZlbnRzfSBbZXZlbnRzXSBjb21tYW5kKHMpIHRvIGludGVyY2VwdFxuICogQHBhcmFtIHtudW1iZXJ9IFtwcmlvcml0eV1cbiAqIEBwYXJhbSB7Q29tcG9zZUhhbmRsZXJGdW5jdGlvbnxIYW5kbGVyRnVuY3Rpb259IGhhbmRsZXJGblxuICogQHBhcmFtIHtib29sZWFufSBbdW53cmFwXSB3aGV0aGVyIHRoZSBldmVudCBzaG91bGQgYmUgdW53cmFwcGVkXG4gKiBAcGFyYW0ge2FueX0gW3RoYXRdXG4gKi9cbkNvbW1hbmRJbnRlcmNlcHRvci5wcm90b3R5cGUucG9zdEV4ZWN1dGUgPSBjcmVhdGVIb29rKCdwb3N0RXhlY3V0ZScpO1xuXG4vKipcbiAqIEFkZCBhIDxwb3N0RXhlY3V0ZWQ+IHBoYXNlIG9mIGNvbW1hbmQgaW50ZXJjZXB0b3IuXG4gKlxuICogQHBhcmFtIHtFdmVudHN9IFtldmVudHNdIGNvbW1hbmQocykgdG8gaW50ZXJjZXB0XG4gKiBAcGFyYW0ge251bWJlcn0gW3ByaW9yaXR5XVxuICogQHBhcmFtIHtDb21wb3NlSGFuZGxlckZ1bmN0aW9ufEhhbmRsZXJGdW5jdGlvbn0gaGFuZGxlckZuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFt1bndyYXBdIHdoZXRoZXIgdGhlIGV2ZW50IHNob3VsZCBiZSB1bndyYXBwZWRcbiAqIEBwYXJhbSB7YW55fSBbdGhhdF1cbiAqL1xuQ29tbWFuZEludGVyY2VwdG9yLnByb3RvdHlwZS5wb3N0RXhlY3V0ZWQgPSBjcmVhdGVIb29rKCdwb3N0RXhlY3V0ZWQnKTtcblxuLyoqXG4gKiBBZGQgYSA8cmV2ZXJ0PiBwaGFzZSBvZiBjb21tYW5kIGludGVyY2VwdG9yLlxuICpcbiAqIEBwYXJhbSB7RXZlbnRzfSBbZXZlbnRzXSBjb21tYW5kKHMpIHRvIGludGVyY2VwdFxuICogQHBhcmFtIHtudW1iZXJ9IFtwcmlvcml0eV1cbiAqIEBwYXJhbSB7Q29tcG9zZUhhbmRsZXJGdW5jdGlvbnxIYW5kbGVyRnVuY3Rpb259IGhhbmRsZXJGblxuICogQHBhcmFtIHtib29sZWFufSBbdW53cmFwXSB3aGV0aGVyIHRoZSBldmVudCBzaG91bGQgYmUgdW53cmFwcGVkXG4gKiBAcGFyYW0ge2FueX0gW3RoYXRdXG4gKi9cbkNvbW1hbmRJbnRlcmNlcHRvci5wcm90b3R5cGUucmV2ZXJ0ID0gY3JlYXRlSG9vaygncmV2ZXJ0Jyk7XG5cbi8qKlxuICogQWRkIGEgPHJldmVydGVkPiBwaGFzZSBvZiBjb21tYW5kIGludGVyY2VwdG9yLlxuICpcbiAqIEBwYXJhbSB7RXZlbnRzfSBbZXZlbnRzXSBjb21tYW5kKHMpIHRvIGludGVyY2VwdFxuICogQHBhcmFtIHtudW1iZXJ9IFtwcmlvcml0eV1cbiAqIEBwYXJhbSB7Q29tcG9zZUhhbmRsZXJGdW5jdGlvbnxIYW5kbGVyRnVuY3Rpb259IGhhbmRsZXJGblxuICogQHBhcmFtIHtib29sZWFufSBbdW53cmFwXSB3aGV0aGVyIHRoZSBldmVudCBzaG91bGQgYmUgdW53cmFwcGVkXG4gKiBAcGFyYW0ge2FueX0gW3RoYXRdXG4gKi9cbkNvbW1hbmRJbnRlcmNlcHRvci5wcm90b3R5cGUucmV2ZXJ0ZWQgPSBjcmVhdGVIb29rKCdyZXZlcnRlZCcpO1xuXG4vKlxuICogQWRkIHByb3RvdHlwZSBtZXRob2RzIGZvciBlYWNoIHBoYXNlIG9mIGNvbW1hbmQgZXhlY3V0aW9uIChlLmcuIGV4ZWN1dGUsXG4gKiByZXZlcnQpLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBob29rXG4gKlxuICogQHJldHVybiB7IChcbiAqICAgZXZlbnRzPzogRXZlbnRzLFxuICogICBwcmlvcml0eT86IG51bWJlcixcbiAqICAgaGFuZGxlckZuOiBDb21wb3NlSGFuZGxlckZ1bmN0aW9ufEhhbmRsZXJGdW5jdGlvbixcbiAqICAgdW53cmFwPzogYm9vbGVhblxuICogKSA9PiBhbnkgfVxuICovXG5mdW5jdGlvbiBjcmVhdGVIb29rKGhvb2spIHtcbiAgLyoqXG4gICAqIEB0aGlzIHtDb21tYW5kSW50ZXJjZXB0b3J9XG4gICAqXG4gICAqIEBwYXJhbSB7RXZlbnRzfSBbZXZlbnRzXVxuICAgKiBAcGFyYW0ge251bWJlcn0gW3ByaW9yaXR5XVxuICAgKiBAcGFyYW0ge0NvbXBvc2VIYW5kbGVyRnVuY3Rpb258SGFuZGxlckZ1bmN0aW9ufSBoYW5kbGVyRm5cbiAgICogQHBhcmFtIHtib29sZWFufSBbdW53cmFwXVxuICAgKiBAcGFyYW0ge2FueX0gW3RoYXRdXG4gICAqL1xuICBjb25zdCBob29rRm4gPSBmdW5jdGlvbiAoZXZlbnRzLCBwcmlvcml0eSwgaGFuZGxlckZuLCB1bndyYXAsIHRoYXQpIHtcbiAgICBpZiAoaXNGdW5jdGlvbihldmVudHMpIHx8IGlzTnVtYmVyKGV2ZW50cykpIHtcbiAgICAgIHRoYXQgPSB1bndyYXA7XG4gICAgICB1bndyYXAgPSBoYW5kbGVyRm47XG4gICAgICBoYW5kbGVyRm4gPSBwcmlvcml0eTtcbiAgICAgIHByaW9yaXR5ID0gZXZlbnRzO1xuICAgICAgZXZlbnRzID0gbnVsbDtcbiAgICB9XG4gICAgdGhpcy5vbihldmVudHMsIGhvb2ssIHByaW9yaXR5LCBoYW5kbGVyRm4sIHVud3JhcCwgdGhhdCk7XG4gIH07XG4gIHJldHVybiBob29rRm47XG59XG5cbmNsYXNzIElkQmVoYXZpb3IgZXh0ZW5kcyBDb21tYW5kSW50ZXJjZXB0b3Ige1xuICBjb25zdHJ1Y3RvcihldmVudEJ1cywgbW9kZWxpbmcpIHtcbiAgICBzdXBlcihldmVudEJ1cyk7XG4gICAgdGhpcy5wcmVFeGVjdXRlKCdmb3JtRmllbGQucmVtb3ZlJywgZnVuY3Rpb24gKGNvbnRleHQpIHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgZm9ybUZpZWxkXG4gICAgICB9ID0gY29udGV4dDtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgaWRcbiAgICAgIH0gPSBmb3JtRmllbGQ7XG4gICAgICBtb2RlbGluZy51bmNsYWltSWQoZm9ybUZpZWxkLCBpZCk7XG4gICAgfSwgdHJ1ZSk7XG4gICAgdGhpcy5wcmVFeGVjdXRlKCdmb3JtRmllbGQuZWRpdCcsIGZ1bmN0aW9uIChjb250ZXh0KSB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGZvcm1GaWVsZCxcbiAgICAgICAgcHJvcGVydGllc1xuICAgICAgfSA9IGNvbnRleHQ7XG4gICAgICBpZiAoJ2lkJyBpbiBwcm9wZXJ0aWVzKSB7XG4gICAgICAgIG1vZGVsaW5nLnVuY2xhaW1JZChmb3JtRmllbGQsIGZvcm1GaWVsZC5pZCk7XG4gICAgICAgIG1vZGVsaW5nLmNsYWltSWQoZm9ybUZpZWxkLCBwcm9wZXJ0aWVzLmlkKTtcbiAgICAgIH1cbiAgICB9LCB0cnVlKTtcbiAgfVxufVxuSWRCZWhhdmlvci4kaW5qZWN0ID0gWydldmVudEJ1cycsICdtb2RlbGluZyddO1xuXG5jbGFzcyBLZXlCZWhhdmlvciBleHRlbmRzIENvbW1hbmRJbnRlcmNlcHRvciB7XG4gIGNvbnN0cnVjdG9yKGV2ZW50QnVzLCBtb2RlbGluZywgZm9ybUZpZWxkcykge1xuICAgIHN1cGVyKGV2ZW50QnVzKTtcbiAgICB0aGlzLnByZUV4ZWN1dGUoJ2Zvcm1GaWVsZC5yZW1vdmUnLCBmdW5jdGlvbiAoY29udGV4dCkge1xuICAgICAgY29uc3Qge1xuICAgICAgICBmb3JtRmllbGRcbiAgICAgIH0gPSBjb250ZXh0O1xuICAgICAgY29uc3Qge1xuICAgICAgICBrZXksXG4gICAgICAgIHR5cGVcbiAgICAgIH0gPSBmb3JtRmllbGQ7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGNvbmZpZ1xuICAgICAgfSA9IGZvcm1GaWVsZHMuZ2V0KHR5cGUpO1xuICAgICAgaWYgKGNvbmZpZy5rZXllZCkge1xuICAgICAgICBtb2RlbGluZy51bmNsYWltS2V5KGZvcm1GaWVsZCwga2V5KTtcbiAgICAgIH1cbiAgICB9LCB0cnVlKTtcbiAgICB0aGlzLnByZUV4ZWN1dGUoJ2Zvcm1GaWVsZC5lZGl0JywgZnVuY3Rpb24gKGNvbnRleHQpIHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgZm9ybUZpZWxkLFxuICAgICAgICBwcm9wZXJ0aWVzXG4gICAgICB9ID0gY29udGV4dDtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAga2V5LFxuICAgICAgICB0eXBlXG4gICAgICB9ID0gZm9ybUZpZWxkO1xuICAgICAgY29uc3Qge1xuICAgICAgICBjb25maWdcbiAgICAgIH0gPSBmb3JtRmllbGRzLmdldCh0eXBlKTtcbiAgICAgIGlmIChjb25maWcua2V5ZWQgJiYgJ2tleScgaW4gcHJvcGVydGllcykge1xuICAgICAgICBtb2RlbGluZy51bmNsYWltS2V5KGZvcm1GaWVsZCwga2V5KTtcbiAgICAgICAgbW9kZWxpbmcuY2xhaW1LZXkoZm9ybUZpZWxkLCBwcm9wZXJ0aWVzLmtleSk7XG4gICAgICB9XG4gICAgfSwgdHJ1ZSk7XG4gIH1cbn1cbktleUJlaGF2aW9yLiRpbmplY3QgPSBbJ2V2ZW50QnVzJywgJ21vZGVsaW5nJywgJ2Zvcm1GaWVsZHMnXTtcblxuY2xhc3MgUGF0aEJlaGF2aW9yIGV4dGVuZHMgQ29tbWFuZEludGVyY2VwdG9yIHtcbiAgY29uc3RydWN0b3IoZXZlbnRCdXMsIG1vZGVsaW5nLCBmb3JtRmllbGRzKSB7XG4gICAgc3VwZXIoZXZlbnRCdXMpO1xuICAgIHRoaXMucHJlRXhlY3V0ZSgnZm9ybUZpZWxkLnJlbW92ZScsIGZ1bmN0aW9uIChjb250ZXh0KSB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGZvcm1GaWVsZFxuICAgICAgfSA9IGNvbnRleHQ7XG4gICAgICBjb25zdCB7XG4gICAgICAgIHBhdGgsXG4gICAgICAgIHR5cGVcbiAgICAgIH0gPSBmb3JtRmllbGQ7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGNvbmZpZ1xuICAgICAgfSA9IGZvcm1GaWVsZHMuZ2V0KHR5cGUpO1xuICAgICAgaWYgKGNvbmZpZy5wYXRoZWQpIHtcbiAgICAgICAgbW9kZWxpbmcudW5jbGFpbVBhdGgoZm9ybUZpZWxkLCBwYXRoKTtcbiAgICAgIH1cbiAgICB9LCB0cnVlKTtcbiAgICB0aGlzLnByZUV4ZWN1dGUoJ2Zvcm1GaWVsZC5lZGl0JywgZnVuY3Rpb24gKGNvbnRleHQpIHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgZm9ybUZpZWxkLFxuICAgICAgICBwcm9wZXJ0aWVzXG4gICAgICB9ID0gY29udGV4dDtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgcGF0aCxcbiAgICAgICAgdHlwZVxuICAgICAgfSA9IGZvcm1GaWVsZDtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgY29uZmlnXG4gICAgICB9ID0gZm9ybUZpZWxkcy5nZXQodHlwZSk7XG4gICAgICBpZiAoY29uZmlnLnBhdGhlZCAmJiAncGF0aCcgaW4gcHJvcGVydGllcykge1xuICAgICAgICBtb2RlbGluZy51bmNsYWltUGF0aChmb3JtRmllbGQsIHBhdGgpO1xuICAgICAgICBtb2RlbGluZy5jbGFpbVBhdGgoZm9ybUZpZWxkLCBwcm9wZXJ0aWVzLnBhdGgpO1xuICAgICAgfVxuICAgIH0sIHRydWUpO1xuICB9XG59XG5QYXRoQmVoYXZpb3IuJGluamVjdCA9IFsnZXZlbnRCdXMnLCAnbW9kZWxpbmcnLCAnZm9ybUZpZWxkcyddO1xuXG5jbGFzcyBWYWxpZGF0ZUJlaGF2aW9yIGV4dGVuZHMgQ29tbWFuZEludGVyY2VwdG9yIHtcbiAgY29uc3RydWN0b3IoZXZlbnRCdXMpIHtcbiAgICBzdXBlcihldmVudEJ1cyk7XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgY3VzdG9tIHZhbGlkYXRpb24gaWYgPHZhbGlkYXRpb25UeXBlPiBpcyBhYm91dCB0byBiZSBhZGRlZC5cbiAgICAgKi9cbiAgICB0aGlzLnByZUV4ZWN1dGUoJ2Zvcm1GaWVsZC5lZGl0JywgZnVuY3Rpb24gKGNvbnRleHQpIHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgcHJvcGVydGllc1xuICAgICAgfSA9IGNvbnRleHQ7XG4gICAgICBjb25zdCB7XG4gICAgICAgIHZhbGlkYXRlID0ge31cbiAgICAgIH0gPSBwcm9wZXJ0aWVzO1xuICAgICAgaWYgKHZhbGlkYXRlLnZhbGlkYXRpb25UeXBlKSB7XG4gICAgICAgIGNvbnN0IG5ld1ZhbGlkYXRlID0ge1xuICAgICAgICAgIC4uLnZhbGlkYXRlXG4gICAgICAgIH07XG4gICAgICAgIGRlbGV0ZSBuZXdWYWxpZGF0ZS5taW5MZW5ndGg7XG4gICAgICAgIGRlbGV0ZSBuZXdWYWxpZGF0ZS5tYXhMZW5ndGg7XG4gICAgICAgIGRlbGV0ZSBuZXdWYWxpZGF0ZS5wYXR0ZXJuO1xuICAgICAgICBwcm9wZXJ0aWVzWyd2YWxpZGF0ZSddID0gbmV3VmFsaWRhdGU7XG4gICAgICB9XG4gICAgfSwgdHJ1ZSk7XG4gIH1cbn1cblZhbGlkYXRlQmVoYXZpb3IuJGluamVjdCA9IFsnZXZlbnRCdXMnXTtcblxuY2xhc3MgT3B0aW9uc1NvdXJjZUJlaGF2aW9yIGV4dGVuZHMgQ29tbWFuZEludGVyY2VwdG9yIHtcbiAgY29uc3RydWN0b3IoZXZlbnRCdXMpIHtcbiAgICBzdXBlcihldmVudEJ1cyk7XG5cbiAgICAvKipcbiAgICAgKiBDbGVhbnVwIHByb3BlcnRpZXMgb24gY2hhbmdpbmcgdGhlIHZhbHVlcyBzb3VyY2UuXG4gICAgICpcbiAgICAgKiAxKSBSZW1vdmUgb3RoZXIgc291cmNlcywgZS5nLiBzZXQgYHZhbHVlc2AgPT4gcmVtb3ZlIGB2YWx1ZXNLZXlgIGFuZCBgdmFsdWVzRXhwcmVzc2lvbmBcbiAgICAgKiAyKSBSZW1vdmUgZGVmYXVsdCB2YWx1ZXMgZm9yIGFsbCBvdGhlciB2YWx1ZXMgc291cmNlc1xuICAgICAqL1xuICAgIHRoaXMucHJlRXhlY3V0ZSgnZm9ybUZpZWxkLmVkaXQnLCBmdW5jdGlvbiAoY29udGV4dCkge1xuICAgICAgY29uc3Qge1xuICAgICAgICBwcm9wZXJ0aWVzXG4gICAgICB9ID0gY29udGV4dDtcbiAgICAgIGNvbnN0IG5ld1Byb3BlcnRpZXMgPSB7fTtcbiAgICAgIGlmICghaXNWYWx1ZXNTb3VyY2VVcGRhdGUocHJvcGVydGllcykpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBjbGVhbiB1cCB2YWx1ZSBzb3VyY2VzIHRoYXQgYXJlIG5vdCB0byBnb2luZyB0byBiZSBzZXRcbiAgICAgIE9iamVjdC52YWx1ZXMoT1BUSU9OU19TT1VSQ0VTKS5mb3JFYWNoKHNvdXJjZSA9PiB7XG4gICAgICAgIGNvbnN0IHBhdGggPSBPUFRJT05TX1NPVVJDRVNfUEFUSFNbc291cmNlXTtcbiAgICAgICAgaWYgKGdldChwcm9wZXJ0aWVzLCBwYXRoKSA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBuZXdQcm9wZXJ0aWVzW09QVElPTlNfU09VUkNFU19QQVRIU1tzb3VyY2VdXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIGNsZWFuIHVwIGRlZmF1bHQgdmFsdWVcbiAgICAgIGlmIChnZXQocHJvcGVydGllcywgT1BUSU9OU19TT1VSQ0VTX1BBVEhTW09QVElPTlNfU09VUkNFUy5FWFBSRVNTSU9OXSkgIT09IHVuZGVmaW5lZCB8fCBnZXQocHJvcGVydGllcywgT1BUSU9OU19TT1VSQ0VTX1BBVEhTW09QVElPTlNfU09VUkNFUy5JTlBVVF0pICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgbmV3UHJvcGVydGllc1snZGVmYXVsdFZhbHVlJ10gPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICBjb250ZXh0LnByb3BlcnRpZXMgPSB7XG4gICAgICAgIC4uLnByb3BlcnRpZXMsXG4gICAgICAgIC4uLm5ld1Byb3BlcnRpZXNcbiAgICAgIH07XG4gICAgfSwgdHJ1ZSk7XG4gIH1cbn1cbk9wdGlvbnNTb3VyY2VCZWhhdmlvci4kaW5qZWN0ID0gWydldmVudEJ1cyddO1xuXG4vLyBoZWxwZXIgLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG5mdW5jdGlvbiBpc1ZhbHVlc1NvdXJjZVVwZGF0ZShwcm9wZXJ0aWVzKSB7XG4gIHJldHVybiBPYmplY3QudmFsdWVzKE9QVElPTlNfU09VUkNFU19QQVRIUykuc29tZShwYXRoID0+IHtcbiAgICByZXR1cm4gZ2V0KHByb3BlcnRpZXMsIHBhdGgpICE9PSB1bmRlZmluZWQ7XG4gIH0pO1xufVxuXG5jb25zdCBDT0xVTU5TX1NPVVJDRV9QUk9QRVJUSUVTID0ge1xuICBjb2x1bW5zOiAnY29sdW1ucycsXG4gIGNvbHVtbnNFeHByZXNzaW9uOiAnY29sdW1uc0V4cHJlc3Npb24nXG59O1xuY2xhc3MgQ29sdW1uc1NvdXJjZUJlaGF2aW9yIGV4dGVuZHMgQ29tbWFuZEludGVyY2VwdG9yIHtcbiAgY29uc3RydWN0b3IoZXZlbnRCdXMpIHtcbiAgICBzdXBlcihldmVudEJ1cyk7XG4gICAgdGhpcy5wcmVFeGVjdXRlKCdmb3JtRmllbGQuZWRpdCcsIGZ1bmN0aW9uIChjb250ZXh0KSB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIHByb3BlcnRpZXMsXG4gICAgICAgIG9sZFByb3BlcnRpZXNcbiAgICAgIH0gPSBjb250ZXh0O1xuICAgICAgY29uc3QgaXNDb2x1bW5Tb3VyY2VVcGRhdGUgPSBPYmplY3QudmFsdWVzKENPTFVNTlNfU09VUkNFX1BST1BFUlRJRVMpLnNvbWUocGF0aCA9PiB7XG4gICAgICAgIHJldHVybiBnZXQocHJvcGVydGllcywgW3BhdGhdKSAhPT0gdW5kZWZpbmVkO1xuICAgICAgfSk7XG4gICAgICBpZiAoIWlzQ29sdW1uU291cmNlVXBkYXRlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGNvbHVtbnMgPSBnZXQocHJvcGVydGllcywgW0NPTFVNTlNfU09VUkNFX1BST1BFUlRJRVMuY29sdW1uc10pO1xuICAgICAgY29uc3Qgb2xkQ29sdW1ucyA9IGdldChvbGRQcm9wZXJ0aWVzLCBbQ09MVU1OU19TT1VSQ0VfUFJPUEVSVElFUy5jb2x1bW5zXSk7XG4gICAgICBjb25zdCBjb2x1bW5zRXhwcmVzc2lvbiA9IGdldChwcm9wZXJ0aWVzLCBbQ09MVU1OU19TT1VSQ0VfUFJPUEVSVElFUy5jb2x1bW5zRXhwcmVzc2lvbl0pO1xuICAgICAgY29uc3Qgb2xkQ29sdW1uc0V4cHJlc3Npb24gPSBnZXQob2xkUHJvcGVydGllcywgW0NPTFVNTlNfU09VUkNFX1BST1BFUlRJRVMuY29sdW1uc0V4cHJlc3Npb25dKTtcbiAgICAgIGlmIChpc0FycmF5KGNvbHVtbnMpICYmICFpc0RlZmluZWQob2xkQ29sdW1ucykpIHtcbiAgICAgICAgY29udGV4dC5wcm9wZXJ0aWVzID0ge1xuICAgICAgICAgIC4uLnByb3BlcnRpZXMsXG4gICAgICAgICAgY29sdW1uc0V4cHJlc3Npb246IHVuZGVmaW5lZFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoaXNTdHJpbmcoY29sdW1uc0V4cHJlc3Npb24pICYmICFpc1N0cmluZyhvbGRDb2x1bW5zRXhwcmVzc2lvbikpIHtcbiAgICAgICAgY29udGV4dC5wcm9wZXJ0aWVzID0ge1xuICAgICAgICAgIC4uLnByb3BlcnRpZXMsXG4gICAgICAgICAgY29sdW1uczogdW5kZWZpbmVkXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9LCB0cnVlKTtcbiAgfVxufVxuQ29sdW1uc1NvdXJjZUJlaGF2aW9yLiRpbmplY3QgPSBbJ2V2ZW50QnVzJ107XG5cbmNsYXNzIFRhYmxlRGF0YVNvdXJjZUJlaGF2aW9yIGV4dGVuZHMgQ29tbWFuZEludGVyY2VwdG9yIHtcbiAgY29uc3RydWN0b3IoZXZlbnRCdXMpIHtcbiAgICBzdXBlcihldmVudEJ1cyk7XG4gICAgdGhpcy5wcmVFeGVjdXRlKCdmb3JtRmllbGQuYWRkJywgZnVuY3Rpb24gKGNvbnRleHQpIHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgZm9ybUZpZWxkXG4gICAgICB9ID0gY29udGV4dDtcbiAgICAgIGlmIChnZXQoZm9ybUZpZWxkLCBbJ3R5cGUnXSkgIT09ICd0YWJsZScpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29udGV4dC5mb3JtRmllbGQgPSB7XG4gICAgICAgIC4uLmZvcm1GaWVsZCxcbiAgICAgICAgZGF0YVNvdXJjZTogYD0ke2Zvcm1GaWVsZC5pZH1gXG4gICAgICB9O1xuICAgIH0sIHRydWUpO1xuICB9XG59XG5UYWJsZURhdGFTb3VyY2VCZWhhdmlvci4kaW5qZWN0ID0gWydldmVudEJ1cyddO1xuXG5jb25zdCBCZWhhdmlvck1vZHVsZSA9IHtcbiAgX19pbml0X186IFsnaWRCZWhhdmlvcicsICdrZXlCZWhhdmlvcicsICdwYXRoQmVoYXZpb3InLCAndmFsaWRhdGVCZWhhdmlvcicsICdvcHRpb25zU291cmNlQmVoYXZpb3InLCAnY29sdW1uc1NvdXJjZUJlaGF2aW9yJywgJ3RhYmxlRGF0YVNvdXJjZUJlaGF2aW9yJ10sXG4gIGlkQmVoYXZpb3I6IFsndHlwZScsIElkQmVoYXZpb3JdLFxuICBrZXlCZWhhdmlvcjogWyd0eXBlJywgS2V5QmVoYXZpb3JdLFxuICBwYXRoQmVoYXZpb3I6IFsndHlwZScsIFBhdGhCZWhhdmlvcl0sXG4gIHZhbGlkYXRlQmVoYXZpb3I6IFsndHlwZScsIFZhbGlkYXRlQmVoYXZpb3JdLFxuICBvcHRpb25zU291cmNlQmVoYXZpb3I6IFsndHlwZScsIE9wdGlvbnNTb3VyY2VCZWhhdmlvcl0sXG4gIGNvbHVtbnNTb3VyY2VCZWhhdmlvcjogWyd0eXBlJywgQ29sdW1uc1NvdXJjZUJlaGF2aW9yXSxcbiAgdGFibGVEYXRhU291cmNlQmVoYXZpb3I6IFsndHlwZScsIFRhYmxlRGF0YVNvdXJjZUJlaGF2aW9yXVxufTtcblxuZnVuY3Rpb24gYXJyYXlBZGQkMShhcnJheSwgaW5kZXgsIGl0ZW0pIHtcbiAgYXJyYXkuc3BsaWNlKGluZGV4LCAwLCBpdGVtKTtcbiAgcmV0dXJuIGFycmF5O1xufVxuZnVuY3Rpb24gYXJyYXlSZW1vdmUoYXJyYXksIGluZGV4KSB7XG4gIGFycmF5LnNwbGljZShpbmRleCwgMSk7XG4gIHJldHVybiBhcnJheTtcbn1cbmZ1bmN0aW9uIHVwZGF0ZVBhdGgoZm9ybUZpZWxkUmVnaXN0cnksIGZvcm1GaWVsZCwgaW5kZXgpIHtcbiAgY29uc3QgcGFyZW50ID0gZm9ybUZpZWxkUmVnaXN0cnkuZ2V0KGZvcm1GaWVsZC5fcGFyZW50KTtcbiAgcmVmcmVzaFBhdGhzUmVjdXJzaXZlbHkoZm9ybUZpZWxkLCBbLi4ucGFyZW50Ll9wYXRoLCAnY29tcG9uZW50cycsIGluZGV4XSk7XG4gIHJldHVybiBmb3JtRmllbGQ7XG59XG5mdW5jdGlvbiByZWZyZXNoUGF0aHNSZWN1cnNpdmVseShmb3JtRmllbGQsIHBhdGgpIHtcbiAgZm9ybUZpZWxkLl9wYXRoID0gcGF0aDtcbiAgY29uc3QgY29tcG9uZW50cyA9IGZvcm1GaWVsZC5jb21wb25lbnRzIHx8IFtdO1xuICBjb21wb25lbnRzLmZvckVhY2goKGNvbXBvbmVudCwgaW5kZXgpID0+IHtcbiAgICByZWZyZXNoUGF0aHNSZWN1cnNpdmVseShjb21wb25lbnQsIFsuLi5wYXRoLCAnY29tcG9uZW50cycsIGluZGV4XSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gdXBkYXRlUm93KGZvcm1GaWVsZCwgcm93SWQpIHtcbiAgZm9ybUZpZWxkLmxheW91dCA9IHtcbiAgICAuLi4oZm9ybUZpZWxkLmxheW91dCB8fCB7fSksXG4gICAgcm93OiByb3dJZFxuICB9O1xuICByZXR1cm4gZm9ybUZpZWxkO1xufVxuXG5jbGFzcyBGb3JtTGF5b3V0VXBkYXRlciBleHRlbmRzIENvbW1hbmRJbnRlcmNlcHRvciB7XG4gIGNvbnN0cnVjdG9yKGV2ZW50QnVzLCBmb3JtTGF5b3V0ZXIsIG1vZGVsaW5nLCBmb3JtRWRpdG9yKSB7XG4gICAgc3VwZXIoZXZlbnRCdXMpO1xuICAgIHRoaXMuX2V2ZW50QnVzID0gZXZlbnRCdXM7XG4gICAgdGhpcy5fZm9ybUxheW91dGVyID0gZm9ybUxheW91dGVyO1xuICAgIHRoaXMuX21vZGVsaW5nID0gbW9kZWxpbmc7XG4gICAgdGhpcy5fZm9ybUVkaXRvciA9IGZvcm1FZGl0b3I7XG5cbiAgICAvLyBAdHMtaWdub3JlXG4gICAgdGhpcy5wcmVFeGVjdXRlKFsnZm9ybUZpZWxkLmFkZCcsICdmb3JtRmllbGQucmVtb3ZlJywgJ2Zvcm1GaWVsZC5tb3ZlJywgJ2lkLnVwZGF0ZUNsYWltJ10sIGV2ZW50ID0+IHRoaXMudXBkYXRlUm93SWRzKGV2ZW50KSk7XG5cbiAgICAvLyB3ZSBuZWVkIHRoYXQgYXMgdGhlIHN0YXRlIGdvdCB1cGRhdGVzXG4gICAgLy8gb24gdGhlIG5leHQgdGljayAobm90IGluIHBvc3QgZXhlY3V0ZSlcbiAgICBldmVudEJ1cy5vbignY2hhbmdlZCcsIGNvbnRleHQgPT4ge1xuICAgICAgY29uc3Qge1xuICAgICAgICBzY2hlbWFcbiAgICAgIH0gPSBjb250ZXh0O1xuICAgICAgdGhpcy51cGRhdGVMYXlvdXQoc2NoZW1hKTtcbiAgICB9KTtcbiAgfVxuICB1cGRhdGVMYXlvdXQoc2NoZW1hKSB7XG4gICAgdGhpcy5fZm9ybUxheW91dGVyLmNsZWFyKCk7XG4gICAgdGhpcy5fZm9ybUxheW91dGVyLmNhbGN1bGF0ZUxheW91dChjbG9uZShzY2hlbWEpKTtcbiAgfVxuICB1cGRhdGVSb3dJZHMoZXZlbnQpIHtcbiAgICBjb25zdCB7XG4gICAgICBzY2hlbWFcbiAgICB9ID0gdGhpcy5fZm9ybUVkaXRvci5fZ2V0U3RhdGUoKTtcbiAgICBjb25zdCBzZXRSb3dJZHMgPSBwYXJlbnQgPT4ge1xuICAgICAgaWYgKCFwYXJlbnQuY29tcG9uZW50cyB8fCAhcGFyZW50LmNvbXBvbmVudHMubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHBhcmVudC5jb21wb25lbnRzLmZvckVhY2goZm9ybUZpZWxkID0+IHtcbiAgICAgICAgY29uc3Qgcm93ID0gdGhpcy5fZm9ybUxheW91dGVyLmdldFJvd0ZvckZpZWxkKGZvcm1GaWVsZCk7XG4gICAgICAgIHVwZGF0ZVJvdyhmb3JtRmllbGQsIHJvdy5pZCk7XG5cbiAgICAgICAgLy8gaGFuZGxlIGNoaWxkcmVuIHJlY3Vyc2l2ZWx5XG4gICAgICAgIHNldFJvd0lkcyhmb3JtRmllbGQpO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8vIG1ha2Ugc3VyZSByb3dzIGFyZSBwZXJzaXN0ZWQgaW4gc2NoZW1hIChlLmcuIGZvciBtaWdyYXRpb24gY2FzZSlcbiAgICBzZXRSb3dJZHMoc2NoZW1hKTtcbiAgfVxufVxuRm9ybUxheW91dFVwZGF0ZXIuJGluamVjdCA9IFsnZXZlbnRCdXMnLCAnZm9ybUxheW91dGVyJywgJ21vZGVsaW5nJywgJ2Zvcm1FZGl0b3InXTtcblxuY2xhc3MgQWRkRm9ybUZpZWxkSGFuZGxlciB7XG4gIC8qKlxuICAgKiBAY29uc3RydWN0b3JcbiAgICogQHBhcmFtIHsgaW1wb3J0KCcuLi8uLi8uLi9Gb3JtRWRpdG9yJykuRm9ybUVkaXRvciB9IGZvcm1FZGl0b3JcbiAgICogQHBhcmFtIHsgaW1wb3J0KCcuLi8uLi8uLi9jb3JlL0Zvcm1GaWVsZFJlZ2lzdHJ5JykuRm9ybUZpZWxkUmVnaXN0cnkgfSBmb3JtRmllbGRSZWdpc3RyeVxuICAgKi9cbiAgY29uc3RydWN0b3IoZm9ybUVkaXRvciwgZm9ybUZpZWxkUmVnaXN0cnkpIHtcbiAgICB0aGlzLl9mb3JtRWRpdG9yID0gZm9ybUVkaXRvcjtcbiAgICB0aGlzLl9mb3JtRmllbGRSZWdpc3RyeSA9IGZvcm1GaWVsZFJlZ2lzdHJ5O1xuICB9XG4gIGV4ZWN1dGUoY29udGV4dCkge1xuICAgIGNvbnN0IHtcbiAgICAgIGZvcm1GaWVsZCxcbiAgICAgIHRhcmdldEZvcm1GaWVsZCxcbiAgICAgIHRhcmdldEluZGV4XG4gICAgfSA9IGNvbnRleHQ7XG4gICAgY29uc3Qge1xuICAgICAgc2NoZW1hXG4gICAgfSA9IHRoaXMuX2Zvcm1FZGl0b3IuX2dldFN0YXRlKCk7XG4gICAgY29uc3QgdGFyZ2V0UGF0aCA9IFsuLi50YXJnZXRGb3JtRmllbGQuX3BhdGgsICdjb21wb25lbnRzJ107XG4gICAgZm9ybUZpZWxkLl9wYXJlbnQgPSB0YXJnZXRGb3JtRmllbGQuaWQ7XG5cbiAgICAvLyAoMSkgQWRkIG5ldyBmb3JtIGZpZWxkXG4gICAgYXJyYXlBZGQkMShnZXQoc2NoZW1hLCB0YXJnZXRQYXRoKSwgdGFyZ2V0SW5kZXgsIGZvcm1GaWVsZCk7XG5cbiAgICAvLyAoMikgVXBkYXRlIGludGVybmFsIHBhdGhzIG9mIG5ldyBmb3JtIGZpZWxkIGFuZCBpdHMgc2libGluZ3MgKGFuZCB0aGVpciBjaGlsZHJlbilcbiAgICBnZXQoc2NoZW1hLCB0YXJnZXRQYXRoKS5mb3JFYWNoKChmb3JtRmllbGQsIGluZGV4KSA9PiB1cGRhdGVQYXRoKHRoaXMuX2Zvcm1GaWVsZFJlZ2lzdHJ5LCBmb3JtRmllbGQsIGluZGV4KSk7XG5cbiAgICAvLyAoMykgQWRkIG5ldyBmb3JtIGZpZWxkIHRvIGZvcm0gZmllbGQgcmVnaXN0cnlcbiAgICB0aGlzLl9mb3JtRmllbGRSZWdpc3RyeS5hZGQoZm9ybUZpZWxkKTtcblxuICAgIC8vIFRPRE86IENyZWF0ZSB1cGRhdGVyL2NoYW5nZSBzdXBwb3J0IHRoYXQgYXV0b21hdGljYWxseSB1cGRhdGVzIHBhdGhzIGFuZCBzY2hlbWEgb24gY29tbWFuZCBleGVjdXRpb25cbiAgICB0aGlzLl9mb3JtRWRpdG9yLl9zZXRTdGF0ZSh7XG4gICAgICBzY2hlbWFcbiAgICB9KTtcbiAgfVxuICByZXZlcnQoY29udGV4dCkge1xuICAgIGNvbnN0IHtcbiAgICAgIGZvcm1GaWVsZCxcbiAgICAgIHRhcmdldEZvcm1GaWVsZCxcbiAgICAgIHRhcmdldEluZGV4XG4gICAgfSA9IGNvbnRleHQ7XG4gICAgY29uc3Qge1xuICAgICAgc2NoZW1hXG4gICAgfSA9IHRoaXMuX2Zvcm1FZGl0b3IuX2dldFN0YXRlKCk7XG4gICAgY29uc3QgdGFyZ2V0UGF0aCA9IFsuLi50YXJnZXRGb3JtRmllbGQuX3BhdGgsICdjb21wb25lbnRzJ107XG5cbiAgICAvLyAoMSkgUmVtb3ZlIG5ldyBmb3JtIGZpZWxkXG4gICAgYXJyYXlSZW1vdmUoZ2V0KHNjaGVtYSwgdGFyZ2V0UGF0aCksIHRhcmdldEluZGV4KTtcblxuICAgIC8vICgyKSBVcGRhdGUgaW50ZXJuYWwgcGF0aHMgb2YgbmV3IGZvcm0gZmllbGQgYW5kIGl0cyBzaWJsaW5ncyAoYW5kIHRoZWlyIGNoaWxkcmVuKVxuICAgIGdldChzY2hlbWEsIHRhcmdldFBhdGgpLmZvckVhY2goKGZvcm1GaWVsZCwgaW5kZXgpID0+IHVwZGF0ZVBhdGgodGhpcy5fZm9ybUZpZWxkUmVnaXN0cnksIGZvcm1GaWVsZCwgaW5kZXgpKTtcblxuICAgIC8vICgzKSBSZW1vdmUgbmV3IGZvcm0gZmllbGQgZnJvbSBmb3JtIGZpZWxkIHJlZ2lzdHJ5XG4gICAgdGhpcy5fZm9ybUZpZWxkUmVnaXN0cnkucmVtb3ZlKGZvcm1GaWVsZCk7XG5cbiAgICAvLyBUT0RPOiBDcmVhdGUgdXBkYXRlci9jaGFuZ2Ugc3VwcG9ydCB0aGF0IGF1dG9tYXRpY2FsbHkgdXBkYXRlcyBwYXRocyBhbmQgc2NoZW1hIG9uIGNvbW1hbmQgZXhlY3V0aW9uXG4gICAgdGhpcy5fZm9ybUVkaXRvci5fc2V0U3RhdGUoe1xuICAgICAgc2NoZW1hXG4gICAgfSk7XG4gIH1cbn1cbkFkZEZvcm1GaWVsZEhhbmRsZXIuJGluamVjdCA9IFsnZm9ybUVkaXRvcicsICdmb3JtRmllbGRSZWdpc3RyeSddO1xuXG5jbGFzcyBFZGl0Rm9ybUZpZWxkSGFuZGxlciB7XG4gIC8qKlxuICAgKiBAY29uc3RydWN0b3JcbiAgICogQHBhcmFtIHsgaW1wb3J0KCcuLi8uLi8uLi9Gb3JtRWRpdG9yJykuRm9ybUVkaXRvciB9IGZvcm1FZGl0b3JcbiAgICogQHBhcmFtIHsgaW1wb3J0KCcuLi8uLi8uLi9jb3JlL0Zvcm1GaWVsZFJlZ2lzdHJ5JykuRm9ybUZpZWxkUmVnaXN0cnkgfSBmb3JtRmllbGRSZWdpc3RyeVxuICAgKi9cbiAgY29uc3RydWN0b3IoZm9ybUVkaXRvciwgZm9ybUZpZWxkUmVnaXN0cnkpIHtcbiAgICB0aGlzLl9mb3JtRWRpdG9yID0gZm9ybUVkaXRvcjtcbiAgICB0aGlzLl9mb3JtRmllbGRSZWdpc3RyeSA9IGZvcm1GaWVsZFJlZ2lzdHJ5O1xuICB9XG4gIGV4ZWN1dGUoY29udGV4dCkge1xuICAgIGNvbnN0IHtcbiAgICAgIGZvcm1GaWVsZCxcbiAgICAgIHByb3BlcnRpZXNcbiAgICB9ID0gY29udGV4dDtcbiAgICBsZXQge1xuICAgICAgc2NoZW1hXG4gICAgfSA9IHRoaXMuX2Zvcm1FZGl0b3IuX2dldFN0YXRlKCk7XG4gICAgY29uc3Qgb2xkUHJvcGVydGllcyA9IHt9O1xuICAgIGZvciAobGV0IGtleSBpbiBwcm9wZXJ0aWVzKSB7XG4gICAgICBvbGRQcm9wZXJ0aWVzW2tleV0gPSBmb3JtRmllbGRba2V5XTtcbiAgICAgIGNvbnN0IHByb3BlcnR5ID0gcHJvcGVydGllc1trZXldO1xuICAgICAgaWYgKGtleSA9PT0gJ2lkJykge1xuICAgICAgICBpZiAocHJvcGVydHkgIT09IGZvcm1GaWVsZC5pZCkge1xuICAgICAgICAgIHRoaXMuX2Zvcm1GaWVsZFJlZ2lzdHJ5LnVwZGF0ZUlkKGZvcm1GaWVsZCwgcHJvcGVydHkpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3JtRmllbGRba2V5XSA9IHByb3BlcnR5O1xuICAgICAgfVxuICAgIH1cbiAgICBjb250ZXh0Lm9sZFByb3BlcnRpZXMgPSBvbGRQcm9wZXJ0aWVzO1xuXG4gICAgLy8gVE9ETzogQ3JlYXRlIHVwZGF0ZXIvY2hhbmdlIHN1cHBvcnQgdGhhdCBhdXRvbWF0aWNhbGx5IHVwZGF0ZXMgcGF0aHMgYW5kIHNjaGVtYSBvbiBjb21tYW5kIGV4ZWN1dGlvblxuICAgIHRoaXMuX2Zvcm1FZGl0b3IuX3NldFN0YXRlKHtcbiAgICAgIHNjaGVtYVxuICAgIH0pO1xuICAgIHJldHVybiBmb3JtRmllbGQ7XG4gIH1cbiAgcmV2ZXJ0KGNvbnRleHQpIHtcbiAgICBjb25zdCB7XG4gICAgICBmb3JtRmllbGQsXG4gICAgICBvbGRQcm9wZXJ0aWVzXG4gICAgfSA9IGNvbnRleHQ7XG4gICAgbGV0IHtcbiAgICAgIHNjaGVtYVxuICAgIH0gPSB0aGlzLl9mb3JtRWRpdG9yLl9nZXRTdGF0ZSgpO1xuICAgIGZvciAobGV0IGtleSBpbiBvbGRQcm9wZXJ0aWVzKSB7XG4gICAgICBjb25zdCBwcm9wZXJ0eSA9IG9sZFByb3BlcnRpZXNba2V5XTtcbiAgICAgIGlmIChrZXkgPT09ICdpZCcpIHtcbiAgICAgICAgaWYgKHByb3BlcnR5ICE9PSBmb3JtRmllbGQuaWQpIHtcbiAgICAgICAgICB0aGlzLl9mb3JtRmllbGRSZWdpc3RyeS51cGRhdGVJZChmb3JtRmllbGQsIHByb3BlcnR5KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9ybUZpZWxkW2tleV0gPSBwcm9wZXJ0eTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBUT0RPOiBDcmVhdGUgdXBkYXRlci9jaGFuZ2Ugc3VwcG9ydCB0aGF0IGF1dG9tYXRpY2FsbHkgdXBkYXRlcyBwYXRocyBhbmQgc2NoZW1hIG9uIGNvbW1hbmQgZXhlY3V0aW9uXG4gICAgdGhpcy5fZm9ybUVkaXRvci5fc2V0U3RhdGUoe1xuICAgICAgc2NoZW1hXG4gICAgfSk7XG4gICAgcmV0dXJuIGZvcm1GaWVsZDtcbiAgfVxufVxuRWRpdEZvcm1GaWVsZEhhbmRsZXIuJGluamVjdCA9IFsnZm9ybUVkaXRvcicsICdmb3JtRmllbGRSZWdpc3RyeSddO1xuXG5jbGFzcyBNb3ZlRm9ybUZpZWxkSGFuZGxlciB7XG4gIC8qKlxuICAgKiBAY29uc3RydWN0b3JcbiAgICogQHBhcmFtIHsgaW1wb3J0KCcuLi8uLi8uLi9Gb3JtRWRpdG9yJykuRm9ybUVkaXRvciB9IGZvcm1FZGl0b3JcbiAgICogQHBhcmFtIHsgaW1wb3J0KCcuLi8uLi8uLi9jb3JlL0Zvcm1GaWVsZFJlZ2lzdHJ5JykuRm9ybUZpZWxkUmVnaXN0cnkgfSBmb3JtRmllbGRSZWdpc3RyeVxuICAgKiBAcGFyYW0geyBpbXBvcnQoJ0BicG1uLWlvL2Zvcm0tanMtdmlld2VyJykuUGF0aFJlZ2lzdHJ5IH0gcGF0aFJlZ2lzdHJ5XG4gICAqIEBwYXJhbSB7IGltcG9ydCgnQGJwbW4taW8vZm9ybS1qcy12aWV3ZXInKS5Gb3JtTGF5b3V0ZXIgfSBmb3JtTGF5b3V0ZXJcbiAgICovXG4gIGNvbnN0cnVjdG9yKGZvcm1FZGl0b3IsIGZvcm1GaWVsZFJlZ2lzdHJ5LCBwYXRoUmVnaXN0cnksIGZvcm1MYXlvdXRlcikge1xuICAgIHRoaXMuX2Zvcm1FZGl0b3IgPSBmb3JtRWRpdG9yO1xuICAgIHRoaXMuX2Zvcm1GaWVsZFJlZ2lzdHJ5ID0gZm9ybUZpZWxkUmVnaXN0cnk7XG4gICAgdGhpcy5fcGF0aFJlZ2lzdHJ5ID0gcGF0aFJlZ2lzdHJ5O1xuICAgIHRoaXMuX2Zvcm1MYXlvdXRlciA9IGZvcm1MYXlvdXRlcjtcbiAgfVxuICBleGVjdXRlKGNvbnRleHQpIHtcbiAgICB0aGlzLm1vdmVGb3JtRmllbGQoY29udGV4dCk7XG4gIH1cbiAgcmV2ZXJ0KGNvbnRleHQpIHtcbiAgICBsZXQge1xuICAgICAgc291cmNlRm9ybUZpZWxkLFxuICAgICAgdGFyZ2V0Rm9ybUZpZWxkLFxuICAgICAgc291cmNlSW5kZXgsXG4gICAgICB0YXJnZXRJbmRleCxcbiAgICAgIHNvdXJjZVJvdyxcbiAgICAgIHRhcmdldFJvd1xuICAgIH0gPSBjb250ZXh0O1xuICAgIHRoaXMubW92ZUZvcm1GaWVsZCh7XG4gICAgICBzb3VyY2VGb3JtRmllbGQ6IHRhcmdldEZvcm1GaWVsZCxcbiAgICAgIHRhcmdldEZvcm1GaWVsZDogc291cmNlRm9ybUZpZWxkLFxuICAgICAgc291cmNlSW5kZXg6IHRhcmdldEluZGV4LFxuICAgICAgdGFyZ2V0SW5kZXg6IHNvdXJjZUluZGV4LFxuICAgICAgc291cmNlUm93OiB0YXJnZXRSb3csXG4gICAgICB0YXJnZXRSb3c6IHNvdXJjZVJvd1xuICAgIH0sIHRydWUpO1xuICB9XG4gIG1vdmVGb3JtRmllbGQoY29udGV4dCwgcmV2ZXJ0KSB7XG4gICAgbGV0IHtcbiAgICAgIHNvdXJjZUZvcm1GaWVsZCxcbiAgICAgIHRhcmdldEZvcm1GaWVsZCxcbiAgICAgIHNvdXJjZUluZGV4LFxuICAgICAgdGFyZ2V0SW5kZXgsXG4gICAgICB0YXJnZXRSb3dcbiAgICB9ID0gY29udGV4dDtcbiAgICBsZXQge1xuICAgICAgc2NoZW1hXG4gICAgfSA9IHRoaXMuX2Zvcm1FZGl0b3IuX2dldFN0YXRlKCk7XG4gICAgY29uc3Qgc291cmNlUGF0aCA9IFsuLi5zb3VyY2VGb3JtRmllbGQuX3BhdGgsICdjb21wb25lbnRzJ107XG4gICAgaWYgKHNvdXJjZUZvcm1GaWVsZC5pZCA9PT0gdGFyZ2V0Rm9ybUZpZWxkLmlkKSB7XG4gICAgICBpZiAocmV2ZXJ0KSB7XG4gICAgICAgIGlmIChzb3VyY2VJbmRleCA+IHRhcmdldEluZGV4KSB7XG4gICAgICAgICAgc291cmNlSW5kZXgtLTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHNvdXJjZUluZGV4IDwgdGFyZ2V0SW5kZXgpIHtcbiAgICAgICAgICB0YXJnZXRJbmRleC0tO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zdCBmb3JtRmllbGQgPSBnZXQoc2NoZW1hLCBbLi4uc291cmNlUGF0aCwgc291cmNlSW5kZXhdKTtcblxuICAgICAgLy8gKDEpIEFkZCB0byByb3cgb3IgY3JlYXRlIG5ldyBvbmVcbiAgICAgIHVwZGF0ZVJvdyhmb3JtRmllbGQsIHRhcmdldFJvdyA/IHRhcmdldFJvdy5pZCA6IHRoaXMuX2Zvcm1MYXlvdXRlci5uZXh0Um93SWQoKSk7XG5cbiAgICAgIC8vICgyKSBNb3ZlIGZvcm0gZmllbGRcbiAgICAgIGFycmF5TW92ZU11dGFibGUoZ2V0KHNjaGVtYSwgc291cmNlUGF0aCksIHNvdXJjZUluZGV4LCB0YXJnZXRJbmRleCk7XG5cbiAgICAgIC8vICgzKSBVcGRhdGUgaW50ZXJuYWwgcGF0aHMgb2YgbmV3IGZvcm0gZmllbGQgYW5kIGl0cyBzaWJsaW5ncyAoYW5kIHRoZWlyIGNoaWxkcmVuKVxuICAgICAgZ2V0KHNjaGVtYSwgc291cmNlUGF0aCkuZm9yRWFjaCgoZm9ybUZpZWxkLCBpbmRleCkgPT4gdXBkYXRlUGF0aCh0aGlzLl9mb3JtRmllbGRSZWdpc3RyeSwgZm9ybUZpZWxkLCBpbmRleCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBmb3JtRmllbGQgPSBnZXQoc2NoZW1hLCBbLi4uc291cmNlUGF0aCwgc291cmNlSW5kZXhdKTtcblxuICAgICAgLy8gKDEpIERlcmVnaXN0ZXIgZm9ybSBmaWVsZCAoYW5kIGNoaWxkcmVuKSBmcm9tIHBhdGggcmVnaXN0cnlcbiAgICAgIHRoaXMuX3BhdGhSZWdpc3RyeS5leGVjdXRlUmVjdXJzaXZlbHlPbkZpZWxkcyhmb3JtRmllbGQsICh7XG4gICAgICAgIGZpZWxkXG4gICAgICB9KSA9PiB7XG4gICAgICAgIHRoaXMuX3BhdGhSZWdpc3RyeS51bmNsYWltUGF0aCh0aGlzLl9wYXRoUmVnaXN0cnkuZ2V0VmFsdWVQYXRoKGZpZWxkKSk7XG4gICAgICB9KTtcbiAgICAgIGZvcm1GaWVsZC5fcGFyZW50ID0gdGFyZ2V0Rm9ybUZpZWxkLmlkO1xuXG4gICAgICAvLyAoMikgUmVtb3ZlIGZvcm0gZmllbGRcbiAgICAgIGFycmF5UmVtb3ZlKGdldChzY2hlbWEsIHNvdXJjZVBhdGgpLCBzb3VyY2VJbmRleCk7XG5cbiAgICAgIC8vICgzKSBVcGRhdGUgaW50ZXJuYWwgcGF0aHMgb2Ygc2libGluZ3MgKGFuZCB0aGVpciBjaGlsZHJlbilcbiAgICAgIGdldChzY2hlbWEsIHNvdXJjZVBhdGgpLmZvckVhY2goKGZvcm1GaWVsZCwgaW5kZXgpID0+IHVwZGF0ZVBhdGgodGhpcy5fZm9ybUZpZWxkUmVnaXN0cnksIGZvcm1GaWVsZCwgaW5kZXgpKTtcbiAgICAgIGNvbnN0IHRhcmdldFBhdGggPSBbLi4udGFyZ2V0Rm9ybUZpZWxkLl9wYXRoLCAnY29tcG9uZW50cyddO1xuXG4gICAgICAvLyAoNCkgQWRkIHRvIHJvdyBvciBjcmVhdGUgbmV3IG9uZVxuICAgICAgdXBkYXRlUm93KGZvcm1GaWVsZCwgdGFyZ2V0Um93ID8gdGFyZ2V0Um93LmlkIDogdGhpcy5fZm9ybUxheW91dGVyLm5leHRSb3dJZCgpKTtcblxuICAgICAgLy8gKDUpIEFkZCBmb3JtIGZpZWxkXG4gICAgICBhcnJheUFkZCQxKGdldChzY2hlbWEsIHRhcmdldFBhdGgpLCB0YXJnZXRJbmRleCwgZm9ybUZpZWxkKTtcblxuICAgICAgLy8gKDYpIFVwZGF0ZSBpbnRlcm5hbCBwYXRocyBvZiBzaWJsaW5ncyAoYW5kIHRoZWlyIGNoaWxkcmVuKVxuICAgICAgZ2V0KHNjaGVtYSwgdGFyZ2V0UGF0aCkuZm9yRWFjaCgoZm9ybUZpZWxkLCBpbmRleCkgPT4gdXBkYXRlUGF0aCh0aGlzLl9mb3JtRmllbGRSZWdpc3RyeSwgZm9ybUZpZWxkLCBpbmRleCkpO1xuXG4gICAgICAvLyAoNykgUmVyZWdpc3RlciBmb3JtIGZpZWxkIChhbmQgY2hpbGRyZW4pIGZyb20gcGF0aCByZWdpc3RyeVxuICAgICAgdGhpcy5fcGF0aFJlZ2lzdHJ5LmV4ZWN1dGVSZWN1cnNpdmVseU9uRmllbGRzKGZvcm1GaWVsZCwgKHtcbiAgICAgICAgZmllbGQsXG4gICAgICAgIGlzQ2xvc2VkLFxuICAgICAgICBpc1JlcGVhdGFibGVcbiAgICAgIH0pID0+IHtcbiAgICAgICAgdGhpcy5fcGF0aFJlZ2lzdHJ5LmNsYWltUGF0aCh0aGlzLl9wYXRoUmVnaXN0cnkuZ2V0VmFsdWVQYXRoKGZpZWxkKSwge1xuICAgICAgICAgIGlzQ2xvc2VkLFxuICAgICAgICAgIGlzUmVwZWF0YWJsZSxcbiAgICAgICAgICBjbGFpbWVySWQ6IGZpZWxkLmlkXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gVE9ETzogQ3JlYXRlIHVwZGF0ZXIvY2hhbmdlIHN1cHBvcnQgdGhhdCBhdXRvbWF0aWNhbGx5IHVwZGF0ZXMgcGF0aHMgYW5kIHNjaGVtYSBvbiBjb21tYW5kIGV4ZWN1dGlvblxuICAgIHRoaXMuX2Zvcm1FZGl0b3IuX3NldFN0YXRlKHtcbiAgICAgIHNjaGVtYVxuICAgIH0pO1xuICB9XG59XG5Nb3ZlRm9ybUZpZWxkSGFuZGxlci4kaW5qZWN0ID0gWydmb3JtRWRpdG9yJywgJ2Zvcm1GaWVsZFJlZ2lzdHJ5JywgJ3BhdGhSZWdpc3RyeScsICdmb3JtTGF5b3V0ZXInXTtcblxuY2xhc3MgUmVtb3ZlRm9ybUZpZWxkSGFuZGxlciB7XG4gIC8qKlxuICAgKiBAY29uc3RydWN0b3JcbiAgICogQHBhcmFtIHsgaW1wb3J0KCcuLi8uLi8uLi9Gb3JtRWRpdG9yJykuRm9ybUVkaXRvciB9IGZvcm1FZGl0b3JcbiAgICogQHBhcmFtIHsgaW1wb3J0KCcuLi8uLi8uLi9jb3JlL0Zvcm1GaWVsZFJlZ2lzdHJ5JykuRm9ybUZpZWxkUmVnaXN0cnkgfSBmb3JtRmllbGRSZWdpc3RyeVxuICAgKi9cbiAgY29uc3RydWN0b3IoZm9ybUVkaXRvciwgZm9ybUZpZWxkUmVnaXN0cnkpIHtcbiAgICB0aGlzLl9mb3JtRWRpdG9yID0gZm9ybUVkaXRvcjtcbiAgICB0aGlzLl9mb3JtRmllbGRSZWdpc3RyeSA9IGZvcm1GaWVsZFJlZ2lzdHJ5O1xuICB9XG4gIGV4ZWN1dGUoY29udGV4dCkge1xuICAgIGNvbnN0IHtcbiAgICAgIHNvdXJjZUZvcm1GaWVsZCxcbiAgICAgIHNvdXJjZUluZGV4XG4gICAgfSA9IGNvbnRleHQ7XG4gICAgbGV0IHtcbiAgICAgIHNjaGVtYVxuICAgIH0gPSB0aGlzLl9mb3JtRWRpdG9yLl9nZXRTdGF0ZSgpO1xuICAgIGNvbnN0IHNvdXJjZVBhdGggPSBbLi4uc291cmNlRm9ybUZpZWxkLl9wYXRoLCAnY29tcG9uZW50cyddO1xuICAgIGNvbnN0IGZvcm1GaWVsZCA9IGNvbnRleHQuZm9ybUZpZWxkID0gZ2V0KHNjaGVtYSwgWy4uLnNvdXJjZVBhdGgsIHNvdXJjZUluZGV4XSk7XG5cbiAgICAvLyAoMSkgUmVtb3ZlIGZvcm0gZmllbGRcbiAgICBhcnJheVJlbW92ZShnZXQoc2NoZW1hLCBzb3VyY2VQYXRoKSwgc291cmNlSW5kZXgpO1xuXG4gICAgLy8gKDIpIFVwZGF0ZSBpbnRlcm5hbCBwYXRocyBvZiBpdHMgc2libGluZ3MgKGFuZCB0aGVpciBjaGlsZHJlbilcbiAgICBnZXQoc2NoZW1hLCBzb3VyY2VQYXRoKS5mb3JFYWNoKChmb3JtRmllbGQsIGluZGV4KSA9PiB1cGRhdGVQYXRoKHRoaXMuX2Zvcm1GaWVsZFJlZ2lzdHJ5LCBmb3JtRmllbGQsIGluZGV4KSk7XG5cbiAgICAvLyAoMykgUmVtb3ZlIGZvcm0gZmllbGQgYW5kIGNoaWxkcmVuIGZyb20gZm9ybSBmaWVsZCByZWdpc3RyeVxuICAgIHJ1blJlY3Vyc2l2ZWx5KGZvcm1GaWVsZCwgZm9ybUZpZWxkID0+IHRoaXMuX2Zvcm1GaWVsZFJlZ2lzdHJ5LnJlbW92ZShmb3JtRmllbGQpKTtcblxuICAgIC8vIFRPRE86IENyZWF0ZSB1cGRhdGVyL2NoYW5nZSBzdXBwb3J0IHRoYXQgYXV0b21hdGljYWxseSB1cGRhdGVzIHBhdGhzIGFuZCBzY2hlbWEgb24gY29tbWFuZCBleGVjdXRpb25cbiAgICB0aGlzLl9mb3JtRWRpdG9yLl9zZXRTdGF0ZSh7XG4gICAgICBzY2hlbWFcbiAgICB9KTtcbiAgfVxuICByZXZlcnQoY29udGV4dCkge1xuICAgIGNvbnN0IHtcbiAgICAgIGZvcm1GaWVsZCxcbiAgICAgIHNvdXJjZUZvcm1GaWVsZCxcbiAgICAgIHNvdXJjZUluZGV4XG4gICAgfSA9IGNvbnRleHQ7XG4gICAgbGV0IHtcbiAgICAgIHNjaGVtYVxuICAgIH0gPSB0aGlzLl9mb3JtRWRpdG9yLl9nZXRTdGF0ZSgpO1xuICAgIGNvbnN0IHNvdXJjZVBhdGggPSBbLi4uc291cmNlRm9ybUZpZWxkLl9wYXRoLCAnY29tcG9uZW50cyddO1xuXG4gICAgLy8gKDEpIEFkZCBmb3JtIGZpZWxkXG4gICAgYXJyYXlBZGQkMShnZXQoc2NoZW1hLCBzb3VyY2VQYXRoKSwgc291cmNlSW5kZXgsIGZvcm1GaWVsZCk7XG5cbiAgICAvLyAoMikgVXBkYXRlIGludGVybmFsIHBhdGhzIG9mIGl0cyBzaWJsaW5ncyAoYW5kIHRoZWlyIGNoaWxkcmVuKVxuICAgIGdldChzY2hlbWEsIHNvdXJjZVBhdGgpLmZvckVhY2goKGZvcm1GaWVsZCwgaW5kZXgpID0+IHVwZGF0ZVBhdGgodGhpcy5fZm9ybUZpZWxkUmVnaXN0cnksIGZvcm1GaWVsZCwgaW5kZXgpKTtcblxuICAgIC8vICgzKSBBZGQgZm9ybSBmaWVsZCBhbmQgY2hpbGRyZW4gdG8gZm9ybSBmaWVsZCByZWdpc3RyeVxuICAgIHJ1blJlY3Vyc2l2ZWx5KGZvcm1GaWVsZCwgZm9ybUZpZWxkID0+IHRoaXMuX2Zvcm1GaWVsZFJlZ2lzdHJ5LmFkZChmb3JtRmllbGQpKTtcblxuICAgIC8vIFRPRE86IENyZWF0ZSB1cGRhdGVyL2NoYW5nZSBzdXBwb3J0IHRoYXQgYXV0b21hdGljYWxseSB1cGRhdGVzIHBhdGhzIGFuZCBzY2hlbWEgb24gY29tbWFuZCBleGVjdXRpb25cbiAgICB0aGlzLl9mb3JtRWRpdG9yLl9zZXRTdGF0ZSh7XG4gICAgICBzY2hlbWFcbiAgICB9KTtcbiAgfVxufVxuUmVtb3ZlRm9ybUZpZWxkSGFuZGxlci4kaW5qZWN0ID0gWydmb3JtRWRpdG9yJywgJ2Zvcm1GaWVsZFJlZ2lzdHJ5J107XG5cbmNsYXNzIFVwZGF0ZUlkQ2xhaW1IYW5kbGVyIHtcbiAgLyoqXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKiBAcGFyYW0geyBpbXBvcnQoJy4uLy4uLy4uL2NvcmUvRm9ybUZpZWxkUmVnaXN0cnknKS5Gb3JtRmllbGRSZWdpc3RyeSB9IGZvcm1GaWVsZFJlZ2lzdHJ5XG4gICAqL1xuICBjb25zdHJ1Y3Rvcihmb3JtRmllbGRSZWdpc3RyeSkge1xuICAgIHRoaXMuX2Zvcm1GaWVsZFJlZ2lzdHJ5ID0gZm9ybUZpZWxkUmVnaXN0cnk7XG4gIH1cbiAgZXhlY3V0ZShjb250ZXh0KSB7XG4gICAgY29uc3Qge1xuICAgICAgY2xhaW1pbmcsXG4gICAgICBmb3JtRmllbGQsXG4gICAgICBpZFxuICAgIH0gPSBjb250ZXh0O1xuICAgIGlmIChjbGFpbWluZykge1xuICAgICAgdGhpcy5fZm9ybUZpZWxkUmVnaXN0cnkuX2lkcy5jbGFpbShpZCwgZm9ybUZpZWxkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fZm9ybUZpZWxkUmVnaXN0cnkuX2lkcy51bmNsYWltKGlkKTtcbiAgICB9XG4gIH1cbiAgcmV2ZXJ0KGNvbnRleHQpIHtcbiAgICBjb25zdCB7XG4gICAgICBjbGFpbWluZyxcbiAgICAgIGZvcm1GaWVsZCxcbiAgICAgIGlkXG4gICAgfSA9IGNvbnRleHQ7XG4gICAgaWYgKGNsYWltaW5nKSB7XG4gICAgICB0aGlzLl9mb3JtRmllbGRSZWdpc3RyeS5faWRzLnVuY2xhaW0oaWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9mb3JtRmllbGRSZWdpc3RyeS5faWRzLmNsYWltKGlkLCBmb3JtRmllbGQpO1xuICAgIH1cbiAgfVxufVxuVXBkYXRlSWRDbGFpbUhhbmRsZXIuJGluamVjdCA9IFsnZm9ybUZpZWxkUmVnaXN0cnknXTtcblxuY2xhc3MgVXBkYXRlS2V5Q2xhaW1IYW5kbGVyIHtcbiAgLyoqXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKiBAcGFyYW0geyBpbXBvcnQoJ0BicG1uLWlvL2Zvcm0tanMtdmlld2VyJykuUGF0aFJlZ2lzdHJ5IH0gcGF0aFJlZ2lzdHJ5XG4gICAqL1xuICBjb25zdHJ1Y3RvcihwYXRoUmVnaXN0cnkpIHtcbiAgICB0aGlzLl9wYXRoUmVnaXN0cnkgPSBwYXRoUmVnaXN0cnk7XG4gIH1cbiAgZXhlY3V0ZShjb250ZXh0KSB7XG4gICAgY29uc3Qge1xuICAgICAgY2xhaW1pbmcsXG4gICAgICBmb3JtRmllbGQsXG4gICAgICBrZXlcbiAgICB9ID0gY29udGV4dDtcbiAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgcmVwbGFjZW1lbnRzOiB7XG4gICAgICAgIFtmb3JtRmllbGQuaWRdOiBrZXlcbiAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHZhbHVlUGF0aCA9IHRoaXMuX3BhdGhSZWdpc3RyeS5nZXRWYWx1ZVBhdGgoZm9ybUZpZWxkLCBvcHRpb25zKTtcbiAgICBpZiAoY2xhaW1pbmcpIHtcbiAgICAgIHRoaXMuX3BhdGhSZWdpc3RyeS5jbGFpbVBhdGgodmFsdWVQYXRoLCB7XG4gICAgICAgIGlzQ2xvc2VkOiB0cnVlLFxuICAgICAgICBjbGFpbWVySWQ6IGZvcm1GaWVsZC5pZFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3BhdGhSZWdpc3RyeS51bmNsYWltUGF0aCh2YWx1ZVBhdGgpO1xuICAgIH1cblxuICAgIC8vIGNhY2hlIHBhdGggZm9yIHJldmVydFxuICAgIGNvbnRleHQudmFsdWVQYXRoID0gdmFsdWVQYXRoO1xuICB9XG4gIHJldmVydChjb250ZXh0KSB7XG4gICAgY29uc3Qge1xuICAgICAgY2xhaW1pbmcsXG4gICAgICBmb3JtRmllbGQsXG4gICAgICB2YWx1ZVBhdGhcbiAgICB9ID0gY29udGV4dDtcbiAgICBpZiAoY2xhaW1pbmcpIHtcbiAgICAgIHRoaXMuX3BhdGhSZWdpc3RyeS51bmNsYWltUGF0aCh2YWx1ZVBhdGgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9wYXRoUmVnaXN0cnkuY2xhaW1QYXRoKHZhbHVlUGF0aCwge1xuICAgICAgICBpc0Nsb3NlZDogdHJ1ZSxcbiAgICAgICAgY2xhaW1lcklkOiBmb3JtRmllbGQuaWRcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufVxuVXBkYXRlS2V5Q2xhaW1IYW5kbGVyLiRpbmplY3QgPSBbJ3BhdGhSZWdpc3RyeSddO1xuXG5jbGFzcyBVcGRhdGVQYXRoQ2xhaW1IYW5kbGVyIHtcbiAgLyoqXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKiBAcGFyYW0geyBpbXBvcnQoJ0BicG1uLWlvL2Zvcm0tanMtdmlld2VyJykuUGF0aFJlZ2lzdHJ5IH0gcGF0aFJlZ2lzdHJ5XG4gICAqL1xuICBjb25zdHJ1Y3RvcihwYXRoUmVnaXN0cnkpIHtcbiAgICB0aGlzLl9wYXRoUmVnaXN0cnkgPSBwYXRoUmVnaXN0cnk7XG4gIH1cbiAgZXhlY3V0ZShjb250ZXh0KSB7XG4gICAgY29uc3Qge1xuICAgICAgY2xhaW1pbmcsXG4gICAgICBmb3JtRmllbGQsXG4gICAgICBwYXRoXG4gICAgfSA9IGNvbnRleHQ7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgIHJlcGxhY2VtZW50czoge1xuICAgICAgICBbZm9ybUZpZWxkLmlkXTogcGF0aFxuICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgdmFsdWVQYXRocyA9IFtdO1xuICAgIGlmIChjbGFpbWluZykge1xuICAgICAgdGhpcy5fcGF0aFJlZ2lzdHJ5LmV4ZWN1dGVSZWN1cnNpdmVseU9uRmllbGRzKGZvcm1GaWVsZCwgKHtcbiAgICAgICAgZmllbGQsXG4gICAgICAgIGlzQ2xvc2VkLFxuICAgICAgICBpc1JlcGVhdGFibGVcbiAgICAgIH0pID0+IHtcbiAgICAgICAgY29uc3QgdmFsdWVQYXRoID0gdGhpcy5fcGF0aFJlZ2lzdHJ5LmdldFZhbHVlUGF0aChmaWVsZCwgb3B0aW9ucyk7XG4gICAgICAgIHZhbHVlUGF0aHMucHVzaCh7XG4gICAgICAgICAgdmFsdWVQYXRoLFxuICAgICAgICAgIGlzQ2xvc2VkLFxuICAgICAgICAgIGlzUmVwZWF0YWJsZSxcbiAgICAgICAgICBjbGFpbWVySWQ6IGZpZWxkLmlkXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9wYXRoUmVnaXN0cnkuY2xhaW1QYXRoKHZhbHVlUGF0aCwge1xuICAgICAgICAgIGlzQ2xvc2VkLFxuICAgICAgICAgIGlzUmVwZWF0YWJsZSxcbiAgICAgICAgICBjbGFpbWVySWQ6IGZpZWxkLmlkXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3BhdGhSZWdpc3RyeS5leGVjdXRlUmVjdXJzaXZlbHlPbkZpZWxkcyhmb3JtRmllbGQsICh7XG4gICAgICAgIGZpZWxkLFxuICAgICAgICBpc0Nsb3NlZCxcbiAgICAgICAgaXNSZXBlYXRhYmxlXG4gICAgICB9KSA9PiB7XG4gICAgICAgIGNvbnN0IHZhbHVlUGF0aCA9IHRoaXMuX3BhdGhSZWdpc3RyeS5nZXRWYWx1ZVBhdGgoZmllbGQsIG9wdGlvbnMpO1xuICAgICAgICB2YWx1ZVBhdGhzLnB1c2goe1xuICAgICAgICAgIHZhbHVlUGF0aCxcbiAgICAgICAgICBpc0Nsb3NlZCxcbiAgICAgICAgICBpc1JlcGVhdGFibGUsXG4gICAgICAgICAgY2xhaW1lcklkOiBmaWVsZC5pZFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fcGF0aFJlZ2lzdHJ5LnVuY2xhaW1QYXRoKHZhbHVlUGF0aCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBjYWNoZSBwYXRoIGluZm8gZm9yIHJldmVydFxuICAgIGNvbnRleHQudmFsdWVQYXRocyA9IHZhbHVlUGF0aHM7XG4gIH1cbiAgcmV2ZXJ0KGNvbnRleHQpIHtcbiAgICBjb25zdCB7XG4gICAgICBjbGFpbWluZyxcbiAgICAgIHZhbHVlUGF0aHNcbiAgICB9ID0gY29udGV4dDtcbiAgICBpZiAoY2xhaW1pbmcpIHtcbiAgICAgIHZhbHVlUGF0aHMuZm9yRWFjaCgoe1xuICAgICAgICB2YWx1ZVBhdGhcbiAgICAgIH0pID0+IHtcbiAgICAgICAgdGhpcy5fcGF0aFJlZ2lzdHJ5LnVuY2xhaW1QYXRoKHZhbHVlUGF0aCk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFsdWVQYXRocy5mb3JFYWNoKCh7XG4gICAgICAgIHZhbHVlUGF0aCxcbiAgICAgICAgaXNDbG9zZWQsXG4gICAgICAgIGlzUmVwZWF0YWJsZSxcbiAgICAgICAgY2xhaW1lcklkXG4gICAgICB9KSA9PiB7XG4gICAgICAgIHRoaXMuX3BhdGhSZWdpc3RyeS5jbGFpbVBhdGgodmFsdWVQYXRoLCB7XG4gICAgICAgICAgaXNDbG9zZWQsXG4gICAgICAgICAgaXNSZXBlYXRhYmxlLFxuICAgICAgICAgIGNsYWltZXJJZFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufVxuVXBkYXRlUGF0aENsYWltSGFuZGxlci4kaW5qZWN0ID0gWydwYXRoUmVnaXN0cnknXTtcblxuY2xhc3MgTW9kZWxpbmcge1xuICBjb25zdHJ1Y3Rvcihjb21tYW5kU3RhY2ssIGV2ZW50QnVzLCBmb3JtRWRpdG9yLCBmb3JtRmllbGRSZWdpc3RyeSwgZmllbGRGYWN0b3J5KSB7XG4gICAgdGhpcy5fY29tbWFuZFN0YWNrID0gY29tbWFuZFN0YWNrO1xuICAgIHRoaXMuX2Zvcm1FZGl0b3IgPSBmb3JtRWRpdG9yO1xuICAgIHRoaXMuX2Zvcm1GaWVsZFJlZ2lzdHJ5ID0gZm9ybUZpZWxkUmVnaXN0cnk7XG4gICAgdGhpcy5fZmllbGRGYWN0b3J5ID0gZmllbGRGYWN0b3J5O1xuICAgIGV2ZW50QnVzLm9uKCdmb3JtLmluaXQnLCAoKSA9PiB7XG4gICAgICB0aGlzLnJlZ2lzdGVySGFuZGxlcnMoKTtcbiAgICB9KTtcbiAgfVxuICByZWdpc3RlckhhbmRsZXJzKCkge1xuICAgIE9iamVjdC5lbnRyaWVzKHRoaXMuZ2V0SGFuZGxlcnMoKSkuZm9yRWFjaCgoW2lkLCBoYW5kbGVyXSkgPT4ge1xuICAgICAgdGhpcy5fY29tbWFuZFN0YWNrLnJlZ2lzdGVySGFuZGxlcihpZCwgaGFuZGxlcik7XG4gICAgfSk7XG4gIH1cbiAgZ2V0SGFuZGxlcnMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICdmb3JtRmllbGQuYWRkJzogQWRkRm9ybUZpZWxkSGFuZGxlcixcbiAgICAgICdmb3JtRmllbGQuZWRpdCc6IEVkaXRGb3JtRmllbGRIYW5kbGVyLFxuICAgICAgJ2Zvcm1GaWVsZC5tb3ZlJzogTW92ZUZvcm1GaWVsZEhhbmRsZXIsXG4gICAgICAnZm9ybUZpZWxkLnJlbW92ZSc6IFJlbW92ZUZvcm1GaWVsZEhhbmRsZXIsXG4gICAgICAnaWQudXBkYXRlQ2xhaW0nOiBVcGRhdGVJZENsYWltSGFuZGxlcixcbiAgICAgICdrZXkudXBkYXRlQ2xhaW0nOiBVcGRhdGVLZXlDbGFpbUhhbmRsZXIsXG4gICAgICAncGF0aC51cGRhdGVDbGFpbSc6IFVwZGF0ZVBhdGhDbGFpbUhhbmRsZXJcbiAgICB9O1xuICB9XG4gIGFkZEZvcm1GaWVsZChhdHRycywgdGFyZ2V0Rm9ybUZpZWxkLCB0YXJnZXRJbmRleCkge1xuICAgIGNvbnN0IGZvcm1GaWVsZCA9IHRoaXMuX2ZpZWxkRmFjdG9yeS5jcmVhdGUoYXR0cnMpO1xuICAgIGNvbnN0IGNvbnRleHQgPSB7XG4gICAgICBmb3JtRmllbGQsXG4gICAgICB0YXJnZXRGb3JtRmllbGQsXG4gICAgICB0YXJnZXRJbmRleFxuICAgIH07XG4gICAgdGhpcy5fY29tbWFuZFN0YWNrLmV4ZWN1dGUoJ2Zvcm1GaWVsZC5hZGQnLCBjb250ZXh0KTtcbiAgICByZXR1cm4gZm9ybUZpZWxkO1xuICB9XG4gIGVkaXRGb3JtRmllbGQoZm9ybUZpZWxkLCBwcm9wZXJ0aWVzLCB2YWx1ZSkge1xuICAgIGlmICghaXNPYmplY3QocHJvcGVydGllcykpIHtcbiAgICAgIHByb3BlcnRpZXMgPSB7XG4gICAgICAgIFtwcm9wZXJ0aWVzXTogdmFsdWVcbiAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IGNvbnRleHQgPSB7XG4gICAgICBmb3JtRmllbGQsXG4gICAgICBwcm9wZXJ0aWVzXG4gICAgfTtcbiAgICB0aGlzLl9jb21tYW5kU3RhY2suZXhlY3V0ZSgnZm9ybUZpZWxkLmVkaXQnLCBjb250ZXh0KTtcbiAgfVxuICBtb3ZlRm9ybUZpZWxkKGZvcm1GaWVsZCwgc291cmNlRm9ybUZpZWxkLCB0YXJnZXRGb3JtRmllbGQsIHNvdXJjZUluZGV4LCB0YXJnZXRJbmRleCwgc291cmNlUm93LCB0YXJnZXRSb3cpIHtcbiAgICBjb25zdCBjb250ZXh0ID0ge1xuICAgICAgZm9ybUZpZWxkLFxuICAgICAgc291cmNlRm9ybUZpZWxkLFxuICAgICAgdGFyZ2V0Rm9ybUZpZWxkLFxuICAgICAgc291cmNlSW5kZXgsXG4gICAgICB0YXJnZXRJbmRleCxcbiAgICAgIHNvdXJjZVJvdyxcbiAgICAgIHRhcmdldFJvd1xuICAgIH07XG4gICAgdGhpcy5fY29tbWFuZFN0YWNrLmV4ZWN1dGUoJ2Zvcm1GaWVsZC5tb3ZlJywgY29udGV4dCk7XG4gIH1cbiAgcmVtb3ZlRm9ybUZpZWxkKGZvcm1GaWVsZCwgc291cmNlRm9ybUZpZWxkLCBzb3VyY2VJbmRleCkge1xuICAgIGNvbnN0IGNvbnRleHQgPSB7XG4gICAgICBmb3JtRmllbGQsXG4gICAgICBzb3VyY2VGb3JtRmllbGQsXG4gICAgICBzb3VyY2VJbmRleFxuICAgIH07XG4gICAgdGhpcy5fY29tbWFuZFN0YWNrLmV4ZWN1dGUoJ2Zvcm1GaWVsZC5yZW1vdmUnLCBjb250ZXh0KTtcbiAgfVxuICBjbGFpbUlkKGZvcm1GaWVsZCwgaWQpIHtcbiAgICBjb25zdCBjb250ZXh0ID0ge1xuICAgICAgZm9ybUZpZWxkLFxuICAgICAgaWQsXG4gICAgICBjbGFpbWluZzogdHJ1ZVxuICAgIH07XG4gICAgdGhpcy5fY29tbWFuZFN0YWNrLmV4ZWN1dGUoJ2lkLnVwZGF0ZUNsYWltJywgY29udGV4dCk7XG4gIH1cbiAgdW5jbGFpbUlkKGZvcm1GaWVsZCwgaWQpIHtcbiAgICBjb25zdCBjb250ZXh0ID0ge1xuICAgICAgZm9ybUZpZWxkLFxuICAgICAgaWQsXG4gICAgICBjbGFpbWluZzogZmFsc2VcbiAgICB9O1xuICAgIHRoaXMuX2NvbW1hbmRTdGFjay5leGVjdXRlKCdpZC51cGRhdGVDbGFpbScsIGNvbnRleHQpO1xuICB9XG4gIGNsYWltS2V5KGZvcm1GaWVsZCwga2V5KSB7XG4gICAgY29uc3QgY29udGV4dCA9IHtcbiAgICAgIGZvcm1GaWVsZCxcbiAgICAgIGtleSxcbiAgICAgIGNsYWltaW5nOiB0cnVlXG4gICAgfTtcbiAgICB0aGlzLl9jb21tYW5kU3RhY2suZXhlY3V0ZSgna2V5LnVwZGF0ZUNsYWltJywgY29udGV4dCk7XG4gIH1cbiAgdW5jbGFpbUtleShmb3JtRmllbGQsIGtleSkge1xuICAgIGNvbnN0IGNvbnRleHQgPSB7XG4gICAgICBmb3JtRmllbGQsXG4gICAgICBrZXksXG4gICAgICBjbGFpbWluZzogZmFsc2VcbiAgICB9O1xuICAgIHRoaXMuX2NvbW1hbmRTdGFjay5leGVjdXRlKCdrZXkudXBkYXRlQ2xhaW0nLCBjb250ZXh0KTtcbiAgfVxuICBjbGFpbVBhdGgoZm9ybUZpZWxkLCBwYXRoKSB7XG4gICAgY29uc3QgY29udGV4dCA9IHtcbiAgICAgIGZvcm1GaWVsZCxcbiAgICAgIHBhdGgsXG4gICAgICBjbGFpbWluZzogdHJ1ZVxuICAgIH07XG4gICAgdGhpcy5fY29tbWFuZFN0YWNrLmV4ZWN1dGUoJ3BhdGgudXBkYXRlQ2xhaW0nLCBjb250ZXh0KTtcbiAgfVxuICB1bmNsYWltUGF0aChmb3JtRmllbGQsIHBhdGgpIHtcbiAgICBjb25zdCBjb250ZXh0ID0ge1xuICAgICAgZm9ybUZpZWxkLFxuICAgICAgcGF0aCxcbiAgICAgIGNsYWltaW5nOiBmYWxzZVxuICAgIH07XG4gICAgdGhpcy5fY29tbWFuZFN0YWNrLmV4ZWN1dGUoJ3BhdGgudXBkYXRlQ2xhaW0nLCBjb250ZXh0KTtcbiAgfVxufVxuTW9kZWxpbmcuJGluamVjdCA9IFsnY29tbWFuZFN0YWNrJywgJ2V2ZW50QnVzJywgJ2Zvcm1FZGl0b3InLCAnZm9ybUZpZWxkUmVnaXN0cnknLCAnZmllbGRGYWN0b3J5J107XG5cbmNvbnN0IE1vZGVsaW5nTW9kdWxlID0ge1xuICBfX2RlcGVuZHNfXzogW0JlaGF2aW9yTW9kdWxlLCBjb21tYW5kTW9kdWxlXSxcbiAgX19pbml0X186IFsnZm9ybUxheW91dFVwZGF0ZXInLCAnbW9kZWxpbmcnXSxcbiAgZm9ybUxheW91dFVwZGF0ZXI6IFsndHlwZScsIEZvcm1MYXlvdXRVcGRhdGVyXSxcbiAgbW9kZWxpbmc6IFsndHlwZScsIE1vZGVsaW5nXVxufTtcblxuY2xhc3MgU2VsZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoZXZlbnRCdXMpIHtcbiAgICB0aGlzLl9ldmVudEJ1cyA9IGV2ZW50QnVzO1xuICAgIHRoaXMuX3NlbGVjdGlvbiA9IG51bGw7XG4gIH1cbiAgZ2V0KCkge1xuICAgIHJldHVybiB0aGlzLl9zZWxlY3Rpb247XG4gIH1cbiAgc2V0KHNlbGVjdGlvbikge1xuICAgIGlmICh0aGlzLl9zZWxlY3Rpb24gPT09IHNlbGVjdGlvbikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9zZWxlY3Rpb24gPSBzZWxlY3Rpb247XG4gICAgdGhpcy5fZXZlbnRCdXMuZmlyZSgnc2VsZWN0aW9uLmNoYW5nZWQnLCB7XG4gICAgICBzZWxlY3Rpb246IHRoaXMuX3NlbGVjdGlvblxuICAgIH0pO1xuICB9XG4gIHRvZ2dsZShzZWxlY3Rpb24pIHtcbiAgICBjb25zdCBuZXdTZWxlY3Rpb24gPSB0aGlzLl9zZWxlY3Rpb24gPT09IHNlbGVjdGlvbiA/IG51bGwgOiBzZWxlY3Rpb247XG4gICAgdGhpcy5zZXQobmV3U2VsZWN0aW9uKTtcbiAgfVxuICBjbGVhcigpIHtcbiAgICB0aGlzLnNldChudWxsKTtcbiAgfVxuICBpc1NlbGVjdGVkKGZvcm1GaWVsZCkge1xuICAgIHJldHVybiB0aGlzLl9zZWxlY3Rpb24gPT09IGZvcm1GaWVsZDtcbiAgfVxufVxuU2VsZWN0aW9uLiRpbmplY3QgPSBbJ2V2ZW50QnVzJ107XG5cbmNsYXNzIFNlbGVjdGlvbkJlaGF2aW9yIHtcbiAgY29uc3RydWN0b3IoZXZlbnRCdXMsIHNlbGVjdGlvbikge1xuICAgIGV2ZW50QnVzLm9uKFsnY29tbWFuZFN0YWNrLmZvcm1GaWVsZC5hZGQucG9zdEV4ZWN1dGVkJywgJ2NvbW1hbmRTdGFjay5mb3JtRmllbGQubW92ZS5wb3N0RXhlY3V0ZWQnXSwgKHtcbiAgICAgIGNvbnRleHRcbiAgICB9KSA9PiB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGZvcm1GaWVsZFxuICAgICAgfSA9IGNvbnRleHQ7XG4gICAgICBzZWxlY3Rpb24uc2V0KGZvcm1GaWVsZCk7XG4gICAgfSk7XG4gICAgZXZlbnRCdXMub24oJ2NvbW1hbmRTdGFjay5mb3JtRmllbGQucmVtb3ZlLnBvc3RFeGVjdXRlZCcsICh7XG4gICAgICBjb250ZXh0XG4gICAgfSkgPT4ge1xuICAgICAgY29uc3Qge1xuICAgICAgICBzb3VyY2VGb3JtRmllbGQsXG4gICAgICAgIHNvdXJjZUluZGV4XG4gICAgICB9ID0gY29udGV4dDtcbiAgICAgIGNvbnN0IGZvcm1GaWVsZCA9IHNvdXJjZUZvcm1GaWVsZC5jb21wb25lbnRzW3NvdXJjZUluZGV4XSB8fCBzb3VyY2VGb3JtRmllbGQuY29tcG9uZW50c1tzb3VyY2VJbmRleCAtIDFdO1xuICAgICAgaWYgKGZvcm1GaWVsZCkge1xuICAgICAgICBzZWxlY3Rpb24uc2V0KGZvcm1GaWVsZCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZWxlY3Rpb24uY2xlYXIoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBldmVudEJ1cy5vbignZm9ybUZpZWxkLnJlbW92ZScsICh7XG4gICAgICBmb3JtRmllbGRcbiAgICB9KSA9PiB7XG4gICAgICBpZiAoc2VsZWN0aW9uLmlzU2VsZWN0ZWQoZm9ybUZpZWxkKSkge1xuICAgICAgICBzZWxlY3Rpb24uY2xlYXIoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuU2VsZWN0aW9uQmVoYXZpb3IuJGluamVjdCA9IFsnZXZlbnRCdXMnLCAnc2VsZWN0aW9uJ107XG5cbmNvbnN0IFNlbGVjdGlvbk1vZHVsZSA9IHtcbiAgX19pbml0X186IFsnc2VsZWN0aW9uJywgJ3NlbGVjdGlvbkJlaGF2aW9yJ10sXG4gIHNlbGVjdGlvbjogWyd0eXBlJywgU2VsZWN0aW9uXSxcbiAgc2VsZWN0aW9uQmVoYXZpb3I6IFsndHlwZScsIFNlbGVjdGlvbkJlaGF2aW9yXVxufTtcblxuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBzZWN0aW9uYWJsZSBVSSBtb2R1bGVzLlxuICpcbiAqIEBwcm9wZXJ0eSB7RXZlbnRCdXN9IF9ldmVudEJ1cyAtIEV2ZW50QnVzIGluc3RhbmNlIHVzZWQgZm9yIGV2ZW50IGhhbmRsaW5nLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IG1hbmFnZXJUeXBlIC0gVHlwZSBvZiB0aGUgcmVuZGVyIG1hbmFnZXIuIFVzZWQgdG8gZm9ybSBldmVudCBuYW1lcy5cbiAqXG4gKiBAY2xhc3MgU2VjdGlvbk1vZHVsZUJhc2VcbiAqL1xuY2xhc3MgU2VjdGlvbk1vZHVsZUJhc2Uge1xuICAvKipcbiAgICogQ3JlYXRlIGEgU2VjdGlvbk1vZHVsZUJhc2UgaW5zdGFuY2UuXG4gICAqXG4gICAqIEBwYXJhbSB7YW55fSBldmVudEJ1cyAtIFRoZSBFdmVudEJ1cyBpbnN0YW5jZSB1c2VkIGZvciBldmVudCBoYW5kbGluZy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHNlY3Rpb25LZXkgLSBUaGUgdHlwZSBvZiByZW5kZXIgbWFuYWdlci4gVXNlZCB0byBmb3JtIGV2ZW50IG5hbWVzLlxuICAgKlxuICAgKiBAY29uc3RydWN0b3JcbiAgICovXG4gIGNvbnN0cnVjdG9yKGV2ZW50QnVzLCBzZWN0aW9uS2V5KSB7XG4gICAgdGhpcy5fZXZlbnRCdXMgPSBldmVudEJ1cztcbiAgICB0aGlzLl9zZWN0aW9uS2V5ID0gc2VjdGlvbktleTtcbiAgICB0aGlzLl9ldmVudEJ1cy5vbihgJHt0aGlzLl9zZWN0aW9uS2V5fS5zZWN0aW9uLnJlbmRlcmVkYCwgKCkgPT4ge1xuICAgICAgdGhpcy5pc1NlY3Rpb25SZW5kZXJlZCA9IHRydWU7XG4gICAgfSk7XG4gICAgdGhpcy5fZXZlbnRCdXMub24oYCR7dGhpcy5fc2VjdGlvbktleX0uc2VjdGlvbi5kZXN0cm95ZWRgLCAoKSA9PiB7XG4gICAgICB0aGlzLmlzU2VjdGlvblJlbmRlcmVkID0gZmFsc2U7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQXR0YWNoIHRoZSBtYW5hZ2VkIHNlY3Rpb24gdG8gYSBwYXJlbnQgbm9kZS5cbiAgICpcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY29udGFpbmVyIC0gVGhlIHBhcmVudCBub2RlIHRvIGF0dGFjaCB0by5cbiAgICovXG4gIGF0dGFjaFRvKGNvbnRhaW5lcikge1xuICAgIHRoaXMuX29uY2VTZWN0aW9uUmVuZGVyZWQoKCkgPT4gdGhpcy5fZXZlbnRCdXMuZmlyZShgJHt0aGlzLl9zZWN0aW9uS2V5fS5hdHRhY2hgLCB7XG4gICAgICBjb250YWluZXJcbiAgICB9KSk7XG4gIH1cblxuICAvKipcbiAgICogRGV0YWNoIHRoZSBtYW5hZ2VkIHNlY3Rpb24gZnJvbSBpdHMgcGFyZW50IG5vZGUuXG4gICAqL1xuICBkZXRhY2goKSB7XG4gICAgdGhpcy5fb25jZVNlY3Rpb25SZW5kZXJlZCgoKSA9PiB0aGlzLl9ldmVudEJ1cy5maXJlKGAke3RoaXMuX3NlY3Rpb25LZXl9LmRldGFjaGApKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNldCB0aGUgbWFuYWdlZCBzZWN0aW9uIHRvIGl0cyBpbml0aWFsIHN0YXRlLlxuICAgKi9cbiAgcmVzZXQoKSB7XG4gICAgdGhpcy5fb25jZVNlY3Rpb25SZW5kZXJlZCgoKSA9PiB0aGlzLl9ldmVudEJ1cy5maXJlKGAke3RoaXMuX3NlY3Rpb25LZXl9LnJlc2V0YCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIENpcmN1bXZlbnRzIHRpbWluZyBpc3N1ZXMuXG4gICAqL1xuICBfb25jZVNlY3Rpb25SZW5kZXJlZChjYWxsYmFjaykge1xuICAgIGlmICh0aGlzLmlzU2VjdGlvblJlbmRlcmVkKSB7XG4gICAgICBjYWxsYmFjaygpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9ldmVudEJ1cy5vbmNlKGAke3RoaXMuX3NlY3Rpb25LZXl9LnNlY3Rpb24ucmVuZGVyZWRgLCBjYWxsYmFjayk7XG4gICAgfVxuICB9XG59XG5cbmNsYXNzIFBhbGV0dGVSZW5kZXJlciBleHRlbmRzIFNlY3Rpb25Nb2R1bGVCYXNlIHtcbiAgY29uc3RydWN0b3IoZXZlbnRCdXMpIHtcbiAgICBzdXBlcihldmVudEJ1cywgJ3BhbGV0dGUnKTtcbiAgfVxufVxuUGFsZXR0ZVJlbmRlcmVyLiRpbmplY3QgPSBbJ2V2ZW50QnVzJ107XG5cbmNvbnN0IFBhbGV0dGVNb2R1bGUgPSB7XG4gIF9faW5pdF9fOiBbJ3BhbGV0dGUnXSxcbiAgcGFsZXR0ZTogWyd0eXBlJywgUGFsZXR0ZVJlbmRlcmVyXVxufTtcblxudmFyIEFycm93SWNvbiA9IGZ1bmN0aW9uIEFycm93SWNvbihwcm9wcykge1xuICByZXR1cm4ganN4KFwic3ZnXCIsIHtcbiAgICAuLi5wcm9wcyxcbiAgICBjaGlsZHJlbjoganN4KFwicGF0aFwiLCB7XG4gICAgICBmaWxsUnVsZTogXCJldmVub2RkXCIsXG4gICAgICBkOiBcIm0xMS42NTcgOC00Ljk1IDQuOTVhMSAxIDAgMCAxLTEuNDE0LTEuNDE0TDguODI4IDggNS4yOTMgNC40NjRBMSAxIDAgMSAxIDYuNzA3IDMuMDVMMTEuNjU3IDhaXCJcbiAgICB9KVxuICB9KTtcbn07XG5BcnJvd0ljb24uZGVmYXVsdFByb3BzID0ge1xuICB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLFxuICB3aWR0aDogXCIxNlwiLFxuICBoZWlnaHQ6IFwiMTZcIlxufTtcbnZhciBDbG9zZUljb24gPSBmdW5jdGlvbiBDbG9zZUljb24ocHJvcHMpIHtcbiAgcmV0dXJuIGpzeChcInN2Z1wiLCB7XG4gICAgLi4ucHJvcHMsXG4gICAgY2hpbGRyZW46IGpzeChcInBhdGhcIiwge1xuICAgICAgZmlsbFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgICAgZDogXCJtMTIgNC43LS43LS43TDggNy4zIDQuNyA0bC0uNy43TDcuMyA4IDQgMTEuM2wuNy43TDggOC43bDMuMyAzLjMuNy0uN0w4LjcgOCAxMiA0LjdaXCIsXG4gICAgICBmaWxsOiBcImN1cnJlbnRDb2xvclwiXG4gICAgfSlcbiAgfSk7XG59O1xuQ2xvc2VJY29uLmRlZmF1bHRQcm9wcyA9IHtcbiAgeG1sbnM6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixcbiAgd2lkdGg6IFwiMTZcIixcbiAgaGVpZ2h0OiBcIjE2XCJcbn07XG52YXIgQ3JlYXRlSWNvbiA9IGZ1bmN0aW9uIENyZWF0ZUljb24ocHJvcHMpIHtcbiAgcmV0dXJuIGpzeChcInN2Z1wiLCB7XG4gICAgLi4ucHJvcHMsXG4gICAgY2hpbGRyZW46IGpzeChcInBhdGhcIiwge1xuICAgICAgZmlsbFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgICAgZDogXCJNOSAxM1Y5aDRhMSAxIDAgMCAwIDAtMkg5VjNhMSAxIDAgMSAwLTIgMHY0SDNhMSAxIDAgMSAwIDAgMmg0djRhMSAxIDAgMCAwIDIgMFpcIlxuICAgIH0pXG4gIH0pO1xufTtcbkNyZWF0ZUljb24uZGVmYXVsdFByb3BzID0ge1xuICB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLFxuICB3aWR0aDogXCIxNlwiLFxuICBoZWlnaHQ6IFwiMTZcIlxufTtcbnZhciBEZWxldGVJY29uID0gZnVuY3Rpb24gRGVsZXRlSWNvbihwcm9wcykge1xuICByZXR1cm4ganN4KFwic3ZnXCIsIHtcbiAgICAuLi5wcm9wcyxcbiAgICBjaGlsZHJlbjoganN4KFwicGF0aFwiLCB7XG4gICAgICBmaWxsUnVsZTogXCJldmVub2RkXCIsXG4gICAgICBkOiBcIk0xMiA2djdjMCAxLjEtLjQgMS41NS0xLjUgMS41NWgtNUM0LjQgMTQuNTUgNCAxNC4xIDQgMTNWNmg4Wm0tMS41IDEuNWgtNXY0LjNjMCAuNjYuNSAxLjIgMS4xMTEgMS4ySDkuMzljLjYxMSAwIDEuMTExLS41NCAxLjExMS0xLjJWNy41Wk0xMyAzaC0ybC0xLTFINkw1IDNIM3YxLjVoMTBWM1pcIlxuICAgIH0pXG4gIH0pO1xufTtcbkRlbGV0ZUljb24uZGVmYXVsdFByb3BzID0ge1xuICB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLFxuICB3aWR0aDogXCIxNlwiLFxuICBoZWlnaHQ6IFwiMTZcIlxufTtcbnZhciBEcmFnSWNvbiA9IGZ1bmN0aW9uIERyYWdJY29uKHByb3BzKSB7XG4gIHJldHVybiBqc3hzKFwic3ZnXCIsIHtcbiAgICAuLi5wcm9wcyxcbiAgICBjaGlsZHJlbjogW2pzeChcInBhdGhcIiwge1xuICAgICAgZmlsbDogXCIjZmZmXCIsXG4gICAgICBzdHlsZToge1xuICAgICAgICBtaXhCbGVuZE1vZGU6IFwibXVsdGlwbHlcIlxuICAgICAgfSxcbiAgICAgIGQ6IFwiTTAgMGgxNnYxNkgwelwiXG4gICAgfSksIGpzeChcInBhdGhcIiwge1xuICAgICAgZmlsbDogXCIjZmZmXCIsXG4gICAgICBzdHlsZToge1xuICAgICAgICBtaXhCbGVuZE1vZGU6IFwibXVsdGlwbHlcIlxuICAgICAgfSxcbiAgICAgIGQ6IFwiTTAgMGgxNnYxNkgwelwiXG4gICAgfSksIGpzeChcInBhdGhcIiwge1xuICAgICAgZDogXCJNNyAzSDV2MmgyVjN6bTQgMEg5djJoMlYzek03IDdINXYyaDJWN3ptNCAwSDl2MmgyVjd6bS00IDRINXYyaDJ2LTJ6bTQgMEg5djJoMnYtMnpcIixcbiAgICAgIGZpbGw6IFwiIzE2MTYxNlwiXG4gICAgfSldXG4gIH0pO1xufTtcbkRyYWdJY29uLmRlZmF1bHRQcm9wcyA9IHtcbiAgd2lkdGg6IFwiMTZcIixcbiAgaGVpZ2h0OiBcIjE2XCIsXG4gIGZpbGw6IFwibm9uZVwiLFxuICB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXG59O1xudmFyIEV4dGVybmFsTGlua0ljb24gPSBmdW5jdGlvbiBFeHRlcm5hbExpbmtJY29uKHByb3BzKSB7XG4gIHJldHVybiBqc3goXCJzdmdcIiwge1xuICAgIC4uLnByb3BzLFxuICAgIGNoaWxkcmVuOiBqc3goXCJwYXRoXCIsIHtcbiAgICAgIGZpbGxSdWxlOiBcImV2ZW5vZGRcIixcbiAgICAgIGNsaXBSdWxlOiBcImV2ZW5vZGRcIixcbiAgICAgIGQ6IFwiTTEyLjYzNyAxMi42Mzd2LTQuNzJoMS4zNjJ2NC43MjFjMCAuMzYtLjEzNy42NzYtLjQxMS45NS0uMjc1LjI3NS0uNTkxLjQxMi0uOTUuNDEySDMuMzYyYy0uMzggMC0uNzAzLS4xMzItLjk2Ny0uMzk2QTEuMzE1IDEuMzE1IDAgMCAxIDIgMTIuNjM4VjMuMzYyYzAtLjM4LjEzMi0uNzAzLjM5Ni0uOTY3UzIuOTgyIDIgMy4zNjMgMmg0LjU1M3YxLjM2M0gzLjM2M3Y5LjI3NGg5LjI3NFpNMTQgMkg5LjI4bC0uMDAxIDEuMzYyaDIuNDA4TDUuMDY1IDkuOTg0bC45NS45NSA2LjYyMi02LjYyMnYyLjQwOUgxNFYyWlwiLFxuICAgICAgZmlsbDogXCJjdXJyZW50Y29sb3JcIlxuICAgIH0pXG4gIH0pO1xufTtcbkV4dGVybmFsTGlua0ljb24uZGVmYXVsdFByb3BzID0ge1xuICB3aWR0aDogXCIxNlwiLFxuICBoZWlnaHQ6IFwiMTZcIixcbiAgZmlsbDogXCJub25lXCIsXG4gIHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCJcbn07XG52YXIgRmVlbEljb24kMSA9IGZ1bmN0aW9uIEZlZWxJY29uKHByb3BzKSB7XG4gIHJldHVybiBqc3goXCJzdmdcIiwge1xuICAgIC4uLnByb3BzLFxuICAgIGNoaWxkcmVuOiBqc3goXCJwYXRoXCIsIHtcbiAgICAgIGQ6IFwiTTMuNjE3IDExLjk5Yy0uMTM3LjY4NC0uMzkyIDEuMTktLjc2NSAxLjUxOC0uMzYyLjMyOC0uODgyLjQ5Mi0xLjU1OC40OTJIMGwuMzA5LTEuNTc5aDEuMjY0bDEuNTE1LTcuNjRoLS45MTJsLjMwOS0xLjU3OWguOTExbC4yMzYtMS4xOTFjLjEzNy0uNjg1LjM4Ny0xLjE5Mi43NS0xLjUyQzQuNzUzLjE2NCA1LjI3NyAwIDUuOTUzIDBoMS4yOTRMNi45NCAxLjU3OUg1LjY3NWwtLjMyMyAxLjYyM2gxLjI2NGwtLjMwOSAxLjU3OUg1LjA0M2wtMS40MjYgNy4yMDhaTTUuNjA1IDExLjAyMWwzLjAyOS00LjE1NUw3LjI4IDMuMjAyaDIuMDczbC43MDYgMi41NDdoLjE3NmwxLjY5MS0yLjU0N0gxNGwtMy4wMTQgNC4wNTEgMS4zMzggMy43NjhIMTAuMjVsLS43MDYtMi42MDZIOS4zN0w3LjY3OCAxMS4wMkg1LjYwNVpcIixcbiAgICAgIGZpbGw6IFwiY3VycmVudGNvbG9yXCJcbiAgICB9KVxuICB9KTtcbn07XG5GZWVsSWNvbiQxLmRlZmF1bHRQcm9wcyA9IHtcbiAgd2lkdGg6IFwiMTRcIixcbiAgaGVpZ2h0OiBcIjE0XCIsXG4gIGZpbGw6IFwibm9uZVwiLFxuICB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXG59O1xudmFyIExhdW5jaEljb24gPSBmdW5jdGlvbiBMYXVuY2hJY29uKHByb3BzKSB7XG4gIHJldHVybiBqc3hzKFwic3ZnXCIsIHtcbiAgICAuLi5wcm9wcyxcbiAgICBjaGlsZHJlbjogW2pzeChcInBhdGhcIiwge1xuICAgICAgZDogXCJNMjYgMjhINmEyLjAwMyAyLjAwMyAwIDAgMS0yLTJWNmEyLjAwMyAyLjAwMyAwIDAgMSAyLTJoMTB2Mkg2djIwaDIwVjE2aDJ2MTBhMi4wMDMgMi4wMDMgMCAwIDEtMiAyWlwiXG4gICAgfSksIGpzeChcInBhdGhcIiwge1xuICAgICAgZDogXCJNMjAgMnYyaDYuNTg2TDE4IDEyLjU4NiAxOS40MTQgMTQgMjggNS40MTRWMTJoMlYySDIwelwiXG4gICAgfSldXG4gIH0pO1xufTtcbkxhdW5jaEljb24uZGVmYXVsdFByb3BzID0ge1xuICB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLFxuICB2aWV3Qm94OiBcIjAgMCAzMiAzMlwiXG59O1xudmFyIE9wZW5Qb3B1cEljb24gPSBmdW5jdGlvbiBPcGVuUG9wdXBJY29uKHByb3BzKSB7XG4gIHJldHVybiBqc3goXCJzdmdcIiwge1xuICAgIC4uLnByb3BzLFxuICAgIGNoaWxkcmVuOiBqc3goXCJwYXRoXCIsIHtcbiAgICAgIGQ6IFwiTTYgMTV2LTFIMi43TDcgOS43IDYuMyA5IDIgMTMuM1YxMEgxdjV6bTQtMTR2MWgzLjNMOSA2LjNsLjcuN0wxNCAyLjdWNmgxVjF6XCJcbiAgICB9KVxuICB9KTtcbn07XG5PcGVuUG9wdXBJY29uLmRlZmF1bHRQcm9wcyA9IHtcbiAgeG1sbnM6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixcbiAgdmlld0JveDogXCIwIDAgMTYgMTZcIlxufTtcbmZ1bmN0aW9uIEhlYWRlcihwcm9wcykge1xuICBjb25zdCB7XG4gICAgZWxlbWVudCxcbiAgICBoZWFkZXJQcm92aWRlclxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IHtcbiAgICBnZXRFbGVtZW50SWNvbixcbiAgICBnZXREb2N1bWVudGF0aW9uUmVmLFxuICAgIGdldEVsZW1lbnRMYWJlbCxcbiAgICBnZXRUeXBlTGFiZWxcbiAgfSA9IGhlYWRlclByb3ZpZGVyO1xuICBjb25zdCBsYWJlbCA9IGdldEVsZW1lbnRMYWJlbChlbGVtZW50KTtcbiAgY29uc3QgdHlwZSA9IGdldFR5cGVMYWJlbChlbGVtZW50KTtcbiAgY29uc3QgZG9jdW1lbnRhdGlvblJlZiA9IGdldERvY3VtZW50YXRpb25SZWYgJiYgZ2V0RG9jdW1lbnRhdGlvblJlZihlbGVtZW50KTtcbiAgY29uc3QgRWxlbWVudEljb24gPSBnZXRFbGVtZW50SWNvbihlbGVtZW50KTtcbiAgcmV0dXJuIGpzeHMoXCJkaXZcIiwge1xuICAgIGNsYXNzOiBcImJpby1wcm9wZXJ0aWVzLXBhbmVsLWhlYWRlclwiLFxuICAgIGNoaWxkcmVuOiBbanN4KFwiZGl2XCIsIHtcbiAgICAgIGNsYXNzOiBcImJpby1wcm9wZXJ0aWVzLXBhbmVsLWhlYWRlci1pY29uXCIsXG4gICAgICBjaGlsZHJlbjogRWxlbWVudEljb24gJiYganN4KEVsZW1lbnRJY29uLCB7XG4gICAgICAgIHdpZHRoOiBcIjMyXCIsXG4gICAgICAgIGhlaWdodDogXCIzMlwiLFxuICAgICAgICB2aWV3Qm94OiBcIjAgMCAzMiAzMlwiXG4gICAgICB9KVxuICAgIH0pLCBqc3hzKFwiZGl2XCIsIHtcbiAgICAgIGNsYXNzOiBcImJpby1wcm9wZXJ0aWVzLXBhbmVsLWhlYWRlci1sYWJlbHNcIixcbiAgICAgIGNoaWxkcmVuOiBbanN4KFwiZGl2XCIsIHtcbiAgICAgICAgdGl0bGU6IHR5cGUsXG4gICAgICAgIGNsYXNzOiBcImJpby1wcm9wZXJ0aWVzLXBhbmVsLWhlYWRlci10eXBlXCIsXG4gICAgICAgIGNoaWxkcmVuOiB0eXBlXG4gICAgICB9KSwgbGFiZWwgPyBqc3goXCJkaXZcIiwge1xuICAgICAgICB0aXRsZTogbGFiZWwsXG4gICAgICAgIGNsYXNzOiBcImJpby1wcm9wZXJ0aWVzLXBhbmVsLWhlYWRlci1sYWJlbFwiLFxuICAgICAgICBjaGlsZHJlbjogbGFiZWxcbiAgICAgIH0pIDogbnVsbF1cbiAgICB9KSwganN4KFwiZGl2XCIsIHtcbiAgICAgIGNsYXNzOiBcImJpby1wcm9wZXJ0aWVzLXBhbmVsLWhlYWRlci1hY3Rpb25zXCIsXG4gICAgICBjaGlsZHJlbjogZG9jdW1lbnRhdGlvblJlZiA/IGpzeChcImFcIiwge1xuICAgICAgICByZWw6IFwibm9yZWZlcnJlclwiLFxuICAgICAgICBjbGFzczogXCJiaW8tcHJvcGVydGllcy1wYW5lbC1oZWFkZXItbGlua1wiLFxuICAgICAgICBocmVmOiBkb2N1bWVudGF0aW9uUmVmLFxuICAgICAgICB0aXRsZTogXCJPcGVuIGRvY3VtZW50YXRpb25cIixcbiAgICAgICAgdGFyZ2V0OiBcIl9ibGFua1wiLFxuICAgICAgICBjaGlsZHJlbjoganN4KEV4dGVybmFsTGlua0ljb24sIHt9KVxuICAgICAgfSkgOiBudWxsXG4gICAgfSldXG4gIH0pO1xufVxuY29uc3QgRGVzY3JpcHRpb25Db250ZXh0ID0gY3JlYXRlQ29udGV4dCh7XG4gIGRlc2NyaXB0aW9uOiB7fSxcbiAgZ2V0RGVzY3JpcHRpb25Gb3JJZDogKCkgPT4ge31cbn0pO1xuY29uc3QgRXJyb3JzQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQoe1xuICBlcnJvcnM6IHt9XG59KTtcblxuLyoqXG4gKiBAdHlwZWRlZiB7RnVuY3Rpb259IDxwcm9wZXJ0aWVzUGFuZWwuc2hvd0VudHJ5PiBjYWxsYmFja1xuICpcbiAqIEBleGFtcGxlXG4gKlxuICogdXNlRXZlbnQoJ3Byb3BlcnRpZXNQYW5lbC5zaG93RW50cnknLCAoeyBmb2N1cyA9IGZhbHNlLCAuLi5yZXN0IH0pID0+IHtcbiAqICAgLy8gLi4uXG4gKiB9KTtcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gY29udGV4dFxuICogQHBhcmFtIHtib29sZWFufSBbY29udGV4dC5mb2N1c11cbiAqXG4gKiBAcmV0dXJucyB2b2lkXG4gKi9cblxuY29uc3QgRXZlbnRDb250ZXh0ID0gY3JlYXRlQ29udGV4dCh7XG4gIGV2ZW50QnVzOiBudWxsXG59KTtcblxuLyoqXG4gKiBAdHlwZWRlZiB7IHtcbiAqICAgcGFyc2VyRGlhbGVjdD86IGltcG9ydCgnQGJwbW4taW8vZmVlbC1lZGl0b3InKS5QYXJzZXJEaWFsZWN0LFxuICogICBidWlsdGlucz86IGltcG9ydCgnQGJwbW4taW8vZmVlbC1lZGl0b3InKS5WYXJpYWJsZVtdLFxuICogICBkaWFsZWN0PzogaW1wb3J0KCdAYnBtbi1pby9mZWVsLWVkaXRvcicpLkRpYWxlY3RcbiAqIH0gfSBGZWVsTGFuZ3VhZ2VDb250ZXh0VHlwZVxuICovXG5cbi8qKlxuICogQHR5cGUge2ltcG9ydCgncHJlYWN0JykuQ29udGV4dDxGZWVsTGFuZ3VhZ2VDb250ZXh0VHlwZT59XG4gKi9cbmNvbnN0IEZlZWxMYW5ndWFnZUNvbnRleHQgPSBjcmVhdGVDb250ZXh0KHt9KTtcbmNvbnN0IExheW91dENvbnRleHQgPSBjcmVhdGVDb250ZXh0KHtcbiAgbGF5b3V0OiB7fSxcbiAgc2V0TGF5b3V0OiAoKSA9PiB7fSxcbiAgZ2V0TGF5b3V0Rm9yS2V5OiAoKSA9PiB7fSxcbiAgc2V0TGF5b3V0Rm9yS2V5OiAoKSA9PiB7fVxufSk7XG5jb25zdCBUb29sdGlwQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQoe1xuICB0b29sdGlwOiB7fSxcbiAgZ2V0VG9vbHRpcEZvcklkOiAoKSA9PiB7fVxufSk7XG5cbi8qKlxuICogQWNjZXNzZXMgdGhlIGdsb2JhbCBUb29sdGlwQ29udGV4dCBhbmQgcmV0dXJucyBhIHRvb2x0aXAgZm9yIGEgZ2l2ZW4gaWQgYW5kIGVsZW1lbnQuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYGpzeFxuICogZnVuY3Rpb24gVGV4dEZpZWxkKHByb3BzKSB7XG4gKiAgIGNvbnN0IHRvb2x0aXAgPSB1c2VUb29sdGlwQ29udGV4dCgnaW5wdXQxJywgZWxlbWVudCk7XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gaWRcbiAqIEBwYXJhbSB7b2JqZWN0fSBlbGVtZW50XG4gKlxuICogQHJldHVybnMge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gdXNlVG9vbHRpcENvbnRleHQoaWQsIGVsZW1lbnQpIHtcbiAgY29uc3Qge1xuICAgIGdldFRvb2x0aXBGb3JJZFxuICB9ID0gdXNlQ29udGV4dChUb29sdGlwQ29udGV4dCk7XG4gIHJldHVybiBnZXRUb29sdGlwRm9ySWQoaWQsIGVsZW1lbnQpO1xufVxuZnVuY3Rpb24gVG9vbHRpcFdyYXBwZXIocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGZvcklkLFxuICAgIGVsZW1lbnRcbiAgfSA9IHByb3BzO1xuICBjb25zdCBjb250ZXh0RGVzY3JpcHRpb24gPSB1c2VUb29sdGlwQ29udGV4dChmb3JJZCwgZWxlbWVudCk7XG4gIGNvbnN0IHZhbHVlID0gcHJvcHMudmFsdWUgfHwgY29udGV4dERlc2NyaXB0aW9uO1xuICBpZiAoIXZhbHVlKSB7XG4gICAgcmV0dXJuIHByb3BzLmNoaWxkcmVuO1xuICB9XG4gIHJldHVybiBqc3goVG9vbHRpcCwge1xuICAgIC4uLnByb3BzLFxuICAgIHZhbHVlOiB2YWx1ZSxcbiAgICBmb3JJZDogYGJpby1wcm9wZXJ0aWVzLXBhbmVsLSR7Zm9ySWR9YFxuICB9KTtcbn1cbmZ1bmN0aW9uIFRvb2x0aXAocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGZvcklkLFxuICAgIHZhbHVlLFxuICAgIHBhcmVudCxcbiAgICBkaXJlY3Rpb24gPSAncmlnaHQnLFxuICAgIHBvc2l0aW9uXG4gIH0gPSBwcm9wcztcbiAgY29uc3QgW3Zpc2libGUsIHNldFZpc2libGVdID0gdXNlU3RhdGUoZmFsc2UpO1xuXG4gIC8vIFRvb2x0aXAgd2lsbCBiZSBzaG93biBhZnRlciBTSE9XX0RFTEFZIG1zIGZyb20gaG92ZXJpbmcgb3ZlciB0aGUgc291cmNlIGVsZW1lbnQuXG4gIGNvbnN0IFNIT1dfREVMQVkgPSAyMDA7XG4gIGxldCB0aW1lb3V0ID0gbnVsbDtcbiAgY29uc3Qgd3JhcHBlclJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgdG9vbHRpcFJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3Qgc2hvdyA9IChfLCBkZWxheSkgPT4ge1xuICAgIGlmICh2aXNpYmxlKSByZXR1cm47XG4gICAgaWYgKGRlbGF5KSB7XG4gICAgICB0aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHNldFZpc2libGUodHJ1ZSk7XG4gICAgICB9LCBTSE9XX0RFTEFZKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0VmlzaWJsZSh0cnVlKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IGhpZGUgPSAoKSA9PiB7XG4gICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgIHNldFZpc2libGUoZmFsc2UpO1xuICB9O1xuICBjb25zdCBoYW5kbGVNb3VzZUxlYXZlID0gKHtcbiAgICByZWxhdGVkVGFyZ2V0XG4gIH0pID0+IHtcbiAgICAvLyBEb24ndCBoaWRlIHRoZSB0b29sdGlwIHdoZW4gbW92aW5nIG1vdXNlIGJldHdlZW4gdGhlIHdyYXBwZXIgYW5kIHRoZSB0b29sdGlwLlxuICAgIGlmIChyZWxhdGVkVGFyZ2V0ID09PSB3cmFwcGVyUmVmLmN1cnJlbnQgfHwgcmVsYXRlZFRhcmdldCA9PT0gdG9vbHRpcFJlZi5jdXJyZW50IHx8IHJlbGF0ZWRUYXJnZXQ/LnBhcmVudEVsZW1lbnQgPT09IHRvb2x0aXBSZWYuY3VycmVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBoaWRlKCk7XG4gIH07XG4gIGNvbnN0IGhhbmRsZUZvY3VzT3V0ID0gZSA9PiB7XG4gICAgY29uc3Qge1xuICAgICAgdGFyZ2V0XG4gICAgfSA9IGU7XG5cbiAgICAvLyBEb24ndCBoaWRlIHRoZSB0b29sdGlwIGlmIHRoZSB3cmFwcGVyIG9yIHRoZSB0b29sdGlwIGl0c2VsZiBpcyBjbGlja2VkLlxuICAgIGNvbnN0IGlzSG92ZXJlZCA9IHRhcmdldC5tYXRjaGVzKCc6aG92ZXInKSB8fCB0b29sdGlwUmVmLmN1cnJlbnQ/Lm1hdGNoZXMoJzpob3ZlcicpO1xuICAgIGlmICh0YXJnZXQgPT09IHdyYXBwZXJSZWYuY3VycmVudCAmJiBpc0hvdmVyZWQpIHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGhpZGUoKTtcbiAgfTtcbiAgY29uc3QgaGlkZVRvb2x0aXBWaWFFc2NhcGUgPSBlID0+IHtcbiAgICBlLmNvZGUgPT09ICdFc2NhcGUnICYmIGhpZGUoKTtcbiAgfTtcbiAgY29uc3QgcmVuZGVyVG9vbHRpcCA9ICgpID0+IHtcbiAgICByZXR1cm4ganN4cyhcImRpdlwiLCB7XG4gICAgICBjbGFzczogYGJpby1wcm9wZXJ0aWVzLXBhbmVsLXRvb2x0aXAgJHtkaXJlY3Rpb259YCxcbiAgICAgIHJvbGU6IFwidG9vbHRpcFwiLFxuICAgICAgaWQ6IFwiYmlvLXByb3BlcnRpZXMtcGFuZWwtdG9vbHRpcFwiLFxuICAgICAgXCJhcmlhLWxhYmVsbGVkYnlcIjogZm9ySWQsXG4gICAgICBzdHlsZTogcG9zaXRpb24gfHwgZ2V0VG9vbHRpcFBvc2l0aW9uKHdyYXBwZXJSZWYuY3VycmVudCksXG4gICAgICByZWY6IHRvb2x0aXBSZWYsXG4gICAgICBvbkNsaWNrOiBlID0+IGUuc3RvcFByb3BhZ2F0aW9uKCksXG4gICAgICBvbk1vdXNlTGVhdmU6IGhhbmRsZU1vdXNlTGVhdmUsXG4gICAgICBjaGlsZHJlbjogW2pzeChcImRpdlwiLCB7XG4gICAgICAgIGNsYXNzOiBcImJpby1wcm9wZXJ0aWVzLXBhbmVsLXRvb2x0aXAtY29udGVudFwiLFxuICAgICAgICBjaGlsZHJlbjogdmFsdWVcbiAgICAgIH0pLCBqc3goXCJkaXZcIiwge1xuICAgICAgICBjbGFzczogXCJiaW8tcHJvcGVydGllcy1wYW5lbC10b29sdGlwLWFycm93XCJcbiAgICAgIH0pXVxuICAgIH0pO1xuICB9O1xuICByZXR1cm4ganN4cyhcImRpdlwiLCB7XG4gICAgY2xhc3M6IFwiYmlvLXByb3BlcnRpZXMtcGFuZWwtdG9vbHRpcC13cmFwcGVyXCIsXG4gICAgdGFiSW5kZXg6IFwiMFwiLFxuICAgIHJlZjogd3JhcHBlclJlZixcbiAgICBvbk1vdXNlRW50ZXI6IGUgPT4gc2hvdyhlLCB0cnVlKSxcbiAgICBvbk1vdXNlTGVhdmU6IGhhbmRsZU1vdXNlTGVhdmUsXG4gICAgb25Gb2N1czogc2hvdyxcbiAgICBvbkJsdXI6IGhhbmRsZUZvY3VzT3V0LFxuICAgIG9uS2V5RG93bjogaGlkZVRvb2x0aXBWaWFFc2NhcGUsXG4gICAgY2hpbGRyZW46IFtwcm9wcy5jaGlsZHJlbiwgdmlzaWJsZSA/IHBhcmVudCA/IGNyZWF0ZVBvcnRhbChyZW5kZXJUb29sdGlwKCksIHBhcmVudC5jdXJyZW50KSA6IHJlbmRlclRvb2x0aXAoKSA6IG51bGxdXG4gIH0pO1xufVxuXG4vLyBoZWxwZXJcblxuZnVuY3Rpb24gZ2V0VG9vbHRpcFBvc2l0aW9uKHJlZkVsZW1lbnQpIHtcbiAgY29uc3QgcmVmUG9zaXRpb24gPSByZWZFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICBjb25zdCByaWdodCA9IGBjYWxjKDEwMCUgLSAke3JlZlBvc2l0aW9uLnh9cHgpYDtcbiAgY29uc3QgdG9wID0gYCR7cmVmUG9zaXRpb24udG9wIC0gMTB9cHhgO1xuICByZXR1cm4gYHJpZ2h0OiAke3JpZ2h0fTsgdG9wOiAke3RvcH07YDtcbn1cblxuLyoqXG4gKiBBY2Nlc3NlcyB0aGUgZ2xvYmFsIERlc2NyaXB0aW9uQ29udGV4dCBhbmQgcmV0dXJucyBhIGRlc2NyaXB0aW9uIGZvciBhIGdpdmVuIGlkIGFuZCBlbGVtZW50LlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGBqc3hcbiAqIGZ1bmN0aW9uIFRleHRGaWVsZChwcm9wcykge1xuICogICBjb25zdCBkZXNjcmlwdGlvbiA9IHVzZURlc2NyaXB0aW9uQ29udGV4dCgnaW5wdXQxJywgZWxlbWVudCk7XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gaWRcbiAqIEBwYXJhbSB7b2JqZWN0fSBlbGVtZW50XG4gKlxuICogQHJldHVybnMge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gdXNlRGVzY3JpcHRpb25Db250ZXh0KGlkLCBlbGVtZW50KSB7XG4gIGNvbnN0IHtcbiAgICBnZXREZXNjcmlwdGlvbkZvcklkXG4gIH0gPSB1c2VDb250ZXh0KERlc2NyaXB0aW9uQ29udGV4dCk7XG4gIHJldHVybiBnZXREZXNjcmlwdGlvbkZvcklkKGlkLCBlbGVtZW50KTtcbn1cbmZ1bmN0aW9uIHVzZURlYm91bmNlKGNhbGxiYWNrLCBkZWJvdW5jZUZuKSB7XG4gIGNvbnN0IGRlYm91bmNlZENhbGxiYWNrID0gdXNlQ2FsbGJhY2soZGVib3VuY2VGbihjYWxsYmFjayksIFtjYWxsYmFjaywgZGVib3VuY2VGbl0pO1xuXG4gIC8vIG1ha2Ugc3VyZSBwcmV2aW91cyBjYWxsIGlzIG5vdCBzdGFsbGVkXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGRlYm91bmNlZENhbGxiYWNrLmNhbmNlbD8uKCk7XG4gICAgfTtcbiAgfSwgW2RlYm91bmNlZENhbGxiYWNrXSk7XG4gIHJldHVybiBkZWJvdW5jZWRDYWxsYmFjaztcbn1cbmZ1bmN0aW9uIHVzZUVycm9yKGlkKSB7XG4gIGNvbnN0IHtcbiAgICBlcnJvcnNcbiAgfSA9IHVzZUNvbnRleHQoRXJyb3JzQ29udGV4dCk7XG4gIHJldHVybiBlcnJvcnNbaWRdO1xufVxuZnVuY3Rpb24gdXNlRXJyb3JzKCkge1xuICBjb25zdCB7XG4gICAgZXJyb3JzXG4gIH0gPSB1c2VDb250ZXh0KEVycm9yc0NvbnRleHQpO1xuICByZXR1cm4gZXJyb3JzO1xufVxuXG4vKipcbiAqIFN1YnNjcmliZSB0byBhbiBldmVudCBpbW1lZGlhdGVseS4gVXBkYXRlIHN1YnNjcmlwdGlvbiBhZnRlciBpbnB1dHMgY2hhbmdlZC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gZXZlbnRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gKi9cbmZ1bmN0aW9uIHVzZUV2ZW50KGV2ZW50LCBjYWxsYmFjaywgZXZlbnRCdXMpIHtcbiAgY29uc3QgZXZlbnRDb250ZXh0ID0gdXNlQ29udGV4dChFdmVudENvbnRleHQpO1xuICBpZiAoIWV2ZW50QnVzKSB7XG4gICAgKHtcbiAgICAgIGV2ZW50QnVzXG4gICAgfSA9IGV2ZW50Q29udGV4dCk7XG4gIH1cbiAgY29uc3QgZGlkTW91bnQgPSB1c2VSZWYoZmFsc2UpO1xuXG4gIC8vICgxKSBzdWJzY3JpYmUgaW1tZWRpYXRlbHlcbiAgaWYgKGV2ZW50QnVzICYmICFkaWRNb3VudC5jdXJyZW50KSB7XG4gICAgZXZlbnRCdXMub24oZXZlbnQsIGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8vICgyKSB1cGRhdGUgc3Vic2NyaXB0aW9uIGFmdGVyIGlucHV0cyBjaGFuZ2VkXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGV2ZW50QnVzICYmIGRpZE1vdW50LmN1cnJlbnQpIHtcbiAgICAgIGV2ZW50QnVzLm9uKGV2ZW50LCBjYWxsYmFjayk7XG4gICAgfVxuICAgIGRpZE1vdW50LmN1cnJlbnQgPSB0cnVlO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpZiAoZXZlbnRCdXMpIHtcbiAgICAgICAgZXZlbnRCdXMub2ZmKGV2ZW50LCBjYWxsYmFjayk7XG4gICAgICB9XG4gICAgfTtcbiAgfSwgW2NhbGxiYWNrLCBldmVudCwgZXZlbnRCdXNdKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgc3RhdGUgdGhhdCBwZXJzaXN0cyBpbiB0aGUgZ2xvYmFsIExheW91dENvbnRleHQuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYGpzeFxuICogZnVuY3Rpb24gR3JvdXAocHJvcHMpIHtcbiAqICAgY29uc3QgWyBvcGVuLCBzZXRPcGVuIF0gPSB1c2VMYXlvdXRTdGF0ZShbICdncm91cHMnLCAnZm9vJywgJ29wZW4nIF0sIGZhbHNlKTtcbiAqIH1cbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB7KHN0cmluZ3xudW1iZXIpW119IHBhdGhcbiAqIEBwYXJhbSB7YW55fSBbZGVmYXVsdFZhbHVlXVxuICpcbiAqIEByZXR1cm5zIHtbIGFueSwgRnVuY3Rpb24gXX1cbiAqL1xuZnVuY3Rpb24gdXNlTGF5b3V0U3RhdGUocGF0aCwgZGVmYXVsdFZhbHVlKSB7XG4gIGNvbnN0IHtcbiAgICBnZXRMYXlvdXRGb3JLZXksXG4gICAgc2V0TGF5b3V0Rm9yS2V5XG4gIH0gPSB1c2VDb250ZXh0KExheW91dENvbnRleHQpO1xuICBjb25zdCBsYXlvdXRGb3JLZXkgPSBnZXRMYXlvdXRGb3JLZXkocGF0aCwgZGVmYXVsdFZhbHVlKTtcbiAgY29uc3Qgc2V0U3RhdGUgPSB1c2VDYWxsYmFjayhuZXdWYWx1ZSA9PiB7XG4gICAgc2V0TGF5b3V0Rm9yS2V5KHBhdGgsIG5ld1ZhbHVlKTtcbiAgfSwgW3NldExheW91dEZvcktleV0pO1xuICByZXR1cm4gW2xheW91dEZvcktleSwgc2V0U3RhdGVdO1xufVxuXG4vKipcbiAqIEBwaW51c3NpbHZlc3RydXM6IHdlIG5lZWQgdG8gaW50cm9kdWNlIG91ciBvd24gaG9vayB0byBwZXJzaXN0IHRoZSBwcmV2aW91c1xuICogc3RhdGUgb24gdXBkYXRlcy5cbiAqXG4gKiBjZi4gaHR0cHM6Ly9yZWFjdGpzLm9yZy9kb2NzL2hvb2tzLWZhcS5odG1sI2hvdy10by1nZXQtdGhlLXByZXZpb3VzLXByb3BzLW9yLXN0YXRlXG4gKi9cblxuZnVuY3Rpb24gdXNlUHJldmlvdXModmFsdWUpIHtcbiAgY29uc3QgcmVmID0gdXNlUmVmKCk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgcmVmLmN1cnJlbnQgPSB2YWx1ZTtcbiAgfSk7XG4gIHJldHVybiByZWYuY3VycmVudDtcbn1cblxuLyoqXG4gKiBTdWJzY3JpYmUgdG8gYHByb3BlcnRpZXNQYW5lbC5zaG93RW50cnlgLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBpZFxuICpcbiAqIEByZXR1cm5zIHtpbXBvcnQoJ3ByZWFjdCcpLlJlZn1cbiAqL1xuZnVuY3Rpb24gdXNlU2hvd0VudHJ5RXZlbnQoaWQpIHtcbiAgY29uc3Qge1xuICAgIG9uU2hvd1xuICB9ID0gdXNlQ29udGV4dChMYXlvdXRDb250ZXh0KTtcbiAgY29uc3QgcmVmID0gdXNlUmVmKCk7XG4gIGNvbnN0IGZvY3VzID0gdXNlUmVmKGZhbHNlKTtcbiAgY29uc3Qgb25TaG93RW50cnkgPSB1c2VDYWxsYmFjayhldmVudCA9PiB7XG4gICAgaWYgKGV2ZW50LmlkID09PSBpZCkge1xuICAgICAgb25TaG93KCk7XG4gICAgICBpZiAoIWZvY3VzLmN1cnJlbnQpIHtcbiAgICAgICAgZm9jdXMuY3VycmVudCA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9LCBbaWRdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoZm9jdXMuY3VycmVudCAmJiByZWYuY3VycmVudCkge1xuICAgICAgaWYgKGlzRnVuY3Rpb24ocmVmLmN1cnJlbnQuZm9jdXMpKSB7XG4gICAgICAgIHJlZi5jdXJyZW50LmZvY3VzKCk7XG4gICAgICB9XG4gICAgICBpZiAoaXNGdW5jdGlvbihyZWYuY3VycmVudC5zZWxlY3QpKSB7XG4gICAgICAgIHJlZi5jdXJyZW50LnNlbGVjdCgpO1xuICAgICAgfVxuICAgICAgZm9jdXMuY3VycmVudCA9IGZhbHNlO1xuICAgIH1cbiAgfSk7XG4gIHVzZUV2ZW50KCdwcm9wZXJ0aWVzUGFuZWwuc2hvd0VudHJ5Jywgb25TaG93RW50cnkpO1xuICByZXR1cm4gcmVmO1xufVxuXG4vKipcbiAqIEBjYWxsYmFjayBzZXRTdGlja3lcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gdmFsdWVcbiAqL1xuXG4vKipcbiAqIFVzZSBJbnRlcnNlY3Rpb25PYnNlcnZlciB0byBpZGVudGlmeSB3aGVuIERPTSBlbGVtZW50IGlzIGluIHN0aWNreSBtb2RlLlxuICogSWYgc3RpY2t5IGlzIG9ic2VydmVyZWQgc2V0U3RpY2t5KHRydWUpIHdpbGwgYmUgY2FsbGVkLlxuICogSWYgc3RpY2t5IG1vZGUgaXMgbGVmdCwgc2V0U3RpY2t5KGZhbHNlKSB3aWxsIGJlIGNhbGxlZC5cbiAqXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHJlZlxuICogQHBhcmFtIHtzdHJpbmd9IHNjcm9sbENvbnRhaW5lclNlbGVjdG9yXG4gKiBAcGFyYW0ge3NldFN0aWNreX0gc2V0U3RpY2t5XG4gKi9cbmZ1bmN0aW9uIHVzZVN0aWNreUludGVyc2VjdGlvbk9ic2VydmVyKHJlZiwgc2Nyb2xsQ29udGFpbmVyU2VsZWN0b3IsIHNldFN0aWNreSkge1xuICBjb25zdCBbc2Nyb2xsQ29udGFpbmVyLCBzZXRTY3JvbGxDb250YWluZXJdID0gdXNlU3RhdGUocXVlcnkoc2Nyb2xsQ29udGFpbmVyU2VsZWN0b3IpKTtcbiAgY29uc3QgdXBkYXRlU2Nyb2xsQ29udGFpbmVyID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGNvbnN0IG5ld1Njcm9sbENvbnRhaW5lciA9IHF1ZXJ5KHNjcm9sbENvbnRhaW5lclNlbGVjdG9yKTtcbiAgICBpZiAobmV3U2Nyb2xsQ29udGFpbmVyICE9PSBzY3JvbGxDb250YWluZXIpIHtcbiAgICAgIHNldFNjcm9sbENvbnRhaW5lcihuZXdTY3JvbGxDb250YWluZXIpO1xuICAgIH1cbiAgfSwgW3Njcm9sbENvbnRhaW5lclNlbGVjdG9yLCBzY3JvbGxDb250YWluZXJdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICB1cGRhdGVTY3JvbGxDb250YWluZXIoKTtcbiAgfSwgW3VwZGF0ZVNjcm9sbENvbnRhaW5lcl0pO1xuICB1c2VFdmVudCgncHJvcGVydGllc1BhbmVsLmF0dGFjaCcsIHVwZGF0ZVNjcm9sbENvbnRhaW5lcik7XG4gIHVzZUV2ZW50KCdwcm9wZXJ0aWVzUGFuZWwuZGV0YWNoJywgdXBkYXRlU2Nyb2xsQ29udGFpbmVyKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBPYnNlcnZlciA9IEludGVyc2VjdGlvbk9ic2VydmVyO1xuXG4gICAgLy8gcmV0dXJuIGVhcmx5IGlmIEludGVyc2VjdGlvbk9ic2VydmVyIGlzIG5vdCBhdmFpbGFibGVcbiAgICBpZiAoIU9ic2VydmVyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gVE9ETyhAYmFybWFjKTogdGVzdCB0aGlzXG4gICAgaWYgKCFyZWYuY3VycmVudCB8fCAhc2Nyb2xsQ29udGFpbmVyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IE9ic2VydmVyKGVudHJpZXMgPT4ge1xuICAgICAgLy8gc2Nyb2xsIGNvbnRhaW5lciBpcyB1bm1vdW50ZWQsIGRvIG5vdCB1cGRhdGUgc3RpY2t5IHN0YXRlXG4gICAgICBpZiAoc2Nyb2xsQ29udGFpbmVyLnNjcm9sbEhlaWdodCA9PT0gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBlbnRyaWVzLmZvckVhY2goZW50cnkgPT4ge1xuICAgICAgICBpZiAoZW50cnkuaW50ZXJzZWN0aW9uUmF0aW8gPCAxKSB7XG4gICAgICAgICAgc2V0U3RpY2t5KHRydWUpO1xuICAgICAgICB9IGVsc2UgaWYgKGVudHJ5LmludGVyc2VjdGlvblJhdGlvID09PSAxKSB7XG4gICAgICAgICAgc2V0U3RpY2t5KGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSwge1xuICAgICAgcm9vdDogc2Nyb2xsQ29udGFpbmVyLFxuICAgICAgcm9vdE1hcmdpbjogJzBweCAwcHggOTk5OTk5JSAwcHgnLFxuICAgICAgLy8gVXNlIGJvdHRvbSBtYXJnaW4gdG8gYXZvaWQgc3RpY2t5bmVzcyB3aGVuIHNjcm9sbGluZyBvdXQgdG8gYm90dG9tXG4gICAgICB0aHJlc2hvbGQ6IFsxXVxuICAgIH0pO1xuICAgIG9ic2VydmVyLm9ic2VydmUocmVmLmN1cnJlbnQpO1xuXG4gICAgLy8gVW5vYnNlcnZlIGlmIHVubW91bnRlZFxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBvYnNlcnZlci51bm9ic2VydmUocmVmLmN1cnJlbnQpO1xuICAgIH07XG4gIH0sIFtyZWYuY3VycmVudCwgc2Nyb2xsQ29udGFpbmVyLCBzZXRTdGlja3ldKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgc3RhdGljIGZ1bmN0aW9uIHJlZmVyZW5jZSB3aXRoIGNoYW5naW5nIGJvZHkuXG4gKiBUaGlzIGlzIG5lY2Vzc2FyeSB3aGVuIGV4dGVybmFsIGxpYnJhcmllcyByZXF1aXJlIGEgY2FsbGJhY2sgZnVuY3Rpb25cbiAqIHRoYXQgaGFzIHJlZmVyZW5jZXMgdG8gc3RhdGUgdmFyaWFibGVzLlxuICpcbiAqIFVzYWdlOlxuICogY29uc3QgY2FsbGJhY2sgPSB1c2VTdGF0aWNDYWxsYmFjaygodmFsKSA9PiB7dmFsID09PSBjdXJyZW50U3RhdGV9KTtcbiAqXG4gKiBUaGUgYGNhbGxiYWNrYCByZWZlcmVuY2UgaXMgc3RhdGljIGFuZCBjYW4gYmUgc2FmZWx5IHVzZWQgaW4gZXh0ZXJuYWxcbiAqIGxpYnJhcmllcyBvciBhcyBhIHByb3AgdGhhdCBkb2VzIG5vdCBjYXVzZSByZXJlbmRlcmluZyBvZiBjaGlsZHJlbi5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBmdW5jdGlvbiB3aXRoIGNoYW5naW5nIHJlZmVyZW5jZVxuICogQHJldHVybnMge0Z1bmN0aW9ufSBzdGF0aWMgZnVuY3Rpb24gcmVmZXJlbmNlXG4gKi9cbmZ1bmN0aW9uIHVzZVN0YXRpY0NhbGxiYWNrKGNhbGxiYWNrKSB7XG4gIGNvbnN0IGNhbGxiYWNrUmVmID0gdXNlUmVmKGNhbGxiYWNrKTtcbiAgY2FsbGJhY2tSZWYuY3VycmVudCA9IGNhbGxiYWNrO1xuICByZXR1cm4gdXNlQ2FsbGJhY2soKC4uLmFyZ3MpID0+IGNhbGxiYWNrUmVmLmN1cnJlbnQoLi4uYXJncyksIFtdKTtcbn1cbmZ1bmN0aW9uIHVzZUVsZW1lbnRWaXNpYmxlKGVsZW1lbnQpIHtcbiAgY29uc3QgW3Zpc2libGUsIHNldFZpc2libGVdID0gdXNlU3RhdGUoISFlbGVtZW50ICYmICEhZWxlbWVudC5jbGllbnRIZWlnaHQpO1xuICB1c2VMYXlvdXRFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghZWxlbWVudCkgcmV0dXJuO1xuICAgIGNvbnN0IHJlc2l6ZU9ic2VydmVyID0gbmV3IFJlc2l6ZU9ic2VydmVyKChbZW50cnldKSA9PiB7XG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICBjb25zdCBuZXdWaXNpYmxlID0gISFlbnRyeS5jb250ZW50UmVjdC5oZWlnaHQ7XG4gICAgICAgIGlmIChuZXdWaXNpYmxlICE9PSB2aXNpYmxlKSB7XG4gICAgICAgICAgc2V0VmlzaWJsZShuZXdWaXNpYmxlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcmVzaXplT2JzZXJ2ZXIub2JzZXJ2ZShlbGVtZW50KTtcbiAgICByZXR1cm4gKCkgPT4gcmVzaXplT2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICB9LCBbZWxlbWVudCwgdmlzaWJsZV0pO1xuICByZXR1cm4gdmlzaWJsZTtcbn1cbmZ1bmN0aW9uIEdyb3VwKHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBlbGVtZW50LFxuICAgIGVudHJpZXMgPSBbXSxcbiAgICBpZCxcbiAgICBsYWJlbCxcbiAgICBzaG91bGRPcGVuID0gZmFsc2VcbiAgfSA9IHByb3BzO1xuICBjb25zdCBncm91cFJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgW29wZW4sIHNldE9wZW5dID0gdXNlTGF5b3V0U3RhdGUoWydncm91cHMnLCBpZCwgJ29wZW4nXSwgc2hvdWxkT3Blbik7XG4gIGNvbnN0IG9uU2hvdyA9IHVzZUNhbGxiYWNrKCgpID0+IHNldE9wZW4odHJ1ZSksIFtzZXRPcGVuXSk7XG4gIGNvbnN0IHRvZ2dsZU9wZW4gPSAoKSA9PiBzZXRPcGVuKCFvcGVuKTtcbiAgY29uc3QgW2VkaXRlZCwgc2V0RWRpdGVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3N0aWNreSwgc2V0U3RpY2t5XSA9IHVzZVN0YXRlKGZhbHNlKTtcblxuICAvLyBzZXQgZWRpdGVkIHN0YXRlIGRlcGVuZGluZyBvbiBhbGwgZW50cmllc1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIFRPRE8oQGJhcm1hYyk6IHJlcGxhY2Ugd2l0aCBDU1Mgd2hlbiBgOmhhcygpYCBpcyBzdXBwb3J0ZWQgaW4gYWxsIG1ham9yIGJyb3dzZXJzLCBvciByZXdyaXRlIGFzIGluIGh0dHBzOi8vZ2l0aHViLmNvbS9jYW11bmRhL2NhbXVuZGEtbW9kZWxlci9pc3N1ZXMvMzgxNSNpc3N1ZWNvbW1lbnQtMTczMzAzODE2MVxuICAgIGNvbnN0IHNjaGVkdWxlZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICBjb25zdCBoYXNPbmVFZGl0ZWRFbnRyeSA9IGVudHJpZXMuZmluZChlbnRyeSA9PiB7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICBpZCxcbiAgICAgICAgICBpc0VkaXRlZFxuICAgICAgICB9ID0gZW50cnk7XG4gICAgICAgIGNvbnN0IGVudHJ5Tm9kZSA9IHF1ZXJ5KGBbZGF0YS1lbnRyeS1pZD1cIiR7aWR9XCJdYCk7XG4gICAgICAgIGlmICghaXNGdW5jdGlvbihpc0VkaXRlZCkgfHwgIWVudHJ5Tm9kZSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpbnB1dE5vZGUgPSBxdWVyeSgnLmJpby1wcm9wZXJ0aWVzLXBhbmVsLWlucHV0JywgZW50cnlOb2RlKTtcbiAgICAgICAgcmV0dXJuIGlzRWRpdGVkKGlucHV0Tm9kZSk7XG4gICAgICB9KTtcbiAgICAgIHNldEVkaXRlZChoYXNPbmVFZGl0ZWRFbnRyeSk7XG4gICAgfSk7XG4gICAgcmV0dXJuICgpID0+IGNhbmNlbEFuaW1hdGlvbkZyYW1lKHNjaGVkdWxlZCk7XG4gIH0sIFtlbnRyaWVzLCBzZXRFZGl0ZWRdKTtcblxuICAvLyBzZXQgZXJyb3Igc3RhdGUgZGVwZW5kaW5nIG9uIGFsbCBlbnRyaWVzXG4gIGNvbnN0IGFsbEVycm9ycyA9IHVzZUVycm9ycygpO1xuICBjb25zdCBoYXNFcnJvcnMgPSBlbnRyaWVzLnNvbWUoZW50cnkgPT4gYWxsRXJyb3JzW2VudHJ5LmlkXSk7XG5cbiAgLy8gc2V0IGNzcyBjbGFzcyB3aGVuIGdyb3VwIGlzIHN0aWNreSB0byB0b3BcbiAgdXNlU3RpY2t5SW50ZXJzZWN0aW9uT2JzZXJ2ZXIoZ3JvdXBSZWYsICdkaXYuYmlvLXByb3BlcnRpZXMtcGFuZWwtc2Nyb2xsLWNvbnRhaW5lcicsIHNldFN0aWNreSk7XG4gIGNvbnN0IHByb3BlcnRpZXNQYW5lbENvbnRleHQgPSB7XG4gICAgLi4udXNlQ29udGV4dChMYXlvdXRDb250ZXh0KSxcbiAgICBvblNob3dcbiAgfTtcbiAgcmV0dXJuIGpzeHMoXCJkaXZcIiwge1xuICAgIGNsYXNzOiBcImJpby1wcm9wZXJ0aWVzLXBhbmVsLWdyb3VwXCIsXG4gICAgXCJkYXRhLWdyb3VwLWlkXCI6ICdncm91cC0nICsgaWQsXG4gICAgcmVmOiBncm91cFJlZixcbiAgICBjaGlsZHJlbjogW2pzeHMoXCJkaXZcIiwge1xuICAgICAgY2xhc3M6IGNsYXNzbmFtZXMoJ2Jpby1wcm9wZXJ0aWVzLXBhbmVsLWdyb3VwLWhlYWRlcicsIGVkaXRlZCA/ICcnIDogJ2VtcHR5Jywgb3BlbiA/ICdvcGVuJyA6ICcnLCBzdGlja3kgJiYgb3BlbiA/ICdzdGlja3knIDogJycpLFxuICAgICAgb25DbGljazogdG9nZ2xlT3BlbixcbiAgICAgIGNoaWxkcmVuOiBbanN4KFwiZGl2XCIsIHtcbiAgICAgICAgdGl0bGU6IHByb3BzLnRvb2x0aXAgPyBudWxsIDogbGFiZWwsXG4gICAgICAgIFwiZGF0YS10aXRsZVwiOiBsYWJlbCxcbiAgICAgICAgY2xhc3M6IFwiYmlvLXByb3BlcnRpZXMtcGFuZWwtZ3JvdXAtaGVhZGVyLXRpdGxlXCIsXG4gICAgICAgIGNoaWxkcmVuOiBqc3goVG9vbHRpcFdyYXBwZXIsIHtcbiAgICAgICAgICB2YWx1ZTogcHJvcHMudG9vbHRpcCxcbiAgICAgICAgICBmb3JJZDogJ2dyb3VwLScgKyBpZCxcbiAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LFxuICAgICAgICAgIHBhcmVudDogZ3JvdXBSZWYsXG4gICAgICAgICAgY2hpbGRyZW46IGxhYmVsXG4gICAgICAgIH0pXG4gICAgICB9KSwganN4cyhcImRpdlwiLCB7XG4gICAgICAgIGNsYXNzOiBcImJpby1wcm9wZXJ0aWVzLXBhbmVsLWdyb3VwLWhlYWRlci1idXR0b25zXCIsXG4gICAgICAgIGNoaWxkcmVuOiBbanN4KERhdGFNYXJrZXIsIHtcbiAgICAgICAgICBlZGl0ZWQ6IGVkaXRlZCxcbiAgICAgICAgICBoYXNFcnJvcnM6IGhhc0Vycm9yc1xuICAgICAgICB9KSwganN4KFwiYnV0dG9uXCIsIHtcbiAgICAgICAgICB0eXBlOiBcImJ1dHRvblwiLFxuICAgICAgICAgIHRpdGxlOiBcIlRvZ2dsZSBzZWN0aW9uXCIsXG4gICAgICAgICAgY2xhc3M6IFwiYmlvLXByb3BlcnRpZXMtcGFuZWwtZ3JvdXAtaGVhZGVyLWJ1dHRvbiBiaW8tcHJvcGVydGllcy1wYW5lbC1hcnJvd1wiLFxuICAgICAgICAgIGNoaWxkcmVuOiBqc3goQXJyb3dJY29uLCB7XG4gICAgICAgICAgICBjbGFzczogb3BlbiA/ICdiaW8tcHJvcGVydGllcy1wYW5lbC1hcnJvdy1kb3duJyA6ICdiaW8tcHJvcGVydGllcy1wYW5lbC1hcnJvdy1yaWdodCdcbiAgICAgICAgICB9KVxuICAgICAgICB9KV1cbiAgICAgIH0pXVxuICAgIH0pLCBqc3goXCJkaXZcIiwge1xuICAgICAgY2xhc3M6IGNsYXNzbmFtZXMoJ2Jpby1wcm9wZXJ0aWVzLXBhbmVsLWdyb3VwLWVudHJpZXMnLCBvcGVuID8gJ29wZW4nIDogJycpLFxuICAgICAgY2hpbGRyZW46IGpzeChMYXlvdXRDb250ZXh0LlByb3ZpZGVyLCB7XG4gICAgICAgIHZhbHVlOiBwcm9wZXJ0aWVzUGFuZWxDb250ZXh0LFxuICAgICAgICBjaGlsZHJlbjogZW50cmllcy5tYXAoZW50cnkgPT4ge1xuICAgICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGNvbXBvbmVudDogQ29tcG9uZW50LFxuICAgICAgICAgICAgaWRcbiAgICAgICAgICB9ID0gZW50cnk7XG4gICAgICAgICAgcmV0dXJuIGNyZWF0ZUVsZW1lbnQkMShDb21wb25lbnQsIHtcbiAgICAgICAgICAgIC4uLmVudHJ5LFxuICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCxcbiAgICAgICAgICAgIGtleTogaWRcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgfSldXG4gIH0pO1xufVxuZnVuY3Rpb24gRGF0YU1hcmtlcihwcm9wcykge1xuICBjb25zdCB7XG4gICAgZWRpdGVkLFxuICAgIGhhc0Vycm9yc1xuICB9ID0gcHJvcHM7XG4gIGlmIChoYXNFcnJvcnMpIHtcbiAgICByZXR1cm4ganN4KFwiZGl2XCIsIHtcbiAgICAgIHRpdGxlOiBcIlNlY3Rpb24gY29udGFpbnMgYW4gZXJyb3JcIixcbiAgICAgIGNsYXNzOiBcImJpby1wcm9wZXJ0aWVzLXBhbmVsLWRvdCBiaW8tcHJvcGVydGllcy1wYW5lbC1kb3QtLWVycm9yXCJcbiAgICB9KTtcbiAgfVxuICBpZiAoZWRpdGVkKSB7XG4gICAgcmV0dXJuIGpzeChcImRpdlwiLCB7XG4gICAgICB0aXRsZTogXCJTZWN0aW9uIGNvbnRhaW5zIGVkaXRzXCIsXG4gICAgICBjbGFzczogXCJiaW8tcHJvcGVydGllcy1wYW5lbC1kb3RcIlxuICAgIH0pO1xuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG4vKipcbiAqIEB0eXBlZGVmIHsge1xuICogIHRleHQ6IChlbGVtZW50OiBvYmplY3QpID0+IHN0cmluZyxcbiAqICBpY29uPzogKGVsZW1lbnQ6IE9iamVjdCkgPT4gaW1wb3J0KCdwcmVhY3QnKS5Db21wb25lbnRcbiAqIH0gfSBQbGFjZWhvbGRlckRlZmluaXRpb25cbiAqXG4gKiBAcGFyYW0geyBQbGFjZWhvbGRlckRlZmluaXRpb24gfSBwcm9wc1xuICovXG5mdW5jdGlvbiBQbGFjZWhvbGRlcihwcm9wcykge1xuICBjb25zdCB7XG4gICAgdGV4dCxcbiAgICBpY29uOiBJY29uXG4gIH0gPSBwcm9wcztcbiAgcmV0dXJuIGpzeChcImRpdlwiLCB7XG4gICAgY2xhc3M6IFwiYmlvLXByb3BlcnRpZXMtcGFuZWwgb3BlblwiLFxuICAgIGNoaWxkcmVuOiBqc3hzKFwic2VjdGlvblwiLCB7XG4gICAgICBjbGFzczogXCJiaW8tcHJvcGVydGllcy1wYW5lbC1wbGFjZWhvbGRlclwiLFxuICAgICAgY2hpbGRyZW46IFtJY29uICYmIGpzeChJY29uLCB7XG4gICAgICAgIGNsYXNzOiBcImJpby1wcm9wZXJ0aWVzLXBhbmVsLXBsYWNlaG9sZGVyLWljb25cIlxuICAgICAgfSksIGpzeChcInBcIiwge1xuICAgICAgICBjbGFzczogXCJiaW8tcHJvcGVydGllcy1wYW5lbC1wbGFjZWhvbGRlci10ZXh0XCIsXG4gICAgICAgIGNoaWxkcmVuOiB0ZXh0XG4gICAgICB9KV1cbiAgICB9KVxuICB9KTtcbn1cbmNvbnN0IERFRkFVTFRfTEFZT1VUID0ge307XG5jb25zdCBERUZBVUxUX0RFU0NSSVBUSU9OID0ge307XG5jb25zdCBERUZBVUxUX1RPT0xUSVAgPSB7fTtcblxuLyoqXG4gKiBAdHlwZWRlZiB7IHtcbiAqICAgIGNvbXBvbmVudDogaW1wb3J0KCdwcmVhY3QnKS5Db21wb25lbnQsXG4gKiAgICBpZDogU3RyaW5nLFxuICogICAgaXNFZGl0ZWQ/OiBGdW5jdGlvblxuICogfSB9IEVudHJ5RGVmaW5pdGlvblxuICpcbiAqIEB0eXBlZGVmIHsge1xuICogICAgYXV0b0ZvY3VzRW50cnk6IFN0cmluZyxcbiAqICAgIGF1dG9PcGVuPzogQm9vbGVhbixcbiAqICAgIGVudHJpZXM6IEFycmF5PEVudHJ5RGVmaW5pdGlvbj4sXG4gKiAgICBpZDogU3RyaW5nLFxuICogICAgbGFiZWw6IFN0cmluZyxcbiAqICAgIHJlbW92ZTogKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB2b2lkXG4gKiB9IH0gTGlzdEl0ZW1EZWZpbml0aW9uXG4gKlxuICogQHR5cGVkZWYgeyB7XG4gKiAgICBhZGQ6IChldmVudDogTW91c2VFdmVudCkgPT4gdm9pZCxcbiAqICAgIGNvbXBvbmVudDogaW1wb3J0KCdwcmVhY3QnKS5Db21wb25lbnQsXG4gKiAgICBlbGVtZW50OiBPYmplY3QsXG4gKiAgICBpZDogU3RyaW5nLFxuICogICAgaXRlbXM6IEFycmF5PExpc3RJdGVtRGVmaW5pdGlvbj4sXG4gKiAgICBsYWJlbDogU3RyaW5nLFxuICogICAgc2hvdWxkT3Blbj86IEJvb2xlYW5cbiAqIH0gfSBMaXN0R3JvdXBEZWZpbml0aW9uXG4gKlxuICogQHR5cGVkZWYgeyB7XG4gKiAgICBjb21wb25lbnQ/OiBpbXBvcnQoJ3ByZWFjdCcpLkNvbXBvbmVudCxcbiAqICAgIGVudHJpZXM6IEFycmF5PEVudHJ5RGVmaW5pdGlvbj4sXG4gKiAgICBpZDogU3RyaW5nLFxuICogICAgbGFiZWw6IFN0cmluZyxcbiAqICAgIHNob3VsZE9wZW4/OiBCb29sZWFuXG4gKiB9IH0gR3JvdXBEZWZpbml0aW9uXG4gKlxuICogIEB0eXBlZGVmIHsge1xuICogICAgW2lkOiBTdHJpbmddOiBHZXREZXNjcmlwdGlvbkZ1bmN0aW9uXG4gKiB9IH0gRGVzY3JpcHRpb25Db25maWdcbiAqXG4gKiAgQHR5cGVkZWYgeyB7XG4gKiAgICBbaWQ6IFN0cmluZ106IEdldFRvb2x0aXBGdW5jdGlvblxuICogfSB9IFRvb2x0aXBDb25maWdcbiAqXG4gKiBAY2FsbGJhY2sgeyB7XG4gKiBAcGFyYW0ge3N0cmluZ30gaWRcbiAqIEBwYXJhbSB7T2JqZWN0fSBlbGVtZW50XG4gKiBAcmV0dXJucyB7c3RyaW5nfVxuICogfSB9IEdldERlc2NyaXB0aW9uRnVuY3Rpb25cbiAqXG4gKiBAY2FsbGJhY2sgeyB7XG4gKiBAcGFyYW0ge3N0cmluZ30gaWRcbiAqIEBwYXJhbSB7T2JqZWN0fSBlbGVtZW50XG4gKiBAcmV0dXJucyB7c3RyaW5nfVxuICogfSB9IEdldFRvb2x0aXBGdW5jdGlvblxuICpcbiAqIEB0eXBlZGVmIHsge1xuICogIGdldEVtcHR5OiAoZWxlbWVudDogb2JqZWN0KSA9PiBpbXBvcnQoJy4vY29tcG9uZW50cy9QbGFjZWhvbGRlcicpLlBsYWNlaG9sZGVyRGVmaW5pdGlvbixcbiAqICBnZXRNdWx0aXBsZTogKGVsZW1lbnQ6IE9iamVjdCkgPT4gaW1wb3J0KCcuL2NvbXBvbmVudHMvUGxhY2Vob2xkZXInKS5QbGFjZWhvbGRlckRlZmluaXRpb25cbiAqIH0gfSBQbGFjZWhvbGRlclByb3ZpZGVyXG4gKlxuICovXG5cbi8qKlxuICogQSBiYXNpYyBwcm9wZXJ0aWVzIHBhbmVsIGNvbXBvbmVudC4gRGVzY3JpYmVzICpob3cqIGNvbnRlbnQgd2lsbCBiZSByZW5kZXJlZCwgYWNjZXB0c1xuICogZGF0YSBmcm9tIGltcGxlbWVudG9yIHRvIGRlc2NyaWJlICp3aGF0KiB3aWxsIGJlIHJlbmRlcmVkLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wc1xuICogQHBhcmFtIHtPYmplY3R8QXJyYXl9IHByb3BzLmVsZW1lbnRcbiAqIEBwYXJhbSB7aW1wb3J0KCcuL2NvbXBvbmVudHMvSGVhZGVyJykuSGVhZGVyUHJvdmlkZXJ9IHByb3BzLmhlYWRlclByb3ZpZGVyXG4gKiBAcGFyYW0ge1BsYWNlaG9sZGVyUHJvdmlkZXJ9IFtwcm9wcy5wbGFjZWhvbGRlclByb3ZpZGVyXVxuICogQHBhcmFtIHtBcnJheTxHcm91cERlZmluaXRpb258TGlzdEdyb3VwRGVmaW5pdGlvbj59IHByb3BzLmdyb3Vwc1xuICogQHBhcmFtIHtPYmplY3R9IFtwcm9wcy5sYXlvdXRDb25maWddXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbcHJvcHMubGF5b3V0Q2hhbmdlZF1cbiAqIEBwYXJhbSB7RGVzY3JpcHRpb25Db25maWd9IFtwcm9wcy5kZXNjcmlwdGlvbkNvbmZpZ11cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtwcm9wcy5kZXNjcmlwdGlvbkxvYWRlZF1cbiAqIEBwYXJhbSB7VG9vbHRpcENvbmZpZ30gW3Byb3BzLnRvb2x0aXBDb25maWddXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbcHJvcHMudG9vbHRpcExvYWRlZF1cbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IFtwcm9wcy5mZWVsUG9wdXBDb250YWluZXJdXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbcHJvcHMuZ2V0RmVlbFBvcHVwTGlua3NdXG4gKiBAcGFyYW0ge09iamVjdH0gW3Byb3BzLmV2ZW50QnVzXVxuICovXG5mdW5jdGlvbiBQcm9wZXJ0aWVzUGFuZWwkMShwcm9wcykge1xuICBjb25zdCB7XG4gICAgZWxlbWVudCxcbiAgICBoZWFkZXJQcm92aWRlcixcbiAgICBwbGFjZWhvbGRlclByb3ZpZGVyLFxuICAgIGdyb3VwcyxcbiAgICBsYXlvdXRDb25maWcsXG4gICAgbGF5b3V0Q2hhbmdlZCxcbiAgICBkZXNjcmlwdGlvbkNvbmZpZyxcbiAgICBkZXNjcmlwdGlvbkxvYWRlZCxcbiAgICB0b29sdGlwQ29uZmlnLFxuICAgIHRvb2x0aXBMb2FkZWQsXG4gICAgZXZlbnRCdXNcbiAgfSA9IHByb3BzO1xuXG4gIC8vIHNldC11cCBsYXlvdXQgY29udGV4dFxuICBjb25zdCBbbGF5b3V0LCBzZXRMYXlvdXRdID0gdXNlU3RhdGUoY3JlYXRlTGF5b3V0KGxheW91dENvbmZpZykpO1xuXG4gIC8vIHJlYWN0IHRvIGV4dGVybmFsIGNoYW5nZXMgaW4gdGhlIGxheW91dCBjb25maWdcbiAgdXNlVXBkYXRlTGF5b3V0RWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBuZXdMYXlvdXQgPSBjcmVhdGVMYXlvdXQobGF5b3V0Q29uZmlnKTtcbiAgICBzZXRMYXlvdXQobmV3TGF5b3V0KTtcbiAgfSwgW2xheW91dENvbmZpZ10pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICh0eXBlb2YgbGF5b3V0Q2hhbmdlZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgbGF5b3V0Q2hhbmdlZChsYXlvdXQpO1xuICAgIH1cbiAgfSwgW2xheW91dCwgbGF5b3V0Q2hhbmdlZF0pO1xuICBjb25zdCBnZXRMYXlvdXRGb3JLZXkgPSAoa2V5LCBkZWZhdWx0VmFsdWUpID0+IHtcbiAgICByZXR1cm4gZ2V0KGxheW91dCwga2V5LCBkZWZhdWx0VmFsdWUpO1xuICB9O1xuICBjb25zdCBzZXRMYXlvdXRGb3JLZXkgPSAoa2V5LCBjb25maWcpID0+IHtcbiAgICBjb25zdCBuZXdMYXlvdXQgPSBhc3NpZ24oe30sIGxheW91dCk7XG4gICAgc2V0JDEobmV3TGF5b3V0LCBrZXksIGNvbmZpZyk7XG4gICAgc2V0TGF5b3V0KG5ld0xheW91dCk7XG4gIH07XG4gIGNvbnN0IGxheW91dENvbnRleHQgPSB7XG4gICAgbGF5b3V0LFxuICAgIHNldExheW91dCxcbiAgICBnZXRMYXlvdXRGb3JLZXksXG4gICAgc2V0TGF5b3V0Rm9yS2V5XG4gIH07XG5cbiAgLy8gc2V0LXVwIGRlc2NyaXB0aW9uIGNvbnRleHRcbiAgY29uc3QgZGVzY3JpcHRpb24gPSB1c2VNZW1vKCgpID0+IGNyZWF0ZURlc2NyaXB0aW9uQ29udGV4dChkZXNjcmlwdGlvbkNvbmZpZyksIFtkZXNjcmlwdGlvbkNvbmZpZ10pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICh0eXBlb2YgZGVzY3JpcHRpb25Mb2FkZWQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGRlc2NyaXB0aW9uTG9hZGVkKGRlc2NyaXB0aW9uKTtcbiAgICB9XG4gIH0sIFtkZXNjcmlwdGlvbiwgZGVzY3JpcHRpb25Mb2FkZWRdKTtcbiAgY29uc3QgZ2V0RGVzY3JpcHRpb25Gb3JJZCA9IChpZCwgZWxlbWVudCkgPT4ge1xuICAgIHJldHVybiBkZXNjcmlwdGlvbltpZF0gJiYgZGVzY3JpcHRpb25baWRdKGVsZW1lbnQpO1xuICB9O1xuICBjb25zdCBkZXNjcmlwdGlvbkNvbnRleHQgPSB7XG4gICAgZGVzY3JpcHRpb24sXG4gICAgZ2V0RGVzY3JpcHRpb25Gb3JJZFxuICB9O1xuXG4gIC8vIHNldC11cCB0b29sdGlwIGNvbnRleHRcbiAgY29uc3QgdG9vbHRpcCA9IHVzZU1lbW8oKCkgPT4gY3JlYXRlVG9vbHRpcENvbnRleHQodG9vbHRpcENvbmZpZyksIFt0b29sdGlwQ29uZmlnXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiB0b29sdGlwTG9hZGVkID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0b29sdGlwTG9hZGVkKHRvb2x0aXApO1xuICAgIH1cbiAgfSwgW3Rvb2x0aXAsIHRvb2x0aXBMb2FkZWRdKTtcbiAgY29uc3QgZ2V0VG9vbHRpcEZvcklkID0gKGlkLCBlbGVtZW50KSA9PiB7XG4gICAgcmV0dXJuIHRvb2x0aXBbaWRdICYmIHRvb2x0aXBbaWRdKGVsZW1lbnQpO1xuICB9O1xuICBjb25zdCB0b29sdGlwQ29udGV4dCA9IHtcbiAgICB0b29sdGlwLFxuICAgIGdldFRvb2x0aXBGb3JJZFxuICB9O1xuICBjb25zdCBbZXJyb3JzLCBzZXRFcnJvcnNdID0gdXNlU3RhdGUoe30pO1xuICBjb25zdCBvblNldEVycm9ycyA9ICh7XG4gICAgZXJyb3JzXG4gIH0pID0+IHNldEVycm9ycyhlcnJvcnMpO1xuICB1c2VFdmVudCgncHJvcGVydGllc1BhbmVsLnNldEVycm9ycycsIG9uU2V0RXJyb3JzLCBldmVudEJ1cyk7XG4gIGNvbnN0IGVycm9yc0NvbnRleHQgPSB7XG4gICAgZXJyb3JzXG4gIH07XG4gIGNvbnN0IGV2ZW50Q29udGV4dCA9IHtcbiAgICBldmVudEJ1c1xuICB9O1xuICBjb25zdCBwcm9wZXJ0aWVzUGFuZWxDb250ZXh0ID0ge1xuICAgIGVsZW1lbnRcbiAgfTtcblxuICAvLyBlbXB0eSBzdGF0ZVxuICBpZiAocGxhY2Vob2xkZXJQcm92aWRlciAmJiAhZWxlbWVudCkge1xuICAgIHJldHVybiBqc3goUGxhY2Vob2xkZXIsIHtcbiAgICAgIC4uLnBsYWNlaG9sZGVyUHJvdmlkZXIuZ2V0RW1wdHkoKVxuICAgIH0pO1xuICB9XG5cbiAgLy8gbXVsdGlwbGUgc3RhdGVcbiAgaWYgKHBsYWNlaG9sZGVyUHJvdmlkZXIgJiYgaXNBcnJheShlbGVtZW50KSkge1xuICAgIHJldHVybiBqc3goUGxhY2Vob2xkZXIsIHtcbiAgICAgIC4uLnBsYWNlaG9sZGVyUHJvdmlkZXIuZ2V0TXVsdGlwbGUoKVxuICAgIH0pO1xuICB9XG4gIHJldHVybiBqc3goTGF5b3V0Q29udGV4dC5Qcm92aWRlciwge1xuICAgIHZhbHVlOiBwcm9wZXJ0aWVzUGFuZWxDb250ZXh0LFxuICAgIGNoaWxkcmVuOiBqc3goRXJyb3JzQ29udGV4dC5Qcm92aWRlciwge1xuICAgICAgdmFsdWU6IGVycm9yc0NvbnRleHQsXG4gICAgICBjaGlsZHJlbjoganN4KERlc2NyaXB0aW9uQ29udGV4dC5Qcm92aWRlciwge1xuICAgICAgICB2YWx1ZTogZGVzY3JpcHRpb25Db250ZXh0LFxuICAgICAgICBjaGlsZHJlbjoganN4KFRvb2x0aXBDb250ZXh0LlByb3ZpZGVyLCB7XG4gICAgICAgICAgdmFsdWU6IHRvb2x0aXBDb250ZXh0LFxuICAgICAgICAgIGNoaWxkcmVuOiBqc3goTGF5b3V0Q29udGV4dC5Qcm92aWRlciwge1xuICAgICAgICAgICAgdmFsdWU6IGxheW91dENvbnRleHQsXG4gICAgICAgICAgICBjaGlsZHJlbjoganN4KEV2ZW50Q29udGV4dC5Qcm92aWRlciwge1xuICAgICAgICAgICAgICB2YWx1ZTogZXZlbnRDb250ZXh0LFxuICAgICAgICAgICAgICBjaGlsZHJlbjoganN4cyhcImRpdlwiLCB7XG4gICAgICAgICAgICAgICAgY2xhc3M6IFwiYmlvLXByb3BlcnRpZXMtcGFuZWxcIixcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogW2pzeChIZWFkZXIsIHtcbiAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsXG4gICAgICAgICAgICAgICAgICBoZWFkZXJQcm92aWRlcjogaGVhZGVyUHJvdmlkZXJcbiAgICAgICAgICAgICAgICB9KSwganN4KFwiZGl2XCIsIHtcbiAgICAgICAgICAgICAgICAgIGNsYXNzOiBcImJpby1wcm9wZXJ0aWVzLXBhbmVsLXNjcm9sbC1jb250YWluZXJcIixcbiAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBncm91cHMubWFwKGdyb3VwID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudDogQ29tcG9uZW50ID0gR3JvdXAsXG4gICAgICAgICAgICAgICAgICAgICAgaWRcbiAgICAgICAgICAgICAgICAgICAgfSA9IGdyb3VwO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlRWxlbWVudCQxKENvbXBvbmVudCwge1xuICAgICAgICAgICAgICAgICAgICAgIC4uLmdyb3VwLFxuICAgICAgICAgICAgICAgICAgICAgIGtleTogaWQsXG4gICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSldXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH0pXG4gIH0pO1xufVxuXG4vLyBoZWxwZXJzIC8vLy8vLy8vLy8vLy8vLy8vL1xuXG5mdW5jdGlvbiBjcmVhdGVMYXlvdXQob3ZlcnJpZGVzID0ge30sIGRlZmF1bHRzID0gREVGQVVMVF9MQVlPVVQpIHtcbiAgcmV0dXJuIHtcbiAgICAuLi5kZWZhdWx0cyxcbiAgICAuLi5vdmVycmlkZXNcbiAgfTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZURlc2NyaXB0aW9uQ29udGV4dChvdmVycmlkZXMgPSB7fSkge1xuICByZXR1cm4ge1xuICAgIC4uLkRFRkFVTFRfREVTQ1JJUFRJT04sXG4gICAgLi4ub3ZlcnJpZGVzXG4gIH07XG59XG5mdW5jdGlvbiBjcmVhdGVUb29sdGlwQ29udGV4dChvdmVycmlkZXMgPSB7fSkge1xuICByZXR1cm4ge1xuICAgIC4uLkRFRkFVTFRfVE9PTFRJUCxcbiAgICAuLi5vdmVycmlkZXNcbiAgfTtcbn1cblxuLy8gaG9va3MgLy8vLy8vLy8vLy8vLy8vLy8vXG5cbi8qKlxuICogVGhpcyBob29rIGJlaGF2ZXMgbGlrZSB1c2VMYXlvdXRFZmZlY3QsIGJ1dCBkb2VzIG5vdCB0cmlnZ2VyIG9uIHRoZSBmaXJzdCByZW5kZXIuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZWZmZWN0XG4gKiBAcGFyYW0ge0FycmF5fSBkZXBzXG4gKi9cbmZ1bmN0aW9uIHVzZVVwZGF0ZUxheW91dEVmZmVjdChlZmZlY3QsIGRlcHMpIHtcbiAgY29uc3QgaXNNb3VudGVkID0gdXNlUmVmKGZhbHNlKTtcbiAgdXNlTGF5b3V0RWZmZWN0KCgpID0+IHtcbiAgICBpZiAoaXNNb3VudGVkLmN1cnJlbnQpIHtcbiAgICAgIHJldHVybiBlZmZlY3QoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaXNNb3VudGVkLmN1cnJlbnQgPSB0cnVlO1xuICAgIH1cbiAgfSwgZGVwcyk7XG59XG5cbi8qKlxuICogQHR5cGVkZWYgeyB7XG4gKiAgIFtrZXk6IHN0cmluZ106IHN0cmluZztcbiAqIH0gfSBUcmFuc2xhdGVSZXBsYWNlbWVudHNcbiAqL1xuXG4vKipcbiAqIEEgc2ltcGxlIHRyYW5zbGF0aW9uIHN0dWIgdG8gYmUgdXNlZCBmb3IgbXVsdGktbGFuZ3VhZ2Ugc3VwcG9ydC5cbiAqIENhbiBiZSBlYXNpbHkgcmVwbGFjZWQgd2l0aCBhIG1vcmUgc29waGlzdGljYXRlZCBzb2x1dGlvbi5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdGVtcGxhdGUgdG8gaW50ZXJwb2xhdGVcbiAqIEBwYXJhbSB7VHJhbnNsYXRlUmVwbGFjZW1lbnRzfSBbcmVwbGFjZW1lbnRzXSBhIG1hcCB3aXRoIHN1YnN0aXR1dGVzXG4gKlxuICogQHJldHVybiB7c3RyaW5nfSB0aGUgdHJhbnNsYXRlZCBzdHJpbmdcbiAqL1xuZnVuY3Rpb24gdHJhbnNsYXRlRmFsbGJhY2sodGVtcGxhdGUsIHJlcGxhY2VtZW50cykge1xuICByZXBsYWNlbWVudHMgPSByZXBsYWNlbWVudHMgfHwge307XG4gIHJldHVybiB0ZW1wbGF0ZS5yZXBsYWNlKC97KFtefV0rKX0vZywgZnVuY3Rpb24gKF8sIGtleSkge1xuICAgIHJldHVybiByZXBsYWNlbWVudHNba2V5XSB8fCAneycgKyBrZXkgKyAnfSc7XG4gIH0pO1xufVxuZnVuY3Rpb24gQ29sbGFwc2libGVFbnRyeShwcm9wcykge1xuICBjb25zdCB7XG4gICAgZWxlbWVudCxcbiAgICBlbnRyaWVzID0gW10sXG4gICAgaWQsXG4gICAgbGFiZWwsXG4gICAgb3Blbjogc2hvdWxkT3BlbixcbiAgICByZW1vdmUsXG4gICAgdHJhbnNsYXRlID0gdHJhbnNsYXRlRmFsbGJhY2tcbiAgfSA9IHByb3BzO1xuICBjb25zdCBbb3Blbiwgc2V0T3Blbl0gPSB1c2VTdGF0ZShzaG91bGRPcGVuKTtcbiAgY29uc3QgdG9nZ2xlT3BlbiA9ICgpID0+IHNldE9wZW4oIW9wZW4pO1xuICBjb25zdCB7XG4gICAgb25TaG93XG4gIH0gPSB1c2VDb250ZXh0KExheW91dENvbnRleHQpO1xuICBjb25zdCBwcm9wZXJ0aWVzUGFuZWxDb250ZXh0ID0ge1xuICAgIC4uLnVzZUNvbnRleHQoTGF5b3V0Q29udGV4dCksXG4gICAgb25TaG93OiB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgICBzZXRPcGVuKHRydWUpO1xuICAgICAgaWYgKGlzRnVuY3Rpb24ob25TaG93KSkge1xuICAgICAgICBvblNob3coKTtcbiAgICAgIH1cbiAgICB9LCBbb25TaG93LCBzZXRPcGVuXSlcbiAgfTtcbiAgY29uc3QgcGxhY2Vob2xkZXJMYWJlbCA9IHRyYW5zbGF0ZSgnPGVtcHR5PicpO1xuICByZXR1cm4ganN4cyhcImRpdlwiLCB7XG4gICAgXCJkYXRhLWVudHJ5LWlkXCI6IGlkLFxuICAgIGNsYXNzOiBjbGFzc25hbWVzKCdiaW8tcHJvcGVydGllcy1wYW5lbC1jb2xsYXBzaWJsZS1lbnRyeScsIG9wZW4gPyAnb3BlbicgOiAnJyksXG4gICAgY2hpbGRyZW46IFtqc3hzKFwiZGl2XCIsIHtcbiAgICAgIGNsYXNzOiBcImJpby1wcm9wZXJ0aWVzLXBhbmVsLWNvbGxhcHNpYmxlLWVudHJ5LWhlYWRlclwiLFxuICAgICAgb25DbGljazogdG9nZ2xlT3BlbixcbiAgICAgIGNoaWxkcmVuOiBbanN4KFwiZGl2XCIsIHtcbiAgICAgICAgdGl0bGU6IGxhYmVsIHx8IHBsYWNlaG9sZGVyTGFiZWwsXG4gICAgICAgIGNsYXNzOiBjbGFzc25hbWVzKCdiaW8tcHJvcGVydGllcy1wYW5lbC1jb2xsYXBzaWJsZS1lbnRyeS1oZWFkZXItdGl0bGUnLCAhbGFiZWwgJiYgJ2VtcHR5JyksXG4gICAgICAgIGNoaWxkcmVuOiBsYWJlbCB8fCBwbGFjZWhvbGRlckxhYmVsXG4gICAgICB9KSwganN4KFwiYnV0dG9uXCIsIHtcbiAgICAgICAgdHlwZTogXCJidXR0b25cIixcbiAgICAgICAgdGl0bGU6IHRyYW5zbGF0ZSgnVG9nZ2xlIGxpc3QgaXRlbScpLFxuICAgICAgICBjbGFzczogXCJiaW8tcHJvcGVydGllcy1wYW5lbC1hcnJvdyAgYmlvLXByb3BlcnRpZXMtcGFuZWwtY29sbGFwc2libGUtZW50cnktYXJyb3dcIixcbiAgICAgICAgY2hpbGRyZW46IGpzeChBcnJvd0ljb24sIHtcbiAgICAgICAgICBjbGFzczogb3BlbiA/ICdiaW8tcHJvcGVydGllcy1wYW5lbC1hcnJvdy1kb3duJyA6ICdiaW8tcHJvcGVydGllcy1wYW5lbC1hcnJvdy1yaWdodCdcbiAgICAgICAgfSlcbiAgICAgIH0pLCByZW1vdmUgPyBqc3goXCJidXR0b25cIiwge1xuICAgICAgICB0eXBlOiBcImJ1dHRvblwiLFxuICAgICAgICB0aXRsZTogdHJhbnNsYXRlKCdEZWxldGUgaXRlbScpLFxuICAgICAgICBjbGFzczogXCJiaW8tcHJvcGVydGllcy1wYW5lbC1yZW1vdmUtZW50cnlcIixcbiAgICAgICAgb25DbGljazogcmVtb3ZlLFxuICAgICAgICBjaGlsZHJlbjoganN4KERlbGV0ZUljb24sIHt9KVxuICAgICAgfSkgOiBudWxsXVxuICAgIH0pLCBqc3goXCJkaXZcIiwge1xuICAgICAgY2xhc3M6IGNsYXNzbmFtZXMoJ2Jpby1wcm9wZXJ0aWVzLXBhbmVsLWNvbGxhcHNpYmxlLWVudHJ5LWVudHJpZXMnLCBvcGVuID8gJ29wZW4nIDogJycpLFxuICAgICAgY2hpbGRyZW46IGpzeChMYXlvdXRDb250ZXh0LlByb3ZpZGVyLCB7XG4gICAgICAgIHZhbHVlOiBwcm9wZXJ0aWVzUGFuZWxDb250ZXh0LFxuICAgICAgICBjaGlsZHJlbjogZW50cmllcy5tYXAoZW50cnkgPT4ge1xuICAgICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGNvbXBvbmVudDogQ29tcG9uZW50LFxuICAgICAgICAgICAgaWRcbiAgICAgICAgICB9ID0gZW50cnk7XG4gICAgICAgICAgcmV0dXJuIGNyZWF0ZUVsZW1lbnQkMShDb21wb25lbnQsIHtcbiAgICAgICAgICAgIC4uLmVudHJ5LFxuICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCxcbiAgICAgICAgICAgIGtleTogaWRcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgfSldXG4gIH0pO1xufVxuZnVuY3Rpb24gTGlzdEl0ZW0ocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGF1dG9Gb2N1c0VudHJ5LFxuICAgIGF1dG9PcGVuLFxuICAgIHRyYW5zbGF0ZSA9IHRyYW5zbGF0ZUZhbGxiYWNrXG4gIH0gPSBwcm9wcztcblxuICAvLyBmb2N1cyBzcGVjaWZpZWQgZW50cnkgb24gYXV0byBvcGVuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGF1dG9PcGVuICYmIGF1dG9Gb2N1c0VudHJ5KSB7XG4gICAgICBjb25zdCBlbnRyeSA9IHF1ZXJ5KGBbZGF0YS1lbnRyeS1pZD1cIiR7YXV0b0ZvY3VzRW50cnl9XCJdYCk7XG4gICAgICBjb25zdCBmb2N1c2FibGVJbnB1dCA9IHF1ZXJ5KCcuYmlvLXByb3BlcnRpZXMtcGFuZWwtaW5wdXQnLCBlbnRyeSk7XG4gICAgICBpZiAoZm9jdXNhYmxlSW5wdXQpIHtcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24oZm9jdXNhYmxlSW5wdXQuc2VsZWN0KSkge1xuICAgICAgICAgIGZvY3VzYWJsZUlucHV0LnNlbGVjdCgpO1xuICAgICAgICB9IGVsc2UgaWYgKGlzRnVuY3Rpb24oZm9jdXNhYmxlSW5wdXQuZm9jdXMpKSB7XG4gICAgICAgICAgZm9jdXNhYmxlSW5wdXQuZm9jdXMoKTtcbiAgICAgICAgfVxuICAgICAgICBmb2N1c2FibGVJbnB1dC5zY3JvbGxJbnRvVmlldygpO1xuICAgICAgfVxuICAgIH1cbiAgfSwgW2F1dG9PcGVuLCBhdXRvRm9jdXNFbnRyeV0pO1xuICByZXR1cm4ganN4KFwiZGl2XCIsIHtcbiAgICBjbGFzczogXCJiaW8tcHJvcGVydGllcy1wYW5lbC1saXN0LWl0ZW1cIixcbiAgICBjaGlsZHJlbjoganN4KENvbGxhcHNpYmxlRW50cnksIHtcbiAgICAgIC4uLnByb3BzLFxuICAgICAgb3BlbjogYXV0b09wZW4sXG4gICAgICB0cmFuc2xhdGU6IHRyYW5zbGF0ZVxuICAgIH0pXG4gIH0pO1xufVxuY29uc3Qgbm9vcCQ2ID0gKCkgPT4ge307XG5cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoJy4uL1Byb3BlcnRpZXNQYW5lbCcpLkxpc3RHcm91cERlZmluaXRpb259IHByb3BzXG4gKi9cbmZ1bmN0aW9uIExpc3RHcm91cChwcm9wcykge1xuICBjb25zdCB7XG4gICAgYWRkLFxuICAgIGVsZW1lbnQsXG4gICAgaWQsXG4gICAgaXRlbXMsXG4gICAgbGFiZWwsXG4gICAgc2hvdWxkT3BlbiA9IGZhbHNlLFxuICAgIHRyYW5zbGF0ZSA9IHRyYW5zbGF0ZUZhbGxiYWNrXG4gIH0gPSBwcm9wcztcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAocHJvcHMuc2hvdWxkU29ydCAhPSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnNvbGUud2FybigndGhlIHByb3BlcnR5IFxcJ3Nob3VsZFNvcnRcXCcgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZCcpO1xuICAgIH1cbiAgfSwgW3Byb3BzLnNob3VsZFNvcnRdKTtcbiAgY29uc3QgZ3JvdXBSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IFtvcGVuLCBzZXRPcGVuXSA9IHVzZUxheW91dFN0YXRlKFsnZ3JvdXBzJywgaWQsICdvcGVuJ10sIHNob3VsZE9wZW4pO1xuICBjb25zdCBbc3RpY2t5LCBzZXRTdGlja3ldID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBvblNob3cgPSB1c2VDYWxsYmFjaygoKSA9PiBzZXRPcGVuKHRydWUpLCBbc2V0T3Blbl0pO1xuICBjb25zdCBbbG9jYWxJdGVtcywgc2V0TG9jYWxJdGVtc10gPSB1c2VTdGF0ZShbXSk7XG5cbiAgLy8gRmxhZyB0byBtYXJrIHRoYXQgYWRkIGJ1dHRvbiB3YXMgY2xpY2tlZCBpbiB0aGUgbGFzdCByZW5kZXIgY3ljbGVcbiAgY29uc3QgW2FkZFRyaWdnZXJlZCwgc2V0QWRkVHJpZ2dlcmVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgcHJldkVsZW1lbnQgPSB1c2VQcmV2aW91cyhlbGVtZW50KTtcbiAgY29uc3QgdG9nZ2xlT3BlbiA9IHVzZUNhbGxiYWNrKCgpID0+IHNldE9wZW4oIW9wZW4pLCBbb3Blbl0pO1xuICBjb25zdCBvcGVuSXRlbUlkcyA9IGVsZW1lbnQgPT09IHByZXZFbGVtZW50ICYmIG9wZW4gJiYgYWRkVHJpZ2dlcmVkID8gZ2V0TmV3SXRlbUlkcyhpdGVtcywgbG9jYWxJdGVtcykgOiBbXTtcblxuICAvLyByZXNldCBsb2NhbCBzdGF0ZSBhZnRlciBpdGVtcyBjaGFuZ2VkXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0TG9jYWxJdGVtcyhpdGVtcyk7XG4gICAgc2V0QWRkVHJpZ2dlcmVkKGZhbHNlKTtcbiAgfSwgW2l0ZW1zXSk7XG5cbiAgLy8gc2V0IGNzcyBjbGFzcyB3aGVuIGdyb3VwIGlzIHN0aWNreSB0byB0b3BcbiAgdXNlU3RpY2t5SW50ZXJzZWN0aW9uT2JzZXJ2ZXIoZ3JvdXBSZWYsICdkaXYuYmlvLXByb3BlcnRpZXMtcGFuZWwtc2Nyb2xsLWNvbnRhaW5lcicsIHNldFN0aWNreSk7XG4gIGNvbnN0IGhhc0l0ZW1zID0gISFpdGVtcy5sZW5ndGg7XG4gIGNvbnN0IHByb3BlcnRpZXNQYW5lbENvbnRleHQgPSB7XG4gICAgLi4udXNlQ29udGV4dChMYXlvdXRDb250ZXh0KSxcbiAgICBvblNob3dcbiAgfTtcbiAgY29uc3QgaGFuZGxlQWRkQ2xpY2sgPSBlID0+IHtcbiAgICBzZXRBZGRUcmlnZ2VyZWQodHJ1ZSk7XG4gICAgc2V0T3Blbih0cnVlKTtcbiAgICBhZGQoZSk7XG4gIH07XG4gIGNvbnN0IGFsbEVycm9ycyA9IHVzZUVycm9ycygpO1xuICBjb25zdCBoYXNFcnJvciA9IGl0ZW1zLnNvbWUoaXRlbSA9PiB7XG4gICAgaWYgKGFsbEVycm9yc1tpdGVtLmlkXSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmICghaXRlbS5lbnRyaWVzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gYWxzbyBjaGVjayBpZiB0aGUgZXJyb3IgaXMgbmVzdGVkLCBlLmcuIGZvciBuYW1lLXZhbHVlIGVudHJpZXNcbiAgICByZXR1cm4gaXRlbS5lbnRyaWVzLnNvbWUoZW50cnkgPT4gYWxsRXJyb3JzW2VudHJ5LmlkXSk7XG4gIH0pO1xuICByZXR1cm4ganN4cyhcImRpdlwiLCB7XG4gICAgY2xhc3M6IFwiYmlvLXByb3BlcnRpZXMtcGFuZWwtZ3JvdXBcIixcbiAgICBcImRhdGEtZ3JvdXAtaWRcIjogJ2dyb3VwLScgKyBpZCxcbiAgICByZWY6IGdyb3VwUmVmLFxuICAgIGNoaWxkcmVuOiBbanN4cyhcImRpdlwiLCB7XG4gICAgICBjbGFzczogY2xhc3NuYW1lcygnYmlvLXByb3BlcnRpZXMtcGFuZWwtZ3JvdXAtaGVhZGVyJywgaGFzSXRlbXMgPyAnJyA6ICdlbXB0eScsIGhhc0l0ZW1zICYmIG9wZW4gPyAnb3BlbicgOiAnJywgc3RpY2t5ICYmIG9wZW4gPyAnc3RpY2t5JyA6ICcnKSxcbiAgICAgIG9uQ2xpY2s6IGhhc0l0ZW1zID8gdG9nZ2xlT3BlbiA6IG5vb3AkNixcbiAgICAgIGNoaWxkcmVuOiBbanN4KFwiZGl2XCIsIHtcbiAgICAgICAgdGl0bGU6IHByb3BzLnRvb2x0aXAgPyBudWxsIDogbGFiZWwsXG4gICAgICAgIFwiZGF0YS10aXRsZVwiOiBsYWJlbCxcbiAgICAgICAgY2xhc3M6IFwiYmlvLXByb3BlcnRpZXMtcGFuZWwtZ3JvdXAtaGVhZGVyLXRpdGxlXCIsXG4gICAgICAgIGNoaWxkcmVuOiBqc3goVG9vbHRpcFdyYXBwZXIsIHtcbiAgICAgICAgICB2YWx1ZTogcHJvcHMudG9vbHRpcCxcbiAgICAgICAgICBmb3JJZDogJ2dyb3VwLScgKyBpZCxcbiAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LFxuICAgICAgICAgIHBhcmVudDogZ3JvdXBSZWYsXG4gICAgICAgICAgY2hpbGRyZW46IGxhYmVsXG4gICAgICAgIH0pXG4gICAgICB9KSwganN4cyhcImRpdlwiLCB7XG4gICAgICAgIGNsYXNzOiBcImJpby1wcm9wZXJ0aWVzLXBhbmVsLWdyb3VwLWhlYWRlci1idXR0b25zXCIsXG4gICAgICAgIGNoaWxkcmVuOiBbYWRkID8ganN4cyhcImJ1dHRvblwiLCB7XG4gICAgICAgICAgdHlwZTogXCJidXR0b25cIixcbiAgICAgICAgICB0aXRsZTogdHJhbnNsYXRlKCdDcmVhdGUgbmV3IGxpc3QgaXRlbScpLFxuICAgICAgICAgIGNsYXNzOiBcImJpby1wcm9wZXJ0aWVzLXBhbmVsLWdyb3VwLWhlYWRlci1idXR0b24gYmlvLXByb3BlcnRpZXMtcGFuZWwtYWRkLWVudHJ5XCIsXG4gICAgICAgICAgb25DbGljazogaGFuZGxlQWRkQ2xpY2ssXG4gICAgICAgICAgY2hpbGRyZW46IFtqc3goQ3JlYXRlSWNvbiwge30pLCAhaGFzSXRlbXMgPyBqc3goXCJzcGFuXCIsIHtcbiAgICAgICAgICAgIGNsYXNzOiBcImJpby1wcm9wZXJ0aWVzLXBhbmVsLWFkZC1lbnRyeS1sYWJlbFwiLFxuICAgICAgICAgICAgY2hpbGRyZW46IHRyYW5zbGF0ZSgnQ3JlYXRlJylcbiAgICAgICAgICB9KSA6IG51bGxdXG4gICAgICAgIH0pIDogbnVsbCwgaGFzSXRlbXMgPyBqc3goXCJkaXZcIiwge1xuICAgICAgICAgIHRpdGxlOiB0cmFuc2xhdGUoYExpc3QgY29udGFpbnMge251bU9mSXRlbXN9IGl0ZW0ke2l0ZW1zLmxlbmd0aCAhPSAxID8gJ3MnIDogJyd9YCwge1xuICAgICAgICAgICAgbnVtT2ZJdGVtczogaXRlbXMubGVuZ3RoXG4gICAgICAgICAgfSksXG4gICAgICAgICAgY2xhc3M6IGNsYXNzbmFtZXMoJ2Jpby1wcm9wZXJ0aWVzLXBhbmVsLWxpc3QtYmFkZ2UnLCBoYXNFcnJvciA/ICdiaW8tcHJvcGVydGllcy1wYW5lbC1saXN0LWJhZGdlLS1lcnJvcicgOiAnJyksXG4gICAgICAgICAgY2hpbGRyZW46IGl0ZW1zLmxlbmd0aFxuICAgICAgICB9KSA6IG51bGwsIGhhc0l0ZW1zID8ganN4KFwiYnV0dG9uXCIsIHtcbiAgICAgICAgICB0eXBlOiBcImJ1dHRvblwiLFxuICAgICAgICAgIHRpdGxlOiB0cmFuc2xhdGUoJ1RvZ2dsZSBzZWN0aW9uJyksXG4gICAgICAgICAgY2xhc3M6IFwiYmlvLXByb3BlcnRpZXMtcGFuZWwtZ3JvdXAtaGVhZGVyLWJ1dHRvbiBiaW8tcHJvcGVydGllcy1wYW5lbC1hcnJvd1wiLFxuICAgICAgICAgIGNoaWxkcmVuOiBqc3goQXJyb3dJY29uLCB7XG4gICAgICAgICAgICBjbGFzczogb3BlbiA/ICdiaW8tcHJvcGVydGllcy1wYW5lbC1hcnJvdy1kb3duJyA6ICdiaW8tcHJvcGVydGllcy1wYW5lbC1hcnJvdy1yaWdodCdcbiAgICAgICAgICB9KVxuICAgICAgICB9KSA6IG51bGxdXG4gICAgICB9KV1cbiAgICB9KSwganN4KFwiZGl2XCIsIHtcbiAgICAgIGNsYXNzOiBjbGFzc25hbWVzKCdiaW8tcHJvcGVydGllcy1wYW5lbC1saXN0Jywgb3BlbiAmJiBoYXNJdGVtcyA/ICdvcGVuJyA6ICcnKSxcbiAgICAgIGNoaWxkcmVuOiBqc3goTGF5b3V0Q29udGV4dC5Qcm92aWRlciwge1xuICAgICAgICB2YWx1ZTogcHJvcGVydGllc1BhbmVsQ29udGV4dCxcbiAgICAgICAgY2hpbGRyZW46IGl0ZW1zLm1hcCgoaXRlbSwgaW5kZXgpID0+IHtcbiAgICAgICAgICBpZiAoIWl0ZW0pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgaWRcbiAgICAgICAgICB9ID0gaXRlbTtcblxuICAgICAgICAgIC8vIGlmIGl0ZW0gd2FzIGFkZGVkLCBvcGVuIGl0XG4gICAgICAgICAgLy8gZXhpc3RpbmcgaXRlbXMgd2lsbCBub3QgYmUgYWZmZWN0ZWQgYXMgYXV0b09wZW5cbiAgICAgICAgICAvLyBpcyBvbmx5IGFwcGxpZWQgb24gZmlyc3QgcmVuZGVyXG4gICAgICAgICAgY29uc3QgYXV0b09wZW4gPSBvcGVuSXRlbUlkcy5pbmNsdWRlcyhpdGVtLmlkKTtcbiAgICAgICAgICByZXR1cm4gY3JlYXRlRWxlbWVudCQxKExpc3RJdGVtLCB7XG4gICAgICAgICAgICAuLi5pdGVtLFxuICAgICAgICAgICAgYXV0b09wZW46IGF1dG9PcGVuLFxuICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCxcbiAgICAgICAgICAgIGluZGV4OiBpbmRleCxcbiAgICAgICAgICAgIGtleTogaWQsXG4gICAgICAgICAgICB0cmFuc2xhdGU6IHRyYW5zbGF0ZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9KV1cbiAgfSk7XG59XG5mdW5jdGlvbiBnZXROZXdJdGVtSWRzKG5ld0l0ZW1zLCBvbGRJdGVtcykge1xuICBjb25zdCBuZXdJZHMgPSBuZXdJdGVtcy5tYXAoaXRlbSA9PiBpdGVtLmlkKTtcbiAgY29uc3Qgb2xkSWRzID0gb2xkSXRlbXMubWFwKGl0ZW0gPT4gaXRlbS5pZCk7XG4gIHJldHVybiBuZXdJZHMuZmlsdGVyKGl0ZW1JZCA9PiAhb2xkSWRzLmluY2x1ZGVzKGl0ZW1JZCkpO1xufVxuZnVuY3Rpb24gRGVzY3JpcHRpb24kMShwcm9wcykge1xuICBjb25zdCB7XG4gICAgZWxlbWVudCxcbiAgICBmb3JJZCxcbiAgICB2YWx1ZVxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IGNvbnRleHREZXNjcmlwdGlvbiA9IHVzZURlc2NyaXB0aW9uQ29udGV4dChmb3JJZCwgZWxlbWVudCk7XG4gIGNvbnN0IGRlc2NyaXB0aW9uID0gdmFsdWUgfHwgY29udGV4dERlc2NyaXB0aW9uO1xuICBpZiAoZGVzY3JpcHRpb24pIHtcbiAgICByZXR1cm4ganN4KFwiZGl2XCIsIHtcbiAgICAgIGNsYXNzOiBcImJpby1wcm9wZXJ0aWVzLXBhbmVsLWRlc2NyaXB0aW9uXCIsXG4gICAgICBjaGlsZHJlbjogZGVzY3JpcHRpb25cbiAgICB9KTtcbiAgfVxufVxuZnVuY3Rpb24gQ2hlY2tib3gocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGlkLFxuICAgIGxhYmVsLFxuICAgIG9uQ2hhbmdlLFxuICAgIGRpc2FibGVkLFxuICAgIHZhbHVlID0gZmFsc2UsXG4gICAgb25Gb2N1cyxcbiAgICBvbkJsdXIsXG4gICAgdG9vbHRpcFxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IFtsb2NhbFZhbHVlLCBzZXRMb2NhbFZhbHVlXSA9IHVzZVN0YXRlKHZhbHVlKTtcbiAgY29uc3QgaGFuZGxlQ2hhbmdlQ2FsbGJhY2sgPSAoe1xuICAgIHRhcmdldFxuICB9KSA9PiB7XG4gICAgb25DaGFuZ2UodGFyZ2V0LmNoZWNrZWQpO1xuICB9O1xuICBjb25zdCBoYW5kbGVDaGFuZ2UgPSBlID0+IHtcbiAgICBoYW5kbGVDaGFuZ2VDYWxsYmFjayhlKTtcbiAgICBzZXRMb2NhbFZhbHVlKGUudGFyZ2V0LnZhbHVlKTtcbiAgfTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAodmFsdWUgPT09IGxvY2FsVmFsdWUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc2V0TG9jYWxWYWx1ZSh2YWx1ZSk7XG4gIH0sIFt2YWx1ZV0pO1xuICBjb25zdCByZWYgPSB1c2VTaG93RW50cnlFdmVudChpZCk7XG4gIHJldHVybiBqc3hzKFwiZGl2XCIsIHtcbiAgICBjbGFzczogXCJiaW8tcHJvcGVydGllcy1wYW5lbC1jaGVja2JveFwiLFxuICAgIGNoaWxkcmVuOiBbanN4KFwiaW5wdXRcIiwge1xuICAgICAgcmVmOiByZWYsXG4gICAgICBpZDogcHJlZml4SWQkOChpZCksXG4gICAgICBuYW1lOiBpZCxcbiAgICAgIG9uRm9jdXM6IG9uRm9jdXMsXG4gICAgICBvbkJsdXI6IG9uQmx1cixcbiAgICAgIHR5cGU6IFwiY2hlY2tib3hcIixcbiAgICAgIGNsYXNzOiBcImJpby1wcm9wZXJ0aWVzLXBhbmVsLWlucHV0XCIsXG4gICAgICBvbkNoYW5nZTogaGFuZGxlQ2hhbmdlLFxuICAgICAgY2hlY2tlZDogbG9jYWxWYWx1ZSxcbiAgICAgIGRpc2FibGVkOiBkaXNhYmxlZFxuICAgIH0pLCBqc3goXCJsYWJlbFwiLCB7XG4gICAgICBmb3I6IHByZWZpeElkJDgoaWQpLFxuICAgICAgY2xhc3M6IFwiYmlvLXByb3BlcnRpZXMtcGFuZWwtbGFiZWxcIixcbiAgICAgIGNoaWxkcmVuOiBqc3goVG9vbHRpcFdyYXBwZXIsIHtcbiAgICAgICAgdmFsdWU6IHRvb2x0aXAsXG4gICAgICAgIGZvcklkOiBpZCxcbiAgICAgICAgZWxlbWVudDogcHJvcHMuZWxlbWVudCxcbiAgICAgICAgY2hpbGRyZW46IGxhYmVsXG4gICAgICB9KVxuICAgIH0pXVxuICB9KTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcHNcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wcy5lbGVtZW50XG4gKiBAcGFyYW0ge1N0cmluZ30gcHJvcHMuaWRcbiAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wcy5kZXNjcmlwdGlvblxuICogQHBhcmFtIHtTdHJpbmd9IHByb3BzLmxhYmVsXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcm9wcy5nZXRWYWx1ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gcHJvcHMuc2V0VmFsdWVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHByb3BzLm9uRm9jdXNcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHByb3BzLm9uQmx1clxuICogQHBhcmFtIHtzdHJpbmd8aW1wb3J0KCdwcmVhY3QnKS5Db21wb25lbnR9IHByb3BzLnRvb2x0aXBcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW3Byb3BzLmRpc2FibGVkXVxuICovXG5mdW5jdGlvbiBDaGVja2JveEVudHJ5KHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBlbGVtZW50LFxuICAgIGlkLFxuICAgIGRlc2NyaXB0aW9uLFxuICAgIGxhYmVsLFxuICAgIGdldFZhbHVlLFxuICAgIHNldFZhbHVlLFxuICAgIGRpc2FibGVkLFxuICAgIG9uRm9jdXMsXG4gICAgb25CbHVyLFxuICAgIHRvb2x0aXBcbiAgfSA9IHByb3BzO1xuICBjb25zdCB2YWx1ZSA9IGdldFZhbHVlKGVsZW1lbnQpO1xuICBjb25zdCBlcnJvciA9IHVzZUVycm9yKGlkKTtcbiAgcmV0dXJuIGpzeHMoXCJkaXZcIiwge1xuICAgIGNsYXNzOiBcImJpby1wcm9wZXJ0aWVzLXBhbmVsLWVudHJ5IGJpby1wcm9wZXJ0aWVzLXBhbmVsLWNoZWNrYm94LWVudHJ5XCIsXG4gICAgXCJkYXRhLWVudHJ5LWlkXCI6IGlkLFxuICAgIGNoaWxkcmVuOiBbanN4KENoZWNrYm94LCB7XG4gICAgICBkaXNhYmxlZDogZGlzYWJsZWQsXG4gICAgICBpZDogaWQsXG4gICAgICBsYWJlbDogbGFiZWwsXG4gICAgICBvbkNoYW5nZTogc2V0VmFsdWUsXG4gICAgICBvbkZvY3VzOiBvbkZvY3VzLFxuICAgICAgb25CbHVyOiBvbkJsdXIsXG4gICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICB0b29sdGlwOiB0b29sdGlwLFxuICAgICAgZWxlbWVudDogZWxlbWVudFxuICAgIH0sIGVsZW1lbnQpLCBlcnJvciAmJiBqc3goXCJkaXZcIiwge1xuICAgICAgY2xhc3M6IFwiYmlvLXByb3BlcnRpZXMtcGFuZWwtZXJyb3JcIixcbiAgICAgIGNoaWxkcmVuOiBlcnJvclxuICAgIH0pLCBqc3goRGVzY3JpcHRpb24kMSwge1xuICAgICAgZm9ySWQ6IGlkLFxuICAgICAgZWxlbWVudDogZWxlbWVudCxcbiAgICAgIHZhbHVlOiBkZXNjcmlwdGlvblxuICAgIH0pXVxuICB9KTtcbn1cbmZ1bmN0aW9uIGlzRWRpdGVkJDgobm9kZSkge1xuICByZXR1cm4gbm9kZSAmJiAhIW5vZGUuY2hlY2tlZDtcbn1cblxuLy8gaGVscGVycyAvLy8vLy8vLy8vLy8vLy8vL1xuXG5mdW5jdGlvbiBwcmVmaXhJZCQ4KGlkKSB7XG4gIHJldHVybiBgYmlvLXByb3BlcnRpZXMtcGFuZWwtJHtpZH1gO1xufVxuZnVuY3Rpb24gT3BlblBvcHVwQnV0dG9uKHtcbiAgb25DbGljayxcbiAgdGl0bGUgPSAnT3BlbiBwb3AtdXAgZWRpdG9yJ1xufSkge1xuICByZXR1cm4ganN4KFwiYnV0dG9uXCIsIHtcbiAgICB0eXBlOiBcImJ1dHRvblwiLFxuICAgIHRpdGxlOiB0aXRsZSxcbiAgICBjbGFzczogJ2Jpby1wcm9wZXJ0aWVzLXBhbmVsLW9wZW4tZmVlbC1wb3B1cCcsXG4gICAgb25DbGljazogb25DbGljayxcbiAgICBjaGlsZHJlbjoganN4KE9wZW5Qb3B1cEljb24sIHt9KVxuICB9KTtcbn1cbmNvbnN0IG5vb3AkNSA9ICgpID0+IHt9O1xuXG4vKipcbiAqIEJ1ZmZlciBgLmZvY3VzKClgIGNhbGxzIHdoaWxlIHRoZSBlZGl0b3IgaXMgbm90IGluaXRpYWxpemVkLlxuICogU2V0IEZvY3VzIGluc2lkZSB3aGVuIHRoZSBlZGl0b3IgaXMgcmVhZHkuXG4gKi9cbmNvbnN0IHVzZUJ1ZmZlcmVkRm9jdXMkMSA9IGZ1bmN0aW9uIChlZGl0b3IsIHJlZikge1xuICBjb25zdCBbYnVmZmVyLCBzZXRCdWZmZXJdID0gdXNlU3RhdGUodW5kZWZpbmVkKTtcbiAgcmVmLmN1cnJlbnQgPSB1c2VNZW1vKCgpID0+ICh7XG4gICAgZm9jdXM6IG9mZnNldCA9PiB7XG4gICAgICBpZiAoZWRpdG9yKSB7XG4gICAgICAgIGVkaXRvci5mb2N1cyhvZmZzZXQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvZmZzZXQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgb2Zmc2V0ID0gSW5maW5pdHk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0QnVmZmVyKG9mZnNldCk7XG4gICAgICB9XG4gICAgfVxuICB9KSwgW2VkaXRvcl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICh0eXBlb2YgYnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJiBlZGl0b3IpIHtcbiAgICAgIGVkaXRvci5mb2N1cyhidWZmZXIpO1xuICAgICAgc2V0QnVmZmVyKGZhbHNlKTtcbiAgICB9XG4gIH0sIFtlZGl0b3IsIGJ1ZmZlcl0pO1xufTtcbmNvbnN0IFRlbXBsYXRpbmdFZGl0b3IgPSBmb3J3YXJkUmVmKChwcm9wcywgcmVmKSA9PiB7XG4gIGNvbnN0IHtcbiAgICBvbklucHV0LFxuICAgIGRpc2FibGVkLFxuICAgIHRvb2x0aXBDb250YWluZXIsXG4gICAgZW5hYmxlR3V0dGVycyxcbiAgICB2YWx1ZSxcbiAgICBvbkxpbnQgPSBub29wJDUsXG4gICAgb25PcGVuUG9wdXAgPSBub29wJDUsXG4gICAgcG9wdXBPcGVuLFxuICAgIGNvbnRlbnRBdHRyaWJ1dGVzID0ge30sXG4gICAgaG9zdExhbmd1YWdlID0gbnVsbCxcbiAgICBzaW5nbGVMaW5lID0gZmFsc2VcbiAgfSA9IHByb3BzO1xuICBjb25zdCBpbnB1dFJlZiA9IHVzZVJlZigpO1xuICBjb25zdCBbZWRpdG9yLCBzZXRFZGl0b3JdID0gdXNlU3RhdGUoKTtcbiAgY29uc3QgW2xvY2FsVmFsdWUsIHNldExvY2FsVmFsdWVdID0gdXNlU3RhdGUodmFsdWUgfHwgJycpO1xuICB1c2VCdWZmZXJlZEZvY3VzJDEoZWRpdG9yLCByZWYpO1xuICBjb25zdCBoYW5kbGVJbnB1dCA9IHVzZVN0YXRpY0NhbGxiYWNrKG5ld1ZhbHVlID0+IHtcbiAgICBvbklucHV0KG5ld1ZhbHVlKTtcbiAgICBzZXRMb2NhbFZhbHVlKG5ld1ZhbHVlKTtcbiAgfSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbGV0IGVkaXRvcjtcbiAgICBlZGl0b3IgPSBuZXcgRmVlbGVyc0VkaXRvcih7XG4gICAgICBjb250YWluZXI6IGlucHV0UmVmLmN1cnJlbnQsXG4gICAgICBvbkNoYW5nZTogaGFuZGxlSW5wdXQsXG4gICAgICB2YWx1ZTogbG9jYWxWYWx1ZSxcbiAgICAgIG9uTGludCxcbiAgICAgIGNvbnRlbnRBdHRyaWJ1dGVzLFxuICAgICAgdG9vbHRpcENvbnRhaW5lcixcbiAgICAgIGVuYWJsZUd1dHRlcnMsXG4gICAgICBob3N0TGFuZ3VhZ2UsXG4gICAgICBzaW5nbGVMaW5lLFxuICAgICAgbGluZVdyYXA6IHRydWVcbiAgICB9KTtcbiAgICBzZXRFZGl0b3IoZWRpdG9yKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgb25MaW50KFtdKTtcbiAgICAgIGlucHV0UmVmLmN1cnJlbnQuaW5uZXJIVE1MID0gJyc7XG4gICAgICBzZXRFZGl0b3IobnVsbCk7XG4gICAgfTtcbiAgfSwgW10pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghZWRpdG9yKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh2YWx1ZSA9PT0gbG9jYWxWYWx1ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBlZGl0b3Iuc2V0VmFsdWUodmFsdWUpO1xuICAgIHNldExvY2FsVmFsdWUodmFsdWUpO1xuICB9LCBbdmFsdWVdKTtcbiAgY29uc3QgaGFuZGxlQ2xpY2sgPSAoKSA9PiB7XG4gICAgcmVmLmN1cnJlbnQuZm9jdXMoKTtcbiAgfTtcbiAgcmV0dXJuIGpzeHMoXCJkaXZcIiwge1xuICAgIGNsYXNzOiBjbGFzc25hbWVzKCdiaW8tcHJvcGVydGllcy1wYW5lbC1mZWVsZXJzLWVkaXRvci1jb250YWluZXInLCBwb3B1cE9wZW4gPyAncG9wdXBPcGVuJyA6IG51bGwpLFxuICAgIGNoaWxkcmVuOiBbcG9wdXBPcGVuICYmIGpzeChcImRpdlwiLCB7XG4gICAgICBjbGFzczogXCJiaW8tcHJvcGVydGllcy1wYW5lbC1mZWVsZXJzLWVkaXRvcl9fcG9wdXAtcGxhY2Vob2xkZXJcIixcbiAgICAgIGNoaWxkcmVuOiBcIk9wZW5lZCBpbiBwb3B1cFwiXG4gICAgfSksIGpzeChcImRpdlwiLCB7XG4gICAgICBuYW1lOiBwcm9wcy5uYW1lLFxuICAgICAgY2xhc3M6IGNsYXNzbmFtZXMoJ2Jpby1wcm9wZXJ0aWVzLXBhbmVsLWZlZWxlcnMtZWRpdG9yIGJpby1wcm9wZXJ0aWVzLXBhbmVsLWlucHV0JywgbG9jYWxWYWx1ZSA/ICdlZGl0ZWQnIDogbnVsbCwgZGlzYWJsZWQgPyAnZGlzYWJsZWQnIDogbnVsbCksXG4gICAgICByZWY6IGlucHV0UmVmLFxuICAgICAgb25DbGljazogaGFuZGxlQ2xpY2tcbiAgICB9KSwgIWRpc2FibGVkICYmIGpzeChPcGVuUG9wdXBCdXR0b24sIHtcbiAgICAgIG9uQ2xpY2s6ICgpID0+IG9uT3BlblBvcHVwKCdmZWVsZXJzJylcbiAgICB9KV1cbiAgfSk7XG59KTtcbmNvbnN0IG5vb3AkNCA9ICgpID0+IHt9O1xuXG4vKipcbiAqIEJ1ZmZlciBgLmZvY3VzKClgIGNhbGxzIHdoaWxlIHRoZSBlZGl0b3IgaXMgbm90IGluaXRpYWxpemVkLlxuICogU2V0IEZvY3VzIGluc2lkZSB3aGVuIHRoZSBlZGl0b3IgaXMgcmVhZHkuXG4gKi9cbmNvbnN0IHVzZUJ1ZmZlcmVkRm9jdXMgPSBmdW5jdGlvbiAoZWRpdG9yLCByZWYpIHtcbiAgY29uc3QgW2J1ZmZlciwgc2V0QnVmZmVyXSA9IHVzZVN0YXRlKHVuZGVmaW5lZCk7XG4gIHJlZi5jdXJyZW50ID0gdXNlTWVtbygoKSA9PiAoe1xuICAgIGZvY3VzOiBvZmZzZXQgPT4ge1xuICAgICAgaWYgKGVkaXRvcikge1xuICAgICAgICBlZGl0b3IuZm9jdXMob2Zmc2V0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh0eXBlb2Ygb2Zmc2V0ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIG9mZnNldCA9IEluZmluaXR5O1xuICAgICAgICB9XG4gICAgICAgIHNldEJ1ZmZlcihvZmZzZXQpO1xuICAgICAgfVxuICAgIH1cbiAgfSksIFtlZGl0b3JdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAodHlwZW9mIGJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgJiYgZWRpdG9yKSB7XG4gICAgICBlZGl0b3IuZm9jdXMoYnVmZmVyKTtcbiAgICAgIHNldEJ1ZmZlcihmYWxzZSk7XG4gICAgfVxuICB9LCBbZWRpdG9yLCBidWZmZXJdKTtcbn07XG5jb25zdCBGZWVsRWRpdG9yID0gZm9yd2FyZFJlZigocHJvcHMsIHJlZikgPT4ge1xuICBjb25zdCB7XG4gICAgY29udGVudEF0dHJpYnV0ZXMsXG4gICAgZW5hYmxlR3V0dGVycyxcbiAgICB2YWx1ZSxcbiAgICBvbklucHV0LFxuICAgIG9uRmVlbFRvZ2dsZSA9IG5vb3AkNCxcbiAgICBvbkxpbnQgPSBub29wJDQsXG4gICAgb25PcGVuUG9wdXAgPSBub29wJDQsXG4gICAgcGxhY2Vob2xkZXIsXG4gICAgcG9wdXBPcGVuLFxuICAgIGRpc2FibGVkLFxuICAgIHRvb2x0aXBDb250YWluZXIsXG4gICAgdmFyaWFibGVzLFxuICAgIGZlZWxMYW5ndWFnZUNvbnRleHRcbiAgfSA9IHByb3BzO1xuICBjb25zdCBpbnB1dFJlZiA9IHVzZVJlZigpO1xuICBjb25zdCBbZWRpdG9yLCBzZXRFZGl0b3JdID0gdXNlU3RhdGUoKTtcbiAgY29uc3QgW2xvY2FsVmFsdWUsIHNldExvY2FsVmFsdWVdID0gdXNlU3RhdGUodmFsdWUgfHwgJycpO1xuICBjb25zdCB7XG4gICAgYnVpbHRpbnMsXG4gICAgZGlhbGVjdCxcbiAgICBwYXJzZXJEaWFsZWN0XG4gIH0gPSBmZWVsTGFuZ3VhZ2VDb250ZXh0IHx8IHt9O1xuICB1c2VCdWZmZXJlZEZvY3VzKGVkaXRvciwgcmVmKTtcbiAgY29uc3QgaGFuZGxlSW5wdXQgPSB1c2VTdGF0aWNDYWxsYmFjayhuZXdWYWx1ZSA9PiB7XG4gICAgb25JbnB1dChuZXdWYWx1ZSk7XG4gICAgc2V0TG9jYWxWYWx1ZShuZXdWYWx1ZSk7XG4gIH0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGxldCBlZGl0b3I7XG5cbiAgICAvKiBUcmlnZ2VyIEZFRUwgdG9nZ2xlIHdoZW5cbiAgICAgKlxuICAgICAqIC0gYGJhY2tzcGFjZWAgaXMgcHJlc3NlZFxuICAgICAqIC0gQU5EIHRoZSBjdXJzb3IgaXMgYXQgdGhlIGJlZ2lubmluZyBvZiB0aGUgaW5wdXRcbiAgICAgKi9cbiAgICBjb25zdCBvbktleURvd24gPSBlID0+IHtcbiAgICAgIGlmIChlLmtleSAhPT0gJ0JhY2tzcGFjZScgfHwgIWVkaXRvcikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBzZWxlY3Rpb24gPSBlZGl0b3IuZ2V0U2VsZWN0aW9uKCk7XG4gICAgICBjb25zdCByYW5nZSA9IHNlbGVjdGlvbi5yYW5nZXNbc2VsZWN0aW9uLm1haW5JbmRleF07XG4gICAgICBpZiAocmFuZ2UuZnJvbSA9PT0gMCAmJiByYW5nZS50byA9PT0gMCkge1xuICAgICAgICBvbkZlZWxUb2dnbGUoKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGVkaXRvciA9IG5ldyBFZGl0b3Ioe1xuICAgICAgY29udGFpbmVyOiBpbnB1dFJlZi5jdXJyZW50LFxuICAgICAgb25DaGFuZ2U6IGhhbmRsZUlucHV0LFxuICAgICAgb25LZXlEb3duOiBvbktleURvd24sXG4gICAgICBvbkxpbnQ6IG9uTGludCxcbiAgICAgIHBsYWNlaG9sZGVyOiBwbGFjZWhvbGRlcixcbiAgICAgIHRvb2x0aXBDb250YWluZXI6IHRvb2x0aXBDb250YWluZXIsXG4gICAgICB2YWx1ZTogbG9jYWxWYWx1ZSxcbiAgICAgIHZhcmlhYmxlcyxcbiAgICAgIGJ1aWx0aW5zLFxuICAgICAgZGlhbGVjdCxcbiAgICAgIHBhcnNlckRpYWxlY3QsXG4gICAgICBleHRlbnNpb25zOiBbLi4uKGVuYWJsZUd1dHRlcnMgPyBbbGluZU51bWJlcnMoKV0gOiBbXSksIEVkaXRvclZpZXcubGluZVdyYXBwaW5nXSxcbiAgICAgIGNvbnRlbnRBdHRyaWJ1dGVzXG4gICAgfSk7XG4gICAgc2V0RWRpdG9yKGVkaXRvcik7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIG9uTGludChbXSk7XG4gICAgICBpbnB1dFJlZi5jdXJyZW50LmlubmVySFRNTCA9ICcnO1xuICAgICAgc2V0RWRpdG9yKG51bGwpO1xuICAgIH07XG4gIH0sIFtdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWVkaXRvcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodmFsdWUgPT09IGxvY2FsVmFsdWUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZWRpdG9yLnNldFZhbHVlKHZhbHVlKTtcbiAgICBzZXRMb2NhbFZhbHVlKHZhbHVlKTtcbiAgfSwgW3ZhbHVlXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFlZGl0b3IpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZWRpdG9yLnNldFZhcmlhYmxlcyh2YXJpYWJsZXMpO1xuICB9LCBbdmFyaWFibGVzXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFlZGl0b3IpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZWRpdG9yLnNldFBsYWNlaG9sZGVyKHBsYWNlaG9sZGVyKTtcbiAgfSwgW3BsYWNlaG9sZGVyXSk7XG4gIGNvbnN0IGhhbmRsZUNsaWNrID0gKCkgPT4ge1xuICAgIHJlZi5jdXJyZW50LmZvY3VzKCk7XG4gIH07XG4gIHJldHVybiBqc3hzKFwiZGl2XCIsIHtcbiAgICBjbGFzczogY2xhc3NuYW1lcygnYmlvLXByb3BlcnRpZXMtcGFuZWwtZmVlbC1lZGl0b3ItY29udGFpbmVyJywgZGlzYWJsZWQgPyAnZGlzYWJsZWQnIDogbnVsbCwgcG9wdXBPcGVuID8gJ3BvcHVwT3BlbicgOiBudWxsKSxcbiAgICBjaGlsZHJlbjogW3BvcHVwT3BlbiAmJiBqc3goXCJkaXZcIiwge1xuICAgICAgY2xhc3M6IFwiYmlvLXByb3BlcnRpZXMtcGFuZWwtZmVlbC1lZGl0b3JfX29wZW4tcG9wdXAtcGxhY2Vob2xkZXJcIixcbiAgICAgIGNoaWxkcmVuOiBcIk9wZW5lZCBpbiBlZGl0b3JcIlxuICAgIH0pLCBqc3goXCJkaXZcIiwge1xuICAgICAgbmFtZTogcHJvcHMubmFtZSxcbiAgICAgIGNsYXNzOiBjbGFzc25hbWVzKCdiaW8tcHJvcGVydGllcy1wYW5lbC1pbnB1dCcsIGxvY2FsVmFsdWUgPyAnZWRpdGVkJyA6IG51bGwpLFxuICAgICAgcmVmOiBpbnB1dFJlZixcbiAgICAgIG9uQ2xpY2s6IGhhbmRsZUNsaWNrXG4gICAgfSksICFkaXNhYmxlZCAmJiBqc3goT3BlblBvcHVwQnV0dG9uLCB7XG4gICAgICBvbkNsaWNrOiAoKSA9PiBvbk9wZW5Qb3B1cCgnZmVlbCcpXG4gICAgfSldXG4gIH0pO1xufSk7XG5mdW5jdGlvbiBGZWVsSW5kaWNhdG9yKHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBhY3RpdmVcbiAgfSA9IHByb3BzO1xuICBpZiAoIWFjdGl2ZSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiBqc3goXCJzcGFuXCIsIHtcbiAgICBjbGFzczogXCJiaW8tcHJvcGVydGllcy1wYW5lbC1mZWVsLWluZGljYXRvclwiLFxuICAgIGNoaWxkcmVuOiBcIj1cIlxuICB9KTtcbn1cbmNvbnN0IG5vb3AkMyA9ICgpID0+IHt9O1xuXG4vKipcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wc1xuICogQHBhcmFtIHtPYmplY3R9IHByb3BzLmxhYmVsXG4gKiBAcGFyYW0ge1N0cmluZ30gcHJvcHMuZmVlbFxuICovXG5mdW5jdGlvbiBGZWVsSWNvbihwcm9wcykge1xuICBjb25zdCB7XG4gICAgZmVlbCA9IGZhbHNlLFxuICAgIGFjdGl2ZSxcbiAgICBkaXNhYmxlZCA9IGZhbHNlLFxuICAgIG9uQ2xpY2sgPSBub29wJDNcbiAgfSA9IHByb3BzO1xuICBjb25zdCBmZWVsUmVxdWlyZWRMYWJlbCA9ICdGRUVMIGV4cHJlc3Npb24gaXMgbWFuZGF0b3J5JztcbiAgY29uc3QgZmVlbE9wdGlvbmFsTGFiZWwgPSBgQ2xpY2sgdG8gJHthY3RpdmUgPyAncmVtb3ZlJyA6ICdzZXQgYSd9IGR5bmFtaWMgdmFsdWUgd2l0aCBGRUVMIGV4cHJlc3Npb25gO1xuICBjb25zdCBoYW5kbGVDbGljayA9IGUgPT4ge1xuICAgIG9uQ2xpY2soZSk7XG5cbiAgICAvLyB3aGVuIHBvaW50ZXIgZXZlbnQgd2FzIGNyZWF0ZWQgZnJvbSBrZXlib2FyZCwga2VlcCBmb2N1cyBvbiBidXR0b25cbiAgICBpZiAoIWUucG9pbnRlclR5cGUpIHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfVxuICB9O1xuICByZXR1cm4ganN4KFwiYnV0dG9uXCIsIHtcbiAgICB0eXBlOiBcImJ1dHRvblwiLFxuICAgIGNsYXNzOiBjbGFzc25hbWVzKCdiaW8tcHJvcGVydGllcy1wYW5lbC1mZWVsLWljb24nLCBhY3RpdmUgPyAnYWN0aXZlJyA6IG51bGwsIGZlZWwgPT09ICdyZXF1aXJlZCcgPyAncmVxdWlyZWQnIDogJ29wdGlvbmFsJyksXG4gICAgb25DbGljazogaGFuZGxlQ2xpY2ssXG4gICAgZGlzYWJsZWQ6IGZlZWwgPT09ICdyZXF1aXJlZCcgfHwgZGlzYWJsZWQsXG4gICAgdGl0bGU6IGZlZWwgPT09ICdyZXF1aXJlZCcgPyBmZWVsUmVxdWlyZWRMYWJlbCA6IGZlZWxPcHRpb25hbExhYmVsLFxuICAgIGNoaWxkcmVuOiBqc3goRmVlbEljb24kMSwge30pXG4gIH0pO1xufVxuZnVuY3Rpb24gVG9nZ2xlU3dpdGNoKHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBpZCxcbiAgICBsYWJlbCxcbiAgICBvbklucHV0LFxuICAgIHZhbHVlLFxuICAgIHN3aXRjaGVyTGFiZWwsXG4gICAgaW5saW5lLFxuICAgIG9uRm9jdXMsXG4gICAgb25CbHVyLFxuICAgIGlucHV0UmVmLFxuICAgIHRvb2x0aXBcbiAgfSA9IHByb3BzO1xuICBjb25zdCBbbG9jYWxWYWx1ZSwgc2V0TG9jYWxWYWx1ZV0gPSB1c2VTdGF0ZSh2YWx1ZSk7XG4gIGNvbnN0IGhhbmRsZUlucHV0Q2FsbGJhY2sgPSBhc3luYyAoKSA9PiB7XG4gICAgb25JbnB1dCghdmFsdWUpO1xuICB9O1xuICBjb25zdCBoYW5kbGVJbnB1dCA9IGUgPT4ge1xuICAgIGhhbmRsZUlucHV0Q2FsbGJhY2soKTtcbiAgICBzZXRMb2NhbFZhbHVlKGUudGFyZ2V0LnZhbHVlKTtcbiAgfTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAodmFsdWUgPT09IGxvY2FsVmFsdWUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc2V0TG9jYWxWYWx1ZSh2YWx1ZSk7XG4gIH0sIFt2YWx1ZV0pO1xuICByZXR1cm4ganN4cyhcImRpdlwiLCB7XG4gICAgY2xhc3M6IGNsYXNzbmFtZXMoJ2Jpby1wcm9wZXJ0aWVzLXBhbmVsLXRvZ2dsZS1zd2l0Y2gnLCB7XG4gICAgICBpbmxpbmVcbiAgICB9KSxcbiAgICBjaGlsZHJlbjogW2pzeChcImxhYmVsXCIsIHtcbiAgICAgIGNsYXNzOiBcImJpby1wcm9wZXJ0aWVzLXBhbmVsLWxhYmVsXCIsXG4gICAgICBmb3I6IHByZWZpeElkJDcoaWQpLFxuICAgICAgY2hpbGRyZW46IGpzeChUb29sdGlwV3JhcHBlciwge1xuICAgICAgICB2YWx1ZTogdG9vbHRpcCxcbiAgICAgICAgZm9ySWQ6IGlkLFxuICAgICAgICBlbGVtZW50OiBwcm9wcy5lbGVtZW50LFxuICAgICAgICBjaGlsZHJlbjogbGFiZWxcbiAgICAgIH0pXG4gICAgfSksIGpzeHMoXCJkaXZcIiwge1xuICAgICAgY2xhc3M6IFwiYmlvLXByb3BlcnRpZXMtcGFuZWwtZmllbGQtd3JhcHBlclwiLFxuICAgICAgY2hpbGRyZW46IFtqc3hzKFwibGFiZWxcIiwge1xuICAgICAgICBjbGFzczogXCJiaW8tcHJvcGVydGllcy1wYW5lbC10b2dnbGUtc3dpdGNoX19zd2l0Y2hlclwiLFxuICAgICAgICBjaGlsZHJlbjogW2pzeChcImlucHV0XCIsIHtcbiAgICAgICAgICByZWY6IGlucHV0UmVmLFxuICAgICAgICAgIGlkOiBwcmVmaXhJZCQ3KGlkKSxcbiAgICAgICAgICBjbGFzczogXCJiaW8tcHJvcGVydGllcy1wYW5lbC1pbnB1dFwiLFxuICAgICAgICAgIHR5cGU6IFwiY2hlY2tib3hcIixcbiAgICAgICAgICBvbkZvY3VzOiBvbkZvY3VzLFxuICAgICAgICAgIG9uQmx1cjogb25CbHVyLFxuICAgICAgICAgIG5hbWU6IGlkLFxuICAgICAgICAgIG9uSW5wdXQ6IGhhbmRsZUlucHV0LFxuICAgICAgICAgIGNoZWNrZWQ6ICEhbG9jYWxWYWx1ZVxuICAgICAgICB9KSwganN4KFwic3BhblwiLCB7XG4gICAgICAgICAgY2xhc3M6IFwiYmlvLXByb3BlcnRpZXMtcGFuZWwtdG9nZ2xlLXN3aXRjaF9fc2xpZGVyXCJcbiAgICAgICAgfSldXG4gICAgICB9KSwgc3dpdGNoZXJMYWJlbCAmJiBqc3goXCJwXCIsIHtcbiAgICAgICAgY2xhc3M6IFwiYmlvLXByb3BlcnRpZXMtcGFuZWwtdG9nZ2xlLXN3aXRjaF9fbGFiZWxcIixcbiAgICAgICAgY2hpbGRyZW46IHN3aXRjaGVyTGFiZWxcbiAgICAgIH0pXVxuICAgIH0pXVxuICB9KTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcHNcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wcy5lbGVtZW50XG4gKiBAcGFyYW0ge1N0cmluZ30gcHJvcHMuaWRcbiAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wcy5kZXNjcmlwdGlvblxuICogQHBhcmFtIHtTdHJpbmd9IHByb3BzLmxhYmVsXG4gKiBAcGFyYW0ge1N0cmluZ30gcHJvcHMuc3dpdGNoZXJMYWJlbFxuICogQHBhcmFtIHtCb29sZWFufSBwcm9wcy5pbmxpbmVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHByb3BzLmdldFZhbHVlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcm9wcy5zZXRWYWx1ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gcHJvcHMub25Gb2N1c1xuICogQHBhcmFtIHtGdW5jdGlvbn0gcHJvcHMub25CbHVyXG4gKiBAcGFyYW0ge3N0cmluZ3xpbXBvcnQoJ3ByZWFjdCcpLkNvbXBvbmVudH0gcHJvcHMudG9vbHRpcFxuICovXG5mdW5jdGlvbiBUb2dnbGVTd2l0Y2hFbnRyeShwcm9wcykge1xuICBjb25zdCB7XG4gICAgZWxlbWVudCxcbiAgICBpZCxcbiAgICBkZXNjcmlwdGlvbixcbiAgICBsYWJlbCxcbiAgICBzd2l0Y2hlckxhYmVsLFxuICAgIGlubGluZSxcbiAgICBnZXRWYWx1ZSxcbiAgICBzZXRWYWx1ZSxcbiAgICBvbkZvY3VzLFxuICAgIG9uQmx1cixcbiAgICB0b29sdGlwXG4gIH0gPSBwcm9wcztcbiAgY29uc3QgdmFsdWUgPSBnZXRWYWx1ZShlbGVtZW50KTtcbiAgcmV0dXJuIGpzeHMoXCJkaXZcIiwge1xuICAgIGNsYXNzOiBcImJpby1wcm9wZXJ0aWVzLXBhbmVsLWVudHJ5IGJpby1wcm9wZXJ0aWVzLXBhbmVsLXRvZ2dsZS1zd2l0Y2gtZW50cnlcIixcbiAgICBcImRhdGEtZW50cnktaWRcIjogaWQsXG4gICAgY2hpbGRyZW46IFtqc3goVG9nZ2xlU3dpdGNoLCB7XG4gICAgICBpZDogaWQsXG4gICAgICBsYWJlbDogbGFiZWwsXG4gICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICBvbklucHV0OiBzZXRWYWx1ZSxcbiAgICAgIG9uRm9jdXM6IG9uRm9jdXMsXG4gICAgICBvbkJsdXI6IG9uQmx1cixcbiAgICAgIHN3aXRjaGVyTGFiZWw6IHN3aXRjaGVyTGFiZWwsXG4gICAgICBpbmxpbmU6IGlubGluZSxcbiAgICAgIHRvb2x0aXA6IHRvb2x0aXAsXG4gICAgICBlbGVtZW50OiBlbGVtZW50XG4gICAgfSksIGpzeChEZXNjcmlwdGlvbiQxLCB7XG4gICAgICBmb3JJZDogaWQsXG4gICAgICBlbGVtZW50OiBlbGVtZW50LFxuICAgICAgdmFsdWU6IGRlc2NyaXB0aW9uXG4gICAgfSldXG4gIH0pO1xufVxuZnVuY3Rpb24gaXNFZGl0ZWQkNyhub2RlKSB7XG4gIHJldHVybiBub2RlICYmICEhbm9kZS5jaGVja2VkO1xufVxuXG4vLyBoZWxwZXJzIC8vLy8vLy8vLy8vLy8vLy8vXG5cbmZ1bmN0aW9uIHByZWZpeElkJDcoaWQpIHtcbiAgcmV0dXJuIGBiaW8tcHJvcGVydGllcy1wYW5lbC0ke2lkfWA7XG59XG5mdW5jdGlvbiBOdW1iZXJGaWVsZChwcm9wcykge1xuICBjb25zdCB7XG4gICAgZGVib3VuY2UsXG4gICAgZGlzYWJsZWQsXG4gICAgZGlzcGxheUxhYmVsID0gdHJ1ZSxcbiAgICBpZCxcbiAgICBpbnB1dFJlZixcbiAgICBsYWJlbCxcbiAgICBtYXgsXG4gICAgbWluLFxuICAgIG9uSW5wdXQsXG4gICAgc3RlcCxcbiAgICB2YWx1ZSA9ICcnLFxuICAgIG9uRm9jdXMsXG4gICAgb25CbHVyLFxuICAgIHRvb2x0aXBcbiAgfSA9IHByb3BzO1xuICBjb25zdCBbbG9jYWxWYWx1ZSwgc2V0TG9jYWxWYWx1ZV0gPSB1c2VTdGF0ZSh2YWx1ZSk7XG4gIGNvbnN0IGhhbmRsZUlucHV0Q2FsbGJhY2sgPSB1c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4gZGVib3VuY2UodGFyZ2V0ID0+IHtcbiAgICAgIGlmICh0YXJnZXQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgICAgb25JbnB1dCh0YXJnZXQudmFsdWUgPyBwYXJzZUZsb2F0KHRhcmdldC52YWx1ZSkgOiB1bmRlZmluZWQpO1xuICAgICAgfVxuICAgIH0pO1xuICB9LCBbb25JbnB1dCwgZGVib3VuY2VdKTtcbiAgY29uc3QgaGFuZGxlSW5wdXQgPSBlID0+IHtcbiAgICBoYW5kbGVJbnB1dENhbGxiYWNrKGUudGFyZ2V0KTtcbiAgICBzZXRMb2NhbFZhbHVlKGUudGFyZ2V0LnZhbHVlKTtcbiAgfTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAodmFsdWUgPT09IGxvY2FsVmFsdWUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc2V0TG9jYWxWYWx1ZSh2YWx1ZSk7XG4gIH0sIFt2YWx1ZV0pO1xuICByZXR1cm4ganN4cyhcImRpdlwiLCB7XG4gICAgY2xhc3M6IFwiYmlvLXByb3BlcnRpZXMtcGFuZWwtbnVtYmVyZmllbGRcIixcbiAgICBjaGlsZHJlbjogW2Rpc3BsYXlMYWJlbCAmJiBqc3goXCJsYWJlbFwiLCB7XG4gICAgICBmb3I6IHByZWZpeElkJDYoaWQpLFxuICAgICAgY2xhc3M6IFwiYmlvLXByb3BlcnRpZXMtcGFuZWwtbGFiZWxcIixcbiAgICAgIGNoaWxkcmVuOiBqc3goVG9vbHRpcFdyYXBwZXIsIHtcbiAgICAgICAgdmFsdWU6IHRvb2x0aXAsXG4gICAgICAgIGZvcklkOiBpZCxcbiAgICAgICAgZWxlbWVudDogcHJvcHMuZWxlbWVudCxcbiAgICAgICAgY2hpbGRyZW46IGxhYmVsXG4gICAgICB9KVxuICAgIH0pLCBqc3goXCJpbnB1dFwiLCB7XG4gICAgICBpZDogcHJlZml4SWQkNihpZCksXG4gICAgICByZWY6IGlucHV0UmVmLFxuICAgICAgdHlwZTogXCJudW1iZXJcIixcbiAgICAgIG5hbWU6IGlkLFxuICAgICAgc3BlbGxDaGVjazogXCJmYWxzZVwiLFxuICAgICAgYXV0b0NvbXBsZXRlOiBcIm9mZlwiLFxuICAgICAgZGlzYWJsZWQ6IGRpc2FibGVkLFxuICAgICAgY2xhc3M6IFwiYmlvLXByb3BlcnRpZXMtcGFuZWwtaW5wdXRcIixcbiAgICAgIG1heDogbWF4LFxuICAgICAgbWluOiBtaW4sXG4gICAgICBvbklucHV0OiBoYW5kbGVJbnB1dCxcbiAgICAgIG9uRm9jdXM6IG9uRm9jdXMsXG4gICAgICBvbkJsdXI6IG9uQmx1cixcbiAgICAgIHN0ZXA6IHN0ZXAsXG4gICAgICB2YWx1ZTogbG9jYWxWYWx1ZVxuICAgIH0pXVxuICB9KTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcHNcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gcHJvcHMuZGVib3VuY2VcbiAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wcy5kZXNjcmlwdGlvblxuICogQHBhcmFtIHtCb29sZWFufSBwcm9wcy5kaXNhYmxlZFxuICogQHBhcmFtIHtPYmplY3R9IHByb3BzLmVsZW1lbnRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHByb3BzLmdldFZhbHVlXG4gKiBAcGFyYW0ge1N0cmluZ30gcHJvcHMuaWRcbiAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wcy5sYWJlbFxuICogQHBhcmFtIHtTdHJpbmd9IHByb3BzLm1heFxuICogQHBhcmFtIHtTdHJpbmd9IHByb3BzLm1pblxuICogQHBhcmFtIHtGdW5jdGlvbn0gcHJvcHMuc2V0VmFsdWVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHByb3BzLm9uRm9jdXNcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHByb3BzLm9uQmx1clxuICogQHBhcmFtIHtTdHJpbmd9IHByb3BzLnN0ZXBcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHByb3BzLnZhbGlkYXRlXG4gKi9cbmZ1bmN0aW9uIE51bWJlckZpZWxkRW50cnkocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGRlYm91bmNlLFxuICAgIGRlc2NyaXB0aW9uLFxuICAgIGRpc2FibGVkLFxuICAgIGVsZW1lbnQsXG4gICAgZ2V0VmFsdWUsXG4gICAgaWQsXG4gICAgbGFiZWwsXG4gICAgbWF4LFxuICAgIG1pbixcbiAgICBzZXRWYWx1ZSxcbiAgICBzdGVwLFxuICAgIG9uRm9jdXMsXG4gICAgb25CbHVyLFxuICAgIHZhbGlkYXRlLFxuICAgIHRvb2x0aXBcbiAgfSA9IHByb3BzO1xuICBjb25zdCBnbG9iYWxFcnJvciA9IHVzZUVycm9yKGlkKTtcbiAgY29uc3QgW2xvY2FsRXJyb3IsIHNldExvY2FsRXJyb3JdID0gdXNlU3RhdGUobnVsbCk7XG4gIGxldCB2YWx1ZSA9IGdldFZhbHVlKGVsZW1lbnQpO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChpc0Z1bmN0aW9uKHZhbGlkYXRlKSkge1xuICAgICAgY29uc3QgbmV3VmFsaWRhdGlvbkVycm9yID0gdmFsaWRhdGUodmFsdWUpIHx8IG51bGw7XG4gICAgICBzZXRMb2NhbEVycm9yKG5ld1ZhbGlkYXRpb25FcnJvcik7XG4gICAgfVxuICB9LCBbdmFsdWUsIHZhbGlkYXRlXSk7XG4gIGNvbnN0IG9uSW5wdXQgPSBuZXdWYWx1ZSA9PiB7XG4gICAgbGV0IG5ld1ZhbGlkYXRpb25FcnJvciA9IG51bGw7XG4gICAgaWYgKGlzRnVuY3Rpb24odmFsaWRhdGUpKSB7XG4gICAgICBuZXdWYWxpZGF0aW9uRXJyb3IgPSB2YWxpZGF0ZShuZXdWYWx1ZSkgfHwgbnVsbDtcbiAgICB9XG4gICAgc2V0VmFsdWUobmV3VmFsdWUsIG5ld1ZhbGlkYXRpb25FcnJvcik7XG4gICAgc2V0TG9jYWxFcnJvcihuZXdWYWxpZGF0aW9uRXJyb3IpO1xuICB9O1xuICBjb25zdCBlcnJvciA9IGdsb2JhbEVycm9yIHx8IGxvY2FsRXJyb3I7XG4gIHJldHVybiBqc3hzKFwiZGl2XCIsIHtcbiAgICBjbGFzczogY2xhc3NuYW1lcygnYmlvLXByb3BlcnRpZXMtcGFuZWwtZW50cnknLCBlcnJvciA/ICdoYXMtZXJyb3InIDogJycpLFxuICAgIFwiZGF0YS1lbnRyeS1pZFwiOiBpZCxcbiAgICBjaGlsZHJlbjogW2pzeChOdW1iZXJGaWVsZCwge1xuICAgICAgZGVib3VuY2U6IGRlYm91bmNlLFxuICAgICAgZGlzYWJsZWQ6IGRpc2FibGVkLFxuICAgICAgaWQ6IGlkLFxuICAgICAgbGFiZWw6IGxhYmVsLFxuICAgICAgb25Gb2N1czogb25Gb2N1cyxcbiAgICAgIG9uQmx1cjogb25CbHVyLFxuICAgICAgb25JbnB1dDogb25JbnB1dCxcbiAgICAgIG1heDogbWF4LFxuICAgICAgbWluOiBtaW4sXG4gICAgICBzdGVwOiBzdGVwLFxuICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgdG9vbHRpcDogdG9vbHRpcFxuICAgIH0sIGVsZW1lbnQpLCBlcnJvciAmJiBqc3goXCJkaXZcIiwge1xuICAgICAgY2xhc3M6IFwiYmlvLXByb3BlcnRpZXMtcGFuZWwtZXJyb3JcIixcbiAgICAgIGNoaWxkcmVuOiBlcnJvclxuICAgIH0pLCBqc3goRGVzY3JpcHRpb24kMSwge1xuICAgICAgZm9ySWQ6IGlkLFxuICAgICAgZWxlbWVudDogZWxlbWVudCxcbiAgICAgIHZhbHVlOiBkZXNjcmlwdGlvblxuICAgIH0pXVxuICB9KTtcbn1cbmZ1bmN0aW9uIGlzRWRpdGVkJDYobm9kZSkge1xuICByZXR1cm4gbm9kZSAmJiAhIW5vZGUudmFsdWU7XG59XG5cbi8vIGhlbHBlcnMgLy8vLy8vLy8vLy8vLy8vLy9cblxuZnVuY3Rpb24gcHJlZml4SWQkNihpZCkge1xuICByZXR1cm4gYGJpby1wcm9wZXJ0aWVzLXBhbmVsLSR7aWR9YDtcbn1cbmNvbnN0IG5vb3AkMiA9ICgpID0+IHt9O1xuXG4vKipcbiAqIEB0eXBlZGVmIHsncmVxdWlyZWQnfCdvcHRpb25hbCd8J3N0YXRpYyd9IEZlZWxUeXBlXG4gKi9cblxuLyoqXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcHNcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gcHJvcHMuZGVib3VuY2VcbiAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wcy5pZFxuICogQHBhcmFtIHtPYmplY3R9IHByb3BzLmVsZW1lbnRcbiAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wcy5sYWJlbFxuICogQHBhcmFtIHtTdHJpbmd9IHByb3BzLmhvc3RMYW5ndWFnZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gcHJvcHMub25JbnB1dFxuICogQHBhcmFtIHtGdW5jdGlvbn0gcHJvcHMub25CbHVyXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcm9wcy5vbkVycm9yXG4gKiBAcGFyYW0ge0ZlZWxUeXBlfSBbcHJvcHMuZmVlbF1cbiAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wcy52YWx1ZVxuICogQHBhcmFtIHtCb29sZWFufSBbcHJvcHMuc2luZ2xlTGluZV1cbiAqIEBwYXJhbSB7RnVuY3Rpb259IHByb3BzLnRvb2x0aXBDb250YWluZXJcbiAqIEBwYXJhbSB7RnVuY3Rpb24gfCBpbXBvcnQoJ3ByZWFjdCcpLkNvbXBvbmVudH0gcHJvcHMuT3B0aW9uYWxDb21wb25lbnRcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gcHJvcHMuZGlzYWJsZWRcbiAqIEBwYXJhbSB7QXJyYXl9IHByb3BzLnZhcmlhYmxlc1xuICogQHBhcmFtIHtzdHJpbmd9IFtwcm9wcy5wbGFjZWhvbGRlcl1cbiAqIEBwYXJhbSB7c3RyaW5nIHwgaW1wb3J0KCdwcmVhY3QnKS5Db21wb25lbnR9IHByb3BzLnRvb2x0aXBcbiAqL1xuZnVuY3Rpb24gRmVlbFRleHRmaWVsZChwcm9wcykge1xuICBjb25zdCB7XG4gICAgZGVib3VuY2UsXG4gICAgaWQsXG4gICAgZWxlbWVudCxcbiAgICBsYWJlbCxcbiAgICBob3N0TGFuZ3VhZ2UsXG4gICAgb25JbnB1dCxcbiAgICBvbkJsdXIsXG4gICAgb25FcnJvcixcbiAgICBwbGFjZWhvbGRlcixcbiAgICBmZWVsLFxuICAgIHZhbHVlID0gJycsXG4gICAgZGlzYWJsZWQgPSBmYWxzZSxcbiAgICB2YXJpYWJsZXMsXG4gICAgc2luZ2xlTGluZSxcbiAgICB0b29sdGlwQ29udGFpbmVyLFxuICAgIE9wdGlvbmFsQ29tcG9uZW50ID0gT3B0aW9uYWxGZWVsSW5wdXQsXG4gICAgdG9vbHRpcFxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IFtsb2NhbFZhbHVlLCBzZXRMb2NhbFZhbHVlXSA9IHVzZVN0YXRlKHZhbHVlKTtcbiAgY29uc3QgZWRpdG9yUmVmID0gdXNlU2hvd0VudHJ5RXZlbnQoaWQpO1xuICBjb25zdCBjb250YWluZXJSZWYgPSB1c2VSZWYoKTtcbiAgY29uc3QgZmVlbEFjdGl2ZSA9IGlzU3RyaW5nKGxvY2FsVmFsdWUpICYmIGxvY2FsVmFsdWUuc3RhcnRzV2l0aCgnPScpIHx8IGZlZWwgPT09ICdyZXF1aXJlZCc7XG4gIGNvbnN0IGZlZWxPbmx5VmFsdWUgPSBpc1N0cmluZyhsb2NhbFZhbHVlKSAmJiBsb2NhbFZhbHVlLnN0YXJ0c1dpdGgoJz0nKSA/IGxvY2FsVmFsdWUuc3Vic3RyaW5nKDEpIDogbG9jYWxWYWx1ZTtcbiAgY29uc3QgZmVlbExhbmd1YWdlQ29udGV4dCA9IHVzZUNvbnRleHQoRmVlbExhbmd1YWdlQ29udGV4dCk7XG4gIGNvbnN0IFtmb2N1cywgX3NldEZvY3VzXSA9IHVzZVN0YXRlKHVuZGVmaW5lZCk7XG4gIGNvbnN0IHtcbiAgICBldmVudEJ1c1xuICB9ID0gdXNlQ29udGV4dChFdmVudENvbnRleHQpO1xuICBjb25zdCBbaXNQb3B1cE9wZW4sIHNldElzUG9wdXBPcGVuXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3Qgc2V0Rm9jdXMgPSAob2Zmc2V0ID0gMCkgPT4ge1xuICAgIGNvbnN0IGhhc0ZvY3VzID0gY29udGFpbmVyUmVmLmN1cnJlbnQuY29udGFpbnMoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCk7XG5cbiAgICAvLyBLZWVwIGNhcmV0IHBvc2l0aW9uIGlmIGl0IGlzIGFscmVhZHkgZm9jdXNlZCwgb3RoZXJ3aXNlIGZvY3VzIGF0IHRoZSBlbmRcbiAgICBjb25zdCBwb3NpdGlvbiA9IGhhc0ZvY3VzID8gZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5zZWxlY3Rpb25TdGFydCA6IEluZmluaXR5O1xuICAgIF9zZXRGb2N1cyhwb3NpdGlvbiArIG9mZnNldCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEB0eXBlIHsgaW1wb3J0KCdtaW4tZGFzaCcpLkRlYm91bmNlZEZ1bmN0aW9uIH1cbiAgICovXG4gIGNvbnN0IGhhbmRsZUlucHV0Q2FsbGJhY2sgPSB1c2VEZWJvdW5jZShvbklucHV0LCBkZWJvdW5jZSk7XG4gIGNvbnN0IGhhbmRsZUlucHV0ID0gbmV3VmFsdWUgPT4ge1xuICAgIC8vIHdlIGRvbid0IGNvbW1pdCBlbXB0eSBGRUVMIGV4cHJlc3Npb25zLFxuICAgIC8vIGJ1dCBpbnN0ZWFkIHNlcmlhbGl6ZSB0aGVtIGFzIDx1bmRlZmluZWQ+XG4gICAgY29uc3QgbmV3TW9kZWxWYWx1ZSA9IG5ld1ZhbHVlID09PSAnJyB8fCBuZXdWYWx1ZSA9PT0gJz0nID8gdW5kZWZpbmVkIDogbmV3VmFsdWU7XG4gICAgaGFuZGxlSW5wdXRDYWxsYmFjayhuZXdNb2RlbFZhbHVlKTtcbiAgfTtcbiAgY29uc3QgaGFuZGxlRmVlbFRvZ2dsZSA9IHVzZVN0YXRpY0NhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAoZmVlbCA9PT0gJ3JlcXVpcmVkJykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIWZlZWxBY3RpdmUpIHtcbiAgICAgIHNldExvY2FsVmFsdWUoJz0nICsgbG9jYWxWYWx1ZSk7XG4gICAgICBoYW5kbGVJbnB1dCgnPScgKyBsb2NhbFZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0TG9jYWxWYWx1ZShmZWVsT25seVZhbHVlKTtcbiAgICAgIGhhbmRsZUlucHV0KGZlZWxPbmx5VmFsdWUpO1xuICAgIH1cbiAgfSk7XG4gIGNvbnN0IGhhbmRsZUxvY2FsSW5wdXQgPSBuZXdWYWx1ZSA9PiB7XG4gICAgaWYgKGZlZWxBY3RpdmUpIHtcbiAgICAgIG5ld1ZhbHVlID0gJz0nICsgbmV3VmFsdWU7XG4gICAgfVxuICAgIGlmIChuZXdWYWx1ZSA9PT0gbG9jYWxWYWx1ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzZXRMb2NhbFZhbHVlKG5ld1ZhbHVlKTtcbiAgICBoYW5kbGVJbnB1dChuZXdWYWx1ZSk7XG4gICAgaWYgKCFmZWVsQWN0aXZlICYmIGlzU3RyaW5nKG5ld1ZhbHVlKSAmJiBuZXdWYWx1ZS5zdGFydHNXaXRoKCc9JykpIHtcbiAgICAgIC8vIGZvY3VzIGlzIGJlaGluZCBgPWAgc2lnbiB0aGF0IHdpbGwgYmUgcmVtb3ZlZFxuICAgICAgc2V0Rm9jdXMoLTEpO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgaGFuZGxlT25CbHVyID0gZSA9PiB7XG4gICAgaWYgKGUudGFyZ2V0LnR5cGUgPT09ICdjaGVja2JveCcpIHtcbiAgICAgIG9uSW5wdXQoZS50YXJnZXQuY2hlY2tlZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHRyaW1tZWRWYWx1ZSA9IGUudGFyZ2V0LnZhbHVlLnRyaW0oKTtcbiAgICAgIG9uSW5wdXQodHJpbW1lZFZhbHVlKTtcbiAgICB9XG4gICAgaWYgKG9uQmx1cikge1xuICAgICAgb25CbHVyKGUpO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgaGFuZGxlTGludCA9IHVzZVN0YXRpY0NhbGxiYWNrKChsaW50ID0gW10pID0+IHtcbiAgICBjb25zdCBzeW50YXhFcnJvciA9IGxpbnQuc29tZShyZXBvcnQgPT4gcmVwb3J0LnR5cGUgPT09ICdTeW50YXggRXJyb3InKTtcbiAgICBpZiAoc3ludGF4RXJyb3IpIHtcbiAgICAgIG9uRXJyb3IoJ1VucGFyc2FibGUgRkVFTCBleHByZXNzaW9uLicpO1xuICAgIH0gZWxzZSB7XG4gICAgICBvbkVycm9yKHVuZGVmaW5lZCk7XG4gICAgfVxuICB9KTtcbiAgY29uc3QgaGFuZGxlT3BlblBvcHVwID0gKHR5cGUgPSAnZmVlbCcpID0+IHtcbiAgICBjb25zdCBpc09wZW4gPSBldmVudEJ1cy5maXJlKCdwcm9wZXJ0aWVzUGFuZWwub3BlblBvcHVwJywge1xuICAgICAgZWxlbWVudCxcbiAgICAgIGVudHJ5SWQ6IGlkLFxuICAgICAgaG9zdExhbmd1YWdlLFxuICAgICAgbGFiZWwsXG4gICAgICBvbklucHV0OiBoYW5kbGVMb2NhbElucHV0LFxuICAgICAgc2luZ2xlTGluZSxcbiAgICAgIHNvdXJjZUVsZW1lbnQ6IGVkaXRvclJlZi5jdXJyZW50LFxuICAgICAgdG9vbHRpcENvbnRhaW5lcixcbiAgICAgIHR5cGUsXG4gICAgICB2YWx1ZTogZmVlbE9ubHlWYWx1ZSxcbiAgICAgIHZhcmlhYmxlcyxcbiAgICAgIGZlZWxMYW5ndWFnZUNvbnRleHRcbiAgICB9KTtcbiAgICBpZiAoaXNPcGVuKSB7XG4gICAgICBldmVudEJ1cy5vbmNlKCdwcm9wZXJ0aWVzUGFuZWxQb3B1cC5jbG9zZScsICgpID0+IHtcbiAgICAgICAgc2V0SXNQb3B1cE9wZW4oZmFsc2UpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHNldElzUG9wdXBPcGVuKGlzT3BlbiA9PT0gdHJ1ZSk7XG4gIH07XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBmb2N1cyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGVkaXRvclJlZi5jdXJyZW50LmZvY3VzKGZvY3VzKTtcbiAgICAgIF9zZXRGb2N1cyh1bmRlZmluZWQpO1xuICAgIH1cbiAgfSwgW2ZvY3VzXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHZhbHVlID09PSBsb2NhbFZhbHVlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gRXh0ZXJuYWwgdmFsdWUgY2hhbmdlIHJlbW92ZWQgY29udGVudCA9PiBrZWVwIEZFRUwgY29uZmlndXJhdGlvblxuICAgIGlmICghdmFsdWUpIHtcbiAgICAgIHNldExvY2FsVmFsdWUoZmVlbEFjdGl2ZSA/ICc9JyA6ICcnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc2V0TG9jYWxWYWx1ZSh2YWx1ZSk7XG4gIH0sIFt2YWx1ZV0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBldmVudEJ1cy5maXJlKCdwcm9wZXJ0aWVzUGFuZWwuY2xvc2VQb3B1cCcpO1xuICAgIH07XG4gIH0sIFtdKTtcblxuICAvLyBjb3B5LXBhc3RlIGludGVncmF0aW9uXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgY29weUhhbmRsZXIgPSBldmVudCA9PiB7XG4gICAgICBpZiAoIWZlZWxBY3RpdmUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZXZlbnQuY2xpcGJvYXJkRGF0YS5zZXREYXRhKCdhcHBsaWNhdGlvbi9GRUVMJywgZXZlbnQuY2xpcGJvYXJkRGF0YS5nZXREYXRhKCd0ZXh0JykpO1xuICAgIH07XG4gICAgY29uc3QgcGFzdGVIYW5kbGVyID0gZXZlbnQgPT4ge1xuICAgICAgaWYgKGZlZWxBY3RpdmUgfHwgaXNQb3B1cE9wZW4pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgZGF0YSA9IGV2ZW50LmNsaXBib2FyZERhdGEuZ2V0RGF0YSgnYXBwbGljYXRpb24vRkVFTCcpO1xuICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgaGFuZGxlRmVlbFRvZ2dsZSgpO1xuICAgICAgICAgIHNldEZvY3VzKCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG4gICAgY29udGFpbmVyUmVmLmN1cnJlbnQuYWRkRXZlbnRMaXN0ZW5lcignY29weScsIGNvcHlIYW5kbGVyKTtcbiAgICBjb250YWluZXJSZWYuY3VycmVudC5hZGRFdmVudExpc3RlbmVyKCdjdXQnLCBjb3B5SGFuZGxlcik7XG4gICAgY29udGFpbmVyUmVmLmN1cnJlbnQuYWRkRXZlbnRMaXN0ZW5lcigncGFzdGUnLCBwYXN0ZUhhbmRsZXIpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjb250YWluZXJSZWYuY3VycmVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjb3B5JywgY29weUhhbmRsZXIpO1xuICAgICAgY29udGFpbmVyUmVmLmN1cnJlbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY3V0JywgY29weUhhbmRsZXIpO1xuICAgICAgY29udGFpbmVyUmVmLmN1cnJlbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncGFzdGUnLCBwYXN0ZUhhbmRsZXIpO1xuICAgIH07XG4gIH0sIFtjb250YWluZXJSZWYsIGZlZWxBY3RpdmUsIGhhbmRsZUZlZWxUb2dnbGUsIHNldEZvY3VzXSk7XG4gIHJldHVybiBqc3hzKFwiZGl2XCIsIHtcbiAgICBjbGFzczogY2xhc3NuYW1lcygnYmlvLXByb3BlcnRpZXMtcGFuZWwtZmVlbC1lbnRyeScsIHtcbiAgICAgICdmZWVsLWFjdGl2ZSc6IGZlZWxBY3RpdmVcbiAgICB9KSxcbiAgICBjaGlsZHJlbjogW2pzeHMoXCJsYWJlbFwiLCB7XG4gICAgICBmb3I6IHByZWZpeElkJDUoaWQpLFxuICAgICAgY2xhc3M6IFwiYmlvLXByb3BlcnRpZXMtcGFuZWwtbGFiZWxcIixcbiAgICAgIG9uQ2xpY2s6ICgpID0+IHNldEZvY3VzKCksXG4gICAgICBjaGlsZHJlbjogW2pzeChUb29sdGlwV3JhcHBlciwge1xuICAgICAgICB2YWx1ZTogdG9vbHRpcCxcbiAgICAgICAgZm9ySWQ6IGlkLFxuICAgICAgICBlbGVtZW50OiBwcm9wcy5lbGVtZW50LFxuICAgICAgICBjaGlsZHJlbjogbGFiZWxcbiAgICAgIH0pLCBqc3goRmVlbEljb24sIHtcbiAgICAgICAgbGFiZWw6IGxhYmVsLFxuICAgICAgICBmZWVsOiBmZWVsLFxuICAgICAgICBvbkNsaWNrOiBoYW5kbGVGZWVsVG9nZ2xlLFxuICAgICAgICBhY3RpdmU6IGZlZWxBY3RpdmVcbiAgICAgIH0pXVxuICAgIH0pLCBqc3hzKFwiZGl2XCIsIHtcbiAgICAgIGNsYXNzOiBcImJpby1wcm9wZXJ0aWVzLXBhbmVsLWZlZWwtY29udGFpbmVyXCIsXG4gICAgICByZWY6IGNvbnRhaW5lclJlZixcbiAgICAgIGNoaWxkcmVuOiBbanN4KEZlZWxJbmRpY2F0b3IsIHtcbiAgICAgICAgYWN0aXZlOiBmZWVsQWN0aXZlLFxuICAgICAgICBkaXNhYmxlZDogZmVlbCAhPT0gJ29wdGlvbmFsJyB8fCBkaXNhYmxlZCxcbiAgICAgICAgb25DbGljazogaGFuZGxlRmVlbFRvZ2dsZVxuICAgICAgfSksIGZlZWxBY3RpdmUgPyBqc3goRmVlbEVkaXRvciwge1xuICAgICAgICBuYW1lOiBpZCxcbiAgICAgICAgb25JbnB1dDogaGFuZGxlTG9jYWxJbnB1dCxcbiAgICAgICAgY29udGVudEF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAnaWQnOiBwcmVmaXhJZCQ1KGlkKSxcbiAgICAgICAgICAnYXJpYS1sYWJlbCc6IGxhYmVsXG4gICAgICAgIH0sXG4gICAgICAgIGRpc2FibGVkOiBkaXNhYmxlZCxcbiAgICAgICAgcG9wdXBPcGVuOiBpc1BvcHVwT3BlbixcbiAgICAgICAgb25GZWVsVG9nZ2xlOiAoKSA9PiB7XG4gICAgICAgICAgaGFuZGxlRmVlbFRvZ2dsZSgpO1xuICAgICAgICAgIHNldEZvY3VzKHRydWUpO1xuICAgICAgICB9LFxuICAgICAgICBvbkxpbnQ6IGhhbmRsZUxpbnQsXG4gICAgICAgIG9uT3BlblBvcHVwOiBoYW5kbGVPcGVuUG9wdXAsXG4gICAgICAgIHBsYWNlaG9sZGVyOiBwbGFjZWhvbGRlcixcbiAgICAgICAgdmFsdWU6IGZlZWxPbmx5VmFsdWUsXG4gICAgICAgIHZhcmlhYmxlczogdmFyaWFibGVzLFxuICAgICAgICBmZWVsTGFuZ3VhZ2VDb250ZXh0OiBmZWVsTGFuZ3VhZ2VDb250ZXh0LFxuICAgICAgICByZWY6IGVkaXRvclJlZixcbiAgICAgICAgdG9vbHRpcENvbnRhaW5lcjogdG9vbHRpcENvbnRhaW5lclxuICAgICAgfSkgOiBqc3goT3B0aW9uYWxDb21wb25lbnQsIHtcbiAgICAgICAgLi4ucHJvcHMsXG4gICAgICAgIHBvcHVwT3BlbjogaXNQb3B1cE9wZW4sXG4gICAgICAgIG9uSW5wdXQ6IGhhbmRsZUxvY2FsSW5wdXQsXG4gICAgICAgIG9uQmx1cjogaGFuZGxlT25CbHVyLFxuICAgICAgICBjb250ZW50QXR0cmlidXRlczoge1xuICAgICAgICAgICdpZCc6IHByZWZpeElkJDUoaWQpLFxuICAgICAgICAgICdhcmlhLWxhYmVsJzogbGFiZWxcbiAgICAgICAgfSxcbiAgICAgICAgdmFsdWU6IGxvY2FsVmFsdWUsXG4gICAgICAgIHJlZjogZWRpdG9yUmVmLFxuICAgICAgICBvbk9wZW5Qb3B1cDogaGFuZGxlT3BlblBvcHVwLFxuICAgICAgICBjb250YWluZXJSZWY6IGNvbnRhaW5lclJlZlxuICAgICAgfSldXG4gICAgfSldXG4gIH0pO1xufVxuY29uc3QgT3B0aW9uYWxGZWVsSW5wdXQgPSBmb3J3YXJkUmVmKChwcm9wcywgcmVmKSA9PiB7XG4gIGNvbnN0IHtcbiAgICBpZCxcbiAgICBkaXNhYmxlZCxcbiAgICBvbklucHV0LFxuICAgIHZhbHVlLFxuICAgIG9uRm9jdXMsXG4gICAgb25CbHVyLFxuICAgIHBsYWNlaG9sZGVyXG4gIH0gPSBwcm9wcztcbiAgY29uc3QgaW5wdXRSZWYgPSB1c2VSZWYoKTtcblxuICAvLyBUbyBiZSBjb25zaXN0ZW50IHdpdGggdGhlIEZFRUwgZWRpdG9yLCBzZXQgZm9jdXMgYXQgc3RhcnQgb2YgaW5wdXRcbiAgLy8gdGhpcyBlbnN1cmVzIGNsZWFuIGVkaXRpbmcgZXhwZXJpZW5jZSB3aGVuIHN3aXRjaGluZyB3aXRoIHRoZSBrZXlib2FyZFxuICByZWYuY3VycmVudCA9IHtcbiAgICBmb2N1czogcG9zaXRpb24gPT4ge1xuICAgICAgY29uc3QgaW5wdXQgPSBpbnB1dFJlZi5jdXJyZW50O1xuICAgICAgaWYgKCFpbnB1dCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpbnB1dC5mb2N1cygpO1xuICAgICAgaWYgKHR5cGVvZiBwb3NpdGlvbiA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgaWYgKHBvc2l0aW9uID4gdmFsdWUubGVuZ3RoKSB7XG4gICAgICAgICAgcG9zaXRpb24gPSB2YWx1ZS5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgaW5wdXQuc2V0U2VsZWN0aW9uUmFuZ2UocG9zaXRpb24sIHBvc2l0aW9uKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIHJldHVybiBqc3goXCJpbnB1dFwiLCB7XG4gICAgaWQ6IHByZWZpeElkJDUoaWQpLFxuICAgIHR5cGU6IFwidGV4dFwiLFxuICAgIHJlZjogaW5wdXRSZWYsXG4gICAgbmFtZTogaWQsXG4gICAgc3BlbGxDaGVjazogXCJmYWxzZVwiLFxuICAgIGF1dG9Db21wbGV0ZTogXCJvZmZcIixcbiAgICBkaXNhYmxlZDogZGlzYWJsZWQsXG4gICAgY2xhc3M6IFwiYmlvLXByb3BlcnRpZXMtcGFuZWwtaW5wdXRcIixcbiAgICBvbklucHV0OiBlID0+IG9uSW5wdXQoZS50YXJnZXQudmFsdWUpLFxuICAgIG9uRm9jdXM6IG9uRm9jdXMsXG4gICAgb25CbHVyOiBvbkJsdXIsXG4gICAgcGxhY2Vob2xkZXI6IHBsYWNlaG9sZGVyLFxuICAgIHZhbHVlOiB2YWx1ZSB8fCAnJ1xuICB9KTtcbn0pO1xuY29uc3QgT3B0aW9uYWxGZWVsTnVtYmVyRmllbGQgPSBmb3J3YXJkUmVmKChwcm9wcywgcmVmKSA9PiB7XG4gIGNvbnN0IHtcbiAgICBpZCxcbiAgICBkZWJvdW5jZSxcbiAgICBkaXNhYmxlZCxcbiAgICBvbklucHV0LFxuICAgIHZhbHVlLFxuICAgIG1pbixcbiAgICBtYXgsXG4gICAgc3RlcCxcbiAgICBvbkZvY3VzLFxuICAgIG9uQmx1clxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IGlucHV0UmVmID0gdXNlUmVmKCk7XG5cbiAgLy8gVG8gYmUgY29uc2lzdGVudCB3aXRoIHRoZSBGRUVMIGVkaXRvciwgc2V0IGZvY3VzIGF0IHN0YXJ0IG9mIGlucHV0XG4gIC8vIHRoaXMgZW5zdXJlcyBjbGVhbiBlZGl0aW5nIGV4cGVyaWVuY2Ugd2hlbiBzd2l0Y2hpbmcgd2l0aCB0aGUga2V5Ym9hcmRcbiAgcmVmLmN1cnJlbnQgPSB7XG4gICAgZm9jdXM6IHBvc2l0aW9uID0+IHtcbiAgICAgIGNvbnN0IGlucHV0ID0gaW5wdXRSZWYuY3VycmVudDtcbiAgICAgIGlmICghaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaW5wdXQuZm9jdXMoKTtcbiAgICAgIGlmICh0eXBlb2YgcG9zaXRpb24gPT09ICdudW1iZXInICYmIHBvc2l0aW9uICE9PSBJbmZpbml0eSkge1xuICAgICAgICBpZiAocG9zaXRpb24gPiB2YWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgICBwb3NpdGlvbiA9IHZhbHVlLmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICBpbnB1dC5zZXRTZWxlY3Rpb25SYW5nZShwb3NpdGlvbiwgcG9zaXRpb24pO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgcmV0dXJuIGpzeChOdW1iZXJGaWVsZCwge1xuICAgIGlkOiBpZCxcbiAgICBkZWJvdW5jZTogZGVib3VuY2UsXG4gICAgZGlzYWJsZWQ6IGRpc2FibGVkLFxuICAgIGRpc3BsYXlMYWJlbDogZmFsc2UsXG4gICAgaW5wdXRSZWY6IGlucHV0UmVmLFxuICAgIG1heDogbWF4LFxuICAgIG1pbjogbWluLFxuICAgIG9uSW5wdXQ6IG9uSW5wdXQsXG4gICAgc3RlcDogc3RlcCxcbiAgICB2YWx1ZTogdmFsdWUsXG4gICAgb25Gb2N1czogb25Gb2N1cyxcbiAgICBvbkJsdXI6IG9uQmx1clxuICB9KTtcbn0pO1xuZm9yd2FyZFJlZigocHJvcHMsIHJlZikgPT4ge1xuICBjb25zdCB7XG4gICAgaWQsXG4gICAgZGlzYWJsZWQsXG4gICAgb25JbnB1dCxcbiAgICB2YWx1ZSxcbiAgICBvbkZvY3VzLFxuICAgIG9uQmx1cixcbiAgICBwbGFjZWhvbGRlclxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IGlucHV0UmVmID0gdXNlUmVmKCk7XG5cbiAgLy8gVG8gYmUgY29uc2lzdGVudCB3aXRoIHRoZSBGRUVMIGVkaXRvciwgc2V0IGZvY3VzIGF0IHN0YXJ0IG9mIGlucHV0XG4gIC8vIHRoaXMgZW5zdXJlcyBjbGVhbiBlZGl0aW5nIGV4cGVyaWVuY2Ugd2hlbiBzd2l0Y2hpbmcgd2l0aCB0aGUga2V5Ym9hcmRcbiAgcmVmLmN1cnJlbnQgPSB7XG4gICAgZm9jdXM6ICgpID0+IHtcbiAgICAgIGNvbnN0IGlucHV0ID0gaW5wdXRSZWYuY3VycmVudDtcbiAgICAgIGlmICghaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaW5wdXQuZm9jdXMoKTtcbiAgICAgIGlucHV0LnNldFNlbGVjdGlvblJhbmdlKDAsIDApO1xuICAgIH1cbiAgfTtcbiAgcmV0dXJuIGpzeChcInRleHRhcmVhXCIsIHtcbiAgICBpZDogcHJlZml4SWQkNShpZCksXG4gICAgdHlwZTogXCJ0ZXh0XCIsXG4gICAgcmVmOiBpbnB1dFJlZixcbiAgICBuYW1lOiBpZCxcbiAgICBzcGVsbENoZWNrOiBcImZhbHNlXCIsXG4gICAgYXV0b0NvbXBsZXRlOiBcIm9mZlwiLFxuICAgIGRpc2FibGVkOiBkaXNhYmxlZCxcbiAgICBjbGFzczogXCJiaW8tcHJvcGVydGllcy1wYW5lbC1pbnB1dFwiLFxuICAgIG9uSW5wdXQ6IGUgPT4gb25JbnB1dChlLnRhcmdldC52YWx1ZSksXG4gICAgb25Gb2N1czogb25Gb2N1cyxcbiAgICBvbkJsdXI6IG9uQmx1cixcbiAgICBwbGFjZWhvbGRlcjogcGxhY2Vob2xkZXIsXG4gICAgdmFsdWU6IHZhbHVlIHx8ICcnLFxuICAgIFwiZGF0YS1ncmFtbVwiOiBcImZhbHNlXCJcbiAgfSk7XG59KTtcbmNvbnN0IE9wdGlvbmFsRmVlbFRvZ2dsZVN3aXRjaCA9IGZvcndhcmRSZWYoKHByb3BzLCByZWYpID0+IHtcbiAgY29uc3Qge1xuICAgIGlkLFxuICAgIG9uSW5wdXQsXG4gICAgdmFsdWUsXG4gICAgb25Gb2N1cyxcbiAgICBvbkJsdXIsXG4gICAgc3dpdGNoZXJMYWJlbFxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IGlucHV0UmVmID0gdXNlUmVmKCk7XG5cbiAgLy8gVG8gYmUgY29uc2lzdGVudCB3aXRoIHRoZSBGRUVMIGVkaXRvciwgc2V0IGZvY3VzIGF0IHN0YXJ0IG9mIGlucHV0XG4gIC8vIHRoaXMgZW5zdXJlcyBjbGVhbiBlZGl0aW5nIGV4cGVyaWVuY2Ugd2hlbiBzd2l0Y2hpbmcgd2l0aCB0aGUga2V5Ym9hcmRcbiAgcmVmLmN1cnJlbnQgPSB7XG4gICAgZm9jdXM6ICgpID0+IHtcbiAgICAgIGNvbnN0IGlucHV0ID0gaW5wdXRSZWYuY3VycmVudDtcbiAgICAgIGlmICghaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaW5wdXQuZm9jdXMoKTtcbiAgICB9XG4gIH07XG4gIHJldHVybiBqc3goVG9nZ2xlU3dpdGNoLCB7XG4gICAgaWQ6IGlkLFxuICAgIHZhbHVlOiB2YWx1ZSxcbiAgICBpbnB1dFJlZjogaW5wdXRSZWYsXG4gICAgb25JbnB1dDogb25JbnB1dCxcbiAgICBvbkZvY3VzOiBvbkZvY3VzLFxuICAgIG9uQmx1cjogb25CbHVyLFxuICAgIHN3aXRjaGVyTGFiZWw6IHN3aXRjaGVyTGFiZWxcbiAgfSk7XG59KTtcbmZvcndhcmRSZWYoKHByb3BzLCByZWYpID0+IHtcbiAgY29uc3Qge1xuICAgIGlkLFxuICAgIGRpc2FibGVkLFxuICAgIG9uSW5wdXQsXG4gICAgdmFsdWUsXG4gICAgb25Gb2N1cyxcbiAgICBvbkJsdXJcbiAgfSA9IHByb3BzO1xuICBjb25zdCBpbnB1dFJlZiA9IHVzZVJlZigpO1xuICBjb25zdCBoYW5kbGVDaGFuZ2UgPSAoe1xuICAgIHRhcmdldFxuICB9KSA9PiB7XG4gICAgb25JbnB1dCh0YXJnZXQuY2hlY2tlZCk7XG4gIH07XG5cbiAgLy8gVG8gYmUgY29uc2lzdGVudCB3aXRoIHRoZSBGRUVMIGVkaXRvciwgc2V0IGZvY3VzIGF0IHN0YXJ0IG9mIGlucHV0XG4gIC8vIHRoaXMgZW5zdXJlcyBjbGVhbiBlZGl0aW5nIGV4cGVyaWVuY2Ugd2hlbiBzd2l0Y2hpbmcgd2l0aCB0aGUga2V5Ym9hcmRcbiAgcmVmLmN1cnJlbnQgPSB7XG4gICAgZm9jdXM6ICgpID0+IHtcbiAgICAgIGNvbnN0IGlucHV0ID0gaW5wdXRSZWYuY3VycmVudDtcbiAgICAgIGlmICghaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaW5wdXQuZm9jdXMoKTtcbiAgICB9XG4gIH07XG4gIHJldHVybiBqc3goXCJpbnB1dFwiLCB7XG4gICAgcmVmOiBpbnB1dFJlZixcbiAgICBpZDogcHJlZml4SWQkNShpZCksXG4gICAgbmFtZTogaWQsXG4gICAgb25Gb2N1czogb25Gb2N1cyxcbiAgICBvbkJsdXI6IG9uQmx1cixcbiAgICB0eXBlOiBcImNoZWNrYm94XCIsXG4gICAgY2xhc3M6IFwiYmlvLXByb3BlcnRpZXMtcGFuZWwtaW5wdXRcIixcbiAgICBvbkNoYW5nZTogaGFuZGxlQ2hhbmdlLFxuICAgIGNoZWNrZWQ6IHZhbHVlLFxuICAgIGRpc2FibGVkOiBkaXNhYmxlZFxuICB9KTtcbn0pO1xuXG4vKipcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wc1xuICogQHBhcmFtIHtPYmplY3R9IHByb3BzLmVsZW1lbnRcbiAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wcy5pZFxuICogQHBhcmFtIHtTdHJpbmd9IHByb3BzLmRlc2NyaXB0aW9uXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHByb3BzLmRlYm91bmNlXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHByb3BzLmRpc2FibGVkXG4gKiBAcGFyYW0ge0ZlZWxUeXBlfSBbcHJvcHMuZmVlbF1cbiAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wcy5sYWJlbFxuICogQHBhcmFtIHtGdW5jdGlvbn0gcHJvcHMuZ2V0VmFsdWVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHByb3BzLnNldFZhbHVlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcm9wcy50b29sdGlwQ29udGFpbmVyXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcm9wcy52YWxpZGF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gcHJvcHMuc2hvd1xuICogQHBhcmFtIHtGdW5jdGlvbn0gcHJvcHMuZXhhbXBsZVxuICogQHBhcmFtIHtBcnJheX0gcHJvcHMudmFyaWFibGVzXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcm9wcy5vbkZvY3VzXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcm9wcy5vbkJsdXJcbiAqIEBwYXJhbSB7c3RyaW5nfSBbcHJvcHMucGxhY2Vob2xkZXJdXG4gKiBAcGFyYW0ge3N0cmluZ3xpbXBvcnQoJ3ByZWFjdCcpLkNvbXBvbmVudH0gcHJvcHMudG9vbHRpcFxuICovXG5mdW5jdGlvbiBGZWVsRW50cnkocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGVsZW1lbnQsXG4gICAgaWQsXG4gICAgZGVzY3JpcHRpb24sXG4gICAgZGVib3VuY2UsXG4gICAgZGlzYWJsZWQsXG4gICAgZmVlbCxcbiAgICBsYWJlbCxcbiAgICBnZXRWYWx1ZSxcbiAgICBzZXRWYWx1ZSxcbiAgICB0b29sdGlwQ29udGFpbmVyLFxuICAgIGhvc3RMYW5ndWFnZSxcbiAgICBzaW5nbGVMaW5lLFxuICAgIHZhbGlkYXRlLFxuICAgIHNob3cgPSBub29wJDIsXG4gICAgZXhhbXBsZSxcbiAgICB2YXJpYWJsZXMsXG4gICAgb25Gb2N1cyxcbiAgICBvbkJsdXIsXG4gICAgcGxhY2Vob2xkZXIsXG4gICAgdG9vbHRpcFxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IFt2YWxpZGF0aW9uRXJyb3IsIHNldFZhbGlkYXRpb25FcnJvcl0gPSB1c2VTdGF0ZShudWxsKTtcbiAgY29uc3QgW2xvY2FsRXJyb3IsIHNldExvY2FsRXJyb3JdID0gdXNlU3RhdGUobnVsbCk7XG4gIGxldCB2YWx1ZSA9IGdldFZhbHVlKGVsZW1lbnQpO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChpc0Z1bmN0aW9uKHZhbGlkYXRlKSkge1xuICAgICAgY29uc3QgbmV3VmFsaWRhdGlvbkVycm9yID0gdmFsaWRhdGUodmFsdWUpIHx8IG51bGw7XG4gICAgICBzZXRWYWxpZGF0aW9uRXJyb3IobmV3VmFsaWRhdGlvbkVycm9yKTtcbiAgICB9XG4gIH0sIFt2YWx1ZSwgdmFsaWRhdGVdKTtcbiAgY29uc3Qgb25JbnB1dCA9IHVzZVN0YXRpY0NhbGxiYWNrKG5ld1ZhbHVlID0+IHtcbiAgICBjb25zdCB2YWx1ZSA9IGdldFZhbHVlKGVsZW1lbnQpO1xuICAgIGxldCBuZXdWYWxpZGF0aW9uRXJyb3IgPSBudWxsO1xuICAgIGlmIChpc0Z1bmN0aW9uKHZhbGlkYXRlKSkge1xuICAgICAgbmV3VmFsaWRhdGlvbkVycm9yID0gdmFsaWRhdGUobmV3VmFsdWUpIHx8IG51bGw7XG4gICAgfVxuXG4gICAgLy8gZG9uJ3QgY3JlYXRlIG11bHRpcGxlIGNvbW1hbmRTdGFjayBlbnRyaWVzIGZvciB0aGUgc2FtZSB2YWx1ZVxuICAgIGlmIChuZXdWYWx1ZSAhPT0gdmFsdWUpIHtcbiAgICAgIHNldFZhbHVlKG5ld1ZhbHVlLCBuZXdWYWxpZGF0aW9uRXJyb3IpO1xuICAgIH1cbiAgICBzZXRWYWxpZGF0aW9uRXJyb3IobmV3VmFsaWRhdGlvbkVycm9yKTtcbiAgfSk7XG4gIGNvbnN0IG9uRXJyb3IgPSB1c2VDYWxsYmFjayhlcnIgPT4ge1xuICAgIHNldExvY2FsRXJyb3IoZXJyKTtcbiAgfSwgW10pO1xuICBjb25zdCB0ZW1wb3JhcnlFcnJvciA9IHVzZUVycm9yKGlkKTtcbiAgY29uc3QgZXJyb3IgPSB0ZW1wb3JhcnlFcnJvciB8fCBsb2NhbEVycm9yIHx8IHZhbGlkYXRpb25FcnJvcjtcbiAgcmV0dXJuIGpzeHMoXCJkaXZcIiwge1xuICAgIGNsYXNzOiBjbGFzc25hbWVzKHByb3BzLmNsYXNzLCAnYmlvLXByb3BlcnRpZXMtcGFuZWwtZW50cnknLCBlcnJvciA/ICdoYXMtZXJyb3InIDogJycpLFxuICAgIFwiZGF0YS1lbnRyeS1pZFwiOiBpZCxcbiAgICBjaGlsZHJlbjogW2NyZWF0ZUVsZW1lbnQkMShGZWVsVGV4dGZpZWxkLCB7XG4gICAgICAuLi5wcm9wcyxcbiAgICAgIGRlYm91bmNlOiBkZWJvdW5jZSxcbiAgICAgIGRpc2FibGVkOiBkaXNhYmxlZCxcbiAgICAgIGZlZWw6IGZlZWwsXG4gICAgICBpZDogaWQsXG4gICAgICBrZXk6IGVsZW1lbnQsXG4gICAgICBsYWJlbDogbGFiZWwsXG4gICAgICBvbklucHV0OiBvbklucHV0LFxuICAgICAgb25FcnJvcjogb25FcnJvcixcbiAgICAgIG9uRm9jdXM6IG9uRm9jdXMsXG4gICAgICBvbkJsdXI6IG9uQmx1cixcbiAgICAgIHBsYWNlaG9sZGVyOiBwbGFjZWhvbGRlcixcbiAgICAgIGV4YW1wbGU6IGV4YW1wbGUsXG4gICAgICBob3N0TGFuZ3VhZ2U6IGhvc3RMYW5ndWFnZSxcbiAgICAgIHNpbmdsZUxpbmU6IHNpbmdsZUxpbmUsXG4gICAgICBzaG93OiBzaG93LFxuICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgdmFyaWFibGVzOiB2YXJpYWJsZXMsXG4gICAgICB0b29sdGlwQ29udGFpbmVyOiB0b29sdGlwQ29udGFpbmVyLFxuICAgICAgT3B0aW9uYWxDb21wb25lbnQ6IHByb3BzLk9wdGlvbmFsQ29tcG9uZW50LFxuICAgICAgdG9vbHRpcDogdG9vbHRpcFxuICAgIH0pLCBlcnJvciAmJiBqc3goXCJkaXZcIiwge1xuICAgICAgY2xhc3M6IFwiYmlvLXByb3BlcnRpZXMtcGFuZWwtZXJyb3JcIixcbiAgICAgIGNoaWxkcmVuOiBlcnJvclxuICAgIH0pLCBqc3goRGVzY3JpcHRpb24kMSwge1xuICAgICAgZm9ySWQ6IGlkLFxuICAgICAgZWxlbWVudDogZWxlbWVudCxcbiAgICAgIHZhbHVlOiBkZXNjcmlwdGlvblxuICAgIH0pXVxuICB9KTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcHNcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wcy5lbGVtZW50XG4gKiBAcGFyYW0ge1N0cmluZ30gcHJvcHMuaWRcbiAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wcy5kZXNjcmlwdGlvblxuICogQHBhcmFtIHtCb29sZWFufSBwcm9wcy5kZWJvdW5jZVxuICogQHBhcmFtIHtCb29sZWFufSBwcm9wcy5kaXNhYmxlZFxuICogQHBhcmFtIHtTdHJpbmd9IHByb3BzLm1heFxuICogQHBhcmFtIHtTdHJpbmd9IHByb3BzLm1pblxuICogQHBhcmFtIHtTdHJpbmd9IHByb3BzLnN0ZXBcbiAqIEBwYXJhbSB7RmVlbFR5cGV9IFtwcm9wcy5mZWVsXVxuICogQHBhcmFtIHtTdHJpbmd9IHByb3BzLmxhYmVsXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcm9wcy5nZXRWYWx1ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gcHJvcHMuc2V0VmFsdWVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHByb3BzLnRvb2x0aXBDb250YWluZXJcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHByb3BzLnZhbGlkYXRlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcm9wcy5zaG93XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcm9wcy5leGFtcGxlXG4gKiBAcGFyYW0ge0FycmF5fSBwcm9wcy52YXJpYWJsZXNcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHByb3BzLm9uRm9jdXNcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHByb3BzLm9uQmx1clxuICovXG5mdW5jdGlvbiBGZWVsTnVtYmVyRW50cnkocHJvcHMpIHtcbiAgcmV0dXJuIGpzeChGZWVsRW50cnksIHtcbiAgICBjbGFzczogXCJiaW8tcHJvcGVydGllcy1wYW5lbC1mZWVsLW51bWJlclwiLFxuICAgIE9wdGlvbmFsQ29tcG9uZW50OiBPcHRpb25hbEZlZWxOdW1iZXJGaWVsZCxcbiAgICAuLi5wcm9wc1xuICB9KTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcHNcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wcy5lbGVtZW50XG4gKiBAcGFyYW0ge1N0cmluZ30gcHJvcHMuaWRcbiAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wcy5kZXNjcmlwdGlvblxuICogQHBhcmFtIHtCb29sZWFufSBwcm9wcy5kZWJvdW5jZVxuICogQHBhcmFtIHtCb29sZWFufSBwcm9wcy5kaXNhYmxlZFxuICogQHBhcmFtIHtGZWVsVHlwZX0gW3Byb3BzLmZlZWxdXG4gKiBAcGFyYW0ge1N0cmluZ30gcHJvcHMubGFiZWxcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHByb3BzLmdldFZhbHVlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcm9wcy5zZXRWYWx1ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gcHJvcHMudG9vbHRpcENvbnRhaW5lclxuICogQHBhcmFtIHtGdW5jdGlvbn0gcHJvcHMudmFsaWRhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHByb3BzLnNob3dcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHByb3BzLmV4YW1wbGVcbiAqIEBwYXJhbSB7QXJyYXl9IHByb3BzLnZhcmlhYmxlc1xuICogQHBhcmFtIHtGdW5jdGlvbn0gcHJvcHMub25Gb2N1c1xuICogQHBhcmFtIHtGdW5jdGlvbn0gcHJvcHMub25CbHVyXG4gKi9cbmZ1bmN0aW9uIEZlZWxUb2dnbGVTd2l0Y2hFbnRyeShwcm9wcykge1xuICByZXR1cm4ganN4KEZlZWxFbnRyeSwge1xuICAgIGNsYXNzOiBcImJpby1wcm9wZXJ0aWVzLXBhbmVsLWZlZWwtdG9nZ2xlLXN3aXRjaFwiLFxuICAgIE9wdGlvbmFsQ29tcG9uZW50OiBPcHRpb25hbEZlZWxUb2dnbGVTd2l0Y2gsXG4gICAgLi4ucHJvcHNcbiAgfSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtPYmplY3R9IHByb3BzXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcHMuZWxlbWVudFxuICogQHBhcmFtIHtTdHJpbmd9IHByb3BzLmlkXG4gKiBAcGFyYW0ge1N0cmluZ30gcHJvcHMuZGVzY3JpcHRpb25cbiAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wcy5ob3N0TGFuZ3VhZ2VcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gcHJvcHMuc2luZ2xlTGluZVxuICogQHBhcmFtIHtCb29sZWFufSBwcm9wcy5kZWJvdW5jZVxuICogQHBhcmFtIHtCb29sZWFufSBwcm9wcy5kaXNhYmxlZFxuICogQHBhcmFtIHtGZWVsVHlwZX0gW3Byb3BzLmZlZWxdXG4gKiBAcGFyYW0ge1N0cmluZ30gcHJvcHMubGFiZWxcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHByb3BzLmdldFZhbHVlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcm9wcy5zZXRWYWx1ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gcHJvcHMudG9vbHRpcENvbnRhaW5lclxuICogQHBhcmFtIHtGdW5jdGlvbn0gcHJvcHMudmFsaWRhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHByb3BzLnNob3dcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHByb3BzLmV4YW1wbGVcbiAqIEBwYXJhbSB7QXJyYXl9IHByb3BzLnZhcmlhYmxlc1xuICogQHBhcmFtIHtGdW5jdGlvbn0gcHJvcHMub25Gb2N1c1xuICogQHBhcmFtIHtGdW5jdGlvbn0gcHJvcHMub25CbHVyXG4gKi9cbmZ1bmN0aW9uIEZlZWxUZW1wbGF0aW5nRW50cnkocHJvcHMpIHtcbiAgcmV0dXJuIGpzeChGZWVsRW50cnksIHtcbiAgICBjbGFzczogXCJiaW8tcHJvcGVydGllcy1wYW5lbC1mZWVsLXRlbXBsYXRpbmdcIixcbiAgICBPcHRpb25hbENvbXBvbmVudDogVGVtcGxhdGluZ0VkaXRvcixcbiAgICAuLi5wcm9wc1xuICB9KTtcbn1cbmZ1bmN0aW9uIGlzRWRpdGVkJDUobm9kZSkge1xuICBpZiAoIW5vZGUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKG5vZGUudHlwZSA9PT0gJ2NoZWNrYm94Jykge1xuICAgIHJldHVybiAhIW5vZGUuY2hlY2tlZCB8fCBub2RlLmNsYXNzTGlzdC5jb250YWlucygnZWRpdGVkJyk7XG4gIH1cbiAgcmV0dXJuICEhbm9kZS52YWx1ZSB8fCBub2RlLmNsYXNzTGlzdC5jb250YWlucygnZWRpdGVkJyk7XG59XG5cbi8vIGhlbHBlcnMgLy8vLy8vLy8vLy8vLy8vLy9cblxuZnVuY3Rpb24gcHJlZml4SWQkNShpZCkge1xuICByZXR1cm4gYGJpby1wcm9wZXJ0aWVzLXBhbmVsLSR7aWR9YDtcbn1cbmZ1bmN0aW9uIFNlbGVjdChwcm9wcykge1xuICBjb25zdCB7XG4gICAgaWQsXG4gICAgbGFiZWwsXG4gICAgb25DaGFuZ2UsXG4gICAgb3B0aW9ucyA9IFtdLFxuICAgIHZhbHVlID0gJycsXG4gICAgZGlzYWJsZWQsXG4gICAgb25Gb2N1cyxcbiAgICBvbkJsdXIsXG4gICAgdG9vbHRpcFxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IHJlZiA9IHVzZVNob3dFbnRyeUV2ZW50KGlkKTtcbiAgY29uc3QgW2xvY2FsVmFsdWUsIHNldExvY2FsVmFsdWVdID0gdXNlU3RhdGUodmFsdWUpO1xuICBjb25zdCBoYW5kbGVDaGFuZ2VDYWxsYmFjayA9ICh7XG4gICAgdGFyZ2V0XG4gIH0pID0+IHtcbiAgICBvbkNoYW5nZSh0YXJnZXQudmFsdWUpO1xuICB9O1xuICBjb25zdCBoYW5kbGVDaGFuZ2UgPSBlID0+IHtcbiAgICBoYW5kbGVDaGFuZ2VDYWxsYmFjayhlKTtcbiAgICBzZXRMb2NhbFZhbHVlKGUudGFyZ2V0LnZhbHVlKTtcbiAgfTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAodmFsdWUgPT09IGxvY2FsVmFsdWUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc2V0TG9jYWxWYWx1ZSh2YWx1ZSk7XG4gIH0sIFt2YWx1ZV0pO1xuICByZXR1cm4ganN4cyhcImRpdlwiLCB7XG4gICAgY2xhc3M6IFwiYmlvLXByb3BlcnRpZXMtcGFuZWwtc2VsZWN0XCIsXG4gICAgY2hpbGRyZW46IFtqc3goXCJsYWJlbFwiLCB7XG4gICAgICBmb3I6IHByZWZpeElkJDQoaWQpLFxuICAgICAgY2xhc3M6IFwiYmlvLXByb3BlcnRpZXMtcGFuZWwtbGFiZWxcIixcbiAgICAgIGNoaWxkcmVuOiBqc3goVG9vbHRpcFdyYXBwZXIsIHtcbiAgICAgICAgdmFsdWU6IHRvb2x0aXAsXG4gICAgICAgIGZvcklkOiBpZCxcbiAgICAgICAgZWxlbWVudDogcHJvcHMuZWxlbWVudCxcbiAgICAgICAgY2hpbGRyZW46IGxhYmVsXG4gICAgICB9KVxuICAgIH0pLCBqc3goXCJzZWxlY3RcIiwge1xuICAgICAgcmVmOiByZWYsXG4gICAgICBpZDogcHJlZml4SWQkNChpZCksXG4gICAgICBuYW1lOiBpZCxcbiAgICAgIGNsYXNzOiBcImJpby1wcm9wZXJ0aWVzLXBhbmVsLWlucHV0XCIsXG4gICAgICBvbklucHV0OiBoYW5kbGVDaGFuZ2UsXG4gICAgICBvbkZvY3VzOiBvbkZvY3VzLFxuICAgICAgb25CbHVyOiBvbkJsdXIsXG4gICAgICB2YWx1ZTogbG9jYWxWYWx1ZSxcbiAgICAgIGRpc2FibGVkOiBkaXNhYmxlZCxcbiAgICAgIGNoaWxkcmVuOiBvcHRpb25zLm1hcCgob3B0aW9uLCBpZHgpID0+IHtcbiAgICAgICAgaWYgKG9wdGlvbi5jaGlsZHJlbikge1xuICAgICAgICAgIHJldHVybiBqc3goXCJvcHRncm91cFwiLCB7XG4gICAgICAgICAgICBsYWJlbDogb3B0aW9uLmxhYmVsLFxuICAgICAgICAgICAgY2hpbGRyZW46IG9wdGlvbi5jaGlsZHJlbi5tYXAoKGNoaWxkLCBpZHgpID0+IGpzeChcIm9wdGlvblwiLCB7XG4gICAgICAgICAgICAgIHZhbHVlOiBjaGlsZC52YWx1ZSxcbiAgICAgICAgICAgICAgZGlzYWJsZWQ6IGNoaWxkLmRpc2FibGVkLFxuICAgICAgICAgICAgICBjaGlsZHJlbjogY2hpbGQubGFiZWxcbiAgICAgICAgICAgIH0sIGlkeCkpXG4gICAgICAgICAgfSwgaWR4KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ganN4KFwib3B0aW9uXCIsIHtcbiAgICAgICAgICB2YWx1ZTogb3B0aW9uLnZhbHVlLFxuICAgICAgICAgIGRpc2FibGVkOiBvcHRpb24uZGlzYWJsZWQsXG4gICAgICAgICAgY2hpbGRyZW46IG9wdGlvbi5sYWJlbFxuICAgICAgICB9LCBpZHgpO1xuICAgICAgfSlcbiAgICB9KV1cbiAgfSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtvYmplY3R9IHByb3BzXG4gKiBAcGFyYW0ge29iamVjdH0gcHJvcHMuZWxlbWVudFxuICogQHBhcmFtIHtzdHJpbmd9IHByb3BzLmlkXG4gKiBAcGFyYW0ge3N0cmluZ30gW3Byb3BzLmRlc2NyaXB0aW9uXVxuICogQHBhcmFtIHtzdHJpbmd9IHByb3BzLmxhYmVsXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcm9wcy5nZXRWYWx1ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gcHJvcHMuc2V0VmFsdWVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHByb3BzLm9uRm9jdXNcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHByb3BzLm9uQmx1clxuICogQHBhcmFtIHtGdW5jdGlvbn0gcHJvcHMuZ2V0T3B0aW9uc1xuICogQHBhcmFtIHtib29sZWFufSBbcHJvcHMuZGlzYWJsZWRdXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbcHJvcHMudmFsaWRhdGVdXG4gKiBAcGFyYW0ge3N0cmluZ3xpbXBvcnQoJ3ByZWFjdCcpLkNvbXBvbmVudH0gcHJvcHMudG9vbHRpcFxuICovXG5mdW5jdGlvbiBTZWxlY3RFbnRyeShwcm9wcykge1xuICBjb25zdCB7XG4gICAgZWxlbWVudCxcbiAgICBpZCxcbiAgICBkZXNjcmlwdGlvbixcbiAgICBsYWJlbCxcbiAgICBnZXRWYWx1ZSxcbiAgICBzZXRWYWx1ZSxcbiAgICBnZXRPcHRpb25zLFxuICAgIGRpc2FibGVkLFxuICAgIG9uRm9jdXMsXG4gICAgb25CbHVyLFxuICAgIHZhbGlkYXRlLFxuICAgIHRvb2x0aXBcbiAgfSA9IHByb3BzO1xuICBjb25zdCBvcHRpb25zID0gZ2V0T3B0aW9ucyhlbGVtZW50KTtcbiAgY29uc3QgZ2xvYmFsRXJyb3IgPSB1c2VFcnJvcihpZCk7XG4gIGNvbnN0IFtsb2NhbEVycm9yLCBzZXRMb2NhbEVycm9yXSA9IHVzZVN0YXRlKG51bGwpO1xuICBsZXQgdmFsdWUgPSBnZXRWYWx1ZShlbGVtZW50KTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoaXNGdW5jdGlvbih2YWxpZGF0ZSkpIHtcbiAgICAgIGNvbnN0IG5ld1ZhbGlkYXRpb25FcnJvciA9IHZhbGlkYXRlKHZhbHVlKSB8fCBudWxsO1xuICAgICAgc2V0TG9jYWxFcnJvcihuZXdWYWxpZGF0aW9uRXJyb3IpO1xuICAgIH1cbiAgfSwgW3ZhbHVlLCB2YWxpZGF0ZV0pO1xuICBjb25zdCBvbkNoYW5nZSA9IG5ld1ZhbHVlID0+IHtcbiAgICBsZXQgbmV3VmFsaWRhdGlvbkVycm9yID0gbnVsbDtcbiAgICBpZiAoaXNGdW5jdGlvbih2YWxpZGF0ZSkpIHtcbiAgICAgIG5ld1ZhbGlkYXRpb25FcnJvciA9IHZhbGlkYXRlKG5ld1ZhbHVlKSB8fCBudWxsO1xuICAgIH1cbiAgICBzZXRWYWx1ZShuZXdWYWx1ZSwgbmV3VmFsaWRhdGlvbkVycm9yKTtcbiAgICBzZXRMb2NhbEVycm9yKG5ld1ZhbGlkYXRpb25FcnJvcik7XG4gIH07XG4gIGNvbnN0IGVycm9yID0gZ2xvYmFsRXJyb3IgfHwgbG9jYWxFcnJvcjtcbiAgcmV0dXJuIGpzeHMoXCJkaXZcIiwge1xuICAgIGNsYXNzOiBjbGFzc25hbWVzKCdiaW8tcHJvcGVydGllcy1wYW5lbC1lbnRyeScsIGVycm9yID8gJ2hhcy1lcnJvcicgOiAnJyksXG4gICAgXCJkYXRhLWVudHJ5LWlkXCI6IGlkLFxuICAgIGNoaWxkcmVuOiBbanN4KFNlbGVjdCwge1xuICAgICAgaWQ6IGlkLFxuICAgICAgbGFiZWw6IGxhYmVsLFxuICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgb25DaGFuZ2U6IG9uQ2hhbmdlLFxuICAgICAgb25Gb2N1czogb25Gb2N1cyxcbiAgICAgIG9uQmx1cjogb25CbHVyLFxuICAgICAgb3B0aW9uczogb3B0aW9ucyxcbiAgICAgIGRpc2FibGVkOiBkaXNhYmxlZCxcbiAgICAgIHRvb2x0aXA6IHRvb2x0aXAsXG4gICAgICBlbGVtZW50OiBlbGVtZW50XG4gICAgfSwgZWxlbWVudCksIGVycm9yICYmIGpzeChcImRpdlwiLCB7XG4gICAgICBjbGFzczogXCJiaW8tcHJvcGVydGllcy1wYW5lbC1lcnJvclwiLFxuICAgICAgY2hpbGRyZW46IGVycm9yXG4gICAgfSksIGpzeChEZXNjcmlwdGlvbiQxLCB7XG4gICAgICBmb3JJZDogaWQsXG4gICAgICBlbGVtZW50OiBlbGVtZW50LFxuICAgICAgdmFsdWU6IGRlc2NyaXB0aW9uXG4gICAgfSldXG4gIH0pO1xufVxuZnVuY3Rpb24gaXNFZGl0ZWQkMyhub2RlKSB7XG4gIHJldHVybiBub2RlICYmICEhbm9kZS52YWx1ZTtcbn1cblxuLy8gaGVscGVycyAvLy8vLy8vLy8vLy8vLy8vL1xuXG5mdW5jdGlvbiBwcmVmaXhJZCQ0KGlkKSB7XG4gIHJldHVybiBgYmlvLXByb3BlcnRpZXMtcGFuZWwtJHtpZH1gO1xufVxuZnVuY3Rpb24gcmVzaXplVG9Db250ZW50cyhlbGVtZW50KSB7XG4gIGVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gJ2F1dG8nO1xuXG4gIC8vIGEgMnB4IHBpeGVsIG9mZnNldCBpcyByZXF1aXJlZCB0byBwcmV2ZW50IHNjcm9sbGJhciBmcm9tXG4gIC8vIGFwcGVhcmluZyBvbiBPUyB3aXRoIGEgZnVsbCBsZW5ndGggc2Nyb2xsIGJhciAoV2luZG93cy9MaW51eClcbiAgZWxlbWVudC5zdHlsZS5oZWlnaHQgPSBgJHtlbGVtZW50LnNjcm9sbEhlaWdodCArIDJ9cHhgO1xufVxuZnVuY3Rpb24gVGV4dEFyZWEocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGlkLFxuICAgIGxhYmVsLFxuICAgIGRlYm91bmNlLFxuICAgIG9uSW5wdXQsXG4gICAgdmFsdWUgPSAnJyxcbiAgICBkaXNhYmxlZCxcbiAgICBtb25vc3BhY2UsXG4gICAgb25Gb2N1cyxcbiAgICBvbkJsdXIsXG4gICAgYXV0b1Jlc2l6ZSA9IHRydWUsXG4gICAgcGxhY2Vob2xkZXIsXG4gICAgcm93cyA9IGF1dG9SZXNpemUgPyAxIDogMixcbiAgICB0b29sdGlwXG4gIH0gPSBwcm9wcztcbiAgY29uc3QgW2xvY2FsVmFsdWUsIHNldExvY2FsVmFsdWVdID0gdXNlU3RhdGUodmFsdWUpO1xuICBjb25zdCByZWYgPSB1c2VTaG93RW50cnlFdmVudChpZCk7XG4gIGNvbnN0IHZpc2libGUgPSB1c2VFbGVtZW50VmlzaWJsZShyZWYuY3VycmVudCk7XG5cbiAgLyoqXG4gICAqIEB0eXBlIHsgaW1wb3J0KCdtaW4tZGFzaCcpLkRlYm91bmNlZEZ1bmN0aW9uIH1cbiAgICovXG4gIGNvbnN0IGhhbmRsZUlucHV0Q2FsbGJhY2sgPSB1c2VEZWJvdW5jZShvbklucHV0LCBkZWJvdW5jZSk7XG4gIGNvbnN0IGhhbmRsZUlucHV0ID0gbmV3VmFsdWUgPT4ge1xuICAgIGNvbnN0IG5ld01vZGVsVmFsdWUgPSBuZXdWYWx1ZSA9PT0gJycgPyB1bmRlZmluZWQgOiBuZXdWYWx1ZTtcbiAgICBoYW5kbGVJbnB1dENhbGxiYWNrKG5ld01vZGVsVmFsdWUpO1xuICB9O1xuICBjb25zdCBoYW5kbGVMb2NhbElucHV0ID0gZSA9PiB7XG4gICAgYXV0b1Jlc2l6ZSAmJiByZXNpemVUb0NvbnRlbnRzKGUudGFyZ2V0KTtcbiAgICBpZiAoZS50YXJnZXQudmFsdWUgPT09IGxvY2FsVmFsdWUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc2V0TG9jYWxWYWx1ZShlLnRhcmdldC52YWx1ZSk7XG4gICAgaGFuZGxlSW5wdXQoZS50YXJnZXQudmFsdWUpO1xuICB9O1xuICBjb25zdCBoYW5kbGVPbkJsdXIgPSBlID0+IHtcbiAgICBjb25zdCB0cmltbWVkVmFsdWUgPSBlLnRhcmdldC52YWx1ZS50cmltKCk7XG5cbiAgICAvLyB0cmltIGFuZCBjb21taXQgb24gYmx1clxuICAgIG9uSW5wdXQodHJpbW1lZFZhbHVlKTtcbiAgICBpZiAob25CbHVyKSB7XG4gICAgICBvbkJsdXIoZSk7XG4gICAgfVxuICB9O1xuICB1c2VMYXlvdXRFZmZlY3QoKCkgPT4ge1xuICAgIGF1dG9SZXNpemUgJiYgcmVzaXplVG9Db250ZW50cyhyZWYuY3VycmVudCk7XG4gIH0sIFtdKTtcbiAgdXNlTGF5b3V0RWZmZWN0KCgpID0+IHtcbiAgICB2aXNpYmxlICYmIGF1dG9SZXNpemUgJiYgcmVzaXplVG9Db250ZW50cyhyZWYuY3VycmVudCk7XG4gIH0sIFt2aXNpYmxlXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHZhbHVlID09PSBsb2NhbFZhbHVlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHNldExvY2FsVmFsdWUodmFsdWUpO1xuICB9LCBbdmFsdWVdKTtcbiAgcmV0dXJuIGpzeHMoXCJkaXZcIiwge1xuICAgIGNsYXNzOiBcImJpby1wcm9wZXJ0aWVzLXBhbmVsLXRleHRhcmVhXCIsXG4gICAgY2hpbGRyZW46IFtqc3goXCJsYWJlbFwiLCB7XG4gICAgICBmb3I6IHByZWZpeElkJDIoaWQpLFxuICAgICAgY2xhc3M6IFwiYmlvLXByb3BlcnRpZXMtcGFuZWwtbGFiZWxcIixcbiAgICAgIGNoaWxkcmVuOiBqc3goVG9vbHRpcFdyYXBwZXIsIHtcbiAgICAgICAgdmFsdWU6IHRvb2x0aXAsXG4gICAgICAgIGZvcklkOiBpZCxcbiAgICAgICAgZWxlbWVudDogcHJvcHMuZWxlbWVudCxcbiAgICAgICAgY2hpbGRyZW46IGxhYmVsXG4gICAgICB9KVxuICAgIH0pLCBqc3goXCJ0ZXh0YXJlYVwiLCB7XG4gICAgICByZWY6IHJlZixcbiAgICAgIGlkOiBwcmVmaXhJZCQyKGlkKSxcbiAgICAgIG5hbWU6IGlkLFxuICAgICAgc3BlbGxDaGVjazogXCJmYWxzZVwiLFxuICAgICAgY2xhc3M6IGNsYXNzbmFtZXMoJ2Jpby1wcm9wZXJ0aWVzLXBhbmVsLWlucHV0JywgbW9ub3NwYWNlID8gJ2Jpby1wcm9wZXJ0aWVzLXBhbmVsLWlucHV0LW1vbm9zcGFjZScgOiAnJywgYXV0b1Jlc2l6ZSA/ICdhdXRvLXJlc2l6ZScgOiAnJyksXG4gICAgICBvbklucHV0OiBoYW5kbGVMb2NhbElucHV0LFxuICAgICAgb25Gb2N1czogb25Gb2N1cyxcbiAgICAgIG9uQmx1cjogaGFuZGxlT25CbHVyLFxuICAgICAgcGxhY2Vob2xkZXI6IHBsYWNlaG9sZGVyLFxuICAgICAgcm93czogcm93cyxcbiAgICAgIHZhbHVlOiBsb2NhbFZhbHVlLFxuICAgICAgZGlzYWJsZWQ6IGRpc2FibGVkLFxuICAgICAgXCJkYXRhLWdyYW1tXCI6IFwiZmFsc2VcIlxuICAgIH0pXVxuICB9KTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge29iamVjdH0gcHJvcHNcbiAqIEBwYXJhbSB7b2JqZWN0fSBwcm9wcy5lbGVtZW50XG4gKiBAcGFyYW0ge3N0cmluZ30gcHJvcHMuaWRcbiAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wcy5kZXNjcmlwdGlvblxuICogQHBhcmFtIHtib29sZWFufSBwcm9wcy5kZWJvdW5jZVxuICogQHBhcmFtIHtzdHJpbmd9IHByb3BzLmxhYmVsXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcm9wcy5nZXRWYWx1ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gcHJvcHMuc2V0VmFsdWVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHByb3BzLm9uRm9jdXNcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHByb3BzLm9uQmx1clxuICogQHBhcmFtIHtudW1iZXJ9IHByb3BzLnJvd3NcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gcHJvcHMubW9ub3NwYWNlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbcHJvcHMudmFsaWRhdGVdXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtwcm9wcy5kaXNhYmxlZF1cbiAqL1xuZnVuY3Rpb24gVGV4dEFyZWFFbnRyeShwcm9wcykge1xuICBjb25zdCB7XG4gICAgZWxlbWVudCxcbiAgICBpZCxcbiAgICBkZXNjcmlwdGlvbixcbiAgICBkZWJvdW5jZSxcbiAgICBsYWJlbCxcbiAgICBnZXRWYWx1ZSxcbiAgICBzZXRWYWx1ZSxcbiAgICByb3dzLFxuICAgIG1vbm9zcGFjZSxcbiAgICBkaXNhYmxlZCxcbiAgICB2YWxpZGF0ZSxcbiAgICBvbkZvY3VzLFxuICAgIG9uQmx1cixcbiAgICBwbGFjZWhvbGRlcixcbiAgICBhdXRvUmVzaXplLFxuICAgIHRvb2x0aXBcbiAgfSA9IHByb3BzO1xuICBjb25zdCBnbG9iYWxFcnJvciA9IHVzZUVycm9yKGlkKTtcbiAgY29uc3QgW2xvY2FsRXJyb3IsIHNldExvY2FsRXJyb3JdID0gdXNlU3RhdGUobnVsbCk7XG4gIGxldCB2YWx1ZSA9IGdldFZhbHVlKGVsZW1lbnQpO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChpc0Z1bmN0aW9uKHZhbGlkYXRlKSkge1xuICAgICAgY29uc3QgbmV3VmFsaWRhdGlvbkVycm9yID0gdmFsaWRhdGUodmFsdWUpIHx8IG51bGw7XG4gICAgICBzZXRMb2NhbEVycm9yKG5ld1ZhbGlkYXRpb25FcnJvcik7XG4gICAgfVxuICB9LCBbdmFsdWUsIHZhbGlkYXRlXSk7XG4gIGNvbnN0IG9uSW5wdXQgPSB1c2VTdGF0aWNDYWxsYmFjayhuZXdWYWx1ZSA9PiB7XG4gICAgY29uc3QgdmFsdWUgPSBnZXRWYWx1ZShlbGVtZW50KTtcbiAgICBsZXQgbmV3VmFsaWRhdGlvbkVycm9yID0gbnVsbDtcbiAgICBpZiAoaXNGdW5jdGlvbih2YWxpZGF0ZSkpIHtcbiAgICAgIG5ld1ZhbGlkYXRpb25FcnJvciA9IHZhbGlkYXRlKG5ld1ZhbHVlKSB8fCBudWxsO1xuICAgIH1cbiAgICBpZiAobmV3VmFsdWUgIT09IHZhbHVlKSB7XG4gICAgICBzZXRWYWx1ZShuZXdWYWx1ZSwgbmV3VmFsaWRhdGlvbkVycm9yKTtcbiAgICB9XG4gICAgc2V0TG9jYWxFcnJvcihuZXdWYWxpZGF0aW9uRXJyb3IpO1xuICB9KTtcbiAgY29uc3QgZXJyb3IgPSBnbG9iYWxFcnJvciB8fCBsb2NhbEVycm9yO1xuICByZXR1cm4ganN4cyhcImRpdlwiLCB7XG4gICAgY2xhc3M6IGNsYXNzbmFtZXMoJ2Jpby1wcm9wZXJ0aWVzLXBhbmVsLWVudHJ5JywgZXJyb3IgPyAnaGFzLWVycm9yJyA6ICcnKSxcbiAgICBcImRhdGEtZW50cnktaWRcIjogaWQsXG4gICAgY2hpbGRyZW46IFtqc3goVGV4dEFyZWEsIHtcbiAgICAgIGlkOiBpZCxcbiAgICAgIGxhYmVsOiBsYWJlbCxcbiAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgIG9uSW5wdXQ6IG9uSW5wdXQsXG4gICAgICBvbkZvY3VzOiBvbkZvY3VzLFxuICAgICAgb25CbHVyOiBvbkJsdXIsXG4gICAgICByb3dzOiByb3dzLFxuICAgICAgZGVib3VuY2U6IGRlYm91bmNlLFxuICAgICAgbW9ub3NwYWNlOiBtb25vc3BhY2UsXG4gICAgICBkaXNhYmxlZDogZGlzYWJsZWQsXG4gICAgICBwbGFjZWhvbGRlcjogcGxhY2Vob2xkZXIsXG4gICAgICBhdXRvUmVzaXplOiBhdXRvUmVzaXplLFxuICAgICAgdG9vbHRpcDogdG9vbHRpcCxcbiAgICAgIGVsZW1lbnQ6IGVsZW1lbnRcbiAgICB9LCBlbGVtZW50KSwgZXJyb3IgJiYganN4KFwiZGl2XCIsIHtcbiAgICAgIGNsYXNzOiBcImJpby1wcm9wZXJ0aWVzLXBhbmVsLWVycm9yXCIsXG4gICAgICBjaGlsZHJlbjogZXJyb3JcbiAgICB9KSwganN4KERlc2NyaXB0aW9uJDEsIHtcbiAgICAgIGZvcklkOiBpZCxcbiAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsXG4gICAgICB2YWx1ZTogZGVzY3JpcHRpb25cbiAgICB9KV1cbiAgfSk7XG59XG5mdW5jdGlvbiBpc0VkaXRlZCQxKG5vZGUpIHtcbiAgcmV0dXJuIG5vZGUgJiYgISFub2RlLnZhbHVlO1xufVxuXG4vLyBoZWxwZXJzIC8vLy8vLy8vLy8vLy8vLy8vXG5cbmZ1bmN0aW9uIHByZWZpeElkJDIoaWQpIHtcbiAgcmV0dXJuIGBiaW8tcHJvcGVydGllcy1wYW5lbC0ke2lkfWA7XG59XG5mdW5jdGlvbiBUZXh0ZmllbGQocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGRlYm91bmNlLFxuICAgIGRpc2FibGVkID0gZmFsc2UsXG4gICAgaWQsXG4gICAgbGFiZWwsXG4gICAgb25JbnB1dCxcbiAgICBvbkZvY3VzLFxuICAgIG9uQmx1cixcbiAgICBwbGFjZWhvbGRlcixcbiAgICB2YWx1ZSA9ICcnLFxuICAgIHRvb2x0aXBcbiAgfSA9IHByb3BzO1xuICBjb25zdCBbbG9jYWxWYWx1ZSwgc2V0TG9jYWxWYWx1ZV0gPSB1c2VTdGF0ZSh2YWx1ZSB8fCAnJyk7XG4gIGNvbnN0IHJlZiA9IHVzZVNob3dFbnRyeUV2ZW50KGlkKTtcblxuICAvKipcbiAgICogQHR5cGUgeyBpbXBvcnQoJ21pbi1kYXNoJykuRGVib3VuY2VkRnVuY3Rpb24gfVxuICAgKi9cbiAgY29uc3QgaGFuZGxlSW5wdXRDYWxsYmFjayA9IHVzZURlYm91bmNlKG9uSW5wdXQsIGRlYm91bmNlKTtcbiAgY29uc3QgaGFuZGxlT25CbHVyID0gZSA9PiB7XG4gICAgY29uc3QgdHJpbW1lZFZhbHVlID0gZS50YXJnZXQudmFsdWUudHJpbSgpO1xuXG4gICAgLy8gdHJpbSBhbmQgY29tbWl0IG9uIGJsdXJcbiAgICBvbklucHV0KHRyaW1tZWRWYWx1ZSk7XG4gICAgaWYgKG9uQmx1cikge1xuICAgICAgb25CbHVyKGUpO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgaGFuZGxlSW5wdXQgPSBuZXdWYWx1ZSA9PiB7XG4gICAgY29uc3QgbmV3TW9kZWxWYWx1ZSA9IG5ld1ZhbHVlID09PSAnJyA/IHVuZGVmaW5lZCA6IG5ld1ZhbHVlO1xuICAgIGhhbmRsZUlucHV0Q2FsbGJhY2sobmV3TW9kZWxWYWx1ZSk7XG4gIH07XG4gIGNvbnN0IGhhbmRsZUxvY2FsSW5wdXQgPSBlID0+IHtcbiAgICBpZiAoZS50YXJnZXQudmFsdWUgPT09IGxvY2FsVmFsdWUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc2V0TG9jYWxWYWx1ZShlLnRhcmdldC52YWx1ZSk7XG4gICAgaGFuZGxlSW5wdXQoZS50YXJnZXQudmFsdWUpO1xuICB9O1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICh2YWx1ZSA9PT0gbG9jYWxWYWx1ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzZXRMb2NhbFZhbHVlKHZhbHVlKTtcbiAgfSwgW3ZhbHVlXSk7XG4gIHJldHVybiBqc3hzKFwiZGl2XCIsIHtcbiAgICBjbGFzczogXCJiaW8tcHJvcGVydGllcy1wYW5lbC10ZXh0ZmllbGRcIixcbiAgICBjaGlsZHJlbjogW2pzeChcImxhYmVsXCIsIHtcbiAgICAgIGZvcjogcHJlZml4SWQkMShpZCksXG4gICAgICBjbGFzczogXCJiaW8tcHJvcGVydGllcy1wYW5lbC1sYWJlbFwiLFxuICAgICAgY2hpbGRyZW46IGpzeChUb29sdGlwV3JhcHBlciwge1xuICAgICAgICB2YWx1ZTogdG9vbHRpcCxcbiAgICAgICAgZm9ySWQ6IGlkLFxuICAgICAgICBlbGVtZW50OiBwcm9wcy5lbGVtZW50LFxuICAgICAgICBjaGlsZHJlbjogbGFiZWxcbiAgICAgIH0pXG4gICAgfSksIGpzeChcImlucHV0XCIsIHtcbiAgICAgIHJlZjogcmVmLFxuICAgICAgaWQ6IHByZWZpeElkJDEoaWQpLFxuICAgICAgdHlwZTogXCJ0ZXh0XCIsXG4gICAgICBuYW1lOiBpZCxcbiAgICAgIHNwZWxsQ2hlY2s6IFwiZmFsc2VcIixcbiAgICAgIGF1dG9Db21wbGV0ZTogXCJvZmZcIixcbiAgICAgIGRpc2FibGVkOiBkaXNhYmxlZCxcbiAgICAgIGNsYXNzOiBcImJpby1wcm9wZXJ0aWVzLXBhbmVsLWlucHV0XCIsXG4gICAgICBvbklucHV0OiBoYW5kbGVMb2NhbElucHV0LFxuICAgICAgb25Gb2N1czogb25Gb2N1cyxcbiAgICAgIG9uQmx1cjogaGFuZGxlT25CbHVyLFxuICAgICAgcGxhY2Vob2xkZXI6IHBsYWNlaG9sZGVyLFxuICAgICAgdmFsdWU6IGxvY2FsVmFsdWVcbiAgICB9KV1cbiAgfSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtPYmplY3R9IHByb3BzXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcHMuZWxlbWVudFxuICogQHBhcmFtIHtTdHJpbmd9IHByb3BzLmlkXG4gKiBAcGFyYW0ge1N0cmluZ30gcHJvcHMuZGVzY3JpcHRpb25cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gcHJvcHMuZGVib3VuY2VcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gcHJvcHMuZGlzYWJsZWRcbiAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wcy5sYWJlbFxuICogQHBhcmFtIHtGdW5jdGlvbn0gcHJvcHMuZ2V0VmFsdWVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHByb3BzLnNldFZhbHVlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcm9wcy5vbkZvY3VzXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcm9wcy5vbkJsdXJcbiAqIEBwYXJhbSB7c3RyaW5nfGltcG9ydCgncHJlYWN0JykuQ29tcG9uZW50fSBwcm9wcy50b29sdGlwXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcm9wcy52YWxpZGF0ZVxuICovXG5mdW5jdGlvbiBUZXh0ZmllbGRFbnRyeShwcm9wcykge1xuICBjb25zdCB7XG4gICAgZWxlbWVudCxcbiAgICBpZCxcbiAgICBkZXNjcmlwdGlvbixcbiAgICBkZWJvdW5jZSxcbiAgICBkaXNhYmxlZCxcbiAgICBsYWJlbCxcbiAgICBnZXRWYWx1ZSxcbiAgICBzZXRWYWx1ZSxcbiAgICB2YWxpZGF0ZSxcbiAgICBvbkZvY3VzLFxuICAgIG9uQmx1cixcbiAgICBwbGFjZWhvbGRlcixcbiAgICB0b29sdGlwXG4gIH0gPSBwcm9wcztcbiAgY29uc3QgZ2xvYmFsRXJyb3IgPSB1c2VFcnJvcihpZCk7XG4gIGNvbnN0IFtsb2NhbEVycm9yLCBzZXRMb2NhbEVycm9yXSA9IHVzZVN0YXRlKG51bGwpO1xuICBsZXQgdmFsdWUgPSBnZXRWYWx1ZShlbGVtZW50KTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoaXNGdW5jdGlvbih2YWxpZGF0ZSkpIHtcbiAgICAgIGNvbnN0IG5ld1ZhbGlkYXRpb25FcnJvciA9IHZhbGlkYXRlKHZhbHVlKSB8fCBudWxsO1xuICAgICAgc2V0TG9jYWxFcnJvcihuZXdWYWxpZGF0aW9uRXJyb3IpO1xuICAgIH1cbiAgfSwgW3ZhbHVlLCB2YWxpZGF0ZV0pO1xuICBjb25zdCBvbklucHV0ID0gdXNlU3RhdGljQ2FsbGJhY2sobmV3VmFsdWUgPT4ge1xuICAgIGNvbnN0IHZhbHVlID0gZ2V0VmFsdWUoZWxlbWVudCk7XG4gICAgbGV0IG5ld1ZhbGlkYXRpb25FcnJvciA9IG51bGw7XG4gICAgaWYgKGlzRnVuY3Rpb24odmFsaWRhdGUpKSB7XG4gICAgICBuZXdWYWxpZGF0aW9uRXJyb3IgPSB2YWxpZGF0ZShuZXdWYWx1ZSkgfHwgbnVsbDtcbiAgICB9XG4gICAgaWYgKG5ld1ZhbHVlICE9PSB2YWx1ZSkge1xuICAgICAgc2V0VmFsdWUobmV3VmFsdWUsIG5ld1ZhbGlkYXRpb25FcnJvcik7XG4gICAgfVxuICAgIHNldExvY2FsRXJyb3IobmV3VmFsaWRhdGlvbkVycm9yKTtcbiAgfSk7XG4gIGNvbnN0IGVycm9yID0gZ2xvYmFsRXJyb3IgfHwgbG9jYWxFcnJvcjtcbiAgcmV0dXJuIGpzeHMoXCJkaXZcIiwge1xuICAgIGNsYXNzOiBjbGFzc25hbWVzKCdiaW8tcHJvcGVydGllcy1wYW5lbC1lbnRyeScsIGVycm9yID8gJ2hhcy1lcnJvcicgOiAnJyksXG4gICAgXCJkYXRhLWVudHJ5LWlkXCI6IGlkLFxuICAgIGNoaWxkcmVuOiBbanN4KFRleHRmaWVsZCwge1xuICAgICAgZGVib3VuY2U6IGRlYm91bmNlLFxuICAgICAgZGlzYWJsZWQ6IGRpc2FibGVkLFxuICAgICAgaWQ6IGlkLFxuICAgICAgbGFiZWw6IGxhYmVsLFxuICAgICAgb25JbnB1dDogb25JbnB1dCxcbiAgICAgIG9uRm9jdXM6IG9uRm9jdXMsXG4gICAgICBvbkJsdXI6IG9uQmx1cixcbiAgICAgIHBsYWNlaG9sZGVyOiBwbGFjZWhvbGRlcixcbiAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgIHRvb2x0aXA6IHRvb2x0aXAsXG4gICAgICBlbGVtZW50OiBlbGVtZW50XG4gICAgfSwgZWxlbWVudCksIGVycm9yICYmIGpzeChcImRpdlwiLCB7XG4gICAgICBjbGFzczogXCJiaW8tcHJvcGVydGllcy1wYW5lbC1lcnJvclwiLFxuICAgICAgY2hpbGRyZW46IGVycm9yXG4gICAgfSksIGpzeChEZXNjcmlwdGlvbiQxLCB7XG4gICAgICBmb3JJZDogaWQsXG4gICAgICBlbGVtZW50OiBlbGVtZW50LFxuICAgICAgdmFsdWU6IGRlc2NyaXB0aW9uXG4gICAgfSldXG4gIH0pO1xufVxuZnVuY3Rpb24gaXNFZGl0ZWQobm9kZSkge1xuICByZXR1cm4gbm9kZSAmJiAhIW5vZGUudmFsdWU7XG59XG5cbi8vIGhlbHBlcnMgLy8vLy8vLy8vLy8vLy8vLy9cblxuZnVuY3Rpb24gcHJlZml4SWQkMShpZCkge1xuICByZXR1cm4gYGJpby1wcm9wZXJ0aWVzLXBhbmVsLSR7aWR9YDtcbn1cblxuLyoqXG4gKiBBZGQgYSBkcmFnZ2VyIHRoYXQgY2FsbHMgYmFjayB0aGUgcGFzc2VkIGZ1bmN0aW9uIHdpdGhcbiAqIHsgZXZlbnQsIGRlbHRhIH0gb24gZHJhZy5cbiAqXG4gKiBAZXhhbXBsZVxuICpcbiAqIGZ1bmN0aW9uIGRyYWdNb3ZlKGV2ZW50LCBkZWx0YSkge1xuICogICAvLyB3ZSBhcmUgZHJhZ2dpbmcgKCEhKVxuICogfVxuICpcbiAqIGRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0JywgZHJhZ2dlcihkcmFnTW92ZSkpO1xuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKiBAcGFyYW0ge0VsZW1lbnR9IFtkcmFnUHJldmlld11cbiAqXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn0gZHJhZyBzdGFydCBjYWxsYmFjayBmdW5jdGlvblxuICovXG5mdW5jdGlvbiBjcmVhdGVEcmFnZ2VyKGZuLCBkcmFnUHJldmlldykge1xuICBsZXQgc2VsZjtcbiAgbGV0IHN0YXJ0WCwgc3RhcnRZO1xuXG4gIC8qKiBkcmFnIHN0YXJ0ICovXG4gIGZ1bmN0aW9uIG9uRHJhZ1N0YXJ0KGV2ZW50KSB7XG4gICAgc2VsZiA9IHRoaXM7XG4gICAgc3RhcnRYID0gZXZlbnQuY2xpZW50WDtcbiAgICBzdGFydFkgPSBldmVudC5jbGllbnRZO1xuXG4gICAgLy8gKDEpIHByZXZlbnQgcHJldmlldyBpbWFnZVxuICAgIGlmIChldmVudC5kYXRhVHJhbnNmZXIpIHtcbiAgICAgIGV2ZW50LmRhdGFUcmFuc2Zlci5zZXREcmFnSW1hZ2UoZHJhZ1ByZXZpZXcgfHwgZW1wdHlDYW52YXMoKSwgMCwgMCk7XG4gICAgfVxuXG4gICAgLy8gKDIpIHNldHVwIGRyYWcgbGlzdGVuZXJzXG5cbiAgICAvLyBhdHRhY2ggZHJhZyArIGNsZWFudXAgZXZlbnRcbiAgICAvLyB3ZSBuZWVkIHRvIGRvIHRoaXMgdG8gbWFrZSBzdXJlIHdlIHRyYWNrIGN1cnNvclxuICAgIC8vIG1vdmVtZW50cyBiZWZvcmUgd2UgcmVhY2ggb3RoZXIgZHJhZyBldmVudCBoYW5kbGVycyxcbiAgICAvLyBlLmcuIGluIGNoaWxkIGNvbnRhaW5lcnMuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCBvbkRyYWcsIHRydWUpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbnRlcicsIHByZXZlbnREZWZhdWx0LCB0cnVlKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdkcmFnZW5kJywgb25FbmQpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCBwcmV2ZW50RGVmYXVsdCk7XG4gIH1cbiAgZnVuY3Rpb24gb25EcmFnKGV2ZW50KSB7XG4gICAgY29uc3QgZGVsdGEgPSB7XG4gICAgICB4OiBldmVudC5jbGllbnRYIC0gc3RhcnRYLFxuICAgICAgeTogZXZlbnQuY2xpZW50WSAtIHN0YXJ0WVxuICAgIH07XG5cbiAgICAvLyBjYWxsIHByb3ZpZGVkIGZuIHdpdGggZXZlbnQsIGRlbHRhXG4gICAgcmV0dXJuIGZuLmNhbGwoc2VsZiwgZXZlbnQsIGRlbHRhKTtcbiAgfVxuICBmdW5jdGlvbiBvbkVuZCgpIHtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIG9uRHJhZywgdHJ1ZSk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignZHJhZ2VudGVyJywgcHJldmVudERlZmF1bHQsIHRydWUpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2RyYWdlbmQnLCBvbkVuZCk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignZHJvcCcsIHByZXZlbnREZWZhdWx0KTtcbiAgfVxuICByZXR1cm4gb25EcmFnU3RhcnQ7XG59XG5mdW5jdGlvbiBwcmV2ZW50RGVmYXVsdChldmVudCkge1xuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbn1cbmZ1bmN0aW9uIGVtcHR5Q2FudmFzKCkge1xuICByZXR1cm4gZG9taWZ5KCc8Y2FudmFzIHdpZHRoPVwiMFwiIGhlaWdodD1cIjBcIiAvPicpO1xufVxuY29uc3Qgbm9vcCA9ICgpID0+IHt9O1xuXG4vKipcbiAqIEEgZ2VuZXJpYyBwb3B1cCBjb21wb25lbnQuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHByb3BzXG4gKiBAcGFyYW0ge3N0cmluZ30gW3Byb3BzLmNsYXNzTmFtZV1cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW3Byb3BzLmRlbGF5SW5pdGlhbEZvY3VzXVxuICogQHBhcmFtIHt7dG9wOiBudW1iZXIsIGxlZnQ6IG51bWJlcn19IFtwcm9wcy5wb3NpdGlvbl1cbiAqIEBwYXJhbSB7bnVtYmVyfSBbcHJvcHMud2lkdGhdXG4gKiBAcGFyYW0ge251bWJlcn0gW3Byb3BzLmhlaWdodF1cbiAqIEBwYXJhbSB7RnVuY3Rpb259IHByb3BzLm9uQ2xvc2VcbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtwcm9wcy5vblBvc3RBY3RpdmF0ZV1cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtwcm9wcy5vblBvc3REZWFjdGl2YXRlXVxuICogQHBhcmFtIHtib29sZWFufSBbcHJvcHMucmV0dXJuRm9jdXNdXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtwcm9wcy5jbG9zZU9uRXNjYXBlXVxuICogQHBhcmFtIHtzdHJpbmd9IHByb3BzLnRpdGxlXG4gKiBAcGFyYW0ge1JlZn0gW3JlZl1cbiAqL1xuZnVuY3Rpb24gUG9wdXBDb21wb25lbnQocHJvcHMsIGdsb2JhbFJlZikge1xuICBjb25zdCB7XG4gICAgY2xhc3NOYW1lLFxuICAgIGRlbGF5SW5pdGlhbEZvY3VzLFxuICAgIHBvc2l0aW9uLFxuICAgIHdpZHRoLFxuICAgIGhlaWdodCxcbiAgICBvbkNsb3NlLFxuICAgIG9uUG9zdEFjdGl2YXRlID0gbm9vcCxcbiAgICBvblBvc3REZWFjdGl2YXRlID0gbm9vcCxcbiAgICByZXR1cm5Gb2N1cyA9IHRydWUsXG4gICAgY2xvc2VPbkVzY2FwZSA9IHRydWUsXG4gICAgdGl0bGVcbiAgfSA9IHByb3BzO1xuICBjb25zdCBmb2N1c1RyYXBSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IGxvY2FsUmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBwb3B1cFJlZiA9IGdsb2JhbFJlZiB8fCBsb2NhbFJlZjtcbiAgY29uc3QgaGFuZGxlS2V5ZG93biA9IGV2ZW50ID0+IHtcbiAgICAvLyBkbyBub3QgYWxsb3cga2V5Ym9hcmQgZXZlbnRzIHRvIGJ1YmJsZVxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIGlmIChjbG9zZU9uRXNjYXBlICYmIGV2ZW50LmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgIG9uQ2xvc2UoKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gcmUtYWN0aXZhdGUgZm9jdXMgdHJhcCBvbiBmb2N1c1xuICBjb25zdCBoYW5kbGVGb2N1cyA9ICgpID0+IHtcbiAgICBpZiAoZm9jdXNUcmFwUmVmLmN1cnJlbnQpIHtcbiAgICAgIGZvY3VzVHJhcFJlZi5jdXJyZW50LmFjdGl2YXRlKCk7XG4gICAgfVxuICB9O1xuICBsZXQgc3R5bGUgPSB7fTtcbiAgaWYgKHBvc2l0aW9uKSB7XG4gICAgc3R5bGUgPSB7XG4gICAgICAuLi5zdHlsZSxcbiAgICAgIHRvcDogcG9zaXRpb24udG9wICsgJ3B4JyxcbiAgICAgIGxlZnQ6IHBvc2l0aW9uLmxlZnQgKyAncHgnXG4gICAgfTtcbiAgfVxuICBpZiAod2lkdGgpIHtcbiAgICBzdHlsZS53aWR0aCA9IHdpZHRoICsgJ3B4JztcbiAgfVxuICBpZiAoaGVpZ2h0KSB7XG4gICAgc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0ICsgJ3B4JztcbiAgfVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChwb3B1cFJlZi5jdXJyZW50KSB7XG4gICAgICBwb3B1cFJlZi5jdXJyZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzaW4nLCBoYW5kbGVGb2N1cyk7XG4gICAgfVxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpZiAocG9wdXBSZWYuY3VycmVudCkge1xuICAgICAgICBwb3B1cFJlZi5jdXJyZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZvY3VzaW4nLCBoYW5kbGVGb2N1cyk7XG4gICAgICB9XG4gICAgfTtcbiAgfSwgW3BvcHVwUmVmXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHBvcHVwUmVmLmN1cnJlbnQpIHtcbiAgICAgIGZvY3VzVHJhcFJlZi5jdXJyZW50ID0gZm9jdXNUcmFwLmNyZWF0ZUZvY3VzVHJhcChwb3B1cFJlZi5jdXJyZW50LCB7XG4gICAgICAgIGNsaWNrT3V0c2lkZURlYWN0aXZhdGVzOiB0cnVlLFxuICAgICAgICBkZWxheUluaXRpYWxGb2N1cyxcbiAgICAgICAgZmFsbGJhY2tGb2N1czogcG9wdXBSZWYuY3VycmVudCxcbiAgICAgICAgb25Qb3N0QWN0aXZhdGUsXG4gICAgICAgIG9uUG9zdERlYWN0aXZhdGUsXG4gICAgICAgIHJldHVybkZvY3VzT25EZWFjdGl2YXRlOiByZXR1cm5Gb2N1c1xuICAgICAgfSk7XG4gICAgICBmb2N1c1RyYXBSZWYuY3VycmVudC5hY3RpdmF0ZSgpO1xuICAgIH1cbiAgICByZXR1cm4gKCkgPT4gZm9jdXNUcmFwUmVmLmN1cnJlbnQgJiYgZm9jdXNUcmFwUmVmLmN1cnJlbnQuZGVhY3RpdmF0ZSgpO1xuICB9LCBbcG9wdXBSZWZdKTtcbiAgcmV0dXJuIGpzeChcImRpdlwiLCB7XG4gICAgXCJhcmlhLWxhYmVsXCI6IHRpdGxlLFxuICAgIHRhYkluZGV4OiAtMSxcbiAgICByZWY6IHBvcHVwUmVmLFxuICAgIG9uS2V5RG93bjogaGFuZGxlS2V5ZG93bixcbiAgICByb2xlOiBcImRpYWxvZ1wiLFxuICAgIGNsYXNzOiBjbGFzc25hbWVzKCdiaW8tcHJvcGVydGllcy1wYW5lbC1wb3B1cCcsIGNsYXNzTmFtZSksXG4gICAgc3R5bGU6IHN0eWxlLFxuICAgIGNoaWxkcmVuOiBwcm9wcy5jaGlsZHJlblxuICB9KTtcbn1cbmNvbnN0IFBvcHVwID0gZm9yd2FyZFJlZihQb3B1cENvbXBvbmVudCk7XG5Qb3B1cC5UaXRsZSA9IFRpdGxlO1xuUG9wdXAuQm9keSA9IEJvZHk7XG5Qb3B1cC5Gb290ZXIgPSBGb290ZXI7XG5mdW5jdGlvbiBUaXRsZShwcm9wcykge1xuICBjb25zdCB7XG4gICAgY2hpbGRyZW4sXG4gICAgY2xhc3NOYW1lLFxuICAgIGRyYWdnYWJsZSxcbiAgICBldmVudEJ1cyxcbiAgICB0aXRsZSxcbiAgICBzaG93Q2xvc2VCdXR0b24gPSBmYWxzZSxcbiAgICBjbG9zZUJ1dHRvblRvb2x0aXAgPSAnQ2xvc2UgcG9wdXAnLFxuICAgIG9uQ2xvc2UsXG4gICAgLi4ucmVzdFxuICB9ID0gcHJvcHM7XG5cbiAgLy8gd2UgY2FuJ3QgdXNlIHN0YXRlIGFzIHdlIG5lZWQgdG9cbiAgLy8gbWFuaXB1bGF0ZSB0aGlzIGluc2lkZSBkcmFnZ2luZyBldmVudHNcbiAgY29uc3QgY29udGV4dCA9IHVzZVJlZih7XG4gICAgc3RhcnRQb3NpdGlvbjogbnVsbCxcbiAgICBuZXdQb3NpdGlvbjogbnVsbFxuICB9KTtcbiAgY29uc3QgZHJhZ1ByZXZpZXdSZWYgPSB1c2VSZWYoKTtcbiAgY29uc3QgdGl0bGVSZWYgPSB1c2VSZWYoKTtcbiAgY29uc3Qgb25Nb3ZlID0gKGV2ZW50LCBkZWx0YSkgPT4ge1xuICAgIGNhbmNlbChldmVudCk7XG4gICAgY29uc3Qge1xuICAgICAgeDogZHgsXG4gICAgICB5OiBkeVxuICAgIH0gPSBkZWx0YTtcbiAgICBjb25zdCBuZXdQb3NpdGlvbiA9IHtcbiAgICAgIHg6IGNvbnRleHQuY3VycmVudC5zdGFydFBvc2l0aW9uLnggKyBkeCxcbiAgICAgIHk6IGNvbnRleHQuY3VycmVudC5zdGFydFBvc2l0aW9uLnkgKyBkeVxuICAgIH07XG4gICAgY29uc3QgcG9wdXBQYXJlbnQgPSBnZXRQb3B1cFBhcmVudCh0aXRsZVJlZi5jdXJyZW50KTtcbiAgICBwb3B1cFBhcmVudC5zdHlsZS50b3AgPSBuZXdQb3NpdGlvbi55ICsgJ3B4JztcbiAgICBwb3B1cFBhcmVudC5zdHlsZS5sZWZ0ID0gbmV3UG9zaXRpb24ueCArICdweCc7XG4gICAgZXZlbnRCdXM/LmZpcmUoJ2ZlZWxQb3B1cC5kcmFnb3ZlcicsIHtcbiAgICAgIG5ld1Bvc2l0aW9uLFxuICAgICAgZGVsdGFcbiAgICB9KTtcbiAgfTtcbiAgY29uc3Qgb25Nb3ZlU3RhcnQgPSBldmVudCA9PiB7XG4gICAgLy8gaW5pdGlhbGl6ZSBkcmFnIGhhbmRsZXJcbiAgICBjb25zdCBvbkRyYWdTdGFydCA9IGNyZWF0ZURyYWdnZXIob25Nb3ZlLCBkcmFnUHJldmlld1JlZi5jdXJyZW50KTtcbiAgICBvbkRyYWdTdGFydChldmVudCk7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgY29uc3QgcG9wdXBQYXJlbnQgPSBnZXRQb3B1cFBhcmVudCh0aXRsZVJlZi5jdXJyZW50KTtcbiAgICBjb25zdCBib3VuZHMgPSBwb3B1cFBhcmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBjb250ZXh0LmN1cnJlbnQuc3RhcnRQb3NpdGlvbiA9IHtcbiAgICAgIHg6IGJvdW5kcy5sZWZ0LFxuICAgICAgeTogYm91bmRzLnRvcFxuICAgIH07XG4gICAgZXZlbnRCdXM/LmZpcmUoJ2ZlZWxQb3B1cC5kcmFnc3RhcnQnKTtcbiAgfTtcbiAgY29uc3Qgb25Nb3ZlRW5kID0gKCkgPT4ge1xuICAgIGNvbnRleHQuY3VycmVudC5uZXdQb3NpdGlvbiA9IG51bGw7XG4gICAgZXZlbnRCdXM/LmZpcmUoJ2ZlZWxQb3B1cC5kcmFnZW5kJyk7XG4gIH07XG4gIHJldHVybiBqc3hzKFwiZGl2XCIsIHtcbiAgICBjbGFzczogY2xhc3NuYW1lcygnYmlvLXByb3BlcnRpZXMtcGFuZWwtcG9wdXBfX2hlYWRlcicsIGRyYWdnYWJsZSAmJiAnZHJhZ2dhYmxlJywgY2xhc3NOYW1lKSxcbiAgICByZWY6IHRpdGxlUmVmLFxuICAgIGRyYWdnYWJsZTogZHJhZ2dhYmxlLFxuICAgIG9uRHJhZ1N0YXJ0OiBvbk1vdmVTdGFydCxcbiAgICBvbkRyYWdFbmQ6IG9uTW92ZUVuZCxcbiAgICAuLi5yZXN0LFxuICAgIGNoaWxkcmVuOiBbZHJhZ2dhYmxlICYmIGpzeHMoRnJhZ21lbnQkMSwge1xuICAgICAgY2hpbGRyZW46IFtqc3goXCJkaXZcIiwge1xuICAgICAgICByZWY6IGRyYWdQcmV2aWV3UmVmLFxuICAgICAgICBjbGFzczogXCJiaW8tcHJvcGVydGllcy1wYW5lbC1wb3B1cF9fZHJhZy1wcmV2aWV3XCJcbiAgICAgIH0pLCBqc3goXCJkaXZcIiwge1xuICAgICAgICBjbGFzczogXCJiaW8tcHJvcGVydGllcy1wYW5lbC1wb3B1cF9fZHJhZy1oYW5kbGVcIixcbiAgICAgICAgY2hpbGRyZW46IGpzeChEcmFnSWNvbiwge30pXG4gICAgICB9KV1cbiAgICB9KSwganN4KFwiZGl2XCIsIHtcbiAgICAgIGNsYXNzOiBcImJpby1wcm9wZXJ0aWVzLXBhbmVsLXBvcHVwX190aXRsZVwiLFxuICAgICAgY2hpbGRyZW46IHRpdGxlXG4gICAgfSksIGNoaWxkcmVuLCBzaG93Q2xvc2VCdXR0b24gJiYganN4KFwiYnV0dG9uXCIsIHtcbiAgICAgIHRpdGxlOiBjbG9zZUJ1dHRvblRvb2x0aXAsXG4gICAgICBjbGFzczogXCJiaW8tcHJvcGVydGllcy1wYW5lbC1wb3B1cF9fY2xvc2VcIixcbiAgICAgIG9uQ2xpY2s6IG9uQ2xvc2UsXG4gICAgICBjaGlsZHJlbjoganN4KENsb3NlSWNvbiwge30pXG4gICAgfSldXG4gIH0pO1xufVxuZnVuY3Rpb24gQm9keShwcm9wcykge1xuICBjb25zdCB7XG4gICAgY2hpbGRyZW4sXG4gICAgY2xhc3NOYW1lLFxuICAgIC4uLnJlc3RcbiAgfSA9IHByb3BzO1xuICByZXR1cm4ganN4KFwiZGl2XCIsIHtcbiAgICBjbGFzczogY2xhc3NuYW1lcygnYmlvLXByb3BlcnRpZXMtcGFuZWwtcG9wdXBfX2JvZHknLCBjbGFzc05hbWUpLFxuICAgIC4uLnJlc3QsXG4gICAgY2hpbGRyZW46IGNoaWxkcmVuXG4gIH0pO1xufVxuZnVuY3Rpb24gRm9vdGVyKHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBjaGlsZHJlbixcbiAgICBjbGFzc05hbWUsXG4gICAgLi4ucmVzdFxuICB9ID0gcHJvcHM7XG4gIHJldHVybiBqc3goXCJkaXZcIiwge1xuICAgIGNsYXNzOiBjbGFzc25hbWVzKCdiaW8tcHJvcGVydGllcy1wYW5lbC1wb3B1cF9fZm9vdGVyJywgY2xhc3NOYW1lKSxcbiAgICAuLi5yZXN0LFxuICAgIGNoaWxkcmVuOiBwcm9wcy5jaGlsZHJlblxuICB9KTtcbn1cblxuLy8gaGVscGVycyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbmZ1bmN0aW9uIGdldFBvcHVwUGFyZW50KG5vZGUpIHtcbiAgcmV0dXJuIG5vZGUuY2xvc2VzdCgnLmJpby1wcm9wZXJ0aWVzLXBhbmVsLXBvcHVwJyk7XG59XG5mdW5jdGlvbiBjYW5jZWwoZXZlbnQpIHtcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG59XG5jb25zdCBGRUVMX1BPUFVQX1dJRFRIID0gNzAwO1xuY29uc3QgRkVFTF9QT1BVUF9IRUlHSFQgPSAyNTA7XG5cbi8qKlxuICogRkVFTCBleHByZXNzaW9uIGVkaXRvciBwb3B1cCBjb21wb25lbnRcbiAqIEBwYXJhbSB7RmVlbFBvcHVwUHJvcHN9IHByb3BzXG4gKi9cbmZ1bmN0aW9uIEZlZWxQb3B1cCQxKHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBlbnRyeUlkLFxuICAgIG9uSW5wdXQsXG4gICAgb25DbG9zZSxcbiAgICB0aXRsZSxcbiAgICB0eXBlLFxuICAgIHZhbHVlLFxuICAgIGxpbmtzLFxuICAgIHZhcmlhYmxlcyxcbiAgICBwb3NpdGlvbixcbiAgICBob3N0TGFuZ3VhZ2UsXG4gICAgc2luZ2xlTGluZSxcbiAgICBzb3VyY2VFbGVtZW50LFxuICAgIHRvb2x0aXBDb250YWluZXIsXG4gICAgZXZlbnRCdXMsXG4gICAgZmVlbExhbmd1YWdlQ29udGV4dFxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IGVkaXRvclJlZiA9IHVzZVJlZigpO1xuICBjb25zdCBwb3B1cFJlZiA9IHVzZVJlZigpO1xuICBjb25zdCBpc0F1dG9Db21wbGV0aW9uT3BlbiA9IHVzZVJlZihmYWxzZSk7XG4gIGNvbnN0IGhhbmRsZVNldFJldHVybkZvY3VzID0gKCkgPT4ge1xuICAgIHNvdXJjZUVsZW1lbnQgJiYgc291cmNlRWxlbWVudC5mb2N1cygpO1xuICB9O1xuICBjb25zdCBvbktleURvd25DYXB0dXJlID0gZXZlbnQgPT4ge1xuICAgIC8vIHdlIHVzZSBjYXB0dXJlIGhlcmUgdG8gbWFrZSBzdXJlIHdlIGhhbmRsZSB0aGUgZXZlbnQgYmVmb3JlIHRoZSBlZGl0b3IgZG9lc1xuICAgIGlmIChldmVudC5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICBpc0F1dG9Db21wbGV0aW9uT3Blbi5jdXJyZW50ID0gYXV0b0NvbXBsZXRpb25PcGVuKGV2ZW50LnRhcmdldCk7XG4gICAgfVxuICB9O1xuICBjb25zdCBvbktleURvd24gPSBldmVudCA9PiB7XG4gICAgaWYgKGV2ZW50LmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgIC8vIGNsb3NlIHBvcHVwIG9ubHkgaWYgYXV0byBjb21wbGV0aW9uIGlzIG5vdCBvcGVuXG4gICAgICBpZiAoIWlzQXV0b0NvbXBsZXRpb25PcGVuLmN1cnJlbnQpIHtcbiAgICAgICAgb25DbG9zZSgpO1xuICAgICAgICBpc0F1dG9Db21wbGV0aW9uT3Blbi5jdXJyZW50ID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICB9O1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIHNldCBmb2N1cyBvbiBlZGl0b3Igd2hlbiBwb3B1cCBpcyBvcGVuZWRcbiAgICBpZiAoZWRpdG9yUmVmLmN1cnJlbnQpIHtcbiAgICAgIGVkaXRvclJlZi5jdXJyZW50LmZvY3VzKCk7XG4gICAgfVxuICB9LCBbZWRpdG9yUmVmXSk7XG4gIHJldHVybiBqc3hzKFBvcHVwLCB7XG4gICAgY2xhc3NOYW1lOiBcImJpby1wcm9wZXJ0aWVzLXBhbmVsLWZlZWwtcG9wdXBcIixcbiAgICBwb3NpdGlvbjogcG9zaXRpb24sXG4gICAgdGl0bGU6IHRpdGxlLFxuICAgIHJldHVybkZvY3VzOiBmYWxzZSxcbiAgICBjbG9zZU9uRXNjYXBlOiBmYWxzZSxcbiAgICBkZWxheUluaXRpYWxGb2N1czogZmFsc2UsXG4gICAgb25Qb3N0RGVhY3RpdmF0ZTogaGFuZGxlU2V0UmV0dXJuRm9jdXMsXG4gICAgaGVpZ2h0OiBGRUVMX1BPUFVQX0hFSUdIVCxcbiAgICB3aWR0aDogRkVFTF9QT1BVUF9XSURUSCxcbiAgICByZWY6IHBvcHVwUmVmLFxuICAgIGNoaWxkcmVuOiBbanN4KFBvcHVwLlRpdGxlLCB7XG4gICAgICB0aXRsZTogdGl0bGUsXG4gICAgICBldmVudEJ1czogZXZlbnRCdXMsXG4gICAgICBzaG93Q2xvc2VCdXR0b246IHRydWUsXG4gICAgICBjbG9zZUJ1dHRvblRvb2x0aXA6IFwiU2F2ZSBhbmQgY2xvc2VcIixcbiAgICAgIG9uQ2xvc2U6IG9uQ2xvc2UsXG4gICAgICBkcmFnZ2FibGU6IHRydWUsXG4gICAgICBjaGlsZHJlbjoganN4KEZyYWdtZW50JDEsIHtcbiAgICAgICAgY2hpbGRyZW46IChsaW5rcyB8fCBbXSkubWFwKChsaW5rLCBpbmRleCkgPT4ge1xuICAgICAgICAgIHJldHVybiBqc3hzKFwiYVwiLCB7XG4gICAgICAgICAgICByZWw6IFwibm9yZWZlcnJlclwiLFxuICAgICAgICAgICAgaHJlZjogbGluay5ocmVmLFxuICAgICAgICAgICAgdGFyZ2V0OiBcIl9ibGFua1wiLFxuICAgICAgICAgICAgY2xhc3M6IFwiYmlvLXByb3BlcnRpZXMtcGFuZWwtZmVlbC1wb3B1cF9fdGl0bGUtbGlua1wiLFxuICAgICAgICAgICAgY2hpbGRyZW46IFtsaW5rLnRpdGxlLCBqc3goTGF1bmNoSWNvbiwge30pXVxuICAgICAgICAgIH0sIGluZGV4KTtcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgfSksIGpzeChQb3B1cC5Cb2R5LCB7XG4gICAgICBjaGlsZHJlbjoganN4cyhcImRpdlwiLCB7XG4gICAgICAgIG9uS2V5RG93bkNhcHR1cmU6IG9uS2V5RG93bkNhcHR1cmUsXG4gICAgICAgIG9uS2V5RG93bjogb25LZXlEb3duLFxuICAgICAgICBjbGFzczogXCJiaW8tcHJvcGVydGllcy1wYW5lbC1mZWVsLXBvcHVwX19ib2R5XCIsXG4gICAgICAgIGNoaWxkcmVuOiBbdHlwZSA9PT0gJ2ZlZWwnICYmIGpzeChGZWVsRWRpdG9yLCB7XG4gICAgICAgICAgZW5hYmxlR3V0dGVyczogdHJ1ZSxcbiAgICAgICAgICBpZDogcHJlZml4SWQoZW50cnlJZCksXG4gICAgICAgICAgbmFtZTogZW50cnlJZCxcbiAgICAgICAgICBvbklucHV0OiBvbklucHV0LFxuICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICB2YXJpYWJsZXM6IHZhcmlhYmxlcyxcbiAgICAgICAgICBmZWVsTGFuZ3VhZ2VDb250ZXh0OiBmZWVsTGFuZ3VhZ2VDb250ZXh0LFxuICAgICAgICAgIHJlZjogZWRpdG9yUmVmLFxuICAgICAgICAgIHRvb2x0aXBDb250YWluZXI6IHRvb2x0aXBDb250YWluZXJcbiAgICAgICAgfSksIHR5cGUgPT09ICdmZWVsZXJzJyAmJiBqc3goVGVtcGxhdGluZ0VkaXRvciwge1xuICAgICAgICAgIGlkOiBwcmVmaXhJZChlbnRyeUlkKSxcbiAgICAgICAgICBjb250ZW50QXR0cmlidXRlczoge1xuICAgICAgICAgICAgJ2FyaWEtbGFiZWwnOiB0aXRsZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZW5hYmxlR3V0dGVyczogdHJ1ZSxcbiAgICAgICAgICBob3N0TGFuZ3VhZ2U6IGhvc3RMYW5ndWFnZSxcbiAgICAgICAgICBuYW1lOiBlbnRyeUlkLFxuICAgICAgICAgIG9uSW5wdXQ6IG9uSW5wdXQsXG4gICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgIHJlZjogZWRpdG9yUmVmLFxuICAgICAgICAgIHNpbmdsZUxpbmU6IHNpbmdsZUxpbmUsXG4gICAgICAgICAgdG9vbHRpcENvbnRhaW5lcjogdG9vbHRpcENvbnRhaW5lclxuICAgICAgICB9KV1cbiAgICAgIH0pXG4gICAgfSldXG4gIH0pO1xufVxuZnVuY3Rpb24gcHJlZml4SWQoaWQpIHtcbiAgcmV0dXJuIGBiaW8tcHJvcGVydGllcy1wYW5lbC0ke2lkfWA7XG59XG5mdW5jdGlvbiBhdXRvQ29tcGxldGlvbk9wZW4oZWxlbWVudCkge1xuICBjb25zdCBlZGl0b3IgPSBlbGVtZW50LmNsb3Nlc3QoJy5jbS1lZGl0b3InKTtcbiAgcmV0dXJuIGVkaXRvciA/IGVkaXRvci5xdWVyeVNlbGVjdG9yKCcuY20tdG9vbHRpcC1hdXRvY29tcGxldGUnKSA6IG51bGw7XG59XG5mdW5jdGlvbiBnZXRQb3B1cFRpdGxlKHtcbiAgZWxlbWVudCxcbiAgbGFiZWxcbn0pIHtcbiAgbGV0IHBvcHVwVGl0bGUgPSAnJztcbiAgaWYgKGVsZW1lbnQgJiYgZWxlbWVudC50eXBlKSB7XG4gICAgcG9wdXBUaXRsZSA9IGAke2VsZW1lbnQudHlwZX0gLyBgO1xuICB9XG4gIHJldHVybiBgJHtwb3B1cFRpdGxlfSR7bGFiZWx9YDtcbn1cbmZ1bmN0aW9uIGdldFBvcHVwUG9zaXRpb24oKSB7XG4gIGNvbnN0IHZpZXdwb3J0V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGg7XG4gIGNvbnN0IHZpZXdwb3J0SGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ7XG4gIHJldHVybiB7XG4gICAgbGVmdDogTWF0aC5tYXgoMCwgKHZpZXdwb3J0V2lkdGggLSBGRUVMX1BPUFVQX1dJRFRIKSAvIDIpLFxuICAgIHRvcDogTWF0aC5tYXgoMCwgKHZpZXdwb3J0SGVpZ2h0IC0gRkVFTF9QT1BVUF9IRUlHSFQpIC8gMilcbiAgfTtcbn1cblxuLyoqXG4gKiBGRUVMIHBvcHVwIGNvbXBvbmVudCwgYnVpbHQgYXMgYSBzaW5nbGV0b24uXG4gKlxuICogSW4gb3JkZXIgdG8gaW1wbGVtZW50IGEgY3VzdG9tIHJlcGxhY2VtZW50LCBoYW5kbGUgdGhlIGZvbGxvd2luZyBldmVudHM6XG4gKiAtIGBwcm9wZXJ0aWVzUGFuZWwub3BlblBvcHVwYFxuICogLSBgcHJvcGVydGllc1BhbmVsLmNsb3NlUG9wdXBgXG4gKiAtIGBwcm9wZXJ0aWVzUGFuZWwuZGV0YWNoYFxuICpcbiAqIFdpdGhpbiB0aGUgY3VzdG9tIHJlbmRlcmVyLCBtYWtlIHN1cmUgdG8gZW1pdCB0aGUgZm9sbG93aW5nIGV2ZW50czpcbiAqICAtIGBmZWVsUG9wdXAub3BlbmAgLSBmaXJlZCBiZWZvcmUgdGhlIHBvcHVwIGlzIG1vdW50ZWRcbiAqICAtIGBmZWVsUG9wdXAub3BlbmVkYCAtIGZpcmVkIGFmdGVyIHRoZSBwb3B1cCBpcyBtb3VudGVkLiBFdmVudCBjb250ZXh0IGNvbnRhaW5zIHRoZSBET00gbm9kZSBvZiB0aGUgcG9wdXAgYXMgYGRvbU5vZGVgXG4gKiAgLSBgZmVlbFBvcHVwLmNsb3NlYCAtIGZpcmVkIGJlZm9yZSB0aGUgcG9wdXAgaXMgdW5tb3VudGVkLiBFdmVudCBjb250ZXh0IGNvbnRhaW5zIHRoZSBET00gbm9kZSBvZiB0aGUgcG9wdXAgYXMgYGRvbU5vZGVgXG4gKiAgLSBgZmVlbFBvcHVwLmNsb3NlZGAgLSBmaXJlZCBhZnRlciB0aGUgcG9wdXAgaXMgdW5tb3VudGVkXG4gKi9cbmNsYXNzIEZlZWxQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKGV2ZW50QnVzLCBjb25maWcgPSB7fSkge1xuICAgIHRoaXMuX2V2ZW50QnVzID0gZXZlbnRCdXM7XG4gICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xuICAgIHRoaXMuX2lzT3BlbiA9IGZhbHNlO1xuICAgIGV2ZW50QnVzLm9uKCdwcm9wZXJ0aWVzUGFuZWwub3BlblBvcHVwJywgKF8sIGNvbnRleHQpID0+IHtcbiAgICAgIHRoaXMub3Blbihjb250ZXh0LmVudHJ5SWQsIGNvbnRleHQsIGNvbnRleHQuc291cmNlRWxlbWVudCk7XG5cbiAgICAgIC8vIHJldHVybiB0cnVlIHRvIGluZGljYXRlIHRoYXQgcG9wdXAgd2FzIG9wZW5lZFxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSk7XG4gICAgZXZlbnRCdXMub24oWydwcm9wZXJ0aWVzUGFuZWwuY2xvc2VQb3B1cCcsICdwcm9wZXJ0aWVzUGFuZWwuZGV0YWNoJ10sICgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiB0aGUgRkVFTCBwb3B1cCBpcyBvcGVuLlxuICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgKi9cbiAgaXNPcGVuKCkge1xuICAgIHJldHVybiB0aGlzLl9pc09wZW47XG4gIH1cblxuICAvKipcbiAgICogT3BlbiB0aGUgRkVFTCBwb3B1cC5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGVudHJ5SWRcbiAgICogQHBhcmFtIHtPYmplY3R9IHBvcHVwQ29uZmlnXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHNvdXJjZUVsZW1lbnRcbiAgICovXG4gIG9wZW4oZW50cnlJZCwgcG9wdXBDb25maWcsIHNvdXJjZUVsZW1lbnQpIHtcbiAgICAvLyBjbG9zZSBiZWZvcmUgb3BlbmluZyBhIG5ldyBvbmVcbiAgICB0aGlzLmNsb3NlKCk7XG4gICAgdGhpcy5fb3BlblBvcHVwKHtcbiAgICAgIC4uLnBvcHVwQ29uZmlnLFxuICAgICAgZW50cnlJZCxcbiAgICAgIHNvdXJjZUVsZW1lbnRcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbG9zZSB0aGUgRkVFTCBwb3B1cC5cbiAgICovXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX2Nsb3NlUG9wdXAoKTtcbiAgfVxuICBfb3BlblBvcHVwKGNvbnRleHQpIHtcbiAgICBjb25zdCB7XG4gICAgICBlbGVtZW50LFxuICAgICAgbGFiZWwsXG4gICAgICBzb3VyY2VFbGVtZW50LFxuICAgICAgdHlwZVxuICAgIH0gPSBjb250ZXh0O1xuICAgIHRoaXMuX2lzT3BlbiA9IHRydWU7XG4gICAgdGhpcy5fZXZlbnRCdXMuZmlyZSgncHJvcGVydGllc1BhbmVsUG9wdXAub3BlbicsIHtcbiAgICAgIGNvbnRhaW5lcjogdGhpcy5fY29uZmlnLmZlZWxQb3B1cENvbnRhaW5lcixcbiAgICAgIGNvbmZpZzoge1xuICAgICAgICAuLi5jb250ZXh0LFxuICAgICAgICBsaW5rczogdGhpcy5fY29uZmlnLmdldEZlZWxQb3B1cExpbmtzPy4odHlwZSkgfHwgW10sXG4gICAgICAgIG9uQ2xvc2U6ICgpID0+IHtcbiAgICAgICAgICB0aGlzLl9jbG9zZVBvcHVwKCk7XG5cbiAgICAgICAgICAvLyBzZXRUaW1lb3V0IHRvIGVuc3VyZSB0aGUgZm9jdXMgaGFwcGVucyBhZnRlciB0aGUgRE9NIHVwZGF0ZXMgbWFrZSBpdCBmb2N1c2FibGVcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHNvdXJjZUVsZW1lbnQgJiYgc291cmNlRWxlbWVudC5mb2N1cygpO1xuICAgICAgICAgIH0sIDApO1xuICAgICAgICB9LFxuICAgICAgICBwb3NpdGlvbjogZ2V0UG9wdXBQb3NpdGlvbigpLFxuICAgICAgICB0aXRsZTogZ2V0UG9wdXBUaXRsZSh7XG4gICAgICAgICAgZWxlbWVudCxcbiAgICAgICAgICBsYWJlbFxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIF9jbG9zZVBvcHVwKCkge1xuICAgIGlmICh0aGlzLl9pc09wZW4pIHtcbiAgICAgIHRoaXMuX2lzT3BlbiA9IGZhbHNlO1xuICAgICAgdGhpcy5fZXZlbnRCdXMuZmlyZSgncHJvcGVydGllc1BhbmVsUG9wdXAuY2xvc2UnKTtcbiAgICB9XG4gIH1cbn1cbkZlZWxQb3B1cC4kaW5qZWN0ID0gWydldmVudEJ1cycsICdjb25maWcucHJvcGVydGllc1BhbmVsJ107XG5jbGFzcyBGZWVsUG9wdXBSZW5kZXJlciB7XG4gIGNvbnN0cnVjdG9yKGV2ZW50QnVzKSB7XG4gICAgdGhpcy5fZXZlbnRCdXMgPSBldmVudEJ1cztcbiAgICB0aGlzLl9jb250YWluZXIgPSBudWxsO1xuICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xuICAgIGV2ZW50QnVzLm9uKCdwcm9wZXJ0aWVzUGFuZWxQb3B1cC5vcGVuJywgY29udGV4dCA9PiB7XG4gICAgICB0aGlzLl9yZW5kZXJQb3B1cChjb250ZXh0KTtcbiAgICB9KTtcbiAgICBldmVudEJ1cy5vbigncHJvcGVydGllc1BhbmVsUG9wdXAuY2xvc2UnLCAoKSA9PiB7XG4gICAgICB0aGlzLl9yZW1vdmVQb3B1cCgpO1xuICAgIH0pO1xuICB9XG4gIF9yZW5kZXJQb3B1cChjb250ZXh0KSB7XG4gICAgbGV0IHtcbiAgICAgIGNvbnRhaW5lcixcbiAgICAgIGNvbmZpZ1xuICAgIH0gPSBjb250ZXh0O1xuICAgIGNvbnRhaW5lciA9IHRoaXMuX2NvbnRhaW5lciA9IGdldENvbnRhaW5lcihjb250YWluZXIpIHx8IGRvY3VtZW50LmJvZHk7XG4gICAgY29uc3QgZWxlbWVudCA9IHRoaXMuX2VsZW1lbnQgPSBjcmVhdGVFbGVtZW50KCk7XG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuXG4gICAgLy8gVE9ETyhwaGlsaXBwZnJvbW1lKTogdGhlcmUgaXMgbm8gdXNlU2VydmljZSBpbiB0aGlzIGNvbnRleHQsIHNvIHdlIG5lZWRcbiAgICAvLyB0byBwYXNzIHRoZSBldmVudCBidXMgYXMgYSBwcm9wIG9yIGNyZWF0ZSBhIGNvbnRleHQgcHJvdmlkZXIsIGhvd2V2ZXIsXG4gICAgLy8gYSBjdXN0b20gcmVuZGVyZXIgd291bGQgaGF2ZSB0byB1c2UgdGhhdCBjb250ZXh0IHByb3ZpZGVyIGFzIHdlbGwgdG8gaGF2ZVxuICAgIC8vIGFjY2VzcyB0byB0aGUgZXZlbnQgYnVzIGFuZCBvdGhlciBzZXJ2aWNlc1xuICAgIHRoaXMuX2VtaXQoJ2ZlZWxQb3B1cC5vcGVuJyk7XG4gICAgcmVuZGVyKGpzeChGZWVsUG9wdXAkMSwge1xuICAgICAgLi4uY29uZmlnLFxuICAgICAgZXZlbnRCdXM6IHRoaXMuX2V2ZW50QnVzXG4gICAgfSksIGVsZW1lbnQpO1xuICAgIHRoaXMuX2VtaXQoJ2ZlZWxQb3B1cC5vcGVuZWQnLCB7XG4gICAgICBkb21Ob2RlOiBlbGVtZW50XG4gICAgfSk7XG4gIH1cbiAgX3JlbW92ZVBvcHVwKCkge1xuICAgIGlmICghdGhpcy5fY29udGFpbmVyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX2VtaXQoJ2ZlZWxQb3B1cC5jbG9zZScsIHtcbiAgICAgIGRvbU5vZGU6IHRoaXMuX2VsZW1lbnRcbiAgICB9KTtcbiAgICByZW5kZXIobnVsbCwgdGhpcy5fZWxlbWVudCk7XG4gICAgdGhpcy5fY29udGFpbmVyLnJlbW92ZUNoaWxkKHRoaXMuX2VsZW1lbnQpO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IG51bGw7XG4gICAgdGhpcy5fZW1pdCgnZmVlbFBvcHVwLmNsb3NlZCcpO1xuICB9XG4gIF9lbWl0KGV2ZW50LCBjb250ZXh0KSB7XG4gICAgdGhpcy5fZXZlbnRCdXMuZmlyZShldmVudCwgY29udGV4dCk7XG4gIH1cbn1cbkZlZWxQb3B1cFJlbmRlcmVyLiRpbmplY3QgPSBbJ2V2ZW50QnVzJ107XG5cbi8vIGhlbHBlcnMgLy8vLy8vLy8vLy8vLy8vLy9cblxuZnVuY3Rpb24gY3JlYXRlRWxlbWVudCgpIHtcbiAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2Jpby1wcm9wZXJ0aWVzLXBhbmVsLXBvcHVwLWNvbnRhaW5lcicpO1xuICByZXR1cm4gZWxlbWVudDtcbn1cbmZ1bmN0aW9uIGdldENvbnRhaW5lcihjb250YWluZXIpIHtcbiAgaWYgKGlzU3RyaW5nKGNvbnRhaW5lcikpIHtcbiAgICByZXR1cm4gcXVlcnkoY29udGFpbmVyKTtcbiAgfVxuICByZXR1cm4gY29udGFpbmVyO1xufVxudmFyIGluZGV4ID0ge1xuICBfX2luaXRfXzogWydmZWVsUG9wdXAnLCAnZmVlbFBvcHVwUmVuZGVyZXInXSxcbiAgZmVlbFBvcHVwOiBbJ3R5cGUnLCBGZWVsUG9wdXBdLFxuICBmZWVsUG9wdXBSZW5kZXJlcjogWyd0eXBlJywgRmVlbFBvcHVwUmVuZGVyZXJdXG59O1xuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtzdHJpY3RdXG4gKlxuICogQHJldHVybnMge2FueX1cbiAqL1xuZnVuY3Rpb24gZ2V0U2VydmljZSh0eXBlLCBzdHJpY3QpIHt9XG5jb25zdCBGb3JtUHJvcGVydGllc1BhbmVsQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQoe1xuICBnZXRTZXJ2aWNlXG59KTtcblxuZnVuY3Rpb24gZ2V0UHJvcGVydGllc1BhbmVsSGVhZGVyUHJvdmlkZXIob3B0aW9ucyA9IHt9KSB7XG4gIGNvbnN0IHtcbiAgICBnZXREb2N1bWVudGF0aW9uUmVmLFxuICAgIGZvcm1GaWVsZHNcbiAgfSA9IG9wdGlvbnM7XG4gIHJldHVybiB7XG4gICAgZ2V0RWxlbWVudExhYmVsOiBmaWVsZCA9PiB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIHR5cGVcbiAgICAgIH0gPSBmaWVsZDtcbiAgICAgIGNvbnN0IGZpZWxkRGVmaW5pdGlvbiA9IGZvcm1GaWVsZHMuZ2V0KHR5cGUpLmNvbmZpZztcbiAgICAgIHJldHVybiBmaWVsZERlZmluaXRpb24uZ2V0U3ViaGVhZGluZyA/IGZpZWxkRGVmaW5pdGlvbi5nZXRTdWJoZWFkaW5nKGZpZWxkKSA6IGZpZWxkLmxhYmVsO1xuICAgIH0sXG4gICAgZ2V0RWxlbWVudEljb246IGZpZWxkID0+IHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgdHlwZVxuICAgICAgfSA9IGZpZWxkO1xuICAgICAgY29uc3QgZmllbGREZWZpbml0aW9uID0gZm9ybUZpZWxkcy5nZXQodHlwZSkuY29uZmlnO1xuICAgICAgY29uc3QgSWNvbiA9IGZpZWxkRGVmaW5pdGlvbi5pY29uIHx8IGljb25zQnlUeXBlKHR5cGUpO1xuICAgICAgaWYgKEljb24pIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIEljb25Db21wb25lbnQoKSB7XG4gICAgICAgICAgcmV0dXJuIGpzeChJY29uLCB7XG4gICAgICAgICAgICB3aWR0aDogXCIzNlwiLFxuICAgICAgICAgICAgaGVpZ2h0OiBcIjM2XCIsXG4gICAgICAgICAgICB2aWV3Qm94OiBcIjAgMCA1NCA1NFwiXG4gICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICB9IGVsc2UgaWYgKGZpZWxkRGVmaW5pdGlvbi5pY29uVXJsKSB7XG4gICAgICAgIHJldHVybiBnZXRQYWxldHRlSWNvbih7XG4gICAgICAgICAgaWNvblVybDogZmllbGREZWZpbml0aW9uLmljb25VcmwsXG4gICAgICAgICAgbGFiZWw6IGZpZWxkRGVmaW5pdGlvbi5sYWJlbFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGdldFR5cGVMYWJlbDogZmllbGQgPT4ge1xuICAgICAgY29uc3Qge1xuICAgICAgICB0eXBlXG4gICAgICB9ID0gZmllbGQ7XG4gICAgICBpZiAodHlwZSA9PT0gJ2RlZmF1bHQnKSB7XG4gICAgICAgIHJldHVybiAnRm9ybSc7XG4gICAgICB9XG4gICAgICBjb25zdCBmaWVsZERlZmluaXRpb24gPSBmb3JtRmllbGRzLmdldCh0eXBlKS5jb25maWc7XG4gICAgICByZXR1cm4gZmllbGREZWZpbml0aW9uLm5hbWUgfHwgZmllbGREZWZpbml0aW9uLmxhYmVsIHx8IHR5cGU7XG4gICAgfSxcbiAgICBnZXREb2N1bWVudGF0aW9uUmVmXG4gIH07XG59XG5cbi8qKlxuICogUHJvdmlkZSBwbGFjZWhvbGRlcnMgZm9yIGVtcHR5IGFuZCBtdWx0aXBsZSBzdGF0ZS5cbiAqL1xuY29uc3QgUHJvcGVydGllc1BhbmVsUGxhY2Vob2xkZXJQcm92aWRlciA9IHtcbiAgZ2V0RW1wdHk6ICgpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgdGV4dDogJ1NlbGVjdCBhIGZvcm0gZmllbGQgdG8gZWRpdCBpdHMgcHJvcGVydGllcy4nXG4gICAgfTtcbiAgfSxcbiAgZ2V0TXVsdGlwbGU6ICgpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgdGV4dDogJ011bHRpcGxlIGZvcm0gZmllbGRzIGFyZSBzZWxlY3RlZC4gU2VsZWN0IGEgc2luZ2xlIGZvcm0gZmllbGQgdG8gZWRpdCBpdHMgcHJvcGVydGllcy4nXG4gICAgfTtcbiAgfVxufTtcblxuY29uc3QgRU1QVFkgPSB7fTtcbmZ1bmN0aW9uIFByb3BlcnRpZXNQYW5lbChwcm9wcykge1xuICBjb25zdCB7XG4gICAgZXZlbnRCdXMsXG4gICAgZ2V0UHJvdmlkZXJzLFxuICAgIGluamVjdG9yXG4gIH0gPSBwcm9wcztcbiAgY29uc3QgZm9ybUVkaXRvciA9IGluamVjdG9yLmdldCgnZm9ybUVkaXRvcicpO1xuICBjb25zdCBtb2RlbGluZyA9IGluamVjdG9yLmdldCgnbW9kZWxpbmcnKTtcbiAgY29uc3Qgc2VsZWN0aW9uTW9kdWxlID0gaW5qZWN0b3IuZ2V0KCdzZWxlY3Rpb24nKTtcbiAgY29uc3QgcHJvcGVydGllc1BhbmVsQ29uZmlnID0gaW5qZWN0b3IuZ2V0KCdjb25maWcucHJvcGVydGllc1BhbmVsJykgfHwgRU1QVFk7XG4gIGNvbnN0IHtcbiAgICBmZWVsUG9wdXBDb250YWluZXJcbiAgfSA9IHByb3BlcnRpZXNQYW5lbENvbmZpZztcbiAgY29uc3QgW3N0YXRlLCBzZXRTdGF0ZV0gPSB1c2VTdGF0ZSh7XG4gICAgc2VsZWN0ZWRGb3JtRmllbGQ6IHNlbGVjdGlvbk1vZHVsZS5nZXQoKSB8fCBmb3JtRWRpdG9yLl9nZXRTdGF0ZSgpLnNjaGVtYVxuICB9KTtcbiAgY29uc3Qgc2VsZWN0ZWRGb3JtRmllbGQgPSBzdGF0ZS5zZWxlY3RlZEZvcm1GaWVsZDtcbiAgY29uc3QgcmVmcmVzaCA9IHVzZUNhbGxiYWNrKGZpZWxkID0+IHtcbiAgICAvLyBUT0RPKHNrYWlpcik6IHJld29yayBzdGF0ZSBtYW5hZ2VtZW50LCByZS1yZW5kZXJpbmcgdGhlIHdob2xlIHByb3BlcnRpZXMgcGFuZWwgaXMgbm90IHRoZSB3YXkgdG8gZ29cbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vYnBtbi1pby9mb3JtLWpzL2lzc3Vlcy82ODZcbiAgICBzZXRTdGF0ZSh7XG4gICAgICBzZWxlY3RlZEZvcm1GaWVsZDogc2VsZWN0aW9uTW9kdWxlLmdldCgpIHx8IGZvcm1FZGl0b3IuX2dldFN0YXRlKCkuc2NoZW1hXG4gICAgfSk7XG5cbiAgICAvLyBub3RpZnkgaW50ZXJlc3RlZCBwYXJ0aWVzIG9uIHByb3BlcnR5IHBhbmVsIHVwZGF0ZXNcbiAgICBldmVudEJ1cy5maXJlKCdwcm9wZXJ0aWVzUGFuZWwudXBkYXRlZCcsIHtcbiAgICAgIGZvcm1GaWVsZDogZmllbGRcbiAgICB9KTtcbiAgfSwgW2V2ZW50QnVzLCBmb3JtRWRpdG9yLCBzZWxlY3Rpb25Nb2R1bGVdKTtcbiAgdXNlTGF5b3V0RWZmZWN0KCgpID0+IHtcbiAgICAvKipcbiAgICAgKiBUT0RPKHBpbnVzc2lsdmVzdHJ1cyk6IHVwZGF0ZSB3aXRoIGFjdHVhbCB1cGRhdGVkIGVsZW1lbnQsXG4gICAgICogb25jZSB3ZSBoYXZlIGEgcHJvcGVyIHVwZGF0ZXIvY2hhbmdlIHN1cHBvcnRcbiAgICAgKi9cbiAgICBldmVudEJ1cy5vbignY2hhbmdlZCcsIHJlZnJlc2gpO1xuICAgIGV2ZW50QnVzLm9uKCdpbXBvcnQuZG9uZScsIHJlZnJlc2gpO1xuICAgIGV2ZW50QnVzLm9uKCdzZWxlY3Rpb24uY2hhbmdlZCcsIHJlZnJlc2gpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBldmVudEJ1cy5vZmYoJ2NoYW5nZWQnLCByZWZyZXNoKTtcbiAgICAgIGV2ZW50QnVzLm9mZignaW1wb3J0LmRvbmUnLCByZWZyZXNoKTtcbiAgICAgIGV2ZW50QnVzLm9mZignc2VsZWN0aW9uLmNoYW5nZWQnLCByZWZyZXNoKTtcbiAgICB9O1xuICB9LCBbZXZlbnRCdXMsIHJlZnJlc2hdKTtcbiAgY29uc3QgZ2V0U2VydmljZSA9ICh0eXBlLCBzdHJpY3QgPSB0cnVlKSA9PiBpbmplY3Rvci5nZXQodHlwZSwgc3RyaWN0KTtcbiAgY29uc3QgcHJvcGVydGllc1BhbmVsQ29udGV4dCA9IHtcbiAgICBnZXRTZXJ2aWNlXG4gIH07XG4gIGNvbnN0IG9uRm9jdXMgPSAoKSA9PiBldmVudEJ1cy5maXJlKCdwcm9wZXJ0aWVzUGFuZWwuZm9jdXNpbicpO1xuICBjb25zdCBvbkJsdXIgPSAoKSA9PiBldmVudEJ1cy5maXJlKCdwcm9wZXJ0aWVzUGFuZWwuZm9jdXNvdXQnKTtcbiAgY29uc3QgZWRpdEZpZWxkID0gdXNlQ2FsbGJhY2soKGZvcm1GaWVsZCwga2V5LCB2YWx1ZSkgPT4gbW9kZWxpbmcuZWRpdEZvcm1GaWVsZChmb3JtRmllbGQsIGtleSwgdmFsdWUpLCBbbW9kZWxpbmddKTtcblxuICAvLyByZXRyaWV2ZSBncm91cHMgZm9yIHNlbGVjdGVkIGZvcm0gZmllbGRcbiAgY29uc3QgcHJvdmlkZXJzID0gZ2V0UHJvdmlkZXJzKHNlbGVjdGVkRm9ybUZpZWxkKTtcbiAgY29uc3QgZ3JvdXBzID0gdXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIHJlZHVjZShwcm92aWRlcnMsIGZ1bmN0aW9uIChncm91cHMsIHByb3ZpZGVyKSB7XG4gICAgICAvLyBkbyBub3QgY29sbGVjdCBncm91cHMgZm9yIG11bHRpIGVsZW1lbnQgc3RhdGVcbiAgICAgIGlmIChpc0FycmF5KHNlbGVjdGVkRm9ybUZpZWxkKSkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgICBjb25zdCB1cGRhdGVyID0gcHJvdmlkZXIuZ2V0R3JvdXBzKHNlbGVjdGVkRm9ybUZpZWxkLCBlZGl0RmllbGQpO1xuICAgICAgcmV0dXJuIHVwZGF0ZXIoZ3JvdXBzKTtcbiAgICB9LCBbXSk7XG4gIH0sIFtwcm92aWRlcnMsIHNlbGVjdGVkRm9ybUZpZWxkLCBlZGl0RmllbGRdKTtcbiAgY29uc3QgZm9ybUZpZWxkcyA9IGdldFNlcnZpY2UoJ2Zvcm1GaWVsZHMnKTtcbiAgY29uc3QgUHJvcGVydGllc1BhbmVsSGVhZGVyUHJvdmlkZXIgPSB1c2VNZW1vKCgpID0+IGdldFByb3BlcnRpZXNQYW5lbEhlYWRlclByb3ZpZGVyKHtcbiAgICBnZXREb2N1bWVudGF0aW9uUmVmOiBwcm9wZXJ0aWVzUGFuZWxDb25maWcuZ2V0RG9jdW1lbnRhdGlvblJlZixcbiAgICBmb3JtRmllbGRzXG4gIH0pLCBbZm9ybUZpZWxkcywgcHJvcGVydGllc1BhbmVsQ29uZmlnXSk7XG4gIHJldHVybiBqc3goXCJkaXZcIiwge1xuICAgIGNsYXNzOiBcImZqcy1wcm9wZXJ0aWVzLXBhbmVsXCIsXG4gICAgXCJkYXRhLWZpZWxkXCI6IHNlbGVjdGVkRm9ybUZpZWxkICYmIHNlbGVjdGVkRm9ybUZpZWxkLmlkLFxuICAgIG9uRm9jdXNDYXB0dXJlOiBvbkZvY3VzLFxuICAgIG9uQmx1ckNhcHR1cmU6IG9uQmx1cixcbiAgICBjaGlsZHJlbjoganN4KEZvcm1Qcm9wZXJ0aWVzUGFuZWxDb250ZXh0LlByb3ZpZGVyLCB7XG4gICAgICB2YWx1ZTogcHJvcGVydGllc1BhbmVsQ29udGV4dCxcbiAgICAgIGNoaWxkcmVuOiBqc3goUHJvcGVydGllc1BhbmVsJDEsIHtcbiAgICAgICAgZWxlbWVudDogc2VsZWN0ZWRGb3JtRmllbGQsXG4gICAgICAgIGV2ZW50QnVzOiBldmVudEJ1cyxcbiAgICAgICAgZ3JvdXBzOiBncm91cHMsXG4gICAgICAgIGhlYWRlclByb3ZpZGVyOiBQcm9wZXJ0aWVzUGFuZWxIZWFkZXJQcm92aWRlcixcbiAgICAgICAgcGxhY2Vob2xkZXJQcm92aWRlcjogUHJvcGVydGllc1BhbmVsUGxhY2Vob2xkZXJQcm92aWRlcixcbiAgICAgICAgZmVlbFBvcHVwQ29udGFpbmVyOiBmZWVsUG9wdXBDb250YWluZXJcbiAgICAgIH0pXG4gICAgfSlcbiAgfSk7XG59XG5cbmNvbnN0IERFRkFVTFRfUFJJT1JJVFkgPSAxMDAwO1xuXG4vKipcbiAqIEB0eXBlZGVmIHsgeyBwYXJlbnQ6IEVsZW1lbnQgfSB9IFByb3BlcnRpZXNQYW5lbENvbmZpZ1xuICogQHR5cGVkZWYgeyBpbXBvcnQoJy4uLy4uL2NvcmUvRXZlbnRCdXMnKS5FdmVudEJ1cyB9IEV2ZW50QnVzXG4gKiBAdHlwZWRlZiB7IGltcG9ydCgnLi4vLi4vdHlwZXMnKS5JbmplY3RvciB9IEluamVjdG9yXG4gKiBAdHlwZWRlZiB7IHsgZ2V0R3JvdXBzOiAoeyBmb3JtRmllbGQsIGVkaXRGb3JtRmllbGQgfSkgPT4gKHsgZ3JvdXBzfSkgPT4gQXJyYXkgfSB9IFByb3BlcnRpZXNQcm92aWRlclxuICovXG5cbi8qKlxuICogQHBhcmFtIHtQcm9wZXJ0aWVzUGFuZWxDb25maWd9IHByb3BlcnRpZXNQYW5lbENvbmZpZ1xuICogQHBhcmFtIHtJbmplY3Rvcn0gaW5qZWN0b3JcbiAqIEBwYXJhbSB7RXZlbnRCdXN9IGV2ZW50QnVzXG4gKi9cbmNsYXNzIFByb3BlcnRpZXNQYW5lbFJlbmRlcmVyIHtcbiAgY29uc3RydWN0b3IocHJvcGVydGllc1BhbmVsQ29uZmlnLCBpbmplY3RvciwgZXZlbnRCdXMpIHtcbiAgICBjb25zdCB7XG4gICAgICBwYXJlbnRcbiAgICB9ID0gcHJvcGVydGllc1BhbmVsQ29uZmlnIHx8IHt9O1xuICAgIHRoaXMuX2V2ZW50QnVzID0gZXZlbnRCdXM7XG4gICAgdGhpcy5faW5qZWN0b3IgPSBpbmplY3RvcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb21pZnkoJzxkaXYgY2xhc3M9XCJmanMtcHJvcGVydGllcy1jb250YWluZXJcIiBpbnB1dC1oYW5kbGUtbW9kaWZpZWQta2V5cz1cInkselwiPjwvZGl2PicpO1xuICAgIGlmIChwYXJlbnQpIHtcbiAgICAgIHRoaXMuYXR0YWNoVG8ocGFyZW50KTtcbiAgICB9XG4gICAgdGhpcy5fZXZlbnRCdXMub25jZSgnZm9ybUVkaXRvci5yZW5kZXJlZCcsIDUwMCwgKCkgPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyKCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQXR0YWNoIHRoZSBwcm9wZXJ0aWVzIHBhbmVsIHRvIGEgcGFyZW50IG5vZGUuXG4gICAqXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNvbnRhaW5lclxuICAgKi9cbiAgYXR0YWNoVG8oY29udGFpbmVyKSB7XG4gICAgaWYgKCFjb250YWluZXIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignY29udGFpbmVyIHJlcXVpcmVkJyk7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgY29udGFpbmVyID09PSAnc3RyaW5nJykge1xuICAgICAgY29udGFpbmVyID0gcXVlcnkoY29udGFpbmVyKTtcbiAgICB9XG5cbiAgICAvLyAoMSkgZGV0YWNoIGZyb20gb2xkIHBhcmVudFxuICAgIHRoaXMuZGV0YWNoKCk7XG5cbiAgICAvLyAoMikgYXBwZW5kIHRvIHBhcmVudCBjb250YWluZXJcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5fY29udGFpbmVyKTtcblxuICAgIC8vICgzKSBub3RpZnkgaW50ZXJlc3RlZCBwYXJ0aWVzXG4gICAgdGhpcy5fZXZlbnRCdXMuZmlyZSgncHJvcGVydGllc1BhbmVsLmF0dGFjaCcpO1xuICB9XG5cbiAgLyoqXG4gICAqIERldGFjaCB0aGUgcHJvcGVydGllcyBwYW5lbCBmcm9tIGl0cyBwYXJlbnQgbm9kZS5cbiAgICovXG4gIGRldGFjaCgpIHtcbiAgICBjb25zdCBwYXJlbnROb2RlID0gdGhpcy5fY29udGFpbmVyLnBhcmVudE5vZGU7XG4gICAgaWYgKHBhcmVudE5vZGUpIHtcbiAgICAgIHBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5fY29udGFpbmVyKTtcbiAgICAgIHRoaXMuX2V2ZW50QnVzLmZpcmUoJ3Byb3BlcnRpZXNQYW5lbC5kZXRhY2gnKTtcbiAgICB9XG4gIH1cbiAgX3JlbmRlcigpIHtcbiAgICByZW5kZXIoanN4KFByb3BlcnRpZXNQYW5lbCwge1xuICAgICAgZ2V0UHJvdmlkZXJzOiB0aGlzLl9nZXRQcm92aWRlcnMuYmluZCh0aGlzKSxcbiAgICAgIGV2ZW50QnVzOiB0aGlzLl9ldmVudEJ1cyxcbiAgICAgIGluamVjdG9yOiB0aGlzLl9pbmplY3RvclxuICAgIH0pLCB0aGlzLl9jb250YWluZXIpO1xuICAgIHRoaXMuX2V2ZW50QnVzLmZpcmUoJ3Byb3BlcnRpZXNQYW5lbC5yZW5kZXJlZCcpO1xuICB9XG4gIF9kZXN0cm95KCkge1xuICAgIGlmICh0aGlzLl9jb250YWluZXIpIHtcbiAgICAgIHJlbmRlcihudWxsLCB0aGlzLl9jb250YWluZXIpO1xuICAgICAgdGhpcy5fZXZlbnRCdXMuZmlyZSgncHJvcGVydGllc1BhbmVsLmRlc3Ryb3llZCcpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlciBhIG5ldyBwcm9wZXJ0aWVzIHByb3ZpZGVyIHRvIHRoZSBwcm9wZXJ0aWVzIHBhbmVsLlxuICAgKlxuICAgKiBAcGFyYW0ge1Byb3BlcnRpZXNQcm92aWRlcn0gcHJvdmlkZXJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IFtwcmlvcml0eV1cbiAgICovXG4gIHJlZ2lzdGVyUHJvdmlkZXIocHJvdmlkZXIsIHByaW9yaXR5KSB7XG4gICAgaWYgKCFwcmlvcml0eSkge1xuICAgICAgcHJpb3JpdHkgPSBERUZBVUxUX1BSSU9SSVRZO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHByb3ZpZGVyLmdldEdyb3VwcyAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgY29uc29sZS5lcnJvcignUHJvcGVydGllcyBwcm92aWRlciBkb2VzIG5vdCBpbXBsZW1lbnQgI2dldEdyb3VwcyhlbGVtZW50KSBBUEknKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fZXZlbnRCdXMub24oJ3Byb3BlcnRpZXNQYW5lbC5nZXRQcm92aWRlcnMnLCBwcmlvcml0eSwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBldmVudC5wcm92aWRlcnMucHVzaChwcm92aWRlcik7XG4gICAgfSk7XG4gICAgdGhpcy5fZXZlbnRCdXMuZmlyZSgncHJvcGVydGllc1BhbmVsLnByb3ZpZGVyc0NoYW5nZWQnKTtcbiAgfVxuICBfZ2V0UHJvdmlkZXJzKCkge1xuICAgIGNvbnN0IGV2ZW50ID0gdGhpcy5fZXZlbnRCdXMuY3JlYXRlRXZlbnQoe1xuICAgICAgdHlwZTogJ3Byb3BlcnRpZXNQYW5lbC5nZXRQcm92aWRlcnMnLFxuICAgICAgcHJvdmlkZXJzOiBbXVxuICAgIH0pO1xuICAgIHRoaXMuX2V2ZW50QnVzLmZpcmUoZXZlbnQpO1xuICAgIHJldHVybiBldmVudC5wcm92aWRlcnM7XG4gIH1cbn1cblByb3BlcnRpZXNQYW5lbFJlbmRlcmVyLiRpbmplY3QgPSBbJ2NvbmZpZy5wcm9wZXJ0aWVzUGFuZWwnLCAnaW5qZWN0b3InLCAnZXZlbnRCdXMnXTtcblxuZnVuY3Rpb24gQWN0aW9uRW50cnkocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGVkaXRGaWVsZCxcbiAgICBmaWVsZFxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IGVudHJpZXMgPSBbXTtcbiAgZW50cmllcy5wdXNoKHtcbiAgICBpZDogJ2FjdGlvbicsXG4gICAgY29tcG9uZW50OiBBY3Rpb24sXG4gICAgZWRpdEZpZWxkOiBlZGl0RmllbGQsXG4gICAgZmllbGQ6IGZpZWxkLFxuICAgIGlzRWRpdGVkOiBpc0VkaXRlZCQzLFxuICAgIGlzRGVmYXVsdFZpc2libGU6IGZpZWxkID0+IGZpZWxkLnR5cGUgPT09ICdidXR0b24nXG4gIH0pO1xuICByZXR1cm4gZW50cmllcztcbn1cbmZ1bmN0aW9uIEFjdGlvbihwcm9wcykge1xuICBjb25zdCB7XG4gICAgZWRpdEZpZWxkLFxuICAgIGZpZWxkLFxuICAgIGlkXG4gIH0gPSBwcm9wcztcbiAgY29uc3QgcGF0aCA9IFsnYWN0aW9uJ107XG4gIGNvbnN0IGdldFZhbHVlID0gKCkgPT4ge1xuICAgIHJldHVybiBnZXQoZmllbGQsIHBhdGgsICcnKTtcbiAgfTtcbiAgY29uc3Qgc2V0VmFsdWUgPSB2YWx1ZSA9PiB7XG4gICAgcmV0dXJuIGVkaXRGaWVsZChmaWVsZCwgcGF0aCwgdmFsdWUpO1xuICB9O1xuICBjb25zdCBnZXRPcHRpb25zID0gKCkgPT4gW3tcbiAgICBsYWJlbDogJ1N1Ym1pdCcsXG4gICAgdmFsdWU6ICdzdWJtaXQnXG4gIH0sIHtcbiAgICBsYWJlbDogJ1Jlc2V0JyxcbiAgICB2YWx1ZTogJ3Jlc2V0J1xuICB9XTtcbiAgcmV0dXJuIFNlbGVjdEVudHJ5KHtcbiAgICBlbGVtZW50OiBmaWVsZCxcbiAgICBnZXRPcHRpb25zLFxuICAgIGdldFZhbHVlLFxuICAgIGlkLFxuICAgIGxhYmVsOiAnQWN0aW9uJyxcbiAgICBzZXRWYWx1ZVxuICB9KTtcbn1cblxuZnVuY3Rpb24gdXNlU2VydmljZSh0eXBlLCBzdHJpY3QpIHtcbiAgY29uc3Qge1xuICAgIGdldFNlcnZpY2VcbiAgfSA9IHVzZUNvbnRleHQoRm9ybVByb3BlcnRpZXNQYW5lbENvbnRleHQpO1xuICByZXR1cm4gZ2V0U2VydmljZSh0eXBlLCBzdHJpY3QpO1xufVxuXG4vKipcbiAqIFJldHJpZXZlIGxpc3Qgb2YgdmFyaWFibGVzIGZyb20gdGhlIGZvcm0gc2NoZW1hLlxuICpcbiAqIEByZXR1cm5zIHsgc3RyaW5nW10gfSBsaXN0IG9mIHZhcmlhYmxlcyB1c2VkIGluIGZvcm0gc2NoZW1hXG4gKi9cbmZ1bmN0aW9uIHVzZVZhcmlhYmxlcygpIHtcbiAgY29uc3QgZm9ybSA9IHVzZVNlcnZpY2UoJ2Zvcm1FZGl0b3InKTtcbiAgY29uc3Qgc2NoZW1hID0gZm9ybS5nZXRTY2hlbWEoKTtcbiAgcmV0dXJuIGdldFNjaGVtYVZhcmlhYmxlcyhzY2hlbWEpO1xufVxuXG5mdW5jdGlvbiBBbHRUZXh0RW50cnkocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGVkaXRGaWVsZCxcbiAgICBmaWVsZFxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IGVudHJpZXMgPSBbXTtcbiAgZW50cmllcy5wdXNoKHtcbiAgICBpZDogJ2FsdCcsXG4gICAgY29tcG9uZW50OiBBbHRUZXh0LFxuICAgIGVkaXRGaWVsZDogZWRpdEZpZWxkLFxuICAgIGZpZWxkOiBmaWVsZCxcbiAgICBpc0VkaXRlZDogaXNFZGl0ZWQkNSxcbiAgICBpc0RlZmF1bHRWaXNpYmxlOiBmaWVsZCA9PiBbJ2ltYWdlJ10uaW5jbHVkZXMoZmllbGQudHlwZSlcbiAgfSk7XG4gIHJldHVybiBlbnRyaWVzO1xufVxuZnVuY3Rpb24gQWx0VGV4dChwcm9wcykge1xuICBjb25zdCB7XG4gICAgZWRpdEZpZWxkLFxuICAgIGZpZWxkLFxuICAgIGlkXG4gIH0gPSBwcm9wcztcbiAgY29uc3QgZGVib3VuY2UgPSB1c2VTZXJ2aWNlKCdkZWJvdW5jZScpO1xuICBjb25zdCB2YXJpYWJsZXMgPSB1c2VWYXJpYWJsZXMoKS5tYXAobmFtZSA9PiAoe1xuICAgIG5hbWVcbiAgfSkpO1xuICBjb25zdCBwYXRoID0gWydhbHQnXTtcbiAgY29uc3QgZ2V0VmFsdWUgPSAoKSA9PiB7XG4gICAgcmV0dXJuIGdldChmaWVsZCwgcGF0aCwgJycpO1xuICB9O1xuICBjb25zdCBzZXRWYWx1ZSA9IHZhbHVlID0+IHtcbiAgICByZXR1cm4gZWRpdEZpZWxkKGZpZWxkLCBwYXRoLCB2YWx1ZSk7XG4gIH07XG4gIHJldHVybiBGZWVsVGVtcGxhdGluZ0VudHJ5KHtcbiAgICBkZWJvdW5jZSxcbiAgICBlbGVtZW50OiBmaWVsZCxcbiAgICBmZWVsOiAnb3B0aW9uYWwnLFxuICAgIGdldFZhbHVlLFxuICAgIGlkLFxuICAgIGxhYmVsOiAnQWx0ZXJuYXRpdmUgdGV4dCcsXG4gICAgdG9vbHRpcDogJ0Rlc2NyaXB0aXZlIHRleHQgZm9yIHNjcmVlbiByZWFkZXIgYWNjZXNzaWJpbGl0eS4nLFxuICAgIHNldFZhbHVlLFxuICAgIHNpbmdsZUxpbmU6IHRydWUsXG4gICAgdmFyaWFibGVzXG4gIH0pO1xufVxuXG5jb25zdCBBVVRPX09QVElPTl9WQUxVRSA9ICcnO1xuZnVuY3Rpb24gQ29sdW1uc0VudHJ5KHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBlZGl0RmllbGQsXG4gICAgZmllbGRcbiAgfSA9IHByb3BzO1xuICBjb25zdCBlbnRyaWVzID0gW3tcbiAgICBpZDogJ2NvbHVtbnMnLFxuICAgIGNvbXBvbmVudDogQ29sdW1ucyxcbiAgICBmaWVsZCxcbiAgICBlZGl0RmllbGQsXG4gICAgaXNFZGl0ZWQ6IGlzRWRpdGVkJDNcbiAgfV07XG4gIHJldHVybiBlbnRyaWVzO1xufVxuZnVuY3Rpb24gQ29sdW1ucyhwcm9wcykge1xuICBjb25zdCB7XG4gICAgZmllbGQsXG4gICAgZWRpdEZpZWxkLFxuICAgIGlkXG4gIH0gPSBwcm9wcztcbiAgdXNlU2VydmljZSgnZGVib3VuY2UnKTtcbiAgY29uc3QgZm9ybUxheW91dFZhbGlkYXRvciA9IHVzZVNlcnZpY2UoJ2Zvcm1MYXlvdXRWYWxpZGF0b3InKTtcbiAgY29uc3QgdmFsaWRhdGUgPSB1c2VDYWxsYmFjayh2YWx1ZSA9PiB7XG4gICAgcmV0dXJuIGZvcm1MYXlvdXRWYWxpZGF0b3IudmFsaWRhdGVGaWVsZChmaWVsZCwgdmFsdWUgPyBwYXJzZUludCh2YWx1ZSkgOiBudWxsKTtcbiAgfSwgW2ZpZWxkLCBmb3JtTGF5b3V0VmFsaWRhdG9yXSk7XG4gIGNvbnN0IHNldFZhbHVlID0gKHZhbHVlLCBlcnJvcikgPT4ge1xuICAgIGlmIChlcnJvcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBsYXlvdXQgPSBnZXQoZmllbGQsIFsnbGF5b3V0J10sIHt9KTtcbiAgICBjb25zdCBuZXdWYWx1ZSA9IHZhbHVlID8gcGFyc2VJbnQodmFsdWUpIDogbnVsbDtcbiAgICBlZGl0RmllbGQoZmllbGQsIFsnbGF5b3V0J10sIHNldCQxKGxheW91dCwgWydjb2x1bW5zJ10sIG5ld1ZhbHVlKSk7XG4gIH07XG4gIGNvbnN0IGdldFZhbHVlID0gKCkgPT4ge1xuICAgIHJldHVybiBnZXQoZmllbGQsIFsnbGF5b3V0JywgJ2NvbHVtbnMnXSk7XG4gIH07XG4gIGNvbnN0IGdldE9wdGlvbnMgPSAoKSA9PiB7XG4gICAgcmV0dXJuIFt7XG4gICAgICBsYWJlbDogJ0F1dG8nLFxuICAgICAgdmFsdWU6IEFVVE9fT1BUSU9OX1ZBTFVFXG4gICAgfSxcbiAgICAvLyB0b2RvKHBpbnVzc2lsdmVzdHJ1cyk6IG1ha2Ugb3B0aW9ucyBkZXBlbmRhbnQgb24gZmllbGQgdHlwZVxuICAgIC8vIGNmLiBodHRwczovL2dpdGh1Yi5jb20vYnBtbi1pby9mb3JtLWpzL2lzc3Vlcy81NzVcbiAgICAuLi5hc0FycmF5KDE2KS5maWx0ZXIoaSA9PiBpID49IE1JTl9DT0xVTU5TKS5tYXAoYXNPcHRpb24pXTtcbiAgfTtcbiAgcmV0dXJuIFNlbGVjdEVudHJ5KHtcbiAgICBlbGVtZW50OiBmaWVsZCxcbiAgICBpZCxcbiAgICBsYWJlbDogJ0NvbHVtbnMnLFxuICAgIGdldE9wdGlvbnMsXG4gICAgZ2V0VmFsdWUsXG4gICAgc2V0VmFsdWUsXG4gICAgdmFsaWRhdGVcbiAgfSk7XG59XG5cbi8vIGhlbHBlciAvLy8vLy8vLy9cblxuZnVuY3Rpb24gYXNPcHRpb24obnVtYmVyKSB7XG4gIHJldHVybiB7XG4gICAgdmFsdWU6IG51bWJlcixcbiAgICBsYWJlbDogbnVtYmVyLnRvU3RyaW5nKClcbiAgfTtcbn1cbmZ1bmN0aW9uIGFzQXJyYXkobGVuZ3RoKSB7XG4gIHJldHVybiBBcnJheS5mcm9tKHtcbiAgICBsZW5ndGhcbiAgfSkubWFwKChfLCBpKSA9PiBpICsgMSk7XG59XG5cbmZ1bmN0aW9uIGFycmF5QWRkKGFycmF5LCBpbmRleCwgaXRlbSkge1xuICBjb25zdCBjb3B5ID0gWy4uLmFycmF5XTtcbiAgY29weS5zcGxpY2UoaW5kZXgsIDAsIGl0ZW0pO1xuICByZXR1cm4gY29weTtcbn1cbmZ1bmN0aW9uIGNvdW50RGVjaW1hbHMobnVtYmVyKSB7XG4gIGNvbnN0IG51bSA9IEJpZyhudW1iZXIpO1xuICBpZiAobnVtLnRvU3RyaW5nKCkgPT09IG51bS50b0ZpeGVkKDApKSByZXR1cm4gMDtcbiAgcmV0dXJuIG51bS50b0ZpeGVkKCkuc3BsaXQoJy4nKVsxXS5sZW5ndGggfHwgMDtcbn1cblxuLyoqXG4gKlxuICogQHBhcmFtIHt1bmtub3dufSB2YWx1ZVxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzVmFsaWROdW1iZXIodmFsdWUpIHtcbiAgcmV0dXJuICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInIHx8IHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpICYmIHZhbHVlICE9PSAnJyAmJiAhaXNOYU4oTnVtYmVyKHZhbHVlKSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHBhdGhcbiAqL1xuZnVuY3Rpb24gaXNWYWxpZERvdFBhdGgocGF0aCkge1xuICByZXR1cm4gL15cXHcrKFxcLlxcdyspKiQvLnRlc3QocGF0aCk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHBhdGhcbiAqL1xuZnVuY3Rpb24gaXNQcm9oaWJpdGVkUGF0aChwYXRoKSB7XG4gIGNvbnN0IHByb2hpYml0ZWRTZWdtZW50cyA9IFsnX19wcm90b19fJywgJ3Byb3RvdHlwZScsICdjb25zdHJ1Y3RvciddO1xuICByZXR1cm4gcGF0aC5zcGxpdCgnLicpLnNvbWUoc2VnbWVudCA9PiBwcm9oaWJpdGVkU2VnbWVudHMuaW5jbHVkZXMoc2VnbWVudCkpO1xufVxuY29uc3QgTEFCRUxFRF9OT05fSU5QVVRTID0gWydidXR0b24nLCAnZ3JvdXAnLCAnZHluYW1pY2xpc3QnLCAnaWZyYW1lJywgJ3RhYmxlJywgJ2RvY3VtZW50UHJldmlldyddO1xuY29uc3QgSU5QVVRTID0gWydjaGVja2JveCcsICdjaGVja2xpc3QnLCAnZGF0ZXRpbWUnLCAnbnVtYmVyJywgJ3JhZGlvJywgJ3NlbGVjdCcsICd0YWdsaXN0JywgJ3RleHRmaWVsZCcsICd0ZXh0YXJlYScsICdmaWxlcGlja2VyJ107XG5jb25zdCBPUFRJT05TX0lOUFVUUyA9IFsnY2hlY2tsaXN0JywgJ3JhZGlvJywgJ3NlbGVjdCcsICd0YWdsaXN0J107XG5mdW5jdGlvbiBoYXNFbnRyeUNvbmZpZ3VyZWQoZm9ybUZpZWxkRGVmaW5pdGlvbiwgZW50cnlJZCkge1xuICBjb25zdCB7XG4gICAgcHJvcGVydGllc1BhbmVsRW50cmllcyA9IFtdXG4gIH0gPSBmb3JtRmllbGREZWZpbml0aW9uO1xuICBpZiAoIXByb3BlcnRpZXNQYW5lbEVudHJpZXMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiBwcm9wZXJ0aWVzUGFuZWxFbnRyaWVzLnNvbWUoaWQgPT4gaWQgPT09IGVudHJ5SWQpO1xufVxuZnVuY3Rpb24gaGFzT3B0aW9uc0dyb3Vwc0NvbmZpZ3VyZWQoZm9ybUZpZWxkRGVmaW5pdGlvbikge1xuICBjb25zdCB7XG4gICAgcHJvcGVydGllc1BhbmVsRW50cmllcyA9IFtdXG4gIH0gPSBmb3JtRmllbGREZWZpbml0aW9uO1xuICBpZiAoIXByb3BlcnRpZXNQYW5lbEVudHJpZXMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiBwcm9wZXJ0aWVzUGFuZWxFbnRyaWVzLnNvbWUoaWQgPT4gaWQgPT09ICd2YWx1ZXMnKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gcGF0aFxuICovXG5mdW5jdGlvbiBoYXNJbnRlZ2VyUGF0aFNlZ21lbnQocGF0aCkge1xuICByZXR1cm4gcGF0aC5zcGxpdCgnLicpLnNvbWUoc2VnbWVudCA9PiAvXlxcZCskLy50ZXN0KHNlZ21lbnQpKTtcbn1cblxuLyoqXG4gKiBGYWN0b3J5IGZvciBpc0VkaXRlZCBmdW5jdGlvbnMgdGhhdCBjaGVjayBhZ2FpbnN0IGEgZGVmYXVsdC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gZGVmYXVsdFZhbHVlIFRoZSBkZWZhdWx0IHZhbHVlIHRvIGNoZWNrIGFnYWluc3QuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtpbmNsdWRlRW1wdHlBc0RlZmF1bHQ9dHJ1ZV0gSWYgdHJ1ZSwgYW4gZW1wdHkgdmFsdWUgKGUuZy4sICcnKSBpcyBhbHNvIGNvbnNpZGVyZWQgYSBkZWZhdWx0IHN0YXRlLlxuICogQHJldHVybiB7KG5vZGU6IEhUTUxFbGVtZW50KSA9PiBib29sZWFufSBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0cnVlIGlmIHRoZSBub2RlJ3MgdmFsdWUgaXMgZWRpdGVkLlxuICovXG5mdW5jdGlvbiBpc0VkaXRlZEZyb21EZWZhdWx0RmFjdG9yeShkZWZhdWx0VmFsdWUsIGluY2x1ZGVFbXB0eUFzRGVmYXVsdCA9IHRydWUpIHtcbiAgcmV0dXJuIG5vZGUgPT4ge1xuICAgIGlmICghbm9kZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtIVE1MRWxlbWVudHxudWxsfVxuICAgICAqL1xuICAgIGNvbnN0IGNvZGVNaXJyb3JDb250ZW50ID0gbm9kZS5xdWVyeVNlbGVjdG9yKCcuY20tY29udGVudCcpO1xuICAgIGNvbnN0IGlzQ29kZU1pcnJvckVkaXRvciA9ICEhY29kZU1pcnJvckNvbnRlbnQ7XG4gICAgY29uc3QgdmFsdWUgPSBpc0NvZGVNaXJyb3JFZGl0b3IgPyBjb2RlTWlycm9yQ29udGVudC5pbm5lclRleHQgOiAvKiogQHR5cGUge0hUTUxJbnB1dEVsZW1lbnR9ICovbm9kZS52YWx1ZTtcbiAgICBpZiAoaW5jbHVkZUVtcHR5QXNEZWZhdWx0ICYmICF2YWx1ZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWUgIT09IGRlZmF1bHRWYWx1ZTtcbiAgfTtcbn1cbmZ1bmN0aW9uIGlzVHJ1ZURlZmF1bHRUb2dnbGVTd2l0Y2hFbnRyeUVkaXRlZChub2RlKSB7XG4gIHJldHVybiBub2RlICYmICFub2RlLmNoZWNrZWQ7XG59XG5cbmZ1bmN0aW9uIERlc2NyaXB0aW9uRW50cnkocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGVkaXRGaWVsZCxcbiAgICBmaWVsZFxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IGVudHJpZXMgPSBbXTtcbiAgZW50cmllcy5wdXNoKHtcbiAgICBpZDogJ2Rlc2NyaXB0aW9uJyxcbiAgICBjb21wb25lbnQ6IERlc2NyaXB0aW9uLFxuICAgIGVkaXRGaWVsZDogZWRpdEZpZWxkLFxuICAgIGZpZWxkOiBmaWVsZCxcbiAgICBpc0VkaXRlZDogaXNFZGl0ZWQkNSxcbiAgICBpc0RlZmF1bHRWaXNpYmxlOiBmaWVsZCA9PiBmaWVsZC50eXBlICE9PSAnZmlsZXBpY2tlcicgJiYgSU5QVVRTLmluY2x1ZGVzKGZpZWxkLnR5cGUpXG4gIH0pO1xuICByZXR1cm4gZW50cmllcztcbn1cbmZ1bmN0aW9uIERlc2NyaXB0aW9uKHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBlZGl0RmllbGQsXG4gICAgZmllbGQsXG4gICAgaWRcbiAgfSA9IHByb3BzO1xuICBjb25zdCBkZWJvdW5jZSA9IHVzZVNlcnZpY2UoJ2RlYm91bmNlJyk7XG4gIGNvbnN0IHZhcmlhYmxlcyA9IHVzZVZhcmlhYmxlcygpLm1hcChuYW1lID0+ICh7XG4gICAgbmFtZVxuICB9KSk7XG4gIGNvbnN0IHBhdGggPSBbJ2Rlc2NyaXB0aW9uJ107XG4gIGNvbnN0IGdldFZhbHVlID0gKCkgPT4ge1xuICAgIHJldHVybiBnZXQoZmllbGQsIHBhdGgsICcnKTtcbiAgfTtcbiAgY29uc3Qgc2V0VmFsdWUgPSB2YWx1ZSA9PiB7XG4gICAgcmV0dXJuIGVkaXRGaWVsZChmaWVsZCwgcGF0aCwgdmFsdWUpO1xuICB9O1xuICByZXR1cm4gRmVlbFRlbXBsYXRpbmdFbnRyeSh7XG4gICAgZGVib3VuY2UsXG4gICAgZWxlbWVudDogZmllbGQsXG4gICAgZ2V0VmFsdWUsXG4gICAgaWQsXG4gICAgbGFiZWw6ICdGaWVsZCBkZXNjcmlwdGlvbicsXG4gICAgc2luZ2xlTGluZTogdHJ1ZSxcbiAgICBzZXRWYWx1ZSxcbiAgICB2YXJpYWJsZXNcbiAgfSk7XG59XG5cbmNvbnN0IEVNUFRZX09QVElPTiA9ICcnO1xuZnVuY3Rpb24gRGVmYXVsdFZhbHVlRW50cnkocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGVkaXRGaWVsZCxcbiAgICBmaWVsZFxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IHtcbiAgICB0eXBlXG4gIH0gPSBmaWVsZDtcbiAgY29uc3QgZW50cmllcyA9IFtdO1xuICBmdW5jdGlvbiBpc0RlZmF1bHRWaXNpYmxlKG1hdGNoZXJzKSB7XG4gICAgcmV0dXJuIGZpZWxkID0+IHtcbiAgICAgIC8vIE9ubHkgbWFrZSBkZWZhdWx0IHZhbHVlcyBhdmFpbGFibGUgd2hlbiB0aGV5IGFyZSBzdGF0aWNhbGx5IGRlZmluZWRcbiAgICAgIGlmICghSU5QVVRTLmluY2x1ZGVzKHR5cGUpIHx8IE9QVElPTlNfSU5QVVRTLmluY2x1ZGVzKHR5cGUpICYmICFmaWVsZC52YWx1ZXMpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG1hdGNoZXJzKGZpZWxkKTtcbiAgICB9O1xuICB9XG4gIGNvbnN0IGRlZmF1bHRWYWx1ZUJhc2UgPSB7XG4gICAgZWRpdEZpZWxkLFxuICAgIGZpZWxkLFxuICAgIGlkOiAnZGVmYXVsdFZhbHVlJyxcbiAgICBsYWJlbDogJ0RlZmF1bHQgdmFsdWUnXG4gIH07XG4gIGVudHJpZXMucHVzaCh7XG4gICAgLi4uZGVmYXVsdFZhbHVlQmFzZSxcbiAgICBjb21wb25lbnQ6IERlZmF1bHRWYWx1ZUNoZWNrYm94LFxuICAgIGlzRWRpdGVkOiBpc0VkaXRlZCQzLFxuICAgIGlzRGVmYXVsdFZpc2libGU6IGlzRGVmYXVsdFZpc2libGUoZmllbGQgPT4gZmllbGQudHlwZSA9PT0gJ2NoZWNrYm94JylcbiAgfSk7XG4gIGVudHJpZXMucHVzaCh7XG4gICAgLi4uZGVmYXVsdFZhbHVlQmFzZSxcbiAgICBjb21wb25lbnQ6IERlZmF1bHRWYWx1ZU51bWJlcixcbiAgICBpc0VkaXRlZDogaXNFZGl0ZWQsXG4gICAgaXNEZWZhdWx0VmlzaWJsZTogaXNEZWZhdWx0VmlzaWJsZShmaWVsZCA9PiBmaWVsZC50eXBlID09PSAnbnVtYmVyJylcbiAgfSk7XG4gIGVudHJpZXMucHVzaCh7XG4gICAgLi4uZGVmYXVsdFZhbHVlQmFzZSxcbiAgICBjb21wb25lbnQ6IERlZmF1bHRWYWx1ZVNpbmdsZVNlbGVjdCxcbiAgICBpc0VkaXRlZDogaXNFZGl0ZWQkMyxcbiAgICBpc0RlZmF1bHRWaXNpYmxlOiBpc0RlZmF1bHRWaXNpYmxlKGZpZWxkID0+IGZpZWxkLnR5cGUgPT09ICdyYWRpbycgfHwgZmllbGQudHlwZSA9PT0gJ3NlbGVjdCcpXG4gIH0pO1xuXG4gIC8vIHRvZG8oU2thaWlyKTogaW1wbGVtZW50IGEgbXVsdGlzZWxlY3QgZXF1aXZhbGVudCAoY2YuIGh0dHBzOi8vZ2l0aHViLmNvbS9icG1uLWlvL2Zvcm0tanMvaXNzdWVzLzI2NSlcblxuICBlbnRyaWVzLnB1c2goe1xuICAgIC4uLmRlZmF1bHRWYWx1ZUJhc2UsXG4gICAgY29tcG9uZW50OiBEZWZhdWx0VmFsdWVUZXh0ZmllbGQsXG4gICAgaXNFZGl0ZWQ6IGlzRWRpdGVkLFxuICAgIGlzRGVmYXVsdFZpc2libGU6IGlzRGVmYXVsdFZpc2libGUoZmllbGQgPT4gZmllbGQudHlwZSA9PT0gJ3RleHRmaWVsZCcpXG4gIH0pO1xuICBlbnRyaWVzLnB1c2goe1xuICAgIC4uLmRlZmF1bHRWYWx1ZUJhc2UsXG4gICAgY29tcG9uZW50OiBEZWZhdWx0VmFsdWVUZXh0YXJlYSxcbiAgICBpc0VkaXRlZDogaXNFZGl0ZWQkMSxcbiAgICBpc0RlZmF1bHRWaXNpYmxlOiBpc0RlZmF1bHRWaXNpYmxlKGZpZWxkID0+IGZpZWxkLnR5cGUgPT09ICd0ZXh0YXJlYScpXG4gIH0pO1xuICByZXR1cm4gZW50cmllcztcbn1cbmZ1bmN0aW9uIERlZmF1bHRWYWx1ZUNoZWNrYm94KHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBlZGl0RmllbGQsXG4gICAgZmllbGQsXG4gICAgaWQsXG4gICAgbGFiZWxcbiAgfSA9IHByb3BzO1xuICBjb25zdCB7XG4gICAgZGVmYXVsdFZhbHVlXG4gIH0gPSBmaWVsZDtcbiAgY29uc3QgcGF0aCA9IFsnZGVmYXVsdFZhbHVlJ107XG4gIGNvbnN0IGdldE9wdGlvbnMgPSAoKSA9PiB7XG4gICAgcmV0dXJuIFt7XG4gICAgICBsYWJlbDogJ0NoZWNrZWQnLFxuICAgICAgdmFsdWU6ICd0cnVlJ1xuICAgIH0sIHtcbiAgICAgIGxhYmVsOiAnTm90IGNoZWNrZWQnLFxuICAgICAgdmFsdWU6ICdmYWxzZSdcbiAgICB9XTtcbiAgfTtcbiAgY29uc3Qgc2V0VmFsdWUgPSB2YWx1ZSA9PiB7XG4gICAgcmV0dXJuIGVkaXRGaWVsZChmaWVsZCwgcGF0aCwgcGFyc2VTdHJpbmdUb0Jvb2xlYW4odmFsdWUpKTtcbiAgfTtcbiAgY29uc3QgZ2V0VmFsdWUgPSAoKSA9PiB7XG4gICAgcmV0dXJuIHBhcnNlQm9vbGVhblRvU3RyaW5nKGRlZmF1bHRWYWx1ZSk7XG4gIH07XG4gIHJldHVybiBTZWxlY3RFbnRyeSh7XG4gICAgZWxlbWVudDogZmllbGQsXG4gICAgZ2V0T3B0aW9ucyxcbiAgICBnZXRWYWx1ZSxcbiAgICBpZCxcbiAgICBsYWJlbCxcbiAgICBzZXRWYWx1ZVxuICB9KTtcbn1cbmZ1bmN0aW9uIERlZmF1bHRWYWx1ZU51bWJlcihwcm9wcykge1xuICBjb25zdCB7XG4gICAgZWRpdEZpZWxkLFxuICAgIGZpZWxkLFxuICAgIGlkLFxuICAgIGxhYmVsXG4gIH0gPSBwcm9wcztcbiAgY29uc3Qge1xuICAgIGRlY2ltYWxEaWdpdHMsXG4gICAgc2VyaWFsaXplVG9TdHJpbmcgPSBmYWxzZVxuICB9ID0gZmllbGQ7XG4gIGNvbnN0IGRlYm91bmNlID0gdXNlU2VydmljZSgnZGVib3VuY2UnKTtcbiAgY29uc3QgcGF0aCA9IFsnZGVmYXVsdFZhbHVlJ107XG4gIGNvbnN0IGdldFZhbHVlID0gZSA9PiB7XG4gICAgbGV0IHZhbHVlID0gZ2V0KGZpZWxkLCBwYXRoKTtcbiAgICBpZiAoIWlzVmFsaWROdW1iZXIodmFsdWUpKSByZXR1cm47XG5cbiAgICAvLyBFbmZvcmNlcyBkZWNpbWFsIG5vdGF0aW9uIHNvIHRoYXQgd2UgZG8gbm90IHN1Ym1pdCBkZWZhdWx0cyBpbiBleHBvbmVudCBmb3JtXG4gICAgcmV0dXJuIHNlcmlhbGl6ZVRvU3RyaW5nID8gQmlnKHZhbHVlKS50b0ZpeGVkKCkgOiB2YWx1ZTtcbiAgfTtcbiAgY29uc3Qgc2V0VmFsdWUgPSAodmFsdWUsIGVycm9yKSA9PiB7XG4gICAgaWYgKGVycm9yKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGxldCBuZXdWYWx1ZTtcbiAgICBpZiAoaXNWYWxpZE51bWJlcih2YWx1ZSkpIHtcbiAgICAgIG5ld1ZhbHVlID0gc2VyaWFsaXplVG9TdHJpbmcgPyB2YWx1ZSA6IE51bWJlcih2YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiBlZGl0RmllbGQoZmllbGQsIHBhdGgsIG5ld1ZhbHVlKTtcbiAgfTtcbiAgY29uc3QgZGVjaW1hbERpZ2l0c1NldCA9IGRlY2ltYWxEaWdpdHMgfHwgZGVjaW1hbERpZ2l0cyA9PT0gMDtcbiAgY29uc3QgdmFsaWRhdGUgPSB1c2VDYWxsYmFjayh2YWx1ZSA9PiB7XG4gICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQgfHwgdmFsdWUgPT09IG51bGwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCFpc1ZhbGlkTnVtYmVyKHZhbHVlKSkge1xuICAgICAgcmV0dXJuICdTaG91bGQgYmUgYSB2YWxpZCBudW1iZXInO1xuICAgIH1cbiAgICBpZiAoZGVjaW1hbERpZ2l0c1NldCAmJiBjb3VudERlY2ltYWxzKHZhbHVlKSA+IGRlY2ltYWxEaWdpdHMpIHtcbiAgICAgIHJldHVybiBgU2hvdWxkIG5vdCBjb250YWluIG1vcmUgdGhhbiAke2RlY2ltYWxEaWdpdHN9IGRlY2ltYWwgZGlnaXRzYDtcbiAgICB9XG4gIH0sIFtkZWNpbWFsRGlnaXRzU2V0LCBkZWNpbWFsRGlnaXRzXSk7XG4gIHJldHVybiBUZXh0ZmllbGRFbnRyeSh7XG4gICAgZGVib3VuY2UsXG4gICAgbGFiZWwsXG4gICAgZWxlbWVudDogZmllbGQsXG4gICAgZ2V0VmFsdWUsXG4gICAgaWQsXG4gICAgc2V0VmFsdWUsXG4gICAgdmFsaWRhdGVcbiAgfSk7XG59XG5mdW5jdGlvbiBEZWZhdWx0VmFsdWVTaW5nbGVTZWxlY3QocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGVkaXRGaWVsZCxcbiAgICBmaWVsZCxcbiAgICBpZCxcbiAgICBsYWJlbFxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IHtcbiAgICBkZWZhdWx0VmFsdWUgPSBFTVBUWV9PUFRJT04sXG4gICAgdmFsdWVzID0gW11cbiAgfSA9IGZpZWxkO1xuICBjb25zdCBwYXRoID0gWydkZWZhdWx0VmFsdWUnXTtcbiAgY29uc3QgZ2V0T3B0aW9ucyA9ICgpID0+IHtcbiAgICByZXR1cm4gW3tcbiAgICAgIGxhYmVsOiAnPG5vbmU+JyxcbiAgICAgIHZhbHVlOiBFTVBUWV9PUFRJT05cbiAgICB9LCAuLi52YWx1ZXNdO1xuICB9O1xuICBjb25zdCBzZXRWYWx1ZSA9IHZhbHVlID0+IHtcbiAgICByZXR1cm4gZWRpdEZpZWxkKGZpZWxkLCBwYXRoLCB2YWx1ZS5sZW5ndGggPyB2YWx1ZSA6IHVuZGVmaW5lZCk7XG4gIH07XG4gIGNvbnN0IGdldFZhbHVlID0gKCkgPT4ge1xuICAgIHJldHVybiBkZWZhdWx0VmFsdWU7XG4gIH07XG4gIHJldHVybiBTZWxlY3RFbnRyeSh7XG4gICAgZWxlbWVudDogZmllbGQsXG4gICAgZ2V0T3B0aW9ucyxcbiAgICBnZXRWYWx1ZSxcbiAgICBpZCxcbiAgICBsYWJlbCxcbiAgICBzZXRWYWx1ZVxuICB9KTtcbn1cbmZ1bmN0aW9uIERlZmF1bHRWYWx1ZVRleHRmaWVsZChwcm9wcykge1xuICBjb25zdCB7XG4gICAgZWRpdEZpZWxkLFxuICAgIGZpZWxkLFxuICAgIGlkLFxuICAgIGxhYmVsXG4gIH0gPSBwcm9wcztcbiAgY29uc3QgZGVib3VuY2UgPSB1c2VTZXJ2aWNlKCdkZWJvdW5jZScpO1xuICBjb25zdCBwYXRoID0gWydkZWZhdWx0VmFsdWUnXTtcbiAgY29uc3QgZ2V0VmFsdWUgPSAoKSA9PiB7XG4gICAgcmV0dXJuIGdldChmaWVsZCwgcGF0aCwgJycpO1xuICB9O1xuICBjb25zdCBzZXRWYWx1ZSA9IHZhbHVlID0+IHtcbiAgICByZXR1cm4gZWRpdEZpZWxkKGZpZWxkLCBwYXRoLCB2YWx1ZSk7XG4gIH07XG4gIHJldHVybiBUZXh0ZmllbGRFbnRyeSh7XG4gICAgZGVib3VuY2UsXG4gICAgZWxlbWVudDogZmllbGQsXG4gICAgZ2V0VmFsdWUsXG4gICAgaWQsXG4gICAgbGFiZWwsXG4gICAgc2V0VmFsdWVcbiAgfSk7XG59XG5mdW5jdGlvbiBEZWZhdWx0VmFsdWVUZXh0YXJlYShwcm9wcykge1xuICBjb25zdCB7XG4gICAgZWRpdEZpZWxkLFxuICAgIGZpZWxkLFxuICAgIGlkLFxuICAgIGxhYmVsXG4gIH0gPSBwcm9wcztcbiAgY29uc3QgZGVib3VuY2UgPSB1c2VTZXJ2aWNlKCdkZWJvdW5jZScpO1xuICBjb25zdCBwYXRoID0gWydkZWZhdWx0VmFsdWUnXTtcbiAgY29uc3QgZ2V0VmFsdWUgPSAoKSA9PiB7XG4gICAgcmV0dXJuIGdldChmaWVsZCwgcGF0aCwgJycpO1xuICB9O1xuICBjb25zdCBzZXRWYWx1ZSA9IHZhbHVlID0+IHtcbiAgICByZXR1cm4gZWRpdEZpZWxkKGZpZWxkLCBwYXRoLCB2YWx1ZSk7XG4gIH07XG4gIHJldHVybiBUZXh0QXJlYUVudHJ5KHtcbiAgICBkZWJvdW5jZSxcbiAgICBlbGVtZW50OiBmaWVsZCxcbiAgICBnZXRWYWx1ZSxcbiAgICBpZCxcbiAgICBsYWJlbCxcbiAgICBzZXRWYWx1ZVxuICB9KTtcbn1cblxuLy8gaGVscGVycyAvLy8vLy8vLy8vLy8vLy8vL1xuXG5mdW5jdGlvbiBwYXJzZVN0cmluZ1RvQm9vbGVhbih2YWx1ZSkge1xuICBpZiAodmFsdWUgPT09ICd0cnVlJykge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIHBhcnNlQm9vbGVhblRvU3RyaW5nKHZhbHVlKSB7XG4gIGlmICh2YWx1ZSA9PT0gdHJ1ZSkge1xuICAgIHJldHVybiAndHJ1ZSc7XG4gIH1cbiAgcmV0dXJuICdmYWxzZSc7XG59XG5cbmZ1bmN0aW9uIERpc2FibGVkRW50cnkocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGVkaXRGaWVsZCxcbiAgICBmaWVsZFxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IGVudHJpZXMgPSBbXTtcbiAgZW50cmllcy5wdXNoKHtcbiAgICBpZDogJ2Rpc2FibGVkJyxcbiAgICBjb21wb25lbnQ6IERpc2FibGVkLFxuICAgIGVkaXRGaWVsZDogZWRpdEZpZWxkLFxuICAgIGZpZWxkOiBmaWVsZCxcbiAgICBpc0VkaXRlZDogaXNFZGl0ZWQkNyxcbiAgICBpc0RlZmF1bHRWaXNpYmxlOiBmaWVsZCA9PiBJTlBVVFMuaW5jbHVkZXMoZmllbGQudHlwZSlcbiAgfSk7XG4gIHJldHVybiBlbnRyaWVzO1xufVxuZnVuY3Rpb24gRGlzYWJsZWQocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGVkaXRGaWVsZCxcbiAgICBmaWVsZCxcbiAgICBpZFxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IHBhdGggPSBbJ2Rpc2FibGVkJ107XG4gIGNvbnN0IGdldFZhbHVlID0gKCkgPT4ge1xuICAgIHJldHVybiBnZXQoZmllbGQsIHBhdGgsICcnKTtcbiAgfTtcbiAgY29uc3Qgc2V0VmFsdWUgPSB2YWx1ZSA9PiB7XG4gICAgcmV0dXJuIGVkaXRGaWVsZChmaWVsZCwgcGF0aCwgdmFsdWUpO1xuICB9O1xuICByZXR1cm4gVG9nZ2xlU3dpdGNoRW50cnkoe1xuICAgIGVsZW1lbnQ6IGZpZWxkLFxuICAgIGdldFZhbHVlLFxuICAgIGlkLFxuICAgIGxhYmVsOiAnRGlzYWJsZWQnLFxuICAgIHRvb2x0aXA6ICdEaXNhYmxlIHRoaXMgZmllbGQgd2hlbiBpdCBzaG91bGQgbm90IGJlIGludGVyYWN0aXZlIGZvciBlbmQtdXNlcnMuIEl0cyBkYXRhIHdpbGwgbm90IGJlIHN1Ym1pdHRlZC4gVGhpcyBzZXR0aW5nIHRha2VzIHByZWNlZGVuY2Ugb3ZlciByZWFkLW9ubHkuJyxcbiAgICBpbmxpbmU6IHRydWUsXG4gICAgc2V0VmFsdWVcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIElkRW50cnkocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGVkaXRGaWVsZCxcbiAgICBmaWVsZFxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IGVudHJpZXMgPSBbXTtcbiAgZW50cmllcy5wdXNoKHtcbiAgICBpZDogJ2lkJyxcbiAgICBjb21wb25lbnQ6IElkLFxuICAgIGVkaXRGaWVsZDogZWRpdEZpZWxkLFxuICAgIGZpZWxkOiBmaWVsZCxcbiAgICBpc0VkaXRlZDogaXNFZGl0ZWQsXG4gICAgaXNEZWZhdWx0VmlzaWJsZTogZmllbGQgPT4gZmllbGQudHlwZSA9PT0gJ2RlZmF1bHQnXG4gIH0pO1xuICByZXR1cm4gZW50cmllcztcbn1cbmZ1bmN0aW9uIElkKHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBlZGl0RmllbGQsXG4gICAgZmllbGQsXG4gICAgaWRcbiAgfSA9IHByb3BzO1xuICBjb25zdCBmb3JtRmllbGRSZWdpc3RyeSA9IHVzZVNlcnZpY2UoJ2Zvcm1GaWVsZFJlZ2lzdHJ5Jyk7XG4gIGNvbnN0IGRlYm91bmNlID0gdXNlU2VydmljZSgnZGVib3VuY2UnKTtcbiAgY29uc3QgcGF0aCA9IFsnaWQnXTtcbiAgY29uc3QgZ2V0VmFsdWUgPSAoKSA9PiB7XG4gICAgcmV0dXJuIGdldChmaWVsZCwgcGF0aCwgJycpO1xuICB9O1xuICBjb25zdCBzZXRWYWx1ZSA9ICh2YWx1ZSwgZXJyb3IpID0+IHtcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcmV0dXJuIGVkaXRGaWVsZChmaWVsZCwgcGF0aCwgdmFsdWUpO1xuICB9O1xuICBjb25zdCB2YWxpZGF0ZSA9IHVzZUNhbGxiYWNrKHZhbHVlID0+IHtcbiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJyB8fCB2YWx1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiAnTXVzdCBub3QgYmUgZW1wdHkuJztcbiAgICB9XG4gICAgY29uc3QgYXNzaWduZWQgPSBmb3JtRmllbGRSZWdpc3RyeS5faWRzLmFzc2lnbmVkKHZhbHVlKTtcbiAgICBpZiAoYXNzaWduZWQgJiYgYXNzaWduZWQgIT09IGZpZWxkKSB7XG4gICAgICByZXR1cm4gJ011c3QgYmUgdW5pcXVlLic7XG4gICAgfVxuICAgIHJldHVybiB2YWxpZGF0ZUlkKHZhbHVlKSB8fCBudWxsO1xuICB9LCBbZm9ybUZpZWxkUmVnaXN0cnksIGZpZWxkXSk7XG4gIHJldHVybiBUZXh0ZmllbGRFbnRyeSh7XG4gICAgZGVib3VuY2UsXG4gICAgZWxlbWVudDogZmllbGQsXG4gICAgZ2V0VmFsdWUsXG4gICAgaWQsXG4gICAgbGFiZWw6ICdJRCcsXG4gICAgc2V0VmFsdWUsXG4gICAgdmFsaWRhdGVcbiAgfSk7XG59XG5cbi8vIGlkIHN0cnVjdHVyYWwgdmFsaWRhdGlvbiAvLy8vLy8vLy8vLy8vXG5cbmNvbnN0IFNQQUNFX1JFR0VYID0gL1xccy87XG5cbi8vIGZvciBRTmFtZSB2YWxpZGF0aW9uIGFzIHBlciBodHRwOi8vd3d3LnczLm9yZy9UUi9SRUMteG1sLyNOVC1OYW1lQ2hhclxuY29uc3QgUU5BTUVfUkVHRVggPSAvXihbYS16XVtcXHctLl0qOik/W2Etel9dW1xcdy0uXSokL2k7XG5cbi8vIGZvciBJRCB2YWxpZGF0aW9uIGFzIHBlciBCUE1OIFNjaGVtYSAoUU5hbWUgLSBOYW1lc3BhY2UpXG5jb25zdCBJRF9SRUdFWCA9IC9eW2Etel9dW1xcdy0uXSokL2k7XG5mdW5jdGlvbiB2YWxpZGF0ZUlkKGlkVmFsdWUpIHtcbiAgaWYgKGNvbnRhaW5zU3BhY2UoaWRWYWx1ZSkpIHtcbiAgICByZXR1cm4gJ011c3Qgbm90IGNvbnRhaW4gc3BhY2VzLic7XG4gIH1cbiAgaWYgKCFJRF9SRUdFWC50ZXN0KGlkVmFsdWUpKSB7XG4gICAgaWYgKFFOQU1FX1JFR0VYLnRlc3QoaWRWYWx1ZSkpIHtcbiAgICAgIHJldHVybiAnTXVzdCBub3QgY29udGFpbiBwcmVmaXguJztcbiAgICB9XG4gICAgcmV0dXJuICdNdXN0IGJlIGEgdmFsaWQgUU5hbWUuJztcbiAgfVxufVxuZnVuY3Rpb24gY29udGFpbnNTcGFjZSh2YWx1ZSkge1xuICByZXR1cm4gU1BBQ0VfUkVHRVgudGVzdCh2YWx1ZSk7XG59XG5cbmZ1bmN0aW9uIEtleUVudHJ5KHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBlZGl0RmllbGQsXG4gICAgZmllbGQsXG4gICAgZ2V0U2VydmljZVxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IGVudHJpZXMgPSBbXTtcbiAgZW50cmllcy5wdXNoKHtcbiAgICBpZDogJ2tleScsXG4gICAgY29tcG9uZW50OiBLZXkkMixcbiAgICBlZGl0RmllbGQ6IGVkaXRGaWVsZCxcbiAgICBmaWVsZDogZmllbGQsXG4gICAgaXNFZGl0ZWQ6IGlzRWRpdGVkLFxuICAgIGlzRGVmYXVsdFZpc2libGU6IGZpZWxkID0+IHtcbiAgICAgIGNvbnN0IGZvcm1GaWVsZHMgPSBnZXRTZXJ2aWNlKCdmb3JtRmllbGRzJyk7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGNvbmZpZ1xuICAgICAgfSA9IGZvcm1GaWVsZHMuZ2V0KGZpZWxkLnR5cGUpO1xuICAgICAgcmV0dXJuIGNvbmZpZy5rZXllZDtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gZW50cmllcztcbn1cbmZ1bmN0aW9uIEtleSQyKHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBlZGl0RmllbGQsXG4gICAgZmllbGQsXG4gICAgaWRcbiAgfSA9IHByb3BzO1xuICBjb25zdCBwYXRoUmVnaXN0cnkgPSB1c2VTZXJ2aWNlKCdwYXRoUmVnaXN0cnknKTtcbiAgY29uc3QgZGVib3VuY2UgPSB1c2VTZXJ2aWNlKCdkZWJvdW5jZScpO1xuICBjb25zdCBwYXRoID0gWydrZXknXTtcbiAgY29uc3QgZ2V0VmFsdWUgPSAoKSA9PiB7XG4gICAgcmV0dXJuIGdldChmaWVsZCwgcGF0aCwgJycpO1xuICB9O1xuICBjb25zdCBzZXRWYWx1ZSA9ICh2YWx1ZSwgZXJyb3IpID0+IHtcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcmV0dXJuIGVkaXRGaWVsZChmaWVsZCwgcGF0aCwgdmFsdWUpO1xuICB9O1xuICBjb25zdCB2YWxpZGF0ZSA9IHVzZUNhbGxiYWNrKHZhbHVlID0+IHtcbiAgICBpZiAodmFsdWUgPT09IGZpZWxkLmtleSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGlmICghaXNTdHJpbmcodmFsdWUpIHx8IHZhbHVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuICdNdXN0IG5vdCBiZSBlbXB0eS4nO1xuICAgIH1cbiAgICBpZiAoIWlzVmFsaWREb3RQYXRoKHZhbHVlKSkge1xuICAgICAgcmV0dXJuICdNdXN0IGJlIGEgdmFyaWFibGUgb3IgYSBkb3Qgc2VwYXJhdGVkIHBhdGguJztcbiAgICB9XG4gICAgaWYgKGhhc0ludGVnZXJQYXRoU2VnbWVudCh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiAnTXVzdCBub3QgY29udGFpbiBudW1lcmljYWwgcGF0aCBzZWdtZW50cy4nO1xuICAgIH1cbiAgICBpZiAoaXNQcm9oaWJpdGVkUGF0aCh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiAnTXVzdCBub3QgYmUgYSBwcm9oaWJpdGVkIHBhdGguJztcbiAgICB9XG4gICAgY29uc3QgcmVwbGFjZW1lbnRzID0ge1xuICAgICAgW2ZpZWxkLmlkXTogdmFsdWUuc3BsaXQoJy4nKVxuICAgIH07XG4gICAgY29uc3Qgb2xkUGF0aCA9IHBhdGhSZWdpc3RyeS5nZXRWYWx1ZVBhdGgoZmllbGQpO1xuICAgIGNvbnN0IG5ld1BhdGggPSBwYXRoUmVnaXN0cnkuZ2V0VmFsdWVQYXRoKGZpZWxkLCB7XG4gICAgICByZXBsYWNlbWVudHNcbiAgICB9KTtcblxuICAgIC8vIHVuY2xhaW0gdGVtcG9yYXJpbHkgdG8gYXZvaWQgc2VsZi1jb25mbGljdHNcbiAgICBwYXRoUmVnaXN0cnkudW5jbGFpbVBhdGgob2xkUGF0aCk7XG4gICAgY29uc3QgY2FuQ2xhaW0gPSBwYXRoUmVnaXN0cnkuY2FuQ2xhaW1QYXRoKG5ld1BhdGgsIHtcbiAgICAgIGlzQ2xvc2VkOiB0cnVlLFxuICAgICAgY2xhaW1lcklkOiBmaWVsZC5pZFxuICAgIH0pO1xuICAgIHBhdGhSZWdpc3RyeS5jbGFpbVBhdGgob2xkUGF0aCwge1xuICAgICAgaXNDbG9zZWQ6IHRydWUsXG4gICAgICBjbGFpbWVySWQ6IGZpZWxkLmlkXG4gICAgfSk7XG4gICAgcmV0dXJuIGNhbkNsYWltID8gbnVsbCA6ICdNdXN0IG5vdCBjb25mbGljdCB3aXRoIG90aGVyIGtleS9wYXRoIGFzc2lnbm1lbnRzLic7XG4gIH0sIFtmaWVsZCwgcGF0aFJlZ2lzdHJ5XSk7XG4gIHJldHVybiBUZXh0ZmllbGRFbnRyeSh7XG4gICAgZGVib3VuY2UsXG4gICAgZGVzY3JpcHRpb246ICdCaW5kcyB0byBhIGZvcm0gdmFyaWFibGUnLFxuICAgIGVsZW1lbnQ6IGZpZWxkLFxuICAgIGdldFZhbHVlLFxuICAgIGlkLFxuICAgIGxhYmVsOiAnS2V5JyxcbiAgICB0b29sdGlwOiAnVXNlIGEgdW5pcXVlIFwia2V5XCIgdG8gbGluayB0aGUgZm9ybSBlbGVtZW50IGFuZCB0aGUgcmVsYXRlZCBpbnB1dC9vdXRwdXQgZGF0YS4gV2hlbiBkZWFsaW5nIHdpdGggbmVzdGVkIGRhdGEsIGJyZWFrIGl0IGRvd24gaW4gdGhlIHVzZXIgdGFza1xcJ3MgaW5wdXQgbWFwcGluZyBiZWZvcmUgdXNpbmcgaXQuJyxcbiAgICBzZXRWYWx1ZSxcbiAgICB2YWxpZGF0ZVxuICB9KTtcbn1cblxuZnVuY3Rpb24gUGF0aEVudHJ5KHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBlZGl0RmllbGQsXG4gICAgZmllbGQsXG4gICAgZ2V0U2VydmljZVxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IHtcbiAgICB0eXBlXG4gIH0gPSBmaWVsZDtcbiAgY29uc3QgZW50cmllcyA9IFtdO1xuICBjb25zdCBmb3JtRmllbGREZWZpbml0aW9uID0gZ2V0U2VydmljZSgnZm9ybUZpZWxkcycpLmdldCh0eXBlKTtcbiAgaWYgKGZvcm1GaWVsZERlZmluaXRpb24gJiYgZm9ybUZpZWxkRGVmaW5pdGlvbi5jb25maWcucGF0aGVkKSB7XG4gICAgZW50cmllcy5wdXNoKHtcbiAgICAgIGlkOiAncGF0aCcsXG4gICAgICBjb21wb25lbnQ6IFBhdGgsXG4gICAgICBlZGl0RmllbGQ6IGVkaXRGaWVsZCxcbiAgICAgIGZpZWxkOiBmaWVsZCxcbiAgICAgIGlzRWRpdGVkOiBpc0VkaXRlZFxuICAgIH0pO1xuICB9XG4gIHJldHVybiBlbnRyaWVzO1xufVxuZnVuY3Rpb24gUGF0aChwcm9wcykge1xuICBjb25zdCB7XG4gICAgZWRpdEZpZWxkLFxuICAgIGZpZWxkLFxuICAgIGlkXG4gIH0gPSBwcm9wcztcbiAgY29uc3QgZGVib3VuY2UgPSB1c2VTZXJ2aWNlKCdkZWJvdW5jZScpO1xuICBjb25zdCBwYXRoUmVnaXN0cnkgPSB1c2VTZXJ2aWNlKCdwYXRoUmVnaXN0cnknKTtcbiAgY29uc3QgZmllbGRDb25maWcgPSB1c2VTZXJ2aWNlKCdmb3JtRmllbGRzJykuZ2V0KGZpZWxkLnR5cGUpLmNvbmZpZztcbiAgY29uc3QgaXNSZXBlYXRpbmcgPSBmaWVsZENvbmZpZy5yZXBlYXRhYmxlICYmIGZpZWxkLmlzUmVwZWF0aW5nO1xuICBjb25zdCBwYXRoID0gWydwYXRoJ107XG4gIGNvbnN0IGdldFZhbHVlID0gKCkgPT4ge1xuICAgIHJldHVybiBnZXQoZmllbGQsIHBhdGgsICcnKTtcbiAgfTtcbiAgY29uc3Qgc2V0VmFsdWUgPSAodmFsdWUsIGVycm9yKSA9PiB7XG4gICAgaWYgKGVycm9yKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHJldHVybiBlZGl0RmllbGQoZmllbGQsIHBhdGgsIHZhbHVlKTtcbiAgfTtcbiAgY29uc3QgdmFsaWRhdGUgPSB1c2VDYWxsYmFjayh2YWx1ZSA9PiB7XG4gICAgaWYgKCF2YWx1ZSAmJiBpc1JlcGVhdGluZykge1xuICAgICAgcmV0dXJuICdNdXN0IG5vdCBiZSBlbXB0eSc7XG4gICAgfVxuXG4gICAgLy8gRWFybHkgcmV0dXJuIGZvciBlbXB0eSB2YWx1ZSBpbiBub24tcmVwZWF0aW5nIGNhc2VzIG9yIGlmIHRoZSBmaWVsZCBwYXRoIGhhc24ndCBjaGFuZ2VkXG4gICAgaWYgKCF2YWx1ZSAmJiAhaXNSZXBlYXRpbmcgfHwgdmFsdWUgPT09IGZpZWxkLnBhdGgpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8vIFZhbGlkYXRlIGRvdC1zZXBhcmF0ZWQgcGF0aCBmb3JtYXRcbiAgICBpZiAoIWlzVmFsaWREb3RQYXRoKHZhbHVlKSkge1xuICAgICAgY29uc3QgbXNnID0gaXNSZXBlYXRpbmcgPyAnTXVzdCBiZSBhIHZhcmlhYmxlIG9yIGEgZG90LXNlcGFyYXRlZCBwYXRoJyA6ICdNdXN0IGJlIGVtcHR5LCBhIHZhcmlhYmxlIG9yIGEgZG90LXNlcGFyYXRlZCBwYXRoJztcbiAgICAgIHJldHVybiBtc2c7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgZm9yIGludGVnZXIgc2VnbWVudHMgaW4gdGhlIHBhdGhcbiAgICBpZiAoaGFzSW50ZWdlclBhdGhTZWdtZW50KHZhbHVlKSkge1xuICAgICAgcmV0dXJuICdNdXN0IG5vdCBjb250YWluIG51bWVyaWNhbCBwYXRoIHNlZ21lbnRzLic7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgZm9yIHNwZWNpYWwgcHJvaGliaXRlZCBwYXRoc1xuICAgIGlmIChpc1Byb2hpYml0ZWRQYXRoKHZhbHVlKSkge1xuICAgICAgcmV0dXJuICdNdXN0IG5vdCBiZSBhIHByb2hpYml0ZWQgcGF0aC4nO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGZvciBwYXRoIGNvbGxpc2lvbnNcbiAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgcmVwbGFjZW1lbnRzOiB7XG4gICAgICAgIFtmaWVsZC5pZF06IHZhbHVlLnNwbGl0KCcuJylcbiAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGNhbkNsYWltID0gcGF0aFJlZ2lzdHJ5LmV4ZWN1dGVSZWN1cnNpdmVseU9uRmllbGRzKGZpZWxkLCAoe1xuICAgICAgZmllbGQsXG4gICAgICBpc0Nsb3NlZCxcbiAgICAgIGlzUmVwZWF0YWJsZVxuICAgIH0pID0+IHtcbiAgICAgIGNvbnN0IHBhdGggPSBwYXRoUmVnaXN0cnkuZ2V0VmFsdWVQYXRoKGZpZWxkLCBvcHRpb25zKTtcbiAgICAgIHJldHVybiBwYXRoUmVnaXN0cnkuY2FuQ2xhaW1QYXRoKHBhdGgsIHtcbiAgICAgICAgaXNDbG9zZWQsXG4gICAgICAgIGlzUmVwZWF0YWJsZSxcbiAgICAgICAgY2xhaW1lcklkOiBmaWVsZC5pZFxuICAgICAgfSk7XG4gICAgfSk7XG4gICAgaWYgKCFjYW5DbGFpbSkge1xuICAgICAgcmV0dXJuICdNdXN0IG5vdCBjYXVzZSB0d28gYmluZGluZyBwYXRocyB0byBjb2xsaWRlJztcbiAgICB9XG5cbiAgICAvLyBJZiBhbGwgY2hlY2tzIHBhc3NcbiAgICByZXR1cm4gbnVsbDtcbiAgfSwgW2ZpZWxkLCBpc1JlcGVhdGluZywgcGF0aFJlZ2lzdHJ5XSk7XG4gIGNvbnN0IHRvb2x0aXAgPSBpc1JlcGVhdGluZyA/ICdSb3V0ZXMgdGhlIGNoaWxkcmVuIG9mIHRoaXMgY29tcG9uZW50IGludG8gYSBmb3JtIHZhcmlhYmxlLCBtYXkgYmUgbGVmdCBlbXB0eSB0byByb3V0ZSBhdCB0aGUgcm9vdCBsZXZlbC4nIDogJ1JvdXRlcyB0aGUgY2hpbGRyZW4gb2YgdGhpcyBjb21wb25lbnQgaW50byBhIGZvcm0gdmFyaWFibGUuJztcbiAgcmV0dXJuIFRleHRmaWVsZEVudHJ5KHtcbiAgICBkZWJvdW5jZSxcbiAgICBkZXNjcmlwdGlvbjogJ1doZXJlIHRoZSBjaGlsZCB2YXJpYWJsZXMgb2YgdGhpcyBjb21wb25lbnQgYXJlIHBhdGhlZCB0by4nLFxuICAgIGVsZW1lbnQ6IGZpZWxkLFxuICAgIGdldFZhbHVlLFxuICAgIGlkLFxuICAgIGxhYmVsOiAnUGF0aCcsXG4gICAgdG9vbHRpcCxcbiAgICBzZXRWYWx1ZSxcbiAgICB2YWxpZGF0ZVxuICB9KTtcbn1cblxuZnVuY3Rpb24gc2ltcGxlQm9vbEVudHJ5RmFjdG9yeShvcHRpb25zKSB7XG4gIGNvbnN0IHtcbiAgICBpZCxcbiAgICBsYWJlbCxcbiAgICBkZXNjcmlwdGlvbixcbiAgICBwYXRoLFxuICAgIHByb3BzLFxuICAgIGdldFZhbHVlLFxuICAgIHNldFZhbHVlLFxuICAgIGlzRGVmYXVsdFZpc2libGUsXG4gICAgaXNUcnVlRGVmYXVsdCA9IGZhbHNlXG4gIH0gPSBvcHRpb25zO1xuICBjb25zdCB7XG4gICAgZWRpdEZpZWxkLFxuICAgIGZpZWxkXG4gIH0gPSBwcm9wcztcbiAgcmV0dXJuIHtcbiAgICBpZCxcbiAgICBsYWJlbCxcbiAgICBwYXRoLFxuICAgIGZpZWxkLFxuICAgIGVkaXRGaWVsZCxcbiAgICBkZXNjcmlwdGlvbixcbiAgICBjb21wb25lbnQ6IFNpbXBsZUJvb2xDb21wb25lbnQsXG4gICAgaXNFZGl0ZWQ6IGlzVHJ1ZURlZmF1bHQgPyBpc1RydWVEZWZhdWx0VG9nZ2xlU3dpdGNoRW50cnlFZGl0ZWQgOiBpc0VkaXRlZCQ3LFxuICAgIGlzRGVmYXVsdFZpc2libGUsXG4gICAgZ2V0VmFsdWUsXG4gICAgc2V0VmFsdWVcbiAgfTtcbn1cbmNvbnN0IFNpbXBsZUJvb2xDb21wb25lbnQgPSBwcm9wcyA9PiB7XG4gIGNvbnN0IHtcbiAgICBpZCxcbiAgICBsYWJlbCxcbiAgICBwYXRoLFxuICAgIGZpZWxkLFxuICAgIGVkaXRGaWVsZCxcbiAgICBnZXRWYWx1ZSA9ICgpID0+IGdldChmaWVsZCwgcGF0aCwgJycpLFxuICAgIHNldFZhbHVlID0gdmFsdWUgPT4gZWRpdEZpZWxkKGZpZWxkLCBwYXRoLCB2YWx1ZSB8fCBmYWxzZSksXG4gICAgZGVzY3JpcHRpb25cbiAgfSA9IHByb3BzO1xuICByZXR1cm4gVG9nZ2xlU3dpdGNoRW50cnkoe1xuICAgIGVsZW1lbnQ6IGZpZWxkLFxuICAgIGdldFZhbHVlLFxuICAgIGlkLFxuICAgIGxhYmVsLFxuICAgIHNldFZhbHVlLFxuICAgIGlubGluZTogdHJ1ZSxcbiAgICBkZXNjcmlwdGlvblxuICB9KTtcbn07XG5cbmZ1bmN0aW9uIHNpbXBsZVNlbGVjdEVudHJ5RmFjdG9yeShvcHRpb25zKSB7XG4gIGNvbnN0IHtcbiAgICBpZCxcbiAgICBsYWJlbCxcbiAgICBwYXRoLFxuICAgIHByb3BzLFxuICAgIG9wdGlvbnNBcnJheVxuICB9ID0gb3B0aW9ucztcbiAgY29uc3Qge1xuICAgIGVkaXRGaWVsZCxcbiAgICBmaWVsZFxuICB9ID0gcHJvcHM7XG4gIHJldHVybiB7XG4gICAgaWQsXG4gICAgbGFiZWwsXG4gICAgcGF0aCxcbiAgICBmaWVsZCxcbiAgICBlZGl0RmllbGQsXG4gICAgb3B0aW9uc0FycmF5LFxuICAgIGNvbXBvbmVudDogU2ltcGxlU2VsZWN0Q29tcG9uZW50LFxuICAgIGlzRWRpdGVkOiBpc0VkaXRlZCQzXG4gIH07XG59XG5jb25zdCBTaW1wbGVTZWxlY3RDb21wb25lbnQgPSBwcm9wcyA9PiB7XG4gIGNvbnN0IHtcbiAgICBpZCxcbiAgICBsYWJlbCxcbiAgICBwYXRoLFxuICAgIGZpZWxkLFxuICAgIGVkaXRGaWVsZCxcbiAgICBvcHRpb25zQXJyYXlcbiAgfSA9IHByb3BzO1xuICBjb25zdCBnZXRWYWx1ZSA9ICgpID0+IGdldChmaWVsZCwgcGF0aCwgJycpO1xuICBjb25zdCBzZXRWYWx1ZSA9IHZhbHVlID0+IGVkaXRGaWVsZChmaWVsZCwgcGF0aCwgdmFsdWUpO1xuICBjb25zdCBnZXRPcHRpb25zID0gKCkgPT4gb3B0aW9uc0FycmF5O1xuICByZXR1cm4gU2VsZWN0RW50cnkoe1xuICAgIGxhYmVsLFxuICAgIGVsZW1lbnQ6IGZpZWxkLFxuICAgIGdldE9wdGlvbnMsXG4gICAgZ2V0VmFsdWUsXG4gICAgaWQsXG4gICAgc2V0VmFsdWVcbiAgfSk7XG59O1xuXG5mdW5jdGlvbiBzaW1wbGVSYW5nZUludGVnZXJFbnRyeUZhY3Rvcnkob3B0aW9ucykge1xuICBjb25zdCB7XG4gICAgaWQsXG4gICAgbGFiZWwsXG4gICAgcGF0aCxcbiAgICBwcm9wcyxcbiAgICBtaW4sXG4gICAgbWF4XG4gIH0gPSBvcHRpb25zO1xuICBjb25zdCB7XG4gICAgZWRpdEZpZWxkLFxuICAgIGZpZWxkXG4gIH0gPSBwcm9wcztcbiAgcmV0dXJuIHtcbiAgICBpZCxcbiAgICBsYWJlbCxcbiAgICBwYXRoLFxuICAgIGZpZWxkLFxuICAgIGVkaXRGaWVsZCxcbiAgICBtaW4sXG4gICAgbWF4LFxuICAgIGNvbXBvbmVudDogU2ltcGxlUmFuZ2VJbnRlZ2VyRW50cnksXG4gICAgaXNFZGl0ZWQ6IGlzRWRpdGVkXG4gIH07XG59XG5jb25zdCBTaW1wbGVSYW5nZUludGVnZXJFbnRyeSA9IHByb3BzID0+IHtcbiAgY29uc3Qge1xuICAgIGlkLFxuICAgIGxhYmVsLFxuICAgIHBhdGgsXG4gICAgZmllbGQsXG4gICAgZWRpdEZpZWxkLFxuICAgIG1pbiA9IE51bWJlci5NSU5fU0FGRV9JTlRFR0VSLFxuICAgIG1heCA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSXG4gIH0gPSBwcm9wcztcbiAgY29uc3QgZGVib3VuY2UgPSB1c2VTZXJ2aWNlKCdkZWJvdW5jZScpO1xuICBjb25zdCBnZXRWYWx1ZSA9ICgpID0+IHtcbiAgICBjb25zdCB2YWx1ZSA9IGdldChmaWVsZCwgcGF0aCk7XG4gICAgY29uc3QgaXNWYWxpZCA9IGlzVmFsaWROdW1iZXIodmFsdWUpICYmIE51bWJlci5pc0ludGVnZXIodmFsdWUpO1xuICAgIHJldHVybiBpc1ZhbGlkID8gdmFsdWUgOiBudWxsO1xuICB9O1xuICBjb25zdCBzZXRWYWx1ZSA9ICh2YWx1ZSwgZXJyb3IpID0+IHtcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZWRpdEZpZWxkKGZpZWxkLCBwYXRoLCBOdW1iZXIodmFsdWUpKTtcbiAgfTtcbiAgY29uc3QgdmFsaWRhdGUgPSB1c2VDYWxsYmFjayh2YWx1ZSA9PiB7XG4gICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQgfHwgdmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09ICcnKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghTnVtYmVyLmlzSW50ZWdlcihOdW1iZXIodmFsdWUpKSkge1xuICAgICAgcmV0dXJuICdTaG91bGQgYmUgYW4gaW50ZWdlci4nO1xuICAgIH1cbiAgICBpZiAoQmlnKHZhbHVlKS5jbXAobWluKSA8IDApIHtcbiAgICAgIHJldHVybiBgU2hvdWxkIGJlIGF0IGxlYXN0ICR7bWlufS5gO1xuICAgIH1cbiAgICBpZiAoQmlnKHZhbHVlKS5jbXAobWF4KSA+IDApIHtcbiAgICAgIHJldHVybiBgU2hvdWxkIGJlIGF0IG1vc3QgJHttYXh9LmA7XG4gICAgfVxuICB9LCBbbWluLCBtYXhdKTtcbiAgcmV0dXJuIFRleHRmaWVsZEVudHJ5KHtcbiAgICBkZWJvdW5jZSxcbiAgICBsYWJlbCxcbiAgICBlbGVtZW50OiBmaWVsZCxcbiAgICBnZXRWYWx1ZSxcbiAgICBpZCxcbiAgICBzZXRWYWx1ZSxcbiAgICB2YWxpZGF0ZVxuICB9KTtcbn07XG5cbmZ1bmN0aW9uIEdyb3VwQXBwZWFyYW5jZUVudHJ5KHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBmaWVsZFxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IHtcbiAgICB0eXBlXG4gIH0gPSBmaWVsZDtcbiAgaWYgKCFbJ2dyb3VwJywgJ2R5bmFtaWNsaXN0J10uaW5jbHVkZXModHlwZSkpIHtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgY29uc3QgZW50cmllcyA9IFtzaW1wbGVCb29sRW50cnlGYWN0b3J5KHtcbiAgICBpZDogJ3Nob3dPdXRsaW5lJyxcbiAgICBwYXRoOiBbJ3Nob3dPdXRsaW5lJ10sXG4gICAgbGFiZWw6ICdTaG93IG91dGxpbmUnLFxuICAgIGlzVHJ1ZURlZmF1bHQ6IHRydWUsXG4gICAgcHJvcHNcbiAgfSldO1xuICByZXR1cm4gZW50cmllcztcbn1cblxuZnVuY3Rpb24gTGFiZWxFbnRyeShwcm9wcykge1xuICBjb25zdCB7XG4gICAgZmllbGQsXG4gICAgZWRpdEZpZWxkXG4gIH0gPSBwcm9wcztcbiAgY29uc3QgZW50cmllcyA9IFtdO1xuICBlbnRyaWVzLnB1c2goe1xuICAgIGlkOiAnZGF0ZS1sYWJlbCcsXG4gICAgY29tcG9uZW50OiBEYXRlTGFiZWwsXG4gICAgZWRpdEZpZWxkLFxuICAgIGZpZWxkLFxuICAgIGlzRWRpdGVkOiBpc0VkaXRlZCQ1LFxuICAgIGlzRGVmYXVsdFZpc2libGU6IGZ1bmN0aW9uIChmaWVsZCkge1xuICAgICAgcmV0dXJuIGZpZWxkLnR5cGUgPT09ICdkYXRldGltZScgJiYgKGZpZWxkLnN1YnR5cGUgPT09IERBVEVUSU1FX1NVQlRZUEVTLkRBVEUgfHwgZmllbGQuc3VidHlwZSA9PT0gREFURVRJTUVfU1VCVFlQRVMuREFURVRJTUUpO1xuICAgIH1cbiAgfSk7XG4gIGVudHJpZXMucHVzaCh7XG4gICAgaWQ6ICd0aW1lLWxhYmVsJyxcbiAgICBjb21wb25lbnQ6IFRpbWVMYWJlbCxcbiAgICBlZGl0RmllbGQsXG4gICAgZmllbGQsXG4gICAgaXNFZGl0ZWQ6IGlzRWRpdGVkJDUsXG4gICAgaXNEZWZhdWx0VmlzaWJsZTogZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICByZXR1cm4gZmllbGQudHlwZSA9PT0gJ2RhdGV0aW1lJyAmJiAoZmllbGQuc3VidHlwZSA9PT0gREFURVRJTUVfU1VCVFlQRVMuVElNRSB8fCBmaWVsZC5zdWJ0eXBlID09PSBEQVRFVElNRV9TVUJUWVBFUy5EQVRFVElNRSk7XG4gICAgfVxuICB9KTtcbiAgY29uc3QgaXNTaW1wbHlMYWJlbGVkID0gZmllbGQgPT4ge1xuICAgIHJldHVybiBbLi4uSU5QVVRTLmZpbHRlcihpbnB1dCA9PiBpbnB1dCAhPT0gJ2RhdGV0aW1lJyksIC4uLkxBQkVMRURfTk9OX0lOUFVUU10uaW5jbHVkZXMoZmllbGQudHlwZSk7XG4gIH07XG4gIGVudHJpZXMucHVzaCh7XG4gICAgaWQ6ICdsYWJlbCcsXG4gICAgY29tcG9uZW50OiBMYWJlbCQyLFxuICAgIGVkaXRGaWVsZCxcbiAgICBmaWVsZCxcbiAgICBpc0VkaXRlZDogaXNFZGl0ZWQkNSxcbiAgICBpc0RlZmF1bHRWaXNpYmxlOiBpc1NpbXBseUxhYmVsZWRcbiAgfSk7XG4gIHJldHVybiBlbnRyaWVzO1xufVxuZnVuY3Rpb24gTGFiZWwkMihwcm9wcykge1xuICBjb25zdCB7XG4gICAgZWRpdEZpZWxkLFxuICAgIGZpZWxkLFxuICAgIGlkXG4gIH0gPSBwcm9wcztcbiAgY29uc3QgZGVib3VuY2UgPSB1c2VTZXJ2aWNlKCdkZWJvdW5jZScpO1xuICBjb25zdCB2YXJpYWJsZXMgPSB1c2VWYXJpYWJsZXMoKS5tYXAobmFtZSA9PiAoe1xuICAgIG5hbWVcbiAgfSkpO1xuICBjb25zdCBwYXRoID0gWydsYWJlbCddO1xuICBjb25zdCBnZXRWYWx1ZSA9ICgpID0+IHtcbiAgICByZXR1cm4gZ2V0KGZpZWxkLCBwYXRoLCAnJyk7XG4gIH07XG4gIGNvbnN0IHNldFZhbHVlID0gdmFsdWUgPT4ge1xuICAgIHJldHVybiBlZGl0RmllbGQoZmllbGQsIHBhdGgsIHZhbHVlIHx8ICcnKTtcbiAgfTtcbiAgY29uc3QgbGFiZWwgPSBnZXRMYWJlbFRleHQoZmllbGQudHlwZSk7XG4gIHJldHVybiBGZWVsVGVtcGxhdGluZ0VudHJ5KHtcbiAgICBkZWJvdW5jZSxcbiAgICBlbGVtZW50OiBmaWVsZCxcbiAgICBnZXRWYWx1ZSxcbiAgICBpZCxcbiAgICBsYWJlbCxcbiAgICBzaW5nbGVMaW5lOiB0cnVlLFxuICAgIHNldFZhbHVlLFxuICAgIHZhcmlhYmxlc1xuICB9KTtcbn1cbmZ1bmN0aW9uIERhdGVMYWJlbChwcm9wcykge1xuICBjb25zdCB7XG4gICAgZWRpdEZpZWxkLFxuICAgIGZpZWxkLFxuICAgIGlkXG4gIH0gPSBwcm9wcztcbiAgY29uc3QgZGVib3VuY2UgPSB1c2VTZXJ2aWNlKCdkZWJvdW5jZScpO1xuICBjb25zdCB2YXJpYWJsZXMgPSB1c2VWYXJpYWJsZXMoKS5tYXAobmFtZSA9PiAoe1xuICAgIG5hbWVcbiAgfSkpO1xuICBjb25zdCBwYXRoID0gREFURV9MQUJFTF9QQVRIO1xuICBjb25zdCBnZXRWYWx1ZSA9ICgpID0+IHtcbiAgICByZXR1cm4gZ2V0KGZpZWxkLCBwYXRoLCAnJyk7XG4gIH07XG4gIGNvbnN0IHNldFZhbHVlID0gdmFsdWUgPT4ge1xuICAgIHJldHVybiBlZGl0RmllbGQoZmllbGQsIHBhdGgsIHZhbHVlIHx8ICcnKTtcbiAgfTtcbiAgcmV0dXJuIEZlZWxUZW1wbGF0aW5nRW50cnkoe1xuICAgIGRlYm91bmNlLFxuICAgIGVsZW1lbnQ6IGZpZWxkLFxuICAgIGdldFZhbHVlLFxuICAgIGlkLFxuICAgIGxhYmVsOiAnRGF0ZSBsYWJlbCcsXG4gICAgc2luZ2xlTGluZTogdHJ1ZSxcbiAgICBzZXRWYWx1ZSxcbiAgICB2YXJpYWJsZXNcbiAgfSk7XG59XG5mdW5jdGlvbiBUaW1lTGFiZWwocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGVkaXRGaWVsZCxcbiAgICBmaWVsZCxcbiAgICBpZFxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IGRlYm91bmNlID0gdXNlU2VydmljZSgnZGVib3VuY2UnKTtcbiAgY29uc3QgdmFyaWFibGVzID0gdXNlVmFyaWFibGVzKCkubWFwKG5hbWUgPT4gKHtcbiAgICBuYW1lXG4gIH0pKTtcbiAgY29uc3QgcGF0aCA9IFRJTUVfTEFCRUxfUEFUSDtcbiAgY29uc3QgZ2V0VmFsdWUgPSAoKSA9PiB7XG4gICAgcmV0dXJuIGdldChmaWVsZCwgcGF0aCwgJycpO1xuICB9O1xuICBjb25zdCBzZXRWYWx1ZSA9IHZhbHVlID0+IHtcbiAgICByZXR1cm4gZWRpdEZpZWxkKGZpZWxkLCBwYXRoLCB2YWx1ZSB8fCAnJyk7XG4gIH07XG4gIHJldHVybiBGZWVsVGVtcGxhdGluZ0VudHJ5KHtcbiAgICBkZWJvdW5jZSxcbiAgICBlbGVtZW50OiBmaWVsZCxcbiAgICBnZXRWYWx1ZSxcbiAgICBpZCxcbiAgICBsYWJlbDogJ1RpbWUgbGFiZWwnLFxuICAgIHNpbmdsZUxpbmU6IHRydWUsXG4gICAgc2V0VmFsdWUsXG4gICAgdmFyaWFibGVzXG4gIH0pO1xufVxuXG4vLyBoZWxwZXJzIC8vLy8vLy8vLy9cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gdHlwZVxuICogQHJldHVybnMge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gZ2V0TGFiZWxUZXh0KHR5cGUpIHtcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSAnZ3JvdXAnOlxuICAgIGNhc2UgJ2R5bmFtaWNsaXN0JzpcbiAgICAgIHJldHVybiAnR3JvdXAgbGFiZWwnO1xuICAgIGNhc2UgJ3RhYmxlJzpcbiAgICAgIHJldHVybiAnVGFibGUgbGFiZWwnO1xuICAgIGNhc2UgJ2lmcmFtZSc6XG4gICAgY2FzZSAnZG9jdW1lbnRQcmV2aWV3JzpcbiAgICAgIHJldHVybiAnVGl0bGUnO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gJ0ZpZWxkIGxhYmVsJztcbiAgfVxufVxuXG5mdW5jdGlvbiBIZWlnaHRFbnRyeShwcm9wcykge1xuICBjb25zdCB7XG4gICAgZWRpdEZpZWxkLFxuICAgIGZpZWxkLFxuICAgIGlkLFxuICAgIGRlc2NyaXB0aW9uLFxuICAgIGlzRGVmYXVsdFZpc2libGUsXG4gICAgZGVmYXVsdFZhbHVlXG4gIH0gPSBwcm9wcztcbiAgY29uc3QgZW50cmllcyA9IFtdO1xuICBlbnRyaWVzLnB1c2goe1xuICAgIGlkOiBpZCArICctaGVpZ2h0JyxcbiAgICBjb21wb25lbnQ6IEhlaWdodCxcbiAgICBkZXNjcmlwdGlvbixcbiAgICBpc0VkaXRlZDogaXNFZGl0ZWQkNixcbiAgICBlZGl0RmllbGQsXG4gICAgZmllbGQsXG4gICAgZGVmYXVsdFZhbHVlLFxuICAgIGlzRGVmYXVsdFZpc2libGU6IGZpZWxkID0+IHtcbiAgICAgIGlmIChpc0Z1bmN0aW9uKGlzRGVmYXVsdFZpc2libGUpKSB7XG4gICAgICAgIHJldHVybiBpc0RlZmF1bHRWaXNpYmxlKGZpZWxkKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmaWVsZC50eXBlID09PSAnc3BhY2VyJztcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gZW50cmllcztcbn1cbmZ1bmN0aW9uIEhlaWdodChwcm9wcykge1xuICBjb25zdCB7XG4gICAgZGVzY3JpcHRpb24sXG4gICAgZWRpdEZpZWxkLFxuICAgIGZpZWxkLFxuICAgIGlkXG4gIH0gPSBwcm9wcztcbiAgY29uc3QgZGVib3VuY2UgPSB1c2VTZXJ2aWNlKCdkZWJvdW5jZScpO1xuICBjb25zdCBnZXRWYWx1ZSA9IGUgPT4gZ2V0KGZpZWxkLCBbJ2hlaWdodCddLCBudWxsKTtcbiAgY29uc3Qgc2V0VmFsdWUgPSAodmFsdWUsIGVycm9yKSA9PiB7XG4gICAgaWYgKGVycm9yKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGVkaXRGaWVsZChmaWVsZCwgWydoZWlnaHQnXSwgdmFsdWUpO1xuICB9O1xuICByZXR1cm4gTnVtYmVyRmllbGRFbnRyeSh7XG4gICAgZGVib3VuY2UsXG4gICAgZGVzY3JpcHRpb24sXG4gICAgbGFiZWw6ICdIZWlnaHQnLFxuICAgIGVsZW1lbnQ6IGZpZWxkLFxuICAgIGlkLFxuICAgIGdldFZhbHVlLFxuICAgIHNldFZhbHVlLFxuICAgIHZhbGlkYXRlOiB2YWxpZGF0ZSQ5XG4gIH0pO1xufVxuXG4vLyBoZWxwZXJzIC8vLy8vLy8vLy9cblxuLyoqXG4gKiBAcGFyYW0ge251bWJlcnx2b2lkfSB2YWx1ZVxuICogQHJldHVybnMge3N0cmluZ3xudWxsfVxuICovXG5jb25zdCB2YWxpZGF0ZSQ5ID0gdmFsdWUgPT4ge1xuICBpZiAodHlwZW9mIHZhbHVlICE9PSAnbnVtYmVyJykge1xuICAgIHJldHVybiAnQSBudW1iZXIgaXMgcmVxdWlyZWQuJztcbiAgfVxuICBpZiAoIU51bWJlci5pc0ludGVnZXIodmFsdWUpKSB7XG4gICAgcmV0dXJuICdTaG91bGQgYmUgYW4gaW50ZWdlci4nO1xuICB9XG4gIGlmICh2YWx1ZSA8IDEpIHtcbiAgICByZXR1cm4gJ1Nob3VsZCBiZSBncmVhdGVyIHRoYW4gemVyby4nO1xuICB9XG59O1xuXG5mdW5jdGlvbiBJRnJhbWVIZWlnaHRFbnRyeShwcm9wcykge1xuICByZXR1cm4gWy4uLkhlaWdodEVudHJ5KHtcbiAgICAuLi5wcm9wcyxcbiAgICBkZXNjcmlwdGlvbjogJ0hlaWdodCBvZiB0aGUgY29udGFpbmVyIGluIHBpeGVscy4nLFxuICAgIGlzRGVmYXVsdFZpc2libGU6IGZpZWxkID0+IGZpZWxkLnR5cGUgPT09ICdpZnJhbWUnXG4gIH0pXTtcbn1cblxuY29uc3QgSFRUUFNfUEFUVEVSTiA9IC9eKGh0dHBzKTpcXC9cXC8qL2k7XG5mdW5jdGlvbiBJRnJhbWVVcmxFbnRyeShwcm9wcykge1xuICBjb25zdCB7XG4gICAgZWRpdEZpZWxkLFxuICAgIGZpZWxkXG4gIH0gPSBwcm9wcztcbiAgY29uc3QgZW50cmllcyA9IFtdO1xuICBlbnRyaWVzLnB1c2goe1xuICAgIGlkOiAndXJsJyxcbiAgICBjb21wb25lbnQ6IFVybCxcbiAgICBlZGl0RmllbGQ6IGVkaXRGaWVsZCxcbiAgICBmaWVsZDogZmllbGQsXG4gICAgaXNFZGl0ZWQ6IGlzRWRpdGVkJDUsXG4gICAgaXNEZWZhdWx0VmlzaWJsZTogZmllbGQgPT4gZmllbGQudHlwZSA9PT0gJ2lmcmFtZSdcbiAgfSk7XG4gIHJldHVybiBlbnRyaWVzO1xufVxuZnVuY3Rpb24gVXJsKHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBlZGl0RmllbGQsXG4gICAgZmllbGQsXG4gICAgaWRcbiAgfSA9IHByb3BzO1xuICBjb25zdCBkZWJvdW5jZSA9IHVzZVNlcnZpY2UoJ2RlYm91bmNlJyk7XG4gIGNvbnN0IHZhcmlhYmxlcyA9IHVzZVZhcmlhYmxlcygpLm1hcChuYW1lID0+ICh7XG4gICAgbmFtZVxuICB9KSk7XG4gIGNvbnN0IHBhdGggPSBbJ3VybCddO1xuICBjb25zdCBnZXRWYWx1ZSA9ICgpID0+IHtcbiAgICByZXR1cm4gZ2V0KGZpZWxkLCBwYXRoLCAnJyk7XG4gIH07XG4gIGNvbnN0IHNldFZhbHVlID0gdmFsdWUgPT4ge1xuICAgIHJldHVybiBlZGl0RmllbGQoZmllbGQsIHBhdGgsIHZhbHVlKTtcbiAgfTtcbiAgcmV0dXJuIEZlZWxUZW1wbGF0aW5nRW50cnkoe1xuICAgIGRlYm91bmNlLFxuICAgIGVsZW1lbnQ6IGZpZWxkLFxuICAgIGZlZWw6ICdvcHRpb25hbCcsXG4gICAgZ2V0VmFsdWUsXG4gICAgaWQsXG4gICAgbGFiZWw6ICdVUkwnLFxuICAgIHNldFZhbHVlLFxuICAgIHNpbmdsZUxpbmU6IHRydWUsXG4gICAgdG9vbHRpcDogZ2V0VG9vbHRpcCQxKCksXG4gICAgdmFsaWRhdGU6IHZhbGlkYXRlJDgsXG4gICAgdmFyaWFibGVzXG4gIH0pO1xufVxuXG4vLyBoZWxwZXIgLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG5mdW5jdGlvbiBnZXRUb29sdGlwJDEoKSB7XG4gIHJldHVybiBqc3hzKEZyYWdtZW50JDEsIHtcbiAgICBjaGlsZHJlbjogW2pzeChcInBcIiwge1xuICAgICAgY2hpbGRyZW46IFwiRW50ZXIgYSBIVFRQUyBVUkwgdG8gYSBzb3VyY2Ugb3IgcG9wdWxhdGUgaXQgZHluYW1pY2FsbHkgdmlhIGEgdGVtcGxhdGUgb3IgYW4gZXhwcmVzc2lvbiAoZS5nLiwgdG8gcGFzcyBhIHZhbHVlIGZyb20gdGhlIHZhcmlhYmxlKS5cIlxuICAgIH0pLCBqc3goXCJwXCIsIHtcbiAgICAgIGNoaWxkcmVuOiBcIlBsZWFzZSBtYWtlIHN1cmUgdGhhdCB0aGUgVVJMIGlzIHNhZmUgYXMgaXQgbWlnaHQgaW1wb3NlIHNlY3VyaXR5IHJpc2tzLlwiXG4gICAgfSksIGpzeHMoXCJwXCIsIHtcbiAgICAgIGNoaWxkcmVuOiBbXCJOb3QgYWxsIGV4dGVybmFsIHNvdXJjZXMgY2FuIGJlIGRpc3BsYXllZCBpbiB0aGUgaUZyYW1lLiBSZWFkIG1vcmUgYWJvdXQgaXQgaW4gdGhlXCIsICcgJywganN4KFwiYVwiLCB7XG4gICAgICAgIHRhcmdldDogXCJfYmxhbmtcIixcbiAgICAgICAgaHJlZjogXCJodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVFRQL0hlYWRlcnMvWC1GcmFtZS1PcHRpb25zXCIsXG4gICAgICAgIHJlbDogXCJub3JlZmVycmVyXCIsXG4gICAgICAgIGNoaWxkcmVuOiBcIlgtRlJBTUUtT1BUSU9OUyBkb2N1bWVudGF0aW9uXCJcbiAgICAgIH0pLCBcIi5cIl1cbiAgICB9KV1cbiAgfSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd8dm9pZH0gdmFsdWVcbiAqIEByZXR1cm5zIHtzdHJpbmd8bnVsbH1cbiAqL1xuY29uc3QgdmFsaWRhdGUkOCA9IHZhbHVlID0+IHtcbiAgaWYgKCF2YWx1ZSB8fCB2YWx1ZS5zdGFydHNXaXRoKCc9JykpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKCFIVFRQU19QQVRURVJOLnRlc3QodmFsdWUpKSB7XG4gICAgcmV0dXJuICdGb3Igc2VjdXJpdHkgcmVhc29ucyB0aGUgVVJMIG11c3Qgc3RhcnQgd2l0aCBcImh0dHBzXCIuJztcbiAgfVxufTtcblxuZnVuY3Rpb24gSW1hZ2VTb3VyY2VFbnRyeShwcm9wcykge1xuICBjb25zdCB7XG4gICAgZWRpdEZpZWxkLFxuICAgIGZpZWxkXG4gIH0gPSBwcm9wcztcbiAgY29uc3QgZW50cmllcyA9IFtdO1xuICBlbnRyaWVzLnB1c2goe1xuICAgIGlkOiAnc291cmNlJyxcbiAgICBjb21wb25lbnQ6IFNvdXJjZSQxLFxuICAgIGVkaXRGaWVsZDogZWRpdEZpZWxkLFxuICAgIGZpZWxkOiBmaWVsZCxcbiAgICBpc0VkaXRlZDogaXNFZGl0ZWQkNSxcbiAgICBpc0RlZmF1bHRWaXNpYmxlOiBmaWVsZCA9PiBmaWVsZC50eXBlID09PSAnaW1hZ2UnXG4gIH0pO1xuICByZXR1cm4gZW50cmllcztcbn1cbmZ1bmN0aW9uIFNvdXJjZSQxKHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBlZGl0RmllbGQsXG4gICAgZmllbGQsXG4gICAgaWRcbiAgfSA9IHByb3BzO1xuICBjb25zdCBkZWJvdW5jZSA9IHVzZVNlcnZpY2UoJ2RlYm91bmNlJyk7XG4gIGNvbnN0IHZhcmlhYmxlcyA9IHVzZVZhcmlhYmxlcygpLm1hcChuYW1lID0+ICh7XG4gICAgbmFtZVxuICB9KSk7XG4gIGNvbnN0IHBhdGggPSBbJ3NvdXJjZSddO1xuICBjb25zdCBnZXRWYWx1ZSA9ICgpID0+IHtcbiAgICByZXR1cm4gZ2V0KGZpZWxkLCBwYXRoLCAnJyk7XG4gIH07XG4gIGNvbnN0IHNldFZhbHVlID0gdmFsdWUgPT4ge1xuICAgIHJldHVybiBlZGl0RmllbGQoZmllbGQsIHBhdGgsIHZhbHVlKTtcbiAgfTtcbiAgcmV0dXJuIEZlZWxUZW1wbGF0aW5nRW50cnkoe1xuICAgIGRlYm91bmNlLFxuICAgIGRlc2NyaXB0aW9uOiAnRXhwcmVzc2lvbiBvciBzdGF0aWMgdmFsdWUgKGxpbmsvZGF0YSBVUkkpJyxcbiAgICBlbGVtZW50OiBmaWVsZCxcbiAgICBmZWVsOiAnb3B0aW9uYWwnLFxuICAgIGdldFZhbHVlLFxuICAgIGlkLFxuICAgIGxhYmVsOiAnSW1hZ2Ugc291cmNlJyxcbiAgICB0b29sdGlwOiAnTGluayByZWZlcnJpbmcgdG8gYSBob3N0ZWQgaW1hZ2UsIG9yIHVzZSBhIGRhdGEgVVJJIGRpcmVjdGx5IHRvIGVtYmVkIGltYWdlIGRhdGEgaW50byB0aGUgZm9ybS4nLFxuICAgIHNldFZhbHVlLFxuICAgIHNpbmdsZUxpbmU6IHRydWUsXG4gICAgdmFyaWFibGVzXG4gIH0pO1xufVxuXG5jb25zdCBpc1RleHRFZGl0ZWQgPSBpc0VkaXRlZEZyb21EZWZhdWx0RmFjdG9yeShURVhUX1ZJRVdfREVGQVVMVF9URVhULCBmYWxzZSk7XG5mdW5jdGlvbiBUZXh0RW50cnkocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGVkaXRGaWVsZCxcbiAgICBmaWVsZFxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IGVudHJpZXMgPSBbe1xuICAgIGlkOiAndGV4dCcsXG4gICAgY29tcG9uZW50OiBUZXh0LFxuICAgIGVkaXRGaWVsZDogZWRpdEZpZWxkLFxuICAgIGZpZWxkOiBmaWVsZCxcbiAgICBpc0VkaXRlZDogaXNUZXh0RWRpdGVkLFxuICAgIGlzRGVmYXVsdFZpc2libGU6IGZpZWxkID0+IGZpZWxkLnR5cGUgPT09ICd0ZXh0J1xuICB9XTtcbiAgcmV0dXJuIGVudHJpZXM7XG59XG5mdW5jdGlvbiBUZXh0KHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBlZGl0RmllbGQsXG4gICAgZmllbGQsXG4gICAgaWRcbiAgfSA9IHByb3BzO1xuICBjb25zdCBkZWJvdW5jZSA9IHVzZVNlcnZpY2UoJ2RlYm91bmNlJyk7XG4gIGNvbnN0IHZhcmlhYmxlcyA9IHVzZVZhcmlhYmxlcygpLm1hcChuYW1lID0+ICh7XG4gICAgbmFtZVxuICB9KSk7XG4gIGNvbnN0IHBhdGggPSBbJ3RleHQnXTtcbiAgY29uc3QgZ2V0VmFsdWUgPSAoKSA9PiB7XG4gICAgcmV0dXJuIGdldChmaWVsZCwgcGF0aCwgJycpO1xuICB9O1xuICBjb25zdCBzZXRWYWx1ZSA9IHZhbHVlID0+IHtcbiAgICByZXR1cm4gZWRpdEZpZWxkKGZpZWxkLCBwYXRoLCB2YWx1ZSB8fCAnJyk7XG4gIH07XG4gIHJldHVybiBGZWVsVGVtcGxhdGluZ0VudHJ5KHtcbiAgICBkZWJvdW5jZSxcbiAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24kMyxcbiAgICBlbGVtZW50OiBmaWVsZCxcbiAgICBnZXRWYWx1ZSxcbiAgICBpZCxcbiAgICBsYWJlbDogJ1RleHQnLFxuICAgIGhvc3RMYW5ndWFnZTogJ21hcmtkb3duJyxcbiAgICBzZXRWYWx1ZSxcbiAgICB2YXJpYWJsZXNcbiAgfSk7XG59XG5jb25zdCBkZXNjcmlwdGlvbiQzID0ganN4cyhGcmFnbWVudCQxLCB7XG4gIGNoaWxkcmVuOiBbXCJTdXBwb3J0cyBtYXJrZG93biBhbmQgdGVtcGxhdGluZy5cIiwgJyAnLCBqc3goXCJhXCIsIHtcbiAgICBocmVmOiBcImh0dHBzOi8vZG9jcy5jYW11bmRhLmlvL2RvY3MvY29tcG9uZW50cy9tb2RlbGVyL2Zvcm1zL2Zvcm0tZWxlbWVudC1saWJyYXJ5L2Zvcm1zLWVsZW1lbnQtbGlicmFyeS10ZXh0L1wiLFxuICAgIHRhcmdldDogXCJfYmxhbmtcIixcbiAgICByZWw6IFwibm9yZWZlcnJlclwiLFxuICAgIGNoaWxkcmVuOiBcIkxlYXJuIG1vcmVcIlxuICB9KV1cbn0pO1xuXG5mdW5jdGlvbiBIdG1sRW50cnkocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGVkaXRGaWVsZCxcbiAgICBmaWVsZFxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IGVudHJpZXMgPSBbe1xuICAgIGlkOiAnY29udGVudCcsXG4gICAgY29tcG9uZW50OiBDb250ZW50LFxuICAgIGVkaXRGaWVsZDogZWRpdEZpZWxkLFxuICAgIGZpZWxkOiBmaWVsZCxcbiAgICBpc0VkaXRlZDogaXNFZGl0ZWQkNSxcbiAgICBpc0RlZmF1bHRWaXNpYmxlOiBmaWVsZCA9PiBmaWVsZC50eXBlID09PSAnaHRtbCdcbiAgfV07XG4gIHJldHVybiBlbnRyaWVzO1xufVxuZnVuY3Rpb24gQ29udGVudChwcm9wcykge1xuICBjb25zdCB7XG4gICAgZWRpdEZpZWxkLFxuICAgIGZpZWxkLFxuICAgIGlkXG4gIH0gPSBwcm9wcztcbiAgY29uc3QgZGVib3VuY2UgPSB1c2VTZXJ2aWNlKCdkZWJvdW5jZScpO1xuICBjb25zdCB2YXJpYWJsZXMgPSB1c2VWYXJpYWJsZXMoKS5tYXAobmFtZSA9PiAoe1xuICAgIG5hbWVcbiAgfSkpO1xuICBjb25zdCBwYXRoID0gWydjb250ZW50J107XG4gIGNvbnN0IGdldFZhbHVlID0gKCkgPT4ge1xuICAgIHJldHVybiBnZXQoZmllbGQsIHBhdGgsICcnKTtcbiAgfTtcbiAgY29uc3Qgc2V0VmFsdWUgPSB2YWx1ZSA9PiB7XG4gICAgcmV0dXJuIGVkaXRGaWVsZChmaWVsZCwgcGF0aCwgdmFsdWUgfHwgJycpO1xuICB9O1xuICByZXR1cm4gRmVlbFRlbXBsYXRpbmdFbnRyeSh7XG4gICAgZGVib3VuY2UsXG4gICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uJDIsXG4gICAgZWxlbWVudDogZmllbGQsXG4gICAgZ2V0VmFsdWUsXG4gICAgaWQsXG4gICAgbGFiZWw6ICdDb250ZW50JyxcbiAgICBob3N0TGFuZ3VhZ2U6ICdodG1sJyxcbiAgICB2YWxpZGF0ZTogdmFsaWRhdGUkNyxcbiAgICBzZXRWYWx1ZSxcbiAgICB2YXJpYWJsZXNcbiAgfSk7XG59XG5cbi8vIGhlbHBlcnMgLy8vLy8vLy8vL1xuXG5jb25zdCBkZXNjcmlwdGlvbiQyID0ganN4cyhGcmFnbWVudCQxLCB7XG4gIGNoaWxkcmVuOiBbXCJTdXBwb3J0cyBIVE1MLCBzdHlsaW5nLCBhbmQgdGVtcGxhdGluZy4gU3R5bGVzIGFyZSBhdXRvbWF0aWNhbGx5IHNjb3BlZCB0byB0aGUgSFRNTCBjb21wb25lbnQuXCIsICcgJywganN4KFwiYVwiLCB7XG4gICAgaHJlZjogXCJodHRwczovL2RvY3MuY2FtdW5kYS5pby9kb2NzL2NvbXBvbmVudHMvbW9kZWxlci9mb3Jtcy9mb3JtLWVsZW1lbnQtbGlicmFyeS9mb3Jtcy1lbGVtZW50LWxpYnJhcnktaHRtbC9cIixcbiAgICB0YXJnZXQ6IFwiX2JsYW5rXCIsXG4gICAgcmVsOiBcIm5vcmVmZXJyZXJcIixcbiAgICBjaGlsZHJlbjogXCJMZWFybiBtb3JlXCJcbiAgfSldXG59KTtcblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ3x2b2lkfSB2YWx1ZVxuICogQHJldHVybnMge3N0cmluZ3xudWxsfVxuICovXG5jb25zdCB2YWxpZGF0ZSQ3ID0gdmFsdWUgPT4ge1xuICAvLyBhbGxvdyBlbXB0eSBzdGF0ZVxuICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJyB8fCB2YWx1ZSA9PT0gJycpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8vIGFsbG93IGV4cHJlc3Npb25zXG4gIGlmICh2YWx1ZS5zdGFydHNXaXRoKCc9JykpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufTtcblxuZnVuY3Rpb24gTnVtYmVyRW50cmllcyhwcm9wcykge1xuICBjb25zdCB7XG4gICAgZWRpdEZpZWxkLFxuICAgIGZpZWxkLFxuICAgIGlkXG4gIH0gPSBwcm9wcztcbiAgY29uc3QgZW50cmllcyA9IFtdO1xuICBlbnRyaWVzLnB1c2goe1xuICAgIGlkOiBpZCArICctZGVjaW1hbERpZ2l0cycsXG4gICAgY29tcG9uZW50OiBOdW1iZXJEZWNpbWFsRGlnaXRzLFxuICAgIGlzRWRpdGVkOiBpc0VkaXRlZCQ2LFxuICAgIGVkaXRGaWVsZCxcbiAgICBmaWVsZCxcbiAgICBpc0RlZmF1bHRWaXNpYmxlOiBmaWVsZCA9PiBmaWVsZC50eXBlID09PSAnbnVtYmVyJ1xuICB9KTtcbiAgZW50cmllcy5wdXNoKHtcbiAgICBpZDogaWQgKyAnLXN0ZXAnLFxuICAgIGNvbXBvbmVudDogTnVtYmVyQXJyb3dTdGVwLFxuICAgIGlzRWRpdGVkOiBpc0VkaXRlZCxcbiAgICBlZGl0RmllbGQsXG4gICAgZmllbGQsXG4gICAgaXNEZWZhdWx0VmlzaWJsZTogZmllbGQgPT4gZmllbGQudHlwZSA9PT0gJ251bWJlcidcbiAgfSk7XG4gIHJldHVybiBlbnRyaWVzO1xufVxuZnVuY3Rpb24gTnVtYmVyRGVjaW1hbERpZ2l0cyhwcm9wcykge1xuICBjb25zdCB7XG4gICAgZWRpdEZpZWxkLFxuICAgIGZpZWxkLFxuICAgIGlkXG4gIH0gPSBwcm9wcztcbiAgY29uc3QgZGVib3VuY2UgPSB1c2VTZXJ2aWNlKCdkZWJvdW5jZScpO1xuICBjb25zdCBnZXRWYWx1ZSA9IGUgPT4gZ2V0KGZpZWxkLCBbJ2RlY2ltYWxEaWdpdHMnXSk7XG4gIGNvbnN0IHNldFZhbHVlID0gKHZhbHVlLCBlcnJvcikgPT4ge1xuICAgIGlmIChlcnJvcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBlZGl0RmllbGQoZmllbGQsIFsnZGVjaW1hbERpZ2l0cyddLCB2YWx1ZSk7XG4gIH07XG4gIHJldHVybiBOdW1iZXJGaWVsZEVudHJ5KHtcbiAgICBkZWJvdW5jZSxcbiAgICBsYWJlbDogJ0RlY2ltYWwgZGlnaXRzJyxcbiAgICBlbGVtZW50OiBmaWVsZCxcbiAgICBzdGVwOiAnYW55JyxcbiAgICBnZXRWYWx1ZSxcbiAgICBpZCxcbiAgICBzZXRWYWx1ZSxcbiAgICB2YWxpZGF0ZTogdmFsaWRhdGVOdW1iZXJFbnRyaWVzXG4gIH0pO1xufVxuZnVuY3Rpb24gTnVtYmVyQXJyb3dTdGVwKHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBlZGl0RmllbGQsXG4gICAgZmllbGQsXG4gICAgaWRcbiAgfSA9IHByb3BzO1xuICBjb25zdCB7XG4gICAgZGVjaW1hbERpZ2l0c1xuICB9ID0gZmllbGQ7XG4gIGNvbnN0IGRlYm91bmNlID0gdXNlU2VydmljZSgnZGVib3VuY2UnKTtcbiAgY29uc3QgZ2V0VmFsdWUgPSBlID0+IHtcbiAgICBsZXQgdmFsdWUgPSBnZXQoZmllbGQsIFsnaW5jcmVtZW50J10pO1xuICAgIGlmICghaXNWYWxpZE51bWJlcih2YWx1ZSkpIHJldHVybiBudWxsO1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfTtcbiAgY29uc3QgY2xlYXJMZWFkaW5nWmVyb2VzID0gdmFsdWUgPT4ge1xuICAgIGlmICghdmFsdWUpIHJldHVybiB2YWx1ZTtcbiAgICBjb25zdCB0cmltbWVkID0gdmFsdWUucmVwbGFjZSgvXjArL2csICcnKTtcbiAgICByZXR1cm4gKHRyaW1tZWQuc3RhcnRzV2l0aCgnLicpID8gJzAnIDogJycpICsgdHJpbW1lZDtcbiAgfTtcbiAgY29uc3Qgc2V0VmFsdWUgPSAodmFsdWUsIGVycm9yKSA9PiB7XG4gICAgaWYgKGVycm9yKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGVkaXRGaWVsZChmaWVsZCwgWydpbmNyZW1lbnQnXSwgY2xlYXJMZWFkaW5nWmVyb2VzKHZhbHVlKSk7XG4gIH07XG4gIGNvbnN0IGRlY2ltYWxEaWdpdHNTZXQgPSBkZWNpbWFsRGlnaXRzIHx8IGRlY2ltYWxEaWdpdHMgPT09IDA7XG4gIGNvbnN0IHZhbGlkYXRlID0gdXNlQ2FsbGJhY2sodmFsdWUgPT4ge1xuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHZhbHVlID09PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghaXNWYWxpZE51bWJlcih2YWx1ZSkpIHtcbiAgICAgIHJldHVybiAnU2hvdWxkIGJlIGEgdmFsaWQgbnVtYmVyLic7XG4gICAgfVxuICAgIGlmIChCaWcodmFsdWUpLmNtcCgwKSA8PSAwKSB7XG4gICAgICByZXR1cm4gJ1Nob3VsZCBiZSBncmVhdGVyIHRoYW4gemVyby4nO1xuICAgIH1cbiAgICBpZiAoZGVjaW1hbERpZ2l0c1NldCkge1xuICAgICAgY29uc3QgbWluaW11bVZhbHVlID0gQmlnKGAxZS0ke2RlY2ltYWxEaWdpdHN9YCk7XG4gICAgICBpZiAoQmlnKHZhbHVlKS5jbXAobWluaW11bVZhbHVlKSA8IDApIHtcbiAgICAgICAgcmV0dXJuIGBTaG91bGQgYmUgYXQgbGVhc3QgJHttaW5pbXVtVmFsdWUudG9TdHJpbmcoKX0uYDtcbiAgICAgIH1cbiAgICAgIGlmIChjb3VudERlY2ltYWxzKHZhbHVlKSA+IGRlY2ltYWxEaWdpdHMpIHtcbiAgICAgICAgcmV0dXJuIGBTaG91bGQgbm90IGNvbnRhaW4gbW9yZSB0aGFuICR7ZGVjaW1hbERpZ2l0c30gZGVjaW1hbCBkaWdpdHMuYDtcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtkZWNpbWFsRGlnaXRzU2V0LCBkZWNpbWFsRGlnaXRzXSk7XG4gIHJldHVybiBUZXh0ZmllbGRFbnRyeSh7XG4gICAgZGVib3VuY2UsXG4gICAgbGFiZWw6ICdJbmNyZW1lbnQnLFxuICAgIGVsZW1lbnQ6IGZpZWxkLFxuICAgIGdldFZhbHVlLFxuICAgIGlkLFxuICAgIHNldFZhbHVlLFxuICAgIHZhbGlkYXRlXG4gIH0pO1xufVxuXG4vLyBoZWxwZXJzIC8vLy8vLy8vLy9cblxuLyoqXG4gKiBAcGFyYW0ge251bWJlcnx2b2lkfSB2YWx1ZVxuICogQHJldHVybnMge3N0cmluZ3x2b2lkfVxuICovXG5jb25zdCB2YWxpZGF0ZU51bWJlckVudHJpZXMgPSB2YWx1ZSA9PiB7XG4gIGlmICh0eXBlb2YgdmFsdWUgIT09ICdudW1iZXInKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmICghTnVtYmVyLmlzSW50ZWdlcih2YWx1ZSkpIHtcbiAgICByZXR1cm4gJ1Nob3VsZCBiZSBhbiBpbnRlZ2VyLic7XG4gIH1cbiAgaWYgKHZhbHVlIDwgMCkge1xuICAgIHJldHVybiAnU2hvdWxkIGJlIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byB6ZXJvLic7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIEV4cHJlc3Npb25GaWVsZEVudHJpZXMocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGVkaXRGaWVsZCxcbiAgICBmaWVsZCxcbiAgICBpZFxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IGVudHJpZXMgPSBbXTtcbiAgZW50cmllcy5wdXNoKHtcbiAgICBpZDogYCR7aWR9LWV4cHJlc3Npb25gLFxuICAgIGNvbXBvbmVudDogRXhwcmVzc2lvbkZpZWxkRXhwcmVzc2lvbixcbiAgICBpc0VkaXRlZDogaXNFZGl0ZWQkNSxcbiAgICBlZGl0RmllbGQsXG4gICAgZmllbGQsXG4gICAgaXNEZWZhdWx0VmlzaWJsZTogZmllbGQgPT4gZmllbGQudHlwZSA9PT0gJ2V4cHJlc3Npb24nXG4gIH0pO1xuICBlbnRyaWVzLnB1c2goe1xuICAgIGlkOiBgJHtpZH0tY29tcHV0ZU9uYCxcbiAgICBjb21wb25lbnQ6IEV4cHJlc3Npb25GaWVsZENvbXB1dGVPbixcbiAgICBpc0VkaXRlZDogaXNFZGl0ZWQkMyxcbiAgICBlZGl0RmllbGQsXG4gICAgZmllbGQsXG4gICAgaXNEZWZhdWx0VmlzaWJsZTogZmllbGQgPT4gZmllbGQudHlwZSA9PT0gJ2V4cHJlc3Npb24nXG4gIH0pO1xuICByZXR1cm4gZW50cmllcztcbn1cbmZ1bmN0aW9uIEV4cHJlc3Npb25GaWVsZEV4cHJlc3Npb24ocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGVkaXRGaWVsZCxcbiAgICBmaWVsZCxcbiAgICBpZFxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IGRlYm91bmNlID0gdXNlU2VydmljZSgnZGVib3VuY2UnKTtcbiAgY29uc3QgdmFyaWFibGVzID0gdXNlVmFyaWFibGVzKCkubWFwKG5hbWUgPT4gKHtcbiAgICBuYW1lXG4gIH0pKTtcbiAgY29uc3QgZ2V0VmFsdWUgPSAoKSA9PiBmaWVsZC5leHByZXNzaW9uIHx8ICcnO1xuICBjb25zdCBzZXRWYWx1ZSA9IHZhbHVlID0+IHtcbiAgICBlZGl0RmllbGQoZmllbGQsIFsnZXhwcmVzc2lvbiddLCB2YWx1ZSk7XG4gIH07XG4gIHJldHVybiBGZWVsRW50cnkoe1xuICAgIGRlYm91bmNlLFxuICAgIGRlc2NyaXB0aW9uOiAnRGVmaW5lIGFuIGV4cHJlc3Npb24gdG8gY2FsY3VsYXRlIHRoZSB2YWx1ZSBvZiB0aGlzIGZpZWxkJyxcbiAgICBlbGVtZW50OiBmaWVsZCxcbiAgICBmZWVsOiAncmVxdWlyZWQnLFxuICAgIGdldFZhbHVlLFxuICAgIGlkLFxuICAgIGxhYmVsOiAnVGFyZ2V0IHZhbHVlJyxcbiAgICBzZXRWYWx1ZSxcbiAgICB2YXJpYWJsZXNcbiAgfSk7XG59XG5mdW5jdGlvbiBFeHByZXNzaW9uRmllbGRDb21wdXRlT24ocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGVkaXRGaWVsZCxcbiAgICBmaWVsZCxcbiAgICBpZFxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IGdldFZhbHVlID0gKCkgPT4gZmllbGQuY29tcHV0ZU9uIHx8ICcnO1xuICBjb25zdCBzZXRWYWx1ZSA9IHZhbHVlID0+IHtcbiAgICBlZGl0RmllbGQoZmllbGQsIFsnY29tcHV0ZU9uJ10sIHZhbHVlKTtcbiAgfTtcbiAgY29uc3QgZ2V0T3B0aW9ucyA9ICgpID0+IFt7XG4gICAgdmFsdWU6ICdjaGFuZ2UnLFxuICAgIGxhYmVsOiAnVmFsdWUgY2hhbmdlcydcbiAgfSwge1xuICAgIHZhbHVlOiAncHJlc3VibWl0JyxcbiAgICBsYWJlbDogJ0Zvcm0gc3VibWlzc2lvbidcbiAgfV07XG4gIHJldHVybiBTZWxlY3RFbnRyeSh7XG4gICAgaWQsXG4gICAgbGFiZWw6ICdDb21wdXRlIG9uJyxcbiAgICBnZXRWYWx1ZSxcbiAgICBzZXRWYWx1ZSxcbiAgICBnZXRPcHRpb25zXG4gIH0pO1xufVxuXG5mdW5jdGlvbiBOdW1iZXJTZXJpYWxpemF0aW9uRW50cnkocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGVkaXRGaWVsZCxcbiAgICBmaWVsZFxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IGVudHJpZXMgPSBbXTtcbiAgZW50cmllcy5wdXNoKHtcbiAgICBpZDogJ3NlcmlhbGl6ZS10by1zdHJpbmcnLFxuICAgIGNvbXBvbmVudDogU2VyaWFsaXplVG9TdHJpbmcsXG4gICAgaXNFZGl0ZWQ6IGlzRWRpdGVkJDgsXG4gICAgZWRpdEZpZWxkLFxuICAgIGZpZWxkLFxuICAgIGlzRGVmYXVsdFZpc2libGU6IGZpZWxkID0+IGZpZWxkLnR5cGUgPT09ICdudW1iZXInXG4gIH0pO1xuICByZXR1cm4gZW50cmllcztcbn1cbmZ1bmN0aW9uIFNlcmlhbGl6ZVRvU3RyaW5nKHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBlZGl0RmllbGQsXG4gICAgZmllbGQsXG4gICAgaWRcbiAgfSA9IHByb3BzO1xuICBjb25zdCB7XG4gICAgZGVmYXVsdFZhbHVlXG4gIH0gPSBmaWVsZDtcbiAgY29uc3QgcGF0aCA9IFsnc2VyaWFsaXplVG9TdHJpbmcnXTtcbiAgY29uc3QgZ2V0VmFsdWUgPSAoKSA9PiB7XG4gICAgcmV0dXJuIGdldChmaWVsZCwgcGF0aCwgJycpO1xuICB9O1xuICBjb25zdCBzZXRWYWx1ZSA9IHZhbHVlID0+IHtcbiAgICAvLyBXaGVuZXZlciBjaGFuZ2luZyB0aGUgZm9ybWF0dGluZywgbWFrZSBzdXJlIHRvIGNoYW5nZSB0aGUgZGVmYXVsdCB2YWx1ZSB0eXBlIGFsb25nIHdpdGggaXRcbiAgICBpZiAoZGVmYXVsdFZhbHVlIHx8IGRlZmF1bHRWYWx1ZSA9PT0gMCkge1xuICAgICAgZWRpdEZpZWxkKGZpZWxkLCBbJ2RlZmF1bHRWYWx1ZSddLCB2YWx1ZSA/IEJpZyhkZWZhdWx0VmFsdWUpLnRvRml4ZWQoKSA6IE51bWJlcihkZWZhdWx0VmFsdWUpKTtcbiAgICB9XG4gICAgcmV0dXJuIGVkaXRGaWVsZChmaWVsZCwgcGF0aCwgdmFsdWUpO1xuICB9O1xuICByZXR1cm4gQ2hlY2tib3hFbnRyeSh7XG4gICAgZWxlbWVudDogZmllbGQsXG4gICAgZ2V0VmFsdWUsXG4gICAgaWQsXG4gICAgbGFiZWw6ICdPdXRwdXQgYXMgc3RyaW5nJyxcbiAgICBkZXNjcmlwdGlvbjogJ0FsbG93cyBhcmJpdHJhcnkgcHJlY2lzaW9uIHZhbHVlcycsXG4gICAgc2V0VmFsdWVcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIERhdGVUaW1lRW50cnkocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGVkaXRGaWVsZCxcbiAgICBmaWVsZFxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IGVudHJpZXMgPSBbe1xuICAgIGlkOiAnc3VidHlwZScsXG4gICAgY29tcG9uZW50OiBEYXRlVGltZVN1YnR5cGVTZWxlY3QsXG4gICAgaXNFZGl0ZWQ6IGlzRWRpdGVkJDMsXG4gICAgZWRpdEZpZWxkLFxuICAgIGZpZWxkLFxuICAgIGlzRGVmYXVsdFZpc2libGU6IGZpZWxkID0+IGZpZWxkLnR5cGUgPT09ICdkYXRldGltZSdcbiAgfV07XG4gIGVudHJpZXMucHVzaCh7XG4gICAgaWQ6ICd1c2UyNGgnLFxuICAgIGNvbXBvbmVudDogVXNlMjRoLFxuICAgIGlzRWRpdGVkOiBpc0VkaXRlZCQ4LFxuICAgIGVkaXRGaWVsZCxcbiAgICBmaWVsZCxcbiAgICBpc0RlZmF1bHRWaXNpYmxlOiBmaWVsZCA9PiBmaWVsZC50eXBlID09PSAnZGF0ZXRpbWUnICYmIChmaWVsZC5zdWJ0eXBlID09PSBEQVRFVElNRV9TVUJUWVBFUy5USU1FIHx8IGZpZWxkLnN1YnR5cGUgPT09IERBVEVUSU1FX1NVQlRZUEVTLkRBVEVUSU1FKVxuICB9KTtcbiAgcmV0dXJuIGVudHJpZXM7XG59XG5mdW5jdGlvbiBEYXRlVGltZVN1YnR5cGVTZWxlY3QocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGVkaXRGaWVsZCxcbiAgICBmaWVsZCxcbiAgICBpZFxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IGdldFZhbHVlID0gZSA9PiBnZXQoZmllbGQsIERBVEVUSU1FX1NVQlRZUEVfUEFUSCk7XG4gIGNvbnN0IGNsZWFyVGltZUNvbmZpZyA9ICgpID0+IHtcbiAgICBjb25zdCB0aW1lQ29uZmlnUGF0aHMgPSBbVElNRV9MQUJFTF9QQVRILCBUSU1FX1VTRTI0SF9QQVRILCBUSU1FX0lOVEVSVkFMX1BBVEgsIFRJTUVfU0VSSUFMSVNJTkdfRk9STUFUX1BBVEhdO1xuICAgIGZvciAoY29uc3QgcGF0aCBvZiB0aW1lQ29uZmlnUGF0aHMpIHtcbiAgICAgIGVkaXRGaWVsZChmaWVsZCwgcGF0aCwgdW5kZWZpbmVkKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IGluaXRUaW1lQ29uZmlnID0gKCkgPT4ge1xuICAgIGVkaXRGaWVsZChmaWVsZCwgVElNRV9MQUJFTF9QQVRILCAnVGltZScpO1xuICAgIGVkaXRGaWVsZChmaWVsZCwgVElNRV9TRVJJQUxJU0lOR19GT1JNQVRfUEFUSCwgVElNRV9TRVJJQUxJU0lOR19GT1JNQVRTLlVUQ19PRkZTRVQpO1xuICAgIGVkaXRGaWVsZChmaWVsZCwgVElNRV9JTlRFUlZBTF9QQVRILCAxNSk7XG4gIH07XG4gIGNvbnN0IGNsZWFyRGF0ZUNvbmZpZyA9ICgpID0+IHtcbiAgICBjb25zdCBkYXRlQ29uZmlnUGF0aHMgPSBbREFURV9MQUJFTF9QQVRILCBEQVRFX0RJU0FMTE9XX1BBU1RfUEFUSF07XG4gICAgZm9yIChjb25zdCBwYXRoIG9mIGRhdGVDb25maWdQYXRocykge1xuICAgICAgZWRpdEZpZWxkKGZpZWxkLCBwYXRoLCB1bmRlZmluZWQpO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgaW5pdERhdGVDb25maWcgPSAoKSA9PiB7XG4gICAgZWRpdEZpZWxkKGZpZWxkLCBEQVRFX0xBQkVMX1BBVEgsICdEYXRlJyk7XG4gIH07XG4gIGNvbnN0IHNldFZhbHVlID0gdmFsdWUgPT4ge1xuICAgIGNvbnN0IG9sZFZhbHVlID0gZ2V0VmFsdWUoKTtcbiAgICBpZiAob2xkVmFsdWUgPT09IHZhbHVlKSByZXR1cm47XG4gICAgaWYgKHZhbHVlID09PSBEQVRFVElNRV9TVUJUWVBFUy5EQVRFKSB7XG4gICAgICBjbGVhclRpbWVDb25maWcoKTtcbiAgICAgIG9sZFZhbHVlID09PSBEQVRFVElNRV9TVUJUWVBFUy5USU1FICYmIGluaXREYXRlQ29uZmlnKCk7XG4gICAgfSBlbHNlIGlmICh2YWx1ZSA9PT0gREFURVRJTUVfU1VCVFlQRVMuVElNRSkge1xuICAgICAgY2xlYXJEYXRlQ29uZmlnKCk7XG4gICAgICBvbGRWYWx1ZSA9PT0gREFURVRJTUVfU1VCVFlQRVMuREFURSAmJiBpbml0VGltZUNvbmZpZygpO1xuICAgIH0gZWxzZSBpZiAodmFsdWUgPT09IERBVEVUSU1FX1NVQlRZUEVTLkRBVEVUSU1FKSB7XG4gICAgICBvbGRWYWx1ZSA9PT0gREFURVRJTUVfU1VCVFlQRVMuREFURSAmJiBpbml0VGltZUNvbmZpZygpO1xuICAgICAgb2xkVmFsdWUgPT09IERBVEVUSU1FX1NVQlRZUEVTLlRJTUUgJiYgaW5pdERhdGVDb25maWcoKTtcbiAgICB9XG4gICAgcmV0dXJuIGVkaXRGaWVsZChmaWVsZCwgREFURVRJTUVfU1VCVFlQRV9QQVRILCB2YWx1ZSk7XG4gIH07XG4gIGNvbnN0IGdldERhdGV0aW1lU3VidHlwZXMgPSAoKSA9PiB7XG4gICAgcmV0dXJuIE9iamVjdC52YWx1ZXMoREFURVRJTUVfU1VCVFlQRVMpLm1hcChzdWJ0eXBlID0+ICh7XG4gICAgICBsYWJlbDogREFURVRJTUVfU1VCVFlQRVNfTEFCRUxTW3N1YnR5cGVdLFxuICAgICAgdmFsdWU6IHN1YnR5cGVcbiAgICB9KSk7XG4gIH07XG4gIHJldHVybiBTZWxlY3RFbnRyeSh7XG4gICAgbGFiZWw6ICdTdWJ0eXBlJyxcbiAgICBlbGVtZW50OiBmaWVsZCxcbiAgICBnZXRPcHRpb25zOiBnZXREYXRldGltZVN1YnR5cGVzLFxuICAgIGdldFZhbHVlLFxuICAgIGlkLFxuICAgIHNldFZhbHVlXG4gIH0pO1xufVxuZnVuY3Rpb24gVXNlMjRoKHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBlZGl0RmllbGQsXG4gICAgZmllbGQsXG4gICAgaWRcbiAgfSA9IHByb3BzO1xuICBjb25zdCBwYXRoID0gVElNRV9VU0UyNEhfUEFUSDtcbiAgY29uc3QgZ2V0VmFsdWUgPSAoKSA9PiB7XG4gICAgcmV0dXJuIGdldChmaWVsZCwgcGF0aCwgJycpO1xuICB9O1xuICBjb25zdCBzZXRWYWx1ZSA9IHZhbHVlID0+IHtcbiAgICByZXR1cm4gZWRpdEZpZWxkKGZpZWxkLCBwYXRoLCB2YWx1ZSk7XG4gIH07XG4gIHJldHVybiBDaGVja2JveEVudHJ5KHtcbiAgICBlbGVtZW50OiBmaWVsZCxcbiAgICBnZXRWYWx1ZSxcbiAgICBpZCxcbiAgICBsYWJlbDogJ1VzZSAyNGgnLFxuICAgIHNldFZhbHVlXG4gIH0pO1xufVxuXG5jb25zdCBpc1RpbWVJbnRlcnZhbEVkaXRlZCA9IGlzRWRpdGVkRnJvbURlZmF1bHRGYWN0b3J5KCcxNScpO1xuZnVuY3Rpb24gRGF0ZVRpbWVDb25zdHJhaW50c0VudHJ5KHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBlZGl0RmllbGQsXG4gICAgZmllbGQsXG4gICAgaWRcbiAgfSA9IHByb3BzO1xuICBmdW5jdGlvbiBpc0RlZmF1bHRWaXNpYmxlKHN1YnR5cGVzKSB7XG4gICAgcmV0dXJuIGZpZWxkID0+IHtcbiAgICAgIGlmIChmaWVsZC50eXBlICE9PSAnZGF0ZXRpbWUnKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzdWJ0eXBlcy5pbmNsdWRlcyhmaWVsZC5zdWJ0eXBlKTtcbiAgICB9O1xuICB9XG4gIGNvbnN0IGVudHJpZXMgPSBbXTtcbiAgZW50cmllcy5wdXNoKHtcbiAgICBpZDogaWQgKyAnLXRpbWVJbnRlcnZhbCcsXG4gICAgY29tcG9uZW50OiBUaW1lSW50ZXJ2YWxTZWxlY3QsXG4gICAgaXNFZGl0ZWQ6IGlzVGltZUludGVydmFsRWRpdGVkLFxuICAgIGVkaXRGaWVsZCxcbiAgICBmaWVsZCxcbiAgICBpc0RlZmF1bHRWaXNpYmxlOiBpc0RlZmF1bHRWaXNpYmxlKFtEQVRFVElNRV9TVUJUWVBFUy5USU1FLCBEQVRFVElNRV9TVUJUWVBFUy5EQVRFVElNRV0pXG4gIH0pO1xuICBlbnRyaWVzLnB1c2goe1xuICAgIGlkOiBpZCArICctZGlzYWxsb3dQYXNzZWREYXRlcycsXG4gICAgY29tcG9uZW50OiBEaXNhbGxvd1Bhc3NlZERhdGVzLFxuICAgIGlzRWRpdGVkOiBpc0VkaXRlZCQ4LFxuICAgIGVkaXRGaWVsZCxcbiAgICBmaWVsZCxcbiAgICBpc0RlZmF1bHRWaXNpYmxlOiBpc0RlZmF1bHRWaXNpYmxlKFtEQVRFVElNRV9TVUJUWVBFUy5EQVRFLCBEQVRFVElNRV9TVUJUWVBFUy5EQVRFVElNRV0pXG4gIH0pO1xuICByZXR1cm4gZW50cmllcztcbn1cbmZ1bmN0aW9uIERpc2FsbG93UGFzc2VkRGF0ZXMocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGVkaXRGaWVsZCxcbiAgICBmaWVsZCxcbiAgICBpZFxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IHBhdGggPSBEQVRFX0RJU0FMTE9XX1BBU1RfUEFUSDtcbiAgY29uc3QgZ2V0VmFsdWUgPSAoKSA9PiB7XG4gICAgcmV0dXJuIGdldChmaWVsZCwgcGF0aCwgJycpO1xuICB9O1xuICBjb25zdCBzZXRWYWx1ZSA9IHZhbHVlID0+IHtcbiAgICByZXR1cm4gZWRpdEZpZWxkKGZpZWxkLCBwYXRoLCB2YWx1ZSk7XG4gIH07XG4gIHJldHVybiBDaGVja2JveEVudHJ5KHtcbiAgICBlbGVtZW50OiBmaWVsZCxcbiAgICBnZXRWYWx1ZSxcbiAgICBpZCxcbiAgICBsYWJlbDogJ0Rpc2FsbG93IHBhc3QgZGF0ZXMnLFxuICAgIHNldFZhbHVlXG4gIH0pO1xufVxuZnVuY3Rpb24gVGltZUludGVydmFsU2VsZWN0KHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBlZGl0RmllbGQsXG4gICAgZmllbGQsXG4gICAgaWRcbiAgfSA9IHByb3BzO1xuICBjb25zdCB0aW1lSW50ZXJ2YWxzID0gWzEsIDUsIDEwLCAxNSwgMzAsIDYwXTtcbiAgY29uc3QgZ2V0VmFsdWUgPSBlID0+IGdldChmaWVsZCwgVElNRV9JTlRFUlZBTF9QQVRIKTtcbiAgY29uc3Qgc2V0VmFsdWUgPSB2YWx1ZSA9PiBlZGl0RmllbGQoZmllbGQsIFRJTUVfSU5URVJWQUxfUEFUSCwgcGFyc2VJbnQodmFsdWUpKTtcbiAgY29uc3QgZ2V0VGltZUludGVydmFscyA9ICgpID0+IHtcbiAgICByZXR1cm4gdGltZUludGVydmFscy5tYXAodGltZUludGVydmFsID0+ICh7XG4gICAgICBsYWJlbDogdGltZUludGVydmFsID09PSA2MCA/ICcxaCcgOiB0aW1lSW50ZXJ2YWwgKyAnbScsXG4gICAgICB2YWx1ZTogdGltZUludGVydmFsXG4gICAgfSkpO1xuICB9O1xuICByZXR1cm4gU2VsZWN0RW50cnkoe1xuICAgIGxhYmVsOiAnVGltZSBpbnRlcnZhbCcsXG4gICAgZWxlbWVudDogZmllbGQsXG4gICAgZ2V0T3B0aW9uczogZ2V0VGltZUludGVydmFscyxcbiAgICBnZXRWYWx1ZSxcbiAgICBpZCxcbiAgICBzZXRWYWx1ZVxuICB9KTtcbn1cblxuY29uc3QgaXNUaW1lRm9ybWF0RWRpdGVkID0gaXNFZGl0ZWRGcm9tRGVmYXVsdEZhY3RvcnkoVElNRV9TRVJJQUxJU0lOR19GT1JNQVRTLlVUQ19PRkZTRVQpO1xuZnVuY3Rpb24gRGF0ZVRpbWVGb3JtYXRFbnRyeShwcm9wcykge1xuICBjb25zdCB7XG4gICAgZWRpdEZpZWxkLFxuICAgIGZpZWxkXG4gIH0gPSBwcm9wcztcbiAgY29uc3QgZW50cmllcyA9IFtdO1xuICBlbnRyaWVzLnB1c2goe1xuICAgIGlkOiAndGltZS1mb3JtYXQnLFxuICAgIGNvbXBvbmVudDogVGltZUZvcm1hdFNlbGVjdCxcbiAgICBpc0VkaXRlZDogaXNUaW1lRm9ybWF0RWRpdGVkLFxuICAgIGVkaXRGaWVsZCxcbiAgICBmaWVsZCxcbiAgICBpc0RlZmF1bHRWaXNpYmxlOiBmaWVsZCA9PiBmaWVsZC50eXBlID09PSAnZGF0ZXRpbWUnICYmIChmaWVsZC5zdWJ0eXBlID09PSBEQVRFVElNRV9TVUJUWVBFUy5USU1FIHx8IGZpZWxkLnN1YnR5cGUgPT09IERBVEVUSU1FX1NVQlRZUEVTLkRBVEVUSU1FKVxuICB9KTtcbiAgcmV0dXJuIGVudHJpZXM7XG59XG5mdW5jdGlvbiBUaW1lRm9ybWF0U2VsZWN0KHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBlZGl0RmllbGQsXG4gICAgZmllbGQsXG4gICAgaWRcbiAgfSA9IHByb3BzO1xuICBjb25zdCBnZXRWYWx1ZSA9IGUgPT4gZ2V0KGZpZWxkLCBUSU1FX1NFUklBTElTSU5HX0ZPUk1BVF9QQVRIKTtcbiAgY29uc3Qgc2V0VmFsdWUgPSB2YWx1ZSA9PiBlZGl0RmllbGQoZmllbGQsIFRJTUVfU0VSSUFMSVNJTkdfRk9STUFUX1BBVEgsIHZhbHVlKTtcbiAgY29uc3QgZ2V0VGltZVNlcmlhbGlzaW5nRm9ybWF0cyA9ICgpID0+IHtcbiAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyhUSU1FX1NFUklBTElTSU5HX0ZPUk1BVFMpLm1hcChmb3JtYXQgPT4gKHtcbiAgICAgIGxhYmVsOiBUSU1FX1NFUklBTElTSU5HRk9STUFUX0xBQkVMU1tmb3JtYXRdLFxuICAgICAgdmFsdWU6IGZvcm1hdFxuICAgIH0pKTtcbiAgfTtcbiAgcmV0dXJuIFNlbGVjdEVudHJ5KHtcbiAgICBsYWJlbDogJ1RpbWUgZm9ybWF0JyxcbiAgICBlbGVtZW50OiBmaWVsZCxcbiAgICBnZXRPcHRpb25zOiBnZXRUaW1lU2VyaWFsaXNpbmdGb3JtYXRzLFxuICAgIGdldFZhbHVlLFxuICAgIGlkLFxuICAgIHNldFZhbHVlXG4gIH0pO1xufVxuXG5mdW5jdGlvbiBTZWxlY3RFbnRyaWVzKHByb3BzKSB7XG4gIGNvbnN0IGVudHJpZXMgPSBbc2ltcGxlQm9vbEVudHJ5RmFjdG9yeSh7XG4gICAgaWQ6ICdzZWFyY2hhYmxlJyxcbiAgICBwYXRoOiBbJ3NlYXJjaGFibGUnXSxcbiAgICBsYWJlbDogJ1NlYXJjaGFibGUnLFxuICAgIHByb3BzLFxuICAgIGlzRGVmYXVsdFZpc2libGU6IGZpZWxkID0+IGZpZWxkLnR5cGUgPT09ICdzZWxlY3QnXG4gIH0pXTtcbiAgcmV0dXJuIGVudHJpZXM7XG59XG5cbmZ1bmN0aW9uIFZhbHVlRW50cnkocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGVkaXRGaWVsZCxcbiAgICBmaWVsZCxcbiAgICBpZFByZWZpeCxcbiAgICBpbmRleCxcbiAgICB2YWxpZGF0ZUZhY3RvcnlcbiAgfSA9IHByb3BzO1xuICBjb25zdCBlbnRyaWVzID0gW3tcbiAgICBjb21wb25lbnQ6IExhYmVsJDEsXG4gICAgZWRpdEZpZWxkLFxuICAgIGZpZWxkLFxuICAgIGlkOiBpZFByZWZpeCArICctbGFiZWwnLFxuICAgIGlkUHJlZml4LFxuICAgIGluZGV4LFxuICAgIHZhbGlkYXRlRmFjdG9yeVxuICB9LCB7XG4gICAgY29tcG9uZW50OiBWYWx1ZSQxLFxuICAgIGVkaXRGaWVsZCxcbiAgICBmaWVsZCxcbiAgICBpZDogaWRQcmVmaXggKyAnLXZhbHVlJyxcbiAgICBpZFByZWZpeCxcbiAgICBpbmRleCxcbiAgICB2YWxpZGF0ZUZhY3RvcnlcbiAgfV07XG4gIHJldHVybiBlbnRyaWVzO1xufVxuZnVuY3Rpb24gTGFiZWwkMShwcm9wcykge1xuICBjb25zdCB7XG4gICAgZWRpdEZpZWxkLFxuICAgIGZpZWxkLFxuICAgIGlkLFxuICAgIGluZGV4LFxuICAgIHZhbGlkYXRlRmFjdG9yeVxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IGRlYm91bmNlID0gdXNlU2VydmljZSgnZGVib3VuY2UnKTtcbiAgY29uc3Qgc2V0VmFsdWUgPSAodmFsdWUsIGVycm9yKSA9PiB7XG4gICAgaWYgKGVycm9yKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHZhbHVlcyA9IGdldChmaWVsZCwgWyd2YWx1ZXMnXSk7XG4gICAgcmV0dXJuIGVkaXRGaWVsZChmaWVsZCwgJ3ZhbHVlcycsIHNldCQxKHZhbHVlcywgW2luZGV4LCAnbGFiZWwnXSwgdmFsdWUpKTtcbiAgfTtcbiAgY29uc3QgZ2V0VmFsdWUgPSAoKSA9PiB7XG4gICAgcmV0dXJuIGdldChmaWVsZCwgWyd2YWx1ZXMnLCBpbmRleCwgJ2xhYmVsJ10pO1xuICB9O1xuICBjb25zdCB2YWxpZGF0ZSA9IHVzZU1lbW8oKCkgPT4gdmFsaWRhdGVGYWN0b3J5KGdldChmaWVsZCwgWyd2YWx1ZXMnLCBpbmRleCwgJ2xhYmVsJ10pLCBlbnRyeSA9PiBlbnRyeS5sYWJlbCksIFtmaWVsZCwgaW5kZXgsIHZhbGlkYXRlRmFjdG9yeV0pO1xuICByZXR1cm4gVGV4dGZpZWxkRW50cnkoe1xuICAgIGRlYm91bmNlLFxuICAgIGVsZW1lbnQ6IGZpZWxkLFxuICAgIGdldFZhbHVlLFxuICAgIGlkLFxuICAgIGxhYmVsOiAnTGFiZWwnLFxuICAgIHNldFZhbHVlLFxuICAgIHZhbGlkYXRlXG4gIH0pO1xufVxuZnVuY3Rpb24gVmFsdWUkMShwcm9wcykge1xuICBjb25zdCB7XG4gICAgZWRpdEZpZWxkLFxuICAgIGZpZWxkLFxuICAgIGlkLFxuICAgIGluZGV4LFxuICAgIHZhbGlkYXRlRmFjdG9yeVxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IGRlYm91bmNlID0gdXNlU2VydmljZSgnZGVib3VuY2UnKTtcbiAgY29uc3Qgc2V0VmFsdWUgPSAodmFsdWUsIGVycm9yKSA9PiB7XG4gICAgaWYgKGVycm9yKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHtcbiAgICAgIGRlZmF1bHRWYWx1ZVxuICAgIH0gPSBmaWVsZDtcbiAgICBjb25zdCB2YWx1ZXMgPSBnZXQoZmllbGQsIFsndmFsdWVzJ10pO1xuICAgIGNvbnN0IHByZXZpb3VzVmFsdWUgPSBnZXQoZmllbGQsIFsndmFsdWVzJywgaW5kZXgsICd2YWx1ZSddKTtcbiAgICBpZiAoIWlzTmlsKGRlZmF1bHRWYWx1ZSkgJiYgZGVmYXVsdFZhbHVlID09PSBwcmV2aW91c1ZhbHVlKSB7XG4gICAgICBzZXQkMShmaWVsZCwgWydkZWZhdWx0VmFsdWUnXSwgdmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gZWRpdEZpZWxkKGZpZWxkLCAndmFsdWVzJywgc2V0JDEodmFsdWVzLCBbaW5kZXgsICd2YWx1ZSddLCB2YWx1ZSkpO1xuICB9O1xuICBjb25zdCBnZXRWYWx1ZSA9ICgpID0+IHtcbiAgICByZXR1cm4gZ2V0KGZpZWxkLCBbJ3ZhbHVlcycsIGluZGV4LCAndmFsdWUnXSk7XG4gIH07XG4gIGNvbnN0IHZhbGlkYXRlID0gdXNlTWVtbygoKSA9PiB2YWxpZGF0ZUZhY3RvcnkoZ2V0KGZpZWxkLCBbJ3ZhbHVlcycsIGluZGV4LCAndmFsdWUnXSksIGVudHJ5ID0+IGVudHJ5LnZhbHVlKSwgW2ZpZWxkLCBpbmRleCwgdmFsaWRhdGVGYWN0b3J5XSk7XG4gIHJldHVybiBUZXh0ZmllbGRFbnRyeSh7XG4gICAgZGVib3VuY2UsXG4gICAgZWxlbWVudDogZmllbGQsXG4gICAgZ2V0VmFsdWUsXG4gICAgaWQsXG4gICAgbGFiZWw6ICdWYWx1ZScsXG4gICAgc2V0VmFsdWUsXG4gICAgdmFsaWRhdGVcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIEN1c3RvbVZhbHVlRW50cnkocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGVkaXRGaWVsZCxcbiAgICBmaWVsZCxcbiAgICBpZFByZWZpeCxcbiAgICBpbmRleCxcbiAgICB2YWxpZGF0ZUZhY3RvcnlcbiAgfSA9IHByb3BzO1xuICBjb25zdCBlbnRyaWVzID0gW3tcbiAgICBjb21wb25lbnQ6IEtleSQxLFxuICAgIGVkaXRGaWVsZCxcbiAgICBmaWVsZCxcbiAgICBpZDogaWRQcmVmaXggKyAnLWtleScsXG4gICAgaWRQcmVmaXgsXG4gICAgaW5kZXgsXG4gICAgdmFsaWRhdGVGYWN0b3J5XG4gIH0sIHtcbiAgICBjb21wb25lbnQ6IFZhbHVlLFxuICAgIGVkaXRGaWVsZCxcbiAgICBmaWVsZCxcbiAgICBpZDogaWRQcmVmaXggKyAnLXZhbHVlJyxcbiAgICBpZFByZWZpeCxcbiAgICBpbmRleCxcbiAgICB2YWxpZGF0ZUZhY3RvcnlcbiAgfV07XG4gIHJldHVybiBlbnRyaWVzO1xufVxuZnVuY3Rpb24gS2V5JDEocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGVkaXRGaWVsZCxcbiAgICBmaWVsZCxcbiAgICBpZCxcbiAgICBpbmRleCxcbiAgICB2YWxpZGF0ZUZhY3RvcnlcbiAgfSA9IHByb3BzO1xuICBjb25zdCBkZWJvdW5jZSA9IHVzZVNlcnZpY2UoJ2RlYm91bmNlJyk7XG4gIGNvbnN0IHNldFZhbHVlID0gKHZhbHVlLCBlcnJvcikgPT4ge1xuICAgIGlmIChlcnJvcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBwcm9wZXJ0aWVzID0gZ2V0KGZpZWxkLCBbJ3Byb3BlcnRpZXMnXSk7XG4gICAgY29uc3Qga2V5ID0gT2JqZWN0LmtleXMocHJvcGVydGllcylbaW5kZXhdO1xuICAgIHJldHVybiBlZGl0RmllbGQoZmllbGQsICdwcm9wZXJ0aWVzJywgdXBkYXRlS2V5KHByb3BlcnRpZXMsIGtleSwgdmFsdWUpKTtcbiAgfTtcbiAgY29uc3QgZ2V0VmFsdWUgPSAoKSA9PiB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKGdldChmaWVsZCwgWydwcm9wZXJ0aWVzJ10pKVtpbmRleF07XG4gIH07XG4gIGNvbnN0IHZhbGlkYXRlID0gdXNlTWVtbygoKSA9PiB2YWxpZGF0ZUZhY3RvcnkoT2JqZWN0LmtleXMoZ2V0KGZpZWxkLCBbJ3Byb3BlcnRpZXMnXSkpW2luZGV4XSksIFt2YWxpZGF0ZUZhY3RvcnksIGZpZWxkLCBpbmRleF0pO1xuICByZXR1cm4gVGV4dGZpZWxkRW50cnkoe1xuICAgIGRlYm91bmNlLFxuICAgIGVsZW1lbnQ6IGZpZWxkLFxuICAgIGdldFZhbHVlLFxuICAgIGlkLFxuICAgIGxhYmVsOiAnS2V5JyxcbiAgICBzZXRWYWx1ZSxcbiAgICB2YWxpZGF0ZVxuICB9KTtcbn1cbmZ1bmN0aW9uIFZhbHVlKHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBlZGl0RmllbGQsXG4gICAgZmllbGQsXG4gICAgaWQsXG4gICAgaW5kZXgsXG4gICAgdmFsaWRhdGVGYWN0b3J5XG4gIH0gPSBwcm9wcztcbiAgY29uc3QgZGVib3VuY2UgPSB1c2VTZXJ2aWNlKCdkZWJvdW5jZScpO1xuICBjb25zdCBzZXRWYWx1ZSA9IHZhbHVlID0+IHtcbiAgICBjb25zdCBwcm9wZXJ0aWVzID0gZ2V0KGZpZWxkLCBbJ3Byb3BlcnRpZXMnXSk7XG4gICAgY29uc3Qga2V5ID0gT2JqZWN0LmtleXMocHJvcGVydGllcylbaW5kZXhdO1xuICAgIGVkaXRGaWVsZChmaWVsZCwgJ3Byb3BlcnRpZXMnLCB1cGRhdGVWYWx1ZShwcm9wZXJ0aWVzLCBrZXksIHZhbHVlKSk7XG4gIH07XG4gIGNvbnN0IGdldFZhbHVlID0gKCkgPT4ge1xuICAgIGNvbnN0IHByb3BlcnRpZXMgPSBnZXQoZmllbGQsIFsncHJvcGVydGllcyddKTtcbiAgICBjb25zdCBrZXkgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKVtpbmRleF07XG4gICAgcmV0dXJuIGdldChmaWVsZCwgWydwcm9wZXJ0aWVzJywga2V5XSk7XG4gIH07XG4gIHJldHVybiBUZXh0ZmllbGRFbnRyeSh7XG4gICAgZGVib3VuY2UsXG4gICAgZWxlbWVudDogZmllbGQsXG4gICAgZ2V0VmFsdWUsXG4gICAgaWQsXG4gICAgbGFiZWw6ICdWYWx1ZScsXG4gICAgc2V0VmFsdWUsXG4gICAgdmFsaWRhdGU6IHZhbGlkYXRlRmFjdG9yeShnZXRWYWx1ZSgpKVxuICB9KTtcbn1cblxuLy8gaGVscGVycyAvLy8vLy8vLy8vXG5cbi8qKlxuICogUmV0dXJucyBjb3B5IG9mIG9iamVjdCB3aXRoIHVwZGF0ZWQgdmFsdWUuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHByb3BlcnRpZXNcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXlcbiAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICpcbiAqIEByZXR1cm5zIHtPYmplY3R9XG4gKi9cbmZ1bmN0aW9uIHVwZGF0ZVZhbHVlKHByb3BlcnRpZXMsIGtleSwgdmFsdWUpIHtcbiAgcmV0dXJuIHtcbiAgICAuLi5wcm9wZXJ0aWVzLFxuICAgIFtrZXldOiB2YWx1ZVxuICB9O1xufVxuXG4vKipcbiAqIFJldHVybnMgY29weSBvZiBvYmplY3Qgd2l0aCB1cGRhdGVkIGtleS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcGVydGllc1xuICogQHBhcmFtIHtzdHJpbmd9IG9sZEtleVxuICogQHBhcmFtIHtzdHJpbmd9IG5ld0tleVxuICpcbiAqIEByZXR1cm5zIHtPYmplY3R9XG4gKi9cbmZ1bmN0aW9uIHVwZGF0ZUtleShwcm9wZXJ0aWVzLCBvbGRLZXksIG5ld0tleSkge1xuICByZXR1cm4gT2JqZWN0LmVudHJpZXMocHJvcGVydGllcykucmVkdWNlKChuZXdQcm9wZXJ0aWVzLCBlbnRyeSkgPT4ge1xuICAgIGNvbnN0IFtrZXksIHZhbHVlXSA9IGVudHJ5O1xuICAgIHJldHVybiB7XG4gICAgICAuLi5uZXdQcm9wZXJ0aWVzLFxuICAgICAgW2tleSA9PT0gb2xkS2V5ID8gbmV3S2V5IDoga2V5XTogdmFsdWVcbiAgICB9O1xuICB9LCB7fSk7XG59XG5cbmZ1bmN0aW9uIEF1dG9Gb2N1c1NlbGVjdEVudHJ5KHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBhdXRvRm9jdXNFbnRyeSxcbiAgICBlbGVtZW50LFxuICAgIGdldFZhbHVlXG4gIH0gPSBwcm9wcztcbiAgY29uc3QgdmFsdWUgPSBnZXRWYWx1ZShlbGVtZW50KTtcbiAgY29uc3QgcHJldlZhbHVlID0gdXNlUHJldmlvdXModmFsdWUpO1xuICBjb25zdCBldmVudEJ1cyA9IHVzZVNlcnZpY2UoJ2V2ZW50QnVzJyk7XG5cbiAgLy8gYXV0byBmb2N1cyBzcGVjaWZjIG90aGVyIGVudHJ5IHdoZW4gc2VsZWN0ZWQgdmFsdWUgY2hhbmdlZFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChhdXRvRm9jdXNFbnRyeSAmJiBwcmV2VmFsdWUgJiYgdmFsdWUgIT09IHByZXZWYWx1ZSkge1xuICAgICAgLy8gQE5vdGUocGludXNzaWx2ZXN0cnVzKTogVGhlcmUgaXMgYW4gaXNzdWUgaW4gdGhlIHByb3BlcnRpZXNcbiAgICAgIC8vIHBhbmVsIHNvIHdlIGhhdmUgdG8gd2FpdCBhIGJpdCBiZWZvcmUgc2hvd2luZyB0aGUgZW50cnkuXG4gICAgICAvLyBDZi4gaHR0cHM6Ly9naXRodWIuY29tL2NhbXVuZGEvbGludGluZy9ibG9iLzRmNTMyOGUyNzIyZjczYWU2MGFlNTg0YzVmNTc2ZWFlYzM5OTljYjIvbGliL21vZGVsZXIvTGludGluZy5qcyNMMzdcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBldmVudEJ1cy5maXJlKCdwcm9wZXJ0aWVzUGFuZWwuc2hvd0VudHJ5Jywge1xuICAgICAgICAgIGlkOiBhdXRvRm9jdXNFbnRyeVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW3ZhbHVlLCBhdXRvRm9jdXNFbnRyeSwgcHJldlZhbHVlLCBldmVudEJ1c10pO1xuICByZXR1cm4ganN4KFNlbGVjdEVudHJ5LCB7XG4gICAgLi4ucHJvcHNcbiAgfSk7XG59XG5cbmNvbnN0IGlzT3B0aW9uc1NvdXJjZUVkaXRlZCA9IGlzRWRpdGVkRnJvbURlZmF1bHRGYWN0b3J5KE9QVElPTlNfU09VUkNFUy5TVEFUSUMpO1xuZnVuY3Rpb24gT3B0aW9uc1NvdXJjZVNlbGVjdEVudHJ5KHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBlZGl0RmllbGQsXG4gICAgZmllbGQsXG4gICAgaWRcbiAgfSA9IHByb3BzO1xuICByZXR1cm4gW3tcbiAgICBpZDogaWQgKyAnLXNlbGVjdCcsXG4gICAgY29tcG9uZW50OiBWYWx1ZXNTb3VyY2VTZWxlY3QsXG4gICAgaXNFZGl0ZWQ6IGlzT3B0aW9uc1NvdXJjZUVkaXRlZCxcbiAgICBlZGl0RmllbGQsXG4gICAgZmllbGRcbiAgfV07XG59XG5mdW5jdGlvbiBWYWx1ZXNTb3VyY2VTZWxlY3QocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGVkaXRGaWVsZCxcbiAgICBmaWVsZCxcbiAgICBpZFxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IGdldFZhbHVlID0gZ2V0T3B0aW9uc1NvdXJjZTtcbiAgY29uc3Qgc2V0VmFsdWUgPSB2YWx1ZSA9PiB7XG4gICAgbGV0IG5ld0ZpZWxkID0gZmllbGQ7XG4gICAgY29uc3QgbmV3UHJvcGVydGllcyA9IHt9O1xuICAgIG5ld1Byb3BlcnRpZXNbT1BUSU9OU19TT1VSQ0VTX1BBVEhTW3ZhbHVlXV0gPSBPUFRJT05TX1NPVVJDRVNfREVGQVVMVFNbdmFsdWVdO1xuICAgIG5ld0ZpZWxkID0gZWRpdEZpZWxkKGZpZWxkLCBuZXdQcm9wZXJ0aWVzKTtcbiAgICByZXR1cm4gbmV3RmllbGQ7XG4gIH07XG4gIGNvbnN0IGdldE9wdGlvbnNTb3VyY2VPcHRpb25zID0gKCkgPT4ge1xuICAgIHJldHVybiBPYmplY3QudmFsdWVzKE9QVElPTlNfU09VUkNFUykubWFwKHZhbHVlU291cmNlID0+ICh7XG4gICAgICBsYWJlbDogT1BUSU9OU19TT1VSQ0VTX0xBQkVMU1t2YWx1ZVNvdXJjZV0sXG4gICAgICB2YWx1ZTogdmFsdWVTb3VyY2VcbiAgICB9KSk7XG4gIH07XG4gIHJldHVybiBBdXRvRm9jdXNTZWxlY3RFbnRyeSh7XG4gICAgYXV0b0ZvY3VzRW50cnk6IGdldEF1dG9Gb2N1c0VudHJ5SWQkMShmaWVsZCksXG4gICAgbGFiZWw6ICdUeXBlJyxcbiAgICBlbGVtZW50OiBmaWVsZCxcbiAgICBnZXRPcHRpb25zOiBnZXRPcHRpb25zU291cmNlT3B0aW9ucyxcbiAgICBnZXRWYWx1ZSxcbiAgICBpZCxcbiAgICBzZXRWYWx1ZVxuICB9KTtcbn1cblxuLy8gaGVscGVycyAvLy8vLy8vLy8vXG5cbmZ1bmN0aW9uIGdldEF1dG9Gb2N1c0VudHJ5SWQkMShmaWVsZCkge1xuICBjb25zdCB2YWx1ZXNTb3VyY2UgPSBnZXRPcHRpb25zU291cmNlKGZpZWxkKTtcbiAgaWYgKHZhbHVlc1NvdXJjZSA9PT0gT1BUSU9OU19TT1VSQ0VTLkVYUFJFU1NJT04pIHtcbiAgICByZXR1cm4gJ29wdGlvbnNFeHByZXNzaW9uLWV4cHJlc3Npb24nO1xuICB9IGVsc2UgaWYgKHZhbHVlc1NvdXJjZSA9PT0gT1BUSU9OU19TT1VSQ0VTLklOUFVUKSB7XG4gICAgcmV0dXJuICdkeW5hbWljT3B0aW9ucy1rZXknO1xuICB9IGVsc2UgaWYgKHZhbHVlc1NvdXJjZSA9PT0gT1BUSU9OU19TT1VSQ0VTLlNUQVRJQykge1xuICAgIHJldHVybiAnc3RhdGljT3B0aW9ucy0wLWxhYmVsJztcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuZnVuY3Rpb24gSW5wdXRLZXlPcHRpb25zU291cmNlRW50cnkocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGVkaXRGaWVsZCxcbiAgICBmaWVsZCxcbiAgICBpZFxuICB9ID0gcHJvcHM7XG4gIHJldHVybiBbe1xuICAgIGlkOiBpZCArICcta2V5JyxcbiAgICBjb21wb25lbnQ6IElucHV0VmFsdWVzS2V5LFxuICAgIGlzRWRpdGVkOiBpc0VkaXRlZCxcbiAgICBlZGl0RmllbGQsXG4gICAgZmllbGRcbiAgfV07XG59XG5mdW5jdGlvbiBJbnB1dFZhbHVlc0tleShwcm9wcykge1xuICBjb25zdCB7XG4gICAgZWRpdEZpZWxkLFxuICAgIGZpZWxkLFxuICAgIGlkXG4gIH0gPSBwcm9wcztcbiAgY29uc3QgZGVib3VuY2UgPSB1c2VTZXJ2aWNlKCdkZWJvdW5jZScpO1xuICBjb25zdCBwYXRoID0gT1BUSU9OU19TT1VSQ0VTX1BBVEhTW09QVElPTlNfU09VUkNFUy5JTlBVVF07XG4gIGNvbnN0IHNjaGVtYSA9ICdbXFxuICB7XFxuICAgIFwibGFiZWxcIjogXCJkb2xsYXJcIixcXG4gICAgXCJ2YWx1ZVwiOiBcIiRcIlxcbiAgfVxcbl0nO1xuICBjb25zdCB0b29sdGlwID0ganN4cyhcImRpdlwiLCB7XG4gICAgY2hpbGRyZW46IFtcIlRoZSBpbnB1dCBwcm9wZXJ0eSBtYXkgYmUgYW4gYXJyYXkgb2Ygc2ltcGxlIHZhbHVlcyBvciBhbHRlcm5hdGl2ZWx5IGZvbGxvdyB0aGlzIHNjaGVtYTpcIiwganN4KFwicHJlXCIsIHtcbiAgICAgIGNoaWxkcmVuOiBqc3goXCJjb2RlXCIsIHtcbiAgICAgICAgY2hpbGRyZW46IHNjaGVtYVxuICAgICAgfSlcbiAgICB9KV1cbiAgfSk7XG4gIGNvbnN0IGdldFZhbHVlID0gKCkgPT4gZ2V0KGZpZWxkLCBwYXRoLCAnJyk7XG4gIGNvbnN0IHNldFZhbHVlID0gKHZhbHVlLCBlcnJvcikgPT4ge1xuICAgIGlmIChlcnJvcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBlZGl0RmllbGQoZmllbGQsIHBhdGgsIHZhbHVlIHx8ICcnKTtcbiAgfTtcbiAgcmV0dXJuIFRleHRmaWVsZEVudHJ5KHtcbiAgICBkZWJvdW5jZSxcbiAgICBkZXNjcmlwdGlvbjogJ0RlZmluZSB3aGljaCBpbnB1dCBwcm9wZXJ0eSB0byBwb3B1bGF0ZSB0aGUgdmFsdWVzIGZyb20nLFxuICAgIHRvb2x0aXAsXG4gICAgZWxlbWVudDogZmllbGQsXG4gICAgZ2V0VmFsdWUsXG4gICAgaWQsXG4gICAgbGFiZWw6ICdJbnB1dCB2YWx1ZXMga2V5JyxcbiAgICBzZXRWYWx1ZSxcbiAgICB2YWxpZGF0ZTogdmFsaWRhdGUkNlxuICB9KTtcbn1cblxuLy8gaGVscGVycyAvLy8vLy8vLy8vXG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd8dm9pZH0gdmFsdWVcbiAqIEByZXR1cm5zIHtzdHJpbmd8bnVsbH1cbiAqL1xuY29uc3QgdmFsaWRhdGUkNiA9IHZhbHVlID0+IHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycgfHwgdmFsdWUubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuICdNdXN0IG5vdCBiZSBlbXB0eS4nO1xuICB9XG4gIGlmICgvXFxzLy50ZXN0KHZhbHVlKSkge1xuICAgIHJldHVybiAnTXVzdCBub3QgY29udGFpbiBzcGFjZXMuJztcbiAgfVxuICByZXR1cm4gbnVsbDtcbn07XG5cbmZ1bmN0aW9uIFN0YXRpY09wdGlvbnNTb3VyY2VFbnRyeShwcm9wcykge1xuICBjb25zdCB7XG4gICAgZWRpdEZpZWxkLFxuICAgIGZpZWxkLFxuICAgIGlkOiBpZFByZWZpeFxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IHtcbiAgICB2YWx1ZXNcbiAgfSA9IGZpZWxkO1xuICBjb25zdCBhZGRFbnRyeSA9IGUgPT4ge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgY29uc3QgaW5kZXggPSB2YWx1ZXMubGVuZ3RoICsgMTtcbiAgICBjb25zdCBlbnRyeSA9IGdldEluZGV4ZWRFbnRyeShpbmRleCwgdmFsdWVzKTtcbiAgICBlZGl0RmllbGQoZmllbGQsIE9QVElPTlNfU09VUkNFU19QQVRIU1tPUFRJT05TX1NPVVJDRVMuU1RBVElDXSwgYXJyYXlBZGQodmFsdWVzLCB2YWx1ZXMubGVuZ3RoLCBlbnRyeSkpO1xuICB9O1xuICBjb25zdCByZW1vdmVFbnRyeSA9IGVudHJ5ID0+IHtcbiAgICBpZiAoZmllbGQuZGVmYXVsdFZhbHVlID09PSBlbnRyeS52YWx1ZSkge1xuICAgICAgZWRpdEZpZWxkKGZpZWxkLCB7XG4gICAgICAgIHZhbHVlczogd2l0aG91dCh2YWx1ZXMsIGVudHJ5KSxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiB1bmRlZmluZWRcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBlZGl0RmllbGQoZmllbGQsIE9QVElPTlNfU09VUkNFU19QQVRIU1tPUFRJT05TX1NPVVJDRVMuU1RBVElDXSwgd2l0aG91dCh2YWx1ZXMsIGVudHJ5KSk7XG4gICAgfVxuICB9O1xuICBjb25zdCB2YWxpZGF0ZUZhY3RvcnkgPSAoa2V5LCBnZXRWYWx1ZSkgPT4ge1xuICAgIHJldHVybiB2YWx1ZSA9PiB7XG4gICAgICBpZiAodmFsdWUgPT09IGtleSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJyB8fCB2YWx1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuICdNdXN0IG5vdCBiZSBlbXB0eS4nO1xuICAgICAgfVxuICAgICAgY29uc3QgaXNWYWx1ZUFzc2lnbmVkID0gdmFsdWVzLmZpbmQoZW50cnkgPT4gZ2V0VmFsdWUoZW50cnkpID09PSB2YWx1ZSk7XG4gICAgICBpZiAoaXNWYWx1ZUFzc2lnbmVkKSB7XG4gICAgICAgIHJldHVybiAnTXVzdCBiZSB1bmlxdWUuJztcbiAgICAgIH1cbiAgICB9O1xuICB9O1xuICBjb25zdCBpdGVtcyA9IHZhbHVlcy5tYXAoKGVudHJ5LCBpbmRleCkgPT4ge1xuICAgIGNvbnN0IGlkID0gaWRQcmVmaXggKyAnLScgKyBpbmRleDtcbiAgICByZXR1cm4ge1xuICAgICAgaWQsXG4gICAgICBsYWJlbDogZW50cnkubGFiZWwsXG4gICAgICBlbnRyaWVzOiBWYWx1ZUVudHJ5KHtcbiAgICAgICAgZWRpdEZpZWxkLFxuICAgICAgICBmaWVsZCxcbiAgICAgICAgaWRQcmVmaXg6IGlkLFxuICAgICAgICBpbmRleCxcbiAgICAgICAgdmFsaWRhdGVGYWN0b3J5XG4gICAgICB9KSxcbiAgICAgIGF1dG9Gb2N1c0VudHJ5OiBpZCArICctbGFiZWwnLFxuICAgICAgcmVtb3ZlOiAoKSA9PiByZW1vdmVFbnRyeShlbnRyeSlcbiAgICB9O1xuICB9KTtcbiAgcmV0dXJuIHtcbiAgICBpdGVtcyxcbiAgICBhZGQ6IGFkZEVudHJ5XG4gIH07XG59XG5cbi8vIGhlbHBlclxuXG5mdW5jdGlvbiBnZXRJbmRleGVkRW50cnkoaW5kZXgsIHZhbHVlcykge1xuICBjb25zdCBlbnRyeSA9IHtcbiAgICBsYWJlbDogJ1ZhbHVlJyxcbiAgICB2YWx1ZTogJ3ZhbHVlJ1xuICB9O1xuICB3aGlsZSAobGFiZWxPclZhbHVlSXNBbHJlYWR5QXNzaWduZWRGb3JJbmRleChpbmRleCwgdmFsdWVzKSkge1xuICAgIGluZGV4Kys7XG4gIH1cbiAgaWYgKGluZGV4ID4gMSkge1xuICAgIGVudHJ5LmxhYmVsICs9IGAgJHtpbmRleH1gO1xuICAgIGVudHJ5LnZhbHVlICs9IGAke2luZGV4fWA7XG4gIH1cbiAgcmV0dXJuIGVudHJ5O1xufVxuZnVuY3Rpb24gbGFiZWxPclZhbHVlSXNBbHJlYWR5QXNzaWduZWRGb3JJbmRleChpbmRleCwgdmFsdWVzKSB7XG4gIHJldHVybiB2YWx1ZXMuc29tZShleGlzdGluZ0VudHJ5ID0+IGV4aXN0aW5nRW50cnkubGFiZWwgPT09IGBWYWx1ZSAke2luZGV4fWAgfHwgZXhpc3RpbmdFbnRyeS52YWx1ZSA9PT0gYHZhbHVlJHtpbmRleH1gKTtcbn1cblxuZnVuY3Rpb24gQWRvcm5lckVudHJ5KHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBlZGl0RmllbGQsXG4gICAgZmllbGRcbiAgfSA9IHByb3BzO1xuICBjb25zdCBlbnRyaWVzID0gW107XG4gIGNvbnN0IG9uQ2hhbmdlID0ga2V5ID0+IHtcbiAgICByZXR1cm4gdmFsdWUgPT4ge1xuICAgICAgY29uc3QgYXBwZWFyYW5jZSA9IGdldChmaWVsZCwgWydhcHBlYXJhbmNlJ10sIHt9KTtcbiAgICAgIGVkaXRGaWVsZChmaWVsZCwgWydhcHBlYXJhbmNlJ10sIHNldCQxKGFwcGVhcmFuY2UsIFtrZXldLCB2YWx1ZSkpO1xuICAgIH07XG4gIH07XG4gIGNvbnN0IGdldFZhbHVlID0ga2V5ID0+IHtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgcmV0dXJuIGdldChmaWVsZCwgWydhcHBlYXJhbmNlJywga2V5XSk7XG4gICAgfTtcbiAgfTtcbiAgZW50cmllcy5wdXNoKHtcbiAgICBpZDogJ3ByZWZpeC1hZG9ybmVyJyxcbiAgICBjb21wb25lbnQ6IFByZWZpeEFkb3JuZXIsXG4gICAgaXNFZGl0ZWQ6IGlzRWRpdGVkJDUsXG4gICAgZWRpdEZpZWxkLFxuICAgIGZpZWxkLFxuICAgIG9uQ2hhbmdlLFxuICAgIGdldFZhbHVlLFxuICAgIGlzRGVmYXVsdFZpc2libGU6IGZpZWxkID0+IFsnbnVtYmVyJywgJ3RleHRmaWVsZCddLmluY2x1ZGVzKGZpZWxkLnR5cGUpXG4gIH0pO1xuICBlbnRyaWVzLnB1c2goe1xuICAgIGlkOiAnc3VmZml4LWFkb3JuZXInLFxuICAgIGNvbXBvbmVudDogU3VmZml4QWRvcm5lcixcbiAgICBpc0VkaXRlZDogaXNFZGl0ZWQkNSxcbiAgICBlZGl0RmllbGQsXG4gICAgZmllbGQsXG4gICAgb25DaGFuZ2UsXG4gICAgZ2V0VmFsdWUsXG4gICAgaXNEZWZhdWx0VmlzaWJsZTogZmllbGQgPT4gWydudW1iZXInLCAndGV4dGZpZWxkJ10uaW5jbHVkZXMoZmllbGQudHlwZSlcbiAgfSk7XG4gIHJldHVybiBlbnRyaWVzO1xufVxuZnVuY3Rpb24gUHJlZml4QWRvcm5lcihwcm9wcykge1xuICBjb25zdCB7XG4gICAgZmllbGQsXG4gICAgaWQsXG4gICAgb25DaGFuZ2UsXG4gICAgZ2V0VmFsdWVcbiAgfSA9IHByb3BzO1xuICBjb25zdCBkZWJvdW5jZSA9IHVzZVNlcnZpY2UoJ2RlYm91bmNlJyk7XG4gIGNvbnN0IHZhcmlhYmxlcyA9IHVzZVZhcmlhYmxlcygpLm1hcChuYW1lID0+ICh7XG4gICAgbmFtZVxuICB9KSk7XG4gIHJldHVybiBGZWVsVGVtcGxhdGluZ0VudHJ5KHtcbiAgICBkZWJvdW5jZSxcbiAgICBlbGVtZW50OiBmaWVsZCxcbiAgICBmZWVsOiAnb3B0aW9uYWwnLFxuICAgIGdldFZhbHVlOiBnZXRWYWx1ZSgncHJlZml4QWRvcm5lcicpLFxuICAgIGlkLFxuICAgIGxhYmVsOiAnUHJlZml4JyxcbiAgICBzZXRWYWx1ZTogb25DaGFuZ2UoJ3ByZWZpeEFkb3JuZXInKSxcbiAgICBzaW5nbGVMaW5lOiB0cnVlLFxuICAgIHZhcmlhYmxlc1xuICB9KTtcbn1cbmZ1bmN0aW9uIFN1ZmZpeEFkb3JuZXIocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGZpZWxkLFxuICAgIGlkLFxuICAgIG9uQ2hhbmdlLFxuICAgIGdldFZhbHVlXG4gIH0gPSBwcm9wcztcbiAgY29uc3QgZGVib3VuY2UgPSB1c2VTZXJ2aWNlKCdkZWJvdW5jZScpO1xuICBjb25zdCB2YXJpYWJsZXMgPSB1c2VWYXJpYWJsZXMoKS5tYXAobmFtZSA9PiAoe1xuICAgIG5hbWVcbiAgfSkpO1xuICByZXR1cm4gRmVlbFRlbXBsYXRpbmdFbnRyeSh7XG4gICAgZGVib3VuY2UsXG4gICAgZWxlbWVudDogZmllbGQsXG4gICAgZ2V0VmFsdWU6IGdldFZhbHVlKCdzdWZmaXhBZG9ybmVyJyksXG4gICAgaWQsXG4gICAgbGFiZWw6ICdTdWZmaXgnLFxuICAgIHNldFZhbHVlOiBvbkNoYW5nZSgnc3VmZml4QWRvcm5lcicpLFxuICAgIHNpbmdsZUxpbmU6IHRydWUsXG4gICAgdmFyaWFibGVzXG4gIH0pO1xufVxuXG5mdW5jdGlvbiBSZWFkb25seUVudHJ5KHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBlZGl0RmllbGQsXG4gICAgZmllbGRcbiAgfSA9IHByb3BzO1xuICBjb25zdCB7XG4gICAgZGlzYWJsZWRcbiAgfSA9IGZpZWxkO1xuICBjb25zdCBlbnRyaWVzID0gW107XG4gIGlmICghZGlzYWJsZWQpIHtcbiAgICBlbnRyaWVzLnB1c2goe1xuICAgICAgaWQ6ICdyZWFkb25seScsXG4gICAgICBjb21wb25lbnQ6IFJlYWRvbmx5LFxuICAgICAgZWRpdEZpZWxkOiBlZGl0RmllbGQsXG4gICAgICBmaWVsZDogZmllbGQsXG4gICAgICBpc0VkaXRlZDogaXNFZGl0ZWQkNSxcbiAgICAgIGlzRGVmYXVsdFZpc2libGU6IGZpZWxkID0+IElOUFVUUy5pbmNsdWRlcyhmaWVsZC50eXBlKVxuICAgIH0pO1xuICB9XG4gIHJldHVybiBlbnRyaWVzO1xufVxuZnVuY3Rpb24gUmVhZG9ubHkocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGVkaXRGaWVsZCxcbiAgICBmaWVsZCxcbiAgICBpZFxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IGRlYm91bmNlID0gdXNlU2VydmljZSgnZGVib3VuY2UnKTtcbiAgY29uc3QgdmFyaWFibGVzID0gdXNlVmFyaWFibGVzKCkubWFwKG5hbWUgPT4gKHtcbiAgICBuYW1lXG4gIH0pKTtcbiAgY29uc3QgcGF0aCA9IFsncmVhZG9ubHknXTtcbiAgY29uc3QgZ2V0VmFsdWUgPSAoKSA9PiB7XG4gICAgcmV0dXJuIGdldChmaWVsZCwgcGF0aCwgJycpO1xuICB9O1xuICBjb25zdCBzZXRWYWx1ZSA9IHZhbHVlID0+IHtcbiAgICByZXR1cm4gZWRpdEZpZWxkKGZpZWxkLCBwYXRoLCB2YWx1ZSB8fCBmYWxzZSk7XG4gIH07XG4gIHJldHVybiBGZWVsVG9nZ2xlU3dpdGNoRW50cnkoe1xuICAgIGRlYm91bmNlLFxuICAgIGVsZW1lbnQ6IGZpZWxkLFxuICAgIGZlZWw6ICdvcHRpb25hbCcsXG4gICAgZ2V0VmFsdWUsXG4gICAgaWQsXG4gICAgbGFiZWw6ICdSZWFkIG9ubHknLFxuICAgIHRvb2x0aXA6ICdNYWtlIHRoaXMgZmllbGQgcmVhZC1vbmx5IHdoZW4gaXQgY2Fubm90IGJlIGVkaXRlZCBieSB0aGUgZW5kLXVzZXIsIGJ1dCBpdHMgY29udGVudCBpcyBpbXBvcnRhbnQgZm9yIHRoZW0gdG8gc2VlLiBJdHMgZGF0YSB3aWxsIHN0aWxsIGJlIHN1Ym1pdHRlZC4nLFxuICAgIHNldFZhbHVlLFxuICAgIHZhcmlhYmxlc1xuICB9KTtcbn1cblxuZnVuY3Rpb24gTGF5b3V0ZXJBcHBlYXJhbmNlRW50cnkocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGZpZWxkXG4gIH0gPSBwcm9wcztcbiAgaWYgKCFbJ2dyb3VwJywgJ2R5bmFtaWNsaXN0J10uaW5jbHVkZXMoZmllbGQudHlwZSkpIHtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgY29uc3QgZW50cmllcyA9IFtzaW1wbGVTZWxlY3RFbnRyeUZhY3Rvcnkoe1xuICAgIGlkOiAndmVydGljYWxBbGlnbm1lbnQnLFxuICAgIHBhdGg6IFsndmVydGljYWxBbGlnbm1lbnQnXSxcbiAgICBsYWJlbDogJ1ZlcnRpY2FsIGFsaWdubWVudCcsXG4gICAgb3B0aW9uc0FycmF5OiBbe1xuICAgICAgdmFsdWU6ICdzdGFydCcsXG4gICAgICBsYWJlbDogJ1RvcCdcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogJ2NlbnRlcicsXG4gICAgICBsYWJlbDogJ0NlbnRlcidcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogJ2VuZCcsXG4gICAgICBsYWJlbDogJ0JvdHRvbSdcbiAgICB9XSxcbiAgICBwcm9wc1xuICB9KV07XG4gIHJldHVybiBlbnRyaWVzO1xufVxuXG5mdW5jdGlvbiBSZXBlYXRhYmxlRW50cnkocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGZpZWxkLFxuICAgIGdldFNlcnZpY2VcbiAgfSA9IHByb3BzO1xuICBjb25zdCB7XG4gICAgdHlwZVxuICB9ID0gZmllbGQ7XG4gIGNvbnN0IGZvcm1GaWVsZERlZmluaXRpb24gPSBnZXRTZXJ2aWNlKCdmb3JtRmllbGRzJykuZ2V0KHR5cGUpO1xuICBpZiAoIWZvcm1GaWVsZERlZmluaXRpb24gfHwgIWZvcm1GaWVsZERlZmluaXRpb24uY29uZmlnLnJlcGVhdGFibGUpIHtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgY29uc3QgZW50cmllcyA9IFtzaW1wbGVSYW5nZUludGVnZXJFbnRyeUZhY3Rvcnkoe1xuICAgIGlkOiAnZGVmYXVsdFJlcGV0aXRpb25zJyxcbiAgICBwYXRoOiBbJ2RlZmF1bHRSZXBldGl0aW9ucyddLFxuICAgIGxhYmVsOiAnRGVmYXVsdCBudW1iZXIgb2YgaXRlbXMnLFxuICAgIG1pbjogMSxcbiAgICBtYXg6IDEwMCxcbiAgICBwcm9wc1xuICB9KSwgc2ltcGxlQm9vbEVudHJ5RmFjdG9yeSh7XG4gICAgaWQ6ICdhbGxvd0FkZFJlbW92ZScsXG4gICAgcGF0aDogWydhbGxvd0FkZFJlbW92ZSddLFxuICAgIGxhYmVsOiAnQWxsb3cgYWRkL2RlbGV0ZSBpdGVtcycsXG4gICAgcHJvcHNcbiAgfSksIHNpbXBsZUJvb2xFbnRyeUZhY3Rvcnkoe1xuICAgIGlkOiAnZGlzYWJsZUNvbGxhcHNlJyxcbiAgICBwYXRoOiBbJ2Rpc2FibGVDb2xsYXBzZSddLFxuICAgIGxhYmVsOiAnRGlzYWJsZSBjb2xsYXBzZScsXG4gICAgcHJvcHNcbiAgfSldO1xuICBpZiAoIWZpZWxkLmRpc2FibGVDb2xsYXBzZSkge1xuICAgIGNvbnN0IG5vbkNvbGxhcHNlSXRlbXNFbnRyeSA9IHNpbXBsZVJhbmdlSW50ZWdlckVudHJ5RmFjdG9yeSh7XG4gICAgICBpZDogJ25vbkNvbGxhcHNlZEl0ZW1zJyxcbiAgICAgIHBhdGg6IFsnbm9uQ29sbGFwc2VkSXRlbXMnXSxcbiAgICAgIGxhYmVsOiAnTnVtYmVyIG9mIG5vbi1jb2xsYXBzaW5nIGl0ZW1zJyxcbiAgICAgIG1pbjogMSxcbiAgICAgIHByb3BzXG4gICAgfSk7XG4gICAgZW50cmllcy5wdXNoKG5vbkNvbGxhcHNlSXRlbXNFbnRyeSk7XG4gIH1cbiAgcmV0dXJuIGVudHJpZXM7XG59XG5cbmZ1bmN0aW9uIENvbmRpdGlvbkVudHJ5KHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBlZGl0RmllbGQsXG4gICAgZmllbGRcbiAgfSA9IHByb3BzO1xuICByZXR1cm4gW3tcbiAgICBpZDogJ2NvbmRpdGlvbmFsLWhpZGUnLFxuICAgIGNvbXBvbmVudDogQ29uZGl0aW9uLFxuICAgIGVkaXRGaWVsZDogZWRpdEZpZWxkLFxuICAgIGZpZWxkOiBmaWVsZCxcbiAgICBpc0VkaXRlZDogaXNFZGl0ZWQkNVxuICB9XTtcbn1cbmZ1bmN0aW9uIENvbmRpdGlvbihwcm9wcykge1xuICBjb25zdCB7XG4gICAgZWRpdEZpZWxkLFxuICAgIGZpZWxkLFxuICAgIGlkXG4gIH0gPSBwcm9wcztcbiAgY29uc3QgZGVib3VuY2UgPSB1c2VTZXJ2aWNlKCdkZWJvdW5jZScpO1xuICBjb25zdCB2YXJpYWJsZXMgPSB1c2VWYXJpYWJsZXMoKS5tYXAobmFtZSA9PiAoe1xuICAgIG5hbWVcbiAgfSkpO1xuICBjb25zdCBwYXRoID0gWydjb25kaXRpb25hbCcsICdoaWRlJ107XG4gIGNvbnN0IGdldFZhbHVlID0gKCkgPT4ge1xuICAgIHJldHVybiBnZXQoZmllbGQsIHBhdGgsICcnKTtcbiAgfTtcbiAgY29uc3Qgc2V0VmFsdWUgPSB2YWx1ZSA9PiB7XG4gICAgaWYgKCF2YWx1ZSkge1xuICAgICAgcmV0dXJuIGVkaXRGaWVsZChmaWVsZCwgJ2NvbmRpdGlvbmFsJywgdW5kZWZpbmVkKTtcbiAgICB9XG4gICAgcmV0dXJuIGVkaXRGaWVsZChmaWVsZCwgJ2NvbmRpdGlvbmFsJywge1xuICAgICAgaGlkZTogdmFsdWVcbiAgICB9KTtcbiAgfTtcbiAgbGV0IGxhYmVsID0gJ0hpZGUgaWYnO1xuICBsZXQgZGVzY3JpcHRpb24gPSAnQ29uZGl0aW9uIHVuZGVyIHdoaWNoIHRoZSBmaWVsZCBpcyBoaWRkZW4nO1xuXG4gIC8vIHNwZWNpYWwgY2FzZSBmb3IgZXhwcmVzc2lvbiBmaWVsZHMgd2hpY2ggZG8gbm90IHJlbmRlclxuICBpZiAoZmllbGQudHlwZSA9PT0gJ2V4cHJlc3Npb24nKSB7XG4gICAgbGFiZWwgPSAnRGVhY3RpdmF0ZSBpZic7XG4gICAgZGVzY3JpcHRpb24gPSAnQ29uZGl0aW9uIHVuZGVyIHdoaWNoIHRoZSBmaWVsZCBpcyBkZWFjdGl2YXRlZCc7XG4gIH1cbiAgcmV0dXJuIEZlZWxFbnRyeSh7XG4gICAgZGVib3VuY2UsXG4gICAgZGVzY3JpcHRpb24sXG4gICAgZWxlbWVudDogZmllbGQsXG4gICAgZmVlbDogJ3JlcXVpcmVkJyxcbiAgICBnZXRWYWx1ZSxcbiAgICBpZCxcbiAgICBsYWJlbCxcbiAgICBzZXRWYWx1ZSxcbiAgICB2YXJpYWJsZXNcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIE9wdGlvbnNFeHByZXNzaW9uRW50cnkocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGVkaXRGaWVsZCxcbiAgICBmaWVsZCxcbiAgICBpZFxuICB9ID0gcHJvcHM7XG4gIHJldHVybiBbe1xuICAgIGlkOiBpZCArICctZXhwcmVzc2lvbicsXG4gICAgY29tcG9uZW50OiBPcHRpb25zRXhwcmVzc2lvbixcbiAgICBpc0VkaXRlZDogaXNFZGl0ZWQkNSxcbiAgICBlZGl0RmllbGQsXG4gICAgZmllbGRcbiAgfV07XG59XG5mdW5jdGlvbiBPcHRpb25zRXhwcmVzc2lvbihwcm9wcykge1xuICBjb25zdCB7XG4gICAgZWRpdEZpZWxkLFxuICAgIGZpZWxkLFxuICAgIGlkXG4gIH0gPSBwcm9wcztcbiAgY29uc3QgZGVib3VuY2UgPSB1c2VTZXJ2aWNlKCdkZWJvdW5jZScpO1xuICBjb25zdCB2YXJpYWJsZXMgPSB1c2VWYXJpYWJsZXMoKS5tYXAobmFtZSA9PiAoe1xuICAgIG5hbWVcbiAgfSkpO1xuICBjb25zdCBwYXRoID0gT1BUSU9OU19TT1VSQ0VTX1BBVEhTW09QVElPTlNfU09VUkNFUy5FWFBSRVNTSU9OXTtcbiAgY29uc3Qgc2NoZW1hID0gJ1tcXG4gIHtcXG4gICAgXCJsYWJlbFwiOiBcImRvbGxhclwiLFxcbiAgICBcInZhbHVlXCI6IFwiJFwiXFxuICB9XFxuXSc7XG4gIGNvbnN0IHRvb2x0aXAgPSBqc3hzKFwiZGl2XCIsIHtcbiAgICBjaGlsZHJlbjogW1wiVGhlIGV4cHJlc3Npb24gbWF5IHJlc3VsdCBpbiBhbiBhcnJheSBvZiBzaW1wbGUgdmFsdWVzIG9yIGFsdGVybmF0aXZlbHkgZm9sbG93IHRoaXMgc2NoZW1hOlwiLCBqc3goXCJwcmVcIiwge1xuICAgICAgY2hpbGRyZW46IGpzeChcImNvZGVcIiwge1xuICAgICAgICBjaGlsZHJlbjogc2NoZW1hXG4gICAgICB9KVxuICAgIH0pXVxuICB9KTtcbiAgY29uc3QgZ2V0VmFsdWUgPSAoKSA9PiBnZXQoZmllbGQsIHBhdGgsICcnKTtcbiAgY29uc3Qgc2V0VmFsdWUgPSB2YWx1ZSA9PiBlZGl0RmllbGQoZmllbGQsIHBhdGgsIHZhbHVlIHx8ICcnKTtcbiAgcmV0dXJuIEZlZWxFbnRyeSh7XG4gICAgZGVib3VuY2UsXG4gICAgZGVzY3JpcHRpb246ICdEZWZpbmUgYW4gZXhwcmVzc2lvbiB0byBwb3B1bGF0ZSB0aGUgb3B0aW9ucyBmcm9tLicsXG4gICAgdG9vbHRpcCxcbiAgICBlbGVtZW50OiBmaWVsZCxcbiAgICBmZWVsOiAncmVxdWlyZWQnLFxuICAgIGdldFZhbHVlLFxuICAgIGlkLFxuICAgIGxhYmVsOiAnT3B0aW9ucyBleHByZXNzaW9uJyxcbiAgICBzZXRWYWx1ZSxcbiAgICB2YXJpYWJsZXNcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIFRhYmxlRGF0YVNvdXJjZUVudHJ5KHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBlZGl0RmllbGQsXG4gICAgZmllbGRcbiAgfSA9IHByb3BzO1xuICBjb25zdCBlbnRyaWVzID0gW107XG4gIGVudHJpZXMucHVzaCh7XG4gICAgaWQ6ICdkYXRhU291cmNlJyxcbiAgICBjb21wb25lbnQ6IFNvdXJjZSxcbiAgICBlZGl0RmllbGQ6IGVkaXRGaWVsZCxcbiAgICBmaWVsZDogZmllbGQsXG4gICAgaXNFZGl0ZWQ6IGlzRWRpdGVkJDUsXG4gICAgaXNEZWZhdWx0VmlzaWJsZTogZmllbGQgPT4gZmllbGQudHlwZSA9PT0gJ3RhYmxlJ1xuICB9KTtcbiAgcmV0dXJuIGVudHJpZXM7XG59XG5mdW5jdGlvbiBTb3VyY2UocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGVkaXRGaWVsZCxcbiAgICBmaWVsZCxcbiAgICBpZFxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IGRlYm91bmNlID0gdXNlU2VydmljZSgnZGVib3VuY2UnKTtcbiAgY29uc3QgdmFyaWFibGVzID0gdXNlVmFyaWFibGVzKCkubWFwKG5hbWUgPT4gKHtcbiAgICBuYW1lXG4gIH0pKTtcbiAgY29uc3QgcGF0aCA9IFsnZGF0YVNvdXJjZSddO1xuICBjb25zdCBnZXRWYWx1ZSA9ICgpID0+IHtcbiAgICByZXR1cm4gZ2V0KGZpZWxkLCBwYXRoLCBmaWVsZC5pZCk7XG4gIH07XG4gIGNvbnN0IHNldFZhbHVlID0gKHZhbHVlLCBlcnJvcikgPT4ge1xuICAgIGlmIChlcnJvcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBlZGl0RmllbGQoZmllbGQsIHBhdGgsIHZhbHVlKTtcbiAgfTtcbiAgcmV0dXJuIEZlZWxUZW1wbGF0aW5nRW50cnkoe1xuICAgIGRlYm91bmNlLFxuICAgIGRlc2NyaXB0aW9uOiAnU3BlY2lmeSB0aGUgc291cmNlIGZyb20gd2hpY2ggdG8gcG9wdWxhdGUgdGhlIHRhYmxlJyxcbiAgICBlbGVtZW50OiBmaWVsZCxcbiAgICBmZWVsOiAncmVxdWlyZWQnLFxuICAgIGdldFZhbHVlLFxuICAgIGlkLFxuICAgIGxhYmVsOiAnRGF0YSBzb3VyY2UnLFxuICAgIHRvb2x0aXA6ICdFbnRlciBhIGZvcm0gaW5wdXQgdmFyaWFibGUgdGhhdCBjb250YWlucyB0aGUgZGF0YSBmb3IgdGhlIHRhYmxlIG9yIGRlZmluZSBhbiBleHByZXNzaW9uIHRvIHBvcHVsYXRlIHRoZSBkYXRhIGR5bmFtaWNhbGx5LicsXG4gICAgc2V0VmFsdWUsXG4gICAgc2luZ2xlTGluZTogdHJ1ZSxcbiAgICB2YXJpYWJsZXMsXG4gICAgdmFsaWRhdGU6IHZhbGlkYXRlJDVcbiAgfSk7XG59XG5cbi8vIGhlbHBlciAvLy8vLy8vLy8vLy8vLy8vXG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd8dm9pZH0gdmFsdWVcbiAqIEByZXR1cm5zIHtzdHJpbmd8bnVsbH1cbiAqL1xuY29uc3QgdmFsaWRhdGUkNSA9IHZhbHVlID0+IHtcbiAgaWYgKCFpc1N0cmluZyh2YWx1ZSkgfHwgdmFsdWUubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuICdNdXN0IG5vdCBiZSBlbXB0eS4nO1xuICB9XG4gIGlmICh2YWx1ZS5zdGFydHNXaXRoKCc9JykpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBpZiAoIWlzVmFsaWREb3RQYXRoKHZhbHVlKSkge1xuICAgIHJldHVybiAnTXVzdCBiZSBhIHZhcmlhYmxlIG9yIGEgZG90IHNlcGFyYXRlZCBwYXRoLic7XG4gIH1cbiAgaWYgKGhhc0ludGVnZXJQYXRoU2VnbWVudCh2YWx1ZSkpIHtcbiAgICByZXR1cm4gJ011c3Qgbm90IGNvbnRhaW4gbnVtZXJpY2FsIHBhdGggc2VnbWVudHMuJztcbiAgfVxuICByZXR1cm4gbnVsbDtcbn07XG5cbmZ1bmN0aW9uIFBhZ2luYXRpb25FbnRyeShwcm9wcykge1xuICBjb25zdCB7XG4gICAgZWRpdEZpZWxkLFxuICAgIGZpZWxkXG4gIH0gPSBwcm9wcztcbiAgY29uc3QgZW50cmllcyA9IFtdO1xuICBlbnRyaWVzLnB1c2goe1xuICAgIGlkOiAncGFnaW5hdGlvbicsXG4gICAgY29tcG9uZW50OiBQYWdpbmF0aW9uLFxuICAgIGVkaXRGaWVsZDogZWRpdEZpZWxkLFxuICAgIGZpZWxkOiBmaWVsZCxcbiAgICBpc0VkaXRlZDogaXNFZGl0ZWQkNyxcbiAgICBpc0RlZmF1bHRWaXNpYmxlOiBmaWVsZCA9PiBmaWVsZC50eXBlID09PSAndGFibGUnXG4gIH0pO1xuICByZXR1cm4gZW50cmllcztcbn1cbmZ1bmN0aW9uIFBhZ2luYXRpb24ocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGVkaXRGaWVsZCxcbiAgICBmaWVsZCxcbiAgICBpZFxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IGRlZmF1bHRSb3dDb3VudCA9IDEwO1xuICBjb25zdCBwYXRoID0gWydyb3dDb3VudCddO1xuICBjb25zdCBnZXRWYWx1ZSA9ICgpID0+IHtcbiAgICByZXR1cm4gaXNOdW1iZXIoZ2V0KGZpZWxkLCBwYXRoKSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gdmFsdWVcbiAgICovXG4gIGNvbnN0IHNldFZhbHVlID0gdmFsdWUgPT4ge1xuICAgIHZhbHVlID8gZWRpdEZpZWxkKGZpZWxkLCBwYXRoLCBkZWZhdWx0Um93Q291bnQpIDogZWRpdEZpZWxkKGZpZWxkLCBwYXRoLCB1bmRlZmluZWQpO1xuICB9O1xuICByZXR1cm4gVG9nZ2xlU3dpdGNoRW50cnkoe1xuICAgIGVsZW1lbnQ6IGZpZWxkLFxuICAgIGdldFZhbHVlLFxuICAgIGlkLFxuICAgIGxhYmVsOiAnUGFnaW5hdGlvbicsXG4gICAgaW5saW5lOiB0cnVlLFxuICAgIHNldFZhbHVlXG4gIH0pO1xufVxuXG5jb25zdCBwYXRoJDIgPSBbJ3Jvd0NvdW50J107XG5mdW5jdGlvbiBSb3dDb3VudEVudHJ5KHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBlZGl0RmllbGQsXG4gICAgZmllbGRcbiAgfSA9IHByb3BzO1xuICBjb25zdCBlbnRyaWVzID0gW107XG4gIGVudHJpZXMucHVzaCh7XG4gICAgaWQ6ICdyb3dDb3VudCcsXG4gICAgY29tcG9uZW50OiBSb3dDb3VudCxcbiAgICBpc0VkaXRlZDogaXNFZGl0ZWQkNixcbiAgICBlZGl0RmllbGQsXG4gICAgZmllbGQsXG4gICAgaXNEZWZhdWx0VmlzaWJsZTogZmllbGQgPT4gZmllbGQudHlwZSA9PT0gJ3RhYmxlJyAmJiBpc051bWJlcihnZXQoZmllbGQsIHBhdGgkMikpXG4gIH0pO1xuICByZXR1cm4gZW50cmllcztcbn1cbmZ1bmN0aW9uIFJvd0NvdW50KHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBlZGl0RmllbGQsXG4gICAgZmllbGQsXG4gICAgaWRcbiAgfSA9IHByb3BzO1xuICBjb25zdCBkZWJvdW5jZSA9IHVzZVNlcnZpY2UoJ2RlYm91bmNlJyk7XG4gIGNvbnN0IGdldFZhbHVlID0gKCkgPT4gZ2V0KGZpZWxkLCBwYXRoJDIpO1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcnx2b2lkfSB2YWx1ZVxuICAgKiBAcGFyYW0ge3N0cmluZ3xudWxsfSBlcnJvclxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gIGNvbnN0IHNldFZhbHVlID0gKHZhbHVlLCBlcnJvcikgPT4ge1xuICAgIGlmIChlcnJvcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBlZGl0RmllbGQoZmllbGQsIHBhdGgkMiwgdmFsdWUpO1xuICB9O1xuICByZXR1cm4gTnVtYmVyRmllbGRFbnRyeSh7XG4gICAgZGVib3VuY2UsXG4gICAgbGFiZWw6ICdOdW1iZXIgb2Ygcm93cyBwZXIgcGFnZScsXG4gICAgZWxlbWVudDogZmllbGQsXG4gICAgaWQsXG4gICAgZ2V0VmFsdWUsXG4gICAgc2V0VmFsdWUsXG4gICAgdmFsaWRhdGU6IHZhbGlkYXRlJDRcbiAgfSk7XG59XG5cbi8vIGhlbHBlcnMgLy8vLy8vLy8vL1xuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfHZvaWR9IHZhbHVlXG4gKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9XG4gKi9cbmNvbnN0IHZhbGlkYXRlJDQgPSB2YWx1ZSA9PiB7XG4gIGlmIChpc05pbCh2YWx1ZSkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBpZiAoIWlzTnVtYmVyKHZhbHVlKSkge1xuICAgIHJldHVybiAnTXVzdCBiZSBudW1iZXInO1xuICB9XG4gIGlmICghTnVtYmVyLmlzSW50ZWdlcih2YWx1ZSkpIHtcbiAgICByZXR1cm4gJ1Nob3VsZCBiZSBhbiBpbnRlZ2VyLic7XG4gIH1cbiAgaWYgKHZhbHVlIDwgMSkge1xuICAgIHJldHVybiAnU2hvdWxkIGJlIGdyZWF0ZXIgdGhhbiB6ZXJvLic7XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59O1xuXG5jb25zdCBPUFRJT05TID0ge1xuICBzdGF0aWM6IHtcbiAgICBsYWJlbDogJ0xpc3Qgb2YgaXRlbXMnLFxuICAgIHZhbHVlOiAnc3RhdGljJ1xuICB9LFxuICBleHByZXNzaW9uOiB7XG4gICAgbGFiZWw6ICdFeHByZXNzaW9uJyxcbiAgICB2YWx1ZTogJ2V4cHJlc3Npb24nXG4gIH1cbn07XG5jb25zdCBTRUxFQ1RfT1BUSU9OUyA9IE9iamVjdC52YWx1ZXMoT1BUSU9OUyk7XG5jb25zdCBDT0xVTU5TX1BBVEggPSBbJ2NvbHVtbnMnXTtcbmNvbnN0IENPTFVNTlNfRVhQUkVTU0lPTl9QQVRIID0gWydjb2x1bW5zRXhwcmVzc2lvbiddO1xuY29uc3QgaXNIZWFkZXJzU291cmNlRWRpdGVkID0gaXNFZGl0ZWRGcm9tRGVmYXVsdEZhY3RvcnkoT1BUSU9OUy5zdGF0aWMudmFsdWUpO1xuZnVuY3Rpb24gSGVhZGVyc1NvdXJjZVNlbGVjdEVudHJ5KHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBlZGl0RmllbGQsXG4gICAgZmllbGQsXG4gICAgaWRcbiAgfSA9IHByb3BzO1xuICByZXR1cm4gW3tcbiAgICBpZDogaWQgKyAnLXNlbGVjdCcsXG4gICAgY29tcG9uZW50OiBIZWFkZXJzU291cmNlU2VsZWN0LFxuICAgIGlzRWRpdGVkOiBpc0hlYWRlcnNTb3VyY2VFZGl0ZWQsXG4gICAgZWRpdEZpZWxkLFxuICAgIGZpZWxkXG4gIH1dO1xufVxuZnVuY3Rpb24gSGVhZGVyc1NvdXJjZVNlbGVjdChwcm9wcykge1xuICBjb25zdCB7XG4gICAgZWRpdEZpZWxkLFxuICAgIGZpZWxkLFxuICAgIGlkXG4gIH0gPSBwcm9wcztcblxuICAvKipcbiAgICogQHJldHVybnMge3N0cmluZ3x2b2lkfVxuICAgKi9cbiAgY29uc3QgZ2V0VmFsdWUgPSAoKSA9PiB7XG4gICAgY29uc3QgY29sdW1ucyA9IGdldChmaWVsZCwgQ09MVU1OU19QQVRIKTtcbiAgICBjb25zdCBjb2x1bW5zRXhwcmVzc2lvbiA9IGdldChmaWVsZCwgQ09MVU1OU19FWFBSRVNTSU9OX1BBVEgpO1xuICAgIGlmIChpc1N0cmluZyhjb2x1bW5zRXhwcmVzc2lvbikpIHtcbiAgICAgIHJldHVybiBPUFRJT05TLmV4cHJlc3Npb24udmFsdWU7XG4gICAgfVxuICAgIGlmIChpc0FycmF5KGNvbHVtbnMpKSB7XG4gICAgICByZXR1cm4gT1BUSU9OUy5zdGF0aWMudmFsdWU7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ3x2b2lkfSB2YWx1ZVxuICAgKi9cbiAgY29uc3Qgc2V0VmFsdWUgPSB2YWx1ZSA9PiB7XG4gICAgc3dpdGNoICh2YWx1ZSkge1xuICAgICAgY2FzZSBPUFRJT05TLnN0YXRpYy52YWx1ZTpcbiAgICAgICAgZWRpdEZpZWxkKGZpZWxkLCB7XG4gICAgICAgICAgY29sdW1uczogW3tcbiAgICAgICAgICAgIGxhYmVsOiAnQ29sdW1uJyxcbiAgICAgICAgICAgIGtleTogJ2lucHV0VmFyaWFibGUnXG4gICAgICAgICAgfV1cbiAgICAgICAgfSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBPUFRJT05TLmV4cHJlc3Npb24udmFsdWU6XG4gICAgICAgIGVkaXRGaWVsZChmaWVsZCwge1xuICAgICAgICAgIGNvbHVtbnNFeHByZXNzaW9uOiAnPSdcbiAgICAgICAgfSk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgZ2V0VmFsdWVzU291cmNlT3B0aW9ucyA9ICgpID0+IHtcbiAgICByZXR1cm4gU0VMRUNUX09QVElPTlM7XG4gIH07XG4gIHJldHVybiBBdXRvRm9jdXNTZWxlY3RFbnRyeSh7XG4gICAgYXV0b0ZvY3VzRW50cnk6IGdldEF1dG9Gb2N1c0VudHJ5SWQoZmllbGQpLFxuICAgIGxhYmVsOiAnVHlwZScsXG4gICAgZWxlbWVudDogZmllbGQsXG4gICAgZ2V0T3B0aW9uczogZ2V0VmFsdWVzU291cmNlT3B0aW9ucyxcbiAgICBnZXRWYWx1ZSxcbiAgICBpZCxcbiAgICBzZXRWYWx1ZVxuICB9KTtcbn1cblxuLy8gaGVscGVycyAvLy8vLy8vLy8vXG5cbmZ1bmN0aW9uIGdldEF1dG9Gb2N1c0VudHJ5SWQoZmllbGQpIHtcbiAgY29uc3QgY29sdW1ucyA9IGdldChmaWVsZCwgQ09MVU1OU19QQVRIKTtcbiAgY29uc3QgY29sdW1uc0V4cHJlc3Npb24gPSBnZXQoZmllbGQsIENPTFVNTlNfRVhQUkVTU0lPTl9QQVRIKTtcbiAgaWYgKGlzU3RyaW5nKGNvbHVtbnNFeHByZXNzaW9uKSkge1xuICAgIHJldHVybiBgJHtmaWVsZC5pZH0tY29sdW1uc0V4cHJlc3Npb25gO1xuICB9XG4gIGlmIChpc0FycmF5KGNvbHVtbnMpKSB7XG4gICAgcmV0dXJuIGAke2ZpZWxkLmlkfS1jb2x1bW5zLTAtbGFiZWxgO1xuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG5jb25zdCBQQVRIID0gWydjb2x1bW5zRXhwcmVzc2lvbiddO1xuZnVuY3Rpb24gQ29sdW1uc0V4cHJlc3Npb25FbnRyeShwcm9wcykge1xuICBjb25zdCB7XG4gICAgZWRpdEZpZWxkLFxuICAgIGZpZWxkXG4gIH0gPSBwcm9wcztcbiAgY29uc3QgZW50cmllcyA9IFtdO1xuICBlbnRyaWVzLnB1c2goe1xuICAgIGlkOiBgJHtmaWVsZC5pZH0tY29sdW1uc0V4cHJlc3Npb25gLFxuICAgIGNvbXBvbmVudDogQ29sdW1uc0V4cHJlc3Npb24sXG4gICAgZWRpdEZpZWxkOiBlZGl0RmllbGQsXG4gICAgZmllbGQ6IGZpZWxkLFxuICAgIGlzRWRpdGVkOiBpc0VkaXRlZCQ1LFxuICAgIGlzRGVmYXVsdFZpc2libGU6IGZpZWxkID0+IGZpZWxkLnR5cGUgPT09ICd0YWJsZScgJiYgaXNTdHJpbmcoZ2V0KGZpZWxkLCBQQVRIKSlcbiAgfSk7XG4gIHJldHVybiBlbnRyaWVzO1xufVxuZnVuY3Rpb24gQ29sdW1uc0V4cHJlc3Npb24ocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGVkaXRGaWVsZCxcbiAgICBmaWVsZCxcbiAgICBpZFxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IGRlYm91bmNlID0gdXNlU2VydmljZSgnZGVib3VuY2UnKTtcbiAgY29uc3QgdmFyaWFibGVzID0gdXNlVmFyaWFibGVzKCkubWFwKG5hbWUgPT4gKHtcbiAgICBuYW1lXG4gIH0pKTtcbiAgY29uc3QgZ2V0VmFsdWUgPSAoKSA9PiB7XG4gICAgcmV0dXJuIGdldChmaWVsZCwgUEFUSCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfHZvaWR9IHZhbHVlXG4gICAqIEBwYXJhbSB7c3RyaW5nfHZvaWR9IGVycm9yXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi9cbiAgY29uc3Qgc2V0VmFsdWUgPSAodmFsdWUsIGVycm9yKSA9PiB7XG4gICAgaWYgKGVycm9yKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGVkaXRGaWVsZChmaWVsZCwgUEFUSCwgdmFsdWUpO1xuICB9O1xuICBjb25zdCBzY2hlbWEgPSAnW1xcbiAge1xcbiAgICBcImtleVwiOiBcImNvbHVtbl8xXCIsXFxuICAgIFwibGFiZWxcIjogXCJDb2x1bW4gMVwiXFxuICB9XFxuXSc7XG4gIGNvbnN0IHRvb2x0aXAgPSBqc3hzKFwiZGl2XCIsIHtcbiAgICBjaGlsZHJlbjogW1wiVGhlIGV4cHJlc3Npb24gbWF5IHJlc3VsdCBpbiBhbiBhcnJheSBvZiBzaW1wbGUgdmFsdWVzIG9yIGFsdGVybmF0aXZlbHkgZm9sbG93IHRoaXMgc2NoZW1hOlwiLCBqc3goXCJwcmVcIiwge1xuICAgICAgY2hpbGRyZW46IGpzeChcImNvZGVcIiwge1xuICAgICAgICBjaGlsZHJlbjogc2NoZW1hXG4gICAgICB9KVxuICAgIH0pXVxuICB9KTtcbiAgcmV0dXJuIEZlZWxUZW1wbGF0aW5nRW50cnkoe1xuICAgIGRlYm91bmNlLFxuICAgIGRlc2NyaXB0aW9uOiAnU3BlY2lmeSBhbiBleHByZXNzaW9uIHRvIHBvcHVsYXRlIGNvbHVtbiBpdGVtcycsXG4gICAgZWxlbWVudDogZmllbGQsXG4gICAgZmVlbDogJ3JlcXVpcmVkJyxcbiAgICBnZXRWYWx1ZSxcbiAgICBpZCxcbiAgICBsYWJlbDogJ0V4cHJlc3Npb24nLFxuICAgIHRvb2x0aXAsXG4gICAgc2V0VmFsdWUsXG4gICAgc2luZ2xlTGluZTogdHJ1ZSxcbiAgICB2YXJpYWJsZXMsXG4gICAgdmFsaWRhdGU6IHZhbGlkYXRlJDNcbiAgfSk7XG59XG5cbi8vIGhlbHBlcnMgLy8vLy8vLy8vL1xuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfHZvaWR9IHZhbHVlXG4gKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9XG4gKi9cbmNvbnN0IHZhbGlkYXRlJDMgPSB2YWx1ZSA9PiB7XG4gIGlmICghaXNTdHJpbmcodmFsdWUpIHx8IHZhbHVlLmxlbmd0aCA9PT0gMCB8fCB2YWx1ZSA9PT0gJz0nKSB7XG4gICAgcmV0dXJuICdNdXN0IG5vdCBiZSBlbXB0eS4nO1xuICB9XG4gIHJldHVybiBudWxsO1xufTtcblxuY29uc3QgcGF0aCQxID0gJ2NvbHVtbnMnO1xuY29uc3QgbGFiZWxQYXRoID0gJ2xhYmVsJztcbmNvbnN0IGtleVBhdGggPSAna2V5JztcbmZ1bmN0aW9uIENvbHVtbkVudHJ5KHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBlZGl0RmllbGQsXG4gICAgZmllbGQsXG4gICAgaWRQcmVmaXgsXG4gICAgaW5kZXhcbiAgfSA9IHByb3BzO1xuICBjb25zdCBlbnRyaWVzID0gW3tcbiAgICBjb21wb25lbnQ6IExhYmVsLFxuICAgIGVkaXRGaWVsZCxcbiAgICBmaWVsZCxcbiAgICBpZDogaWRQcmVmaXggKyAnLWxhYmVsJyxcbiAgICBpZFByZWZpeCxcbiAgICBpbmRleFxuICB9LCB7XG4gICAgY29tcG9uZW50OiBLZXksXG4gICAgZWRpdEZpZWxkLFxuICAgIGZpZWxkLFxuICAgIGlkOiBpZFByZWZpeCArICcta2V5JyxcbiAgICBpZFByZWZpeCxcbiAgICBpbmRleFxuICB9XTtcbiAgcmV0dXJuIGVudHJpZXM7XG59XG5mdW5jdGlvbiBMYWJlbChwcm9wcykge1xuICBjb25zdCB7XG4gICAgZWRpdEZpZWxkLFxuICAgIGZpZWxkLFxuICAgIGlkLFxuICAgIGluZGV4XG4gIH0gPSBwcm9wcztcbiAgY29uc3QgZGVib3VuY2UgPSB1c2VTZXJ2aWNlKCdkZWJvdW5jZScpO1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ3x2b2lkfSB2YWx1ZVxuICAgKiBAcGFyYW0ge3N0cmluZ3x2b2lkfSBlcnJvclxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gIGNvbnN0IHNldFZhbHVlID0gKHZhbHVlLCBlcnJvcikgPT4ge1xuICAgIGlmIChlcnJvcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBjb2x1bW5zID0gZ2V0KGZpZWxkLCBbcGF0aCQxXSk7XG4gICAgZWRpdEZpZWxkKGZpZWxkLCBwYXRoJDEsIHNldCQxKGNvbHVtbnMsIFtpbmRleCwgbGFiZWxQYXRoXSwgdmFsdWUpKTtcbiAgfTtcbiAgY29uc3QgZ2V0VmFsdWUgPSAoKSA9PiB7XG4gICAgcmV0dXJuIGdldChmaWVsZCwgW3BhdGgkMSwgaW5kZXgsIGxhYmVsUGF0aF0pO1xuICB9O1xuICByZXR1cm4gVGV4dGZpZWxkRW50cnkoe1xuICAgIGRlYm91bmNlLFxuICAgIGVsZW1lbnQ6IGZpZWxkLFxuICAgIGdldFZhbHVlLFxuICAgIGlkLFxuICAgIGxhYmVsOiAnTGFiZWwnLFxuICAgIHNldFZhbHVlXG4gIH0pO1xufVxuZnVuY3Rpb24gS2V5KHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBlZGl0RmllbGQsXG4gICAgZmllbGQsXG4gICAgaWQsXG4gICAgaW5kZXhcbiAgfSA9IHByb3BzO1xuICBjb25zdCBkZWJvdW5jZSA9IHVzZVNlcnZpY2UoJ2RlYm91bmNlJyk7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfHZvaWR9IHZhbHVlXG4gICAqIEBwYXJhbSB7c3RyaW5nfHZvaWR9IGVycm9yXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi9cbiAgY29uc3Qgc2V0VmFsdWUgPSAodmFsdWUsIGVycm9yKSA9PiB7XG4gICAgaWYgKGVycm9yKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGNvbHVtbnMgPSBnZXQoZmllbGQsIFtwYXRoJDFdKTtcbiAgICBlZGl0RmllbGQoZmllbGQsIHBhdGgkMSwgc2V0JDEoY29sdW1ucywgW2luZGV4LCBrZXlQYXRoXSwgdmFsdWUpKTtcbiAgfTtcbiAgY29uc3QgZ2V0VmFsdWUgPSAoKSA9PiB7XG4gICAgcmV0dXJuIGdldChmaWVsZCwgW3BhdGgkMSwgaW5kZXgsIGtleVBhdGhdKTtcbiAgfTtcbiAgcmV0dXJuIFRleHRmaWVsZEVudHJ5KHtcbiAgICBkZWJvdW5jZSxcbiAgICBlbGVtZW50OiBmaWVsZCxcbiAgICBnZXRWYWx1ZSxcbiAgICBpZCxcbiAgICBsYWJlbDogJ0tleScsXG4gICAgc2V0VmFsdWUsXG4gICAgdmFsaWRhdGU6IHZhbGlkYXRlJDJcbiAgfSk7XG59XG5cbi8vIGhlbHBlcnMgLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfHZvaWR9IHZhbHVlXG4gKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9XG4gKi9cbmZ1bmN0aW9uIHZhbGlkYXRlJDIodmFsdWUpIHtcbiAgaWYgKCFpc1N0cmluZyh2YWx1ZSkgfHwgdmFsdWUubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuICdNdXN0IG5vdCBiZSBlbXB0eS4nO1xuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG5jb25zdCBwYXRoID0gWydjb2x1bW5zJ107XG5mdW5jdGlvbiBTdGF0aWNDb2x1bW5zU291cmNlRW50cnkocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGVkaXRGaWVsZCxcbiAgICBmaWVsZCxcbiAgICBpZDogaWRQcmVmaXhcbiAgfSA9IHByb3BzO1xuICBjb25zdCB7XG4gICAgY29sdW1uc1xuICB9ID0gZmllbGQ7XG4gIGNvbnN0IGFkZEVudHJ5ID0gZXZlbnQgPT4ge1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIGNvbnN0IGVudHJ5ID0ge1xuICAgICAgbGFiZWw6ICdDb2x1bW4nLFxuICAgICAga2V5OiAnaW5wdXRWYXJpYWJsZSdcbiAgICB9O1xuICAgIGVkaXRGaWVsZChmaWVsZCwgcGF0aCwgYXJyYXlBZGQoY29sdW1ucywgY29sdW1ucy5sZW5ndGgsIGVudHJ5KSk7XG4gIH07XG4gIGNvbnN0IHJlbW92ZUVudHJ5ID0gZW50cnkgPT4ge1xuICAgIGVkaXRGaWVsZChmaWVsZCwgcGF0aCwgd2l0aG91dChjb2x1bW5zLCBlbnRyeSkpO1xuICB9O1xuICBjb25zdCBpdGVtcyA9IGNvbHVtbnMubWFwKChlbnRyeSwgaW5kZXgpID0+IHtcbiAgICBjb25zdCBpZCA9IGAke2lkUHJlZml4fS0ke2luZGV4fWA7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkLFxuICAgICAgbGFiZWw6IGVudHJ5LmxhYmVsIHx8IGVudHJ5LmtleSxcbiAgICAgIGVudHJpZXM6IENvbHVtbkVudHJ5KHtcbiAgICAgICAgZWRpdEZpZWxkLFxuICAgICAgICBmaWVsZCxcbiAgICAgICAgaWRQcmVmaXg6IGlkLFxuICAgICAgICBpbmRleFxuICAgICAgfSksXG4gICAgICBhdXRvRm9jdXNFbnRyeTogYCR7aWR9LWxhYmVsYCxcbiAgICAgIHJlbW92ZTogKCkgPT4gcmVtb3ZlRW50cnkoZW50cnkpXG4gICAgfTtcbiAgfSk7XG4gIHJldHVybiB7XG4gICAgaXRlbXMsXG4gICAgYWRkOiBhZGRFbnRyeVxuICB9O1xufVxuXG5mdW5jdGlvbiBWZXJzaW9uVGFnRW50cnkocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGVkaXRGaWVsZCxcbiAgICBmaWVsZFxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IGVudHJpZXMgPSBbXTtcbiAgZW50cmllcy5wdXNoKHtcbiAgICBpZDogJ3ZlcnNpb25UYWcnLFxuICAgIGNvbXBvbmVudDogVmVyc2lvblRhZyxcbiAgICBlZGl0RmllbGQ6IGVkaXRGaWVsZCxcbiAgICBmaWVsZDogZmllbGQsXG4gICAgaXNFZGl0ZWQ6IGlzRWRpdGVkLFxuICAgIGlzRGVmYXVsdFZpc2libGU6IGZpZWxkID0+IGZpZWxkLnR5cGUgPT09ICdkZWZhdWx0J1xuICB9KTtcbiAgcmV0dXJuIGVudHJpZXM7XG59XG5mdW5jdGlvbiBWZXJzaW9uVGFnKHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBlZGl0RmllbGQsXG4gICAgZmllbGQsXG4gICAgaWRcbiAgfSA9IHByb3BzO1xuICBjb25zdCBkZWJvdW5jZSA9IHVzZVNlcnZpY2UoJ2RlYm91bmNlJyk7XG4gIGNvbnN0IHBhdGggPSBbJ3ZlcnNpb25UYWcnXTtcbiAgY29uc3QgZ2V0VmFsdWUgPSAoKSA9PiB7XG4gICAgcmV0dXJuIGdldChmaWVsZCwgcGF0aCwgJycpO1xuICB9O1xuICBjb25zdCBzZXRWYWx1ZSA9ICh2YWx1ZSwgZXJyb3IpID0+IHtcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcmV0dXJuIGVkaXRGaWVsZChmaWVsZCwgcGF0aCwgdmFsdWUpO1xuICB9O1xuICBjb25zdCB0b29sdGlwID0ganN4KFwiZGl2XCIsIHtcbiAgICBjaGlsZHJlbjogXCJWZXJzaW9uIHRhZyBieSB3aGljaCB0aGlzIGZvcm0gY2FuIGJlIHJlZmVyZW5jZWQuXCJcbiAgfSk7XG4gIHJldHVybiBUZXh0ZmllbGRFbnRyeSh7XG4gICAgZGVib3VuY2UsXG4gICAgZWxlbWVudDogZmllbGQsXG4gICAgZ2V0VmFsdWUsXG4gICAgaWQsXG4gICAgbGFiZWw6ICdWZXJzaW9uIHRhZycsXG4gICAgc2V0VmFsdWUsXG4gICAgdG9vbHRpcFxuICB9KTtcbn1cblxuZnVuY3Rpb24gQWNjZXB0RW50cnkocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGVkaXRGaWVsZCxcbiAgICBmaWVsZFxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IGVudHJpZXMgPSBbXTtcbiAgZW50cmllcy5wdXNoKHtcbiAgICBpZDogJ2FjY2VwdCcsXG4gICAgY29tcG9uZW50OiBBY2NlcHQsXG4gICAgZWRpdEZpZWxkOiBlZGl0RmllbGQsXG4gICAgZmllbGQ6IGZpZWxkLFxuICAgIGlzRWRpdGVkOiBpc0VkaXRlZCQ1LFxuICAgIGlzRGVmYXVsdFZpc2libGU6IGZpZWxkID0+IGZpZWxkLnR5cGUgPT09ICdmaWxlcGlja2VyJ1xuICB9KTtcbiAgcmV0dXJuIGVudHJpZXM7XG59XG5mdW5jdGlvbiBBY2NlcHQocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGVkaXRGaWVsZCxcbiAgICBmaWVsZCxcbiAgICBpZFxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IGRlYm91bmNlID0gdXNlU2VydmljZSgnZGVib3VuY2UnKTtcbiAgY29uc3QgdmFyaWFibGVzID0gdXNlVmFyaWFibGVzKCkubWFwKG5hbWUgPT4gKHtcbiAgICBuYW1lXG4gIH0pKTtcbiAgY29uc3QgcGF0aCA9IFsnYWNjZXB0J107XG4gIGNvbnN0IGdldFZhbHVlID0gKCkgPT4ge1xuICAgIHJldHVybiBnZXQoZmllbGQsIHBhdGgsICcnKTtcbiAgfTtcbiAgY29uc3Qgc2V0VmFsdWUgPSB2YWx1ZSA9PiB7XG4gICAgcmV0dXJuIGVkaXRGaWVsZChmaWVsZCwgcGF0aCwgdmFsdWUpO1xuICB9O1xuICByZXR1cm4gRmVlbFRlbXBsYXRpbmdFbnRyeSh7XG4gICAgZGVib3VuY2UsXG4gICAgZWxlbWVudDogZmllbGQsXG4gICAgZ2V0VmFsdWUsXG4gICAgaWQsXG4gICAgbGFiZWw6ICdTdXBwb3J0ZWQgZmlsZSBmb3JtYXRzJyxcbiAgICBzaW5nbGVMaW5lOiB0cnVlLFxuICAgIHNldFZhbHVlLFxuICAgIHZhcmlhYmxlcyxcbiAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24kMVxuICB9KTtcbn1cblxuLy8gaGVscGVycyAvLy8vLy8vLy8vXG5cbmNvbnN0IGRlc2NyaXB0aW9uJDEgPSBqc3hzKEZyYWdtZW50JDEsIHtcbiAgY2hpbGRyZW46IFtcIkEgY29tbWEtc2VwYXJhdGVkIGxpc3Qgb2ZcIiwgJyAnLCBqc3goXCJhXCIsIHtcbiAgICBocmVmOiBcImh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0hUTUwvRWxlbWVudC9pbnB1dC9maWxlI3VuaXF1ZV9maWxlX3R5cGVfc3BlY2lmaWVyc1wiLFxuICAgIHRhcmdldDogXCJfYmxhbmtcIixcbiAgICByZWw6IFwibm9yZWZlcnJlclwiLFxuICAgIGNoaWxkcmVuOiBcImZpbGUgdHlwZSBzcGVjaWZpZXJzXCJcbiAgfSldXG59KTtcblxuZnVuY3Rpb24gTXVsdGlwbGVFbnRyeShwcm9wcykge1xuICBjb25zdCB7XG4gICAgZWRpdEZpZWxkLFxuICAgIGZpZWxkXG4gIH0gPSBwcm9wcztcbiAgY29uc3QgZW50cmllcyA9IFtdO1xuICBlbnRyaWVzLnB1c2goe1xuICAgIGlkOiAnbXVsdGlwbGUnLFxuICAgIGNvbXBvbmVudDogTXVsdGlwbGUsXG4gICAgZWRpdEZpZWxkOiBlZGl0RmllbGQsXG4gICAgZmllbGQ6IGZpZWxkLFxuICAgIGlzRWRpdGVkOiBpc0VkaXRlZCQ1LFxuICAgIGlzRGVmYXVsdFZpc2libGU6IGZpZWxkID0+IGZpZWxkLnR5cGUgPT09ICdmaWxlcGlja2VyJ1xuICB9KTtcbiAgcmV0dXJuIGVudHJpZXM7XG59XG5mdW5jdGlvbiBNdWx0aXBsZShwcm9wcykge1xuICBjb25zdCB7XG4gICAgZWRpdEZpZWxkLFxuICAgIGZpZWxkLFxuICAgIGlkXG4gIH0gPSBwcm9wcztcbiAgY29uc3QgZGVib3VuY2UgPSB1c2VTZXJ2aWNlKCdkZWJvdW5jZScpO1xuICBjb25zdCB2YXJpYWJsZXMgPSB1c2VWYXJpYWJsZXMoKS5tYXAobmFtZSA9PiAoe1xuICAgIG5hbWVcbiAgfSkpO1xuICBjb25zdCBwYXRoID0gWydtdWx0aXBsZSddO1xuICBjb25zdCBnZXRWYWx1ZSA9ICgpID0+IHtcbiAgICByZXR1cm4gZ2V0KGZpZWxkLCBwYXRoLCAnJyk7XG4gIH07XG4gIGNvbnN0IHNldFZhbHVlID0gdmFsdWUgPT4ge1xuICAgIHJldHVybiBlZGl0RmllbGQoZmllbGQsIHBhdGgsIHZhbHVlKTtcbiAgfTtcbiAgcmV0dXJuIEZlZWxUb2dnbGVTd2l0Y2hFbnRyeSh7XG4gICAgZGVib3VuY2UsXG4gICAgZWxlbWVudDogZmllbGQsXG4gICAgZmVlbDogJ29wdGlvbmFsJyxcbiAgICBnZXRWYWx1ZSxcbiAgICBpZCxcbiAgICBsYWJlbDogJ1VwbG9hZCBtdWx0aXBsZSBmaWxlcycsXG4gICAgaW5saW5lOiB0cnVlLFxuICAgIHNldFZhbHVlLFxuICAgIHZhcmlhYmxlc1xuICB9KTtcbn1cblxuZnVuY3Rpb24gRG9jdW1lbnRzRGF0YVNvdXJjZUVudHJ5KHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBlZGl0RmllbGQsXG4gICAgZmllbGRcbiAgfSA9IHByb3BzO1xuICBjb25zdCBlbnRyaWVzID0gW107XG4gIGVudHJpZXMucHVzaCh7XG4gICAgaWQ6ICdkYXRhU291cmNlJyxcbiAgICBjb21wb25lbnQ6IERvY3VtZW50c0RhdGFTb3VyY2UsXG4gICAgZWRpdEZpZWxkOiBlZGl0RmllbGQsXG4gICAgZmllbGQ6IGZpZWxkLFxuICAgIGlzRWRpdGVkOiBpc0VkaXRlZCQ1LFxuICAgIGlzRGVmYXVsdFZpc2libGU6IGZpZWxkID0+IGZpZWxkLnR5cGUgPT09ICdkb2N1bWVudFByZXZpZXcnXG4gIH0pO1xuICByZXR1cm4gZW50cmllcztcbn1cbmZ1bmN0aW9uIERvY3VtZW50c0RhdGFTb3VyY2UocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGVkaXRGaWVsZCxcbiAgICBmaWVsZCxcbiAgICBpZFxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IGRlYm91bmNlID0gdXNlU2VydmljZSgnZGVib3VuY2UnKTtcbiAgY29uc3QgdmFyaWFibGVzID0gdXNlVmFyaWFibGVzKCkubWFwKG5hbWUgPT4gKHtcbiAgICBuYW1lXG4gIH0pKTtcbiAgY29uc3QgcGF0aCA9IFsnZGF0YVNvdXJjZSddO1xuICBjb25zdCBnZXRWYWx1ZSA9ICgpID0+IHtcbiAgICByZXR1cm4gZ2V0KGZpZWxkLCBwYXRoLCAnJyk7XG4gIH07XG4gIGNvbnN0IHNldFZhbHVlID0gdmFsdWUgPT4ge1xuICAgIHJldHVybiBlZGl0RmllbGQoZmllbGQsIHBhdGgsIHZhbHVlKTtcbiAgfTtcbiAgY29uc3Qgc2NoZW1hID0gYFtcbiAge1xuICAgIFwiZG9jdW1lbnRJZFwiOiBcInUxMjNcIixcbiAgICBcImVuZHBvaW50XCI6IFwiaHR0cHM6Ly9hcGkuZXhhbXBsZS5jb20vZG9jdW1lbnRzL3UxMjNcIixcbiAgICBcIm1ldGFkYXRhXCI6IHtcbiAgICAgIFwiZmlsZU5hbWVcIjogXCJEb2N1bWVudC5wZGZcIixcbiAgICAgIFwiY29udGVudFR5cGVcIjogXCJhcHBsaWNhdGlvbi9wZGZcIlxuICAgIH1cbiAgfVxuXWA7XG4gIGNvbnN0IHRvb2x0aXAgPSBqc3hzKFwiZGl2XCIsIHtcbiAgICBjaGlsZHJlbjogW2pzeChcInBcIiwge1xuICAgICAgY2hpbGRyZW46IFwiQSBzb3VyY2UgaXMgYSBKU09OIG9iamVjdCBjb250YWluaW5nIG1ldGFkYXRhIGZvciBhIGRvY3VtZW50IG9yIGFuIGFycmF5IG9mIGRvY3VtZW50cy5cIlxuICAgIH0pLCBqc3goXCJwXCIsIHtcbiAgICAgIGNoaWxkcmVuOiBcIkVhY2ggZW50cnkgbXVzdCBpbmNsdWRlIGEgZG9jdW1lbnQgSUQsIG5hbWUsIGFuZCBNSU1FIHR5cGUuXCJcbiAgICB9KSwganN4KFwicFwiLCB7XG4gICAgICBjaGlsZHJlbjogXCJBZGRpdGlvbmFsIGRldGFpbHMgYXJlIG9wdGlvbmFsLiBUaGUgZXhwZWN0ZWQgZm9ybWF0IGlzIGFzIGZvbGxvd3M6XCJcbiAgICB9KSwganN4KFwicHJlXCIsIHtcbiAgICAgIGNoaWxkcmVuOiBqc3goXCJjb2RlXCIsIHtcbiAgICAgICAgY2hpbGRyZW46IHNjaGVtYVxuICAgICAgfSlcbiAgICB9KSwganN4KFwicFwiLCB7XG4gICAgICBjaGlsZHJlbjogXCJXaGVuIHVzaW5nIENhbXVuZGEgVGFza2xpc3QgVUksIGFkZGl0aW9uYWwgZG9jdW1lbnQgcmVmZXJlbmNlIGF0dHJpYnV0ZXMgYXJlIGF1dG9tYXRpY2FsbHkgaGFuZGxlZC4gTW9kaWZ5aW5nIHRoZSBkb2N1bWVudCByZWZlcmVuY2UgbWF5IGFmZmVjdCB0aGUgZG9jdW1lbnQgcHJldmlldyBmdW5jdGlvbmFsaXR5LlwiXG4gICAgfSksIGpzeHMoXCJwXCIsIHtcbiAgICAgIGNoaWxkcmVuOiBbXCJMZWFybiBtb3JlIGluIG91clwiLCAnICcsIGpzeChcImFcIiwge1xuICAgICAgICBocmVmOiBcImh0dHBzOi8vZG9jcy5jYW11bmRhLmlvL2RvY3MvY29tcG9uZW50cy9tb2RlbGVyL2Zvcm1zL2Zvcm0tZWxlbWVudC1saWJyYXJ5L2Zvcm1zLWVsZW1lbnQtbGlicmFyeS1kb2N1bWVudC1wcmV2aWV3L1wiLFxuICAgICAgICB0YXJnZXQ6IFwiX2JsYW5rXCIsXG4gICAgICAgIHJlbDogXCJub29wZW5lciBub3JlZmVycmVyXCIsXG4gICAgICAgIGNoaWxkcmVuOiBcImRvY3VtZW50YXRpb25cIlxuICAgICAgfSksIFwiLlwiXVxuICAgIH0pXVxuICB9KTtcbiAgcmV0dXJuIEZlZWxUZW1wbGF0aW5nRW50cnkoe1xuICAgIGRlYm91bmNlLFxuICAgIGVsZW1lbnQ6IGZpZWxkLFxuICAgIGdldFZhbHVlLFxuICAgIGlkLFxuICAgIGxhYmVsOiAnRG9jdW1lbnQgcmVmZXJlbmNlJyxcbiAgICBmZWVsOiAncmVxdWlyZWQnLFxuICAgIHNpbmdsZUxpbmU6IHRydWUsXG4gICAgc2V0VmFsdWUsXG4gICAgdmFyaWFibGVzLFxuICAgIHRvb2x0aXAsXG4gICAgdmFsaWRhdGU6IHZhbGlkYXRlJDFcbiAgfSk7XG59XG5cbi8vIGhlbHBlcnMgLy8vLy8vLy8vL1xuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfHVuZGVmaW5lZH0gdmFsdWVcbiAqIEByZXR1cm5zIHtzdHJpbmd8bnVsbH1cbiAqL1xuY29uc3QgdmFsaWRhdGUkMSA9IHZhbHVlID0+IHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycgfHwgdmFsdWUubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuICdUaGUgZG9jdW1lbnQgZGF0YSBzb3VyY2UgaXMgcmVxdWlyZWQuJztcbiAgfVxufTtcblxuZnVuY3Rpb24gTWF4SGVpZ2h0RW50cnkocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGVkaXRGaWVsZCxcbiAgICBmaWVsZFxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IGVudHJpZXMgPSBbXTtcbiAgZW50cmllcy5wdXNoKHtcbiAgICBpZDogJ21heEhlaWdodCcsXG4gICAgY29tcG9uZW50OiBNYXhIZWlnaHQsXG4gICAgZWRpdEZpZWxkOiBlZGl0RmllbGQsXG4gICAgZmllbGQ6IGZpZWxkLFxuICAgIGlzRWRpdGVkOiBpc0VkaXRlZCQ2LFxuICAgIGlzRGVmYXVsdFZpc2libGU6IGZpZWxkID0+IGZpZWxkLnR5cGUgPT09ICdkb2N1bWVudFByZXZpZXcnXG4gIH0pO1xuICByZXR1cm4gZW50cmllcztcbn1cbmZ1bmN0aW9uIE1heEhlaWdodChwcm9wcykge1xuICBjb25zdCB7XG4gICAgZWRpdEZpZWxkLFxuICAgIGZpZWxkLFxuICAgIGlkXG4gIH0gPSBwcm9wcztcbiAgY29uc3QgZGVib3VuY2UgPSB1c2VTZXJ2aWNlKCdkZWJvdW5jZScpO1xuICBjb25zdCBwYXRoID0gWydtYXhIZWlnaHQnXTtcbiAgY29uc3QgZ2V0VmFsdWUgPSAoKSA9PiB7XG4gICAgcmV0dXJuIGdldChmaWVsZCwgcGF0aCwgJycpO1xuICB9O1xuICBjb25zdCBzZXRWYWx1ZSA9IHZhbHVlID0+IHtcbiAgICByZXR1cm4gZWRpdEZpZWxkKGZpZWxkLCBwYXRoLCB2YWx1ZSk7XG4gIH07XG4gIHJldHVybiBOdW1iZXJGaWVsZEVudHJ5KHtcbiAgICBkZWJvdW5jZSxcbiAgICBsYWJlbDogJ01heCBoZWlnaHQgb2YgcHJldmlldyBjb250YWluZXInLFxuICAgIGVsZW1lbnQ6IGZpZWxkLFxuICAgIGlkLFxuICAgIGdldFZhbHVlLFxuICAgIHNldFZhbHVlLFxuICAgIHZhbGlkYXRlLFxuICAgIGRlc2NyaXB0aW9uXG4gIH0pO1xufVxuXG4vLyBoZWxwZXJzIC8vLy8vLy8vLy9cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ8dW5kZWZpbmVkfSB2YWx1ZVxuICogQHJldHVybnMge3N0cmluZ3xudWxsfVxuICovXG5jb25zdCB2YWxpZGF0ZSA9IHZhbHVlID0+IHtcbiAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQgfHwgdmFsdWUgPT09ICcnKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gJ1ZhbHVlIG11c3QgYmUgYSBudW1iZXIuJztcbiAgfVxuICBpZiAoIU51bWJlci5pc0ludGVnZXIodmFsdWUpKSB7XG4gICAgcmV0dXJuICdTaG91bGQgYmUgYW4gaW50ZWdlci4nO1xuICB9XG4gIGlmICh2YWx1ZSA8IDEpIHtcbiAgICByZXR1cm4gJ1Nob3VsZCBiZSBncmVhdGVyIHRoYW4gemVyby4nO1xuICB9XG59O1xuY29uc3QgZGVzY3JpcHRpb24gPSBqc3goRnJhZ21lbnQkMSwge1xuICBjaGlsZHJlbjogXCJEb2N1bWVudHMgd2l0aCBoZWlnaHQgdGhhdCBleGNlZWRzIHRoZSBkZWZpbmVkIHZhbHVlIHdpbGwgYmUgdmVydGljYWxseSBzY3JvbGxhYmxlXCJcbn0pO1xuXG5mdW5jdGlvbiBHZW5lcmFsR3JvdXAoZmllbGQsIGVkaXRGaWVsZCwgZ2V0U2VydmljZSkge1xuICBjb25zdCBlbnRyaWVzID0gWy4uLklkRW50cnkoe1xuICAgIGZpZWxkLFxuICAgIGVkaXRGaWVsZFxuICB9KSwgLi4uVmVyc2lvblRhZ0VudHJ5KHtcbiAgICBmaWVsZCxcbiAgICBlZGl0RmllbGRcbiAgfSksIC4uLkxhYmVsRW50cnkoe1xuICAgIGZpZWxkLFxuICAgIGVkaXRGaWVsZFxuICB9KSwgLi4uRGVzY3JpcHRpb25FbnRyeSh7XG4gICAgZmllbGQsXG4gICAgZWRpdEZpZWxkXG4gIH0pLCAuLi5LZXlFbnRyeSh7XG4gICAgZmllbGQsXG4gICAgZWRpdEZpZWxkLFxuICAgIGdldFNlcnZpY2VcbiAgfSksIC4uLlBhdGhFbnRyeSh7XG4gICAgZmllbGQsXG4gICAgZWRpdEZpZWxkLFxuICAgIGdldFNlcnZpY2VcbiAgfSksIC4uLlJlcGVhdGFibGVFbnRyeSh7XG4gICAgZmllbGQsXG4gICAgZWRpdEZpZWxkLFxuICAgIGdldFNlcnZpY2VcbiAgfSksIC4uLkRlZmF1bHRWYWx1ZUVudHJ5KHtcbiAgICBmaWVsZCxcbiAgICBlZGl0RmllbGRcbiAgfSksIC4uLkFjdGlvbkVudHJ5KHtcbiAgICBmaWVsZCxcbiAgICBlZGl0RmllbGRcbiAgfSksIC4uLkRhdGVUaW1lRW50cnkoe1xuICAgIGZpZWxkLFxuICAgIGVkaXRGaWVsZFxuICB9KSwgLi4uVGV4dEVudHJ5KHtcbiAgICBmaWVsZCxcbiAgICBlZGl0RmllbGR9KSwgLi4uSHRtbEVudHJ5KHtcbiAgICBmaWVsZCxcbiAgICBlZGl0RmllbGR9KSwgLi4uSUZyYW1lVXJsRW50cnkoe1xuICAgIGZpZWxkLFxuICAgIGVkaXRGaWVsZFxuICB9KSwgLi4uSUZyYW1lSGVpZ2h0RW50cnkoe1xuICAgIGZpZWxkLFxuICAgIGVkaXRGaWVsZFxuICB9KSwgLi4uSGVpZ2h0RW50cnkoe1xuICAgIGZpZWxkLFxuICAgIGVkaXRGaWVsZFxuICB9KSwgLi4uTnVtYmVyRW50cmllcyh7XG4gICAgZmllbGQsXG4gICAgZWRpdEZpZWxkXG4gIH0pLCAuLi5FeHByZXNzaW9uRmllbGRFbnRyaWVzKHtcbiAgICBmaWVsZCxcbiAgICBlZGl0RmllbGRcbiAgfSksIC4uLkltYWdlU291cmNlRW50cnkoe1xuICAgIGZpZWxkLFxuICAgIGVkaXRGaWVsZFxuICB9KSwgLi4uQWx0VGV4dEVudHJ5KHtcbiAgICBmaWVsZCxcbiAgICBlZGl0RmllbGRcbiAgfSksIC4uLlNlbGVjdEVudHJpZXMoe1xuICAgIGZpZWxkLFxuICAgIGVkaXRGaWVsZFxuICB9KSwgLi4uQWNjZXB0RW50cnkoe1xuICAgIGZpZWxkLFxuICAgIGVkaXRGaWVsZFxuICB9KSwgLi4uTXVsdGlwbGVFbnRyeSh7XG4gICAgZmllbGQsXG4gICAgZWRpdEZpZWxkXG4gIH0pLCAuLi5EaXNhYmxlZEVudHJ5KHtcbiAgICBmaWVsZCxcbiAgICBlZGl0RmllbGRcbiAgfSksIC4uLlJlYWRvbmx5RW50cnkoe1xuICAgIGZpZWxkLFxuICAgIGVkaXRGaWVsZFxuICB9KSwgLi4uVGFibGVEYXRhU291cmNlRW50cnkoe1xuICAgIGZpZWxkLFxuICAgIGVkaXRGaWVsZFxuICB9KSwgLi4uUGFnaW5hdGlvbkVudHJ5KHtcbiAgICBmaWVsZCxcbiAgICBlZGl0RmllbGRcbiAgfSksIC4uLlJvd0NvdW50RW50cnkoe1xuICAgIGZpZWxkLFxuICAgIGVkaXRGaWVsZFxuICB9KSwgLi4uRG9jdW1lbnRzRGF0YVNvdXJjZUVudHJ5KHtcbiAgICBmaWVsZCxcbiAgICBlZGl0RmllbGRcbiAgfSldO1xuICBpZiAoZW50cmllcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4ge1xuICAgIGlkOiAnZ2VuZXJhbCcsXG4gICAgbGFiZWw6ICdHZW5lcmFsJyxcbiAgICBlbnRyaWVzXG4gIH07XG59XG5cbmZ1bmN0aW9uIFNlcmlhbGl6YXRpb25Hcm91cChmaWVsZCwgZWRpdEZpZWxkKSB7XG4gIGNvbnN0IGVudHJpZXMgPSBbLi4uTnVtYmVyU2VyaWFsaXphdGlvbkVudHJ5KHtcbiAgICBmaWVsZCxcbiAgICBlZGl0RmllbGRcbiAgfSksIC4uLkRhdGVUaW1lRm9ybWF0RW50cnkoe1xuICAgIGZpZWxkLFxuICAgIGVkaXRGaWVsZFxuICB9KV07XG4gIGlmICghZW50cmllcy5sZW5ndGgpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4ge1xuICAgIGlkOiAnc2VyaWFsaXphdGlvbicsXG4gICAgbGFiZWw6ICdTZXJpYWxpemF0aW9uJyxcbiAgICBlbnRyaWVzXG4gIH07XG59XG5cbmZ1bmN0aW9uIENvbnN0cmFpbnRzR3JvdXAoZmllbGQsIGVkaXRGaWVsZCkge1xuICBjb25zdCBlbnRyaWVzID0gWy4uLkRhdGVUaW1lQ29uc3RyYWludHNFbnRyeSh7XG4gICAgZmllbGQsXG4gICAgZWRpdEZpZWxkXG4gIH0pXTtcbiAgaWYgKCFlbnRyaWVzLmxlbmd0aCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiB7XG4gICAgaWQ6ICdjb25zdHJhaW50cycsXG4gICAgbGFiZWw6ICdDb25zdHJhaW50cycsXG4gICAgZW50cmllc1xuICB9O1xufVxuXG5jb25zdCBWQUxJREFUSU9OX1RZUEVfT1BUSU9OUyA9IHtcbiAgY3VzdG9tOiB7XG4gICAgdmFsdWU6ICcnLFxuICAgIGxhYmVsOiAnQ3VzdG9tJ1xuICB9LFxuICBlbWFpbDoge1xuICAgIHZhbHVlOiAnZW1haWwnLFxuICAgIGxhYmVsOiAnRW1haWwnXG4gIH0sXG4gIHBob25lOiB7XG4gICAgdmFsdWU6ICdwaG9uZScsXG4gICAgbGFiZWw6ICdQaG9uZSdcbiAgfVxufTtcbmZ1bmN0aW9uIFZhbGlkYXRpb25Hcm91cChmaWVsZCwgZWRpdEZpZWxkKSB7XG4gIGNvbnN0IHtcbiAgICB0eXBlXG4gIH0gPSBmaWVsZDtcbiAgY29uc3QgdmFsaWRhdGUgPSBnZXQoZmllbGQsIFsndmFsaWRhdGUnXSwge30pO1xuICBjb25zdCBpc0N1c3RvbVZhbGlkYXRpb24gPSBbdW5kZWZpbmVkLCBWQUxJREFUSU9OX1RZUEVfT1BUSU9OUy5jdXN0b20udmFsdWVdLmluY2x1ZGVzKHZhbGlkYXRlLnZhbGlkYXRpb25UeXBlKTtcbiAgY29uc3QgaGFzUGF0dGVybiA9ICEhZ2V0KGZpZWxkLCBbJ3ZhbGlkYXRlJywgJ3BhdHRlcm4nXSk7XG4gIGNvbnN0IG9uQ2hhbmdlID0ga2V5ID0+IHtcbiAgICByZXR1cm4gdmFsdWUgPT4ge1xuICAgICAgY29uc3QgdmFsaWRhdGUgPSBnZXQoZmllbGQsIFsndmFsaWRhdGUnXSwge30pO1xuICAgICAgZWRpdEZpZWxkKGZpZWxkLCBbJ3ZhbGlkYXRlJ10sIHNldCQxKHZhbGlkYXRlLCBba2V5XSwgdmFsdWUpKTtcbiAgICB9O1xuICB9O1xuICBjb25zdCBnZXRWYWx1ZSA9IGtleSA9PiB7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHJldHVybiBnZXQoZmllbGQsIFsndmFsaWRhdGUnLCBrZXldKTtcbiAgICB9O1xuICB9O1xuICBsZXQgZW50cmllcyA9IFt7XG4gICAgaWQ6ICdyZXF1aXJlZCcsXG4gICAgY29tcG9uZW50OiBSZXF1aXJlZCxcbiAgICBnZXRWYWx1ZSxcbiAgICBmaWVsZCxcbiAgICBpc0VkaXRlZDogaXNFZGl0ZWQkOCxcbiAgICBvbkNoYW5nZSxcbiAgICBpc0RlZmF1bHRWaXNpYmxlOiBmaWVsZCA9PiBJTlBVVFMuaW5jbHVkZXMoZmllbGQudHlwZSlcbiAgfV07XG4gIGVudHJpZXMucHVzaCh7XG4gICAgaWQ6ICd2YWxpZGF0aW9uVHlwZScsXG4gICAgY29tcG9uZW50OiBWYWxpZGF0aW9uVHlwZSxcbiAgICBnZXRWYWx1ZSxcbiAgICBmaWVsZCxcbiAgICBlZGl0RmllbGQsXG4gICAgaXNFZGl0ZWQ6IGlzRWRpdGVkLFxuICAgIG9uQ2hhbmdlLFxuICAgIGlzRGVmYXVsdFZpc2libGU6IGZpZWxkID0+IGZpZWxkLnR5cGUgPT09ICd0ZXh0ZmllbGQnXG4gIH0pO1xuICBlbnRyaWVzLnB1c2goe1xuICAgIGlkOiAnbWluTGVuZ3RoJyxcbiAgICBjb21wb25lbnQ6IE1pbkxlbmd0aCxcbiAgICBnZXRWYWx1ZSxcbiAgICBmaWVsZCxcbiAgICBpc0VkaXRlZDogaXNFZGl0ZWQkNSxcbiAgICBvbkNoYW5nZSxcbiAgICBpc0RlZmF1bHRWaXNpYmxlOiBmaWVsZCA9PiBJTlBVVFMuaW5jbHVkZXMoZmllbGQudHlwZSkgJiYgKHR5cGUgPT09ICd0ZXh0YXJlYScgfHwgdHlwZSA9PT0gJ3RleHRmaWVsZCcgJiYgaXNDdXN0b21WYWxpZGF0aW9uKVxuICB9LCB7XG4gICAgaWQ6ICdtYXhMZW5ndGgnLFxuICAgIGNvbXBvbmVudDogTWF4TGVuZ3RoLFxuICAgIGdldFZhbHVlLFxuICAgIGZpZWxkLFxuICAgIGlzRWRpdGVkOiBpc0VkaXRlZCQ1LFxuICAgIG9uQ2hhbmdlLFxuICAgIGlzRGVmYXVsdFZpc2libGU6IGZpZWxkID0+IElOUFVUUy5pbmNsdWRlcyhmaWVsZC50eXBlKSAmJiAodHlwZSA9PT0gJ3RleHRhcmVhJyB8fCB0eXBlID09PSAndGV4dGZpZWxkJyAmJiBpc0N1c3RvbVZhbGlkYXRpb24pXG4gIH0pO1xuICBlbnRyaWVzLnB1c2goe1xuICAgIGlkOiAncGF0dGVybicsXG4gICAgY29tcG9uZW50OiBQYXR0ZXJuLFxuICAgIGdldFZhbHVlLFxuICAgIGZpZWxkLFxuICAgIGlzRWRpdGVkOiBpc0VkaXRlZCxcbiAgICBvbkNoYW5nZSxcbiAgICBpc0RlZmF1bHRWaXNpYmxlOiBmaWVsZCA9PiBJTlBVVFMuaW5jbHVkZXMoZmllbGQudHlwZSkgJiYgdHlwZSA9PT0gJ3RleHRmaWVsZCcgJiYgaXNDdXN0b21WYWxpZGF0aW9uXG4gIH0pO1xuICBlbnRyaWVzLnB1c2goe1xuICAgIGlkOiAncGF0dGVybkVycm9yTWVzc2FnZScsXG4gICAgY29tcG9uZW50OiBQYXR0ZXJuRXJyb3JNZXNzYWdlLFxuICAgIGdldFZhbHVlLFxuICAgIGZpZWxkLFxuICAgIGlzRWRpdGVkOiBpc0VkaXRlZCxcbiAgICBvbkNoYW5nZSxcbiAgICBpc0RlZmF1bHRWaXNpYmxlOiBmaWVsZCA9PiBJTlBVVFMuaW5jbHVkZXMoZmllbGQudHlwZSkgJiYgdHlwZSA9PT0gJ3RleHRmaWVsZCcgJiYgaXNDdXN0b21WYWxpZGF0aW9uICYmIGhhc1BhdHRlcm5cbiAgfSk7XG4gIGVudHJpZXMucHVzaCh7XG4gICAgaWQ6ICdtaW4nLFxuICAgIGNvbXBvbmVudDogTWluLFxuICAgIGdldFZhbHVlLFxuICAgIGZpZWxkLFxuICAgIGlzRWRpdGVkOiBpc0VkaXRlZCQ1LFxuICAgIG9uQ2hhbmdlLFxuICAgIGlzRGVmYXVsdFZpc2libGU6IGZpZWxkID0+IGZpZWxkLnR5cGUgPT09ICdudW1iZXInXG4gIH0sIHtcbiAgICBpZDogJ21heCcsXG4gICAgY29tcG9uZW50OiBNYXgsXG4gICAgZ2V0VmFsdWUsXG4gICAgZmllbGQsXG4gICAgaXNFZGl0ZWQ6IGlzRWRpdGVkJDUsXG4gICAgb25DaGFuZ2UsXG4gICAgaXNEZWZhdWx0VmlzaWJsZTogZmllbGQgPT4gZmllbGQudHlwZSA9PT0gJ251bWJlcidcbiAgfSk7XG4gIHJldHVybiB7XG4gICAgaWQ6ICd2YWxpZGF0aW9uJyxcbiAgICBsYWJlbDogJ1ZhbGlkYXRpb24nLFxuICAgIGVudHJpZXNcbiAgfTtcbn1cbmZ1bmN0aW9uIFJlcXVpcmVkKHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBmaWVsZCxcbiAgICBnZXRWYWx1ZSxcbiAgICBpZCxcbiAgICBvbkNoYW5nZVxuICB9ID0gcHJvcHM7XG4gIHJldHVybiBDaGVja2JveEVudHJ5KHtcbiAgICBlbGVtZW50OiBmaWVsZCxcbiAgICBnZXRWYWx1ZTogZ2V0VmFsdWUoJ3JlcXVpcmVkJyksXG4gICAgaWQsXG4gICAgbGFiZWw6ICdSZXF1aXJlZCcsXG4gICAgc2V0VmFsdWU6IG9uQ2hhbmdlKCdyZXF1aXJlZCcpXG4gIH0pO1xufVxuZnVuY3Rpb24gTWluTGVuZ3RoKHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBmaWVsZCxcbiAgICBnZXRWYWx1ZSxcbiAgICBpZCxcbiAgICBvbkNoYW5nZVxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IGRlYm91bmNlID0gdXNlU2VydmljZSgnZGVib3VuY2UnKTtcbiAgY29uc3QgdmFyaWFibGVzID0gdXNlVmFyaWFibGVzKCkubWFwKG5hbWUgPT4gKHtcbiAgICBuYW1lXG4gIH0pKTtcbiAgcmV0dXJuIEZlZWxOdW1iZXJFbnRyeSh7XG4gICAgZGVib3VuY2UsXG4gICAgZWxlbWVudDogZmllbGQsXG4gICAgZmVlbDogJ29wdGlvbmFsJyxcbiAgICBnZXRWYWx1ZTogZ2V0VmFsdWUoJ21pbkxlbmd0aCcpLFxuICAgIGlkLFxuICAgIGxhYmVsOiAnTWluaW11bSBsZW5ndGgnLFxuICAgIG1pbjogMCxcbiAgICBzZXRWYWx1ZTogb25DaGFuZ2UoJ21pbkxlbmd0aCcpLFxuICAgIHZhcmlhYmxlc1xuICB9KTtcbn1cbmZ1bmN0aW9uIE1heExlbmd0aChwcm9wcykge1xuICBjb25zdCB7XG4gICAgZmllbGQsXG4gICAgZ2V0VmFsdWUsXG4gICAgaWQsXG4gICAgb25DaGFuZ2VcbiAgfSA9IHByb3BzO1xuICBjb25zdCBkZWJvdW5jZSA9IHVzZVNlcnZpY2UoJ2RlYm91bmNlJyk7XG4gIGNvbnN0IHZhcmlhYmxlcyA9IHVzZVZhcmlhYmxlcygpLm1hcChuYW1lID0+ICh7XG4gICAgbmFtZVxuICB9KSk7XG4gIHJldHVybiBGZWVsTnVtYmVyRW50cnkoe1xuICAgIGRlYm91bmNlLFxuICAgIGVsZW1lbnQ6IGZpZWxkLFxuICAgIGZlZWw6ICdvcHRpb25hbCcsXG4gICAgZ2V0VmFsdWU6IGdldFZhbHVlKCdtYXhMZW5ndGgnKSxcbiAgICBpZCxcbiAgICBsYWJlbDogJ01heGltdW0gbGVuZ3RoJyxcbiAgICBtaW46IDAsXG4gICAgc2V0VmFsdWU6IG9uQ2hhbmdlKCdtYXhMZW5ndGgnKSxcbiAgICB2YXJpYWJsZXNcbiAgfSk7XG59XG5mdW5jdGlvbiBQYXR0ZXJuKHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBmaWVsZCxcbiAgICBnZXRWYWx1ZSxcbiAgICBpZCxcbiAgICBvbkNoYW5nZVxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IGRlYm91bmNlID0gdXNlU2VydmljZSgnZGVib3VuY2UnKTtcbiAgcmV0dXJuIFRleHRmaWVsZEVudHJ5KHtcbiAgICBkZWJvdW5jZSxcbiAgICBlbGVtZW50OiBmaWVsZCxcbiAgICBnZXRWYWx1ZTogZ2V0VmFsdWUoJ3BhdHRlcm4nKSxcbiAgICBpZCxcbiAgICBsYWJlbDogJ0N1c3RvbSByZWd1bGFyIGV4cHJlc3Npb24nLFxuICAgIHNldFZhbHVlOiBvbkNoYW5nZSgncGF0dGVybicpXG4gIH0pO1xufVxuZnVuY3Rpb24gUGF0dGVybkVycm9yTWVzc2FnZShwcm9wcykge1xuICBjb25zdCB7XG4gICAgZmllbGQsXG4gICAgZ2V0VmFsdWUsXG4gICAgaWQsXG4gICAgb25DaGFuZ2VcbiAgfSA9IHByb3BzO1xuICBjb25zdCBkZWJvdW5jZSA9IHVzZVNlcnZpY2UoJ2RlYm91bmNlJyk7XG4gIHJldHVybiBUZXh0ZmllbGRFbnRyeSh7XG4gICAgZGVib3VuY2UsXG4gICAgZWxlbWVudDogZmllbGQsXG4gICAgZ2V0VmFsdWU6IGdldFZhbHVlKCdwYXR0ZXJuRXJyb3JNZXNzYWdlJyksXG4gICAgaWQsXG4gICAgbGFiZWw6ICdDdXN0b20gZXJyb3IgbWVzc2FnZScsXG4gICAgdG9vbHRpcDogJ1RoZSBlcnJvciBtZXNzYWdlIHRvIGRpc3BsYXkgd2hlbiB0aGUgaW5wdXQgZG9lcyBub3QgbWF0Y2ggdGhlIHJlZ3VsYXIgZXhwcmVzc2lvbi4nLFxuICAgIHNldFZhbHVlOiBvbkNoYW5nZSgncGF0dGVybkVycm9yTWVzc2FnZScpXG4gIH0pO1xufVxuZnVuY3Rpb24gTWluKHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBmaWVsZCxcbiAgICBnZXRWYWx1ZSxcbiAgICBpZCxcbiAgICBvbkNoYW5nZVxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IGRlYm91bmNlID0gdXNlU2VydmljZSgnZGVib3VuY2UnKTtcbiAgY29uc3QgdmFyaWFibGVzID0gdXNlVmFyaWFibGVzKCkubWFwKG5hbWUgPT4gKHtcbiAgICBuYW1lXG4gIH0pKTtcbiAgcmV0dXJuIEZlZWxOdW1iZXJFbnRyeSh7XG4gICAgZGVib3VuY2UsXG4gICAgZWxlbWVudDogZmllbGQsXG4gICAgZmVlbDogJ29wdGlvbmFsJyxcbiAgICBpZCxcbiAgICBsYWJlbDogJ01pbmltdW0nLFxuICAgIHN0ZXA6ICdhbnknLFxuICAgIGdldFZhbHVlOiBnZXRWYWx1ZSgnbWluJyksXG4gICAgc2V0VmFsdWU6IG9uQ2hhbmdlKCdtaW4nKSxcbiAgICB2YXJpYWJsZXNcbiAgfSk7XG59XG5mdW5jdGlvbiBNYXgocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGZpZWxkLFxuICAgIGdldFZhbHVlLFxuICAgIGlkLFxuICAgIG9uQ2hhbmdlXG4gIH0gPSBwcm9wcztcbiAgY29uc3QgZGVib3VuY2UgPSB1c2VTZXJ2aWNlKCdkZWJvdW5jZScpO1xuICBjb25zdCB2YXJpYWJsZXMgPSB1c2VWYXJpYWJsZXMoKS5tYXAobmFtZSA9PiAoe1xuICAgIG5hbWVcbiAgfSkpO1xuICByZXR1cm4gRmVlbE51bWJlckVudHJ5KHtcbiAgICBkZWJvdW5jZSxcbiAgICBlbGVtZW50OiBmaWVsZCxcbiAgICBmZWVsOiAnb3B0aW9uYWwnLFxuICAgIGlkLFxuICAgIGxhYmVsOiAnTWF4aW11bScsXG4gICAgc3RlcDogJ2FueScsXG4gICAgZ2V0VmFsdWU6IGdldFZhbHVlKCdtYXgnKSxcbiAgICBzZXRWYWx1ZTogb25DaGFuZ2UoJ21heCcpLFxuICAgIHZhcmlhYmxlc1xuICB9KTtcbn1cbmZ1bmN0aW9uIFZhbGlkYXRpb25UeXBlKHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBmaWVsZCxcbiAgICBnZXRWYWx1ZSxcbiAgICBpZCxcbiAgICBvbkNoYW5nZVxuICB9ID0gcHJvcHM7XG4gIHVzZVNlcnZpY2UoJ2RlYm91bmNlJyk7XG4gIGNvbnN0IHNldFZhbHVlID0gdmFsaWRhdGlvblR5cGUgPT4ge1xuICAgIG9uQ2hhbmdlKCd2YWxpZGF0aW9uVHlwZScpKHZhbGlkYXRpb25UeXBlIHx8IHVuZGVmaW5lZCk7XG4gIH07XG4gIHJldHVybiBTZWxlY3RFbnRyeSh7XG4gICAgZWxlbWVudDogZmllbGQsXG4gICAgZ2V0VmFsdWU6IGdldFZhbHVlKCd2YWxpZGF0aW9uVHlwZScpLFxuICAgIGlkLFxuICAgIGxhYmVsOiAnVmFsaWRhdGlvbiBwYXR0ZXJuJyxcbiAgICBzZXRWYWx1ZSxcbiAgICBnZXRPcHRpb25zOiAoKSA9PiBPYmplY3QudmFsdWVzKFZBTElEQVRJT05fVFlQRV9PUFRJT05TKSxcbiAgICB0b29sdGlwOiBnZXRWYWx1ZSgndmFsaWRhdGlvblR5cGUnKSgpID09PSBWQUxJREFUSU9OX1RZUEVfT1BUSU9OUy5waG9uZS52YWx1ZSA/ICdUaGUgYnVpbHQtaW4gcGhvbmUgdmFsaWRhdGlvbiBwYXR0ZXJuIGlzIGJhc2VkIG9uIHRoZSBFLjE2NCBzdGFuZGFyZCB3aXRoIG5vIHNwYWNlcy4gRXg6ICs0OTEyMzQ1Njc4OTAnIDogdW5kZWZpbmVkXG4gIH0pO1xufVxuXG5mdW5jdGlvbiBPcHRpb25zR3JvdXBzKGZpZWxkLCBlZGl0RmllbGQsIGdldFNlcnZpY2UpIHtcbiAgY29uc3Qge1xuICAgIHR5cGVcbiAgfSA9IGZpZWxkO1xuICBjb25zdCBmb3JtRmllbGRzID0gZ2V0U2VydmljZSgnZm9ybUZpZWxkcycpO1xuICBjb25zdCBmaWVsZERlZmluaXRpb24gPSBmb3JtRmllbGRzLmdldCh0eXBlKS5jb25maWc7XG4gIGlmICghT1BUSU9OU19JTlBVVFMuaW5jbHVkZXModHlwZSkgJiYgIWhhc09wdGlvbnNHcm91cHNDb25maWd1cmVkKGZpZWxkRGVmaW5pdGlvbikpIHtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgY29uc3QgY29udGV4dCA9IHtcbiAgICBlZGl0RmllbGQsXG4gICAgZmllbGRcbiAgfTtcbiAgY29uc3QgaWQgPSAndmFsdWVzU291cmNlJztcblxuICAvKipcbiAgICogQHR5cGUge0FycmF5PEdyb3VwfExpc3RHcm91cD59XG4gICAqL1xuICBjb25zdCBncm91cHMgPSBbe1xuICAgIGlkLFxuICAgIGxhYmVsOiAnT3B0aW9ucyBzb3VyY2UnLFxuICAgIHRvb2x0aXA6IGdldFZhbHVlc1Rvb2x0aXAoKSxcbiAgICBjb21wb25lbnQ6IEdyb3VwLFxuICAgIGVudHJpZXM6IE9wdGlvbnNTb3VyY2VTZWxlY3RFbnRyeSh7XG4gICAgICAuLi5jb250ZXh0LFxuICAgICAgaWRcbiAgICB9KVxuICB9XTtcbiAgY29uc3QgdmFsdWVzU291cmNlID0gZ2V0T3B0aW9uc1NvdXJjZShmaWVsZCk7XG4gIGlmICh2YWx1ZXNTb3VyY2UgPT09IE9QVElPTlNfU09VUkNFUy5JTlBVVCkge1xuICAgIGNvbnN0IGlkID0gJ2R5bmFtaWNPcHRpb25zJztcbiAgICBncm91cHMucHVzaCh7XG4gICAgICBpZCxcbiAgICAgIGxhYmVsOiAnRHluYW1pYyBvcHRpb25zJyxcbiAgICAgIGNvbXBvbmVudDogR3JvdXAsXG4gICAgICBlbnRyaWVzOiBJbnB1dEtleU9wdGlvbnNTb3VyY2VFbnRyeSh7XG4gICAgICAgIC4uLmNvbnRleHQsXG4gICAgICAgIGlkXG4gICAgICB9KVxuICAgIH0pO1xuICB9IGVsc2UgaWYgKHZhbHVlc1NvdXJjZSA9PT0gT1BUSU9OU19TT1VSQ0VTLlNUQVRJQykge1xuICAgIGNvbnN0IGlkID0gJ3N0YXRpY09wdGlvbnMnO1xuICAgIGdyb3Vwcy5wdXNoKHtcbiAgICAgIGlkLFxuICAgICAgbGFiZWw6ICdTdGF0aWMgb3B0aW9ucycsXG4gICAgICBjb21wb25lbnQ6IExpc3RHcm91cCxcbiAgICAgIC4uLlN0YXRpY09wdGlvbnNTb3VyY2VFbnRyeSh7XG4gICAgICAgIC4uLmNvbnRleHQsXG4gICAgICAgIGlkXG4gICAgICB9KVxuICAgIH0pO1xuICB9IGVsc2UgaWYgKHZhbHVlc1NvdXJjZSA9PT0gT1BUSU9OU19TT1VSQ0VTLkVYUFJFU1NJT04pIHtcbiAgICBjb25zdCBpZCA9ICdvcHRpb25zRXhwcmVzc2lvbic7XG4gICAgZ3JvdXBzLnB1c2goe1xuICAgICAgaWQsXG4gICAgICBsYWJlbDogJ09wdGlvbnMgZXhwcmVzc2lvbicsXG4gICAgICBjb21wb25lbnQ6IEdyb3VwLFxuICAgICAgZW50cmllczogT3B0aW9uc0V4cHJlc3Npb25FbnRyeSh7XG4gICAgICAgIC4uLmNvbnRleHQsXG4gICAgICAgIGlkXG4gICAgICB9KVxuICAgIH0pO1xuICB9XG4gIHJldHVybiBncm91cHM7XG59XG5cbi8vIGhlbHBlcnMgLy8vLy8vLy8vL1xuXG5mdW5jdGlvbiBnZXRWYWx1ZXNUb29sdGlwKCkge1xuICByZXR1cm4gJ1wiU3RhdGljXCIgZGVmaW5lcyBhIGNvbnN0YW50LCBwcmVkZWZpbmVkIHNldCBvZiBmb3JtIG9wdGlvbnMuXFxuXFxuJyArICdcIklucHV0IGRhdGFcIiBkZWZpbmVzIG9wdGlvbnMgdGhhdCBhcmUgcG9wdWxhdGVkIGR5bmFtaWNhbGx5LCBhZGp1c3RpbmcgYmFzZWQgb24gdmFyaWFibGUgZGF0YSBmb3IgZmxleGlibGUgcmVzcG9uc2VzIHRvIGRpZmZlcmVudCBjb25kaXRpb25zIG9yIGlucHV0cy5cXG5cXG4nICsgJ1wiRXhwcmVzc2lvblwiIGRlZmluZXMgb3B0aW9ucyB0aGF0IGFyZSBwb3B1bGF0ZWQgZnJvbSBhIEZFRUwgZXhwcmVzc2lvbi4nO1xufVxuXG5mdW5jdGlvbiBDdXN0b21Qcm9wZXJ0aWVzR3JvdXAoZmllbGQsIGVkaXRGaWVsZCkge1xuICBjb25zdCB7XG4gICAgcHJvcGVydGllcyA9IHt9LFxuICAgIHR5cGVcbiAgfSA9IGZpZWxkO1xuICBpZiAodHlwZSA9PT0gJ2RlZmF1bHQnKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgY29uc3QgYWRkRW50cnkgPSBldmVudCA9PiB7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgbGV0IGluZGV4ID0gT2JqZWN0LmtleXMocHJvcGVydGllcykubGVuZ3RoICsgMTtcbiAgICB3aGlsZSAoYGtleSR7aW5kZXh9YCBpbiBwcm9wZXJ0aWVzKSB7XG4gICAgICBpbmRleCsrO1xuICAgIH1cbiAgICBlZGl0RmllbGQoZmllbGQsIFsncHJvcGVydGllcyddLCB7XG4gICAgICAuLi5wcm9wZXJ0aWVzLFxuICAgICAgW2BrZXkke2luZGV4fWBdOiAndmFsdWUnXG4gICAgfSk7XG4gIH07XG4gIGNvbnN0IHZhbGlkYXRlRmFjdG9yeSA9IGtleSA9PiB7XG4gICAgcmV0dXJuIHZhbHVlID0+IHtcbiAgICAgIGlmICh2YWx1ZSA9PT0ga2V5KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnIHx8IHZhbHVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gJ011c3Qgbm90IGJlIGVtcHR5Lic7XG4gICAgICB9XG4gICAgICBpZiAoaGFzKHByb3BlcnRpZXMsIHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gJ011c3QgYmUgdW5pcXVlLic7XG4gICAgICB9XG4gICAgfTtcbiAgfTtcbiAgY29uc3QgaXRlbXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKS5tYXAoKGtleSwgaW5kZXgpID0+IHtcbiAgICBjb25zdCByZW1vdmVFbnRyeSA9IGV2ZW50ID0+IHtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgcmV0dXJuIGVkaXRGaWVsZChmaWVsZCwgWydwcm9wZXJ0aWVzJ10sIHJlbW92ZUtleShwcm9wZXJ0aWVzLCBrZXkpKTtcbiAgICB9O1xuICAgIGNvbnN0IGlkID0gYHByb3BlcnR5LSR7ZmllbGQuaWR9LSR7aW5kZXh9YDtcbiAgICByZXR1cm4ge1xuICAgICAgYXV0b0ZvY3VzRW50cnk6IGlkICsgJy1rZXknLFxuICAgICAgZW50cmllczogQ3VzdG9tVmFsdWVFbnRyeSh7XG4gICAgICAgIGVkaXRGaWVsZCxcbiAgICAgICAgZmllbGQsXG4gICAgICAgIGlkUHJlZml4OiBpZCxcbiAgICAgICAgaW5kZXgsXG4gICAgICAgIHZhbGlkYXRlRmFjdG9yeVxuICAgICAgfSksXG4gICAgICBpZCxcbiAgICAgIGxhYmVsOiBrZXkgfHwgJycsXG4gICAgICByZW1vdmU6IHJlbW92ZUVudHJ5XG4gICAgfTtcbiAgfSk7XG4gIHJldHVybiB7XG4gICAgYWRkOiBhZGRFbnRyeSxcbiAgICBjb21wb25lbnQ6IExpc3RHcm91cCxcbiAgICBpZDogJ2N1c3RvbS12YWx1ZXMnLFxuICAgIGl0ZW1zLFxuICAgIGxhYmVsOiAnQ3VzdG9tIHByb3BlcnRpZXMnLFxuICAgIHRvb2x0aXA6ICdBZGQgcHJvcGVydGllcyBkaXJlY3RseSB0byB0aGUgZm9ybSBzY2hlbWEsIHVzZWZ1bCB0byBjb25maWd1cmUgZnVuY3Rpb25hbGl0eSBpbiBjdXN0b20tYnVpbHQgdGFzayBhcHBsaWNhdGlvbnMgYW5kIGZvcm0gcmVuZGVyZXJzLidcbiAgfTtcbn1cblxuLy8gaGVscGVycyAvLy8vLy8vLy8vXG5cbi8qKlxuICogUmV0dXJucyBjb3B5IG9mIG9iamVjdCB3aXRob3V0IGtleS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcGVydGllc1xuICogQHBhcmFtIHtzdHJpbmd9IG9sZEtleVxuICpcbiAqIEByZXR1cm5zIHtPYmplY3R9XG4gKi9cbmZ1bmN0aW9uIHJlbW92ZUtleShwcm9wZXJ0aWVzLCBvbGRLZXkpIHtcbiAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKHByb3BlcnRpZXMpLnJlZHVjZSgobmV3UHJvcGVydGllcywgZW50cnkpID0+IHtcbiAgICBjb25zdCBba2V5LCB2YWx1ZV0gPSBlbnRyeTtcbiAgICBpZiAoa2V5ID09PSBvbGRLZXkpIHtcbiAgICAgIHJldHVybiBuZXdQcm9wZXJ0aWVzO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgLi4ubmV3UHJvcGVydGllcyxcbiAgICAgIFtrZXldOiB2YWx1ZVxuICAgIH07XG4gIH0sIHt9KTtcbn1cblxuZnVuY3Rpb24gQXBwZWFyYW5jZUdyb3VwKGZpZWxkLCBlZGl0RmllbGQsIGdldFNlcnZpY2UpIHtcbiAgY29uc3QgZW50cmllcyA9IFsuLi5BZG9ybmVyRW50cnkoe1xuICAgIGZpZWxkLFxuICAgIGVkaXRGaWVsZFxuICB9KSwgLi4uR3JvdXBBcHBlYXJhbmNlRW50cnkoe1xuICAgIGZpZWxkLFxuICAgIGVkaXRGaWVsZFxuICB9KSwgLi4uTGF5b3V0ZXJBcHBlYXJhbmNlRW50cnkoe1xuICAgIGZpZWxkLFxuICAgIGVkaXRGaWVsZFxuICB9KSwgLi4uTWF4SGVpZ2h0RW50cnkoe1xuICAgIGZpZWxkLFxuICAgIGVkaXRGaWVsZFxuICB9KV07XG4gIGlmICghZW50cmllcy5sZW5ndGgpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4ge1xuICAgIGlkOiAnYXBwZWFyYW5jZScsXG4gICAgbGFiZWw6ICdBcHBlYXJhbmNlJyxcbiAgICBlbnRyaWVzXG4gIH07XG59XG5cbmZ1bmN0aW9uIExheW91dEdyb3VwKGZpZWxkLCBlZGl0RmllbGQpIHtcbiAgY29uc3Qge1xuICAgIHR5cGVcbiAgfSA9IGZpZWxkO1xuICBpZiAodHlwZSA9PT0gJ2RlZmF1bHQnKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgY29uc3QgZW50cmllcyA9IFsuLi5Db2x1bW5zRW50cnkoe1xuICAgIGZpZWxkLFxuICAgIGVkaXRGaWVsZFxuICB9KV07XG4gIGlmIChlbnRyaWVzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiB7XG4gICAgaWQ6ICdsYXlvdXQnLFxuICAgIGxhYmVsOiAnTGF5b3V0JyxcbiAgICBlbnRyaWVzXG4gIH07XG59XG5cbmZ1bmN0aW9uIFNlY3VyaXR5QXR0cmlidXRlc0dyb3VwKGZpZWxkLCBlZGl0RmllbGQpIHtcbiAgY29uc3Qge1xuICAgIHR5cGVcbiAgfSA9IGZpZWxkO1xuICBpZiAodHlwZSAhPT0gJ2lmcmFtZScpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBjb25zdCBlbnRyaWVzID0gY3JlYXRlRW50cmllcyh7XG4gICAgZmllbGQsXG4gICAgZWRpdEZpZWxkXG4gIH0pO1xuICBpZiAoIWVudHJpZXMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBpZDogJ3NlY3VyaXR5QXR0cmlidXRlcycsXG4gICAgbGFiZWw6ICdTZWN1cml0eSBhdHRyaWJ1dGVzJyxcbiAgICBlbnRyaWVzLFxuICAgIHRvb2x0aXA6IGdldFRvb2x0aXAoKVxuICB9O1xufVxuZnVuY3Rpb24gY3JlYXRlRW50cmllcyhwcm9wcykge1xuICBjb25zdCB7XG4gICAgZWRpdEZpZWxkLFxuICAgIGZpZWxkXG4gIH0gPSBwcm9wcztcbiAgY29uc3Qgc2VjdXJpdHlFbnRyaWVzID0gU0VDVVJJVFlfQVRUUklCVVRFU19ERUZJTklUSU9OUy5tYXAoZGVmaW5pdGlvbiA9PiB7XG4gICAgY29uc3Qge1xuICAgICAgbGFiZWwsXG4gICAgICBwcm9wZXJ0eVxuICAgIH0gPSBkZWZpbml0aW9uO1xuICAgIHJldHVybiBzaW1wbGVCb29sRW50cnlGYWN0b3J5KHtcbiAgICAgIGlkOiBwcm9wZXJ0eSxcbiAgICAgIGxhYmVsOiBsYWJlbCxcbiAgICAgIGlzRGVmYXVsdFZpc2libGU6IGZpZWxkID0+IGZpZWxkLnR5cGUgPT09ICdpZnJhbWUnLFxuICAgICAgcGF0aDogWydzZWN1cml0eScsIHByb3BlcnR5XSxcbiAgICAgIHByb3BzLFxuICAgICAgZ2V0VmFsdWU6ICgpID0+IGdldChmaWVsZCwgWydzZWN1cml0eScsIHByb3BlcnR5XSksXG4gICAgICBzZXRWYWx1ZTogdmFsdWUgPT4ge1xuICAgICAgICBjb25zdCBzZWN1cml0eSA9IGdldChmaWVsZCwgWydzZWN1cml0eSddLCB7fSk7XG4gICAgICAgIGVkaXRGaWVsZChmaWVsZCwgWydzZWN1cml0eSddLCBzZXQkMShzZWN1cml0eSwgW3Byb3BlcnR5XSwgdmFsdWUpKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG4gIHJldHVybiBbe1xuICAgIGNvbXBvbmVudDogQWR2aXNvcnlcbiAgfSwgLi4uc2VjdXJpdHlFbnRyaWVzXTtcbn1cbmNvbnN0IEFkdmlzb3J5ID0gcHJvcHMgPT4ge1xuICByZXR1cm4ganN4KFwiZGl2XCIsIHtcbiAgICBjbGFzczogXCJiaW8tcHJvcGVydGllcy1wYW5lbC1kZXNjcmlwdGlvbiBmanMtcHJvcGVydGllcy1wYW5lbC1kZXRhY2hlZC1kZXNjcmlwdGlvblwiLFxuICAgIGNoaWxkcmVuOiBcIlRoZXNlIG9wdGlvbnMgY2FuIGluY3VyIHNlY3VyaXR5IHJpc2tzLCBlc3BlY2lhbGx5IGlmIHVzZWQgaW4gY29tYmluYXRpb24gd2l0aCBkeW5hbWljIGxpbmtzLiBFbnN1cmUgdGhhdCB5b3UgYXJlIGF3YXJlIG9mIHRoZW0sIHRoYXQgeW91IHRydXN0IHRoZSBzb3VyY2UgdXJsIGFuZCBvbmx5IGVuYWJsZSB3aGF0IHlvdXIgdXNlIGNhc2UgcmVxdWlyZXMuXCJcbiAgfSk7XG59O1xuXG4vLyBoZWxwZXJzIC8vLy8vLy8vLy9cblxuZnVuY3Rpb24gZ2V0VG9vbHRpcCgpIHtcbiAgcmV0dXJuIGpzeChGcmFnbWVudCQxLCB7XG4gICAgY2hpbGRyZW46IGpzeHMoXCJwXCIsIHtcbiAgICAgIGNoaWxkcmVuOiBbXCJBbGxvdyB0aGUgaWZyYW1lIHRvIGFjY2VzcyBtb3JlIGZ1bmN0aW9uYWxpdHkgb2YgeW91ciBicm93c2VyLCBkZXRhaWxzIHJlZ2FyZGluZyB0aGUgdmFyaW91cyBvcHRpb25zIGNhbiBiZSBmb3VuZCBpbiB0aGVcIiwgJyAnLCBqc3goXCJhXCIsIHtcbiAgICAgICAgdGFyZ2V0OiBcIl9ibGFua1wiLFxuICAgICAgICBocmVmOiBcImh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0hUTUwvRWxlbWVudC9pZnJhbWVcIixcbiAgICAgICAgcmVsOiBcIm5vcmVmZXJyZXJcIixcbiAgICAgICAgY2hpbGRyZW46IFwiTUROIGlGcmFtZSBkb2N1bWVudGF0aW9uLlwiXG4gICAgICB9KV1cbiAgICB9KVxuICB9KTtcbn1cblxuZnVuY3Rpb24gQ29uZGl0aW9uR3JvdXAoZmllbGQsIGVkaXRGaWVsZCkge1xuICBjb25zdCB7XG4gICAgdHlwZVxuICB9ID0gZmllbGQ7XG4gIGlmICh0eXBlID09PSAnZGVmYXVsdCcpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBjb25zdCBlbnRyaWVzID0gWy4uLkNvbmRpdGlvbkVudHJ5KHtcbiAgICBmaWVsZCxcbiAgICBlZGl0RmllbGRcbiAgfSldO1xuICByZXR1cm4ge1xuICAgIGlkOiAnY29uZGl0aW9uJyxcbiAgICBsYWJlbDogJ0NvbmRpdGlvbicsXG4gICAgZW50cmllc1xuICB9O1xufVxuXG5mdW5jdGlvbiBUYWJsZUhlYWRlckdyb3VwcyhmaWVsZCwgZWRpdEZpZWxkKSB7XG4gIGNvbnN0IHtcbiAgICB0eXBlLFxuICAgIGlkOiBmaWVsZElkXG4gIH0gPSBmaWVsZDtcbiAgaWYgKHR5cGUgIT09ICd0YWJsZScpIHtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgY29uc3QgYXJlU3RhdGljQ29sdW1uc0VuYWJsZWQgPSBpc0FycmF5KGdldChmaWVsZCwgWydjb2x1bW5zJ10pKTtcblxuICAvKipcbiAgICogQHR5cGUge0FycmF5PEdyb3VwPn1cbiAgICovXG4gIGNvbnN0IGdyb3VwcyA9IFt7XG4gICAgaWQ6IGAke2ZpZWxkSWR9LWNvbHVtbnNTb3VyY2VgLFxuICAgIGxhYmVsOiAnSGVhZGVycyBzb3VyY2UnLFxuICAgIHRvb2x0aXA6IFRPT0xUSVBfVEVYVCxcbiAgICBjb21wb25lbnQ6IEdyb3VwLFxuICAgIGVudHJpZXM6IFsuLi5IZWFkZXJzU291cmNlU2VsZWN0RW50cnkoe1xuICAgICAgZmllbGQsXG4gICAgICBlZGl0RmllbGRcbiAgICB9KSwgLi4uQ29sdW1uc0V4cHJlc3Npb25FbnRyeSh7XG4gICAgICBmaWVsZCxcbiAgICAgIGVkaXRGaWVsZFxuICAgIH0pXVxuICB9XTtcbiAgaWYgKGFyZVN0YXRpY0NvbHVtbnNFbmFibGVkKSB7XG4gICAgY29uc3QgaWQgPSBgJHtmaWVsZElkfS1jb2x1bW5zYDtcbiAgICBncm91cHMucHVzaCh7XG4gICAgICBpZCxcbiAgICAgIGxhYmVsOiAnSGVhZGVyIGl0ZW1zJyxcbiAgICAgIGNvbXBvbmVudDogTGlzdEdyb3VwLFxuICAgICAgLi4uU3RhdGljQ29sdW1uc1NvdXJjZUVudHJ5KHtcbiAgICAgICAgZmllbGQsXG4gICAgICAgIGVkaXRGaWVsZCxcbiAgICAgICAgaWRcbiAgICAgIH0pXG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIGdyb3Vwcztcbn1cblxuLy8gaGVscGVycyAvLy8vLy8vLy8vXG5cbmNvbnN0IFRPT0xUSVBfVEVYVCA9IGBcIkxpc3Qgb2YgaXRlbXNcIiBkZWZpbmVzIGEgY29uc3RhbnQsIHByZWRlZmluZWQgc2V0IG9mIGZvcm0gb3B0aW9ucy5cblxuXCJFeHByZXNzaW9uXCIgZGVmaW5lcyBvcHRpb25zIHRoYXQgYXJlIHBvcHVsYXRlZCBmcm9tIGEgRkVFTCBleHByZXNzaW9uLlxuYDtcblxuY2xhc3MgUHJvcGVydGllc1Byb3ZpZGVyIHtcbiAgY29uc3RydWN0b3IocHJvcGVydGllc1BhbmVsLCBpbmplY3Rvcikge1xuICAgIHRoaXMuX2luamVjdG9yID0gaW5qZWN0b3I7XG4gICAgcHJvcGVydGllc1BhbmVsLnJlZ2lzdGVyUHJvdmlkZXIodGhpcyk7XG4gIH1cbiAgX2ZpbHRlclZpc2libGVFbnRyaWVzKGdyb3VwcywgZmllbGQsIGdldFNlcnZpY2UpIHtcbiAgICByZXR1cm4gZ3JvdXBzLmZvckVhY2goZ3JvdXAgPT4ge1xuICAgICAgY29uc3Qge1xuICAgICAgICBlbnRyaWVzXG4gICAgICB9ID0gZ3JvdXA7XG4gICAgICBjb25zdCB7XG4gICAgICAgIHR5cGVcbiAgICAgIH0gPSBmaWVsZDtcbiAgICAgIGNvbnN0IGZvcm1GaWVsZHMgPSBnZXRTZXJ2aWNlKCdmb3JtRmllbGRzJyk7XG4gICAgICBjb25zdCBmaWVsZERlZmluaXRpb24gPSBmb3JtRmllbGRzLmdldCh0eXBlKS5jb25maWc7XG4gICAgICBpZiAoIWVudHJpZXMpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZ3JvdXAuZW50cmllcyA9IGVudHJpZXMuZmlsdGVyKGVudHJ5ID0+IHtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgIGlzRGVmYXVsdFZpc2libGVcbiAgICAgICAgfSA9IGVudHJ5O1xuICAgICAgICBpZiAoIWlzRGVmYXVsdFZpc2libGUpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaXNEZWZhdWx0VmlzaWJsZShmaWVsZCkgfHwgaGFzRW50cnlDb25maWd1cmVkKGZpZWxkRGVmaW5pdGlvbiwgZW50cnkuaWQpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbiAgZ2V0R3JvdXBzKGZpZWxkLCBlZGl0RmllbGQpIHtcbiAgICByZXR1cm4gZ3JvdXBzID0+IHtcbiAgICAgIGlmICghZmllbGQpIHtcbiAgICAgICAgcmV0dXJuIGdyb3VwcztcbiAgICAgIH1cbiAgICAgIGNvbnN0IGdldFNlcnZpY2UgPSAodHlwZSwgc3RyaWN0ID0gdHJ1ZSkgPT4gdGhpcy5faW5qZWN0b3IuZ2V0KHR5cGUsIHN0cmljdCk7XG4gICAgICBncm91cHMgPSBbLi4uZ3JvdXBzLCBHZW5lcmFsR3JvdXAoZmllbGQsIGVkaXRGaWVsZCwgZ2V0U2VydmljZSksIC4uLk9wdGlvbnNHcm91cHMoZmllbGQsIGVkaXRGaWVsZCwgZ2V0U2VydmljZSksIC4uLlRhYmxlSGVhZGVyR3JvdXBzKGZpZWxkLCBlZGl0RmllbGQpLCBTZWN1cml0eUF0dHJpYnV0ZXNHcm91cChmaWVsZCwgZWRpdEZpZWxkKSwgQ29uZGl0aW9uR3JvdXAoZmllbGQsIGVkaXRGaWVsZCksIExheW91dEdyb3VwKGZpZWxkLCBlZGl0RmllbGQpLCBBcHBlYXJhbmNlR3JvdXAoZmllbGQsIGVkaXRGaWVsZCksIFNlcmlhbGl6YXRpb25Hcm91cChmaWVsZCwgZWRpdEZpZWxkKSwgQ29uc3RyYWludHNHcm91cChmaWVsZCwgZWRpdEZpZWxkKSwgVmFsaWRhdGlvbkdyb3VwKGZpZWxkLCBlZGl0RmllbGQpLCBDdXN0b21Qcm9wZXJ0aWVzR3JvdXAoZmllbGQsIGVkaXRGaWVsZCldLmZpbHRlcihncm91cCA9PiBncm91cCAhPSBudWxsKTtcbiAgICAgIHRoaXMuX2ZpbHRlclZpc2libGVFbnRyaWVzKGdyb3VwcywgZmllbGQsIGdldFNlcnZpY2UpO1xuXG4gICAgICAvLyBjb250cmFjdDogaWYgYSBncm91cCBoYXMgbm8gZW50cmllcyBvciBpdGVtcywgaXQgc2hvdWxkIG5vdCBiZSBkaXNwbGF5ZWQgYXQgYWxsXG4gICAgICByZXR1cm4gZ3JvdXBzLmZpbHRlcihncm91cCA9PiB7XG4gICAgICAgIHJldHVybiBncm91cC5pdGVtcyB8fCBncm91cC5lbnRyaWVzICYmIGdyb3VwLmVudHJpZXMubGVuZ3RoO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfVxufVxuUHJvcGVydGllc1Byb3ZpZGVyLiRpbmplY3QgPSBbJ3Byb3BlcnRpZXNQYW5lbCcsICdpbmplY3RvciddO1xuXG5jb25zdCBQcm9wZXJ0aWVzUGFuZWxNb2R1bGUgPSB7XG4gIF9fZGVwZW5kc19fOiBbaW5kZXhdLFxuICBfX2luaXRfXzogWydwcm9wZXJ0aWVzUGFuZWwnLCAncHJvcGVydGllc1Byb3ZpZGVyJ10sXG4gIHByb3BlcnRpZXNQYW5lbDogWyd0eXBlJywgUHJvcGVydGllc1BhbmVsUmVuZGVyZXJdLFxuICBwcm9wZXJ0aWVzUHJvdmlkZXI6IFsndHlwZScsIFByb3BlcnRpZXNQcm92aWRlcl1cbn07XG5cbi8qKlxuICogTWFuYWdlcyB0aGUgcmVuZGVyaW5nIG9mIHZpc3VhbCBwbHVnaW5zLlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge09iamVjdH0gZXZlbnRCdXMgLSBFdmVudCBidXMgZm9yIHRoZSBhcHBsaWNhdGlvbi5cbiAqL1xuY2xhc3MgUmVuZGVySW5qZWN0b3IgZXh0ZW5kcyBTZWN0aW9uTW9kdWxlQmFzZSB7XG4gIGNvbnN0cnVjdG9yKGV2ZW50QnVzKSB7XG4gICAgc3VwZXIoZXZlbnRCdXMsICdyZW5kZXJJbmplY3RvcicpO1xuICAgIHRoaXMuX2V2ZW50QnVzID0gZXZlbnRCdXM7XG4gICAgdGhpcy5yZWdpc3RlcmVkUmVuZGVyZXJzID0gW107XG4gIH1cblxuICAvKipcbiAgICogSW5qZWN0IGEgbmV3IHJlbmRlcmVyIGludG8gdGhlIGluamVjdG9yLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWRlbnRpZmllciAtIElkZW50aWZpZXIgZm9yIHRoZSByZW5kZXJlci5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gUmVuZGVyZXIgLSBUaGUgcmVuZGVyZXIgZnVuY3Rpb24uXG4gICAqL1xuICBhdHRhY2hSZW5kZXJlcihpZGVudGlmaWVyLCBSZW5kZXJlcikge1xuICAgIHRoaXMucmVnaXN0ZXJlZFJlbmRlcmVycyA9IFsuLi50aGlzLnJlZ2lzdGVyZWRSZW5kZXJlcnMsIHtcbiAgICAgIGlkZW50aWZpZXIsXG4gICAgICBSZW5kZXJlclxuICAgIH1dO1xuICB9XG5cbiAgLyoqXG4gICAqIERldGFjaCBhIHJlbmRlcmVyIGZyb20gdGhlIGJ5IGtleSBpbmplY3Rvci5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkZW50aWZpZXIgLSBJZGVudGlmaWVyIGZvciB0aGUgcmVuZGVyZXIuXG4gICAqL1xuICBkZXRhY2hSZW5kZXJlcihpZGVudGlmaWVyKSB7XG4gICAgdGhpcy5yZWdpc3RlcmVkUmVuZGVyZXJzID0gdGhpcy5yZWdpc3RlcmVkUmVuZGVyZXJzLmZpbHRlcihyID0+IHIuaWRlbnRpZmllciAhPT0gaWRlbnRpZmllcik7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgcmVnaXN0ZXJlZCByZW5kZXJlcnMuXG4gICAqIEByZXR1cm5zIHtBcnJheX0gQXJyYXkgb2YgcmVnaXN0ZXJlZCByZW5kZXJlcnMuXG4gICAqL1xuICBmZXRjaFJlbmRlcmVycygpIHtcbiAgICByZXR1cm4gdGhpcy5yZWdpc3RlcmVkUmVuZGVyZXJzO1xuICB9XG59XG5SZW5kZXJJbmplY3Rvci4kaW5qZWN0ID0gWydldmVudEJ1cyddO1xuXG5jb25zdCBSZW5kZXJJbmplY3Rpb25Nb2R1bGUgPSB7XG4gIF9faW5pdF9fOiBbJ3JlbmRlckluamVjdG9yJ10sXG4gIHJlbmRlckluamVjdG9yOiBbJ3R5cGUnLCBSZW5kZXJJbmplY3Rvcl1cbn07XG5cbnZhciBfcGF0aDtcbmZ1bmN0aW9uIF9leHRlbmRzKCkgeyByZXR1cm4gX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduID8gT2JqZWN0LmFzc2lnbi5iaW5kKCkgOiBmdW5jdGlvbiAobikgeyBmb3IgKHZhciBlID0gMTsgZSA8IGFyZ3VtZW50cy5sZW5ndGg7IGUrKykgeyB2YXIgdCA9IGFyZ3VtZW50c1tlXTsgZm9yICh2YXIgciBpbiB0KSAoe30pLmhhc093blByb3BlcnR5LmNhbGwodCwgcikgJiYgKG5bcl0gPSB0W3JdKTsgfSByZXR1cm4gbjsgfSwgX2V4dGVuZHMuYXBwbHkobnVsbCwgYXJndW1lbnRzKTsgfVxudmFyIFN2Z1JlcGVhdCA9IGZ1bmN0aW9uIFN2Z1JlcGVhdChwcm9wcykge1xuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgX2V4dGVuZHMoe1xuICAgIHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsXG4gICAgd2lkdGg6IDE2LFxuICAgIGhlaWdodDogMTYsXG4gICAgZmlsbDogXCJub25lXCJcbiAgfSwgcHJvcHMpLCBfcGF0aCB8fCAoX3BhdGggPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInBhdGhcIiwge1xuICAgIGZpbGw6IFwiY3VycmVudENvbG9yXCIsXG4gICAgZDogXCJNMyAzaDEwLjA4NmwtMS43OTMtMS43OTNMMTIgLjVsMyAzLTMgMy0uNzA3LS43MDdMMTMuMDg2IDRIM3YzLjVIMlY0YTEgMSAwIDAgMSAxLTFNNC43MDcgMTAuMjA3IDIuOTE0IDEySDEzVjguNWgxVjEyYTEgMSAwIDAgMS0xIDFIMi45MTRsMS43OTMgMS43OTNMNCAxNS41bC0zLTMgMy0zelwiXG4gIH0pKSk7XG59O1xuXG5jbGFzcyBFZGl0b3JSZXBlYXRSZW5kZXJNYW5hZ2VyIHtcbiAgY29uc3RydWN0b3IoZm9ybUZpZWxkcywgZm9ybUZpZWxkUmVnaXN0cnkpIHtcbiAgICB0aGlzLl9mb3JtRmllbGRzID0gZm9ybUZpZWxkcztcbiAgICB0aGlzLl9mb3JtRmllbGRSZWdpc3RyeSA9IGZvcm1GaWVsZFJlZ2lzdHJ5O1xuICAgIHRoaXMuUmVwZWF0Rm9vdGVyID0gdGhpcy5SZXBlYXRGb290ZXIuYmluZCh0aGlzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVja3Mgd2hldGhlciBhIGZpZWxkIHNob3VsZCBiZSByZXBlYXRhYmxlLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgLSBUaGUgaWQgb2YgdGhlIGZpZWxkIHRvIGNoZWNrXG4gICAqIEByZXR1cm5zIHtib29sZWFufSAtIFRydWUgaWYgcmVwZWF0YWJsZSwgZmFsc2Ugb3RoZXJ3aXNlXG4gICAqL1xuICBpc0ZpZWxkUmVwZWF0aW5nKGlkKSB7XG4gICAgaWYgKCFpZCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCBmb3JtRmllbGQgPSB0aGlzLl9mb3JtRmllbGRSZWdpc3RyeS5nZXQoaWQpO1xuICAgIGNvbnN0IGZvcm1GaWVsZERlZmluaXRpb24gPSB0aGlzLl9mb3JtRmllbGRzLmdldChmb3JtRmllbGQudHlwZSk7XG4gICAgcmV0dXJuIGZvcm1GaWVsZERlZmluaXRpb24uY29uZmlnLnJlcGVhdGFibGUgJiYgZm9ybUZpZWxkLmlzUmVwZWF0aW5nO1xuICB9XG4gIFJlcGVhdEZvb3RlcigpIHtcbiAgICByZXR1cm4ganN4cyhcImRpdlwiLCB7XG4gICAgICBjbGFzc05hbWU6IFwiZmpzLXJlcGVhdC1yZW5kZXItZm9vdGVyXCIsXG4gICAgICBjaGlsZHJlbjogW2pzeChTdmdSZXBlYXQsIHt9KSwganN4KFwic3BhblwiLCB7XG4gICAgICAgIGNoaWxkcmVuOiBcIlJlcGVhdGFibGVcIlxuICAgICAgfSldXG4gICAgfSk7XG4gIH1cbn1cbkVkaXRvclJlcGVhdFJlbmRlck1hbmFnZXIuJGluamVjdCA9IFsnZm9ybUZpZWxkcycsICdmb3JtRmllbGRSZWdpc3RyeSddO1xuXG5jb25zdCBSZXBlYXRSZW5kZXJNb2R1bGUgPSB7XG4gIF9faW5pdF9fOiBbJ3JlcGVhdFJlbmRlck1hbmFnZXInXSxcbiAgcmVwZWF0UmVuZGVyTWFuYWdlcjogWyd0eXBlJywgRWRpdG9yUmVwZWF0UmVuZGVyTWFuYWdlcl1cbn07XG5cbmNvbnN0IGlkcyA9IG5ldyBJZHMoWzMyLCAzNiwgMV0pO1xuXG4vKipcbiAqIEB0eXBlZGVmIHsgaW1wb3J0KCcuL3R5cGVzJykuSW5qZWN0b3IgfSBJbmplY3RvclxuICogQHR5cGVkZWYgeyBpbXBvcnQoJy4vdHlwZXMnKS5Nb2R1bGUgfSBNb2R1bGVcbiAqIEB0eXBlZGVmIHsgaW1wb3J0KCcuL3R5cGVzJykuU2NoZW1hIH0gU2NoZW1hXG4gKlxuICogQHR5cGVkZWYgeyBpbXBvcnQoJy4vdHlwZXMnKS5Gb3JtRWRpdG9yT3B0aW9ucyB9IEZvcm1FZGl0b3JPcHRpb25zXG4gKiBAdHlwZWRlZiB7IGltcG9ydCgnLi90eXBlcycpLkZvcm1FZGl0b3JQcm9wZXJ0aWVzIH0gRm9ybUVkaXRvclByb3BlcnRpZXNcbiAqXG4gKiBAdHlwZWRlZiB7IHtcbiAqICAgcHJvcGVydGllczogRm9ybUVkaXRvclByb3BlcnRpZXMsXG4gKiAgIHNjaGVtYTogU2NoZW1hXG4gKiB9IH0gU3RhdGVcbiAqXG4gKiBAdHlwZWRlZiB7ICh0eXBlOnN0cmluZywgcHJpb3JpdHk6bnVtYmVyLCBoYW5kbGVyOkZ1bmN0aW9uKSA9PiB2b2lkIH0gT25FdmVudFdpdGhQcmlvcml0eVxuICogQHR5cGVkZWYgeyAodHlwZTpzdHJpbmcsIGhhbmRsZXI6RnVuY3Rpb24pID0+IHZvaWQgfSBPbkV2ZW50V2l0aE91dFByaW9yaXR5XG4gKiBAdHlwZWRlZiB7IE9uRXZlbnRXaXRoUHJpb3JpdHkgJiBPbkV2ZW50V2l0aE91dFByaW9yaXR5IH0gT25FdmVudFR5cGVcbiAqL1xuXG4vKipcbiAqIFRoZSBmb3JtIGVkaXRvci5cbiAqL1xuY2xhc3MgRm9ybUVkaXRvciB7XG4gIC8qKlxuICAgKiBAY29uc3RydWN0b3JcbiAgICogQHBhcmFtIHtGb3JtRWRpdG9yT3B0aW9uc30gb3B0aW9uc1xuICAgKi9cbiAgY29uc3RydWN0b3Iob3B0aW9ucyA9IHt9KSB7XG4gICAgLyoqXG4gICAgICogQHB1YmxpY1xuICAgICAqIEB0eXBlIHtPbkV2ZW50VHlwZX1cbiAgICAgKi9cbiAgICB0aGlzLm9uID0gdGhpcy5fb25FdmVudDtcblxuICAgIC8qKlxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICAqL1xuICAgIHRoaXMuX2lkID0gaWRzLm5leHQoKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0VsZW1lbnR9XG4gICAgICovXG4gICAgdGhpcy5fY29udGFpbmVyID0gY3JlYXRlRm9ybUNvbnRhaW5lcigpO1xuICAgIHRoaXMuX2NvbnRhaW5lci5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJzAnKTtcbiAgICBjb25zdCB7XG4gICAgICBjb250YWluZXIsXG4gICAgICBleHBvcnRlcixcbiAgICAgIGluamVjdG9yID0gdGhpcy5fY3JlYXRlSW5qZWN0b3Iob3B0aW9ucywgdGhpcy5fY29udGFpbmVyKSxcbiAgICAgIHByb3BlcnRpZXMgPSB7fVxuICAgIH0gPSBvcHRpb25zO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7YW55fVxuICAgICAqL1xuICAgIHRoaXMuZXhwb3J0ZXIgPSBleHBvcnRlcjtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge1N0YXRlfVxuICAgICAqL1xuICAgIHRoaXMuX3N0YXRlID0ge1xuICAgICAgcHJvcGVydGllcyxcbiAgICAgIHNjaGVtYTogbnVsbFxuICAgIH07XG4gICAgdGhpcy5nZXQgPSBpbmplY3Rvci5nZXQ7XG4gICAgdGhpcy5pbnZva2UgPSBpbmplY3Rvci5pbnZva2U7XG4gICAgdGhpcy5nZXQoJ2V2ZW50QnVzJykuZmlyZSgnZm9ybS5pbml0Jyk7XG4gICAgaWYgKGNvbnRhaW5lcikge1xuICAgICAgdGhpcy5hdHRhY2hUbyhjb250YWluZXIpO1xuICAgIH1cbiAgfVxuICBjbGVhcigpIHtcbiAgICAvLyBjbGVhciBmb3JtIHNlcnZpY2VzXG4gICAgdGhpcy5fZW1pdCgnZGlhZ3JhbS5jbGVhcicpO1xuXG4gICAgLy8gY2xlYXIgZGlhZ3JhbSBzZXJ2aWNlcyAoZS5nLiBFdmVudEJ1cylcbiAgICB0aGlzLl9lbWl0KCdmb3JtLmNsZWFyJyk7XG4gIH1cbiAgZGVzdHJveSgpIHtcbiAgICAvLyBkZXN0cm95IGZvcm0gc2VydmljZXNcbiAgICB0aGlzLmdldCgnZXZlbnRCdXMnKS5maXJlKCdmb3JtLmRlc3Ryb3knKTtcblxuICAgIC8vIGRlc3Ryb3kgZGlhZ3JhbSBzZXJ2aWNlcyAoZS5nLiBFdmVudEJ1cylcbiAgICB0aGlzLmdldCgnZXZlbnRCdXMnKS5maXJlKCdkaWFncmFtLmRlc3Ryb3knKTtcbiAgICB0aGlzLl9kZXRhY2goZmFsc2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7U2NoZW1hfSBzY2hlbWFcbiAgICpcbiAgICogQHJldHVybiB7UHJvbWlzZTx7IHdhcm5pbmdzOiBBcnJheTxhbnk+IH0+fVxuICAgKi9cbiAgaW1wb3J0U2NoZW1hKHNjaGVtYSkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICB0aGlzLmNsZWFyKCk7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICBzY2hlbWE6IGltcG9ydGVkU2NoZW1hLFxuICAgICAgICAgIHdhcm5pbmdzXG4gICAgICAgIH0gPSB0aGlzLmdldCgnaW1wb3J0ZXInKS5pbXBvcnRTY2hlbWEoc2NoZW1hKTtcbiAgICAgICAgdGhpcy5fc2V0U3RhdGUoe1xuICAgICAgICAgIHNjaGVtYTogaW1wb3J0ZWRTY2hlbWFcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX2VtaXQoJ2ltcG9ydC5kb25lJywge1xuICAgICAgICAgIHdhcm5pbmdzXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcmVzb2x2ZSh7XG4gICAgICAgICAgd2FybmluZ3NcbiAgICAgICAgfSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICB0aGlzLl9lbWl0KCdpbXBvcnQuZG9uZScsIHtcbiAgICAgICAgICBlcnJvcjogZXJyb3IsXG4gICAgICAgICAgd2FybmluZ3M6IGVycm9yLndhcm5pbmdzIHx8IFtdXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcmVqZWN0KGVycm9yKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7U2NoZW1hfVxuICAgKi9cbiAgc2F2ZVNjaGVtYSgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRTY2hlbWEoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7U2NoZW1hfVxuICAgKi9cbiAgZ2V0U2NoZW1hKCkge1xuICAgIGNvbnN0IHtcbiAgICAgIHNjaGVtYVxuICAgIH0gPSB0aGlzLl9nZXRTdGF0ZSgpO1xuICAgIHJldHVybiBleHBvcnRTY2hlbWEoc2NoZW1hLCB0aGlzLmV4cG9ydGVyLCBzY2hlbWFWZXJzaW9uKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0VsZW1lbnR8c3RyaW5nfSBwYXJlbnROb2RlXG4gICAqL1xuICBhdHRhY2hUbyhwYXJlbnROb2RlKSB7XG4gICAgaWYgKCFwYXJlbnROb2RlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ3BhcmVudE5vZGUgcmVxdWlyZWQnKTtcbiAgICB9XG4gICAgdGhpcy5kZXRhY2goKTtcbiAgICBpZiAoaXNTdHJpbmcocGFyZW50Tm9kZSkpIHtcbiAgICAgIHBhcmVudE5vZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBhcmVudE5vZGUpO1xuICAgIH1cbiAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLl9jb250YWluZXI7XG4gICAgcGFyZW50Tm9kZS5hcHBlbmRDaGlsZChjb250YWluZXIpO1xuICAgIHRoaXMuX2VtaXQoJ2F0dGFjaCcpO1xuICB9XG4gIGRldGFjaCgpIHtcbiAgICB0aGlzLl9kZXRhY2goKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAaW50ZXJuYWxcbiAgICpcbiAgICogQHBhcmFtIHtib29sZWFufSBbZW1pdF1cbiAgICovXG4gIF9kZXRhY2goZW1pdCA9IHRydWUpIHtcbiAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLl9jb250YWluZXIsXG4gICAgICBwYXJlbnROb2RlID0gY29udGFpbmVyLnBhcmVudE5vZGU7XG4gICAgaWYgKCFwYXJlbnROb2RlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChlbWl0KSB7XG4gICAgICB0aGlzLl9lbWl0KCdkZXRhY2gnKTtcbiAgICB9XG4gICAgcGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjb250YWluZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7YW55fSBwcm9wZXJ0eVxuICAgKiBAcGFyYW0ge2FueX0gdmFsdWVcbiAgICovXG4gIHNldFByb3BlcnR5KHByb3BlcnR5LCB2YWx1ZSkge1xuICAgIGNvbnN0IHByb3BlcnRpZXMgPSBzZXQkMSh0aGlzLl9nZXRTdGF0ZSgpLnByb3BlcnRpZXMsIFtwcm9wZXJ0eV0sIHZhbHVlKTtcbiAgICB0aGlzLl9zZXRTdGF0ZSh7XG4gICAgICBwcm9wZXJ0aWVzXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGVcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlclxuICAgKi9cbiAgb2ZmKHR5cGUsIGhhbmRsZXIpIHtcbiAgICB0aGlzLmdldCgnZXZlbnRCdXMnKS5vZmYodHlwZSwgaGFuZGxlcik7XG4gIH1cblxuICAvKipcbiAgICogQGludGVybmFsXG4gICAqXG4gICAqIEBwYXJhbSB7Rm9ybUVkaXRvck9wdGlvbnN9IG9wdGlvbnNcbiAgICogQHBhcmFtIHtFbGVtZW50fSBjb250YWluZXJcbiAgICpcbiAgICogQHJldHVybnMge0luamVjdG9yfVxuICAgKi9cbiAgX2NyZWF0ZUluamVjdG9yKG9wdGlvbnMsIGNvbnRhaW5lcikge1xuICAgIGNvbnN0IHtcbiAgICAgIG1vZHVsZXMgPSB0aGlzLl9nZXRNb2R1bGVzKCksXG4gICAgICBhZGRpdGlvbmFsTW9kdWxlcyA9IFtdLFxuICAgICAgcmVuZGVyZXIgPSB7fSxcbiAgICAgIC4uLmNvbmZpZ1xuICAgIH0gPSBvcHRpb25zO1xuICAgIGNvbnN0IGVucmljaGVkQ29uZmlnID0ge1xuICAgICAgLi4uY29uZmlnLFxuICAgICAgcmVuZGVyZXI6IHtcbiAgICAgICAgLi4ucmVuZGVyZXIsXG4gICAgICAgIGNvbnRhaW5lclxuICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIGNyZWF0ZUluamVjdG9yKFt7XG4gICAgICBjb25maWc6IFsndmFsdWUnLCBlbnJpY2hlZENvbmZpZ11cbiAgICB9LCB7XG4gICAgICBmb3JtRWRpdG9yOiBbJ3ZhbHVlJywgdGhpc11cbiAgICB9LCBDb3JlTW9kdWxlLCAuLi5tb2R1bGVzLCAuLi5hZGRpdGlvbmFsTW9kdWxlc10pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgX2VtaXQodHlwZSwgZGF0YSkge1xuICAgIHRoaXMuZ2V0KCdldmVudEJ1cycpLmZpcmUodHlwZSwgZGF0YSk7XG4gIH1cblxuICAvKipcbiAgICogQGludGVybmFsXG4gICAqL1xuICBfZ2V0U3RhdGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3N0YXRlO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgX3NldFN0YXRlKHN0YXRlKSB7XG4gICAgdGhpcy5fc3RhdGUgPSB7XG4gICAgICAuLi50aGlzLl9zdGF0ZSxcbiAgICAgIC4uLnN0YXRlXG4gICAgfTtcbiAgICB0aGlzLl9lbWl0KCdjaGFuZ2VkJywgdGhpcy5fZ2V0U3RhdGUoKSk7XG4gIH1cblxuICAvKipcbiAgICogQGludGVybmFsXG4gICAqL1xuICBfZ2V0TW9kdWxlcygpIHtcbiAgICByZXR1cm4gW01vZGVsaW5nTW9kdWxlLCBFZGl0b3JBY3Rpb25zTW9kdWxlLCBGb3JtRWRpdG9yS2V5Ym9hcmRNb2R1bGUsIERyYWdnaW5nTW9kdWxlLCBTZWxlY3Rpb25Nb2R1bGUsIFBhbGV0dGVNb2R1bGUsIEVkaXRvckV4cHJlc3Npb25MYW5ndWFnZU1vZHVsZSwgTWFya2Rvd25SZW5kZXJlck1vZHVsZSwgUHJvcGVydGllc1BhbmVsTW9kdWxlLCBSZW5kZXJJbmplY3Rpb25Nb2R1bGUsIFJlcGVhdFJlbmRlck1vZHVsZV07XG4gIH1cblxuICAvKipcbiAgICogQGludGVybmFsXG4gICAqL1xuICBfb25FdmVudCh0eXBlLCBwcmlvcml0eSwgaGFuZGxlcikge1xuICAgIHRoaXMuZ2V0KCdldmVudEJ1cycpLm9uKHR5cGUsIHByaW9yaXR5LCBoYW5kbGVyKTtcbiAgfVxufVxuXG4vLyBoZWxwZXJzIC8vLy8vLy8vLy9cblxuZnVuY3Rpb24gZXhwb3J0U2NoZW1hKHNjaGVtYSwgZXhwb3J0ZXIsIHNjaGVtYVZlcnNpb24pIHtcbiAgY29uc3QgZXhwb3J0RGV0YWlscyA9IGV4cG9ydGVyID8ge1xuICAgIGV4cG9ydGVyXG4gIH0gOiB7fTtcbiAgY29uc3QgY2xlYW5lZFNjaGVtYSA9IGNsb25lKHNjaGVtYSwgKG5hbWUsIHZhbHVlKSA9PiB7XG4gICAgaWYgKFsnX3BhcmVudCcsICdfcGF0aCddLmluY2x1ZGVzKG5hbWUpKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG4gIH0pO1xuICByZXR1cm4ge1xuICAgIC4uLmNsZWFuZWRTY2hlbWEsXG4gICAgLi4uZXhwb3J0RGV0YWlscyxcbiAgICBzY2hlbWFWZXJzaW9uXG4gIH07XG59XG5cbi8qKlxuICogQHR5cGVkZWYgeyBpbXBvcnQoJy4vdHlwZXMnKS5DcmVhdGVGb3JtRWRpdG9yT3B0aW9ucyB9IENyZWF0ZUZvcm1FZGl0b3JPcHRpb25zXG4gKi9cblxuLyoqXG4gKiBDcmVhdGUgYSBmb3JtIGVkaXRvci5cbiAqXG4gKiBAcGFyYW0ge0NyZWF0ZUZvcm1FZGl0b3JPcHRpb25zfSBvcHRpb25zXG4gKlxuICogQHJldHVybiB7UHJvbWlzZTxGb3JtRWRpdG9yPn1cbiAqL1xuZnVuY3Rpb24gY3JlYXRlRm9ybUVkaXRvcihvcHRpb25zKSB7XG4gIGNvbnN0IHtcbiAgICBzY2hlbWEsXG4gICAgLi4ucmVzdFxuICB9ID0gb3B0aW9ucztcbiAgY29uc3QgZm9ybUVkaXRvciA9IG5ldyBGb3JtRWRpdG9yKHJlc3QpO1xuICByZXR1cm4gZm9ybUVkaXRvci5pbXBvcnRTY2hlbWEoc2NoZW1hKS50aGVuKCgpID0+IHtcbiAgICByZXR1cm4gZm9ybUVkaXRvcjtcbiAgfSk7XG59XG5cbmV4cG9ydCB7IEZvcm1FZGl0b3IsIGNyZWF0ZUZvcm1FZGl0b3IsIHVzZURlYm91bmNlJDEgYXMgdXNlRGVib3VuY2UsIHVzZVByZXZpb3VzJDEgYXMgdXNlUHJldmlvdXMsIHVzZVNlcnZpY2UgYXMgdXNlUHJvcGVydGllc1BhbmVsU2VydmljZSwgdXNlU2VydmljZSQxIGFzIHVzZVNlcnZpY2UsIHVzZVZhcmlhYmxlcyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXMuanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../node_modules/@bpmn-io/form-js-editor/dist/index.es.js\n\n}");

/***/ }),

/***/ "../node_modules/@bpmn-io/form-js-editor/node_modules/big.js/big.mjs":
/*!***************************************************************************!*\
  !*** ../node_modules/@bpmn-io/form-js-editor/node_modules/big.js/big.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Big: () => (/* binding */ Big),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/*\r\n *  big.js v7.0.1\r\n *  A small, fast, easy-to-use library for arbitrary-precision decimal arithmetic.\r\n *  Copyright (c) 2025 Michael Mclaughlin\r\n *  https://github.com/MikeMcl/big.js/LICENCE.md\r\n */\r\n\r\n\r\n/************************************** EDITABLE DEFAULTS *****************************************/\r\n\r\n\r\n  // The default values below must be integers within the stated ranges.\r\n\r\n  /*\r\n   * The maximum number of decimal places (DP) of the results of operations involving division:\r\n   * div and sqrt, and pow with negative exponents.\r\n   */\r\nvar DP = 20,          // 0 to MAX_DP\r\n\r\n  /*\r\n   * The rounding mode (RM) used when rounding to the above decimal places.\r\n   *\r\n   *  0  Towards zero (i.e. truncate, no rounding).       (ROUND_DOWN)\r\n   *  1  To nearest neighbour. If equidistant, round up.  (ROUND_HALF_UP)\r\n   *  2  To nearest neighbour. If equidistant, to even.   (ROUND_HALF_EVEN)\r\n   *  3  Away from zero.                                  (ROUND_UP)\r\n   */\r\n  RM = 1,             // 0, 1, 2 or 3\r\n\r\n  // The maximum value of DP and Big.DP.\r\n  MAX_DP = 1E6,       // 0 to 1000000\r\n\r\n  // The maximum magnitude of the exponent argument to the pow method.\r\n  MAX_POWER = 1E6,    // 1 to 1000000\r\n\r\n  /*\r\n   * The negative exponent (NE) at and beneath which toString returns exponential notation.\r\n   * (JavaScript numbers: -7)\r\n   * -1000000 is the minimum recommended exponent value of a Big.\r\n   */\r\n  NE = -7,            // 0 to -1000000\r\n\r\n  /*\r\n   * The positive exponent (PE) at and above which toString returns exponential notation.\r\n   * (JavaScript numbers: 21)\r\n   * 1000000 is the maximum recommended exponent value of a Big, but this limit is not enforced.\r\n   */\r\n  PE = 21,            // 0 to 1000000\r\n\r\n  /*\r\n   * When true, an error will be thrown if a primitive number is passed to the Big constructor,\r\n   * or if valueOf is called, or if toNumber is called on a Big which cannot be converted to a\r\n   * primitive number without a loss of precision.\r\n   */\r\n  STRICT = false,     // true or false\r\n\r\n\r\n/**************************************************************************************************/\r\n\r\n\r\n  // Error messages.\r\n  NAME = '[big.js] ',\r\n  INVALID = NAME + 'Invalid ',\r\n  INVALID_DP = INVALID + 'decimal places',\r\n  INVALID_RM = INVALID + 'rounding mode',\r\n  DIV_BY_ZERO = NAME + 'Division by zero',\r\n\r\n  // The shared prototype object.\r\n  P = {},\r\n  UNDEFINED = void 0,\r\n  NUMERIC = /^-?(\\d+(\\.\\d*)?|\\.\\d+)(e[+-]?\\d+)?$/i;\r\n\r\n\r\n/*\r\n * Create and return a Big constructor.\r\n */\r\nfunction _Big_() {\r\n\r\n  /*\r\n   * The Big constructor and exported function.\r\n   * Create and return a new instance of a Big number object.\r\n   *\r\n   * n {number|string|Big} A numeric value.\r\n   */\r\n  function Big(n) {\r\n    var x = this;\r\n\r\n    // Enable constructor usage without new.\r\n    if (!(x instanceof Big)) {\r\n      return n === UNDEFINED && arguments.length === 0 ? _Big_() : new Big(n);\r\n    }\r\n\r\n\r\n    // Duplicate.\r\n    if (n instanceof Big) {\r\n      x.s = n.s;\r\n      x.e = n.e;\r\n      x.c = n.c.slice();\r\n    } else {\r\n      if (typeof n !== 'string') {\r\n        if (Big.strict === true && typeof n !== 'bigint') {\r\n          throw TypeError(INVALID + 'value');\r\n        }\r\n\r\n        // Minus zero?\r\n        n = n === 0 && 1 / n < 0 ? '-0' : String(n);\r\n      }\r\n\r\n      parse(x, n);\r\n    }\r\n\r\n    // Retain a reference to this Big constructor.\r\n    // Shadow Big.prototype.constructor which points to Object.\r\n    x.constructor = Big;\r\n  }\r\n\r\n  Big.prototype = P;\r\n  Big.DP = DP;\r\n  Big.RM = RM;\r\n  Big.NE = NE;\r\n  Big.PE = PE;\r\n  Big.strict = STRICT;\r\n  Big.roundDown = 0;\r\n  Big.roundHalfUp = 1;\r\n  Big.roundHalfEven = 2;\r\n  Big.roundUp = 3;\r\n\r\n  return Big;\r\n}\r\n\r\n\r\n/*\r\n * Parse the number or string value passed to a Big constructor.\r\n *\r\n * x {Big} A Big number instance.\r\n * n {number|string} A numeric value.\r\n */\r\nfunction parse(x, n) {\r\n  var e, i, nl;\r\n\r\n  if (!NUMERIC.test(n)) {\r\n    throw Error(INVALID + 'number');\r\n  }\r\n\r\n  // Determine sign.\r\n  x.s = n.charAt(0) == '-' ? (n = n.slice(1), -1) : 1;\r\n\r\n  // Decimal point?\r\n  if ((e = n.indexOf('.')) > -1) n = n.replace('.', '');\r\n\r\n  // Exponential form?\r\n  if ((i = n.search(/e/i)) > 0) {\r\n\r\n    // Determine exponent.\r\n    if (e < 0) e = i;\r\n    e += +n.slice(i + 1);\r\n    n = n.substring(0, i);\r\n  } else if (e < 0) {\r\n\r\n    // Integer.\r\n    e = n.length;\r\n  }\r\n\r\n  nl = n.length;\r\n\r\n  // Determine leading zeros.\r\n  for (i = 0; i < nl && n.charAt(i) == '0';) ++i;\r\n\r\n  if (i == nl) {\r\n\r\n    // Zero.\r\n    x.c = [x.e = 0];\r\n  } else {\r\n\r\n    // Determine trailing zeros.\r\n    for (; nl > 0 && n.charAt(--nl) == '0';);\r\n    x.e = e - i - 1;\r\n    x.c = [];\r\n\r\n    // Convert string to array of digits without leading/trailing zeros.\r\n    for (e = 0; i <= nl;) x.c[e++] = +n.charAt(i++);\r\n  }\r\n\r\n  return x;\r\n}\r\n\r\n\r\n/*\r\n * Round Big x to a maximum of sd significant digits using rounding mode rm.\r\n *\r\n * x {Big} The Big to round.\r\n * sd {number} Significant digits: integer, 0 to MAX_DP inclusive.\r\n * rm {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\r\n * [more] {boolean} Whether the result of division was truncated.\r\n */\r\nfunction round(x, sd, rm, more) {\r\n  var xc = x.c;\r\n\r\n  if (rm === UNDEFINED) rm = x.constructor.RM;\r\n  if (rm !== 0 && rm !== 1 && rm !== 2 && rm !== 3) {\r\n    throw Error(INVALID_RM);\r\n  }\r\n\r\n  if (sd < 1) {\r\n    more =\r\n      rm === 3 && (more || !!xc[0]) || sd === 0 && (\r\n      rm === 1 && xc[0] >= 5 ||\r\n      rm === 2 && (xc[0] > 5 || xc[0] === 5 && (more || xc[1] !== UNDEFINED))\r\n    );\r\n\r\n    xc.length = 1;\r\n\r\n    if (more) {\r\n\r\n      // 1, 0.1, 0.01, 0.001, 0.0001 etc.\r\n      x.e = x.e - sd + 1;\r\n      xc[0] = 1;\r\n    } else {\r\n\r\n      // Zero.\r\n      xc[0] = x.e = 0;\r\n    }\r\n  } else if (sd < xc.length) {\r\n\r\n    // xc[sd] is the digit after the digit that may be rounded up.\r\n    more =\r\n      rm === 1 && xc[sd] >= 5 ||\r\n      rm === 2 && (xc[sd] > 5 || xc[sd] === 5 &&\r\n        (more || xc[sd + 1] !== UNDEFINED || xc[sd - 1] & 1)) ||\r\n      rm === 3 && (more || !!xc[0]);\r\n\r\n    // Remove any digits after the required precision.\r\n    xc.length = sd;\r\n\r\n    // Round up?\r\n    if (more) {\r\n\r\n      // Rounding up may mean the previous digit has to be rounded up.\r\n      for (; ++xc[--sd] > 9;) {\r\n        xc[sd] = 0;\r\n        if (sd === 0) {\r\n          ++x.e;\r\n          xc.unshift(1);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    // Remove trailing zeros.\r\n    for (sd = xc.length; !xc[--sd];) xc.pop();\r\n  }\r\n\r\n  return x;\r\n}\r\n\r\n\r\n/*\r\n * Return a string representing the value of Big x in normal or exponential notation.\r\n * Handles P.toExponential, P.toFixed, P.toJSON, P.toPrecision, P.toString and P.valueOf.\r\n */\r\nfunction stringify(x, doExponential, isNonzero) {\r\n  var e = x.e,\r\n    s = x.c.join(''),\r\n    n = s.length;\r\n\r\n  // Exponential notation?\r\n  if (doExponential) {\r\n    s = s.charAt(0) + (n > 1 ? '.' + s.slice(1) : '') + (e < 0 ? 'e' : 'e+') + e;\r\n\r\n  // Normal notation.\r\n  } else if (e < 0) {\r\n    for (; ++e;) s = '0' + s;\r\n    s = '0.' + s;\r\n  } else if (e > 0) {\r\n    if (++e > n) {\r\n      for (e -= n; e--;) s += '0';\r\n    } else if (e < n) {\r\n      s = s.slice(0, e) + '.' + s.slice(e);\r\n    }\r\n  } else if (n > 1) {\r\n    s = s.charAt(0) + '.' + s.slice(1);\r\n  }\r\n\r\n  return x.s < 0 && isNonzero ? '-' + s : s;\r\n}\r\n\r\n\r\n// Prototype/instance methods\r\n\r\n\r\n/*\r\n * Return a new Big whose value is the absolute value of this Big.\r\n */\r\nP.abs = function () {\r\n  var x = new this.constructor(this);\r\n  x.s = 1;\r\n  return x;\r\n};\r\n\r\n\r\n/*\r\n * Return 1 if the value of this Big is greater than the value of Big y,\r\n *       -1 if the value of this Big is less than the value of Big y, or\r\n *        0 if they have the same value.\r\n */\r\nP.cmp = function (y) {\r\n  var isneg,\r\n    x = this,\r\n    xc = x.c,\r\n    yc = (y = new x.constructor(y)).c,\r\n    i = x.s,\r\n    j = y.s,\r\n    k = x.e,\r\n    l = y.e;\r\n\r\n  // Either zero?\r\n  if (!xc[0] || !yc[0]) return !xc[0] ? !yc[0] ? 0 : -j : i;\r\n\r\n  // Signs differ?\r\n  if (i != j) return i;\r\n\r\n  isneg = i < 0;\r\n\r\n  // Compare exponents.\r\n  if (k != l) return k > l ^ isneg ? 1 : -1;\r\n\r\n  j = (k = xc.length) < (l = yc.length) ? k : l;\r\n\r\n  // Compare digit by digit.\r\n  for (i = -1; ++i < j;) {\r\n    if (xc[i] != yc[i]) return xc[i] > yc[i] ^ isneg ? 1 : -1;\r\n  }\r\n\r\n  // Compare lengths.\r\n  return k == l ? 0 : k > l ^ isneg ? 1 : -1;\r\n};\r\n\r\n\r\n/*\r\n * Return a new Big whose value is the value of this Big divided by the value of Big y, rounded,\r\n * if necessary, to a maximum of Big.DP decimal places using rounding mode Big.RM.\r\n */\r\nP.div = function (y) {\r\n  var x = this,\r\n    Big = x.constructor,\r\n    a = x.c,                  // dividend\r\n    b = (y = new Big(y)).c,   // divisor\r\n    k = x.s == y.s ? 1 : -1,\r\n    dp = Big.DP;\r\n\r\n  if (dp !== ~~dp || dp < 0 || dp > MAX_DP) {\r\n    throw Error(INVALID_DP);\r\n  }\r\n\r\n  // Divisor is zero?\r\n  if (!b[0]) {\r\n    throw Error(DIV_BY_ZERO);\r\n  }\r\n\r\n  // Dividend is 0? Return +-0.\r\n  if (!a[0]) {\r\n    y.s = k;\r\n    y.c = [y.e = 0];\r\n    return y;\r\n  }\r\n\r\n  var bl, bt, n, cmp, ri,\r\n    bz = b.slice(),\r\n    ai = bl = b.length,\r\n    al = a.length,\r\n    r = a.slice(0, bl),   // remainder\r\n    rl = r.length,\r\n    q = y,                // quotient\r\n    qc = q.c = [],\r\n    qi = 0,\r\n    p = dp + (q.e = x.e - y.e) + 1;    // precision of the result\r\n\r\n  q.s = k;\r\n  k = p < 0 ? 0 : p;\r\n\r\n  // Create version of divisor with leading zero.\r\n  bz.unshift(0);\r\n\r\n  // Add zeros to make remainder as long as divisor.\r\n  for (; rl++ < bl;) r.push(0);\r\n\r\n  do {\r\n\r\n    // n is how many times the divisor goes into current remainder.\r\n    for (n = 0; n < 10; n++) {\r\n\r\n      // Compare divisor and remainder.\r\n      if (bl != (rl = r.length)) {\r\n        cmp = bl > rl ? 1 : -1;\r\n      } else {\r\n        for (ri = -1, cmp = 0; ++ri < bl;) {\r\n          if (b[ri] != r[ri]) {\r\n            cmp = b[ri] > r[ri] ? 1 : -1;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n\r\n      // If divisor < remainder, subtract divisor from remainder.\r\n      if (cmp < 0) {\r\n\r\n        // Remainder can't be more than 1 digit longer than divisor.\r\n        // Equalise lengths using divisor with extra leading zero?\r\n        for (bt = rl == bl ? b : bz; rl;) {\r\n          if (r[--rl] < bt[rl]) {\r\n            ri = rl;\r\n            for (; ri && !r[--ri];) r[ri] = 9;\r\n            --r[ri];\r\n            r[rl] += 10;\r\n          }\r\n          r[rl] -= bt[rl];\r\n        }\r\n\r\n        for (; !r[0];) r.shift();\r\n      } else {\r\n        break;\r\n      }\r\n    }\r\n\r\n    // Add the digit n to the result array.\r\n    qc[qi++] = cmp ? n : ++n;\r\n\r\n    // Update the remainder.\r\n    if (r[0] && cmp) r[rl] = a[ai] || 0;\r\n    else r = [a[ai]];\r\n\r\n  } while ((ai++ < al || r[0] !== UNDEFINED) && k--);\r\n\r\n  // Leading zero? Do not remove if result is simply zero (qi == 1).\r\n  if (!qc[0] && qi != 1) {\r\n\r\n    // There can't be more than one zero.\r\n    qc.shift();\r\n    q.e--;\r\n    p--;\r\n  }\r\n\r\n  // Round?\r\n  if (qi > p) round(q, p, Big.RM, r[0] !== UNDEFINED);\r\n\r\n  return q;\r\n};\r\n\r\n\r\n/*\r\n * Return true if the value of this Big is equal to the value of Big y, otherwise return false.\r\n */\r\nP.eq = function (y) {\r\n  return this.cmp(y) === 0;\r\n};\r\n\r\n\r\n/*\r\n * Return true if the value of this Big is greater than the value of Big y, otherwise return\r\n * false.\r\n */\r\nP.gt = function (y) {\r\n  return this.cmp(y) > 0;\r\n};\r\n\r\n\r\n/*\r\n * Return true if the value of this Big is greater than or equal to the value of Big y, otherwise\r\n * return false.\r\n */\r\nP.gte = function (y) {\r\n  return this.cmp(y) > -1;\r\n};\r\n\r\n\r\n/*\r\n * Return true if the value of this Big is less than the value of Big y, otherwise return false.\r\n */\r\nP.lt = function (y) {\r\n  return this.cmp(y) < 0;\r\n};\r\n\r\n\r\n/*\r\n * Return true if the value of this Big is less than or equal to the value of Big y, otherwise\r\n * return false.\r\n */\r\nP.lte = function (y) {\r\n  return this.cmp(y) < 1;\r\n};\r\n\r\n\r\n/*\r\n * Return a new Big whose value is the value of this Big minus the value of Big y.\r\n */\r\nP.minus = P.sub = function (y) {\r\n  var i, j, t, xlty,\r\n    x = this,\r\n    Big = x.constructor,\r\n    a = x.s,\r\n    b = (y = new Big(y)).s;\r\n\r\n  // Signs differ?\r\n  if (a != b) {\r\n    y.s = -b;\r\n    return x.plus(y);\r\n  }\r\n\r\n  var xc = x.c.slice(),\r\n    xe = x.e,\r\n    yc = y.c,\r\n    ye = y.e;\r\n\r\n  // Either zero?\r\n  if (!xc[0] || !yc[0]) {\r\n    if (yc[0]) {\r\n      y.s = -b;\r\n    } else if (xc[0]) {\r\n      y = new Big(x);\r\n    } else {\r\n      y.s = 1;\r\n    }\r\n    return y;\r\n  }\r\n\r\n  // Determine which is the bigger number. Prepend zeros to equalise exponents.\r\n  if (a = xe - ye) {\r\n\r\n    if (xlty = a < 0) {\r\n      a = -a;\r\n      t = xc;\r\n    } else {\r\n      ye = xe;\r\n      t = yc;\r\n    }\r\n\r\n    t.reverse();\r\n    for (b = a; b--;) t.push(0);\r\n    t.reverse();\r\n  } else {\r\n\r\n    // Exponents equal. Check digit by digit.\r\n    j = ((xlty = xc.length < yc.length) ? xc : yc).length;\r\n\r\n    for (a = b = 0; b < j; b++) {\r\n      if (xc[b] != yc[b]) {\r\n        xlty = xc[b] < yc[b];\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  // x < y? Point xc to the array of the bigger number.\r\n  if (xlty) {\r\n    t = xc;\r\n    xc = yc;\r\n    yc = t;\r\n    y.s = -y.s;\r\n  }\r\n\r\n  /*\r\n   * Append zeros to xc if shorter. No need to add zeros to yc if shorter as subtraction only\r\n   * needs to start at yc.length.\r\n   */\r\n  if ((b = (j = yc.length) - (i = xc.length)) > 0) for (; b--;) xc[i++] = 0;\r\n\r\n  // Subtract yc from xc.\r\n  for (b = i; j > a;) {\r\n    if (xc[--j] < yc[j]) {\r\n      for (i = j; i && !xc[--i];) xc[i] = 9;\r\n      --xc[i];\r\n      xc[j] += 10;\r\n    }\r\n\r\n    xc[j] -= yc[j];\r\n  }\r\n\r\n  // Remove trailing zeros.\r\n  for (; xc[--b] === 0;) xc.pop();\r\n\r\n  // Remove leading zeros and adjust exponent accordingly.\r\n  for (; xc[0] === 0;) {\r\n    xc.shift();\r\n    --ye;\r\n  }\r\n\r\n  if (!xc[0]) {\r\n\r\n    // n - n = +0\r\n    y.s = 1;\r\n\r\n    // Result must be zero.\r\n    xc = [ye = 0];\r\n  }\r\n\r\n  y.c = xc;\r\n  y.e = ye;\r\n\r\n  return y;\r\n};\r\n\r\n\r\n/*\r\n * Return a new Big whose value is the value of this Big modulo the value of Big y.\r\n */\r\nP.mod = function (y) {\r\n  var ygtx,\r\n    x = this,\r\n    Big = x.constructor,\r\n    a = x.s,\r\n    b = (y = new Big(y)).s;\r\n\r\n  if (!y.c[0]) {\r\n    throw Error(DIV_BY_ZERO);\r\n  }\r\n\r\n  x.s = y.s = 1;\r\n  ygtx = y.cmp(x) == 1;\r\n  x.s = a;\r\n  y.s = b;\r\n\r\n  if (ygtx) return new Big(x);\r\n\r\n  a = Big.DP;\r\n  b = Big.RM;\r\n  Big.DP = Big.RM = 0;\r\n  x = x.div(y);\r\n  Big.DP = a;\r\n  Big.RM = b;\r\n\r\n  return this.minus(x.times(y));\r\n};\r\n\r\n\r\n/*\r\n * Return a new Big whose value is the value of this Big negated.\r\n */\r\nP.neg = function () {\r\n  var x = new this.constructor(this);\r\n  x.s = -x.s;\r\n  return x;\r\n};\r\n\r\n\r\n/*\r\n * Return a new Big whose value is the value of this Big plus the value of Big y.\r\n */\r\nP.plus = P.add = function (y) {\r\n  var e, k, t,\r\n    x = this,\r\n    Big = x.constructor;\r\n\r\n  y = new Big(y);\r\n\r\n  // Signs differ?\r\n  if (x.s != y.s) {\r\n    y.s = -y.s;\r\n    return x.minus(y);\r\n  }\r\n\r\n  var xe = x.e,\r\n    xc = x.c,\r\n    ye = y.e,\r\n    yc = y.c;\r\n\r\n  // Either zero?\r\n  if (!xc[0] || !yc[0]) {\r\n    if (!yc[0]) {\r\n      if (xc[0]) {\r\n        y = new Big(x);\r\n      } else {\r\n        y.s = x.s;\r\n      }\r\n    }\r\n    return y;\r\n  }\r\n\r\n  xc = xc.slice();\r\n\r\n  // Prepend zeros to equalise exponents.\r\n  // Note: reverse faster than unshifts.\r\n  if (e = xe - ye) {\r\n    if (e > 0) {\r\n      ye = xe;\r\n      t = yc;\r\n    } else {\r\n      e = -e;\r\n      t = xc;\r\n    }\r\n\r\n    t.reverse();\r\n    for (; e--;) t.push(0);\r\n    t.reverse();\r\n  }\r\n\r\n  // Point xc to the longer array.\r\n  if (xc.length - yc.length < 0) {\r\n    t = yc;\r\n    yc = xc;\r\n    xc = t;\r\n  }\r\n\r\n  e = yc.length;\r\n\r\n  // Only start adding at yc.length - 1 as the further digits of xc can be left as they are.\r\n  for (k = 0; e; xc[e] %= 10) k = (xc[--e] = xc[e] + yc[e] + k) / 10 | 0;\r\n\r\n  // No need to check for zero, as +x + +y != 0 && -x + -y != 0\r\n\r\n  if (k) {\r\n    xc.unshift(k);\r\n    ++ye;\r\n  }\r\n\r\n  // Remove trailing zeros.\r\n  for (e = xc.length; xc[--e] === 0;) xc.pop();\r\n\r\n  y.c = xc;\r\n  y.e = ye;\r\n\r\n  return y;\r\n};\r\n\r\n\r\n/*\r\n * Return a Big whose value is the value of this Big raised to the power n.\r\n * If n is negative, round to a maximum of Big.DP decimal places using rounding\r\n * mode Big.RM.\r\n *\r\n * n {number} Integer, -MAX_POWER to MAX_POWER inclusive.\r\n */\r\nP.pow = function (n) {\r\n  var x = this,\r\n    one = new x.constructor('1'),\r\n    y = one,\r\n    isneg = n < 0;\r\n\r\n  if (n !== ~~n || n < -MAX_POWER || n > MAX_POWER) {\r\n    throw Error(INVALID + 'exponent');\r\n  }\r\n\r\n  if (isneg) n = -n;\r\n\r\n  for (;;) {\r\n    if (n & 1) y = y.times(x);\r\n    n >>= 1;\r\n    if (!n) break;\r\n    x = x.times(x);\r\n  }\r\n\r\n  return isneg ? one.div(y) : y;\r\n};\r\n\r\n\r\n/*\r\n * Return a new Big whose value is the value of this Big rounded to a maximum precision of sd\r\n * significant digits using rounding mode rm, or Big.RM if rm is not specified.\r\n *\r\n * sd {number} Significant digits: integer, 1 to MAX_DP inclusive.\r\n * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\r\n */\r\nP.prec = function (sd, rm) {\r\n  if (sd !== ~~sd || sd < 1 || sd > MAX_DP) {\r\n    throw Error(INVALID + 'precision');\r\n  }\r\n  return round(new this.constructor(this), sd, rm);\r\n};\r\n\r\n\r\n/*\r\n * Return a new Big whose value is the value of this Big rounded to a maximum of dp decimal places\r\n * using rounding mode rm, or Big.RM if rm is not specified.\r\n * If dp is negative, round to an integer which is a multiple of 10**-dp.\r\n * If dp is not specified, round to 0 decimal places.\r\n *\r\n * dp? {number} Integer, -MAX_DP to MAX_DP inclusive.\r\n * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\r\n */\r\nP.round = function (dp, rm) {\r\n  if (dp === UNDEFINED) dp = 0;\r\n  else if (dp !== ~~dp || dp < -MAX_DP || dp > MAX_DP) {\r\n    throw Error(INVALID_DP);\r\n  }\r\n  return round(new this.constructor(this), dp + this.e + 1, rm);\r\n};\r\n\r\n\r\n/*\r\n * Return a new Big whose value is the square root of the value of this Big, rounded, if\r\n * necessary, to a maximum of Big.DP decimal places using rounding mode Big.RM.\r\n */\r\nP.sqrt = function () {\r\n  var r, c, t,\r\n    x = this,\r\n    Big = x.constructor,\r\n    s = x.s,\r\n    e = x.e,\r\n    half = new Big('0.5');\r\n\r\n  // Zero?\r\n  if (!x.c[0]) return new Big(x);\r\n\r\n  // Negative?\r\n  if (s < 0) {\r\n    throw Error(NAME + 'No square root');\r\n  }\r\n\r\n  // Estimate.\r\n  s = Math.sqrt(+stringify(x, true, true));\r\n\r\n  // Math.sqrt underflow/overflow?\r\n  // Re-estimate: pass x coefficient to Math.sqrt as integer, then adjust the result exponent.\r\n  if (s === 0 || s === 1 / 0) {\r\n    c = x.c.join('');\r\n    if (!(c.length + e & 1)) c += '0';\r\n    s = Math.sqrt(c);\r\n    e = ((e + 1) / 2 | 0) - (e < 0 || e & 1);\r\n    r = new Big((s == 1 / 0 ? '5e' : (s = s.toExponential()).slice(0, s.indexOf('e') + 1)) + e);\r\n  } else {\r\n    r = new Big(s + '');\r\n  }\r\n\r\n  e = r.e + (Big.DP += 4);\r\n\r\n  // Newton-Raphson iteration.\r\n  do {\r\n    t = r;\r\n    r = half.times(t.plus(x.div(t)));\r\n  } while (t.c.slice(0, e).join('') !== r.c.slice(0, e).join(''));\r\n\r\n  return round(r, (Big.DP -= 4) + r.e + 1, Big.RM);\r\n};\r\n\r\n\r\n/*\r\n * Return a new Big whose value is the value of this Big times the value of Big y.\r\n */\r\nP.times = P.mul = function (y) {\r\n  var c,\r\n    x = this,\r\n    Big = x.constructor,\r\n    xc = x.c,\r\n    yc = (y = new Big(y)).c,\r\n    a = xc.length,\r\n    b = yc.length,\r\n    i = x.e,\r\n    j = y.e;\r\n\r\n  // Determine sign of result.\r\n  y.s = x.s == y.s ? 1 : -1;\r\n\r\n  // Return signed 0 if either 0.\r\n  if (!xc[0] || !yc[0]) {\r\n    y.c = [y.e = 0];\r\n    return y;\r\n  }\r\n\r\n  // Initialise exponent of result as x.e + y.e.\r\n  y.e = i + j;\r\n\r\n  // If array xc has fewer digits than yc, swap xc and yc, and lengths.\r\n  if (a < b) {\r\n    c = xc;\r\n    xc = yc;\r\n    yc = c;\r\n    j = a;\r\n    a = b;\r\n    b = j;\r\n  }\r\n\r\n  // Initialise coefficient array of result with zeros.\r\n  for (c = new Array(j = a + b); j--;) c[j] = 0;\r\n\r\n  // Multiply.\r\n\r\n  // i is initially xc.length.\r\n  for (i = b; i--;) {\r\n    b = 0;\r\n\r\n    // a is yc.length.\r\n    for (j = a + i; j > i;) {\r\n\r\n      // Current sum of products at this digit position, plus carry.\r\n      b = c[j] + yc[i] * xc[j - i - 1] + b;\r\n      c[j--] = b % 10;\r\n\r\n      // carry\r\n      b = b / 10 | 0;\r\n    }\r\n\r\n    c[j] = b;\r\n  }\r\n\r\n  // Increment result exponent if there is a final carry, otherwise remove leading zero.\r\n  if (b) ++y.e;\r\n  else c.shift();\r\n\r\n  // Remove trailing zeros.\r\n  for (i = c.length; !c[--i];) c.pop();\r\n  y.c = c;\r\n\r\n  return y;\r\n};\r\n\r\n\r\n/*\r\n * Return a string representing the value of this Big in exponential notation rounded to dp fixed\r\n * decimal places using rounding mode rm, or Big.RM if rm is not specified.\r\n *\r\n * dp? {number} Decimal places: integer, 0 to MAX_DP inclusive.\r\n * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\r\n */\r\nP.toExponential = function (dp, rm) {\r\n  var x = this,\r\n    n = x.c[0];\r\n\r\n  if (dp !== UNDEFINED) {\r\n    if (dp !== ~~dp || dp < 0 || dp > MAX_DP) {\r\n      throw Error(INVALID_DP);\r\n    }\r\n    x = round(new x.constructor(x), ++dp, rm);\r\n    for (; x.c.length < dp;) x.c.push(0);\r\n  }\r\n\r\n  return stringify(x, true, !!n);\r\n};\r\n\r\n\r\n/*\r\n * Return a string representing the value of this Big in normal notation rounded to dp fixed\r\n * decimal places using rounding mode rm, or Big.RM if rm is not specified.\r\n *\r\n * dp? {number} Decimal places: integer, 0 to MAX_DP inclusive.\r\n * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\r\n *\r\n * (-0).toFixed(0) is '0', but (-0.1).toFixed(0) is '-0'.\r\n * (-0).toFixed(1) is '0.0', but (-0.01).toFixed(1) is '-0.0'.\r\n */\r\nP.toFixed = function (dp, rm) {\r\n  var x = this,\r\n    n = x.c[0];\r\n\r\n  if (dp !== UNDEFINED) {\r\n    if (dp !== ~~dp || dp < 0 || dp > MAX_DP) {\r\n      throw Error(INVALID_DP);\r\n    }\r\n    x = round(new x.constructor(x), dp + x.e + 1, rm);\r\n\r\n    // x.e may have changed if the value is rounded up.\r\n    for (dp = dp + x.e + 1; x.c.length < dp;) x.c.push(0);\r\n  }\r\n\r\n  return stringify(x, false, !!n);\r\n};\r\n\r\n\r\n/*\r\n * Return a string representing the value of this Big.\r\n * Return exponential notation if this Big has a positive exponent equal to or greater than\r\n * Big.PE, or a negative exponent equal to or less than Big.NE.\r\n * Omit the sign for negative zero.\r\n */\r\nP.toJSON = P.toString = function () {\r\n  var x = this,\r\n    Big = x.constructor;\r\n  return stringify(x, x.e <= Big.NE || x.e >= Big.PE, !!x.c[0]);\r\n};\r\n\r\nif (typeof Symbol !== \"undefined\") {\r\n  P[Symbol.for('nodejs.util.inspect.custom')] = P.toJSON;\r\n}\r\n\r\n\r\n/*\r\n * Return the value of this Big as a primitive number.\r\n */\r\nP.toNumber = function () {\r\n  var n = +stringify(this, true, true);\r\n  if (this.constructor.strict === true && !this.eq(n.toString())) {\r\n    throw Error(NAME + 'Imprecise conversion');\r\n  }\r\n  return n;\r\n};\r\n\r\n\r\n/*\r\n * Return a string representing the value of this Big rounded to sd significant digits using\r\n * rounding mode rm, or Big.RM if rm is not specified.\r\n * Use exponential notation if sd is less than the number of digits necessary to represent\r\n * the integer part of the value in normal notation.\r\n *\r\n * sd {number} Significant digits: integer, 1 to MAX_DP inclusive.\r\n * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\r\n */\r\nP.toPrecision = function (sd, rm) {\r\n  var x = this,\r\n    Big = x.constructor,\r\n    n = x.c[0];\r\n\r\n  if (sd !== UNDEFINED) {\r\n    if (sd !== ~~sd || sd < 1 || sd > MAX_DP) {\r\n      throw Error(INVALID + 'precision');\r\n    }\r\n    x = round(new Big(x), sd, rm);\r\n    for (; x.c.length < sd;) x.c.push(0);\r\n  }\r\n\r\n  return stringify(x, sd <= x.e || x.e <= Big.NE || x.e >= Big.PE, !!n);\r\n};\r\n\r\n\r\n/*\r\n * Return a string representing the value of this Big.\r\n * Return exponential notation if this Big has a positive exponent equal to or greater than\r\n * Big.PE, or a negative exponent equal to or less than Big.NE.\r\n * Include the sign for negative zero.\r\n */\r\nP.valueOf = function () {\r\n  var x = this,\r\n    Big = x.constructor;\r\n  if (Big.strict === true) {\r\n    throw Error(NAME + 'valueOf disallowed');\r\n  }\r\n  return stringify(x, x.e <= Big.NE || x.e >= Big.PE, true);\r\n};\r\n\r\n\r\n// Export\r\n\r\n\r\nvar Big = _Big_();\r\n\r\n/// <reference types=\"https://raw.githubusercontent.com/DefinitelyTyped/DefinitelyTyped/master/types/big.js/index.d.ts\" />\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Big);\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vbm9kZV9tb2R1bGVzL0BicG1uLWlvL2Zvcm0tanMtZWRpdG9yL25vZGVfbW9kdWxlcy9iaWcuanMvYmlnLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLG1CQUFtQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sS0FBSztBQUNYLE1BQU0sZUFBZTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLElBQUk7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsR0FBRztBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsY0FBYztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sUUFBUTtBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPLFFBQVE7QUFDZixRQUFRLFFBQVE7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxRQUFRO0FBQ2hCLFFBQVEsUUFBUTtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsSUFBSTtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsSUFBSTtBQUNsQjtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsTUFBTTtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLFFBQVE7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLFFBQVE7QUFDaEIsUUFBUSxRQUFRO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxnQkFBZ0I7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLFFBQVE7QUFDaEIsUUFBUSxRQUFRO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixnQkFBZ0I7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU8sUUFBUTtBQUNmLFFBQVEsUUFBUTtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxnQkFBZ0I7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSxpRUFBZSxHQUFHLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYW11bmRhLW1vZGVsZXItY2xpZW50Ly4uL25vZGVfbW9kdWxlcy9AYnBtbi1pby9mb3JtLWpzLWVkaXRvci9ub2RlX21vZHVsZXMvYmlnLmpzL2JpZy5tanM/NDJmZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxyXG4gKiAgYmlnLmpzIHY3LjAuMVxyXG4gKiAgQSBzbWFsbCwgZmFzdCwgZWFzeS10by11c2UgbGlicmFyeSBmb3IgYXJiaXRyYXJ5LXByZWNpc2lvbiBkZWNpbWFsIGFyaXRobWV0aWMuXHJcbiAqICBDb3B5cmlnaHQgKGMpIDIwMjUgTWljaGFlbCBNY2xhdWdobGluXHJcbiAqICBodHRwczovL2dpdGh1Yi5jb20vTWlrZU1jbC9iaWcuanMvTElDRU5DRS5tZFxyXG4gKi9cclxuXHJcblxyXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogRURJVEFCTEUgREVGQVVMVFMgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG5cclxuICAvLyBUaGUgZGVmYXVsdCB2YWx1ZXMgYmVsb3cgbXVzdCBiZSBpbnRlZ2VycyB3aXRoaW4gdGhlIHN0YXRlZCByYW5nZXMuXHJcblxyXG4gIC8qXHJcbiAgICogVGhlIG1heGltdW0gbnVtYmVyIG9mIGRlY2ltYWwgcGxhY2VzIChEUCkgb2YgdGhlIHJlc3VsdHMgb2Ygb3BlcmF0aW9ucyBpbnZvbHZpbmcgZGl2aXNpb246XHJcbiAgICogZGl2IGFuZCBzcXJ0LCBhbmQgcG93IHdpdGggbmVnYXRpdmUgZXhwb25lbnRzLlxyXG4gICAqL1xyXG52YXIgRFAgPSAyMCwgICAgICAgICAgLy8gMCB0byBNQVhfRFBcclxuXHJcbiAgLypcclxuICAgKiBUaGUgcm91bmRpbmcgbW9kZSAoUk0pIHVzZWQgd2hlbiByb3VuZGluZyB0byB0aGUgYWJvdmUgZGVjaW1hbCBwbGFjZXMuXHJcbiAgICpcclxuICAgKiAgMCAgVG93YXJkcyB6ZXJvIChpLmUuIHRydW5jYXRlLCBubyByb3VuZGluZykuICAgICAgIChST1VORF9ET1dOKVxyXG4gICAqICAxICBUbyBuZWFyZXN0IG5laWdoYm91ci4gSWYgZXF1aWRpc3RhbnQsIHJvdW5kIHVwLiAgKFJPVU5EX0hBTEZfVVApXHJcbiAgICogIDIgIFRvIG5lYXJlc3QgbmVpZ2hib3VyLiBJZiBlcXVpZGlzdGFudCwgdG8gZXZlbi4gICAoUk9VTkRfSEFMRl9FVkVOKVxyXG4gICAqICAzICBBd2F5IGZyb20gemVyby4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKFJPVU5EX1VQKVxyXG4gICAqL1xyXG4gIFJNID0gMSwgICAgICAgICAgICAgLy8gMCwgMSwgMiBvciAzXHJcblxyXG4gIC8vIFRoZSBtYXhpbXVtIHZhbHVlIG9mIERQIGFuZCBCaWcuRFAuXHJcbiAgTUFYX0RQID0gMUU2LCAgICAgICAvLyAwIHRvIDEwMDAwMDBcclxuXHJcbiAgLy8gVGhlIG1heGltdW0gbWFnbml0dWRlIG9mIHRoZSBleHBvbmVudCBhcmd1bWVudCB0byB0aGUgcG93IG1ldGhvZC5cclxuICBNQVhfUE9XRVIgPSAxRTYsICAgIC8vIDEgdG8gMTAwMDAwMFxyXG5cclxuICAvKlxyXG4gICAqIFRoZSBuZWdhdGl2ZSBleHBvbmVudCAoTkUpIGF0IGFuZCBiZW5lYXRoIHdoaWNoIHRvU3RyaW5nIHJldHVybnMgZXhwb25lbnRpYWwgbm90YXRpb24uXHJcbiAgICogKEphdmFTY3JpcHQgbnVtYmVyczogLTcpXHJcbiAgICogLTEwMDAwMDAgaXMgdGhlIG1pbmltdW0gcmVjb21tZW5kZWQgZXhwb25lbnQgdmFsdWUgb2YgYSBCaWcuXHJcbiAgICovXHJcbiAgTkUgPSAtNywgICAgICAgICAgICAvLyAwIHRvIC0xMDAwMDAwXHJcblxyXG4gIC8qXHJcbiAgICogVGhlIHBvc2l0aXZlIGV4cG9uZW50IChQRSkgYXQgYW5kIGFib3ZlIHdoaWNoIHRvU3RyaW5nIHJldHVybnMgZXhwb25lbnRpYWwgbm90YXRpb24uXHJcbiAgICogKEphdmFTY3JpcHQgbnVtYmVyczogMjEpXHJcbiAgICogMTAwMDAwMCBpcyB0aGUgbWF4aW11bSByZWNvbW1lbmRlZCBleHBvbmVudCB2YWx1ZSBvZiBhIEJpZywgYnV0IHRoaXMgbGltaXQgaXMgbm90IGVuZm9yY2VkLlxyXG4gICAqL1xyXG4gIFBFID0gMjEsICAgICAgICAgICAgLy8gMCB0byAxMDAwMDAwXHJcblxyXG4gIC8qXHJcbiAgICogV2hlbiB0cnVlLCBhbiBlcnJvciB3aWxsIGJlIHRocm93biBpZiBhIHByaW1pdGl2ZSBudW1iZXIgaXMgcGFzc2VkIHRvIHRoZSBCaWcgY29uc3RydWN0b3IsXHJcbiAgICogb3IgaWYgdmFsdWVPZiBpcyBjYWxsZWQsIG9yIGlmIHRvTnVtYmVyIGlzIGNhbGxlZCBvbiBhIEJpZyB3aGljaCBjYW5ub3QgYmUgY29udmVydGVkIHRvIGFcclxuICAgKiBwcmltaXRpdmUgbnVtYmVyIHdpdGhvdXQgYSBsb3NzIG9mIHByZWNpc2lvbi5cclxuICAgKi9cclxuICBTVFJJQ1QgPSBmYWxzZSwgICAgIC8vIHRydWUgb3IgZmFsc2VcclxuXHJcblxyXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG5cclxuICAvLyBFcnJvciBtZXNzYWdlcy5cclxuICBOQU1FID0gJ1tiaWcuanNdICcsXHJcbiAgSU5WQUxJRCA9IE5BTUUgKyAnSW52YWxpZCAnLFxyXG4gIElOVkFMSURfRFAgPSBJTlZBTElEICsgJ2RlY2ltYWwgcGxhY2VzJyxcclxuICBJTlZBTElEX1JNID0gSU5WQUxJRCArICdyb3VuZGluZyBtb2RlJyxcclxuICBESVZfQllfWkVSTyA9IE5BTUUgKyAnRGl2aXNpb24gYnkgemVybycsXHJcblxyXG4gIC8vIFRoZSBzaGFyZWQgcHJvdG90eXBlIG9iamVjdC5cclxuICBQID0ge30sXHJcbiAgVU5ERUZJTkVEID0gdm9pZCAwLFxyXG4gIE5VTUVSSUMgPSAvXi0/KFxcZCsoXFwuXFxkKik/fFxcLlxcZCspKGVbKy1dP1xcZCspPyQvaTtcclxuXHJcblxyXG4vKlxyXG4gKiBDcmVhdGUgYW5kIHJldHVybiBhIEJpZyBjb25zdHJ1Y3Rvci5cclxuICovXHJcbmZ1bmN0aW9uIF9CaWdfKCkge1xyXG5cclxuICAvKlxyXG4gICAqIFRoZSBCaWcgY29uc3RydWN0b3IgYW5kIGV4cG9ydGVkIGZ1bmN0aW9uLlxyXG4gICAqIENyZWF0ZSBhbmQgcmV0dXJuIGEgbmV3IGluc3RhbmNlIG9mIGEgQmlnIG51bWJlciBvYmplY3QuXHJcbiAgICpcclxuICAgKiBuIHtudW1iZXJ8c3RyaW5nfEJpZ30gQSBudW1lcmljIHZhbHVlLlxyXG4gICAqL1xyXG4gIGZ1bmN0aW9uIEJpZyhuKSB7XHJcbiAgICB2YXIgeCA9IHRoaXM7XHJcblxyXG4gICAgLy8gRW5hYmxlIGNvbnN0cnVjdG9yIHVzYWdlIHdpdGhvdXQgbmV3LlxyXG4gICAgaWYgKCEoeCBpbnN0YW5jZW9mIEJpZykpIHtcclxuICAgICAgcmV0dXJuIG4gPT09IFVOREVGSU5FRCAmJiBhcmd1bWVudHMubGVuZ3RoID09PSAwID8gX0JpZ18oKSA6IG5ldyBCaWcobik7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vIER1cGxpY2F0ZS5cclxuICAgIGlmIChuIGluc3RhbmNlb2YgQmlnKSB7XHJcbiAgICAgIHgucyA9IG4ucztcclxuICAgICAgeC5lID0gbi5lO1xyXG4gICAgICB4LmMgPSBuLmMuc2xpY2UoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmICh0eXBlb2YgbiAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICBpZiAoQmlnLnN0cmljdCA9PT0gdHJ1ZSAmJiB0eXBlb2YgbiAhPT0gJ2JpZ2ludCcpIHtcclxuICAgICAgICAgIHRocm93IFR5cGVFcnJvcihJTlZBTElEICsgJ3ZhbHVlJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBNaW51cyB6ZXJvP1xyXG4gICAgICAgIG4gPSBuID09PSAwICYmIDEgLyBuIDwgMCA/ICctMCcgOiBTdHJpbmcobik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHBhcnNlKHgsIG4pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJldGFpbiBhIHJlZmVyZW5jZSB0byB0aGlzIEJpZyBjb25zdHJ1Y3Rvci5cclxuICAgIC8vIFNoYWRvdyBCaWcucHJvdG90eXBlLmNvbnN0cnVjdG9yIHdoaWNoIHBvaW50cyB0byBPYmplY3QuXHJcbiAgICB4LmNvbnN0cnVjdG9yID0gQmlnO1xyXG4gIH1cclxuXHJcbiAgQmlnLnByb3RvdHlwZSA9IFA7XHJcbiAgQmlnLkRQID0gRFA7XHJcbiAgQmlnLlJNID0gUk07XHJcbiAgQmlnLk5FID0gTkU7XHJcbiAgQmlnLlBFID0gUEU7XHJcbiAgQmlnLnN0cmljdCA9IFNUUklDVDtcclxuICBCaWcucm91bmREb3duID0gMDtcclxuICBCaWcucm91bmRIYWxmVXAgPSAxO1xyXG4gIEJpZy5yb3VuZEhhbGZFdmVuID0gMjtcclxuICBCaWcucm91bmRVcCA9IDM7XHJcblxyXG4gIHJldHVybiBCaWc7XHJcbn1cclxuXHJcblxyXG4vKlxyXG4gKiBQYXJzZSB0aGUgbnVtYmVyIG9yIHN0cmluZyB2YWx1ZSBwYXNzZWQgdG8gYSBCaWcgY29uc3RydWN0b3IuXHJcbiAqXHJcbiAqIHgge0JpZ30gQSBCaWcgbnVtYmVyIGluc3RhbmNlLlxyXG4gKiBuIHtudW1iZXJ8c3RyaW5nfSBBIG51bWVyaWMgdmFsdWUuXHJcbiAqL1xyXG5mdW5jdGlvbiBwYXJzZSh4LCBuKSB7XHJcbiAgdmFyIGUsIGksIG5sO1xyXG5cclxuICBpZiAoIU5VTUVSSUMudGVzdChuKSkge1xyXG4gICAgdGhyb3cgRXJyb3IoSU5WQUxJRCArICdudW1iZXInKTtcclxuICB9XHJcblxyXG4gIC8vIERldGVybWluZSBzaWduLlxyXG4gIHgucyA9IG4uY2hhckF0KDApID09ICctJyA/IChuID0gbi5zbGljZSgxKSwgLTEpIDogMTtcclxuXHJcbiAgLy8gRGVjaW1hbCBwb2ludD9cclxuICBpZiAoKGUgPSBuLmluZGV4T2YoJy4nKSkgPiAtMSkgbiA9IG4ucmVwbGFjZSgnLicsICcnKTtcclxuXHJcbiAgLy8gRXhwb25lbnRpYWwgZm9ybT9cclxuICBpZiAoKGkgPSBuLnNlYXJjaCgvZS9pKSkgPiAwKSB7XHJcblxyXG4gICAgLy8gRGV0ZXJtaW5lIGV4cG9uZW50LlxyXG4gICAgaWYgKGUgPCAwKSBlID0gaTtcclxuICAgIGUgKz0gK24uc2xpY2UoaSArIDEpO1xyXG4gICAgbiA9IG4uc3Vic3RyaW5nKDAsIGkpO1xyXG4gIH0gZWxzZSBpZiAoZSA8IDApIHtcclxuXHJcbiAgICAvLyBJbnRlZ2VyLlxyXG4gICAgZSA9IG4ubGVuZ3RoO1xyXG4gIH1cclxuXHJcbiAgbmwgPSBuLmxlbmd0aDtcclxuXHJcbiAgLy8gRGV0ZXJtaW5lIGxlYWRpbmcgemVyb3MuXHJcbiAgZm9yIChpID0gMDsgaSA8IG5sICYmIG4uY2hhckF0KGkpID09ICcwJzspICsraTtcclxuXHJcbiAgaWYgKGkgPT0gbmwpIHtcclxuXHJcbiAgICAvLyBaZXJvLlxyXG4gICAgeC5jID0gW3guZSA9IDBdO1xyXG4gIH0gZWxzZSB7XHJcblxyXG4gICAgLy8gRGV0ZXJtaW5lIHRyYWlsaW5nIHplcm9zLlxyXG4gICAgZm9yICg7IG5sID4gMCAmJiBuLmNoYXJBdCgtLW5sKSA9PSAnMCc7KTtcclxuICAgIHguZSA9IGUgLSBpIC0gMTtcclxuICAgIHguYyA9IFtdO1xyXG5cclxuICAgIC8vIENvbnZlcnQgc3RyaW5nIHRvIGFycmF5IG9mIGRpZ2l0cyB3aXRob3V0IGxlYWRpbmcvdHJhaWxpbmcgemVyb3MuXHJcbiAgICBmb3IgKGUgPSAwOyBpIDw9IG5sOykgeC5jW2UrK10gPSArbi5jaGFyQXQoaSsrKTtcclxuICB9XHJcblxyXG4gIHJldHVybiB4O1xyXG59XHJcblxyXG5cclxuLypcclxuICogUm91bmQgQmlnIHggdG8gYSBtYXhpbXVtIG9mIHNkIHNpZ25pZmljYW50IGRpZ2l0cyB1c2luZyByb3VuZGluZyBtb2RlIHJtLlxyXG4gKlxyXG4gKiB4IHtCaWd9IFRoZSBCaWcgdG8gcm91bmQuXHJcbiAqIHNkIHtudW1iZXJ9IFNpZ25pZmljYW50IGRpZ2l0czogaW50ZWdlciwgMCB0byBNQVhfRFAgaW5jbHVzaXZlLlxyXG4gKiBybSB7bnVtYmVyfSBSb3VuZGluZyBtb2RlOiAwIChkb3duKSwgMSAoaGFsZi11cCksIDIgKGhhbGYtZXZlbikgb3IgMyAodXApLlxyXG4gKiBbbW9yZV0ge2Jvb2xlYW59IFdoZXRoZXIgdGhlIHJlc3VsdCBvZiBkaXZpc2lvbiB3YXMgdHJ1bmNhdGVkLlxyXG4gKi9cclxuZnVuY3Rpb24gcm91bmQoeCwgc2QsIHJtLCBtb3JlKSB7XHJcbiAgdmFyIHhjID0geC5jO1xyXG5cclxuICBpZiAocm0gPT09IFVOREVGSU5FRCkgcm0gPSB4LmNvbnN0cnVjdG9yLlJNO1xyXG4gIGlmIChybSAhPT0gMCAmJiBybSAhPT0gMSAmJiBybSAhPT0gMiAmJiBybSAhPT0gMykge1xyXG4gICAgdGhyb3cgRXJyb3IoSU5WQUxJRF9STSk7XHJcbiAgfVxyXG5cclxuICBpZiAoc2QgPCAxKSB7XHJcbiAgICBtb3JlID1cclxuICAgICAgcm0gPT09IDMgJiYgKG1vcmUgfHwgISF4Y1swXSkgfHwgc2QgPT09IDAgJiYgKFxyXG4gICAgICBybSA9PT0gMSAmJiB4Y1swXSA+PSA1IHx8XHJcbiAgICAgIHJtID09PSAyICYmICh4Y1swXSA+IDUgfHwgeGNbMF0gPT09IDUgJiYgKG1vcmUgfHwgeGNbMV0gIT09IFVOREVGSU5FRCkpXHJcbiAgICApO1xyXG5cclxuICAgIHhjLmxlbmd0aCA9IDE7XHJcblxyXG4gICAgaWYgKG1vcmUpIHtcclxuXHJcbiAgICAgIC8vIDEsIDAuMSwgMC4wMSwgMC4wMDEsIDAuMDAwMSBldGMuXHJcbiAgICAgIHguZSA9IHguZSAtIHNkICsgMTtcclxuICAgICAgeGNbMF0gPSAxO1xyXG4gICAgfSBlbHNlIHtcclxuXHJcbiAgICAgIC8vIFplcm8uXHJcbiAgICAgIHhjWzBdID0geC5lID0gMDtcclxuICAgIH1cclxuICB9IGVsc2UgaWYgKHNkIDwgeGMubGVuZ3RoKSB7XHJcblxyXG4gICAgLy8geGNbc2RdIGlzIHRoZSBkaWdpdCBhZnRlciB0aGUgZGlnaXQgdGhhdCBtYXkgYmUgcm91bmRlZCB1cC5cclxuICAgIG1vcmUgPVxyXG4gICAgICBybSA9PT0gMSAmJiB4Y1tzZF0gPj0gNSB8fFxyXG4gICAgICBybSA9PT0gMiAmJiAoeGNbc2RdID4gNSB8fCB4Y1tzZF0gPT09IDUgJiZcclxuICAgICAgICAobW9yZSB8fCB4Y1tzZCArIDFdICE9PSBVTkRFRklORUQgfHwgeGNbc2QgLSAxXSAmIDEpKSB8fFxyXG4gICAgICBybSA9PT0gMyAmJiAobW9yZSB8fCAhIXhjWzBdKTtcclxuXHJcbiAgICAvLyBSZW1vdmUgYW55IGRpZ2l0cyBhZnRlciB0aGUgcmVxdWlyZWQgcHJlY2lzaW9uLlxyXG4gICAgeGMubGVuZ3RoID0gc2Q7XHJcblxyXG4gICAgLy8gUm91bmQgdXA/XHJcbiAgICBpZiAobW9yZSkge1xyXG5cclxuICAgICAgLy8gUm91bmRpbmcgdXAgbWF5IG1lYW4gdGhlIHByZXZpb3VzIGRpZ2l0IGhhcyB0byBiZSByb3VuZGVkIHVwLlxyXG4gICAgICBmb3IgKDsgKyt4Y1stLXNkXSA+IDk7KSB7XHJcbiAgICAgICAgeGNbc2RdID0gMDtcclxuICAgICAgICBpZiAoc2QgPT09IDApIHtcclxuICAgICAgICAgICsreC5lO1xyXG4gICAgICAgICAgeGMudW5zaGlmdCgxKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFJlbW92ZSB0cmFpbGluZyB6ZXJvcy5cclxuICAgIGZvciAoc2QgPSB4Yy5sZW5ndGg7ICF4Y1stLXNkXTspIHhjLnBvcCgpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHg7XHJcbn1cclxuXHJcblxyXG4vKlxyXG4gKiBSZXR1cm4gYSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSB2YWx1ZSBvZiBCaWcgeCBpbiBub3JtYWwgb3IgZXhwb25lbnRpYWwgbm90YXRpb24uXHJcbiAqIEhhbmRsZXMgUC50b0V4cG9uZW50aWFsLCBQLnRvRml4ZWQsIFAudG9KU09OLCBQLnRvUHJlY2lzaW9uLCBQLnRvU3RyaW5nIGFuZCBQLnZhbHVlT2YuXHJcbiAqL1xyXG5mdW5jdGlvbiBzdHJpbmdpZnkoeCwgZG9FeHBvbmVudGlhbCwgaXNOb256ZXJvKSB7XHJcbiAgdmFyIGUgPSB4LmUsXHJcbiAgICBzID0geC5jLmpvaW4oJycpLFxyXG4gICAgbiA9IHMubGVuZ3RoO1xyXG5cclxuICAvLyBFeHBvbmVudGlhbCBub3RhdGlvbj9cclxuICBpZiAoZG9FeHBvbmVudGlhbCkge1xyXG4gICAgcyA9IHMuY2hhckF0KDApICsgKG4gPiAxID8gJy4nICsgcy5zbGljZSgxKSA6ICcnKSArIChlIDwgMCA/ICdlJyA6ICdlKycpICsgZTtcclxuXHJcbiAgLy8gTm9ybWFsIG5vdGF0aW9uLlxyXG4gIH0gZWxzZSBpZiAoZSA8IDApIHtcclxuICAgIGZvciAoOyArK2U7KSBzID0gJzAnICsgcztcclxuICAgIHMgPSAnMC4nICsgcztcclxuICB9IGVsc2UgaWYgKGUgPiAwKSB7XHJcbiAgICBpZiAoKytlID4gbikge1xyXG4gICAgICBmb3IgKGUgLT0gbjsgZS0tOykgcyArPSAnMCc7XHJcbiAgICB9IGVsc2UgaWYgKGUgPCBuKSB7XHJcbiAgICAgIHMgPSBzLnNsaWNlKDAsIGUpICsgJy4nICsgcy5zbGljZShlKTtcclxuICAgIH1cclxuICB9IGVsc2UgaWYgKG4gPiAxKSB7XHJcbiAgICBzID0gcy5jaGFyQXQoMCkgKyAnLicgKyBzLnNsaWNlKDEpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHgucyA8IDAgJiYgaXNOb256ZXJvID8gJy0nICsgcyA6IHM7XHJcbn1cclxuXHJcblxyXG4vLyBQcm90b3R5cGUvaW5zdGFuY2UgbWV0aG9kc1xyXG5cclxuXHJcbi8qXHJcbiAqIFJldHVybiBhIG5ldyBCaWcgd2hvc2UgdmFsdWUgaXMgdGhlIGFic29sdXRlIHZhbHVlIG9mIHRoaXMgQmlnLlxyXG4gKi9cclxuUC5hYnMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgdmFyIHggPSBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzKTtcclxuICB4LnMgPSAxO1xyXG4gIHJldHVybiB4O1xyXG59O1xyXG5cclxuXHJcbi8qXHJcbiAqIFJldHVybiAxIGlmIHRoZSB2YWx1ZSBvZiB0aGlzIEJpZyBpcyBncmVhdGVyIHRoYW4gdGhlIHZhbHVlIG9mIEJpZyB5LFxyXG4gKiAgICAgICAtMSBpZiB0aGUgdmFsdWUgb2YgdGhpcyBCaWcgaXMgbGVzcyB0aGFuIHRoZSB2YWx1ZSBvZiBCaWcgeSwgb3JcclxuICogICAgICAgIDAgaWYgdGhleSBoYXZlIHRoZSBzYW1lIHZhbHVlLlxyXG4gKi9cclxuUC5jbXAgPSBmdW5jdGlvbiAoeSkge1xyXG4gIHZhciBpc25lZyxcclxuICAgIHggPSB0aGlzLFxyXG4gICAgeGMgPSB4LmMsXHJcbiAgICB5YyA9ICh5ID0gbmV3IHguY29uc3RydWN0b3IoeSkpLmMsXHJcbiAgICBpID0geC5zLFxyXG4gICAgaiA9IHkucyxcclxuICAgIGsgPSB4LmUsXHJcbiAgICBsID0geS5lO1xyXG5cclxuICAvLyBFaXRoZXIgemVybz9cclxuICBpZiAoIXhjWzBdIHx8ICF5Y1swXSkgcmV0dXJuICF4Y1swXSA/ICF5Y1swXSA/IDAgOiAtaiA6IGk7XHJcblxyXG4gIC8vIFNpZ25zIGRpZmZlcj9cclxuICBpZiAoaSAhPSBqKSByZXR1cm4gaTtcclxuXHJcbiAgaXNuZWcgPSBpIDwgMDtcclxuXHJcbiAgLy8gQ29tcGFyZSBleHBvbmVudHMuXHJcbiAgaWYgKGsgIT0gbCkgcmV0dXJuIGsgPiBsIF4gaXNuZWcgPyAxIDogLTE7XHJcblxyXG4gIGogPSAoayA9IHhjLmxlbmd0aCkgPCAobCA9IHljLmxlbmd0aCkgPyBrIDogbDtcclxuXHJcbiAgLy8gQ29tcGFyZSBkaWdpdCBieSBkaWdpdC5cclxuICBmb3IgKGkgPSAtMTsgKytpIDwgajspIHtcclxuICAgIGlmICh4Y1tpXSAhPSB5Y1tpXSkgcmV0dXJuIHhjW2ldID4geWNbaV0gXiBpc25lZyA/IDEgOiAtMTtcclxuICB9XHJcblxyXG4gIC8vIENvbXBhcmUgbGVuZ3Rocy5cclxuICByZXR1cm4gayA9PSBsID8gMCA6IGsgPiBsIF4gaXNuZWcgPyAxIDogLTE7XHJcbn07XHJcblxyXG5cclxuLypcclxuICogUmV0dXJuIGEgbmV3IEJpZyB3aG9zZSB2YWx1ZSBpcyB0aGUgdmFsdWUgb2YgdGhpcyBCaWcgZGl2aWRlZCBieSB0aGUgdmFsdWUgb2YgQmlnIHksIHJvdW5kZWQsXHJcbiAqIGlmIG5lY2Vzc2FyeSwgdG8gYSBtYXhpbXVtIG9mIEJpZy5EUCBkZWNpbWFsIHBsYWNlcyB1c2luZyByb3VuZGluZyBtb2RlIEJpZy5STS5cclxuICovXHJcblAuZGl2ID0gZnVuY3Rpb24gKHkpIHtcclxuICB2YXIgeCA9IHRoaXMsXHJcbiAgICBCaWcgPSB4LmNvbnN0cnVjdG9yLFxyXG4gICAgYSA9IHguYywgICAgICAgICAgICAgICAgICAvLyBkaXZpZGVuZFxyXG4gICAgYiA9ICh5ID0gbmV3IEJpZyh5KSkuYywgICAvLyBkaXZpc29yXHJcbiAgICBrID0geC5zID09IHkucyA/IDEgOiAtMSxcclxuICAgIGRwID0gQmlnLkRQO1xyXG5cclxuICBpZiAoZHAgIT09IH5+ZHAgfHwgZHAgPCAwIHx8IGRwID4gTUFYX0RQKSB7XHJcbiAgICB0aHJvdyBFcnJvcihJTlZBTElEX0RQKTtcclxuICB9XHJcblxyXG4gIC8vIERpdmlzb3IgaXMgemVybz9cclxuICBpZiAoIWJbMF0pIHtcclxuICAgIHRocm93IEVycm9yKERJVl9CWV9aRVJPKTtcclxuICB9XHJcblxyXG4gIC8vIERpdmlkZW5kIGlzIDA/IFJldHVybiArLTAuXHJcbiAgaWYgKCFhWzBdKSB7XHJcbiAgICB5LnMgPSBrO1xyXG4gICAgeS5jID0gW3kuZSA9IDBdO1xyXG4gICAgcmV0dXJuIHk7XHJcbiAgfVxyXG5cclxuICB2YXIgYmwsIGJ0LCBuLCBjbXAsIHJpLFxyXG4gICAgYnogPSBiLnNsaWNlKCksXHJcbiAgICBhaSA9IGJsID0gYi5sZW5ndGgsXHJcbiAgICBhbCA9IGEubGVuZ3RoLFxyXG4gICAgciA9IGEuc2xpY2UoMCwgYmwpLCAgIC8vIHJlbWFpbmRlclxyXG4gICAgcmwgPSByLmxlbmd0aCxcclxuICAgIHEgPSB5LCAgICAgICAgICAgICAgICAvLyBxdW90aWVudFxyXG4gICAgcWMgPSBxLmMgPSBbXSxcclxuICAgIHFpID0gMCxcclxuICAgIHAgPSBkcCArIChxLmUgPSB4LmUgLSB5LmUpICsgMTsgICAgLy8gcHJlY2lzaW9uIG9mIHRoZSByZXN1bHRcclxuXHJcbiAgcS5zID0gaztcclxuICBrID0gcCA8IDAgPyAwIDogcDtcclxuXHJcbiAgLy8gQ3JlYXRlIHZlcnNpb24gb2YgZGl2aXNvciB3aXRoIGxlYWRpbmcgemVyby5cclxuICBiei51bnNoaWZ0KDApO1xyXG5cclxuICAvLyBBZGQgemVyb3MgdG8gbWFrZSByZW1haW5kZXIgYXMgbG9uZyBhcyBkaXZpc29yLlxyXG4gIGZvciAoOyBybCsrIDwgYmw7KSByLnB1c2goMCk7XHJcblxyXG4gIGRvIHtcclxuXHJcbiAgICAvLyBuIGlzIGhvdyBtYW55IHRpbWVzIHRoZSBkaXZpc29yIGdvZXMgaW50byBjdXJyZW50IHJlbWFpbmRlci5cclxuICAgIGZvciAobiA9IDA7IG4gPCAxMDsgbisrKSB7XHJcblxyXG4gICAgICAvLyBDb21wYXJlIGRpdmlzb3IgYW5kIHJlbWFpbmRlci5cclxuICAgICAgaWYgKGJsICE9IChybCA9IHIubGVuZ3RoKSkge1xyXG4gICAgICAgIGNtcCA9IGJsID4gcmwgPyAxIDogLTE7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZm9yIChyaSA9IC0xLCBjbXAgPSAwOyArK3JpIDwgYmw7KSB7XHJcbiAgICAgICAgICBpZiAoYltyaV0gIT0gcltyaV0pIHtcclxuICAgICAgICAgICAgY21wID0gYltyaV0gPiByW3JpXSA/IDEgOiAtMTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBJZiBkaXZpc29yIDwgcmVtYWluZGVyLCBzdWJ0cmFjdCBkaXZpc29yIGZyb20gcmVtYWluZGVyLlxyXG4gICAgICBpZiAoY21wIDwgMCkge1xyXG5cclxuICAgICAgICAvLyBSZW1haW5kZXIgY2FuJ3QgYmUgbW9yZSB0aGFuIDEgZGlnaXQgbG9uZ2VyIHRoYW4gZGl2aXNvci5cclxuICAgICAgICAvLyBFcXVhbGlzZSBsZW5ndGhzIHVzaW5nIGRpdmlzb3Igd2l0aCBleHRyYSBsZWFkaW5nIHplcm8/XHJcbiAgICAgICAgZm9yIChidCA9IHJsID09IGJsID8gYiA6IGJ6OyBybDspIHtcclxuICAgICAgICAgIGlmIChyWy0tcmxdIDwgYnRbcmxdKSB7XHJcbiAgICAgICAgICAgIHJpID0gcmw7XHJcbiAgICAgICAgICAgIGZvciAoOyByaSAmJiAhclstLXJpXTspIHJbcmldID0gOTtcclxuICAgICAgICAgICAgLS1yW3JpXTtcclxuICAgICAgICAgICAgcltybF0gKz0gMTA7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByW3JsXSAtPSBidFtybF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKDsgIXJbMF07KSByLnNoaWZ0KCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBBZGQgdGhlIGRpZ2l0IG4gdG8gdGhlIHJlc3VsdCBhcnJheS5cclxuICAgIHFjW3FpKytdID0gY21wID8gbiA6ICsrbjtcclxuXHJcbiAgICAvLyBVcGRhdGUgdGhlIHJlbWFpbmRlci5cclxuICAgIGlmIChyWzBdICYmIGNtcCkgcltybF0gPSBhW2FpXSB8fCAwO1xyXG4gICAgZWxzZSByID0gW2FbYWldXTtcclxuXHJcbiAgfSB3aGlsZSAoKGFpKysgPCBhbCB8fCByWzBdICE9PSBVTkRFRklORUQpICYmIGstLSk7XHJcblxyXG4gIC8vIExlYWRpbmcgemVybz8gRG8gbm90IHJlbW92ZSBpZiByZXN1bHQgaXMgc2ltcGx5IHplcm8gKHFpID09IDEpLlxyXG4gIGlmICghcWNbMF0gJiYgcWkgIT0gMSkge1xyXG5cclxuICAgIC8vIFRoZXJlIGNhbid0IGJlIG1vcmUgdGhhbiBvbmUgemVyby5cclxuICAgIHFjLnNoaWZ0KCk7XHJcbiAgICBxLmUtLTtcclxuICAgIHAtLTtcclxuICB9XHJcblxyXG4gIC8vIFJvdW5kP1xyXG4gIGlmIChxaSA+IHApIHJvdW5kKHEsIHAsIEJpZy5STSwgclswXSAhPT0gVU5ERUZJTkVEKTtcclxuXHJcbiAgcmV0dXJuIHE7XHJcbn07XHJcblxyXG5cclxuLypcclxuICogUmV0dXJuIHRydWUgaWYgdGhlIHZhbHVlIG9mIHRoaXMgQmlnIGlzIGVxdWFsIHRvIHRoZSB2YWx1ZSBvZiBCaWcgeSwgb3RoZXJ3aXNlIHJldHVybiBmYWxzZS5cclxuICovXHJcblAuZXEgPSBmdW5jdGlvbiAoeSkge1xyXG4gIHJldHVybiB0aGlzLmNtcCh5KSA9PT0gMDtcclxufTtcclxuXHJcblxyXG4vKlxyXG4gKiBSZXR1cm4gdHJ1ZSBpZiB0aGUgdmFsdWUgb2YgdGhpcyBCaWcgaXMgZ3JlYXRlciB0aGFuIHRoZSB2YWx1ZSBvZiBCaWcgeSwgb3RoZXJ3aXNlIHJldHVyblxyXG4gKiBmYWxzZS5cclxuICovXHJcblAuZ3QgPSBmdW5jdGlvbiAoeSkge1xyXG4gIHJldHVybiB0aGlzLmNtcCh5KSA+IDA7XHJcbn07XHJcblxyXG5cclxuLypcclxuICogUmV0dXJuIHRydWUgaWYgdGhlIHZhbHVlIG9mIHRoaXMgQmlnIGlzIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byB0aGUgdmFsdWUgb2YgQmlnIHksIG90aGVyd2lzZVxyXG4gKiByZXR1cm4gZmFsc2UuXHJcbiAqL1xyXG5QLmd0ZSA9IGZ1bmN0aW9uICh5KSB7XHJcbiAgcmV0dXJuIHRoaXMuY21wKHkpID4gLTE7XHJcbn07XHJcblxyXG5cclxuLypcclxuICogUmV0dXJuIHRydWUgaWYgdGhlIHZhbHVlIG9mIHRoaXMgQmlnIGlzIGxlc3MgdGhhbiB0aGUgdmFsdWUgb2YgQmlnIHksIG90aGVyd2lzZSByZXR1cm4gZmFsc2UuXHJcbiAqL1xyXG5QLmx0ID0gZnVuY3Rpb24gKHkpIHtcclxuICByZXR1cm4gdGhpcy5jbXAoeSkgPCAwO1xyXG59O1xyXG5cclxuXHJcbi8qXHJcbiAqIFJldHVybiB0cnVlIGlmIHRoZSB2YWx1ZSBvZiB0aGlzIEJpZyBpcyBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gdGhlIHZhbHVlIG9mIEJpZyB5LCBvdGhlcndpc2VcclxuICogcmV0dXJuIGZhbHNlLlxyXG4gKi9cclxuUC5sdGUgPSBmdW5jdGlvbiAoeSkge1xyXG4gIHJldHVybiB0aGlzLmNtcCh5KSA8IDE7XHJcbn07XHJcblxyXG5cclxuLypcclxuICogUmV0dXJuIGEgbmV3IEJpZyB3aG9zZSB2YWx1ZSBpcyB0aGUgdmFsdWUgb2YgdGhpcyBCaWcgbWludXMgdGhlIHZhbHVlIG9mIEJpZyB5LlxyXG4gKi9cclxuUC5taW51cyA9IFAuc3ViID0gZnVuY3Rpb24gKHkpIHtcclxuICB2YXIgaSwgaiwgdCwgeGx0eSxcclxuICAgIHggPSB0aGlzLFxyXG4gICAgQmlnID0geC5jb25zdHJ1Y3RvcixcclxuICAgIGEgPSB4LnMsXHJcbiAgICBiID0gKHkgPSBuZXcgQmlnKHkpKS5zO1xyXG5cclxuICAvLyBTaWducyBkaWZmZXI/XHJcbiAgaWYgKGEgIT0gYikge1xyXG4gICAgeS5zID0gLWI7XHJcbiAgICByZXR1cm4geC5wbHVzKHkpO1xyXG4gIH1cclxuXHJcbiAgdmFyIHhjID0geC5jLnNsaWNlKCksXHJcbiAgICB4ZSA9IHguZSxcclxuICAgIHljID0geS5jLFxyXG4gICAgeWUgPSB5LmU7XHJcblxyXG4gIC8vIEVpdGhlciB6ZXJvP1xyXG4gIGlmICgheGNbMF0gfHwgIXljWzBdKSB7XHJcbiAgICBpZiAoeWNbMF0pIHtcclxuICAgICAgeS5zID0gLWI7XHJcbiAgICB9IGVsc2UgaWYgKHhjWzBdKSB7XHJcbiAgICAgIHkgPSBuZXcgQmlnKHgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgeS5zID0gMTtcclxuICAgIH1cclxuICAgIHJldHVybiB5O1xyXG4gIH1cclxuXHJcbiAgLy8gRGV0ZXJtaW5lIHdoaWNoIGlzIHRoZSBiaWdnZXIgbnVtYmVyLiBQcmVwZW5kIHplcm9zIHRvIGVxdWFsaXNlIGV4cG9uZW50cy5cclxuICBpZiAoYSA9IHhlIC0geWUpIHtcclxuXHJcbiAgICBpZiAoeGx0eSA9IGEgPCAwKSB7XHJcbiAgICAgIGEgPSAtYTtcclxuICAgICAgdCA9IHhjO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgeWUgPSB4ZTtcclxuICAgICAgdCA9IHljO1xyXG4gICAgfVxyXG5cclxuICAgIHQucmV2ZXJzZSgpO1xyXG4gICAgZm9yIChiID0gYTsgYi0tOykgdC5wdXNoKDApO1xyXG4gICAgdC5yZXZlcnNlKCk7XHJcbiAgfSBlbHNlIHtcclxuXHJcbiAgICAvLyBFeHBvbmVudHMgZXF1YWwuIENoZWNrIGRpZ2l0IGJ5IGRpZ2l0LlxyXG4gICAgaiA9ICgoeGx0eSA9IHhjLmxlbmd0aCA8IHljLmxlbmd0aCkgPyB4YyA6IHljKS5sZW5ndGg7XHJcblxyXG4gICAgZm9yIChhID0gYiA9IDA7IGIgPCBqOyBiKyspIHtcclxuICAgICAgaWYgKHhjW2JdICE9IHljW2JdKSB7XHJcbiAgICAgICAgeGx0eSA9IHhjW2JdIDwgeWNbYl07XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIHggPCB5PyBQb2ludCB4YyB0byB0aGUgYXJyYXkgb2YgdGhlIGJpZ2dlciBudW1iZXIuXHJcbiAgaWYgKHhsdHkpIHtcclxuICAgIHQgPSB4YztcclxuICAgIHhjID0geWM7XHJcbiAgICB5YyA9IHQ7XHJcbiAgICB5LnMgPSAteS5zO1xyXG4gIH1cclxuXHJcbiAgLypcclxuICAgKiBBcHBlbmQgemVyb3MgdG8geGMgaWYgc2hvcnRlci4gTm8gbmVlZCB0byBhZGQgemVyb3MgdG8geWMgaWYgc2hvcnRlciBhcyBzdWJ0cmFjdGlvbiBvbmx5XHJcbiAgICogbmVlZHMgdG8gc3RhcnQgYXQgeWMubGVuZ3RoLlxyXG4gICAqL1xyXG4gIGlmICgoYiA9IChqID0geWMubGVuZ3RoKSAtIChpID0geGMubGVuZ3RoKSkgPiAwKSBmb3IgKDsgYi0tOykgeGNbaSsrXSA9IDA7XHJcblxyXG4gIC8vIFN1YnRyYWN0IHljIGZyb20geGMuXHJcbiAgZm9yIChiID0gaTsgaiA+IGE7KSB7XHJcbiAgICBpZiAoeGNbLS1qXSA8IHljW2pdKSB7XHJcbiAgICAgIGZvciAoaSA9IGo7IGkgJiYgIXhjWy0taV07KSB4Y1tpXSA9IDk7XHJcbiAgICAgIC0teGNbaV07XHJcbiAgICAgIHhjW2pdICs9IDEwO1xyXG4gICAgfVxyXG5cclxuICAgIHhjW2pdIC09IHljW2pdO1xyXG4gIH1cclxuXHJcbiAgLy8gUmVtb3ZlIHRyYWlsaW5nIHplcm9zLlxyXG4gIGZvciAoOyB4Y1stLWJdID09PSAwOykgeGMucG9wKCk7XHJcblxyXG4gIC8vIFJlbW92ZSBsZWFkaW5nIHplcm9zIGFuZCBhZGp1c3QgZXhwb25lbnQgYWNjb3JkaW5nbHkuXHJcbiAgZm9yICg7IHhjWzBdID09PSAwOykge1xyXG4gICAgeGMuc2hpZnQoKTtcclxuICAgIC0teWU7XHJcbiAgfVxyXG5cclxuICBpZiAoIXhjWzBdKSB7XHJcblxyXG4gICAgLy8gbiAtIG4gPSArMFxyXG4gICAgeS5zID0gMTtcclxuXHJcbiAgICAvLyBSZXN1bHQgbXVzdCBiZSB6ZXJvLlxyXG4gICAgeGMgPSBbeWUgPSAwXTtcclxuICB9XHJcblxyXG4gIHkuYyA9IHhjO1xyXG4gIHkuZSA9IHllO1xyXG5cclxuICByZXR1cm4geTtcclxufTtcclxuXHJcblxyXG4vKlxyXG4gKiBSZXR1cm4gYSBuZXcgQmlnIHdob3NlIHZhbHVlIGlzIHRoZSB2YWx1ZSBvZiB0aGlzIEJpZyBtb2R1bG8gdGhlIHZhbHVlIG9mIEJpZyB5LlxyXG4gKi9cclxuUC5tb2QgPSBmdW5jdGlvbiAoeSkge1xyXG4gIHZhciB5Z3R4LFxyXG4gICAgeCA9IHRoaXMsXHJcbiAgICBCaWcgPSB4LmNvbnN0cnVjdG9yLFxyXG4gICAgYSA9IHgucyxcclxuICAgIGIgPSAoeSA9IG5ldyBCaWcoeSkpLnM7XHJcblxyXG4gIGlmICgheS5jWzBdKSB7XHJcbiAgICB0aHJvdyBFcnJvcihESVZfQllfWkVSTyk7XHJcbiAgfVxyXG5cclxuICB4LnMgPSB5LnMgPSAxO1xyXG4gIHlndHggPSB5LmNtcCh4KSA9PSAxO1xyXG4gIHgucyA9IGE7XHJcbiAgeS5zID0gYjtcclxuXHJcbiAgaWYgKHlndHgpIHJldHVybiBuZXcgQmlnKHgpO1xyXG5cclxuICBhID0gQmlnLkRQO1xyXG4gIGIgPSBCaWcuUk07XHJcbiAgQmlnLkRQID0gQmlnLlJNID0gMDtcclxuICB4ID0geC5kaXYoeSk7XHJcbiAgQmlnLkRQID0gYTtcclxuICBCaWcuUk0gPSBiO1xyXG5cclxuICByZXR1cm4gdGhpcy5taW51cyh4LnRpbWVzKHkpKTtcclxufTtcclxuXHJcblxyXG4vKlxyXG4gKiBSZXR1cm4gYSBuZXcgQmlnIHdob3NlIHZhbHVlIGlzIHRoZSB2YWx1ZSBvZiB0aGlzIEJpZyBuZWdhdGVkLlxyXG4gKi9cclxuUC5uZWcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgdmFyIHggPSBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzKTtcclxuICB4LnMgPSAteC5zO1xyXG4gIHJldHVybiB4O1xyXG59O1xyXG5cclxuXHJcbi8qXHJcbiAqIFJldHVybiBhIG5ldyBCaWcgd2hvc2UgdmFsdWUgaXMgdGhlIHZhbHVlIG9mIHRoaXMgQmlnIHBsdXMgdGhlIHZhbHVlIG9mIEJpZyB5LlxyXG4gKi9cclxuUC5wbHVzID0gUC5hZGQgPSBmdW5jdGlvbiAoeSkge1xyXG4gIHZhciBlLCBrLCB0LFxyXG4gICAgeCA9IHRoaXMsXHJcbiAgICBCaWcgPSB4LmNvbnN0cnVjdG9yO1xyXG5cclxuICB5ID0gbmV3IEJpZyh5KTtcclxuXHJcbiAgLy8gU2lnbnMgZGlmZmVyP1xyXG4gIGlmICh4LnMgIT0geS5zKSB7XHJcbiAgICB5LnMgPSAteS5zO1xyXG4gICAgcmV0dXJuIHgubWludXMoeSk7XHJcbiAgfVxyXG5cclxuICB2YXIgeGUgPSB4LmUsXHJcbiAgICB4YyA9IHguYyxcclxuICAgIHllID0geS5lLFxyXG4gICAgeWMgPSB5LmM7XHJcblxyXG4gIC8vIEVpdGhlciB6ZXJvP1xyXG4gIGlmICgheGNbMF0gfHwgIXljWzBdKSB7XHJcbiAgICBpZiAoIXljWzBdKSB7XHJcbiAgICAgIGlmICh4Y1swXSkge1xyXG4gICAgICAgIHkgPSBuZXcgQmlnKHgpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHkucyA9IHgucztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHk7XHJcbiAgfVxyXG5cclxuICB4YyA9IHhjLnNsaWNlKCk7XHJcblxyXG4gIC8vIFByZXBlbmQgemVyb3MgdG8gZXF1YWxpc2UgZXhwb25lbnRzLlxyXG4gIC8vIE5vdGU6IHJldmVyc2UgZmFzdGVyIHRoYW4gdW5zaGlmdHMuXHJcbiAgaWYgKGUgPSB4ZSAtIHllKSB7XHJcbiAgICBpZiAoZSA+IDApIHtcclxuICAgICAgeWUgPSB4ZTtcclxuICAgICAgdCA9IHljO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZSA9IC1lO1xyXG4gICAgICB0ID0geGM7XHJcbiAgICB9XHJcblxyXG4gICAgdC5yZXZlcnNlKCk7XHJcbiAgICBmb3IgKDsgZS0tOykgdC5wdXNoKDApO1xyXG4gICAgdC5yZXZlcnNlKCk7XHJcbiAgfVxyXG5cclxuICAvLyBQb2ludCB4YyB0byB0aGUgbG9uZ2VyIGFycmF5LlxyXG4gIGlmICh4Yy5sZW5ndGggLSB5Yy5sZW5ndGggPCAwKSB7XHJcbiAgICB0ID0geWM7XHJcbiAgICB5YyA9IHhjO1xyXG4gICAgeGMgPSB0O1xyXG4gIH1cclxuXHJcbiAgZSA9IHljLmxlbmd0aDtcclxuXHJcbiAgLy8gT25seSBzdGFydCBhZGRpbmcgYXQgeWMubGVuZ3RoIC0gMSBhcyB0aGUgZnVydGhlciBkaWdpdHMgb2YgeGMgY2FuIGJlIGxlZnQgYXMgdGhleSBhcmUuXHJcbiAgZm9yIChrID0gMDsgZTsgeGNbZV0gJT0gMTApIGsgPSAoeGNbLS1lXSA9IHhjW2VdICsgeWNbZV0gKyBrKSAvIDEwIHwgMDtcclxuXHJcbiAgLy8gTm8gbmVlZCB0byBjaGVjayBmb3IgemVybywgYXMgK3ggKyAreSAhPSAwICYmIC14ICsgLXkgIT0gMFxyXG5cclxuICBpZiAoaykge1xyXG4gICAgeGMudW5zaGlmdChrKTtcclxuICAgICsreWU7XHJcbiAgfVxyXG5cclxuICAvLyBSZW1vdmUgdHJhaWxpbmcgemVyb3MuXHJcbiAgZm9yIChlID0geGMubGVuZ3RoOyB4Y1stLWVdID09PSAwOykgeGMucG9wKCk7XHJcblxyXG4gIHkuYyA9IHhjO1xyXG4gIHkuZSA9IHllO1xyXG5cclxuICByZXR1cm4geTtcclxufTtcclxuXHJcblxyXG4vKlxyXG4gKiBSZXR1cm4gYSBCaWcgd2hvc2UgdmFsdWUgaXMgdGhlIHZhbHVlIG9mIHRoaXMgQmlnIHJhaXNlZCB0byB0aGUgcG93ZXIgbi5cclxuICogSWYgbiBpcyBuZWdhdGl2ZSwgcm91bmQgdG8gYSBtYXhpbXVtIG9mIEJpZy5EUCBkZWNpbWFsIHBsYWNlcyB1c2luZyByb3VuZGluZ1xyXG4gKiBtb2RlIEJpZy5STS5cclxuICpcclxuICogbiB7bnVtYmVyfSBJbnRlZ2VyLCAtTUFYX1BPV0VSIHRvIE1BWF9QT1dFUiBpbmNsdXNpdmUuXHJcbiAqL1xyXG5QLnBvdyA9IGZ1bmN0aW9uIChuKSB7XHJcbiAgdmFyIHggPSB0aGlzLFxyXG4gICAgb25lID0gbmV3IHguY29uc3RydWN0b3IoJzEnKSxcclxuICAgIHkgPSBvbmUsXHJcbiAgICBpc25lZyA9IG4gPCAwO1xyXG5cclxuICBpZiAobiAhPT0gfn5uIHx8IG4gPCAtTUFYX1BPV0VSIHx8IG4gPiBNQVhfUE9XRVIpIHtcclxuICAgIHRocm93IEVycm9yKElOVkFMSUQgKyAnZXhwb25lbnQnKTtcclxuICB9XHJcblxyXG4gIGlmIChpc25lZykgbiA9IC1uO1xyXG5cclxuICBmb3IgKDs7KSB7XHJcbiAgICBpZiAobiAmIDEpIHkgPSB5LnRpbWVzKHgpO1xyXG4gICAgbiA+Pj0gMTtcclxuICAgIGlmICghbikgYnJlYWs7XHJcbiAgICB4ID0geC50aW1lcyh4KTtcclxuICB9XHJcblxyXG4gIHJldHVybiBpc25lZyA/IG9uZS5kaXYoeSkgOiB5O1xyXG59O1xyXG5cclxuXHJcbi8qXHJcbiAqIFJldHVybiBhIG5ldyBCaWcgd2hvc2UgdmFsdWUgaXMgdGhlIHZhbHVlIG9mIHRoaXMgQmlnIHJvdW5kZWQgdG8gYSBtYXhpbXVtIHByZWNpc2lvbiBvZiBzZFxyXG4gKiBzaWduaWZpY2FudCBkaWdpdHMgdXNpbmcgcm91bmRpbmcgbW9kZSBybSwgb3IgQmlnLlJNIGlmIHJtIGlzIG5vdCBzcGVjaWZpZWQuXHJcbiAqXHJcbiAqIHNkIHtudW1iZXJ9IFNpZ25pZmljYW50IGRpZ2l0czogaW50ZWdlciwgMSB0byBNQVhfRFAgaW5jbHVzaXZlLlxyXG4gKiBybT8ge251bWJlcn0gUm91bmRpbmcgbW9kZTogMCAoZG93biksIDEgKGhhbGYtdXApLCAyIChoYWxmLWV2ZW4pIG9yIDMgKHVwKS5cclxuICovXHJcblAucHJlYyA9IGZ1bmN0aW9uIChzZCwgcm0pIHtcclxuICBpZiAoc2QgIT09IH5+c2QgfHwgc2QgPCAxIHx8IHNkID4gTUFYX0RQKSB7XHJcbiAgICB0aHJvdyBFcnJvcihJTlZBTElEICsgJ3ByZWNpc2lvbicpO1xyXG4gIH1cclxuICByZXR1cm4gcm91bmQobmV3IHRoaXMuY29uc3RydWN0b3IodGhpcyksIHNkLCBybSk7XHJcbn07XHJcblxyXG5cclxuLypcclxuICogUmV0dXJuIGEgbmV3IEJpZyB3aG9zZSB2YWx1ZSBpcyB0aGUgdmFsdWUgb2YgdGhpcyBCaWcgcm91bmRlZCB0byBhIG1heGltdW0gb2YgZHAgZGVjaW1hbCBwbGFjZXNcclxuICogdXNpbmcgcm91bmRpbmcgbW9kZSBybSwgb3IgQmlnLlJNIGlmIHJtIGlzIG5vdCBzcGVjaWZpZWQuXHJcbiAqIElmIGRwIGlzIG5lZ2F0aXZlLCByb3VuZCB0byBhbiBpbnRlZ2VyIHdoaWNoIGlzIGEgbXVsdGlwbGUgb2YgMTAqKi1kcC5cclxuICogSWYgZHAgaXMgbm90IHNwZWNpZmllZCwgcm91bmQgdG8gMCBkZWNpbWFsIHBsYWNlcy5cclxuICpcclxuICogZHA/IHtudW1iZXJ9IEludGVnZXIsIC1NQVhfRFAgdG8gTUFYX0RQIGluY2x1c2l2ZS5cclxuICogcm0/IHtudW1iZXJ9IFJvdW5kaW5nIG1vZGU6IDAgKGRvd24pLCAxIChoYWxmLXVwKSwgMiAoaGFsZi1ldmVuKSBvciAzICh1cCkuXHJcbiAqL1xyXG5QLnJvdW5kID0gZnVuY3Rpb24gKGRwLCBybSkge1xyXG4gIGlmIChkcCA9PT0gVU5ERUZJTkVEKSBkcCA9IDA7XHJcbiAgZWxzZSBpZiAoZHAgIT09IH5+ZHAgfHwgZHAgPCAtTUFYX0RQIHx8IGRwID4gTUFYX0RQKSB7XHJcbiAgICB0aHJvdyBFcnJvcihJTlZBTElEX0RQKTtcclxuICB9XHJcbiAgcmV0dXJuIHJvdW5kKG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMpLCBkcCArIHRoaXMuZSArIDEsIHJtKTtcclxufTtcclxuXHJcblxyXG4vKlxyXG4gKiBSZXR1cm4gYSBuZXcgQmlnIHdob3NlIHZhbHVlIGlzIHRoZSBzcXVhcmUgcm9vdCBvZiB0aGUgdmFsdWUgb2YgdGhpcyBCaWcsIHJvdW5kZWQsIGlmXHJcbiAqIG5lY2Vzc2FyeSwgdG8gYSBtYXhpbXVtIG9mIEJpZy5EUCBkZWNpbWFsIHBsYWNlcyB1c2luZyByb3VuZGluZyBtb2RlIEJpZy5STS5cclxuICovXHJcblAuc3FydCA9IGZ1bmN0aW9uICgpIHtcclxuICB2YXIgciwgYywgdCxcclxuICAgIHggPSB0aGlzLFxyXG4gICAgQmlnID0geC5jb25zdHJ1Y3RvcixcclxuICAgIHMgPSB4LnMsXHJcbiAgICBlID0geC5lLFxyXG4gICAgaGFsZiA9IG5ldyBCaWcoJzAuNScpO1xyXG5cclxuICAvLyBaZXJvP1xyXG4gIGlmICgheC5jWzBdKSByZXR1cm4gbmV3IEJpZyh4KTtcclxuXHJcbiAgLy8gTmVnYXRpdmU/XHJcbiAgaWYgKHMgPCAwKSB7XHJcbiAgICB0aHJvdyBFcnJvcihOQU1FICsgJ05vIHNxdWFyZSByb290Jyk7XHJcbiAgfVxyXG5cclxuICAvLyBFc3RpbWF0ZS5cclxuICBzID0gTWF0aC5zcXJ0KCtzdHJpbmdpZnkoeCwgdHJ1ZSwgdHJ1ZSkpO1xyXG5cclxuICAvLyBNYXRoLnNxcnQgdW5kZXJmbG93L292ZXJmbG93P1xyXG4gIC8vIFJlLWVzdGltYXRlOiBwYXNzIHggY29lZmZpY2llbnQgdG8gTWF0aC5zcXJ0IGFzIGludGVnZXIsIHRoZW4gYWRqdXN0IHRoZSByZXN1bHQgZXhwb25lbnQuXHJcbiAgaWYgKHMgPT09IDAgfHwgcyA9PT0gMSAvIDApIHtcclxuICAgIGMgPSB4LmMuam9pbignJyk7XHJcbiAgICBpZiAoIShjLmxlbmd0aCArIGUgJiAxKSkgYyArPSAnMCc7XHJcbiAgICBzID0gTWF0aC5zcXJ0KGMpO1xyXG4gICAgZSA9ICgoZSArIDEpIC8gMiB8IDApIC0gKGUgPCAwIHx8IGUgJiAxKTtcclxuICAgIHIgPSBuZXcgQmlnKChzID09IDEgLyAwID8gJzVlJyA6IChzID0gcy50b0V4cG9uZW50aWFsKCkpLnNsaWNlKDAsIHMuaW5kZXhPZignZScpICsgMSkpICsgZSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHIgPSBuZXcgQmlnKHMgKyAnJyk7XHJcbiAgfVxyXG5cclxuICBlID0gci5lICsgKEJpZy5EUCArPSA0KTtcclxuXHJcbiAgLy8gTmV3dG9uLVJhcGhzb24gaXRlcmF0aW9uLlxyXG4gIGRvIHtcclxuICAgIHQgPSByO1xyXG4gICAgciA9IGhhbGYudGltZXModC5wbHVzKHguZGl2KHQpKSk7XHJcbiAgfSB3aGlsZSAodC5jLnNsaWNlKDAsIGUpLmpvaW4oJycpICE9PSByLmMuc2xpY2UoMCwgZSkuam9pbignJykpO1xyXG5cclxuICByZXR1cm4gcm91bmQociwgKEJpZy5EUCAtPSA0KSArIHIuZSArIDEsIEJpZy5STSk7XHJcbn07XHJcblxyXG5cclxuLypcclxuICogUmV0dXJuIGEgbmV3IEJpZyB3aG9zZSB2YWx1ZSBpcyB0aGUgdmFsdWUgb2YgdGhpcyBCaWcgdGltZXMgdGhlIHZhbHVlIG9mIEJpZyB5LlxyXG4gKi9cclxuUC50aW1lcyA9IFAubXVsID0gZnVuY3Rpb24gKHkpIHtcclxuICB2YXIgYyxcclxuICAgIHggPSB0aGlzLFxyXG4gICAgQmlnID0geC5jb25zdHJ1Y3RvcixcclxuICAgIHhjID0geC5jLFxyXG4gICAgeWMgPSAoeSA9IG5ldyBCaWcoeSkpLmMsXHJcbiAgICBhID0geGMubGVuZ3RoLFxyXG4gICAgYiA9IHljLmxlbmd0aCxcclxuICAgIGkgPSB4LmUsXHJcbiAgICBqID0geS5lO1xyXG5cclxuICAvLyBEZXRlcm1pbmUgc2lnbiBvZiByZXN1bHQuXHJcbiAgeS5zID0geC5zID09IHkucyA/IDEgOiAtMTtcclxuXHJcbiAgLy8gUmV0dXJuIHNpZ25lZCAwIGlmIGVpdGhlciAwLlxyXG4gIGlmICgheGNbMF0gfHwgIXljWzBdKSB7XHJcbiAgICB5LmMgPSBbeS5lID0gMF07XHJcbiAgICByZXR1cm4geTtcclxuICB9XHJcblxyXG4gIC8vIEluaXRpYWxpc2UgZXhwb25lbnQgb2YgcmVzdWx0IGFzIHguZSArIHkuZS5cclxuICB5LmUgPSBpICsgajtcclxuXHJcbiAgLy8gSWYgYXJyYXkgeGMgaGFzIGZld2VyIGRpZ2l0cyB0aGFuIHljLCBzd2FwIHhjIGFuZCB5YywgYW5kIGxlbmd0aHMuXHJcbiAgaWYgKGEgPCBiKSB7XHJcbiAgICBjID0geGM7XHJcbiAgICB4YyA9IHljO1xyXG4gICAgeWMgPSBjO1xyXG4gICAgaiA9IGE7XHJcbiAgICBhID0gYjtcclxuICAgIGIgPSBqO1xyXG4gIH1cclxuXHJcbiAgLy8gSW5pdGlhbGlzZSBjb2VmZmljaWVudCBhcnJheSBvZiByZXN1bHQgd2l0aCB6ZXJvcy5cclxuICBmb3IgKGMgPSBuZXcgQXJyYXkoaiA9IGEgKyBiKTsgai0tOykgY1tqXSA9IDA7XHJcblxyXG4gIC8vIE11bHRpcGx5LlxyXG5cclxuICAvLyBpIGlzIGluaXRpYWxseSB4Yy5sZW5ndGguXHJcbiAgZm9yIChpID0gYjsgaS0tOykge1xyXG4gICAgYiA9IDA7XHJcblxyXG4gICAgLy8gYSBpcyB5Yy5sZW5ndGguXHJcbiAgICBmb3IgKGogPSBhICsgaTsgaiA+IGk7KSB7XHJcblxyXG4gICAgICAvLyBDdXJyZW50IHN1bSBvZiBwcm9kdWN0cyBhdCB0aGlzIGRpZ2l0IHBvc2l0aW9uLCBwbHVzIGNhcnJ5LlxyXG4gICAgICBiID0gY1tqXSArIHljW2ldICogeGNbaiAtIGkgLSAxXSArIGI7XHJcbiAgICAgIGNbai0tXSA9IGIgJSAxMDtcclxuXHJcbiAgICAgIC8vIGNhcnJ5XHJcbiAgICAgIGIgPSBiIC8gMTAgfCAwO1xyXG4gICAgfVxyXG5cclxuICAgIGNbal0gPSBiO1xyXG4gIH1cclxuXHJcbiAgLy8gSW5jcmVtZW50IHJlc3VsdCBleHBvbmVudCBpZiB0aGVyZSBpcyBhIGZpbmFsIGNhcnJ5LCBvdGhlcndpc2UgcmVtb3ZlIGxlYWRpbmcgemVyby5cclxuICBpZiAoYikgKyt5LmU7XHJcbiAgZWxzZSBjLnNoaWZ0KCk7XHJcblxyXG4gIC8vIFJlbW92ZSB0cmFpbGluZyB6ZXJvcy5cclxuICBmb3IgKGkgPSBjLmxlbmd0aDsgIWNbLS1pXTspIGMucG9wKCk7XHJcbiAgeS5jID0gYztcclxuXHJcbiAgcmV0dXJuIHk7XHJcbn07XHJcblxyXG5cclxuLypcclxuICogUmV0dXJuIGEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgdmFsdWUgb2YgdGhpcyBCaWcgaW4gZXhwb25lbnRpYWwgbm90YXRpb24gcm91bmRlZCB0byBkcCBmaXhlZFxyXG4gKiBkZWNpbWFsIHBsYWNlcyB1c2luZyByb3VuZGluZyBtb2RlIHJtLCBvciBCaWcuUk0gaWYgcm0gaXMgbm90IHNwZWNpZmllZC5cclxuICpcclxuICogZHA/IHtudW1iZXJ9IERlY2ltYWwgcGxhY2VzOiBpbnRlZ2VyLCAwIHRvIE1BWF9EUCBpbmNsdXNpdmUuXHJcbiAqIHJtPyB7bnVtYmVyfSBSb3VuZGluZyBtb2RlOiAwIChkb3duKSwgMSAoaGFsZi11cCksIDIgKGhhbGYtZXZlbikgb3IgMyAodXApLlxyXG4gKi9cclxuUC50b0V4cG9uZW50aWFsID0gZnVuY3Rpb24gKGRwLCBybSkge1xyXG4gIHZhciB4ID0gdGhpcyxcclxuICAgIG4gPSB4LmNbMF07XHJcblxyXG4gIGlmIChkcCAhPT0gVU5ERUZJTkVEKSB7XHJcbiAgICBpZiAoZHAgIT09IH5+ZHAgfHwgZHAgPCAwIHx8IGRwID4gTUFYX0RQKSB7XHJcbiAgICAgIHRocm93IEVycm9yKElOVkFMSURfRFApO1xyXG4gICAgfVxyXG4gICAgeCA9IHJvdW5kKG5ldyB4LmNvbnN0cnVjdG9yKHgpLCArK2RwLCBybSk7XHJcbiAgICBmb3IgKDsgeC5jLmxlbmd0aCA8IGRwOykgeC5jLnB1c2goMCk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gc3RyaW5naWZ5KHgsIHRydWUsICEhbik7XHJcbn07XHJcblxyXG5cclxuLypcclxuICogUmV0dXJuIGEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgdmFsdWUgb2YgdGhpcyBCaWcgaW4gbm9ybWFsIG5vdGF0aW9uIHJvdW5kZWQgdG8gZHAgZml4ZWRcclxuICogZGVjaW1hbCBwbGFjZXMgdXNpbmcgcm91bmRpbmcgbW9kZSBybSwgb3IgQmlnLlJNIGlmIHJtIGlzIG5vdCBzcGVjaWZpZWQuXHJcbiAqXHJcbiAqIGRwPyB7bnVtYmVyfSBEZWNpbWFsIHBsYWNlczogaW50ZWdlciwgMCB0byBNQVhfRFAgaW5jbHVzaXZlLlxyXG4gKiBybT8ge251bWJlcn0gUm91bmRpbmcgbW9kZTogMCAoZG93biksIDEgKGhhbGYtdXApLCAyIChoYWxmLWV2ZW4pIG9yIDMgKHVwKS5cclxuICpcclxuICogKC0wKS50b0ZpeGVkKDApIGlzICcwJywgYnV0ICgtMC4xKS50b0ZpeGVkKDApIGlzICctMCcuXHJcbiAqICgtMCkudG9GaXhlZCgxKSBpcyAnMC4wJywgYnV0ICgtMC4wMSkudG9GaXhlZCgxKSBpcyAnLTAuMCcuXHJcbiAqL1xyXG5QLnRvRml4ZWQgPSBmdW5jdGlvbiAoZHAsIHJtKSB7XHJcbiAgdmFyIHggPSB0aGlzLFxyXG4gICAgbiA9IHguY1swXTtcclxuXHJcbiAgaWYgKGRwICE9PSBVTkRFRklORUQpIHtcclxuICAgIGlmIChkcCAhPT0gfn5kcCB8fCBkcCA8IDAgfHwgZHAgPiBNQVhfRFApIHtcclxuICAgICAgdGhyb3cgRXJyb3IoSU5WQUxJRF9EUCk7XHJcbiAgICB9XHJcbiAgICB4ID0gcm91bmQobmV3IHguY29uc3RydWN0b3IoeCksIGRwICsgeC5lICsgMSwgcm0pO1xyXG5cclxuICAgIC8vIHguZSBtYXkgaGF2ZSBjaGFuZ2VkIGlmIHRoZSB2YWx1ZSBpcyByb3VuZGVkIHVwLlxyXG4gICAgZm9yIChkcCA9IGRwICsgeC5lICsgMTsgeC5jLmxlbmd0aCA8IGRwOykgeC5jLnB1c2goMCk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gc3RyaW5naWZ5KHgsIGZhbHNlLCAhIW4pO1xyXG59O1xyXG5cclxuXHJcbi8qXHJcbiAqIFJldHVybiBhIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIHZhbHVlIG9mIHRoaXMgQmlnLlxyXG4gKiBSZXR1cm4gZXhwb25lbnRpYWwgbm90YXRpb24gaWYgdGhpcyBCaWcgaGFzIGEgcG9zaXRpdmUgZXhwb25lbnQgZXF1YWwgdG8gb3IgZ3JlYXRlciB0aGFuXHJcbiAqIEJpZy5QRSwgb3IgYSBuZWdhdGl2ZSBleHBvbmVudCBlcXVhbCB0byBvciBsZXNzIHRoYW4gQmlnLk5FLlxyXG4gKiBPbWl0IHRoZSBzaWduIGZvciBuZWdhdGl2ZSB6ZXJvLlxyXG4gKi9cclxuUC50b0pTT04gPSBQLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gIHZhciB4ID0gdGhpcyxcclxuICAgIEJpZyA9IHguY29uc3RydWN0b3I7XHJcbiAgcmV0dXJuIHN0cmluZ2lmeSh4LCB4LmUgPD0gQmlnLk5FIHx8IHguZSA+PSBCaWcuUEUsICEheC5jWzBdKTtcclxufTtcclxuXHJcbmlmICh0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgUFtTeW1ib2wuZm9yKCdub2RlanMudXRpbC5pbnNwZWN0LmN1c3RvbScpXSA9IFAudG9KU09OO1xyXG59XHJcblxyXG5cclxuLypcclxuICogUmV0dXJuIHRoZSB2YWx1ZSBvZiB0aGlzIEJpZyBhcyBhIHByaW1pdGl2ZSBudW1iZXIuXHJcbiAqL1xyXG5QLnRvTnVtYmVyID0gZnVuY3Rpb24gKCkge1xyXG4gIHZhciBuID0gK3N0cmluZ2lmeSh0aGlzLCB0cnVlLCB0cnVlKTtcclxuICBpZiAodGhpcy5jb25zdHJ1Y3Rvci5zdHJpY3QgPT09IHRydWUgJiYgIXRoaXMuZXEobi50b1N0cmluZygpKSkge1xyXG4gICAgdGhyb3cgRXJyb3IoTkFNRSArICdJbXByZWNpc2UgY29udmVyc2lvbicpO1xyXG4gIH1cclxuICByZXR1cm4gbjtcclxufTtcclxuXHJcblxyXG4vKlxyXG4gKiBSZXR1cm4gYSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSB2YWx1ZSBvZiB0aGlzIEJpZyByb3VuZGVkIHRvIHNkIHNpZ25pZmljYW50IGRpZ2l0cyB1c2luZ1xyXG4gKiByb3VuZGluZyBtb2RlIHJtLCBvciBCaWcuUk0gaWYgcm0gaXMgbm90IHNwZWNpZmllZC5cclxuICogVXNlIGV4cG9uZW50aWFsIG5vdGF0aW9uIGlmIHNkIGlzIGxlc3MgdGhhbiB0aGUgbnVtYmVyIG9mIGRpZ2l0cyBuZWNlc3NhcnkgdG8gcmVwcmVzZW50XHJcbiAqIHRoZSBpbnRlZ2VyIHBhcnQgb2YgdGhlIHZhbHVlIGluIG5vcm1hbCBub3RhdGlvbi5cclxuICpcclxuICogc2Qge251bWJlcn0gU2lnbmlmaWNhbnQgZGlnaXRzOiBpbnRlZ2VyLCAxIHRvIE1BWF9EUCBpbmNsdXNpdmUuXHJcbiAqIHJtPyB7bnVtYmVyfSBSb3VuZGluZyBtb2RlOiAwIChkb3duKSwgMSAoaGFsZi11cCksIDIgKGhhbGYtZXZlbikgb3IgMyAodXApLlxyXG4gKi9cclxuUC50b1ByZWNpc2lvbiA9IGZ1bmN0aW9uIChzZCwgcm0pIHtcclxuICB2YXIgeCA9IHRoaXMsXHJcbiAgICBCaWcgPSB4LmNvbnN0cnVjdG9yLFxyXG4gICAgbiA9IHguY1swXTtcclxuXHJcbiAgaWYgKHNkICE9PSBVTkRFRklORUQpIHtcclxuICAgIGlmIChzZCAhPT0gfn5zZCB8fCBzZCA8IDEgfHwgc2QgPiBNQVhfRFApIHtcclxuICAgICAgdGhyb3cgRXJyb3IoSU5WQUxJRCArICdwcmVjaXNpb24nKTtcclxuICAgIH1cclxuICAgIHggPSByb3VuZChuZXcgQmlnKHgpLCBzZCwgcm0pO1xyXG4gICAgZm9yICg7IHguYy5sZW5ndGggPCBzZDspIHguYy5wdXNoKDApO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHN0cmluZ2lmeSh4LCBzZCA8PSB4LmUgfHwgeC5lIDw9IEJpZy5ORSB8fCB4LmUgPj0gQmlnLlBFLCAhIW4pO1xyXG59O1xyXG5cclxuXHJcbi8qXHJcbiAqIFJldHVybiBhIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIHZhbHVlIG9mIHRoaXMgQmlnLlxyXG4gKiBSZXR1cm4gZXhwb25lbnRpYWwgbm90YXRpb24gaWYgdGhpcyBCaWcgaGFzIGEgcG9zaXRpdmUgZXhwb25lbnQgZXF1YWwgdG8gb3IgZ3JlYXRlciB0aGFuXHJcbiAqIEJpZy5QRSwgb3IgYSBuZWdhdGl2ZSBleHBvbmVudCBlcXVhbCB0byBvciBsZXNzIHRoYW4gQmlnLk5FLlxyXG4gKiBJbmNsdWRlIHRoZSBzaWduIGZvciBuZWdhdGl2ZSB6ZXJvLlxyXG4gKi9cclxuUC52YWx1ZU9mID0gZnVuY3Rpb24gKCkge1xyXG4gIHZhciB4ID0gdGhpcyxcclxuICAgIEJpZyA9IHguY29uc3RydWN0b3I7XHJcbiAgaWYgKEJpZy5zdHJpY3QgPT09IHRydWUpIHtcclxuICAgIHRocm93IEVycm9yKE5BTUUgKyAndmFsdWVPZiBkaXNhbGxvd2VkJyk7XHJcbiAgfVxyXG4gIHJldHVybiBzdHJpbmdpZnkoeCwgeC5lIDw9IEJpZy5ORSB8fCB4LmUgPj0gQmlnLlBFLCB0cnVlKTtcclxufTtcclxuXHJcblxyXG4vLyBFeHBvcnRcclxuXHJcblxyXG5leHBvcnQgdmFyIEJpZyA9IF9CaWdfKCk7XHJcblxyXG4vLy8gPHJlZmVyZW5jZSB0eXBlcz1cImh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9EZWZpbml0ZWx5VHlwZWQvRGVmaW5pdGVseVR5cGVkL21hc3Rlci90eXBlcy9iaWcuanMvaW5kZXguZC50c1wiIC8+XHJcbmV4cG9ydCBkZWZhdWx0IEJpZztcclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../node_modules/@bpmn-io/form-js-editor/node_modules/big.js/big.mjs\n\n}");

/***/ }),

/***/ "../node_modules/@bpmn-io/form-js-editor/node_modules/min-dash/dist/index.esm.js":
/*!***************************************************************************************!*\
  !*** ../node_modules/@bpmn-io/form-js-editor/node_modules/min-dash/dist/index.esm.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   assign: () => (/* binding */ assign),\n/* harmony export */   bind: () => (/* binding */ bind),\n/* harmony export */   debounce: () => (/* binding */ debounce),\n/* harmony export */   ensureArray: () => (/* binding */ ensureArray),\n/* harmony export */   every: () => (/* binding */ every),\n/* harmony export */   filter: () => (/* binding */ filter),\n/* harmony export */   find: () => (/* binding */ find),\n/* harmony export */   findIndex: () => (/* binding */ findIndex),\n/* harmony export */   flatten: () => (/* binding */ flatten),\n/* harmony export */   forEach: () => (/* binding */ forEach),\n/* harmony export */   get: () => (/* binding */ get),\n/* harmony export */   groupBy: () => (/* binding */ groupBy),\n/* harmony export */   has: () => (/* binding */ has),\n/* harmony export */   isArray: () => (/* binding */ isArray),\n/* harmony export */   isDefined: () => (/* binding */ isDefined),\n/* harmony export */   isFunction: () => (/* binding */ isFunction),\n/* harmony export */   isNil: () => (/* binding */ isNil),\n/* harmony export */   isNumber: () => (/* binding */ isNumber),\n/* harmony export */   isObject: () => (/* binding */ isObject),\n/* harmony export */   isString: () => (/* binding */ isString),\n/* harmony export */   isUndefined: () => (/* binding */ isUndefined),\n/* harmony export */   keys: () => (/* binding */ keys),\n/* harmony export */   map: () => (/* binding */ map),\n/* harmony export */   matchPattern: () => (/* binding */ matchPattern),\n/* harmony export */   merge: () => (/* binding */ merge),\n/* harmony export */   omit: () => (/* binding */ omit),\n/* harmony export */   pick: () => (/* binding */ pick),\n/* harmony export */   reduce: () => (/* binding */ reduce),\n/* harmony export */   set: () => (/* binding */ set),\n/* harmony export */   size: () => (/* binding */ size),\n/* harmony export */   some: () => (/* binding */ some),\n/* harmony export */   sortBy: () => (/* binding */ sortBy),\n/* harmony export */   throttle: () => (/* binding */ throttle),\n/* harmony export */   unionBy: () => (/* binding */ unionBy),\n/* harmony export */   uniqueBy: () => (/* binding */ uniqueBy),\n/* harmony export */   values: () => (/* binding */ values),\n/* harmony export */   without: () => (/* binding */ without)\n/* harmony export */ });\n/**\n * Flatten array, one level deep.\n *\n * @template T\n *\n * @param {T[][] | T[] | null} [arr]\n *\n * @return {T[]}\n */\nfunction flatten(arr) {\n  return Array.prototype.concat.apply([], arr);\n}\n\nconst nativeToString = Object.prototype.toString;\nconst nativeHasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction isUndefined(obj) {\n  return obj === undefined;\n}\n\nfunction isDefined(obj) {\n  return obj !== undefined;\n}\n\nfunction isNil(obj) {\n  return obj == null;\n}\n\nfunction isArray(obj) {\n  return nativeToString.call(obj) === '[object Array]';\n}\n\nfunction isObject(obj) {\n  return nativeToString.call(obj) === '[object Object]';\n}\n\nfunction isNumber(obj) {\n  return nativeToString.call(obj) === '[object Number]';\n}\n\n/**\n * @param {any} obj\n *\n * @return {boolean}\n */\nfunction isFunction(obj) {\n  const tag = nativeToString.call(obj);\n\n  return (\n    tag === '[object Function]' ||\n    tag === '[object AsyncFunction]' ||\n    tag === '[object GeneratorFunction]' ||\n    tag === '[object AsyncGeneratorFunction]' ||\n    tag === '[object Proxy]'\n  );\n}\n\nfunction isString(obj) {\n  return nativeToString.call(obj) === '[object String]';\n}\n\n\n/**\n * Ensure collection is an array.\n *\n * @param {Object} obj\n */\nfunction ensureArray(obj) {\n\n  if (isArray(obj)) {\n    return;\n  }\n\n  throw new Error('must supply array');\n}\n\n/**\n * Return true, if target owns a property with the given key.\n *\n * @param {Object} target\n * @param {String} key\n *\n * @return {Boolean}\n */\nfunction has(target, key) {\n  return !isNil(target) && nativeHasOwnProperty.call(target, key);\n}\n\n/**\n * @template T\n * @typedef { (\n *   ((e: T) => boolean) |\n *   ((e: T, idx: number) => boolean) |\n *   ((e: T, key: string) => boolean) |\n *   string |\n *   number\n * ) } Matcher\n */\n\n/**\n * @template T\n * @template U\n *\n * @typedef { (\n *   ((e: T) => U) | string | number\n * ) } Extractor\n */\n\n\n/**\n * @template T\n * @typedef { (val: T, key: any) => boolean } MatchFn\n */\n\n/**\n * @template T\n * @typedef { T[] } ArrayCollection\n */\n\n/**\n * @template T\n * @typedef { { [key: string]: T } } StringKeyValueCollection\n */\n\n/**\n * @template T\n * @typedef { { [key: number]: T } } NumberKeyValueCollection\n */\n\n/**\n * @template T\n * @typedef { StringKeyValueCollection<T> | NumberKeyValueCollection<T> } KeyValueCollection\n */\n\n/**\n * @template T\n * @typedef { KeyValueCollection<T> | ArrayCollection<T> } Collection\n */\n\n/**\n * Find element in collection.\n *\n * @template T\n * @param {Collection<T>} collection\n * @param {Matcher<T>} matcher\n *\n * @return {Object}\n */\nfunction find(collection, matcher) {\n\n  const matchFn = toMatcher(matcher);\n\n  let match;\n\n  forEach(collection, function(val, key) {\n    if (matchFn(val, key)) {\n      match = val;\n\n      return false;\n    }\n  });\n\n  return match;\n\n}\n\n\n/**\n * Find element index in collection.\n *\n * @template T\n * @param {Collection<T>} collection\n * @param {Matcher<T>} matcher\n *\n * @return {number | string | undefined}\n */\nfunction findIndex(collection, matcher) {\n\n  const matchFn = toMatcher(matcher);\n\n  let idx = isArray(collection) ? -1 : undefined;\n\n  forEach(collection, function(val, key) {\n    if (matchFn(val, key)) {\n      idx = key;\n\n      return false;\n    }\n  });\n\n  return idx;\n}\n\n\n/**\n * Filter elements in collection.\n *\n * @template T\n * @param {Collection<T>} collection\n * @param {Matcher<T>} matcher\n *\n * @return {T[]} result\n */\nfunction filter(collection, matcher) {\n\n  const matchFn = toMatcher(matcher);\n\n  let result = [];\n\n  forEach(collection, function(val, key) {\n    if (matchFn(val, key)) {\n      result.push(val);\n    }\n  });\n\n  return result;\n}\n\n\n/**\n * Iterate over collection; returning something\n * (non-undefined) will stop iteration.\n *\n * @template T\n * @param {Collection<T>} collection\n * @param { ((item: T, idx: number) => (boolean|void)) | ((item: T, key: string) => (boolean|void)) } iterator\n *\n * @return {T} return result that stopped the iteration\n */\nfunction forEach(collection, iterator) {\n\n  let val,\n      result;\n\n  if (isUndefined(collection)) {\n    return;\n  }\n\n  const convertKey = isArray(collection) ? toNum : identity;\n\n  for (let key in collection) {\n\n    if (has(collection, key)) {\n      val = collection[key];\n\n      result = iterator(val, convertKey(key));\n\n      if (result === false) {\n        return val;\n      }\n    }\n  }\n}\n\n/**\n * Return collection without element.\n *\n * @template T\n * @param {ArrayCollection<T>} arr\n * @param {Matcher<T>} matcher\n *\n * @return {T[]}\n */\nfunction without(arr, matcher) {\n\n  if (isUndefined(arr)) {\n    return [];\n  }\n\n  ensureArray(arr);\n\n  const matchFn = toMatcher(matcher);\n\n  return arr.filter(function(el, idx) {\n    return !matchFn(el, idx);\n  });\n\n}\n\n\n/**\n * Reduce collection, returning a single result.\n *\n * @template T\n * @template V\n *\n * @param {Collection<T>} collection\n * @param {(result: V, entry: T, index: any) => V} iterator\n * @param {V} result\n *\n * @return {V} result returned from last iterator\n */\nfunction reduce(collection, iterator, result) {\n\n  forEach(collection, function(value, idx) {\n    result = iterator(result, value, idx);\n  });\n\n  return result;\n}\n\n\n/**\n * Return true if every element in the collection\n * matches the criteria.\n *\n * @param  {Object|Array} collection\n * @param  {Function} matcher\n *\n * @return {Boolean}\n */\nfunction every(collection, matcher) {\n\n  return !!reduce(collection, function(matches, val, key) {\n    return matches && matcher(val, key);\n  }, true);\n}\n\n\n/**\n * Return true if some elements in the collection\n * match the criteria.\n *\n * @param  {Object|Array} collection\n * @param  {Function} matcher\n *\n * @return {Boolean}\n */\nfunction some(collection, matcher) {\n\n  return !!find(collection, matcher);\n}\n\n\n/**\n * Transform a collection into another collection\n * by piping each member through the given fn.\n *\n * @param  {Object|Array}   collection\n * @param  {Function} fn\n *\n * @return {Array} transformed collection\n */\nfunction map(collection, fn) {\n\n  let result = [];\n\n  forEach(collection, function(val, key) {\n    result.push(fn(val, key));\n  });\n\n  return result;\n}\n\n\n/**\n * Get the collections keys.\n *\n * @param  {Object|Array} collection\n *\n * @return {Array}\n */\nfunction keys(collection) {\n  return collection && Object.keys(collection) || [];\n}\n\n\n/**\n * Shorthand for `keys(o).length`.\n *\n * @param  {Object|Array} collection\n *\n * @return {Number}\n */\nfunction size(collection) {\n  return keys(collection).length;\n}\n\n\n/**\n * Get the values in the collection.\n *\n * @param  {Object|Array} collection\n *\n * @return {Array}\n */\nfunction values(collection) {\n  return map(collection, (val) => val);\n}\n\n\n/**\n * Group collection members by attribute.\n *\n * @param {Object|Array} collection\n * @param {Extractor} extractor\n *\n * @return {Object} map with { attrValue => [ a, b, c ] }\n */\nfunction groupBy(collection, extractor, grouped = {}) {\n\n  extractor = toExtractor(extractor);\n\n  forEach(collection, function(val) {\n    let discriminator = extractor(val) || '_';\n\n    let group = grouped[discriminator];\n\n    if (!group) {\n      group = grouped[discriminator] = [];\n    }\n\n    group.push(val);\n  });\n\n  return grouped;\n}\n\n\nfunction uniqueBy(extractor, ...collections) {\n\n  extractor = toExtractor(extractor);\n\n  let grouped = {};\n\n  forEach(collections, (c) => groupBy(c, extractor, grouped));\n\n  let result = map(grouped, function(val, key) {\n    return val[0];\n  });\n\n  return result;\n}\n\n\nconst unionBy = uniqueBy;\n\n\n\n/**\n * Sort collection by criteria.\n *\n * @template T\n *\n * @param {Collection<T>} collection\n * @param {Extractor<T, number | string>} extractor\n *\n * @return {Array}\n */\nfunction sortBy(collection, extractor) {\n\n  extractor = toExtractor(extractor);\n\n  let sorted = [];\n\n  forEach(collection, function(value, key) {\n    let disc = extractor(value, key);\n\n    let entry = {\n      d: disc,\n      v: value\n    };\n\n    for (var idx = 0; idx < sorted.length; idx++) {\n      let { d } = sorted[idx];\n\n      if (disc < d) {\n        sorted.splice(idx, 0, entry);\n        return;\n      }\n    }\n\n    // not inserted, append (!)\n    sorted.push(entry);\n  });\n\n  return map(sorted, (e) => e.v);\n}\n\n\n/**\n * Create an object pattern matcher.\n *\n * @example\n *\n * ```javascript\n * const matcher = matchPattern({ id: 1 });\n *\n * let element = find(elements, matcher);\n * ```\n *\n * @template T\n *\n * @param {T} pattern\n *\n * @return { (el: any) =>  boolean } matcherFn\n */\nfunction matchPattern(pattern) {\n\n  return function(el) {\n\n    return every(pattern, function(val, key) {\n      return el[key] === val;\n    });\n\n  };\n}\n\n\n/**\n * @param {string | ((e: any) => any) } extractor\n *\n * @return { (e: any) => any }\n */\nfunction toExtractor(extractor) {\n\n  /**\n   * @satisfies { (e: any) => any }\n   */\n  return isFunction(extractor) ? extractor : (e) => {\n\n    // @ts-ignore: just works\n    return e[extractor];\n  };\n}\n\n\n/**\n * @template T\n * @param {Matcher<T>} matcher\n *\n * @return {MatchFn<T>}\n */\nfunction toMatcher(matcher) {\n  return isFunction(matcher) ? matcher : (e) => {\n    return e === matcher;\n  };\n}\n\n\nfunction identity(arg) {\n  return arg;\n}\n\nfunction toNum(arg) {\n  return Number(arg);\n}\n\n/* global setTimeout clearTimeout */\n\n/**\n * @typedef { {\n *   (...args: any[]): any;\n *   flush: () => void;\n *   cancel: () => void;\n * } } DebouncedFunction\n */\n\n/**\n * Debounce fn, calling it only once if the given time\n * elapsed between calls.\n *\n * Lodash-style the function exposes methods to `#clear`\n * and `#flush` to control internal behavior.\n *\n * @param  {Function} fn\n * @param  {Number} timeout\n *\n * @return {DebouncedFunction} debounced function\n */\nfunction debounce(fn, timeout) {\n\n  let timer;\n\n  let lastArgs;\n  let lastThis;\n\n  let lastNow;\n\n  function fire(force) {\n\n    let now = Date.now();\n\n    let scheduledDiff = force ? 0 : (lastNow + timeout) - now;\n\n    if (scheduledDiff > 0) {\n      return schedule(scheduledDiff);\n    }\n\n    fn.apply(lastThis, lastArgs);\n\n    clear();\n  }\n\n  function schedule(timeout) {\n    timer = setTimeout(fire, timeout);\n  }\n\n  function clear() {\n    if (timer) {\n      clearTimeout(timer);\n    }\n\n    timer = lastNow = lastArgs = lastThis = undefined;\n  }\n\n  function flush() {\n    if (timer) {\n      fire(true);\n    }\n\n    clear();\n  }\n\n  /**\n   * @type { DebouncedFunction }\n   */\n  function callback(...args) {\n    lastNow = Date.now();\n\n    lastArgs = args;\n    lastThis = this;\n\n    // ensure an execution is scheduled\n    if (!timer) {\n      schedule(timeout);\n    }\n  }\n\n  callback.flush = flush;\n  callback.cancel = clear;\n\n  return callback;\n}\n\n/**\n * Throttle fn, calling at most once\n * in the given interval.\n *\n * @param  {Function} fn\n * @param  {Number} interval\n *\n * @return {Function} throttled function\n */\nfunction throttle(fn, interval) {\n  let throttling = false;\n\n  return function(...args) {\n\n    if (throttling) {\n      return;\n    }\n\n    fn(...args);\n    throttling = true;\n\n    setTimeout(() => {\n      throttling = false;\n    }, interval);\n  };\n}\n\n/**\n * Bind function against target <this>.\n *\n * @param  {Function} fn\n * @param  {Object}   target\n *\n * @return {Function} bound function\n */\nfunction bind(fn, target) {\n  return fn.bind(target);\n}\n\n/**\n * Convenience wrapper for `Object.assign`.\n *\n * @param {Object} target\n * @param {...Object} others\n *\n * @return {Object} the target\n */\nfunction assign(target, ...others) {\n  return Object.assign(target, ...others);\n}\n\n/**\n * Sets a nested property of a given object to the specified value.\n *\n * This mutates the object and returns it.\n *\n * @template T\n *\n * @param {T} target The target of the set operation.\n * @param {(string|number)[]} path The path to the nested value.\n * @param {any} value The value to set.\n *\n * @return {T}\n */\nfunction set(target, path, value) {\n\n  let currentTarget = target;\n\n  forEach(path, function(key, idx) {\n\n    if (typeof key !== 'number' && typeof key !== 'string') {\n      throw new Error('illegal key type: ' + typeof key + '. Key should be of type number or string.');\n    }\n\n    if (key === 'constructor') {\n      throw new Error('illegal key: constructor');\n    }\n\n    if (key === '__proto__') {\n      throw new Error('illegal key: __proto__');\n    }\n\n    let nextKey = path[idx + 1];\n    let nextTarget = currentTarget[key];\n\n    if (isDefined(nextKey) && isNil(nextTarget)) {\n      nextTarget = currentTarget[key] = isNaN(+nextKey) ? {} : [];\n    }\n\n    if (isUndefined(nextKey)) {\n      if (isUndefined(value)) {\n        delete currentTarget[key];\n      } else {\n        currentTarget[key] = value;\n      }\n    } else {\n      currentTarget = nextTarget;\n    }\n  });\n\n  return target;\n}\n\n\n/**\n * Gets a nested property of a given object.\n *\n * @param {Object} target The target of the get operation.\n * @param {(string|number)[]} path The path to the nested value.\n * @param {any} [defaultValue] The value to return if no value exists.\n *\n * @return {any}\n */\nfunction get(target, path, defaultValue) {\n\n  let currentTarget = target;\n\n  forEach(path, function(key) {\n\n    // accessing nil property yields <undefined>\n    if (isNil(currentTarget)) {\n      currentTarget = undefined;\n\n      return false;\n    }\n\n    currentTarget = currentTarget[key];\n  });\n\n  return isUndefined(currentTarget) ? defaultValue : currentTarget;\n}\n\n/**\n * Pick properties from the given target.\n *\n * @template T\n * @template {any[]} V\n *\n * @param {T} target\n * @param {V} properties\n *\n * @return Pick<T, V>\n */\nfunction pick(target, properties) {\n\n  let result = {};\n\n  let obj = Object(target);\n\n  forEach(properties, function(prop) {\n\n    if (prop in obj) {\n      result[prop] = target[prop];\n    }\n  });\n\n  return result;\n}\n\n/**\n * Pick all target properties, excluding the given ones.\n *\n * @template T\n * @template {any[]} V\n *\n * @param {T} target\n * @param {V} properties\n *\n * @return {Omit<T, V>} target\n */\nfunction omit(target, properties) {\n\n  let result = {};\n\n  let obj = Object(target);\n\n  forEach(obj, function(prop, key) {\n\n    if (properties.indexOf(key) === -1) {\n      result[key] = prop;\n    }\n  });\n\n  return result;\n}\n\n/**\n * Recursively merge `...sources` into given target.\n *\n * Does support merging objects; does not support merging arrays.\n *\n * @param {Object} target\n * @param {...Object} sources\n *\n * @return {Object} the target\n */\nfunction merge(target, ...sources) {\n\n  if (!sources.length) {\n    return target;\n  }\n\n  forEach(sources, function(source) {\n\n    // skip non-obj sources, i.e. null\n    if (!source || !isObject(source)) {\n      return;\n    }\n\n    forEach(source, function(sourceVal, key) {\n\n      if (key === '__proto__') {\n        return;\n      }\n\n      let targetVal = target[key];\n\n      if (isObject(sourceVal)) {\n\n        if (!isObject(targetVal)) {\n\n          // override target[key] with object\n          targetVal = {};\n        }\n\n        target[key] = merge(targetVal, sourceVal);\n      } else {\n        target[key] = sourceVal;\n      }\n\n    });\n  });\n\n  return target;\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vbm9kZV9tb2R1bGVzL0BicG1uLWlvL2Zvcm0tanMtZWRpdG9yL25vZGVfbW9kdWxlcy9taW4tZGFzaC9kaXN0L2luZGV4LmVzbS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsb0JBQW9CO0FBQy9CO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxXQUFXLEtBQUs7QUFDaEI7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBLE9BQU87QUFDUDs7O0FBR0E7QUFDQTtBQUNBLGNBQWMsZ0NBQWdDO0FBQzlDOztBQUVBO0FBQ0E7QUFDQSxjQUFjLE1BQU07QUFDcEI7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQixxQkFBcUI7QUFDckM7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQixxQkFBcUI7QUFDckM7O0FBRUE7QUFDQTtBQUNBLGNBQWMsNERBQTREO0FBQzFFOztBQUVBO0FBQ0E7QUFD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Q0EsV0FBVyxHQUFHO0FBQ2QsV0FBVyxHQUFHO0FBQ2Q7QUFDQSxZQUFZLFlBQVk7QUFDeEI7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsV0FBVztBQUN0QjtBQUNBLFlBQVksUUFBUTtBQUNwQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7O0FBRUEsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQTs7QUFFaVUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYW11bmRhLW1vZGVsZXItY2xpZW50Ly4uL25vZGVfbW9kdWxlcy9AYnBtbi1pby9mb3JtLWpzLWVkaXRvci9ub2RlX21vZHVsZXMvbWluLWRhc2gvZGlzdC9pbmRleC5lc20uanM/NzQwZiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEZsYXR0ZW4gYXJyYXksIG9uZSBsZXZlbCBkZWVwLlxuICpcbiAqIEB0ZW1wbGF0ZSBUXG4gKlxuICogQHBhcmFtIHtUW11bXSB8IFRbXSB8IG51bGx9IFthcnJdXG4gKlxuICogQHJldHVybiB7VFtdfVxuICovXG5mdW5jdGlvbiBmbGF0dGVuKGFycikge1xuICByZXR1cm4gQXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseShbXSwgYXJyKTtcbn1cblxuY29uc3QgbmF0aXZlVG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuY29uc3QgbmF0aXZlSGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG5mdW5jdGlvbiBpc1VuZGVmaW5lZChvYmopIHtcbiAgcmV0dXJuIG9iaiA9PT0gdW5kZWZpbmVkO1xufVxuXG5mdW5jdGlvbiBpc0RlZmluZWQob2JqKSB7XG4gIHJldHVybiBvYmogIT09IHVuZGVmaW5lZDtcbn1cblxuZnVuY3Rpb24gaXNOaWwob2JqKSB7XG4gIHJldHVybiBvYmogPT0gbnVsbDtcbn1cblxuZnVuY3Rpb24gaXNBcnJheShvYmopIHtcbiAgcmV0dXJuIG5hdGl2ZVRvU3RyaW5nLmNhbGwob2JqKSA9PT0gJ1tvYmplY3QgQXJyYXldJztcbn1cblxuZnVuY3Rpb24gaXNPYmplY3Qob2JqKSB7XG4gIHJldHVybiBuYXRpdmVUb1N0cmluZy5jYWxsKG9iaikgPT09ICdbb2JqZWN0IE9iamVjdF0nO1xufVxuXG5mdW5jdGlvbiBpc051bWJlcihvYmopIHtcbiAgcmV0dXJuIG5hdGl2ZVRvU3RyaW5nLmNhbGwob2JqKSA9PT0gJ1tvYmplY3QgTnVtYmVyXSc7XG59XG5cbi8qKlxuICogQHBhcmFtIHthbnl9IG9ialxuICpcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzRnVuY3Rpb24ob2JqKSB7XG4gIGNvbnN0IHRhZyA9IG5hdGl2ZVRvU3RyaW5nLmNhbGwob2JqKTtcblxuICByZXR1cm4gKFxuICAgIHRhZyA9PT0gJ1tvYmplY3QgRnVuY3Rpb25dJyB8fFxuICAgIHRhZyA9PT0gJ1tvYmplY3QgQXN5bmNGdW5jdGlvbl0nIHx8XG4gICAgdGFnID09PSAnW29iamVjdCBHZW5lcmF0b3JGdW5jdGlvbl0nIHx8XG4gICAgdGFnID09PSAnW29iamVjdCBBc3luY0dlbmVyYXRvckZ1bmN0aW9uXScgfHxcbiAgICB0YWcgPT09ICdbb2JqZWN0IFByb3h5XSdcbiAgKTtcbn1cblxuZnVuY3Rpb24gaXNTdHJpbmcob2JqKSB7XG4gIHJldHVybiBuYXRpdmVUb1N0cmluZy5jYWxsKG9iaikgPT09ICdbb2JqZWN0IFN0cmluZ10nO1xufVxuXG5cbi8qKlxuICogRW5zdXJlIGNvbGxlY3Rpb24gaXMgYW4gYXJyYXkuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICovXG5mdW5jdGlvbiBlbnN1cmVBcnJheShvYmopIHtcblxuICBpZiAoaXNBcnJheShvYmopKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdGhyb3cgbmV3IEVycm9yKCdtdXN0IHN1cHBseSBhcnJheScpO1xufVxuXG4vKipcbiAqIFJldHVybiB0cnVlLCBpZiB0YXJnZXQgb3ducyBhIHByb3BlcnR5IHdpdGggdGhlIGdpdmVuIGtleS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdGFyZ2V0XG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaGFzKHRhcmdldCwga2V5KSB7XG4gIHJldHVybiAhaXNOaWwodGFyZ2V0KSAmJiBuYXRpdmVIYXNPd25Qcm9wZXJ0eS5jYWxsKHRhcmdldCwga2V5KTtcbn1cblxuLyoqXG4gKiBAdGVtcGxhdGUgVFxuICogQHR5cGVkZWYgeyAoXG4gKiAgICgoZTogVCkgPT4gYm9vbGVhbikgfFxuICogICAoKGU6IFQsIGlkeDogbnVtYmVyKSA9PiBib29sZWFuKSB8XG4gKiAgICgoZTogVCwga2V5OiBzdHJpbmcpID0+IGJvb2xlYW4pIHxcbiAqICAgc3RyaW5nIHxcbiAqICAgbnVtYmVyXG4gKiApIH0gTWF0Y2hlclxuICovXG5cbi8qKlxuICogQHRlbXBsYXRlIFRcbiAqIEB0ZW1wbGF0ZSBVXG4gKlxuICogQHR5cGVkZWYgeyAoXG4gKiAgICgoZTogVCkgPT4gVSkgfCBzdHJpbmcgfCBudW1iZXJcbiAqICkgfSBFeHRyYWN0b3JcbiAqL1xuXG5cbi8qKlxuICogQHRlbXBsYXRlIFRcbiAqIEB0eXBlZGVmIHsgKHZhbDogVCwga2V5OiBhbnkpID0+IGJvb2xlYW4gfSBNYXRjaEZuXG4gKi9cblxuLyoqXG4gKiBAdGVtcGxhdGUgVFxuICogQHR5cGVkZWYgeyBUW10gfSBBcnJheUNvbGxlY3Rpb25cbiAqL1xuXG4vKipcbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAdHlwZWRlZiB7IHsgW2tleTogc3RyaW5nXTogVCB9IH0gU3RyaW5nS2V5VmFsdWVDb2xsZWN0aW9uXG4gKi9cblxuLyoqXG4gKiBAdGVtcGxhdGUgVFxuICogQHR5cGVkZWYgeyB7IFtrZXk6IG51bWJlcl06IFQgfSB9IE51bWJlcktleVZhbHVlQ29sbGVjdGlvblxuICovXG5cbi8qKlxuICogQHRlbXBsYXRlIFRcbiAqIEB0eXBlZGVmIHsgU3RyaW5nS2V5VmFsdWVDb2xsZWN0aW9uPFQ+IHwgTnVtYmVyS2V5VmFsdWVDb2xsZWN0aW9uPFQ+IH0gS2V5VmFsdWVDb2xsZWN0aW9uXG4gKi9cblxuLyoqXG4gKiBAdGVtcGxhdGUgVFxuICogQHR5cGVkZWYgeyBLZXlWYWx1ZUNvbGxlY3Rpb248VD4gfCBBcnJheUNvbGxlY3Rpb248VD4gfSBDb2xsZWN0aW9uXG4gKi9cblxuLyoqXG4gKiBGaW5kIGVsZW1lbnQgaW4gY29sbGVjdGlvbi5cbiAqXG4gKiBAdGVtcGxhdGUgVFxuICogQHBhcmFtIHtDb2xsZWN0aW9uPFQ+fSBjb2xsZWN0aW9uXG4gKiBAcGFyYW0ge01hdGNoZXI8VD59IG1hdGNoZXJcbiAqXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cbmZ1bmN0aW9uIGZpbmQoY29sbGVjdGlvbiwgbWF0Y2hlcikge1xuXG4gIGNvbnN0IG1hdGNoRm4gPSB0b01hdGNoZXIobWF0Y2hlcik7XG5cbiAgbGV0IG1hdGNoO1xuXG4gIGZvckVhY2goY29sbGVjdGlvbiwgZnVuY3Rpb24odmFsLCBrZXkpIHtcbiAgICBpZiAobWF0Y2hGbih2YWwsIGtleSkpIHtcbiAgICAgIG1hdGNoID0gdmFsO1xuXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gbWF0Y2g7XG5cbn1cblxuXG4vKipcbiAqIEZpbmQgZWxlbWVudCBpbmRleCBpbiBjb2xsZWN0aW9uLlxuICpcbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAcGFyYW0ge0NvbGxlY3Rpb248VD59IGNvbGxlY3Rpb25cbiAqIEBwYXJhbSB7TWF0Y2hlcjxUPn0gbWF0Y2hlclxuICpcbiAqIEByZXR1cm4ge251bWJlciB8IHN0cmluZyB8IHVuZGVmaW5lZH1cbiAqL1xuZnVuY3Rpb24gZmluZEluZGV4KGNvbGxlY3Rpb24sIG1hdGNoZXIpIHtcblxuICBjb25zdCBtYXRjaEZuID0gdG9NYXRjaGVyKG1hdGNoZXIpO1xuXG4gIGxldCBpZHggPSBpc0FycmF5KGNvbGxlY3Rpb24pID8gLTEgOiB1bmRlZmluZWQ7XG5cbiAgZm9yRWFjaChjb2xsZWN0aW9uLCBmdW5jdGlvbih2YWwsIGtleSkge1xuICAgIGlmIChtYXRjaEZuKHZhbCwga2V5KSkge1xuICAgICAgaWR4ID0ga2V5O1xuXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gaWR4O1xufVxuXG5cbi8qKlxuICogRmlsdGVyIGVsZW1lbnRzIGluIGNvbGxlY3Rpb24uXG4gKlxuICogQHRlbXBsYXRlIFRcbiAqIEBwYXJhbSB7Q29sbGVjdGlvbjxUPn0gY29sbGVjdGlvblxuICogQHBhcmFtIHtNYXRjaGVyPFQ+fSBtYXRjaGVyXG4gKlxuICogQHJldHVybiB7VFtdfSByZXN1bHRcbiAqL1xuZnVuY3Rpb24gZmlsdGVyKGNvbGxlY3Rpb24sIG1hdGNoZXIpIHtcblxuICBjb25zdCBtYXRjaEZuID0gdG9NYXRjaGVyKG1hdGNoZXIpO1xuXG4gIGxldCByZXN1bHQgPSBbXTtcblxuICBmb3JFYWNoKGNvbGxlY3Rpb24sIGZ1bmN0aW9uKHZhbCwga2V5KSB7XG4gICAgaWYgKG1hdGNoRm4odmFsLCBrZXkpKSB7XG4gICAgICByZXN1bHQucHVzaCh2YWwpO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuXG4vKipcbiAqIEl0ZXJhdGUgb3ZlciBjb2xsZWN0aW9uOyByZXR1cm5pbmcgc29tZXRoaW5nXG4gKiAobm9uLXVuZGVmaW5lZCkgd2lsbCBzdG9wIGl0ZXJhdGlvbi5cbiAqXG4gKiBAdGVtcGxhdGUgVFxuICogQHBhcmFtIHtDb2xsZWN0aW9uPFQ+fSBjb2xsZWN0aW9uXG4gKiBAcGFyYW0geyAoKGl0ZW06IFQsIGlkeDogbnVtYmVyKSA9PiAoYm9vbGVhbnx2b2lkKSkgfCAoKGl0ZW06IFQsIGtleTogc3RyaW5nKSA9PiAoYm9vbGVhbnx2b2lkKSkgfSBpdGVyYXRvclxuICpcbiAqIEByZXR1cm4ge1R9IHJldHVybiByZXN1bHQgdGhhdCBzdG9wcGVkIHRoZSBpdGVyYXRpb25cbiAqL1xuZnVuY3Rpb24gZm9yRWFjaChjb2xsZWN0aW9uLCBpdGVyYXRvcikge1xuXG4gIGxldCB2YWwsXG4gICAgICByZXN1bHQ7XG5cbiAgaWYgKGlzVW5kZWZpbmVkKGNvbGxlY3Rpb24pKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgY29udmVydEtleSA9IGlzQXJyYXkoY29sbGVjdGlvbikgPyB0b051bSA6IGlkZW50aXR5O1xuXG4gIGZvciAobGV0IGtleSBpbiBjb2xsZWN0aW9uKSB7XG5cbiAgICBpZiAoaGFzKGNvbGxlY3Rpb24sIGtleSkpIHtcbiAgICAgIHZhbCA9IGNvbGxlY3Rpb25ba2V5XTtcblxuICAgICAgcmVzdWx0ID0gaXRlcmF0b3IodmFsLCBjb252ZXJ0S2V5KGtleSkpO1xuXG4gICAgICBpZiAocmVzdWx0ID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFJldHVybiBjb2xsZWN0aW9uIHdpdGhvdXQgZWxlbWVudC5cbiAqXG4gKiBAdGVtcGxhdGUgVFxuICogQHBhcmFtIHtBcnJheUNvbGxlY3Rpb248VD59IGFyclxuICogQHBhcmFtIHtNYXRjaGVyPFQ+fSBtYXRjaGVyXG4gKlxuICogQHJldHVybiB7VFtdfVxuICovXG5mdW5jdGlvbiB3aXRob3V0KGFyciwgbWF0Y2hlcikge1xuXG4gIGlmIChpc1VuZGVmaW5lZChhcnIpKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgZW5zdXJlQXJyYXkoYXJyKTtcblxuICBjb25zdCBtYXRjaEZuID0gdG9NYXRjaGVyKG1hdGNoZXIpO1xuXG4gIHJldHVybiBhcnIuZmlsdGVyKGZ1bmN0aW9uKGVsLCBpZHgpIHtcbiAgICByZXR1cm4gIW1hdGNoRm4oZWwsIGlkeCk7XG4gIH0pO1xuXG59XG5cblxuLyoqXG4gKiBSZWR1Y2UgY29sbGVjdGlvbiwgcmV0dXJuaW5nIGEgc2luZ2xlIHJlc3VsdC5cbiAqXG4gKiBAdGVtcGxhdGUgVFxuICogQHRlbXBsYXRlIFZcbiAqXG4gKiBAcGFyYW0ge0NvbGxlY3Rpb248VD59IGNvbGxlY3Rpb25cbiAqIEBwYXJhbSB7KHJlc3VsdDogViwgZW50cnk6IFQsIGluZGV4OiBhbnkpID0+IFZ9IGl0ZXJhdG9yXG4gKiBAcGFyYW0ge1Z9IHJlc3VsdFxuICpcbiAqIEByZXR1cm4ge1Z9IHJlc3VsdCByZXR1cm5lZCBmcm9tIGxhc3QgaXRlcmF0b3JcbiAqL1xuZnVuY3Rpb24gcmVkdWNlKGNvbGxlY3Rpb24sIGl0ZXJhdG9yLCByZXN1bHQpIHtcblxuICBmb3JFYWNoKGNvbGxlY3Rpb24sIGZ1bmN0aW9uKHZhbHVlLCBpZHgpIHtcbiAgICByZXN1bHQgPSBpdGVyYXRvcihyZXN1bHQsIHZhbHVlLCBpZHgpO1xuICB9KTtcblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5cbi8qKlxuICogUmV0dXJuIHRydWUgaWYgZXZlcnkgZWxlbWVudCBpbiB0aGUgY29sbGVjdGlvblxuICogbWF0Y2hlcyB0aGUgY3JpdGVyaWEuXG4gKlxuICogQHBhcmFtICB7T2JqZWN0fEFycmF5fSBjb2xsZWN0aW9uXG4gKiBAcGFyYW0gIHtGdW5jdGlvbn0gbWF0Y2hlclxuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGV2ZXJ5KGNvbGxlY3Rpb24sIG1hdGNoZXIpIHtcblxuICByZXR1cm4gISFyZWR1Y2UoY29sbGVjdGlvbiwgZnVuY3Rpb24obWF0Y2hlcywgdmFsLCBrZXkpIHtcbiAgICByZXR1cm4gbWF0Y2hlcyAmJiBtYXRjaGVyKHZhbCwga2V5KTtcbiAgfSwgdHJ1ZSk7XG59XG5cblxuLyoqXG4gKiBSZXR1cm4gdHJ1ZSBpZiBzb21lIGVsZW1lbnRzIGluIHRoZSBjb2xsZWN0aW9uXG4gKiBtYXRjaCB0aGUgY3JpdGVyaWEuXG4gKlxuICogQHBhcmFtICB7T2JqZWN0fEFycmF5fSBjb2xsZWN0aW9uXG4gKiBAcGFyYW0gIHtGdW5jdGlvbn0gbWF0Y2hlclxuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIHNvbWUoY29sbGVjdGlvbiwgbWF0Y2hlcikge1xuXG4gIHJldHVybiAhIWZpbmQoY29sbGVjdGlvbiwgbWF0Y2hlcik7XG59XG5cblxuLyoqXG4gKiBUcmFuc2Zvcm0gYSBjb2xsZWN0aW9uIGludG8gYW5vdGhlciBjb2xsZWN0aW9uXG4gKiBieSBwaXBpbmcgZWFjaCBtZW1iZXIgdGhyb3VnaCB0aGUgZ2l2ZW4gZm4uXG4gKlxuICogQHBhcmFtICB7T2JqZWN0fEFycmF5fSAgIGNvbGxlY3Rpb25cbiAqIEBwYXJhbSAge0Z1bmN0aW9ufSBmblxuICpcbiAqIEByZXR1cm4ge0FycmF5fSB0cmFuc2Zvcm1lZCBjb2xsZWN0aW9uXG4gKi9cbmZ1bmN0aW9uIG1hcChjb2xsZWN0aW9uLCBmbikge1xuXG4gIGxldCByZXN1bHQgPSBbXTtcblxuICBmb3JFYWNoKGNvbGxlY3Rpb24sIGZ1bmN0aW9uKHZhbCwga2V5KSB7XG4gICAgcmVzdWx0LnB1c2goZm4odmFsLCBrZXkpKTtcbiAgfSk7XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuXG4vKipcbiAqIEdldCB0aGUgY29sbGVjdGlvbnMga2V5cy5cbiAqXG4gKiBAcGFyYW0gIHtPYmplY3R8QXJyYXl9IGNvbGxlY3Rpb25cbiAqXG4gKiBAcmV0dXJuIHtBcnJheX1cbiAqL1xuZnVuY3Rpb24ga2V5cyhjb2xsZWN0aW9uKSB7XG4gIHJldHVybiBjb2xsZWN0aW9uICYmIE9iamVjdC5rZXlzKGNvbGxlY3Rpb24pIHx8IFtdO1xufVxuXG5cbi8qKlxuICogU2hvcnRoYW5kIGZvciBga2V5cyhvKS5sZW5ndGhgLlxuICpcbiAqIEBwYXJhbSAge09iamVjdHxBcnJheX0gY29sbGVjdGlvblxuICpcbiAqIEByZXR1cm4ge051bWJlcn1cbiAqL1xuZnVuY3Rpb24gc2l6ZShjb2xsZWN0aW9uKSB7XG4gIHJldHVybiBrZXlzKGNvbGxlY3Rpb24pLmxlbmd0aDtcbn1cblxuXG4vKipcbiAqIEdldCB0aGUgdmFsdWVzIGluIHRoZSBjb2xsZWN0aW9uLlxuICpcbiAqIEBwYXJhbSAge09iamVjdHxBcnJheX0gY29sbGVjdGlvblxuICpcbiAqIEByZXR1cm4ge0FycmF5fVxuICovXG5mdW5jdGlvbiB2YWx1ZXMoY29sbGVjdGlvbikge1xuICByZXR1cm4gbWFwKGNvbGxlY3Rpb24sICh2YWwpID0+IHZhbCk7XG59XG5cblxuLyoqXG4gKiBHcm91cCBjb2xsZWN0aW9uIG1lbWJlcnMgYnkgYXR0cmlidXRlLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fEFycmF5fSBjb2xsZWN0aW9uXG4gKiBAcGFyYW0ge0V4dHJhY3Rvcn0gZXh0cmFjdG9yXG4gKlxuICogQHJldHVybiB7T2JqZWN0fSBtYXAgd2l0aCB7IGF0dHJWYWx1ZSA9PiBbIGEsIGIsIGMgXSB9XG4gKi9cbmZ1bmN0aW9uIGdyb3VwQnkoY29sbGVjdGlvbiwgZXh0cmFjdG9yLCBncm91cGVkID0ge30pIHtcblxuICBleHRyYWN0b3IgPSB0b0V4dHJhY3RvcihleHRyYWN0b3IpO1xuXG4gIGZvckVhY2goY29sbGVjdGlvbiwgZnVuY3Rpb24odmFsKSB7XG4gICAgbGV0IGRpc2NyaW1pbmF0b3IgPSBleHRyYWN0b3IodmFsKSB8fCAnXyc7XG5cbiAgICBsZXQgZ3JvdXAgPSBncm91cGVkW2Rpc2NyaW1pbmF0b3JdO1xuXG4gICAgaWYgKCFncm91cCkge1xuICAgICAgZ3JvdXAgPSBncm91cGVkW2Rpc2NyaW1pbmF0b3JdID0gW107XG4gICAgfVxuXG4gICAgZ3JvdXAucHVzaCh2YWwpO1xuICB9KTtcblxuICByZXR1cm4gZ3JvdXBlZDtcbn1cblxuXG5mdW5jdGlvbiB1bmlxdWVCeShleHRyYWN0b3IsIC4uLmNvbGxlY3Rpb25zKSB7XG5cbiAgZXh0cmFjdG9yID0gdG9FeHRyYWN0b3IoZXh0cmFjdG9yKTtcblxuICBsZXQgZ3JvdXBlZCA9IHt9O1xuXG4gIGZvckVhY2goY29sbGVjdGlvbnMsIChjKSA9PiBncm91cEJ5KGMsIGV4dHJhY3RvciwgZ3JvdXBlZCkpO1xuXG4gIGxldCByZXN1bHQgPSBtYXAoZ3JvdXBlZCwgZnVuY3Rpb24odmFsLCBrZXkpIHtcbiAgICByZXR1cm4gdmFsWzBdO1xuICB9KTtcblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5cbmNvbnN0IHVuaW9uQnkgPSB1bmlxdWVCeTtcblxuXG5cbi8qKlxuICogU29ydCBjb2xsZWN0aW9uIGJ5IGNyaXRlcmlhLlxuICpcbiAqIEB0ZW1wbGF0ZSBUXG4gKlxuICogQHBhcmFtIHtDb2xsZWN0aW9uPFQ+fSBjb2xsZWN0aW9uXG4gKiBAcGFyYW0ge0V4dHJhY3RvcjxULCBudW1iZXIgfCBzdHJpbmc+fSBleHRyYWN0b3JcbiAqXG4gKiBAcmV0dXJuIHtBcnJheX1cbiAqL1xuZnVuY3Rpb24gc29ydEJ5KGNvbGxlY3Rpb24sIGV4dHJhY3Rvcikge1xuXG4gIGV4dHJhY3RvciA9IHRvRXh0cmFjdG9yKGV4dHJhY3Rvcik7XG5cbiAgbGV0IHNvcnRlZCA9IFtdO1xuXG4gIGZvckVhY2goY29sbGVjdGlvbiwgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgIGxldCBkaXNjID0gZXh0cmFjdG9yKHZhbHVlLCBrZXkpO1xuXG4gICAgbGV0IGVudHJ5ID0ge1xuICAgICAgZDogZGlzYyxcbiAgICAgIHY6IHZhbHVlXG4gICAgfTtcblxuICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IHNvcnRlZC5sZW5ndGg7IGlkeCsrKSB7XG4gICAgICBsZXQgeyBkIH0gPSBzb3J0ZWRbaWR4XTtcblxuICAgICAgaWYgKGRpc2MgPCBkKSB7XG4gICAgICAgIHNvcnRlZC5zcGxpY2UoaWR4LCAwLCBlbnRyeSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBub3QgaW5zZXJ0ZWQsIGFwcGVuZCAoISlcbiAgICBzb3J0ZWQucHVzaChlbnRyeSk7XG4gIH0pO1xuXG4gIHJldHVybiBtYXAoc29ydGVkLCAoZSkgPT4gZS52KTtcbn1cblxuXG4vKipcbiAqIENyZWF0ZSBhbiBvYmplY3QgcGF0dGVybiBtYXRjaGVyLlxuICpcbiAqIEBleGFtcGxlXG4gKlxuICogYGBgamF2YXNjcmlwdFxuICogY29uc3QgbWF0Y2hlciA9IG1hdGNoUGF0dGVybih7IGlkOiAxIH0pO1xuICpcbiAqIGxldCBlbGVtZW50ID0gZmluZChlbGVtZW50cywgbWF0Y2hlcik7XG4gKiBgYGBcbiAqXG4gKiBAdGVtcGxhdGUgVFxuICpcbiAqIEBwYXJhbSB7VH0gcGF0dGVyblxuICpcbiAqIEByZXR1cm4geyAoZWw6IGFueSkgPT4gIGJvb2xlYW4gfSBtYXRjaGVyRm5cbiAqL1xuZnVuY3Rpb24gbWF0Y2hQYXR0ZXJuKHBhdHRlcm4pIHtcblxuICByZXR1cm4gZnVuY3Rpb24oZWwpIHtcblxuICAgIHJldHVybiBldmVyeShwYXR0ZXJuLCBmdW5jdGlvbih2YWwsIGtleSkge1xuICAgICAgcmV0dXJuIGVsW2tleV0gPT09IHZhbDtcbiAgICB9KTtcblxuICB9O1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmcgfCAoKGU6IGFueSkgPT4gYW55KSB9IGV4dHJhY3RvclxuICpcbiAqIEByZXR1cm4geyAoZTogYW55KSA9PiBhbnkgfVxuICovXG5mdW5jdGlvbiB0b0V4dHJhY3RvcihleHRyYWN0b3IpIHtcblxuICAvKipcbiAgICogQHNhdGlzZmllcyB7IChlOiBhbnkpID0+IGFueSB9XG4gICAqL1xuICByZXR1cm4gaXNGdW5jdGlvbihleHRyYWN0b3IpID8gZXh0cmFjdG9yIDogKGUpID0+IHtcblxuICAgIC8vIEB0cy1pZ25vcmU6IGp1c3Qgd29ya3NcbiAgICByZXR1cm4gZVtleHRyYWN0b3JdO1xuICB9O1xufVxuXG5cbi8qKlxuICogQHRlbXBsYXRlIFRcbiAqIEBwYXJhbSB7TWF0Y2hlcjxUPn0gbWF0Y2hlclxuICpcbiAqIEByZXR1cm4ge01hdGNoRm48VD59XG4gKi9cbmZ1bmN0aW9uIHRvTWF0Y2hlcihtYXRjaGVyKSB7XG4gIHJldHVybiBpc0Z1bmN0aW9uKG1hdGNoZXIpID8gbWF0Y2hlciA6IChlKSA9PiB7XG4gICAgcmV0dXJuIGUgPT09IG1hdGNoZXI7XG4gIH07XG59XG5cblxuZnVuY3Rpb24gaWRlbnRpdHkoYXJnKSB7XG4gIHJldHVybiBhcmc7XG59XG5cbmZ1bmN0aW9uIHRvTnVtKGFyZykge1xuICByZXR1cm4gTnVtYmVyKGFyZyk7XG59XG5cbi8qIGdsb2JhbCBzZXRUaW1lb3V0IGNsZWFyVGltZW91dCAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHsge1xuICogICAoLi4uYXJnczogYW55W10pOiBhbnk7XG4gKiAgIGZsdXNoOiAoKSA9PiB2b2lkO1xuICogICBjYW5jZWw6ICgpID0+IHZvaWQ7XG4gKiB9IH0gRGVib3VuY2VkRnVuY3Rpb25cbiAqL1xuXG4vKipcbiAqIERlYm91bmNlIGZuLCBjYWxsaW5nIGl0IG9ubHkgb25jZSBpZiB0aGUgZ2l2ZW4gdGltZVxuICogZWxhcHNlZCBiZXR3ZWVuIGNhbGxzLlxuICpcbiAqIExvZGFzaC1zdHlsZSB0aGUgZnVuY3Rpb24gZXhwb3NlcyBtZXRob2RzIHRvIGAjY2xlYXJgXG4gKiBhbmQgYCNmbHVzaGAgdG8gY29udHJvbCBpbnRlcm5hbCBiZWhhdmlvci5cbiAqXG4gKiBAcGFyYW0gIHtGdW5jdGlvbn0gZm5cbiAqIEBwYXJhbSAge051bWJlcn0gdGltZW91dFxuICpcbiAqIEByZXR1cm4ge0RlYm91bmNlZEZ1bmN0aW9ufSBkZWJvdW5jZWQgZnVuY3Rpb25cbiAqL1xuZnVuY3Rpb24gZGVib3VuY2UoZm4sIHRpbWVvdXQpIHtcblxuICBsZXQgdGltZXI7XG5cbiAgbGV0IGxhc3RBcmdzO1xuICBsZXQgbGFzdFRoaXM7XG5cbiAgbGV0IGxhc3ROb3c7XG5cbiAgZnVuY3Rpb24gZmlyZShmb3JjZSkge1xuXG4gICAgbGV0IG5vdyA9IERhdGUubm93KCk7XG5cbiAgICBsZXQgc2NoZWR1bGVkRGlmZiA9IGZvcmNlID8gMCA6IChsYXN0Tm93ICsgdGltZW91dCkgLSBub3c7XG5cbiAgICBpZiAoc2NoZWR1bGVkRGlmZiA+IDApIHtcbiAgICAgIHJldHVybiBzY2hlZHVsZShzY2hlZHVsZWREaWZmKTtcbiAgICB9XG5cbiAgICBmbi5hcHBseShsYXN0VGhpcywgbGFzdEFyZ3MpO1xuXG4gICAgY2xlYXIoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNjaGVkdWxlKHRpbWVvdXQpIHtcbiAgICB0aW1lciA9IHNldFRpbWVvdXQoZmlyZSwgdGltZW91dCk7XG4gIH1cblxuICBmdW5jdGlvbiBjbGVhcigpIHtcbiAgICBpZiAodGltZXIpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgfVxuXG4gICAgdGltZXIgPSBsYXN0Tm93ID0gbGFzdEFyZ3MgPSBsYXN0VGhpcyA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZsdXNoKCkge1xuICAgIGlmICh0aW1lcikge1xuICAgICAgZmlyZSh0cnVlKTtcbiAgICB9XG5cbiAgICBjbGVhcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIEB0eXBlIHsgRGVib3VuY2VkRnVuY3Rpb24gfVxuICAgKi9cbiAgZnVuY3Rpb24gY2FsbGJhY2soLi4uYXJncykge1xuICAgIGxhc3ROb3cgPSBEYXRlLm5vdygpO1xuXG4gICAgbGFzdEFyZ3MgPSBhcmdzO1xuICAgIGxhc3RUaGlzID0gdGhpcztcblxuICAgIC8vIGVuc3VyZSBhbiBleGVjdXRpb24gaXMgc2NoZWR1bGVkXG4gICAgaWYgKCF0aW1lcikge1xuICAgICAgc2NoZWR1bGUodGltZW91dCk7XG4gICAgfVxuICB9XG5cbiAgY2FsbGJhY2suZmx1c2ggPSBmbHVzaDtcbiAgY2FsbGJhY2suY2FuY2VsID0gY2xlYXI7XG5cbiAgcmV0dXJuIGNhbGxiYWNrO1xufVxuXG4vKipcbiAqIFRocm90dGxlIGZuLCBjYWxsaW5nIGF0IG1vc3Qgb25jZVxuICogaW4gdGhlIGdpdmVuIGludGVydmFsLlxuICpcbiAqIEBwYXJhbSAge0Z1bmN0aW9ufSBmblxuICogQHBhcmFtICB7TnVtYmVyfSBpbnRlcnZhbFxuICpcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufSB0aHJvdHRsZWQgZnVuY3Rpb25cbiAqL1xuZnVuY3Rpb24gdGhyb3R0bGUoZm4sIGludGVydmFsKSB7XG4gIGxldCB0aHJvdHRsaW5nID0gZmFsc2U7XG5cbiAgcmV0dXJuIGZ1bmN0aW9uKC4uLmFyZ3MpIHtcblxuICAgIGlmICh0aHJvdHRsaW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZm4oLi4uYXJncyk7XG4gICAgdGhyb3R0bGluZyA9IHRydWU7XG5cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRocm90dGxpbmcgPSBmYWxzZTtcbiAgICB9LCBpbnRlcnZhbCk7XG4gIH07XG59XG5cbi8qKlxuICogQmluZCBmdW5jdGlvbiBhZ2FpbnN0IHRhcmdldCA8dGhpcz4uXG4gKlxuICogQHBhcmFtICB7RnVuY3Rpb259IGZuXG4gKiBAcGFyYW0gIHtPYmplY3R9ICAgdGFyZ2V0XG4gKlxuICogQHJldHVybiB7RnVuY3Rpb259IGJvdW5kIGZ1bmN0aW9uXG4gKi9cbmZ1bmN0aW9uIGJpbmQoZm4sIHRhcmdldCkge1xuICByZXR1cm4gZm4uYmluZCh0YXJnZXQpO1xufVxuXG4vKipcbiAqIENvbnZlbmllbmNlIHdyYXBwZXIgZm9yIGBPYmplY3QuYXNzaWduYC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdGFyZ2V0XG4gKiBAcGFyYW0gey4uLk9iamVjdH0gb3RoZXJzXG4gKlxuICogQHJldHVybiB7T2JqZWN0fSB0aGUgdGFyZ2V0XG4gKi9cbmZ1bmN0aW9uIGFzc2lnbih0YXJnZXQsIC4uLm90aGVycykge1xuICByZXR1cm4gT2JqZWN0LmFzc2lnbih0YXJnZXQsIC4uLm90aGVycyk7XG59XG5cbi8qKlxuICogU2V0cyBhIG5lc3RlZCBwcm9wZXJ0eSBvZiBhIGdpdmVuIG9iamVjdCB0byB0aGUgc3BlY2lmaWVkIHZhbHVlLlxuICpcbiAqIFRoaXMgbXV0YXRlcyB0aGUgb2JqZWN0IGFuZCByZXR1cm5zIGl0LlxuICpcbiAqIEB0ZW1wbGF0ZSBUXG4gKlxuICogQHBhcmFtIHtUfSB0YXJnZXQgVGhlIHRhcmdldCBvZiB0aGUgc2V0IG9wZXJhdGlvbi5cbiAqIEBwYXJhbSB7KHN0cmluZ3xudW1iZXIpW119IHBhdGggVGhlIHBhdGggdG8gdGhlIG5lc3RlZCB2YWx1ZS5cbiAqIEBwYXJhbSB7YW55fSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0LlxuICpcbiAqIEByZXR1cm4ge1R9XG4gKi9cbmZ1bmN0aW9uIHNldCh0YXJnZXQsIHBhdGgsIHZhbHVlKSB7XG5cbiAgbGV0IGN1cnJlbnRUYXJnZXQgPSB0YXJnZXQ7XG5cbiAgZm9yRWFjaChwYXRoLCBmdW5jdGlvbihrZXksIGlkeCkge1xuXG4gICAgaWYgKHR5cGVvZiBrZXkgIT09ICdudW1iZXInICYmIHR5cGVvZiBrZXkgIT09ICdzdHJpbmcnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2lsbGVnYWwga2V5IHR5cGU6ICcgKyB0eXBlb2Yga2V5ICsgJy4gS2V5IHNob3VsZCBiZSBvZiB0eXBlIG51bWJlciBvciBzdHJpbmcuJyk7XG4gICAgfVxuXG4gICAgaWYgKGtleSA9PT0gJ2NvbnN0cnVjdG9yJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbGxlZ2FsIGtleTogY29uc3RydWN0b3InKTtcbiAgICB9XG5cbiAgICBpZiAoa2V5ID09PSAnX19wcm90b19fJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbGxlZ2FsIGtleTogX19wcm90b19fJyk7XG4gICAgfVxuXG4gICAgbGV0IG5leHRLZXkgPSBwYXRoW2lkeCArIDFdO1xuICAgIGxldCBuZXh0VGFyZ2V0ID0gY3VycmVudFRhcmdldFtrZXldO1xuXG4gICAgaWYgKGlzRGVmaW5lZChuZXh0S2V5KSAmJiBpc05pbChuZXh0VGFyZ2V0KSkge1xuICAgICAgbmV4dFRhcmdldCA9IGN1cnJlbnRUYXJnZXRba2V5XSA9IGlzTmFOKCtuZXh0S2V5KSA/IHt9IDogW107XG4gICAgfVxuXG4gICAgaWYgKGlzVW5kZWZpbmVkKG5leHRLZXkpKSB7XG4gICAgICBpZiAoaXNVbmRlZmluZWQodmFsdWUpKSB7XG4gICAgICAgIGRlbGV0ZSBjdXJyZW50VGFyZ2V0W2tleV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdXJyZW50VGFyZ2V0W2tleV0gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY3VycmVudFRhcmdldCA9IG5leHRUYXJnZXQ7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gdGFyZ2V0O1xufVxuXG5cbi8qKlxuICogR2V0cyBhIG5lc3RlZCBwcm9wZXJ0eSBvZiBhIGdpdmVuIG9iamVjdC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdGFyZ2V0IFRoZSB0YXJnZXQgb2YgdGhlIGdldCBvcGVyYXRpb24uXG4gKiBAcGFyYW0geyhzdHJpbmd8bnVtYmVyKVtdfSBwYXRoIFRoZSBwYXRoIHRvIHRoZSBuZXN0ZWQgdmFsdWUuXG4gKiBAcGFyYW0ge2FueX0gW2RlZmF1bHRWYWx1ZV0gVGhlIHZhbHVlIHRvIHJldHVybiBpZiBubyB2YWx1ZSBleGlzdHMuXG4gKlxuICogQHJldHVybiB7YW55fVxuICovXG5mdW5jdGlvbiBnZXQodGFyZ2V0LCBwYXRoLCBkZWZhdWx0VmFsdWUpIHtcblxuICBsZXQgY3VycmVudFRhcmdldCA9IHRhcmdldDtcblxuICBmb3JFYWNoKHBhdGgsIGZ1bmN0aW9uKGtleSkge1xuXG4gICAgLy8gYWNjZXNzaW5nIG5pbCBwcm9wZXJ0eSB5aWVsZHMgPHVuZGVmaW5lZD5cbiAgICBpZiAoaXNOaWwoY3VycmVudFRhcmdldCkpIHtcbiAgICAgIGN1cnJlbnRUYXJnZXQgPSB1bmRlZmluZWQ7XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjdXJyZW50VGFyZ2V0ID0gY3VycmVudFRhcmdldFtrZXldO1xuICB9KTtcblxuICByZXR1cm4gaXNVbmRlZmluZWQoY3VycmVudFRhcmdldCkgPyBkZWZhdWx0VmFsdWUgOiBjdXJyZW50VGFyZ2V0O1xufVxuXG4vKipcbiAqIFBpY2sgcHJvcGVydGllcyBmcm9tIHRoZSBnaXZlbiB0YXJnZXQuXG4gKlxuICogQHRlbXBsYXRlIFRcbiAqIEB0ZW1wbGF0ZSB7YW55W119IFZcbiAqXG4gKiBAcGFyYW0ge1R9IHRhcmdldFxuICogQHBhcmFtIHtWfSBwcm9wZXJ0aWVzXG4gKlxuICogQHJldHVybiBQaWNrPFQsIFY+XG4gKi9cbmZ1bmN0aW9uIHBpY2sodGFyZ2V0LCBwcm9wZXJ0aWVzKSB7XG5cbiAgbGV0IHJlc3VsdCA9IHt9O1xuXG4gIGxldCBvYmogPSBPYmplY3QodGFyZ2V0KTtcblxuICBmb3JFYWNoKHByb3BlcnRpZXMsIGZ1bmN0aW9uKHByb3ApIHtcblxuICAgIGlmIChwcm9wIGluIG9iaikge1xuICAgICAgcmVzdWx0W3Byb3BdID0gdGFyZ2V0W3Byb3BdO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBQaWNrIGFsbCB0YXJnZXQgcHJvcGVydGllcywgZXhjbHVkaW5nIHRoZSBnaXZlbiBvbmVzLlxuICpcbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAdGVtcGxhdGUge2FueVtdfSBWXG4gKlxuICogQHBhcmFtIHtUfSB0YXJnZXRcbiAqIEBwYXJhbSB7Vn0gcHJvcGVydGllc1xuICpcbiAqIEByZXR1cm4ge09taXQ8VCwgVj59IHRhcmdldFxuICovXG5mdW5jdGlvbiBvbWl0KHRhcmdldCwgcHJvcGVydGllcykge1xuXG4gIGxldCByZXN1bHQgPSB7fTtcblxuICBsZXQgb2JqID0gT2JqZWN0KHRhcmdldCk7XG5cbiAgZm9yRWFjaChvYmosIGZ1bmN0aW9uKHByb3AsIGtleSkge1xuXG4gICAgaWYgKHByb3BlcnRpZXMuaW5kZXhPZihrZXkpID09PSAtMSkge1xuICAgICAgcmVzdWx0W2tleV0gPSBwcm9wO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBSZWN1cnNpdmVseSBtZXJnZSBgLi4uc291cmNlc2AgaW50byBnaXZlbiB0YXJnZXQuXG4gKlxuICogRG9lcyBzdXBwb3J0IG1lcmdpbmcgb2JqZWN0czsgZG9lcyBub3Qgc3VwcG9ydCBtZXJnaW5nIGFycmF5cy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdGFyZ2V0XG4gKiBAcGFyYW0gey4uLk9iamVjdH0gc291cmNlc1xuICpcbiAqIEByZXR1cm4ge09iamVjdH0gdGhlIHRhcmdldFxuICovXG5mdW5jdGlvbiBtZXJnZSh0YXJnZXQsIC4uLnNvdXJjZXMpIHtcblxuICBpZiAoIXNvdXJjZXMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuXG4gIGZvckVhY2goc291cmNlcywgZnVuY3Rpb24oc291cmNlKSB7XG5cbiAgICAvLyBza2lwIG5vbi1vYmogc291cmNlcywgaS5lLiBudWxsXG4gICAgaWYgKCFzb3VyY2UgfHwgIWlzT2JqZWN0KHNvdXJjZSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBmb3JFYWNoKHNvdXJjZSwgZnVuY3Rpb24oc291cmNlVmFsLCBrZXkpIHtcblxuICAgICAgaWYgKGtleSA9PT0gJ19fcHJvdG9fXycpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBsZXQgdGFyZ2V0VmFsID0gdGFyZ2V0W2tleV07XG5cbiAgICAgIGlmIChpc09iamVjdChzb3VyY2VWYWwpKSB7XG5cbiAgICAgICAgaWYgKCFpc09iamVjdCh0YXJnZXRWYWwpKSB7XG5cbiAgICAgICAgICAvLyBvdmVycmlkZSB0YXJnZXRba2V5XSB3aXRoIG9iamVjdFxuICAgICAgICAgIHRhcmdldFZhbCA9IHt9O1xuICAgICAgICB9XG5cbiAgICAgICAgdGFyZ2V0W2tleV0gPSBtZXJnZSh0YXJnZXRWYWwsIHNvdXJjZVZhbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVZhbDtcbiAgICAgIH1cblxuICAgIH0pO1xuICB9KTtcblxuICByZXR1cm4gdGFyZ2V0O1xufVxuXG5leHBvcnQgeyBhc3NpZ24sIGJpbmQsIGRlYm91bmNlLCBlbnN1cmVBcnJheSwgZXZlcnksIGZpbHRlciwgZmluZCwgZmluZEluZGV4LCBmbGF0dGVuLCBmb3JFYWNoLCBnZXQsIGdyb3VwQnksIGhhcywgaXNBcnJheSwgaXNEZWZpbmVkLCBpc0Z1bmN0aW9uLCBpc05pbCwgaXNOdW1iZXIsIGlzT2JqZWN0LCBpc1N0cmluZywgaXNVbmRlZmluZWQsIGtleXMsIG1hcCwgbWF0Y2hQYXR0ZXJuLCBtZXJnZSwgb21pdCwgcGljaywgcmVkdWNlLCBzZXQsIHNpemUsIHNvbWUsIHNvcnRCeSwgdGhyb3R0bGUsIHVuaW9uQnksIHVuaXF1ZUJ5LCB2YWx1ZXMsIHdpdGhvdXQgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../node_modules/@bpmn-io/form-js-editor/node_modules/min-dash/dist/index.esm.js\n\n}");

/***/ }),

/***/ "../node_modules/@bpmn-io/form-js-editor/node_modules/min-dom/dist/index.esm.js":
/*!**************************************************************************************!*\
  !*** ../node_modules/@bpmn-io/form-js-editor/node_modules/min-dom/dist/index.esm.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   assignStyle: () => (/* binding */ assign),\n/* harmony export */   attr: () => (/* binding */ attr),\n/* harmony export */   classes: () => (/* binding */ classes),\n/* harmony export */   clear: () => (/* binding */ clear),\n/* harmony export */   closest: () => (/* binding */ closest),\n/* harmony export */   delegate: () => (/* binding */ delegate),\n/* harmony export */   domify: () => (/* binding */ domify$1),\n/* harmony export */   event: () => (/* binding */ event),\n/* harmony export */   matches: () => (/* binding */ matches),\n/* harmony export */   query: () => (/* binding */ query),\n/* harmony export */   queryAll: () => (/* binding */ all),\n/* harmony export */   remove: () => (/* binding */ remove)\n/* harmony export */ });\nfunction _mergeNamespaces(n, m) {\n  m.forEach(function (e) {\n    e && typeof e !== 'string' && !Array.isArray(e) && Object.keys(e).forEach(function (k) {\n      if (k !== 'default' && !(k in n)) {\n        var d = Object.getOwnPropertyDescriptor(e, k);\n        Object.defineProperty(n, k, d.get ? d : {\n          enumerable: true,\n          get: function () { return e[k]; }\n        });\n      }\n    });\n  });\n  return Object.freeze(n);\n}\n\n/**\n * Flatten array, one level deep.\n *\n * @template T\n *\n * @param {T[][] | T[] | null} [arr]\n *\n * @return {T[]}\n */\n\nconst nativeToString = Object.prototype.toString;\nconst nativeHasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction isUndefined(obj) {\n  return obj === undefined;\n}\n\nfunction isArray(obj) {\n  return nativeToString.call(obj) === '[object Array]';\n}\n\n/**\n * Return true, if target owns a property with the given key.\n *\n * @param {Object} target\n * @param {String} key\n *\n * @return {Boolean}\n */\nfunction has(target, key) {\n  return nativeHasOwnProperty.call(target, key);\n}\n\n\n/**\n * Iterate over collection; returning something\n * (non-undefined) will stop iteration.\n *\n * @template T\n * @param {Collection<T>} collection\n * @param { ((item: T, idx: number) => (boolean|void)) | ((item: T, key: string) => (boolean|void)) } iterator\n *\n * @return {T} return result that stopped the iteration\n */\nfunction forEach(collection, iterator) {\n\n  let val,\n      result;\n\n  if (isUndefined(collection)) {\n    return;\n  }\n\n  const convertKey = isArray(collection) ? toNum : identity;\n\n  for (let key in collection) {\n\n    if (has(collection, key)) {\n      val = collection[key];\n\n      result = iterator(val, convertKey(key));\n\n      if (result === false) {\n        return val;\n      }\n    }\n  }\n}\n\n\nfunction identity(arg) {\n  return arg;\n}\n\nfunction toNum(arg) {\n  return Number(arg);\n}\n\n/**\n * Assigns style attributes in a style-src compliant way.\n *\n * @param {Element} element\n * @param {...Object} styleSources\n *\n * @return {Element} the element\n */\nfunction assign(element, ...styleSources) {\n  const target = element.style;\n\n  forEach(styleSources, function(style) {\n    if (!style) {\n      return;\n    }\n\n    forEach(style, function(value, key) {\n      target[key] = value;\n    });\n  });\n\n  return element;\n}\n\n/**\n * Set attribute `name` to `val`, or get attr `name`.\n *\n * @param {Element} el\n * @param {String} name\n * @param {String} [val]\n * @api public\n */\nfunction attr(el, name, val) {\n\n  // get\n  if (arguments.length == 2) {\n    return el.getAttribute(name);\n  }\n\n  // remove\n  if (val === null) {\n    return el.removeAttribute(name);\n  }\n\n  // set\n  el.setAttribute(name, val);\n\n  return el;\n}\n\n/**\n * Taken from https://github.com/component/classes\n *\n * Without the component bits.\n */\n\n/**\n * toString reference.\n */\n\nconst toString = Object.prototype.toString;\n\n/**\n * Wrap `el` in a `ClassList`.\n *\n * @param {Element} el\n * @return {ClassList}\n * @api public\n */\n\nfunction classes(el) {\n  return new ClassList(el);\n}\n\n/**\n * Initialize a new ClassList for `el`.\n *\n * @param {Element} el\n * @api private\n */\n\nfunction ClassList(el) {\n  if (!el || !el.nodeType) {\n    throw new Error('A DOM element reference is required');\n  }\n  this.el = el;\n  this.list = el.classList;\n}\n\n/**\n * Add class `name` if not already present.\n *\n * @param {String} name\n * @return {ClassList}\n * @api public\n */\n\nClassList.prototype.add = function(name) {\n  this.list.add(name);\n  return this;\n};\n\n/**\n * Remove class `name` when present, or\n * pass a regular expression to remove\n * any which match.\n *\n * @param {String|RegExp} name\n * @return {ClassList}\n * @api public\n */\n\nClassList.prototype.remove = function(name) {\n  if ('[object RegExp]' == toString.call(name)) {\n    return this.removeMatching(name);\n  }\n\n  this.list.remove(name);\n  return this;\n};\n\n/**\n * Remove all classes matching `re`.\n *\n * @param {RegExp} re\n * @return {ClassList}\n * @api private\n */\n\nClassList.prototype.removeMatching = function(re) {\n  const arr = this.array();\n  for (let i = 0; i < arr.length; i++) {\n    if (re.test(arr[i])) {\n      this.remove(arr[i]);\n    }\n  }\n  return this;\n};\n\n/**\n * Toggle class `name`, can force state via `force`.\n *\n * For browsers that support classList, but do not support `force` yet,\n * the mistake will be detected and corrected.\n *\n * @param {String} name\n * @param {Boolean} force\n * @return {ClassList}\n * @api public\n */\n\nClassList.prototype.toggle = function(name, force) {\n  if ('undefined' !== typeof force) {\n    if (force !== this.list.toggle(name, force)) {\n      this.list.toggle(name); // toggle again to correct\n    }\n  } else {\n    this.list.toggle(name);\n  }\n  return this;\n};\n\n/**\n * Return an array of classes.\n *\n * @return {Array}\n * @api public\n */\n\nClassList.prototype.array = function() {\n  return Array.from(this.list);\n};\n\n/**\n * Check if class `name` is present.\n *\n * @param {String} name\n * @return {ClassList}\n * @api public\n */\n\nClassList.prototype.has =\nClassList.prototype.contains = function(name) {\n  return this.list.contains(name);\n};\n\n/**\n * Clear utility\n */\n\n/**\n * Removes all children from the given element\n *\n * @param {Element} element\n *\n * @return {Element} the element (for chaining)\n */\nfunction clear(element) {\n  var child;\n\n  while ((child = element.firstChild)) {\n    element.removeChild(child);\n  }\n\n  return element;\n}\n\n/**\n * Closest\n *\n * @param {Element} el\n * @param {string} selector\n * @param {boolean} checkYourSelf (optional)\n */\nfunction closest(element, selector, checkYourSelf) {\n  var actualElement = checkYourSelf ? element : element.parentNode;\n\n  return actualElement && typeof actualElement.closest === 'function' && actualElement.closest(selector) || null;\n}\n\nvar componentEvent = {};\n\nvar bind$1, unbind$1, prefix;\n\nfunction detect () {\n  bind$1 = window.addEventListener ? 'addEventListener' : 'attachEvent';\n  unbind$1 = window.removeEventListener ? 'removeEventListener' : 'detachEvent';\n  prefix = bind$1 !== 'addEventListener' ? 'on' : '';\n}\n\n/**\n * Bind `el` event `type` to `fn`.\n *\n * @param {Element} el\n * @param {String} type\n * @param {Function} fn\n * @param {Boolean} capture\n * @return {Function}\n * @api public\n */\n\nvar bind_1 = componentEvent.bind = function(el, type, fn, capture){\n  if (!bind$1) detect();\n  el[bind$1](prefix + type, fn, capture || false);\n  return fn;\n};\n\n/**\n * Unbind `el` event `type`'s callback `fn`.\n *\n * @param {Element} el\n * @param {String} type\n * @param {Function} fn\n * @param {Boolean} capture\n * @return {Function}\n * @api public\n */\n\nvar unbind_1 = componentEvent.unbind = function(el, type, fn, capture){\n  if (!unbind$1) detect();\n  el[unbind$1](prefix + type, fn, capture || false);\n  return fn;\n};\n\nvar event = /*#__PURE__*/_mergeNamespaces({\n  __proto__: null,\n  bind: bind_1,\n  unbind: unbind_1,\n  'default': componentEvent\n}, [componentEvent]);\n\n/**\n * Module dependencies.\n */\n\n/**\n * Delegate event `type` to `selector`\n * and invoke `fn(e)`. A callback function\n * is returned which may be passed to `.unbind()`.\n *\n * @param {Element} el\n * @param {String} selector\n * @param {String} type\n * @param {Function} fn\n * @param {Boolean} capture\n * @return {Function}\n * @api public\n */\n\n// Some events don't bubble, so we want to bind to the capture phase instead\n// when delegating.\nvar forceCaptureEvents = [ 'focus', 'blur' ];\n\nfunction bind(el, selector, type, fn, capture) {\n  if (forceCaptureEvents.indexOf(type) !== -1) {\n    capture = true;\n  }\n\n  return event.bind(el, type, function(e) {\n    var target = e.target || e.srcElement;\n    e.delegateTarget = closest(target, selector, true);\n    if (e.delegateTarget) {\n      fn.call(el, e);\n    }\n  }, capture);\n}\n\n/**\n * Unbind event `type`'s callback `fn`.\n *\n * @param {Element} el\n * @param {String} type\n * @param {Function} fn\n * @param {Boolean} capture\n * @api public\n */\nfunction unbind(el, type, fn, capture) {\n  if (forceCaptureEvents.indexOf(type) !== -1) {\n    capture = true;\n  }\n\n  return event.unbind(el, type, fn, capture);\n}\n\nvar delegate = {\n  bind,\n  unbind\n};\n\n/**\n * Expose `parse`.\n */\n\nvar domify = parse;\n\n/**\n * Tests for browser support.\n */\n\nvar innerHTMLBug = false;\nvar bugTestDiv;\nif (typeof document !== 'undefined') {\n  bugTestDiv = document.createElement('div');\n  // Setup\n  bugTestDiv.innerHTML = '  <link/><table></table><a href=\"/a\">a</a><input type=\"checkbox\"/>';\n  // Make sure that link elements get serialized correctly by innerHTML\n  // This requires a wrapper element in IE\n  innerHTMLBug = !bugTestDiv.getElementsByTagName('link').length;\n  bugTestDiv = undefined;\n}\n\n/**\n * Wrap map from jquery.\n */\n\nvar map = {\n  legend: [1, '<fieldset>', '</fieldset>'],\n  tr: [2, '<table><tbody>', '</tbody></table>'],\n  col: [2, '<table><tbody></tbody><colgroup>', '</colgroup></table>'],\n  // for script/link/style tags to work in IE6-8, you have to wrap\n  // in a div with a non-whitespace character in front, ha!\n  _default: innerHTMLBug ? [1, 'X<div>', '</div>'] : [0, '', '']\n};\n\nmap.td =\nmap.th = [3, '<table><tbody><tr>', '</tr></tbody></table>'];\n\nmap.option =\nmap.optgroup = [1, '<select multiple=\"multiple\">', '</select>'];\n\nmap.thead =\nmap.tbody =\nmap.colgroup =\nmap.caption =\nmap.tfoot = [1, '<table>', '</table>'];\n\nmap.polyline =\nmap.ellipse =\nmap.polygon =\nmap.circle =\nmap.text =\nmap.line =\nmap.path =\nmap.rect =\nmap.g = [1, '<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\">','</svg>'];\n\n/**\n * Parse `html` and return a DOM Node instance, which could be a TextNode,\n * HTML DOM Node of some kind (<div> for example), or a DocumentFragment\n * instance, depending on the contents of the `html` string.\n *\n * @param {String} html - HTML string to \"domify\"\n * @param {Document} doc - The `document` instance to create the Node for\n * @return {DOMNode} the TextNode, DOM Node, or DocumentFragment instance\n * @api private\n */\n\nfunction parse(html, doc) {\n  if ('string' != typeof html) throw new TypeError('String expected');\n\n  // default to the global `document` object\n  if (!doc) doc = document;\n\n  // tag name\n  var m = /<([\\w:]+)/.exec(html);\n  if (!m) return doc.createTextNode(html);\n\n  html = html.replace(/^\\s+|\\s+$/g, ''); // Remove leading/trailing whitespace\n\n  var tag = m[1];\n\n  // body support\n  if (tag == 'body') {\n    var el = doc.createElement('html');\n    el.innerHTML = html;\n    return el.removeChild(el.lastChild);\n  }\n\n  // wrap map\n  var wrap = Object.prototype.hasOwnProperty.call(map, tag) ? map[tag] : map._default;\n  var depth = wrap[0];\n  var prefix = wrap[1];\n  var suffix = wrap[2];\n  var el = doc.createElement('div');\n  el.innerHTML = prefix + html + suffix;\n  while (depth--) el = el.lastChild;\n\n  // one element\n  if (el.firstChild == el.lastChild) {\n    return el.removeChild(el.firstChild);\n  }\n\n  // several elements\n  var fragment = doc.createDocumentFragment();\n  while (el.firstChild) {\n    fragment.appendChild(el.removeChild(el.firstChild));\n  }\n\n  return fragment;\n}\n\nvar domify$1 = domify;\n\n/**\n * @param { HTMLElement } element\n * @param { String } selector\n *\n * @return { boolean }\n */\nfunction matches(element, selector) {\n  return element && typeof element.matches === 'function' && element.matches(selector) || false;\n}\n\nfunction query(selector, el) {\n  el = el || document;\n\n  return el.querySelector(selector);\n}\n\nfunction all(selector, el) {\n  el = el || document;\n\n  return el.querySelectorAll(selector);\n}\n\nfunction remove(el) {\n  el.parentNode && el.parentNode.removeChild(el);\n}\n\n\n//# sourceMappingURL=index.esm.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vbm9kZV9tb2R1bGVzL0BicG1uLWlvL2Zvcm0tanMtZWRpdG9yL25vZGVfbW9kdWxlcy9taW4tZG9tL2Rpc3QvaW5kZXguZXNtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxvQkFBb0I7QUFDL0I7QUFDQSxZQUFZO0FBQ1o7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkI7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0EsNEJBQTRCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBLFdBQVcsZUFBZTtBQUMxQixZQUFZLDBGQUEwRjtBQUN0RztBQUNBLFlBQVksR0FBRztBQUNmO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxTQUFTO0FBQ3BCLFdBQVcsV0FBVztBQUN0QjtBQUNBLFlBQVksU0FBUztBQUNyQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxTQUFTO0FBQ3BCLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFNBQVM7QUFDcEIsWUFBWTtBQUNaO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsU0FBUztBQUNwQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixZQUFZO0FBQ1o7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxlQUFlO0FBQzFCLFlBQVk7QUFDWjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsWUFBWTtBQUNaO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGtCQUFrQixnQkFBZ0I7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLFNBQVM7QUFDcEIsWUFBWTtBQUNaO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsOEJBQThCO0FBQzlCO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsWUFBWTtBQUNaO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsU0FBUztBQUNwQjtBQUNBLFlBQVksU0FBUztBQUNyQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxTQUFTO0FBQ3BCLFdBQVcsUUFBUTtBQUNuQixXQUFXLFNBQVM7QUFDcEI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFNBQVM7QUFDcEIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsVUFBVTtBQUNyQixXQUFXLFNBQVM7QUFDcEIsWUFBWTtBQUNaO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFNBQVM7QUFDcEIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsVUFBVTtBQUNyQixXQUFXLFNBQVM7QUFDcEIsWUFBWTtBQUNaO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsU0FBUztBQUNwQixXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsVUFBVTtBQUNyQixXQUFXLFNBQVM7QUFDcEIsWUFBWTtBQUNaO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFNBQVM7QUFDcEIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsVUFBVTtBQUNyQixXQUFXLFNBQVM7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsVUFBVTtBQUNyQixZQUFZLFNBQVM7QUFDckI7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLHlDQUF5Qzs7QUFFekM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsWUFBWSxjQUFjO0FBQzFCLFlBQVksU0FBUztBQUNyQjtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFOEk7QUFDOUkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYW11bmRhLW1vZGVsZXItY2xpZW50Ly4uL25vZGVfbW9kdWxlcy9AYnBtbi1pby9mb3JtLWpzLWVkaXRvci9ub2RlX21vZHVsZXMvbWluLWRvbS9kaXN0L2luZGV4LmVzbS5qcz82MDk5Il0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIF9tZXJnZU5hbWVzcGFjZXMobiwgbSkge1xuICBtLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICBlICYmIHR5cGVvZiBlICE9PSAnc3RyaW5nJyAmJiAhQXJyYXkuaXNBcnJheShlKSAmJiBPYmplY3Qua2V5cyhlKS5mb3JFYWNoKGZ1bmN0aW9uIChrKSB7XG4gICAgICBpZiAoayAhPT0gJ2RlZmF1bHQnICYmICEoayBpbiBuKSkge1xuICAgICAgICB2YXIgZCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSwgayk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLCBrLCBkLmdldCA/IGQgOiB7XG4gICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGVba107IH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuICByZXR1cm4gT2JqZWN0LmZyZWV6ZShuKTtcbn1cblxuLyoqXG4gKiBGbGF0dGVuIGFycmF5LCBvbmUgbGV2ZWwgZGVlcC5cbiAqXG4gKiBAdGVtcGxhdGUgVFxuICpcbiAqIEBwYXJhbSB7VFtdW10gfCBUW10gfCBudWxsfSBbYXJyXVxuICpcbiAqIEByZXR1cm4ge1RbXX1cbiAqL1xuXG5jb25zdCBuYXRpdmVUb1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5jb25zdCBuYXRpdmVIYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cbmZ1bmN0aW9uIGlzVW5kZWZpbmVkKG9iaikge1xuICByZXR1cm4gb2JqID09PSB1bmRlZmluZWQ7XG59XG5cbmZ1bmN0aW9uIGlzQXJyYXkob2JqKSB7XG4gIHJldHVybiBuYXRpdmVUb1N0cmluZy5jYWxsKG9iaikgPT09ICdbb2JqZWN0IEFycmF5XSc7XG59XG5cbi8qKlxuICogUmV0dXJuIHRydWUsIGlmIHRhcmdldCBvd25zIGEgcHJvcGVydHkgd2l0aCB0aGUgZ2l2ZW4ga2V5LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5mdW5jdGlvbiBoYXModGFyZ2V0LCBrZXkpIHtcbiAgcmV0dXJuIG5hdGl2ZUhhc093blByb3BlcnR5LmNhbGwodGFyZ2V0LCBrZXkpO1xufVxuXG5cbi8qKlxuICogSXRlcmF0ZSBvdmVyIGNvbGxlY3Rpb247IHJldHVybmluZyBzb21ldGhpbmdcbiAqIChub24tdW5kZWZpbmVkKSB3aWxsIHN0b3AgaXRlcmF0aW9uLlxuICpcbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAcGFyYW0ge0NvbGxlY3Rpb248VD59IGNvbGxlY3Rpb25cbiAqIEBwYXJhbSB7ICgoaXRlbTogVCwgaWR4OiBudW1iZXIpID0+IChib29sZWFufHZvaWQpKSB8ICgoaXRlbTogVCwga2V5OiBzdHJpbmcpID0+IChib29sZWFufHZvaWQpKSB9IGl0ZXJhdG9yXG4gKlxuICogQHJldHVybiB7VH0gcmV0dXJuIHJlc3VsdCB0aGF0IHN0b3BwZWQgdGhlIGl0ZXJhdGlvblxuICovXG5mdW5jdGlvbiBmb3JFYWNoKGNvbGxlY3Rpb24sIGl0ZXJhdG9yKSB7XG5cbiAgbGV0IHZhbCxcbiAgICAgIHJlc3VsdDtcblxuICBpZiAoaXNVbmRlZmluZWQoY29sbGVjdGlvbikpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBjb252ZXJ0S2V5ID0gaXNBcnJheShjb2xsZWN0aW9uKSA/IHRvTnVtIDogaWRlbnRpdHk7XG5cbiAgZm9yIChsZXQga2V5IGluIGNvbGxlY3Rpb24pIHtcblxuICAgIGlmIChoYXMoY29sbGVjdGlvbiwga2V5KSkge1xuICAgICAgdmFsID0gY29sbGVjdGlvbltrZXldO1xuXG4gICAgICByZXN1bHQgPSBpdGVyYXRvcih2YWwsIGNvbnZlcnRLZXkoa2V5KSk7XG5cbiAgICAgIGlmIChyZXN1bHQgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cblxuZnVuY3Rpb24gaWRlbnRpdHkoYXJnKSB7XG4gIHJldHVybiBhcmc7XG59XG5cbmZ1bmN0aW9uIHRvTnVtKGFyZykge1xuICByZXR1cm4gTnVtYmVyKGFyZyk7XG59XG5cbi8qKlxuICogQXNzaWducyBzdHlsZSBhdHRyaWJ1dGVzIGluIGEgc3R5bGUtc3JjIGNvbXBsaWFudCB3YXkuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0gey4uLk9iamVjdH0gc3R5bGVTb3VyY2VzXG4gKlxuICogQHJldHVybiB7RWxlbWVudH0gdGhlIGVsZW1lbnRcbiAqL1xuZnVuY3Rpb24gYXNzaWduKGVsZW1lbnQsIC4uLnN0eWxlU291cmNlcykge1xuICBjb25zdCB0YXJnZXQgPSBlbGVtZW50LnN0eWxlO1xuXG4gIGZvckVhY2goc3R5bGVTb3VyY2VzLCBmdW5jdGlvbihzdHlsZSkge1xuICAgIGlmICghc3R5bGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBmb3JFYWNoKHN0eWxlLCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICB0YXJnZXRba2V5XSA9IHZhbHVlO1xuICAgIH0pO1xuICB9KTtcblxuICByZXR1cm4gZWxlbWVudDtcbn1cblxuLyoqXG4gKiBTZXQgYXR0cmlidXRlIGBuYW1lYCB0byBgdmFsYCwgb3IgZ2V0IGF0dHIgYG5hbWVgLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gKiBAcGFyYW0ge1N0cmluZ30gW3ZhbF1cbiAqIEBhcGkgcHVibGljXG4gKi9cbmZ1bmN0aW9uIGF0dHIoZWwsIG5hbWUsIHZhbCkge1xuXG4gIC8vIGdldFxuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PSAyKSB7XG4gICAgcmV0dXJuIGVsLmdldEF0dHJpYnV0ZShuYW1lKTtcbiAgfVxuXG4gIC8vIHJlbW92ZVxuICBpZiAodmFsID09PSBudWxsKSB7XG4gICAgcmV0dXJuIGVsLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcbiAgfVxuXG4gIC8vIHNldFxuICBlbC5zZXRBdHRyaWJ1dGUobmFtZSwgdmFsKTtcblxuICByZXR1cm4gZWw7XG59XG5cbi8qKlxuICogVGFrZW4gZnJvbSBodHRwczovL2dpdGh1Yi5jb20vY29tcG9uZW50L2NsYXNzZXNcbiAqXG4gKiBXaXRob3V0IHRoZSBjb21wb25lbnQgYml0cy5cbiAqL1xuXG4vKipcbiAqIHRvU3RyaW5nIHJlZmVyZW5jZS5cbiAqL1xuXG5jb25zdCB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5cbi8qKlxuICogV3JhcCBgZWxgIGluIGEgYENsYXNzTGlzdGAuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHJldHVybiB7Q2xhc3NMaXN0fVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5mdW5jdGlvbiBjbGFzc2VzKGVsKSB7XG4gIHJldHVybiBuZXcgQ2xhc3NMaXN0KGVsKTtcbn1cblxuLyoqXG4gKiBJbml0aWFsaXplIGEgbmV3IENsYXNzTGlzdCBmb3IgYGVsYC5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBDbGFzc0xpc3QoZWwpIHtcbiAgaWYgKCFlbCB8fCAhZWwubm9kZVR5cGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0EgRE9NIGVsZW1lbnQgcmVmZXJlbmNlIGlzIHJlcXVpcmVkJyk7XG4gIH1cbiAgdGhpcy5lbCA9IGVsO1xuICB0aGlzLmxpc3QgPSBlbC5jbGFzc0xpc3Q7XG59XG5cbi8qKlxuICogQWRkIGNsYXNzIGBuYW1lYCBpZiBub3QgYWxyZWFkeSBwcmVzZW50LlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gKiBAcmV0dXJuIHtDbGFzc0xpc3R9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbkNsYXNzTGlzdC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24obmFtZSkge1xuICB0aGlzLmxpc3QuYWRkKG5hbWUpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogUmVtb3ZlIGNsYXNzIGBuYW1lYCB3aGVuIHByZXNlbnQsIG9yXG4gKiBwYXNzIGEgcmVndWxhciBleHByZXNzaW9uIHRvIHJlbW92ZVxuICogYW55IHdoaWNoIG1hdGNoLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfFJlZ0V4cH0gbmFtZVxuICogQHJldHVybiB7Q2xhc3NMaXN0fVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5DbGFzc0xpc3QucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgaWYgKCdbb2JqZWN0IFJlZ0V4cF0nID09IHRvU3RyaW5nLmNhbGwobmFtZSkpIHtcbiAgICByZXR1cm4gdGhpcy5yZW1vdmVNYXRjaGluZyhuYW1lKTtcbiAgfVxuXG4gIHRoaXMubGlzdC5yZW1vdmUobmFtZSk7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBSZW1vdmUgYWxsIGNsYXNzZXMgbWF0Y2hpbmcgYHJlYC5cbiAqXG4gKiBAcGFyYW0ge1JlZ0V4cH0gcmVcbiAqIEByZXR1cm4ge0NsYXNzTGlzdH1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbkNsYXNzTGlzdC5wcm90b3R5cGUucmVtb3ZlTWF0Y2hpbmcgPSBmdW5jdGlvbihyZSkge1xuICBjb25zdCBhcnIgPSB0aGlzLmFycmF5KCk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKHJlLnRlc3QoYXJyW2ldKSkge1xuICAgICAgdGhpcy5yZW1vdmUoYXJyW2ldKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFRvZ2dsZSBjbGFzcyBgbmFtZWAsIGNhbiBmb3JjZSBzdGF0ZSB2aWEgYGZvcmNlYC5cbiAqXG4gKiBGb3IgYnJvd3NlcnMgdGhhdCBzdXBwb3J0IGNsYXNzTGlzdCwgYnV0IGRvIG5vdCBzdXBwb3J0IGBmb3JjZWAgeWV0LFxuICogdGhlIG1pc3Rha2Ugd2lsbCBiZSBkZXRlY3RlZCBhbmQgY29ycmVjdGVkLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGZvcmNlXG4gKiBAcmV0dXJuIHtDbGFzc0xpc3R9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbkNsYXNzTGlzdC5wcm90b3R5cGUudG9nZ2xlID0gZnVuY3Rpb24obmFtZSwgZm9yY2UpIHtcbiAgaWYgKCd1bmRlZmluZWQnICE9PSB0eXBlb2YgZm9yY2UpIHtcbiAgICBpZiAoZm9yY2UgIT09IHRoaXMubGlzdC50b2dnbGUobmFtZSwgZm9yY2UpKSB7XG4gICAgICB0aGlzLmxpc3QudG9nZ2xlKG5hbWUpOyAvLyB0b2dnbGUgYWdhaW4gdG8gY29ycmVjdFxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB0aGlzLmxpc3QudG9nZ2xlKG5hbWUpO1xuICB9XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBSZXR1cm4gYW4gYXJyYXkgb2YgY2xhc3Nlcy5cbiAqXG4gKiBAcmV0dXJuIHtBcnJheX1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuQ2xhc3NMaXN0LnByb3RvdHlwZS5hcnJheSA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmxpc3QpO1xufTtcblxuLyoqXG4gKiBDaGVjayBpZiBjbGFzcyBgbmFtZWAgaXMgcHJlc2VudC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICogQHJldHVybiB7Q2xhc3NMaXN0fVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5DbGFzc0xpc3QucHJvdG90eXBlLmhhcyA9XG5DbGFzc0xpc3QucHJvdG90eXBlLmNvbnRhaW5zID0gZnVuY3Rpb24obmFtZSkge1xuICByZXR1cm4gdGhpcy5saXN0LmNvbnRhaW5zKG5hbWUpO1xufTtcblxuLyoqXG4gKiBDbGVhciB1dGlsaXR5XG4gKi9cblxuLyoqXG4gKiBSZW1vdmVzIGFsbCBjaGlsZHJlbiBmcm9tIHRoZSBnaXZlbiBlbGVtZW50XG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50XG4gKlxuICogQHJldHVybiB7RWxlbWVudH0gdGhlIGVsZW1lbnQgKGZvciBjaGFpbmluZylcbiAqL1xuZnVuY3Rpb24gY2xlYXIoZWxlbWVudCkge1xuICB2YXIgY2hpbGQ7XG5cbiAgd2hpbGUgKChjaGlsZCA9IGVsZW1lbnQuZmlyc3RDaGlsZCkpIHtcbiAgICBlbGVtZW50LnJlbW92ZUNoaWxkKGNoaWxkKTtcbiAgfVxuXG4gIHJldHVybiBlbGVtZW50O1xufVxuXG4vKipcbiAqIENsb3Nlc3RcbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge3N0cmluZ30gc2VsZWN0b3JcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gY2hlY2tZb3VyU2VsZiAob3B0aW9uYWwpXG4gKi9cbmZ1bmN0aW9uIGNsb3Nlc3QoZWxlbWVudCwgc2VsZWN0b3IsIGNoZWNrWW91clNlbGYpIHtcbiAgdmFyIGFjdHVhbEVsZW1lbnQgPSBjaGVja1lvdXJTZWxmID8gZWxlbWVudCA6IGVsZW1lbnQucGFyZW50Tm9kZTtcblxuICByZXR1cm4gYWN0dWFsRWxlbWVudCAmJiB0eXBlb2YgYWN0dWFsRWxlbWVudC5jbG9zZXN0ID09PSAnZnVuY3Rpb24nICYmIGFjdHVhbEVsZW1lbnQuY2xvc2VzdChzZWxlY3RvcikgfHwgbnVsbDtcbn1cblxudmFyIGNvbXBvbmVudEV2ZW50ID0ge307XG5cbnZhciBiaW5kJDEsIHVuYmluZCQxLCBwcmVmaXg7XG5cbmZ1bmN0aW9uIGRldGVjdCAoKSB7XG4gIGJpbmQkMSA9IHdpbmRvdy5hZGRFdmVudExpc3RlbmVyID8gJ2FkZEV2ZW50TGlzdGVuZXInIDogJ2F0dGFjaEV2ZW50JztcbiAgdW5iaW5kJDEgPSB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lciA/ICdyZW1vdmVFdmVudExpc3RlbmVyJyA6ICdkZXRhY2hFdmVudCc7XG4gIHByZWZpeCA9IGJpbmQkMSAhPT0gJ2FkZEV2ZW50TGlzdGVuZXInID8gJ29uJyA6ICcnO1xufVxuXG4vKipcbiAqIEJpbmQgYGVsYCBldmVudCBgdHlwZWAgdG8gYGZuYC5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gY2FwdHVyZVxuICogQHJldHVybiB7RnVuY3Rpb259XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbnZhciBiaW5kXzEgPSBjb21wb25lbnRFdmVudC5iaW5kID0gZnVuY3Rpb24oZWwsIHR5cGUsIGZuLCBjYXB0dXJlKXtcbiAgaWYgKCFiaW5kJDEpIGRldGVjdCgpO1xuICBlbFtiaW5kJDFdKHByZWZpeCArIHR5cGUsIGZuLCBjYXB0dXJlIHx8IGZhbHNlKTtcbiAgcmV0dXJuIGZuO1xufTtcblxuLyoqXG4gKiBVbmJpbmQgYGVsYCBldmVudCBgdHlwZWAncyBjYWxsYmFjayBgZm5gLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICogQHBhcmFtIHtCb29sZWFufSBjYXB0dXJlXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxudmFyIHVuYmluZF8xID0gY29tcG9uZW50RXZlbnQudW5iaW5kID0gZnVuY3Rpb24oZWwsIHR5cGUsIGZuLCBjYXB0dXJlKXtcbiAgaWYgKCF1bmJpbmQkMSkgZGV0ZWN0KCk7XG4gIGVsW3VuYmluZCQxXShwcmVmaXggKyB0eXBlLCBmbiwgY2FwdHVyZSB8fCBmYWxzZSk7XG4gIHJldHVybiBmbjtcbn07XG5cbnZhciBldmVudCA9IC8qI19fUFVSRV9fKi9fbWVyZ2VOYW1lc3BhY2VzKHtcbiAgX19wcm90b19fOiBudWxsLFxuICBiaW5kOiBiaW5kXzEsXG4gIHVuYmluZDogdW5iaW5kXzEsXG4gICdkZWZhdWx0JzogY29tcG9uZW50RXZlbnRcbn0sIFtjb21wb25lbnRFdmVudF0pO1xuXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxuLyoqXG4gKiBEZWxlZ2F0ZSBldmVudCBgdHlwZWAgdG8gYHNlbGVjdG9yYFxuICogYW5kIGludm9rZSBgZm4oZSlgLiBBIGNhbGxiYWNrIGZ1bmN0aW9uXG4gKiBpcyByZXR1cm5lZCB3aGljaCBtYXkgYmUgcGFzc2VkIHRvIGAudW5iaW5kKClgLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7U3RyaW5nfSBzZWxlY3RvclxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGNhcHR1cmVcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG4vLyBTb21lIGV2ZW50cyBkb24ndCBidWJibGUsIHNvIHdlIHdhbnQgdG8gYmluZCB0byB0aGUgY2FwdHVyZSBwaGFzZSBpbnN0ZWFkXG4vLyB3aGVuIGRlbGVnYXRpbmcuXG52YXIgZm9yY2VDYXB0dXJlRXZlbnRzID0gWyAnZm9jdXMnLCAnYmx1cicgXTtcblxuZnVuY3Rpb24gYmluZChlbCwgc2VsZWN0b3IsIHR5cGUsIGZuLCBjYXB0dXJlKSB7XG4gIGlmIChmb3JjZUNhcHR1cmVFdmVudHMuaW5kZXhPZih0eXBlKSAhPT0gLTEpIHtcbiAgICBjYXB0dXJlID0gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiBldmVudC5iaW5kKGVsLCB0eXBlLCBmdW5jdGlvbihlKSB7XG4gICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudDtcbiAgICBlLmRlbGVnYXRlVGFyZ2V0ID0gY2xvc2VzdCh0YXJnZXQsIHNlbGVjdG9yLCB0cnVlKTtcbiAgICBpZiAoZS5kZWxlZ2F0ZVRhcmdldCkge1xuICAgICAgZm4uY2FsbChlbCwgZSk7XG4gICAgfVxuICB9LCBjYXB0dXJlKTtcbn1cblxuLyoqXG4gKiBVbmJpbmQgZXZlbnQgYHR5cGVgJ3MgY2FsbGJhY2sgYGZuYC5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gY2FwdHVyZVxuICogQGFwaSBwdWJsaWNcbiAqL1xuZnVuY3Rpb24gdW5iaW5kKGVsLCB0eXBlLCBmbiwgY2FwdHVyZSkge1xuICBpZiAoZm9yY2VDYXB0dXJlRXZlbnRzLmluZGV4T2YodHlwZSkgIT09IC0xKSB7XG4gICAgY2FwdHVyZSA9IHRydWU7XG4gIH1cblxuICByZXR1cm4gZXZlbnQudW5iaW5kKGVsLCB0eXBlLCBmbiwgY2FwdHVyZSk7XG59XG5cbnZhciBkZWxlZ2F0ZSA9IHtcbiAgYmluZCxcbiAgdW5iaW5kXG59O1xuXG4vKipcbiAqIEV4cG9zZSBgcGFyc2VgLlxuICovXG5cbnZhciBkb21pZnkgPSBwYXJzZTtcblxuLyoqXG4gKiBUZXN0cyBmb3IgYnJvd3NlciBzdXBwb3J0LlxuICovXG5cbnZhciBpbm5lckhUTUxCdWcgPSBmYWxzZTtcbnZhciBidWdUZXN0RGl2O1xuaWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgYnVnVGVzdERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAvLyBTZXR1cFxuICBidWdUZXN0RGl2LmlubmVySFRNTCA9ICcgIDxsaW5rLz48dGFibGU+PC90YWJsZT48YSBocmVmPVwiL2FcIj5hPC9hPjxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIi8+JztcbiAgLy8gTWFrZSBzdXJlIHRoYXQgbGluayBlbGVtZW50cyBnZXQgc2VyaWFsaXplZCBjb3JyZWN0bHkgYnkgaW5uZXJIVE1MXG4gIC8vIFRoaXMgcmVxdWlyZXMgYSB3cmFwcGVyIGVsZW1lbnQgaW4gSUVcbiAgaW5uZXJIVE1MQnVnID0gIWJ1Z1Rlc3REaXYuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2xpbmsnKS5sZW5ndGg7XG4gIGJ1Z1Rlc3REaXYgPSB1bmRlZmluZWQ7XG59XG5cbi8qKlxuICogV3JhcCBtYXAgZnJvbSBqcXVlcnkuXG4gKi9cblxudmFyIG1hcCA9IHtcbiAgbGVnZW5kOiBbMSwgJzxmaWVsZHNldD4nLCAnPC9maWVsZHNldD4nXSxcbiAgdHI6IFsyLCAnPHRhYmxlPjx0Ym9keT4nLCAnPC90Ym9keT48L3RhYmxlPiddLFxuICBjb2w6IFsyLCAnPHRhYmxlPjx0Ym9keT48L3Rib2R5Pjxjb2xncm91cD4nLCAnPC9jb2xncm91cD48L3RhYmxlPiddLFxuICAvLyBmb3Igc2NyaXB0L2xpbmsvc3R5bGUgdGFncyB0byB3b3JrIGluIElFNi04LCB5b3UgaGF2ZSB0byB3cmFwXG4gIC8vIGluIGEgZGl2IHdpdGggYSBub24td2hpdGVzcGFjZSBjaGFyYWN0ZXIgaW4gZnJvbnQsIGhhIVxuICBfZGVmYXVsdDogaW5uZXJIVE1MQnVnID8gWzEsICdYPGRpdj4nLCAnPC9kaXY+J10gOiBbMCwgJycsICcnXVxufTtcblxubWFwLnRkID1cbm1hcC50aCA9IFszLCAnPHRhYmxlPjx0Ym9keT48dHI+JywgJzwvdHI+PC90Ym9keT48L3RhYmxlPiddO1xuXG5tYXAub3B0aW9uID1cbm1hcC5vcHRncm91cCA9IFsxLCAnPHNlbGVjdCBtdWx0aXBsZT1cIm11bHRpcGxlXCI+JywgJzwvc2VsZWN0PiddO1xuXG5tYXAudGhlYWQgPVxubWFwLnRib2R5ID1cbm1hcC5jb2xncm91cCA9XG5tYXAuY2FwdGlvbiA9XG5tYXAudGZvb3QgPSBbMSwgJzx0YWJsZT4nLCAnPC90YWJsZT4nXTtcblxubWFwLnBvbHlsaW5lID1cbm1hcC5lbGxpcHNlID1cbm1hcC5wb2x5Z29uID1cbm1hcC5jaXJjbGUgPVxubWFwLnRleHQgPVxubWFwLmxpbmUgPVxubWFwLnBhdGggPVxubWFwLnJlY3QgPVxubWFwLmcgPSBbMSwgJzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZlcnNpb249XCIxLjFcIj4nLCc8L3N2Zz4nXTtcblxuLyoqXG4gKiBQYXJzZSBgaHRtbGAgYW5kIHJldHVybiBhIERPTSBOb2RlIGluc3RhbmNlLCB3aGljaCBjb3VsZCBiZSBhIFRleHROb2RlLFxuICogSFRNTCBET00gTm9kZSBvZiBzb21lIGtpbmQgKDxkaXY+IGZvciBleGFtcGxlKSwgb3IgYSBEb2N1bWVudEZyYWdtZW50XG4gKiBpbnN0YW5jZSwgZGVwZW5kaW5nIG9uIHRoZSBjb250ZW50cyBvZiB0aGUgYGh0bWxgIHN0cmluZy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gaHRtbCAtIEhUTUwgc3RyaW5nIHRvIFwiZG9taWZ5XCJcbiAqIEBwYXJhbSB7RG9jdW1lbnR9IGRvYyAtIFRoZSBgZG9jdW1lbnRgIGluc3RhbmNlIHRvIGNyZWF0ZSB0aGUgTm9kZSBmb3JcbiAqIEByZXR1cm4ge0RPTU5vZGV9IHRoZSBUZXh0Tm9kZSwgRE9NIE5vZGUsIG9yIERvY3VtZW50RnJhZ21lbnQgaW5zdGFuY2VcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIHBhcnNlKGh0bWwsIGRvYykge1xuICBpZiAoJ3N0cmluZycgIT0gdHlwZW9mIGh0bWwpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1N0cmluZyBleHBlY3RlZCcpO1xuXG4gIC8vIGRlZmF1bHQgdG8gdGhlIGdsb2JhbCBgZG9jdW1lbnRgIG9iamVjdFxuICBpZiAoIWRvYykgZG9jID0gZG9jdW1lbnQ7XG5cbiAgLy8gdGFnIG5hbWVcbiAgdmFyIG0gPSAvPChbXFx3Ol0rKS8uZXhlYyhodG1sKTtcbiAgaWYgKCFtKSByZXR1cm4gZG9jLmNyZWF0ZVRleHROb2RlKGh0bWwpO1xuXG4gIGh0bWwgPSBodG1sLnJlcGxhY2UoL15cXHMrfFxccyskL2csICcnKTsgLy8gUmVtb3ZlIGxlYWRpbmcvdHJhaWxpbmcgd2hpdGVzcGFjZVxuXG4gIHZhciB0YWcgPSBtWzFdO1xuXG4gIC8vIGJvZHkgc3VwcG9ydFxuICBpZiAodGFnID09ICdib2R5Jykge1xuICAgIHZhciBlbCA9IGRvYy5jcmVhdGVFbGVtZW50KCdodG1sJyk7XG4gICAgZWwuaW5uZXJIVE1MID0gaHRtbDtcbiAgICByZXR1cm4gZWwucmVtb3ZlQ2hpbGQoZWwubGFzdENoaWxkKTtcbiAgfVxuXG4gIC8vIHdyYXAgbWFwXG4gIHZhciB3cmFwID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1hcCwgdGFnKSA/IG1hcFt0YWddIDogbWFwLl9kZWZhdWx0O1xuICB2YXIgZGVwdGggPSB3cmFwWzBdO1xuICB2YXIgcHJlZml4ID0gd3JhcFsxXTtcbiAgdmFyIHN1ZmZpeCA9IHdyYXBbMl07XG4gIHZhciBlbCA9IGRvYy5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgZWwuaW5uZXJIVE1MID0gcHJlZml4ICsgaHRtbCArIHN1ZmZpeDtcbiAgd2hpbGUgKGRlcHRoLS0pIGVsID0gZWwubGFzdENoaWxkO1xuXG4gIC8vIG9uZSBlbGVtZW50XG4gIGlmIChlbC5maXJzdENoaWxkID09IGVsLmxhc3RDaGlsZCkge1xuICAgIHJldHVybiBlbC5yZW1vdmVDaGlsZChlbC5maXJzdENoaWxkKTtcbiAgfVxuXG4gIC8vIHNldmVyYWwgZWxlbWVudHNcbiAgdmFyIGZyYWdtZW50ID0gZG9jLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgd2hpbGUgKGVsLmZpcnN0Q2hpbGQpIHtcbiAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChlbC5yZW1vdmVDaGlsZChlbC5maXJzdENoaWxkKSk7XG4gIH1cblxuICByZXR1cm4gZnJhZ21lbnQ7XG59XG5cbnZhciBkb21pZnkkMSA9IGRvbWlmeTtcblxuLyoqXG4gKiBAcGFyYW0geyBIVE1MRWxlbWVudCB9IGVsZW1lbnRcbiAqIEBwYXJhbSB7IFN0cmluZyB9IHNlbGVjdG9yXG4gKlxuICogQHJldHVybiB7IGJvb2xlYW4gfVxuICovXG5mdW5jdGlvbiBtYXRjaGVzKGVsZW1lbnQsIHNlbGVjdG9yKSB7XG4gIHJldHVybiBlbGVtZW50ICYmIHR5cGVvZiBlbGVtZW50Lm1hdGNoZXMgPT09ICdmdW5jdGlvbicgJiYgZWxlbWVudC5tYXRjaGVzKHNlbGVjdG9yKSB8fCBmYWxzZTtcbn1cblxuZnVuY3Rpb24gcXVlcnkoc2VsZWN0b3IsIGVsKSB7XG4gIGVsID0gZWwgfHwgZG9jdW1lbnQ7XG5cbiAgcmV0dXJuIGVsLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xufVxuXG5mdW5jdGlvbiBhbGwoc2VsZWN0b3IsIGVsKSB7XG4gIGVsID0gZWwgfHwgZG9jdW1lbnQ7XG5cbiAgcmV0dXJuIGVsLnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xufVxuXG5mdW5jdGlvbiByZW1vdmUoZWwpIHtcbiAgZWwucGFyZW50Tm9kZSAmJiBlbC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGVsKTtcbn1cblxuZXhwb3J0IHsgYXNzaWduIGFzIGFzc2lnblN0eWxlLCBhdHRyLCBjbGFzc2VzLCBjbGVhciwgY2xvc2VzdCwgZGVsZWdhdGUsIGRvbWlmeSQxIGFzIGRvbWlmeSwgZXZlbnQsIG1hdGNoZXMsIHF1ZXJ5LCBhbGwgYXMgcXVlcnlBbGwsIHJlbW92ZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../node_modules/@bpmn-io/form-js-editor/node_modules/min-dom/dist/index.esm.js\n\n}");

/***/ }),

/***/ "../node_modules/@bpmn-io/form-js-playground/dist/index.es.js":
/*!********************************************************************!*\
  !*** ../node_modules/@bpmn-io/form-js-playground/dist/index.es.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Playground: () => (/* binding */ Playground)\n/* harmony export */ });\n/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact */ \"../node_modules/preact/dist/preact.module.js\");\n/* harmony import */ var file_drops__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! file-drops */ \"../node_modules/file-drops/dist/index.js\");\n/* harmony import */ var mitt__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! mitt */ \"../node_modules/mitt/dist/mitt.mjs\");\n/* harmony import */ var preact_hooks__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! preact/hooks */ \"../node_modules/preact/hooks/dist/hooks.module.js\");\n/* harmony import */ var min_dash__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! min-dash */ \"../node_modules/min-dash/dist/index.js\");\n/* harmony import */ var downloadjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! downloadjs */ \"../node_modules/downloadjs/download.js\");\n/* harmony import */ var downloadjs__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(downloadjs__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! classnames */ \"../node_modules/classnames/index.js\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @bpmn-io/form-js-viewer */ \"../node_modules/@bpmn-io/form-js-viewer/dist/index.es.js\");\n/* harmony import */ var _bpmn_io_form_js_editor__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @bpmn-io/form-js-editor */ \"../node_modules/@bpmn-io/form-js-editor/dist/index.es.js\");\n/* harmony import */ var preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! preact/jsx-runtime */ \"../node_modules/preact/jsx-runtime/dist/jsxRuntime.module.js\");\n/* harmony import */ var codemirror__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! codemirror */ \"../node_modules/codemirror/dist/index.js\");\n/* harmony import */ var _codemirror_view__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @codemirror/view */ \"../node_modules/@codemirror/view/dist/index.js\");\n/* harmony import */ var _codemirror_state__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @codemirror/state */ \"../node_modules/@codemirror/state/dist/index.js\");\n/* harmony import */ var _codemirror_lint__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @codemirror/lint */ \"../node_modules/@codemirror/lint/dist/index.js\");\n/* harmony import */ var _codemirror_lang_json__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @codemirror/lang-json */ \"../node_modules/@codemirror/lang-json/dist/index.js\");\n/* harmony import */ var _codemirror_commands__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @codemirror/commands */ \"../node_modules/@codemirror/commands/dist/index.js\");\n/* harmony import */ var _codemirror_autocomplete__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @codemirror/autocomplete */ \"../node_modules/@codemirror/autocomplete/dist/index.js\");\n/* harmony import */ var _codemirror_language__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @codemirror/language */ \"../node_modules/@codemirror/language/dist/index.js\");\n/* harmony import */ var min_dom__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! min-dom */ \"../node_modules/min-dom/dist/index.esm.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction Modal(props) {\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n    function handleKey(event) {\n      if (event.key === 'Escape') {\n        event.stopPropagation();\n        props.onClose();\n      }\n    }\n    document.addEventListener('keydown', handleKey);\n    return () => {\n      document.removeEventListener('keydown', handleKey);\n    };\n  });\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)(\"div\", {\n    class: \"fjs-pgl-modal\",\n    children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\"div\", {\n      class: \"fjs-pgl-modal-backdrop\",\n      onClick: props.onClose\n    }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)(\"div\", {\n      class: \"fjs-pgl-modal-content\",\n      children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\"h1\", {\n        class: \"fjs-pgl-modal-header\",\n        children: props.name\n      }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\"div\", {\n        class: \"fjs-pgl-modal-body\",\n        children: props.children\n      }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\"div\", {\n        class: \"fjs-pgl-modal-footer\",\n        children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\"button\", {\n          type: \"button\",\n          class: \"fjs-pgl-button fjs-pgl-button-default\",\n          onClick: props.onClose,\n          children: \"Close\"\n        })\n      })]\n    })]\n  });\n}\n\nfunction EmbedModal(props) {\n  const schema = serializeValue(props.schema);\n  const data = serializeValue(props.data || {});\n  const fieldRef = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_3__.useRef)();\n  const snippet = `<!-- styles needed for rendering -->\n<link rel=\"stylesheet\" href=\"https://unpkg.com/@bpmn-io/form-js@0.2.4/dist/assets/form-js.css\">\n\n<!-- container to render the form into -->\n<div class=\"fjs-pgl-form-container\"></div>\n\n<!-- scripts needed for embedding -->\n<script src=\"https://unpkg.com/@bpmn-io/form-js@0.2.4/dist/form-viewer.umd.js\"></script>\n\n<!-- actual script to instantiate the form and load form schema + data -->\n<script>\n  const data = JSON.parse(${data});\n  const schema = JSON.parse(${schema});\n\n  const form = new FormViewer.Form({\n    container: document.querySelector(\".fjs-pgl-form-container\")\n  });\n\n  form.on(\"submit\", (event) => {\n    console.log(event.data, event.errors);\n  });\n\n  form.importSchema(schema, data).catch(err => {\n    console.error(\"Failed to render form\", err);\n  });\n</script>\n  `.trim();\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n    fieldRef.current.select();\n  });\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)(Modal, {\n    name: \"Embed form\",\n    onClose: props.onClose,\n    children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)(\"p\", {\n      children: [\"Use the following HTML snippet to embed your form with \", (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\"a\", {\n        href: \"https://github.com/bpmn-io/form-js\",\n        children: \"form-js\"\n      }), \":\"]\n    }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\"textarea\", {\n      spellCheck: \"false\",\n      ref: fieldRef,\n      children: snippet\n    })]\n  });\n}\n\n// helpers ///////////\n\nfunction serializeValue(obj) {\n  return JSON.stringify(JSON.stringify(obj)).replace(/</g, '&lt;').replace(/>/g, '&gt;');\n}\n\n/**\n * @type {Facet<import('..').Variables>} Variables\n */\nconst variablesFacet = _codemirror_state__WEBPACK_IMPORTED_MODULE_12__.Facet.define();\n\nfunction autocompletionExtension() {\n  return [(0,_codemirror_autocomplete__WEBPACK_IMPORTED_MODULE_16__.autocompletion)({\n    override: [completions]\n  })];\n}\n\n/**\n * @param {import('@codemirror/autocomplete').CompletionContext} context\n */\nfunction completions(context) {\n  const variables = context.state.facet(variablesFacet)[0];\n  /** @type {import('@codemirror/autocomplete').Completion[]} */\n  const objectOptions = variables.map(label => ({\n    displayLabel: `\"${label}\"`,\n    label: `\"${label}\": `,\n    type: 'variable',\n    apply: (view, completion, from, to) => {\n      const doc = view.state.doc;\n      const beforeChar = doc.sliceString(from - 1, from);\n      const line = doc.lineAt(from);\n      const indentation = /^\\s*/.exec(line.text)[0];\n      const baseInsert = completion.label;\n      if (beforeChar === '{') {\n        const insert = `\\n  ${indentation}${baseInsert},\\n`;\n        view.dispatch({\n          changes: {\n            from,\n            to,\n            insert\n          },\n          selection: {\n            anchor: from + insert.length - 2\n          }\n        });\n      } else if (beforeChar === ',') {\n        const insert = `\\n${indentation}${baseInsert},`;\n        view.dispatch({\n          changes: {\n            from,\n            to,\n            insert\n          },\n          selection: {\n            anchor: from + insert.length - 1\n          }\n        });\n      } else {\n        const insert = `${baseInsert},`;\n        view.dispatch({\n          changes: {\n            from,\n            to,\n            insert\n          },\n          selection: {\n            anchor: from + insert.length - 1\n          }\n        });\n      }\n    }\n  }));\n  /** @type {import('@codemirror/autocomplete').Completion[]} */\n  const propertyNameOptions = variables.map(label => ({\n    label,\n    type: 'variable'\n  }));\n  /** @type {import('@codemirror/autocomplete').Completion[]} */\n  const propertyValueOptions = [{\n    label: 'true',\n    type: 'constant keyword',\n    boost: 3\n  }, {\n    label: 'false',\n    type: 'constant keyword',\n    boost: 2\n  }, {\n    label: 'null',\n    type: 'constant keyword',\n    boost: 1\n  }, {\n    displayLabel: '[ .. ]',\n    label: '[  ]',\n    apply: (view, completion, from, to) => {\n      view.dispatch({\n        changes: {\n          from,\n          to,\n          insert: completion.label\n        },\n        selection: {\n          anchor: from + 2\n        }\n      });\n    }\n  }, {\n    displayLabel: '{ .. }',\n    label: '{  }',\n    apply: (view, completion, from, to) => {\n      view.dispatch({\n        changes: {\n          from,\n          to,\n          insert: completion.label\n        },\n        selection: {\n          anchor: from + 2\n        }\n      });\n    }\n  }];\n  let finalOptions = [];\n  let nodeBefore = (0,_codemirror_language__WEBPACK_IMPORTED_MODULE_17__.syntaxTree)(context.state).resolve(context.pos, -1);\n  let word = context.matchBefore(/\\w*/);\n  if (['Object', '{'].includes(nodeBefore.type.name)) {\n    finalOptions = objectOptions;\n  }\n  if (nodeBefore.type.name === 'PropertyName') {\n    context.explicit = true;\n    finalOptions = propertyNameOptions;\n  }\n  if (['Property', '[', 'Array'].includes(nodeBefore.type.name)) {\n    finalOptions = propertyValueOptions;\n  }\n  if (word.from == word.to && !context.explicit) {\n    return null;\n  }\n  return {\n    from: word.from,\n    options: finalOptions\n  };\n}\n\nconst NO_LINT_CLS = 'fjs-cm-no-lint';\n\n/**\n * @param {object} options\n * @param {boolean} [options.readonly]\n * @param {object} [options.contentAttributes]\n * @param {string | HTMLElement} [options.placeholder]\n */\nfunction JSONEditor(options = {}) {\n  const {\n    contentAttributes = {},\n    placeholder: editorPlaceholder,\n    readonly = false\n  } = options;\n  const emitter = (0,mitt__WEBPACK_IMPORTED_MODULE_2__[\"default\"])();\n  const languageCompartment = new _codemirror_state__WEBPACK_IMPORTED_MODULE_12__.Compartment().of((0,_codemirror_lang_json__WEBPACK_IMPORTED_MODULE_14__.json)());\n  const tabSizeCompartment = new _codemirror_state__WEBPACK_IMPORTED_MODULE_12__.Compartment().of(_codemirror_state__WEBPACK_IMPORTED_MODULE_12__.EditorState.tabSize.of(2));\n  const autocompletionConfCompartment = new _codemirror_state__WEBPACK_IMPORTED_MODULE_12__.Compartment();\n  const placeholderLinterExtension = createPlaceholderLinterExtension();\n  let container = null;\n  function createState(doc, variables = []) {\n    const extensions = [codemirror__WEBPACK_IMPORTED_MODULE_10__.basicSetup, languageCompartment, tabSizeCompartment, (0,_codemirror_lint__WEBPACK_IMPORTED_MODULE_13__.lintGutter)(), (0,_codemirror_lint__WEBPACK_IMPORTED_MODULE_13__.linter)((0,_codemirror_lang_json__WEBPACK_IMPORTED_MODULE_14__.jsonParseLinter)()), placeholderLinterExtension, autocompletionConfCompartment.of(variablesFacet.of(variables)), autocompletionExtension(), _codemirror_view__WEBPACK_IMPORTED_MODULE_11__.keymap.of([_codemirror_commands__WEBPACK_IMPORTED_MODULE_15__.indentWithTab]), editorPlaceholder ? (0,_codemirror_view__WEBPACK_IMPORTED_MODULE_11__.placeholder)(editorPlaceholder) : [], _codemirror_state__WEBPACK_IMPORTED_MODULE_12__.EditorState.readOnly.of(readonly), _codemirror_view__WEBPACK_IMPORTED_MODULE_11__.EditorView.updateListener.of(update => {\n      if (update.docChanged) {\n        emitter.emit('changed', {\n          value: update.state.doc.toString()\n        });\n      }\n    }), _codemirror_view__WEBPACK_IMPORTED_MODULE_11__.EditorView.contentAttributes.of(contentAttributes)];\n    return _codemirror_state__WEBPACK_IMPORTED_MODULE_12__.EditorState.create({\n      doc,\n      extensions\n    });\n  }\n  const view = new _codemirror_view__WEBPACK_IMPORTED_MODULE_11__.EditorView({\n    state: createState('')\n  });\n  this.setValue = function (newValue) {\n    const oldValue = view.state.doc.toString();\n    const diff = findDiff(oldValue, newValue);\n    if (diff) {\n      view.dispatch({\n        changes: {\n          from: diff.start,\n          to: diff.end,\n          insert: diff.text\n        },\n        selection: {\n          anchor: diff.start + diff.text.length\n        }\n      });\n    }\n  };\n  this.getValue = function () {\n    return view.state.doc.toString();\n  };\n  this.setVariables = function (variables) {\n    view.dispatch({\n      effects: autocompletionConfCompartment.reconfigure(variablesFacet.of(variables))\n    });\n  };\n  this.getView = function () {\n    return view;\n  };\n  this.on = emitter.on;\n  this.off = emitter.off;\n  this.emit = emitter.emit;\n  this.attachTo = function (_container) {\n    container = _container;\n    container.appendChild(view.dom);\n    (0,min_dom__WEBPACK_IMPORTED_MODULE_18__.classes)(container, document.body).add('fjs-json-editor');\n  };\n  this.destroy = function () {\n    if (container && view.dom) {\n      container.removeChild(view.dom);\n      (0,min_dom__WEBPACK_IMPORTED_MODULE_18__.classes)(container, document.body).remove('fjs-json-editor');\n    }\n    view.destroy();\n  };\n  function createPlaceholderLinterExtension() {\n    return (0,_codemirror_lint__WEBPACK_IMPORTED_MODULE_13__.linter)(view => {\n      const placeholders = view.dom.querySelectorAll('.cm-placeholder');\n      if (placeholders.length > 0) {\n        (0,min_dom__WEBPACK_IMPORTED_MODULE_18__.classes)(container, document.body).add(NO_LINT_CLS);\n      } else {\n        (0,min_dom__WEBPACK_IMPORTED_MODULE_18__.classes)(container, document.body).remove(NO_LINT_CLS);\n      }\n      return [];\n    });\n  }\n}\nfunction findDiff(oldStr, newStr) {\n  if (oldStr === newStr) {\n    return null;\n  }\n  oldStr = oldStr || '';\n  newStr = newStr || '';\n  let minLength = Math.min(oldStr.length, newStr.length);\n  let start = 0;\n  while (start < minLength && oldStr[start] === newStr[start]) {\n    start++;\n  }\n  if (start === minLength) {\n    return {\n      start: start,\n      text: newStr.slice(start),\n      end: oldStr.length\n    };\n  }\n  let endOld = oldStr.length;\n  let endNew = newStr.length;\n  while (endOld > start && endNew > start && oldStr[endOld - 1] === newStr[endNew - 1]) {\n    endOld--;\n    endNew--;\n  }\n  return {\n    start: start,\n    text: newStr.slice(start, endNew),\n    end: endOld\n  };\n}\n\nfunction Section(props) {\n  const elements = Array.isArray(props.children) ? props.children : [props.children];\n  const {\n    headerItems,\n    children\n  } = elements.reduce((_, child) => {\n    const bucket = child.type === Section.HeaderItem ? _.headerItems : _.children;\n    bucket.push(child);\n    return _;\n  }, {\n    headerItems: [],\n    children: []\n  });\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)(\"div\", {\n    class: \"fjs-pgl-section\",\n    children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)(\"h1\", {\n      class: \"header\",\n      children: [props.name, \" \", headerItems.length ? (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\"span\", {\n        class: \"header-items\",\n        children: headerItems\n      }) : null]\n    }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\"div\", {\n      class: \"body\",\n      children: children\n    })]\n  });\n}\nSection.HeaderItem = function (props) {\n  return props.children;\n};\n\nfunction PlaygroundRoot(config) {\n  const {\n    additionalModules,\n    // goes into both editor + viewer\n    actions: actionsConfig,\n    emit,\n    exporter: exporterConfig,\n    viewerProperties,\n    editorProperties,\n    viewerAdditionalModules,\n    editorAdditionalModules,\n    propertiesPanel: propertiesPanelConfig,\n    apiLinkTarget,\n    onInit\n  } = config;\n  const {\n    display: displayActions = true\n  } = actionsConfig || {};\n  const editorContainerRef = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_3__.useRef)();\n  const paletteContainerRef = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_3__.useRef)();\n  const propertiesPanelContainerRef = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_3__.useRef)();\n  const viewerContainerRef = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_3__.useRef)();\n  const inputDataContainerRef = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_3__.useRef)();\n  const outputDataContainerRef = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_3__.useRef)();\n  const formEditorRef = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_3__.useRef)();\n  const formViewerRef = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_3__.useRef)();\n  const inputDataRef = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_3__.useRef)();\n  const outputDataRef = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_3__.useRef)();\n  const [showEmbed, setShowEmbed] = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n  const [schema, setSchema] = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_3__.useState)();\n  const [data, setData] = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_3__.useState)();\n  const load = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_3__.useCallback)((schema, data) => {\n    formEditorRef.current.importSchema(schema, data);\n    inputDataRef.current.setValue(toString(data));\n    setSchema(schema);\n    setData(data);\n  }, []);\n\n  // initialize and link the editors\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n    const inputDataEditor = inputDataRef.current = new JSONEditor({\n      contentAttributes: {\n        'aria-label': 'Form Input',\n        tabIndex: 0\n      },\n      placeholder: createDataEditorPlaceholder()\n    });\n    const outputDataEditor = outputDataRef.current = new JSONEditor({\n      readonly: true,\n      contentAttributes: {\n        'aria-label': 'Form Output',\n        tabIndex: 0\n      }\n    });\n    const formViewer = formViewerRef.current = new _bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_7__.Form({\n      container: viewerContainerRef.current,\n      additionalModules: [...(additionalModules || []), ...(viewerAdditionalModules || [])],\n      properties: {\n        ...(viewerProperties || {}),\n        ariaLabel: 'Form Preview'\n      }\n    });\n    const formEditor = formEditorRef.current = new _bpmn_io_form_js_editor__WEBPACK_IMPORTED_MODULE_8__.FormEditor({\n      container: editorContainerRef.current,\n      renderer: {\n        compact: true\n      },\n      palette: {\n        parent: paletteContainerRef.current\n      },\n      propertiesPanel: {\n        parent: propertiesPanelContainerRef.current,\n        ...(propertiesPanelConfig || {})\n      },\n      exporter: exporterConfig,\n      properties: {\n        ...(editorProperties || {}),\n        ariaLabel: 'Form Definition'\n      },\n      additionalModules: [...(additionalModules || []), ...(editorAdditionalModules || [])]\n    });\n    formEditor.on('formField.add', ({\n      formField\n    }) => {\n      const formFields = formEditor.get('formFields');\n      const {\n        config\n      } = formFields.get(formField.type);\n      const {\n        generateInitialDemoData\n      } = config;\n      const {\n        id\n      } = formField;\n      if (!(0,min_dash__WEBPACK_IMPORTED_MODULE_4__.isFunction)(generateInitialDemoData)) {\n        return;\n      }\n      const initialDemoData = generateInitialDemoData(formField);\n      if ([initialDemoData, id].includes(undefined)) {\n        return;\n      }\n      setData(currentData => {\n        const newData = {\n          ...currentData,\n          [id]: initialDemoData\n        };\n        inputDataRef.current.setValue(toString(newData));\n        return newData;\n      });\n    });\n    formEditor.on('changed', () => {\n      setSchema(formEditor.getSchema());\n    });\n    formEditor.on('formEditor.rendered', () => {\n      // notify interested parties after render\n      emit('formPlayground.rendered');\n    });\n    const updateOutputData = () => {\n      const submitData = formViewer._getSubmitData();\n      outputDataEditor.setValue(toString(submitData));\n    };\n\n    // pipe viewer changes to output data editor\n    formViewer.on('changed', updateOutputData);\n    formViewer.on('formFieldInstance.added', updateOutputData);\n    formViewer.on('formFieldInstance.removed', updateOutputData);\n    inputDataEditor.on('changed', event => {\n      try {\n        setData(JSON.parse(event.value));\n      } catch (error) {\n        // notify interested about input data error\n        emit('formPlayground.inputDataError', error);\n      }\n    });\n    inputDataEditor.attachTo(inputDataContainerRef.current);\n    outputDataEditor.attachTo(outputDataContainerRef.current);\n    return () => {\n      inputDataEditor.destroy();\n      outputDataEditor.destroy();\n      formViewer.destroy();\n      formEditor.destroy();\n    };\n  }, [additionalModules, editorAdditionalModules, editorProperties, emit, exporterConfig, propertiesPanelConfig, viewerAdditionalModules, viewerProperties]);\n\n  // initialize data through props\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n    if (!config.initialSchema) {\n      return;\n    }\n    load(config.initialSchema, config.initialData || {});\n  }, [config.initialSchema, config.initialData, load]);\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n    schema && formViewerRef.current.importSchema(schema, data);\n  }, [schema, data]);\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n    if (schema && inputDataContainerRef.current) {\n      const variables = (0,_bpmn_io_form_js_viewer__WEBPACK_IMPORTED_MODULE_7__.getSchemaVariables)(schema);\n      inputDataRef.current.setVariables(variables);\n    }\n  }, [schema]);\n\n  // exposes api to parent\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n    if (!apiLinkTarget) {\n      return;\n    }\n    apiLinkTarget.api = {\n      attachDataContainer: node => inputDataRef.current.attachTo(node),\n      attachResultContainer: node => outputDataRef.current.attachTo(node),\n      attachFormContainer: node => formViewerRef.current.attachTo(node),\n      attachEditorContainer: node => formEditorRef.current.attachTo(node),\n      attachPaletteContainer: node => formEditorRef.current.get('palette').attachTo(node),\n      attachPropertiesPanelContainer: node => formEditorRef.current.get('propertiesPanel').attachTo(node),\n      get: (name, strict) => formEditorRef.current.get(name, strict),\n      getDataEditor: () => inputDataRef.current,\n      getEditor: () => formEditorRef.current,\n      getForm: () => formViewerRef.current,\n      getResultView: () => outputDataRef.current,\n      getSchema: () => formEditorRef.current.getSchema(),\n      saveSchema: () => formEditorRef.current.saveSchema(),\n      setSchema: setSchema,\n      setData: setData\n    };\n    onInit();\n  }, [apiLinkTarget, onInit]);\n\n  // separate effect for state to avoid re-creating the api object every time\n  (0,preact_hooks__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n    if (!apiLinkTarget) {\n      return;\n    }\n    apiLinkTarget.api.getState = () => ({\n      schema,\n      data\n    });\n    apiLinkTarget.api.load = load;\n  }, [apiLinkTarget, schema, data, load]);\n  const handleDownload = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_3__.useCallback)(() => {\n    downloadjs__WEBPACK_IMPORTED_MODULE_5___default()(JSON.stringify(schema, null, '  '), 'form.json', 'text/json');\n  }, [schema]);\n  const hideEmbedModal = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_3__.useCallback)(() => {\n    setShowEmbed(false);\n  }, []);\n  const showEmbedModal = (0,preact_hooks__WEBPACK_IMPORTED_MODULE_3__.useCallback)(() => {\n    setShowEmbed(true);\n  }, []);\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)(\"div\", {\n    class: classnames__WEBPACK_IMPORTED_MODULE_6___default()('fjs-container', 'fjs-pgl-root'),\n    children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\"div\", {\n      class: \"fjs-pgl-modals\",\n      children: showEmbed ? (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(EmbedModal, {\n        schema: schema,\n        data: data,\n        onClose: hideEmbedModal\n      }) : null\n    }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\"div\", {\n      class: \"fjs-pgl-palette-container\",\n      ref: paletteContainerRef\n    }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)(\"div\", {\n      class: \"fjs-pgl-main\",\n      children: [(0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)(Section, {\n        name: \"Form Definition\",\n        children: [displayActions && (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(Section.HeaderItem, {\n          children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\"button\", {\n            type: \"button\",\n            class: \"fjs-pgl-button\",\n            title: \"Download form definition\",\n            onClick: handleDownload,\n            children: \"Download\"\n          })\n        }), displayActions && (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(Section.HeaderItem, {\n          children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\"button\", {\n            type: \"button\",\n            class: \"fjs-pgl-button\",\n            onClick: showEmbedModal,\n            children: \"Embed\"\n          })\n        }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\"div\", {\n          ref: editorContainerRef,\n          class: \"fjs-pgl-form-container\"\n        })]\n      }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(Section, {\n        name: \"Form Preview\",\n        children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\"div\", {\n          ref: viewerContainerRef,\n          class: \"fjs-pgl-form-container\"\n        })\n      }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(Section, {\n        name: \"Form Input\",\n        children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\"div\", {\n          ref: inputDataContainerRef,\n          class: \"fjs-pgl-text-container\"\n        })\n      }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(Section, {\n        name: \"Form Output\",\n        children: (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\"div\", {\n          ref: outputDataContainerRef,\n          class: \"fjs-pgl-text-container\"\n        })\n      })]\n    }), (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(\"div\", {\n      class: \"fjs-pgl-properties-container\",\n      ref: propertiesPanelContainerRef\n    })]\n  });\n}\n\n// helpers ///////////////\n\nfunction toString(obj) {\n  return JSON.stringify(obj, null, '  ');\n}\nfunction createDataEditorPlaceholder() {\n  const element = document.createElement('p');\n  element.innerHTML = 'Use this panel to simulate the form input, such as process variables.\\nThis helps to test the form by populating the preview.\\n\\n' + 'Follow the JSON format like this:\\n\\n' + '{\\n  \"variable\": \"value\"\\n}';\n  return element;\n}\n\nfunction Playground(options) {\n  const {\n    container: parent,\n    schema: initialSchema,\n    data: initialData,\n    ...rest\n  } = options;\n  const emitter = (0,mitt__WEBPACK_IMPORTED_MODULE_2__[\"default\"])();\n  const container = document.createElement('div');\n  container.classList.add('fjs-pgl-parent');\n  if (parent) {\n    parent.appendChild(container);\n  }\n  const handleDrop = (0,file_drops__WEBPACK_IMPORTED_MODULE_1__[\"default\"])('Drop a form file', function (files) {\n    const file = files[0];\n    if (file) {\n      try {\n        this.api.setSchema(JSON.parse(file.contents));\n      } catch (err) {\n        // TODO(nikku): indicate JSON parse error\n      }\n    }\n  });\n  const safe = function (fn) {\n    return function (...args) {\n      if (!this.api) {\n        throw new Error('Playground is not initialized.');\n      }\n      return fn(...args);\n    };\n  };\n  const onInit = function () {\n    emitter.emit('formPlayground.init');\n  };\n  container.addEventListener('dragover', handleDrop);\n  (0,preact__WEBPACK_IMPORTED_MODULE_0__.render)((0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(PlaygroundRoot, {\n    initialSchema: initialSchema,\n    initialData: initialData,\n    emit: emitter.emit,\n    apiLinkTarget: this,\n    onInit: onInit,\n    ...rest\n  }), container);\n  this.on = emitter.on;\n  this.off = emitter.off;\n  this.emit = emitter.emit;\n  this.on('destroy', () => {\n    (0,preact__WEBPACK_IMPORTED_MODULE_0__.render)(null, container);\n    parent.removeChild(container);\n  });\n  this.destroy = () => this.emit('destroy');\n  this.getState = safe(() => this.api.getState());\n  this.getSchema = safe(() => this.api.getSchema());\n  this.setSchema = safe(schema => this.api.setSchema(schema));\n  this.saveSchema = safe(() => this.api.saveSchema());\n  this.get = safe((name, strict) => this.api.get(name, strict));\n  this.getDataEditor = safe(() => this.api.getDataEditor());\n  this.getEditor = safe(() => this.api.getEditor());\n  this.getForm = safe((name, strict) => this.api.getForm(name, strict));\n  this.getResultView = safe(() => this.api.getResultView());\n  this.attachEditorContainer = safe(node => this.api.attachEditorContainer(node));\n  this.attachPreviewContainer = safe(node => this.api.attachFormContainer(node));\n  this.attachDataContainer = safe(node => this.api.attachDataContainer(node));\n  this.attachResultContainer = safe(node => this.api.attachResultContainer(node));\n  this.attachPaletteContainer = safe(node => this.api.attachPaletteContainer(node));\n  this.attachPropertiesPanelContainer = safe(node => this.api.attachPropertiesPanelContainer(node));\n}\n\n\n//# sourceMappingURL=index.es.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vbm9kZV9tb2R1bGVzL0BicG1uLWlvL2Zvcm0tanMtcGxheWdyb3VuZC9kaXN0L2luZGV4LmVzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBZ0M7QUFDRTtBQUNWO0FBQ2dEO0FBQ2xDO0FBQ0o7QUFDRTtBQUMrQjtBQUNkO0FBQ047QUFDUDtBQUMyQjtBQUNDO0FBQ2Q7QUFDUTtBQUNUO0FBQ0s7QUFDUjtBQUNoQjs7QUFFbEM7QUFDQSxFQUFFLHVEQUFTO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsU0FBUyx3REFBSTtBQUNiO0FBQ0EsZUFBZSx1REFBRztBQUNsQjtBQUNBO0FBQ0EsS0FBSyxHQUFHLHdEQUFJO0FBQ1o7QUFDQSxpQkFBaUIsdURBQUc7QUFDcEI7QUFDQTtBQUNBLE9BQU8sR0FBRyx1REFBRztBQUNiO0FBQ0E7QUFDQSxPQUFPLEdBQUcsdURBQUc7QUFDYjtBQUNBLGtCQUFrQix1REFBRztBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1AsS0FBSztBQUNMLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0EsOENBQThDO0FBQzlDLG1CQUFtQixvREFBTTtBQUN6QjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsNEJBQTRCLEtBQUs7QUFDakMsOEJBQThCLE9BQU87O0FBRXJDO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEVBQUUsdURBQVM7QUFDWDtBQUNBLEdBQUc7QUFDSCxTQUFTLHdEQUFJO0FBQ2I7QUFDQTtBQUNBLGVBQWUsd0RBQUk7QUFDbkIsNEVBQTRFLHVEQUFHO0FBQy9FO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSyxHQUFHLHVEQUFHO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsS0FB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QUFDQTtBQUNBO0FBQ0Esd01BQXdNLDBCQUEwQjtBQUNsTztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixrQkFBa0IsZ0RBQUk7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixzREFBUTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSw4Q0FBTSxDQUFDLHVEQUFHO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSw4Q0FBTTtBQUNWO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRXNCO0FBQ3RCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FtdW5kYS1tb2RlbGVyLWNsaWVudC8uLi9ub2RlX21vZHVsZXMvQGJwbW4taW8vZm9ybS1qcy1wbGF5Z3JvdW5kL2Rpc3QvaW5kZXguZXMuanM/MDMyMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyByZW5kZXIgfSBmcm9tICdwcmVhY3QnO1xuaW1wb3J0IGZpbGVEcm9wIGZyb20gJ2ZpbGUtZHJvcHMnO1xuaW1wb3J0IG1pdHQgZnJvbSAnbWl0dCc7XG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVJlZiwgdXNlU3RhdGUsIHVzZUNhbGxiYWNrIH0gZnJvbSAncHJlYWN0L2hvb2tzJztcbmltcG9ydCB7IGlzRnVuY3Rpb24gfSBmcm9tICdtaW4tZGFzaCc7XG5pbXBvcnQgZG93bmxvYWQgZnJvbSAnZG93bmxvYWRqcyc7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCB7IEZvcm0sIGdldFNjaGVtYVZhcmlhYmxlcyB9IGZyb20gJ0BicG1uLWlvL2Zvcm0tanMtdmlld2VyJztcbmltcG9ydCB7IEZvcm1FZGl0b3IgfSBmcm9tICdAYnBtbi1pby9mb3JtLWpzLWVkaXRvcic7XG5pbXBvcnQgeyBqc3hzLCBqc3ggfSBmcm9tICdwcmVhY3QvanN4LXJ1bnRpbWUnO1xuaW1wb3J0IHsgYmFzaWNTZXR1cCB9IGZyb20gJ2NvZGVtaXJyb3InO1xuaW1wb3J0IHsgRWRpdG9yVmlldywga2V5bWFwLCBwbGFjZWhvbGRlciB9IGZyb20gJ0Bjb2RlbWlycm9yL3ZpZXcnO1xuaW1wb3J0IHsgRmFjZXQsIENvbXBhcnRtZW50LCBFZGl0b3JTdGF0ZSB9IGZyb20gJ0Bjb2RlbWlycm9yL3N0YXRlJztcbmltcG9ydCB7IGxpbnRlciwgbGludEd1dHRlciB9IGZyb20gJ0Bjb2RlbWlycm9yL2xpbnQnO1xuaW1wb3J0IHsganNvbiwganNvblBhcnNlTGludGVyIH0gZnJvbSAnQGNvZGVtaXJyb3IvbGFuZy1qc29uJztcbmltcG9ydCB7IGluZGVudFdpdGhUYWIgfSBmcm9tICdAY29kZW1pcnJvci9jb21tYW5kcyc7XG5pbXBvcnQgeyBhdXRvY29tcGxldGlvbiB9IGZyb20gJ0Bjb2RlbWlycm9yL2F1dG9jb21wbGV0ZSc7XG5pbXBvcnQgeyBzeW50YXhUcmVlIH0gZnJvbSAnQGNvZGVtaXJyb3IvbGFuZ3VhZ2UnO1xuaW1wb3J0IHsgY2xhc3NlcyB9IGZyb20gJ21pbi1kb20nO1xuXG5mdW5jdGlvbiBNb2RhbChwcm9wcykge1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZ1bmN0aW9uIGhhbmRsZUtleShldmVudCkge1xuICAgICAgaWYgKGV2ZW50LmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIHByb3BzLm9uQ2xvc2UoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUtleSk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVLZXkpO1xuICAgIH07XG4gIH0pO1xuICByZXR1cm4ganN4cyhcImRpdlwiLCB7XG4gICAgY2xhc3M6IFwiZmpzLXBnbC1tb2RhbFwiLFxuICAgIGNoaWxkcmVuOiBbanN4KFwiZGl2XCIsIHtcbiAgICAgIGNsYXNzOiBcImZqcy1wZ2wtbW9kYWwtYmFja2Ryb3BcIixcbiAgICAgIG9uQ2xpY2s6IHByb3BzLm9uQ2xvc2VcbiAgICB9KSwganN4cyhcImRpdlwiLCB7XG4gICAgICBjbGFzczogXCJmanMtcGdsLW1vZGFsLWNvbnRlbnRcIixcbiAgICAgIGNoaWxkcmVuOiBbanN4KFwiaDFcIiwge1xuICAgICAgICBjbGFzczogXCJmanMtcGdsLW1vZGFsLWhlYWRlclwiLFxuICAgICAgICBjaGlsZHJlbjogcHJvcHMubmFtZVxuICAgICAgfSksIGpzeChcImRpdlwiLCB7XG4gICAgICAgIGNsYXNzOiBcImZqcy1wZ2wtbW9kYWwtYm9keVwiLFxuICAgICAgICBjaGlsZHJlbjogcHJvcHMuY2hpbGRyZW5cbiAgICAgIH0pLCBqc3goXCJkaXZcIiwge1xuICAgICAgICBjbGFzczogXCJmanMtcGdsLW1vZGFsLWZvb3RlclwiLFxuICAgICAgICBjaGlsZHJlbjoganN4KFwiYnV0dG9uXCIsIHtcbiAgICAgICAgICB0eXBlOiBcImJ1dHRvblwiLFxuICAgICAgICAgIGNsYXNzOiBcImZqcy1wZ2wtYnV0dG9uIGZqcy1wZ2wtYnV0dG9uLWRlZmF1bHRcIixcbiAgICAgICAgICBvbkNsaWNrOiBwcm9wcy5vbkNsb3NlLFxuICAgICAgICAgIGNoaWxkcmVuOiBcIkNsb3NlXCJcbiAgICAgICAgfSlcbiAgICAgIH0pXVxuICAgIH0pXVxuICB9KTtcbn1cblxuZnVuY3Rpb24gRW1iZWRNb2RhbChwcm9wcykge1xuICBjb25zdCBzY2hlbWEgPSBzZXJpYWxpemVWYWx1ZShwcm9wcy5zY2hlbWEpO1xuICBjb25zdCBkYXRhID0gc2VyaWFsaXplVmFsdWUocHJvcHMuZGF0YSB8fCB7fSk7XG4gIGNvbnN0IGZpZWxkUmVmID0gdXNlUmVmKCk7XG4gIGNvbnN0IHNuaXBwZXQgPSBgPCEtLSBzdHlsZXMgbmVlZGVkIGZvciByZW5kZXJpbmcgLS0+XG48bGluayByZWw9XCJzdHlsZXNoZWV0XCIgaHJlZj1cImh0dHBzOi8vdW5wa2cuY29tL0BicG1uLWlvL2Zvcm0tanNAMC4yLjQvZGlzdC9hc3NldHMvZm9ybS1qcy5jc3NcIj5cblxuPCEtLSBjb250YWluZXIgdG8gcmVuZGVyIHRoZSBmb3JtIGludG8gLS0+XG48ZGl2IGNsYXNzPVwiZmpzLXBnbC1mb3JtLWNvbnRhaW5lclwiPjwvZGl2PlxuXG48IS0tIHNjcmlwdHMgbmVlZGVkIGZvciBlbWJlZGRpbmcgLS0+XG48c2NyaXB0IHNyYz1cImh0dHBzOi8vdW5wa2cuY29tL0BicG1uLWlvL2Zvcm0tanNAMC4yLjQvZGlzdC9mb3JtLXZpZXdlci51bWQuanNcIj48L3NjcmlwdD5cblxuPCEtLSBhY3R1YWwgc2NyaXB0IHRvIGluc3RhbnRpYXRlIHRoZSBmb3JtIGFuZCBsb2FkIGZvcm0gc2NoZW1hICsgZGF0YSAtLT5cbjxzY3JpcHQ+XG4gIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKCR7ZGF0YX0pO1xuICBjb25zdCBzY2hlbWEgPSBKU09OLnBhcnNlKCR7c2NoZW1hfSk7XG5cbiAgY29uc3QgZm9ybSA9IG5ldyBGb3JtVmlld2VyLkZvcm0oe1xuICAgIGNvbnRhaW5lcjogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5manMtcGdsLWZvcm0tY29udGFpbmVyXCIpXG4gIH0pO1xuXG4gIGZvcm0ub24oXCJzdWJtaXRcIiwgKGV2ZW50KSA9PiB7XG4gICAgY29uc29sZS5sb2coZXZlbnQuZGF0YSwgZXZlbnQuZXJyb3JzKTtcbiAgfSk7XG5cbiAgZm9ybS5pbXBvcnRTY2hlbWEoc2NoZW1hLCBkYXRhKS5jYXRjaChlcnIgPT4ge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gcmVuZGVyIGZvcm1cIiwgZXJyKTtcbiAgfSk7XG48L3NjcmlwdD5cbiAgYC50cmltKCk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZmllbGRSZWYuY3VycmVudC5zZWxlY3QoKTtcbiAgfSk7XG4gIHJldHVybiBqc3hzKE1vZGFsLCB7XG4gICAgbmFtZTogXCJFbWJlZCBmb3JtXCIsXG4gICAgb25DbG9zZTogcHJvcHMub25DbG9zZSxcbiAgICBjaGlsZHJlbjogW2pzeHMoXCJwXCIsIHtcbiAgICAgIGNoaWxkcmVuOiBbXCJVc2UgdGhlIGZvbGxvd2luZyBIVE1MIHNuaXBwZXQgdG8gZW1iZWQgeW91ciBmb3JtIHdpdGggXCIsIGpzeChcImFcIiwge1xuICAgICAgICBocmVmOiBcImh0dHBzOi8vZ2l0aHViLmNvbS9icG1uLWlvL2Zvcm0tanNcIixcbiAgICAgICAgY2hpbGRyZW46IFwiZm9ybS1qc1wiXG4gICAgICB9KSwgXCI6XCJdXG4gICAgfSksIGpzeChcInRleHRhcmVhXCIsIHtcbiAgICAgIHNwZWxsQ2hlY2s6IFwiZmFsc2VcIixcbiAgICAgIHJlZjogZmllbGRSZWYsXG4gICAgICBjaGlsZHJlbjogc25pcHBldFxuICAgIH0pXVxuICB9KTtcbn1cblxuLy8gaGVscGVycyAvLy8vLy8vLy8vL1xuXG5mdW5jdGlvbiBzZXJpYWxpemVWYWx1ZShvYmopIHtcbiAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KEpTT04uc3RyaW5naWZ5KG9iaikpLnJlcGxhY2UoLzwvZywgJyZsdDsnKS5yZXBsYWNlKC8+L2csICcmZ3Q7Jyk7XG59XG5cbi8qKlxuICogQHR5cGUge0ZhY2V0PGltcG9ydCgnLi4nKS5WYXJpYWJsZXM+fSBWYXJpYWJsZXNcbiAqL1xuY29uc3QgdmFyaWFibGVzRmFjZXQgPSBGYWNldC5kZWZpbmUoKTtcblxuZnVuY3Rpb24gYXV0b2NvbXBsZXRpb25FeHRlbnNpb24oKSB7XG4gIHJldHVybiBbYXV0b2NvbXBsZXRpb24oe1xuICAgIG92ZXJyaWRlOiBbY29tcGxldGlvbnNdXG4gIH0pXTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydCgnQGNvZGVtaXJyb3IvYXV0b2NvbXBsZXRlJykuQ29tcGxldGlvbkNvbnRleHR9IGNvbnRleHRcbiAqL1xuZnVuY3Rpb24gY29tcGxldGlvbnMoY29udGV4dCkge1xuICBjb25zdCB2YXJpYWJsZXMgPSBjb250ZXh0LnN0YXRlLmZhY2V0KHZhcmlhYmxlc0ZhY2V0KVswXTtcbiAgLyoqIEB0eXBlIHtpbXBvcnQoJ0Bjb2RlbWlycm9yL2F1dG9jb21wbGV0ZScpLkNvbXBsZXRpb25bXX0gKi9cbiAgY29uc3Qgb2JqZWN0T3B0aW9ucyA9IHZhcmlhYmxlcy5tYXAobGFiZWwgPT4gKHtcbiAgICBkaXNwbGF5TGFiZWw6IGBcIiR7bGFiZWx9XCJgLFxuICAgIGxhYmVsOiBgXCIke2xhYmVsfVwiOiBgLFxuICAgIHR5cGU6ICd2YXJpYWJsZScsXG4gICAgYXBwbHk6ICh2aWV3LCBjb21wbGV0aW9uLCBmcm9tLCB0bykgPT4ge1xuICAgICAgY29uc3QgZG9jID0gdmlldy5zdGF0ZS5kb2M7XG4gICAgICBjb25zdCBiZWZvcmVDaGFyID0gZG9jLnNsaWNlU3RyaW5nKGZyb20gLSAxLCBmcm9tKTtcbiAgICAgIGNvbnN0IGxpbmUgPSBkb2MubGluZUF0KGZyb20pO1xuICAgICAgY29uc3QgaW5kZW50YXRpb24gPSAvXlxccyovLmV4ZWMobGluZS50ZXh0KVswXTtcbiAgICAgIGNvbnN0IGJhc2VJbnNlcnQgPSBjb21wbGV0aW9uLmxhYmVsO1xuICAgICAgaWYgKGJlZm9yZUNoYXIgPT09ICd7Jykge1xuICAgICAgICBjb25zdCBpbnNlcnQgPSBgXFxuICAke2luZGVudGF0aW9ufSR7YmFzZUluc2VydH0sXFxuYDtcbiAgICAgICAgdmlldy5kaXNwYXRjaCh7XG4gICAgICAgICAgY2hhbmdlczoge1xuICAgICAgICAgICAgZnJvbSxcbiAgICAgICAgICAgIHRvLFxuICAgICAgICAgICAgaW5zZXJ0XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZWxlY3Rpb246IHtcbiAgICAgICAgICAgIGFuY2hvcjogZnJvbSArIGluc2VydC5sZW5ndGggLSAyXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAoYmVmb3JlQ2hhciA9PT0gJywnKSB7XG4gICAgICAgIGNvbnN0IGluc2VydCA9IGBcXG4ke2luZGVudGF0aW9ufSR7YmFzZUluc2VydH0sYDtcbiAgICAgICAgdmlldy5kaXNwYXRjaCh7XG4gICAgICAgICAgY2hhbmdlczoge1xuICAgICAgICAgICAgZnJvbSxcbiAgICAgICAgICAgIHRvLFxuICAgICAgICAgICAgaW5zZXJ0XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZWxlY3Rpb246IHtcbiAgICAgICAgICAgIGFuY2hvcjogZnJvbSArIGluc2VydC5sZW5ndGggLSAxXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGluc2VydCA9IGAke2Jhc2VJbnNlcnR9LGA7XG4gICAgICAgIHZpZXcuZGlzcGF0Y2goe1xuICAgICAgICAgIGNoYW5nZXM6IHtcbiAgICAgICAgICAgIGZyb20sXG4gICAgICAgICAgICB0byxcbiAgICAgICAgICAgIGluc2VydFxuICAgICAgICAgIH0sXG4gICAgICAgICAgc2VsZWN0aW9uOiB7XG4gICAgICAgICAgICBhbmNob3I6IGZyb20gKyBpbnNlcnQubGVuZ3RoIC0gMVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9KSk7XG4gIC8qKiBAdHlwZSB7aW1wb3J0KCdAY29kZW1pcnJvci9hdXRvY29tcGxldGUnKS5Db21wbGV0aW9uW119ICovXG4gIGNvbnN0IHByb3BlcnR5TmFtZU9wdGlvbnMgPSB2YXJpYWJsZXMubWFwKGxhYmVsID0+ICh7XG4gICAgbGFiZWwsXG4gICAgdHlwZTogJ3ZhcmlhYmxlJ1xuICB9KSk7XG4gIC8qKiBAdHlwZSB7aW1wb3J0KCdAY29kZW1pcnJvci9hdXRvY29tcGxldGUnKS5Db21wbGV0aW9uW119ICovXG4gIGNvbnN0IHByb3BlcnR5VmFsdWVPcHRpb25zID0gW3tcbiAgICBsYWJlbDogJ3RydWUnLFxuICAgIHR5cGU6ICdjb25zdGFudCBrZXl3b3JkJyxcbiAgICBib29zdDogM1xuICB9LCB7XG4gICAgbGFiZWw6ICdmYWxzZScsXG4gICAgdHlwZTogJ2NvbnN0YW50IGtleXdvcmQnLFxuICAgIGJvb3N0OiAyXG4gIH0sIHtcbiAgICBsYWJlbDogJ251bGwnLFxuICAgIHR5cGU6ICdjb25zdGFudCBrZXl3b3JkJyxcbiAgICBib29zdDogMVxuICB9LCB7XG4gICAgZGlzcGxheUxhYmVsOiAnWyAuLiBdJyxcbiAgICBsYWJlbDogJ1sgIF0nLFxuICAgIGFwcGx5OiAodmlldywgY29tcGxldGlvbiwgZnJvbSwgdG8pID0+IHtcbiAgICAgIHZpZXcuZGlzcGF0Y2goe1xuICAgICAgICBjaGFuZ2VzOiB7XG4gICAgICAgICAgZnJvbSxcbiAgICAgICAgICB0byxcbiAgICAgICAgICBpbnNlcnQ6IGNvbXBsZXRpb24ubGFiZWxcbiAgICAgICAgfSxcbiAgICAgICAgc2VsZWN0aW9uOiB7XG4gICAgICAgICAgYW5jaG9yOiBmcm9tICsgMlxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBkaXNwbGF5TGFiZWw6ICd7IC4uIH0nLFxuICAgIGxhYmVsOiAneyAgfScsXG4gICAgYXBwbHk6ICh2aWV3LCBjb21wbGV0aW9uLCBmcm9tLCB0bykgPT4ge1xuICAgICAgdmlldy5kaXNwYXRjaCh7XG4gICAgICAgIGNoYW5nZXM6IHtcbiAgICAgICAgICBmcm9tLFxuICAgICAgICAgIHRvLFxuICAgICAgICAgIGluc2VydDogY29tcGxldGlvbi5sYWJlbFxuICAgICAgICB9LFxuICAgICAgICBzZWxlY3Rpb246IHtcbiAgICAgICAgICBhbmNob3I6IGZyb20gKyAyXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfV07XG4gIGxldCBmaW5hbE9wdGlvbnMgPSBbXTtcbiAgbGV0IG5vZGVCZWZvcmUgPSBzeW50YXhUcmVlKGNvbnRleHQuc3RhdGUpLnJlc29sdmUoY29udGV4dC5wb3MsIC0xKTtcbiAgbGV0IHdvcmQgPSBjb250ZXh0Lm1hdGNoQmVmb3JlKC9cXHcqLyk7XG4gIGlmIChbJ09iamVjdCcsICd7J10uaW5jbHVkZXMobm9kZUJlZm9yZS50eXBlLm5hbWUpKSB7XG4gICAgZmluYWxPcHRpb25zID0gb2JqZWN0T3B0aW9ucztcbiAgfVxuICBpZiAobm9kZUJlZm9yZS50eXBlLm5hbWUgPT09ICdQcm9wZXJ0eU5hbWUnKSB7XG4gICAgY29udGV4dC5leHBsaWNpdCA9IHRydWU7XG4gICAgZmluYWxPcHRpb25zID0gcHJvcGVydHlOYW1lT3B0aW9ucztcbiAgfVxuICBpZiAoWydQcm9wZXJ0eScsICdbJywgJ0FycmF5J10uaW5jbHVkZXMobm9kZUJlZm9yZS50eXBlLm5hbWUpKSB7XG4gICAgZmluYWxPcHRpb25zID0gcHJvcGVydHlWYWx1ZU9wdGlvbnM7XG4gIH1cbiAgaWYgKHdvcmQuZnJvbSA9PSB3b3JkLnRvICYmICFjb250ZXh0LmV4cGxpY2l0KSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBmcm9tOiB3b3JkLmZyb20sXG4gICAgb3B0aW9uczogZmluYWxPcHRpb25zXG4gIH07XG59XG5cbmNvbnN0IE5PX0xJTlRfQ0xTID0gJ2Zqcy1jbS1uby1saW50JztcblxuLyoqXG4gKiBAcGFyYW0ge29iamVjdH0gb3B0aW9uc1xuICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5yZWFkb25seV1cbiAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9ucy5jb250ZW50QXR0cmlidXRlc11cbiAqIEBwYXJhbSB7c3RyaW5nIHwgSFRNTEVsZW1lbnR9IFtvcHRpb25zLnBsYWNlaG9sZGVyXVxuICovXG5mdW5jdGlvbiBKU09ORWRpdG9yKG9wdGlvbnMgPSB7fSkge1xuICBjb25zdCB7XG4gICAgY29udGVudEF0dHJpYnV0ZXMgPSB7fSxcbiAgICBwbGFjZWhvbGRlcjogZWRpdG9yUGxhY2Vob2xkZXIsXG4gICAgcmVhZG9ubHkgPSBmYWxzZVxuICB9ID0gb3B0aW9ucztcbiAgY29uc3QgZW1pdHRlciA9IG1pdHQoKTtcbiAgY29uc3QgbGFuZ3VhZ2VDb21wYXJ0bWVudCA9IG5ldyBDb21wYXJ0bWVudCgpLm9mKGpzb24oKSk7XG4gIGNvbnN0IHRhYlNpemVDb21wYXJ0bWVudCA9IG5ldyBDb21wYXJ0bWVudCgpLm9mKEVkaXRvclN0YXRlLnRhYlNpemUub2YoMikpO1xuICBjb25zdCBhdXRvY29tcGxldGlvbkNvbmZDb21wYXJ0bWVudCA9IG5ldyBDb21wYXJ0bWVudCgpO1xuICBjb25zdCBwbGFjZWhvbGRlckxpbnRlckV4dGVuc2lvbiA9IGNyZWF0ZVBsYWNlaG9sZGVyTGludGVyRXh0ZW5zaW9uKCk7XG4gIGxldCBjb250YWluZXIgPSBudWxsO1xuICBmdW5jdGlvbiBjcmVhdGVTdGF0ZShkb2MsIHZhcmlhYmxlcyA9IFtdKSB7XG4gICAgY29uc3QgZXh0ZW5zaW9ucyA9IFtiYXNpY1NldHVwLCBsYW5ndWFnZUNvbXBhcnRtZW50LCB0YWJTaXplQ29tcGFydG1lbnQsIGxpbnRHdXR0ZXIoKSwgbGludGVyKGpzb25QYXJzZUxpbnRlcigpKSwgcGxhY2Vob2xkZXJMaW50ZXJFeHRlbnNpb24sIGF1dG9jb21wbGV0aW9uQ29uZkNvbXBhcnRtZW50Lm9mKHZhcmlhYmxlc0ZhY2V0Lm9mKHZhcmlhYmxlcykpLCBhdXRvY29tcGxldGlvbkV4dGVuc2lvbigpLCBrZXltYXAub2YoW2luZGVudFdpdGhUYWJdKSwgZWRpdG9yUGxhY2Vob2xkZXIgPyBwbGFjZWhvbGRlcihlZGl0b3JQbGFjZWhvbGRlcikgOiBbXSwgRWRpdG9yU3RhdGUucmVhZE9ubHkub2YocmVhZG9ubHkpLCBFZGl0b3JWaWV3LnVwZGF0ZUxpc3RlbmVyLm9mKHVwZGF0ZSA9PiB7XG4gICAgICBpZiAodXBkYXRlLmRvY0NoYW5nZWQpIHtcbiAgICAgICAgZW1pdHRlci5lbWl0KCdjaGFuZ2VkJywge1xuICAgICAgICAgIHZhbHVlOiB1cGRhdGUuc3RhdGUuZG9jLnRvU3RyaW5nKClcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSksIEVkaXRvclZpZXcuY29udGVudEF0dHJpYnV0ZXMub2YoY29udGVudEF0dHJpYnV0ZXMpXTtcbiAgICByZXR1cm4gRWRpdG9yU3RhdGUuY3JlYXRlKHtcbiAgICAgIGRvYyxcbiAgICAgIGV4dGVuc2lvbnNcbiAgICB9KTtcbiAgfVxuICBjb25zdCB2aWV3ID0gbmV3IEVkaXRvclZpZXcoe1xuICAgIHN0YXRlOiBjcmVhdGVTdGF0ZSgnJylcbiAgfSk7XG4gIHRoaXMuc2V0VmFsdWUgPSBmdW5jdGlvbiAobmV3VmFsdWUpIHtcbiAgICBjb25zdCBvbGRWYWx1ZSA9IHZpZXcuc3RhdGUuZG9jLnRvU3RyaW5nKCk7XG4gICAgY29uc3QgZGlmZiA9IGZpbmREaWZmKG9sZFZhbHVlLCBuZXdWYWx1ZSk7XG4gICAgaWYgKGRpZmYpIHtcbiAgICAgIHZpZXcuZGlzcGF0Y2goe1xuICAgICAgICBjaGFuZ2VzOiB7XG4gICAgICAgICAgZnJvbTogZGlmZi5zdGFydCxcbiAgICAgICAgICB0bzogZGlmZi5lbmQsXG4gICAgICAgICAgaW5zZXJ0OiBkaWZmLnRleHRcbiAgICAgICAgfSxcbiAgICAgICAgc2VsZWN0aW9uOiB7XG4gICAgICAgICAgYW5jaG9yOiBkaWZmLnN0YXJ0ICsgZGlmZi50ZXh0Lmxlbmd0aFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG4gIHRoaXMuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHZpZXcuc3RhdGUuZG9jLnRvU3RyaW5nKCk7XG4gIH07XG4gIHRoaXMuc2V0VmFyaWFibGVzID0gZnVuY3Rpb24gKHZhcmlhYmxlcykge1xuICAgIHZpZXcuZGlzcGF0Y2goe1xuICAgICAgZWZmZWN0czogYXV0b2NvbXBsZXRpb25Db25mQ29tcGFydG1lbnQucmVjb25maWd1cmUodmFyaWFibGVzRmFjZXQub2YodmFyaWFibGVzKSlcbiAgICB9KTtcbiAgfTtcbiAgdGhpcy5nZXRWaWV3ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB2aWV3O1xuICB9O1xuICB0aGlzLm9uID0gZW1pdHRlci5vbjtcbiAgdGhpcy5vZmYgPSBlbWl0dGVyLm9mZjtcbiAgdGhpcy5lbWl0ID0gZW1pdHRlci5lbWl0O1xuICB0aGlzLmF0dGFjaFRvID0gZnVuY3Rpb24gKF9jb250YWluZXIpIHtcbiAgICBjb250YWluZXIgPSBfY29udGFpbmVyO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh2aWV3LmRvbSk7XG4gICAgY2xhc3Nlcyhjb250YWluZXIsIGRvY3VtZW50LmJvZHkpLmFkZCgnZmpzLWpzb24tZWRpdG9yJyk7XG4gIH07XG4gIHRoaXMuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoY29udGFpbmVyICYmIHZpZXcuZG9tKSB7XG4gICAgICBjb250YWluZXIucmVtb3ZlQ2hpbGQodmlldy5kb20pO1xuICAgICAgY2xhc3Nlcyhjb250YWluZXIsIGRvY3VtZW50LmJvZHkpLnJlbW92ZSgnZmpzLWpzb24tZWRpdG9yJyk7XG4gICAgfVxuICAgIHZpZXcuZGVzdHJveSgpO1xuICB9O1xuICBmdW5jdGlvbiBjcmVhdGVQbGFjZWhvbGRlckxpbnRlckV4dGVuc2lvbigpIHtcbiAgICByZXR1cm4gbGludGVyKHZpZXcgPT4ge1xuICAgICAgY29uc3QgcGxhY2Vob2xkZXJzID0gdmlldy5kb20ucXVlcnlTZWxlY3RvckFsbCgnLmNtLXBsYWNlaG9sZGVyJyk7XG4gICAgICBpZiAocGxhY2Vob2xkZXJzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY2xhc3Nlcyhjb250YWluZXIsIGRvY3VtZW50LmJvZHkpLmFkZChOT19MSU5UX0NMUyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjbGFzc2VzKGNvbnRhaW5lciwgZG9jdW1lbnQuYm9keSkucmVtb3ZlKE5PX0xJTlRfQ0xTKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBbXTtcbiAgICB9KTtcbiAgfVxufVxuZnVuY3Rpb24gZmluZERpZmYob2xkU3RyLCBuZXdTdHIpIHtcbiAgaWYgKG9sZFN0ciA9PT0gbmV3U3RyKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgb2xkU3RyID0gb2xkU3RyIHx8ICcnO1xuICBuZXdTdHIgPSBuZXdTdHIgfHwgJyc7XG4gIGxldCBtaW5MZW5ndGggPSBNYXRoLm1pbihvbGRTdHIubGVuZ3RoLCBuZXdTdHIubGVuZ3RoKTtcbiAgbGV0IHN0YXJ0ID0gMDtcbiAgd2hpbGUgKHN0YXJ0IDwgbWluTGVuZ3RoICYmIG9sZFN0cltzdGFydF0gPT09IG5ld1N0cltzdGFydF0pIHtcbiAgICBzdGFydCsrO1xuICB9XG4gIGlmIChzdGFydCA9PT0gbWluTGVuZ3RoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXJ0OiBzdGFydCxcbiAgICAgIHRleHQ6IG5ld1N0ci5zbGljZShzdGFydCksXG4gICAgICBlbmQ6IG9sZFN0ci5sZW5ndGhcbiAgICB9O1xuICB9XG4gIGxldCBlbmRPbGQgPSBvbGRTdHIubGVuZ3RoO1xuICBsZXQgZW5kTmV3ID0gbmV3U3RyLmxlbmd0aDtcbiAgd2hpbGUgKGVuZE9sZCA+IHN0YXJ0ICYmIGVuZE5ldyA+IHN0YXJ0ICYmIG9sZFN0cltlbmRPbGQgLSAxXSA9PT0gbmV3U3RyW2VuZE5ldyAtIDFdKSB7XG4gICAgZW5kT2xkLS07XG4gICAgZW5kTmV3LS07XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBzdGFydDogc3RhcnQsXG4gICAgdGV4dDogbmV3U3RyLnNsaWNlKHN0YXJ0LCBlbmROZXcpLFxuICAgIGVuZDogZW5kT2xkXG4gIH07XG59XG5cbmZ1bmN0aW9uIFNlY3Rpb24ocHJvcHMpIHtcbiAgY29uc3QgZWxlbWVudHMgPSBBcnJheS5pc0FycmF5KHByb3BzLmNoaWxkcmVuKSA/IHByb3BzLmNoaWxkcmVuIDogW3Byb3BzLmNoaWxkcmVuXTtcbiAgY29uc3Qge1xuICAgIGhlYWRlckl0ZW1zLFxuICAgIGNoaWxkcmVuXG4gIH0gPSBlbGVtZW50cy5yZWR1Y2UoKF8sIGNoaWxkKSA9PiB7XG4gICAgY29uc3QgYnVja2V0ID0gY2hpbGQudHlwZSA9PT0gU2VjdGlvbi5IZWFkZXJJdGVtID8gXy5oZWFkZXJJdGVtcyA6IF8uY2hpbGRyZW47XG4gICAgYnVja2V0LnB1c2goY2hpbGQpO1xuICAgIHJldHVybiBfO1xuICB9LCB7XG4gICAgaGVhZGVySXRlbXM6IFtdLFxuICAgIGNoaWxkcmVuOiBbXVxuICB9KTtcbiAgcmV0dXJuIGpzeHMoXCJkaXZcIiwge1xuICAgIGNsYXNzOiBcImZqcy1wZ2wtc2VjdGlvblwiLFxuICAgIGNoaWxkcmVuOiBbanN4cyhcImgxXCIsIHtcbiAgICAgIGNsYXNzOiBcImhlYWRlclwiLFxuICAgICAgY2hpbGRyZW46IFtwcm9wcy5uYW1lLCBcIiBcIiwgaGVhZGVySXRlbXMubGVuZ3RoID8ganN4KFwic3BhblwiLCB7XG4gICAgICAgIGNsYXNzOiBcImhlYWRlci1pdGVtc1wiLFxuICAgICAgICBjaGlsZHJlbjogaGVhZGVySXRlbXNcbiAgICAgIH0pIDogbnVsbF1cbiAgICB9KSwganN4KFwiZGl2XCIsIHtcbiAgICAgIGNsYXNzOiBcImJvZHlcIixcbiAgICAgIGNoaWxkcmVuOiBjaGlsZHJlblxuICAgIH0pXVxuICB9KTtcbn1cblNlY3Rpb24uSGVhZGVySXRlbSA9IGZ1bmN0aW9uIChwcm9wcykge1xuICByZXR1cm4gcHJvcHMuY2hpbGRyZW47XG59O1xuXG5mdW5jdGlvbiBQbGF5Z3JvdW5kUm9vdChjb25maWcpIHtcbiAgY29uc3Qge1xuICAgIGFkZGl0aW9uYWxNb2R1bGVzLFxuICAgIC8vIGdvZXMgaW50byBib3RoIGVkaXRvciArIHZpZXdlclxuICAgIGFjdGlvbnM6IGFjdGlvbnNDb25maWcsXG4gICAgZW1pdCxcbiAgICBleHBvcnRlcjogZXhwb3J0ZXJDb25maWcsXG4gICAgdmlld2VyUHJvcGVydGllcyxcbiAgICBlZGl0b3JQcm9wZXJ0aWVzLFxuICAgIHZpZXdlckFkZGl0aW9uYWxNb2R1bGVzLFxuICAgIGVkaXRvckFkZGl0aW9uYWxNb2R1bGVzLFxuICAgIHByb3BlcnRpZXNQYW5lbDogcHJvcGVydGllc1BhbmVsQ29uZmlnLFxuICAgIGFwaUxpbmtUYXJnZXQsXG4gICAgb25Jbml0XG4gIH0gPSBjb25maWc7XG4gIGNvbnN0IHtcbiAgICBkaXNwbGF5OiBkaXNwbGF5QWN0aW9ucyA9IHRydWVcbiAgfSA9IGFjdGlvbnNDb25maWcgfHwge307XG4gIGNvbnN0IGVkaXRvckNvbnRhaW5lclJlZiA9IHVzZVJlZigpO1xuICBjb25zdCBwYWxldHRlQ29udGFpbmVyUmVmID0gdXNlUmVmKCk7XG4gIGNvbnN0IHByb3BlcnRpZXNQYW5lbENvbnRhaW5lclJlZiA9IHVzZVJlZigpO1xuICBjb25zdCB2aWV3ZXJDb250YWluZXJSZWYgPSB1c2VSZWYoKTtcbiAgY29uc3QgaW5wdXREYXRhQ29udGFpbmVyUmVmID0gdXNlUmVmKCk7XG4gIGNvbnN0IG91dHB1dERhdGFDb250YWluZXJSZWYgPSB1c2VSZWYoKTtcbiAgY29uc3QgZm9ybUVkaXRvclJlZiA9IHVzZVJlZigpO1xuICBjb25zdCBmb3JtVmlld2VyUmVmID0gdXNlUmVmKCk7XG4gIGNvbnN0IGlucHV0RGF0YVJlZiA9IHVzZVJlZigpO1xuICBjb25zdCBvdXRwdXREYXRhUmVmID0gdXNlUmVmKCk7XG4gIGNvbnN0IFtzaG93RW1iZWQsIHNldFNob3dFbWJlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtzY2hlbWEsIHNldFNjaGVtYV0gPSB1c2VTdGF0ZSgpO1xuICBjb25zdCBbZGF0YSwgc2V0RGF0YV0gPSB1c2VTdGF0ZSgpO1xuICBjb25zdCBsb2FkID0gdXNlQ2FsbGJhY2soKHNjaGVtYSwgZGF0YSkgPT4ge1xuICAgIGZvcm1FZGl0b3JSZWYuY3VycmVudC5pbXBvcnRTY2hlbWEoc2NoZW1hLCBkYXRhKTtcbiAgICBpbnB1dERhdGFSZWYuY3VycmVudC5zZXRWYWx1ZSh0b1N0cmluZyhkYXRhKSk7XG4gICAgc2V0U2NoZW1hKHNjaGVtYSk7XG4gICAgc2V0RGF0YShkYXRhKTtcbiAgfSwgW10pO1xuXG4gIC8vIGluaXRpYWxpemUgYW5kIGxpbmsgdGhlIGVkaXRvcnNcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBpbnB1dERhdGFFZGl0b3IgPSBpbnB1dERhdGFSZWYuY3VycmVudCA9IG5ldyBKU09ORWRpdG9yKHtcbiAgICAgIGNvbnRlbnRBdHRyaWJ1dGVzOiB7XG4gICAgICAgICdhcmlhLWxhYmVsJzogJ0Zvcm0gSW5wdXQnLFxuICAgICAgICB0YWJJbmRleDogMFxuICAgICAgfSxcbiAgICAgIHBsYWNlaG9sZGVyOiBjcmVhdGVEYXRhRWRpdG9yUGxhY2Vob2xkZXIoKVxuICAgIH0pO1xuICAgIGNvbnN0IG91dHB1dERhdGFFZGl0b3IgPSBvdXRwdXREYXRhUmVmLmN1cnJlbnQgPSBuZXcgSlNPTkVkaXRvcih7XG4gICAgICByZWFkb25seTogdHJ1ZSxcbiAgICAgIGNvbnRlbnRBdHRyaWJ1dGVzOiB7XG4gICAgICAgICdhcmlhLWxhYmVsJzogJ0Zvcm0gT3V0cHV0JyxcbiAgICAgICAgdGFiSW5kZXg6IDBcbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBmb3JtVmlld2VyID0gZm9ybVZpZXdlclJlZi5jdXJyZW50ID0gbmV3IEZvcm0oe1xuICAgICAgY29udGFpbmVyOiB2aWV3ZXJDb250YWluZXJSZWYuY3VycmVudCxcbiAgICAgIGFkZGl0aW9uYWxNb2R1bGVzOiBbLi4uKGFkZGl0aW9uYWxNb2R1bGVzIHx8IFtdKSwgLi4uKHZpZXdlckFkZGl0aW9uYWxNb2R1bGVzIHx8IFtdKV0sXG4gICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgIC4uLih2aWV3ZXJQcm9wZXJ0aWVzIHx8IHt9KSxcbiAgICAgICAgYXJpYUxhYmVsOiAnRm9ybSBQcmV2aWV3J1xuICAgICAgfVxuICAgIH0pO1xuICAgIGNvbnN0IGZvcm1FZGl0b3IgPSBmb3JtRWRpdG9yUmVmLmN1cnJlbnQgPSBuZXcgRm9ybUVkaXRvcih7XG4gICAgICBjb250YWluZXI6IGVkaXRvckNvbnRhaW5lclJlZi5jdXJyZW50LFxuICAgICAgcmVuZGVyZXI6IHtcbiAgICAgICAgY29tcGFjdDogdHJ1ZVxuICAgICAgfSxcbiAgICAgIHBhbGV0dGU6IHtcbiAgICAgICAgcGFyZW50OiBwYWxldHRlQ29udGFpbmVyUmVmLmN1cnJlbnRcbiAgICAgIH0sXG4gICAgICBwcm9wZXJ0aWVzUGFuZWw6IHtcbiAgICAgICAgcGFyZW50OiBwcm9wZXJ0aWVzUGFuZWxDb250YWluZXJSZWYuY3VycmVudCxcbiAgICAgICAgLi4uKHByb3BlcnRpZXNQYW5lbENvbmZpZyB8fCB7fSlcbiAgICAgIH0sXG4gICAgICBleHBvcnRlcjogZXhwb3J0ZXJDb25maWcsXG4gICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgIC4uLihlZGl0b3JQcm9wZXJ0aWVzIHx8IHt9KSxcbiAgICAgICAgYXJpYUxhYmVsOiAnRm9ybSBEZWZpbml0aW9uJ1xuICAgICAgfSxcbiAgICAgIGFkZGl0aW9uYWxNb2R1bGVzOiBbLi4uKGFkZGl0aW9uYWxNb2R1bGVzIHx8IFtdKSwgLi4uKGVkaXRvckFkZGl0aW9uYWxNb2R1bGVzIHx8IFtdKV1cbiAgICB9KTtcbiAgICBmb3JtRWRpdG9yLm9uKCdmb3JtRmllbGQuYWRkJywgKHtcbiAgICAgIGZvcm1GaWVsZFxuICAgIH0pID0+IHtcbiAgICAgIGNvbnN0IGZvcm1GaWVsZHMgPSBmb3JtRWRpdG9yLmdldCgnZm9ybUZpZWxkcycpO1xuICAgICAgY29uc3Qge1xuICAgICAgICBjb25maWdcbiAgICAgIH0gPSBmb3JtRmllbGRzLmdldChmb3JtRmllbGQudHlwZSk7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGdlbmVyYXRlSW5pdGlhbERlbW9EYXRhXG4gICAgICB9ID0gY29uZmlnO1xuICAgICAgY29uc3Qge1xuICAgICAgICBpZFxuICAgICAgfSA9IGZvcm1GaWVsZDtcbiAgICAgIGlmICghaXNGdW5jdGlvbihnZW5lcmF0ZUluaXRpYWxEZW1vRGF0YSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgaW5pdGlhbERlbW9EYXRhID0gZ2VuZXJhdGVJbml0aWFsRGVtb0RhdGEoZm9ybUZpZWxkKTtcbiAgICAgIGlmIChbaW5pdGlhbERlbW9EYXRhLCBpZF0uaW5jbHVkZXModW5kZWZpbmVkKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBzZXREYXRhKGN1cnJlbnREYXRhID0+IHtcbiAgICAgICAgY29uc3QgbmV3RGF0YSA9IHtcbiAgICAgICAgICAuLi5jdXJyZW50RGF0YSxcbiAgICAgICAgICBbaWRdOiBpbml0aWFsRGVtb0RhdGFcbiAgICAgICAgfTtcbiAgICAgICAgaW5wdXREYXRhUmVmLmN1cnJlbnQuc2V0VmFsdWUodG9TdHJpbmcobmV3RGF0YSkpO1xuICAgICAgICByZXR1cm4gbmV3RGF0YTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIGZvcm1FZGl0b3Iub24oJ2NoYW5nZWQnLCAoKSA9PiB7XG4gICAgICBzZXRTY2hlbWEoZm9ybUVkaXRvci5nZXRTY2hlbWEoKSk7XG4gICAgfSk7XG4gICAgZm9ybUVkaXRvci5vbignZm9ybUVkaXRvci5yZW5kZXJlZCcsICgpID0+IHtcbiAgICAgIC8vIG5vdGlmeSBpbnRlcmVzdGVkIHBhcnRpZXMgYWZ0ZXIgcmVuZGVyXG4gICAgICBlbWl0KCdmb3JtUGxheWdyb3VuZC5yZW5kZXJlZCcpO1xuICAgIH0pO1xuICAgIGNvbnN0IHVwZGF0ZU91dHB1dERhdGEgPSAoKSA9PiB7XG4gICAgICBjb25zdCBzdWJtaXREYXRhID0gZm9ybVZpZXdlci5fZ2V0U3VibWl0RGF0YSgpO1xuICAgICAgb3V0cHV0RGF0YUVkaXRvci5zZXRWYWx1ZSh0b1N0cmluZyhzdWJtaXREYXRhKSk7XG4gICAgfTtcblxuICAgIC8vIHBpcGUgdmlld2VyIGNoYW5nZXMgdG8gb3V0cHV0IGRhdGEgZWRpdG9yXG4gICAgZm9ybVZpZXdlci5vbignY2hhbmdlZCcsIHVwZGF0ZU91dHB1dERhdGEpO1xuICAgIGZvcm1WaWV3ZXIub24oJ2Zvcm1GaWVsZEluc3RhbmNlLmFkZGVkJywgdXBkYXRlT3V0cHV0RGF0YSk7XG4gICAgZm9ybVZpZXdlci5vbignZm9ybUZpZWxkSW5zdGFuY2UucmVtb3ZlZCcsIHVwZGF0ZU91dHB1dERhdGEpO1xuICAgIGlucHV0RGF0YUVkaXRvci5vbignY2hhbmdlZCcsIGV2ZW50ID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHNldERhdGEoSlNPTi5wYXJzZShldmVudC52YWx1ZSkpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgLy8gbm90aWZ5IGludGVyZXN0ZWQgYWJvdXQgaW5wdXQgZGF0YSBlcnJvclxuICAgICAgICBlbWl0KCdmb3JtUGxheWdyb3VuZC5pbnB1dERhdGFFcnJvcicsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBpbnB1dERhdGFFZGl0b3IuYXR0YWNoVG8oaW5wdXREYXRhQ29udGFpbmVyUmVmLmN1cnJlbnQpO1xuICAgIG91dHB1dERhdGFFZGl0b3IuYXR0YWNoVG8ob3V0cHV0RGF0YUNvbnRhaW5lclJlZi5jdXJyZW50KTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaW5wdXREYXRhRWRpdG9yLmRlc3Ryb3koKTtcbiAgICAgIG91dHB1dERhdGFFZGl0b3IuZGVzdHJveSgpO1xuICAgICAgZm9ybVZpZXdlci5kZXN0cm95KCk7XG4gICAgICBmb3JtRWRpdG9yLmRlc3Ryb3koKTtcbiAgICB9O1xuICB9LCBbYWRkaXRpb25hbE1vZHVsZXMsIGVkaXRvckFkZGl0aW9uYWxNb2R1bGVzLCBlZGl0b3JQcm9wZXJ0aWVzLCBlbWl0LCBleHBvcnRlckNvbmZpZywgcHJvcGVydGllc1BhbmVsQ29uZmlnLCB2aWV3ZXJBZGRpdGlvbmFsTW9kdWxlcywgdmlld2VyUHJvcGVydGllc10pO1xuXG4gIC8vIGluaXRpYWxpemUgZGF0YSB0aHJvdWdoIHByb3BzXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFjb25maWcuaW5pdGlhbFNjaGVtYSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsb2FkKGNvbmZpZy5pbml0aWFsU2NoZW1hLCBjb25maWcuaW5pdGlhbERhdGEgfHwge30pO1xuICB9LCBbY29uZmlnLmluaXRpYWxTY2hlbWEsIGNvbmZpZy5pbml0aWFsRGF0YSwgbG9hZF0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNjaGVtYSAmJiBmb3JtVmlld2VyUmVmLmN1cnJlbnQuaW1wb3J0U2NoZW1hKHNjaGVtYSwgZGF0YSk7XG4gIH0sIFtzY2hlbWEsIGRhdGFdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoc2NoZW1hICYmIGlucHV0RGF0YUNvbnRhaW5lclJlZi5jdXJyZW50KSB7XG4gICAgICBjb25zdCB2YXJpYWJsZXMgPSBnZXRTY2hlbWFWYXJpYWJsZXMoc2NoZW1hKTtcbiAgICAgIGlucHV0RGF0YVJlZi5jdXJyZW50LnNldFZhcmlhYmxlcyh2YXJpYWJsZXMpO1xuICAgIH1cbiAgfSwgW3NjaGVtYV0pO1xuXG4gIC8vIGV4cG9zZXMgYXBpIHRvIHBhcmVudFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghYXBpTGlua1RhcmdldCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhcGlMaW5rVGFyZ2V0LmFwaSA9IHtcbiAgICAgIGF0dGFjaERhdGFDb250YWluZXI6IG5vZGUgPT4gaW5wdXREYXRhUmVmLmN1cnJlbnQuYXR0YWNoVG8obm9kZSksXG4gICAgICBhdHRhY2hSZXN1bHRDb250YWluZXI6IG5vZGUgPT4gb3V0cHV0RGF0YVJlZi5jdXJyZW50LmF0dGFjaFRvKG5vZGUpLFxuICAgICAgYXR0YWNoRm9ybUNvbnRhaW5lcjogbm9kZSA9PiBmb3JtVmlld2VyUmVmLmN1cnJlbnQuYXR0YWNoVG8obm9kZSksXG4gICAgICBhdHRhY2hFZGl0b3JDb250YWluZXI6IG5vZGUgPT4gZm9ybUVkaXRvclJlZi5jdXJyZW50LmF0dGFjaFRvKG5vZGUpLFxuICAgICAgYXR0YWNoUGFsZXR0ZUNvbnRhaW5lcjogbm9kZSA9PiBmb3JtRWRpdG9yUmVmLmN1cnJlbnQuZ2V0KCdwYWxldHRlJykuYXR0YWNoVG8obm9kZSksXG4gICAgICBhdHRhY2hQcm9wZXJ0aWVzUGFuZWxDb250YWluZXI6IG5vZGUgPT4gZm9ybUVkaXRvclJlZi5jdXJyZW50LmdldCgncHJvcGVydGllc1BhbmVsJykuYXR0YWNoVG8obm9kZSksXG4gICAgICBnZXQ6IChuYW1lLCBzdHJpY3QpID0+IGZvcm1FZGl0b3JSZWYuY3VycmVudC5nZXQobmFtZSwgc3RyaWN0KSxcbiAgICAgIGdldERhdGFFZGl0b3I6ICgpID0+IGlucHV0RGF0YVJlZi5jdXJyZW50LFxuICAgICAgZ2V0RWRpdG9yOiAoKSA9PiBmb3JtRWRpdG9yUmVmLmN1cnJlbnQsXG4gICAgICBnZXRGb3JtOiAoKSA9PiBmb3JtVmlld2VyUmVmLmN1cnJlbnQsXG4gICAgICBnZXRSZXN1bHRWaWV3OiAoKSA9PiBvdXRwdXREYXRhUmVmLmN1cnJlbnQsXG4gICAgICBnZXRTY2hlbWE6ICgpID0+IGZvcm1FZGl0b3JSZWYuY3VycmVudC5nZXRTY2hlbWEoKSxcbiAgICAgIHNhdmVTY2hlbWE6ICgpID0+IGZvcm1FZGl0b3JSZWYuY3VycmVudC5zYXZlU2NoZW1hKCksXG4gICAgICBzZXRTY2hlbWE6IHNldFNjaGVtYSxcbiAgICAgIHNldERhdGE6IHNldERhdGFcbiAgICB9O1xuICAgIG9uSW5pdCgpO1xuICB9LCBbYXBpTGlua1RhcmdldCwgb25Jbml0XSk7XG5cbiAgLy8gc2VwYXJhdGUgZWZmZWN0IGZvciBzdGF0ZSB0byBhdm9pZCByZS1jcmVhdGluZyB0aGUgYXBpIG9iamVjdCBldmVyeSB0aW1lXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFhcGlMaW5rVGFyZ2V0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGFwaUxpbmtUYXJnZXQuYXBpLmdldFN0YXRlID0gKCkgPT4gKHtcbiAgICAgIHNjaGVtYSxcbiAgICAgIGRhdGFcbiAgICB9KTtcbiAgICBhcGlMaW5rVGFyZ2V0LmFwaS5sb2FkID0gbG9hZDtcbiAgfSwgW2FwaUxpbmtUYXJnZXQsIHNjaGVtYSwgZGF0YSwgbG9hZF0pO1xuICBjb25zdCBoYW5kbGVEb3dubG9hZCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBkb3dubG9hZChKU09OLnN0cmluZ2lmeShzY2hlbWEsIG51bGwsICcgICcpLCAnZm9ybS5qc29uJywgJ3RleHQvanNvbicpO1xuICB9LCBbc2NoZW1hXSk7XG4gIGNvbnN0IGhpZGVFbWJlZE1vZGFsID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldFNob3dFbWJlZChmYWxzZSk7XG4gIH0sIFtdKTtcbiAgY29uc3Qgc2hvd0VtYmVkTW9kYWwgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0U2hvd0VtYmVkKHRydWUpO1xuICB9LCBbXSk7XG4gIHJldHVybiBqc3hzKFwiZGl2XCIsIHtcbiAgICBjbGFzczogY2xhc3NOYW1lcygnZmpzLWNvbnRhaW5lcicsICdmanMtcGdsLXJvb3QnKSxcbiAgICBjaGlsZHJlbjogW2pzeChcImRpdlwiLCB7XG4gICAgICBjbGFzczogXCJmanMtcGdsLW1vZGFsc1wiLFxuICAgICAgY2hpbGRyZW46IHNob3dFbWJlZCA/IGpzeChFbWJlZE1vZGFsLCB7XG4gICAgICAgIHNjaGVtYTogc2NoZW1hLFxuICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICBvbkNsb3NlOiBoaWRlRW1iZWRNb2RhbFxuICAgICAgfSkgOiBudWxsXG4gICAgfSksIGpzeChcImRpdlwiLCB7XG4gICAgICBjbGFzczogXCJmanMtcGdsLXBhbGV0dGUtY29udGFpbmVyXCIsXG4gICAgICByZWY6IHBhbGV0dGVDb250YWluZXJSZWZcbiAgICB9KSwganN4cyhcImRpdlwiLCB7XG4gICAgICBjbGFzczogXCJmanMtcGdsLW1haW5cIixcbiAgICAgIGNoaWxkcmVuOiBbanN4cyhTZWN0aW9uLCB7XG4gICAgICAgIG5hbWU6IFwiRm9ybSBEZWZpbml0aW9uXCIsXG4gICAgICAgIGNoaWxkcmVuOiBbZGlzcGxheUFjdGlvbnMgJiYganN4KFNlY3Rpb24uSGVhZGVySXRlbSwge1xuICAgICAgICAgIGNoaWxkcmVuOiBqc3goXCJidXR0b25cIiwge1xuICAgICAgICAgICAgdHlwZTogXCJidXR0b25cIixcbiAgICAgICAgICAgIGNsYXNzOiBcImZqcy1wZ2wtYnV0dG9uXCIsXG4gICAgICAgICAgICB0aXRsZTogXCJEb3dubG9hZCBmb3JtIGRlZmluaXRpb25cIixcbiAgICAgICAgICAgIG9uQ2xpY2s6IGhhbmRsZURvd25sb2FkLFxuICAgICAgICAgICAgY2hpbGRyZW46IFwiRG93bmxvYWRcIlxuICAgICAgICAgIH0pXG4gICAgICAgIH0pLCBkaXNwbGF5QWN0aW9ucyAmJiBqc3goU2VjdGlvbi5IZWFkZXJJdGVtLCB7XG4gICAgICAgICAgY2hpbGRyZW46IGpzeChcImJ1dHRvblwiLCB7XG4gICAgICAgICAgICB0eXBlOiBcImJ1dHRvblwiLFxuICAgICAgICAgICAgY2xhc3M6IFwiZmpzLXBnbC1idXR0b25cIixcbiAgICAgICAgICAgIG9uQ2xpY2s6IHNob3dFbWJlZE1vZGFsLFxuICAgICAgICAgICAgY2hpbGRyZW46IFwiRW1iZWRcIlxuICAgICAgICAgIH0pXG4gICAgICAgIH0pLCBqc3goXCJkaXZcIiwge1xuICAgICAgICAgIHJlZjogZWRpdG9yQ29udGFpbmVyUmVmLFxuICAgICAgICAgIGNsYXNzOiBcImZqcy1wZ2wtZm9ybS1jb250YWluZXJcIlxuICAgICAgICB9KV1cbiAgICAgIH0pLCBqc3goU2VjdGlvbiwge1xuICAgICAgICBuYW1lOiBcIkZvcm0gUHJldmlld1wiLFxuICAgICAgICBjaGlsZHJlbjoganN4KFwiZGl2XCIsIHtcbiAgICAgICAgICByZWY6IHZpZXdlckNvbnRhaW5lclJlZixcbiAgICAgICAgICBjbGFzczogXCJmanMtcGdsLWZvcm0tY29udGFpbmVyXCJcbiAgICAgICAgfSlcbiAgICAgIH0pLCBqc3goU2VjdGlvbiwge1xuICAgICAgICBuYW1lOiBcIkZvcm0gSW5wdXRcIixcbiAgICAgICAgY2hpbGRyZW46IGpzeChcImRpdlwiLCB7XG4gICAgICAgICAgcmVmOiBpbnB1dERhdGFDb250YWluZXJSZWYsXG4gICAgICAgICAgY2xhc3M6IFwiZmpzLXBnbC10ZXh0LWNvbnRhaW5lclwiXG4gICAgICAgIH0pXG4gICAgICB9KSwganN4KFNlY3Rpb24sIHtcbiAgICAgICAgbmFtZTogXCJGb3JtIE91dHB1dFwiLFxuICAgICAgICBjaGlsZHJlbjoganN4KFwiZGl2XCIsIHtcbiAgICAgICAgICByZWY6IG91dHB1dERhdGFDb250YWluZXJSZWYsXG4gICAgICAgICAgY2xhc3M6IFwiZmpzLXBnbC10ZXh0LWNvbnRhaW5lclwiXG4gICAgICAgIH0pXG4gICAgICB9KV1cbiAgICB9KSwganN4KFwiZGl2XCIsIHtcbiAgICAgIGNsYXNzOiBcImZqcy1wZ2wtcHJvcGVydGllcy1jb250YWluZXJcIixcbiAgICAgIHJlZjogcHJvcGVydGllc1BhbmVsQ29udGFpbmVyUmVmXG4gICAgfSldXG4gIH0pO1xufVxuXG4vLyBoZWxwZXJzIC8vLy8vLy8vLy8vLy8vL1xuXG5mdW5jdGlvbiB0b1N0cmluZyhvYmopIHtcbiAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KG9iaiwgbnVsbCwgJyAgJyk7XG59XG5mdW5jdGlvbiBjcmVhdGVEYXRhRWRpdG9yUGxhY2Vob2xkZXIoKSB7XG4gIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gIGVsZW1lbnQuaW5uZXJIVE1MID0gJ1VzZSB0aGlzIHBhbmVsIHRvIHNpbXVsYXRlIHRoZSBmb3JtIGlucHV0LCBzdWNoIGFzIHByb2Nlc3MgdmFyaWFibGVzLlxcblRoaXMgaGVscHMgdG8gdGVzdCB0aGUgZm9ybSBieSBwb3B1bGF0aW5nIHRoZSBwcmV2aWV3LlxcblxcbicgKyAnRm9sbG93IHRoZSBKU09OIGZvcm1hdCBsaWtlIHRoaXM6XFxuXFxuJyArICd7XFxuICBcInZhcmlhYmxlXCI6IFwidmFsdWVcIlxcbn0nO1xuICByZXR1cm4gZWxlbWVudDtcbn1cblxuZnVuY3Rpb24gUGxheWdyb3VuZChvcHRpb25zKSB7XG4gIGNvbnN0IHtcbiAgICBjb250YWluZXI6IHBhcmVudCxcbiAgICBzY2hlbWE6IGluaXRpYWxTY2hlbWEsXG4gICAgZGF0YTogaW5pdGlhbERhdGEsXG4gICAgLi4ucmVzdFxuICB9ID0gb3B0aW9ucztcbiAgY29uc3QgZW1pdHRlciA9IG1pdHQoKTtcbiAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdmanMtcGdsLXBhcmVudCcpO1xuICBpZiAocGFyZW50KSB7XG4gICAgcGFyZW50LmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XG4gIH1cbiAgY29uc3QgaGFuZGxlRHJvcCA9IGZpbGVEcm9wKCdEcm9wIGEgZm9ybSBmaWxlJywgZnVuY3Rpb24gKGZpbGVzKSB7XG4gICAgY29uc3QgZmlsZSA9IGZpbGVzWzBdO1xuICAgIGlmIChmaWxlKSB7XG4gICAgICB0cnkge1xuICAgICAgICB0aGlzLmFwaS5zZXRTY2hlbWEoSlNPTi5wYXJzZShmaWxlLmNvbnRlbnRzKSk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgLy8gVE9ETyhuaWtrdSk6IGluZGljYXRlIEpTT04gcGFyc2UgZXJyb3JcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuICBjb25zdCBzYWZlID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICBpZiAoIXRoaXMuYXBpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignUGxheWdyb3VuZCBpcyBub3QgaW5pdGlhbGl6ZWQuJyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZm4oLi4uYXJncyk7XG4gICAgfTtcbiAgfTtcbiAgY29uc3Qgb25Jbml0ID0gZnVuY3Rpb24gKCkge1xuICAgIGVtaXR0ZXIuZW1pdCgnZm9ybVBsYXlncm91bmQuaW5pdCcpO1xuICB9O1xuICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCBoYW5kbGVEcm9wKTtcbiAgcmVuZGVyKGpzeChQbGF5Z3JvdW5kUm9vdCwge1xuICAgIGluaXRpYWxTY2hlbWE6IGluaXRpYWxTY2hlbWEsXG4gICAgaW5pdGlhbERhdGE6IGluaXRpYWxEYXRhLFxuICAgIGVtaXQ6IGVtaXR0ZXIuZW1pdCxcbiAgICBhcGlMaW5rVGFyZ2V0OiB0aGlzLFxuICAgIG9uSW5pdDogb25Jbml0LFxuICAgIC4uLnJlc3RcbiAgfSksIGNvbnRhaW5lcik7XG4gIHRoaXMub24gPSBlbWl0dGVyLm9uO1xuICB0aGlzLm9mZiA9IGVtaXR0ZXIub2ZmO1xuICB0aGlzLmVtaXQgPSBlbWl0dGVyLmVtaXQ7XG4gIHRoaXMub24oJ2Rlc3Ryb3knLCAoKSA9PiB7XG4gICAgcmVuZGVyKG51bGwsIGNvbnRhaW5lcik7XG4gICAgcGFyZW50LnJlbW92ZUNoaWxkKGNvbnRhaW5lcik7XG4gIH0pO1xuICB0aGlzLmRlc3Ryb3kgPSAoKSA9PiB0aGlzLmVtaXQoJ2Rlc3Ryb3knKTtcbiAgdGhpcy5nZXRTdGF0ZSA9IHNhZmUoKCkgPT4gdGhpcy5hcGkuZ2V0U3RhdGUoKSk7XG4gIHRoaXMuZ2V0U2NoZW1hID0gc2FmZSgoKSA9PiB0aGlzLmFwaS5nZXRTY2hlbWEoKSk7XG4gIHRoaXMuc2V0U2NoZW1hID0gc2FmZShzY2hlbWEgPT4gdGhpcy5hcGkuc2V0U2NoZW1hKHNjaGVtYSkpO1xuICB0aGlzLnNhdmVTY2hlbWEgPSBzYWZlKCgpID0+IHRoaXMuYXBpLnNhdmVTY2hlbWEoKSk7XG4gIHRoaXMuZ2V0ID0gc2FmZSgobmFtZSwgc3RyaWN0KSA9PiB0aGlzLmFwaS5nZXQobmFtZSwgc3RyaWN0KSk7XG4gIHRoaXMuZ2V0RGF0YUVkaXRvciA9IHNhZmUoKCkgPT4gdGhpcy5hcGkuZ2V0RGF0YUVkaXRvcigpKTtcbiAgdGhpcy5nZXRFZGl0b3IgPSBzYWZlKCgpID0+IHRoaXMuYXBpLmdldEVkaXRvcigpKTtcbiAgdGhpcy5nZXRGb3JtID0gc2FmZSgobmFtZSwgc3RyaWN0KSA9PiB0aGlzLmFwaS5nZXRGb3JtKG5hbWUsIHN0cmljdCkpO1xuICB0aGlzLmdldFJlc3VsdFZpZXcgPSBzYWZlKCgpID0+IHRoaXMuYXBpLmdldFJlc3VsdFZpZXcoKSk7XG4gIHRoaXMuYXR0YWNoRWRpdG9yQ29udGFpbmVyID0gc2FmZShub2RlID0+IHRoaXMuYXBpLmF0dGFjaEVkaXRvckNvbnRhaW5lcihub2RlKSk7XG4gIHRoaXMuYXR0YWNoUHJldmlld0NvbnRhaW5lciA9IHNhZmUobm9kZSA9PiB0aGlzLmFwaS5hdHRhY2hGb3JtQ29udGFpbmVyKG5vZGUpKTtcbiAgdGhpcy5hdHRhY2hEYXRhQ29udGFpbmVyID0gc2FmZShub2RlID0+IHRoaXMuYXBpLmF0dGFjaERhdGFDb250YWluZXIobm9kZSkpO1xuICB0aGlzLmF0dGFjaFJlc3VsdENvbnRhaW5lciA9IHNhZmUobm9kZSA9PiB0aGlzLmFwaS5hdHRhY2hSZXN1bHRDb250YWluZXIobm9kZSkpO1xuICB0aGlzLmF0dGFjaFBhbGV0dGVDb250YWluZXIgPSBzYWZlKG5vZGUgPT4gdGhpcy5hcGkuYXR0YWNoUGFsZXR0ZUNvbnRhaW5lcihub2RlKSk7XG4gIHRoaXMuYXR0YWNoUHJvcGVydGllc1BhbmVsQ29udGFpbmVyID0gc2FmZShub2RlID0+IHRoaXMuYXBpLmF0dGFjaFByb3BlcnRpZXNQYW5lbENvbnRhaW5lcihub2RlKSk7XG59XG5cbmV4cG9ydCB7IFBsYXlncm91bmQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../node_modules/@bpmn-io/form-js-playground/dist/index.es.js\n\n}");

/***/ }),

/***/ "../node_modules/@camunda/form-playground/dist/index.es.js":
/*!*****************************************************************!*\
  !*** ../node_modules/@camunda/form-playground/dist/index.es.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CamundaFormPlayground: () => (/* binding */ CamundaFormPlayground),\n/* harmony export */   createCamundaFormPlayground: () => (/* binding */ createCamundaFormPlayground)\n/* harmony export */ });\n/* harmony import */ var diagram_js_lib_ui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! diagram-js/lib/ui */ \"../node_modules/htm/preact/index.module.js\");\n/* harmony import */ var diagram_js_lib_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! diagram-js/lib/ui */ \"../node_modules/preact/dist/preact.module.js\");\n/* harmony import */ var diagram_js_lib_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! diagram-js/lib/ui */ \"../node_modules/preact/hooks/dist/hooks.module.js\");\n/* harmony import */ var min_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! min-dom */ \"../node_modules/@camunda/form-playground/node_modules/domify/index.js\");\n/* harmony import */ var min_dom__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(min_dom__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var min_dom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! min-dom */ \"../node_modules/@camunda/form-playground/node_modules/min-dom/dist/index.js\");\n/* harmony import */ var mitt__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! mitt */ \"../node_modules/mitt/dist/mitt.mjs\");\n/* harmony import */ var min_dash__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! min-dash */ \"../node_modules/@camunda/form-playground/node_modules/min-dash/dist/index.esm.js\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! classnames */ \"../node_modules/classnames/index.js\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _bpmn_io_form_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @bpmn-io/form-js */ \"../node_modules/@bpmn-io/form-js-viewer/dist/index.es.js\");\n/* harmony import */ var _bpmn_io_form_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @bpmn-io/form-js */ \"../node_modules/@bpmn-io/form-js-playground/dist/index.es.js\");\n\n\n\n\n\n\n\nconst noop = () => {};\n\n\nfunction CollapsiblePanel(props) {\n  const {\n    children,\n    collapseTo,\n    idx,\n    onToggle,\n    open,\n    title\n  } = props;\n\n  const toggle = (event) => {\n    event.stopPropagation();\n    onToggle(open);\n  };\n\n  return (0,diagram_js_lib_ui__WEBPACK_IMPORTED_MODULE_0__.html)`\n    <div \n      data-idx=\"${ idx }\" \n      class=\"${classnames__WEBPACK_IMPORTED_MODULE_7___default()('cfp-collapsible-panel', { open: !collapseTo || open })}\"\n    >\n      <div onClick=\"${ collapseTo ? toggle : noop }\" class=\"cfp-collapsible-panel-title\">\n        <h1>${ title }</h1>\n\n        ${ collapseTo && (0,diagram_js_lib_ui__WEBPACK_IMPORTED_MODULE_0__.html)`\n          <div class=\"cfp-collapsible-panel-actions\">\n            <button \n              title=\"${ open ? 'Close' : 'Open' } ${ title }\"\n              class=\"cfp-collapsible-panel-action\" \n              onClick=\"${ toggle }\"\n            >\n              ${getIcon(collapseTo, open)}\n            </button>\n          </div>\n        `}\n      </div>\n\n      <div class=\"cfp-collapsible-panel-content\">\n        ${ children }\n      </div>\n    </div>\n  `;\n}\n\n\n// helper ////////////////\n\nfunction getIcon(collapseTo, open) {\n  if (collapseTo === 'right') {\n    return open\n      ? (0,diagram_js_lib_ui__WEBPACK_IMPORTED_MODULE_0__.html)`<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\">\n        <path fill-rule=\"evenodd\" d=\"M4.41421356,12.9494942 L3,11.5352806 L6.53553391,7.99974671 L3,4.4642128 L4.41421356,3.04999924 L9.36396103,7.99974671 L4.41421356,12.9494942 Z M9.91421356,3 L11.9142136,3 L11.9142136,13 L9.91421356,13 L9.91421356,3 Z\"/>\n      </svg>`\n      : (0,diagram_js_lib_ui__WEBPACK_IMPORTED_MODULE_0__.html)`<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\">\n        <path fill-rule=\"evenodd\" d=\"M11.5,12.9494942 L6.55025253,7.99974671 L11.5,3.04999924 L12.9142136,4.4642128 L9.37867966,7.99974671 L12.9142136,11.5352806 L11.5,12.9494942 Z M6,3 L6,13 L4,13 L4,3 L6,3 Z\"/>\n      </svg>`;\n  }\n\n  if (collapseTo === 'bottom') {\n    return open\n      ? (0,diagram_js_lib_ui__WEBPACK_IMPORTED_MODULE_0__.html)`<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\">\n        <path fill-rule=\"evenodd\" d=\"M12.9494942,4.41421356 L7.99974671,9.36396103 L3.04999924,4.41421356 L4.4642128,3 L7.99974671,6.53553391 L11.5352806,3 L12.9494942,4.41421356 Z M3,9.91421356 L13,9.91421356 L13,11.9142136 L3,11.9142136 L3,9.91421356 Z\"/>\n      </svg>`\n      : (0,diagram_js_lib_ui__WEBPACK_IMPORTED_MODULE_0__.html)`<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\">\n        <path fill-rule=\"evenodd\" d=\"M12.9494942,11.5 L11.5352806,12.9142136 L7.99974671,9.37867966 L4.4642128,12.9142136 L3.04999924,11.5 L7.99974671,6.55025253 L12.9494942,11.5 Z M3,6 L3,4 L13,4 L13,6 L3,6 Z\"/>\n      </svg>`;\n  }\n}\n\nfunction CollapsedPreview(props) {\n\n  const {\n    idx,\n    onTogglePreview,\n    previewContainerRef,\n    open\n  } = props;\n\n  const onToggle = () => {\n    onTogglePreview();\n  };\n\n  return (0,diagram_js_lib_ui__WEBPACK_IMPORTED_MODULE_0__.html)`\n    <div class=\"${classnames__WEBPACK_IMPORTED_MODULE_7___default()(\n    'cfp-collapsed-preview',\n    { visible: !open })}\">\n      <div class=\"cfp-collapsed-preview-title\" onClick=${ onToggle }>\n        <h1>Form Preview</h1>\n      </div>\n      <div class=\"cfp-collapsed-preview-actions\">\n        <button title=\"Open Form Preview\" class=\"cfp-collapsed-preview-action\" onClick=${ onToggle }>\n          <svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\">\n            <path fill-rule=\"evenodd\" d=\"M11.5,12.9494942 L6.55025253,7.99974671 L11.5,3.04999924 L12.9142136,4.4642128 L9.37867966,7.99974671 L12.9142136,11.5352806 L11.5,12.9494942 Z M6,3 L6,13 L4,13 L4,3 L6,3 Z\"/>\n          </svg>    \n        </button>\n      </div>\n    </div>\n\n    <!-- This is not visible when preview not open -->\n    <${CollapsiblePanel} idx=\"${ idx }\" open=${open} onToggle=${ onToggle } title=\"Form Preview\" collapseTo=\"right\">\n      <div class=\"cfp-preview-container\" ref=${ previewContainerRef }></div>\n    </${CollapsiblePanel}>`;\n}\n\nconst LayoutContext = (0,diagram_js_lib_ui__WEBPACK_IMPORTED_MODULE_1__.createContext)({\n  layout: {},\n  setLayout: () => {},\n  getLayoutForKey: () => {},\n  setLayoutForKey: () => {}\n});\n\nconst DEFAULT_LAYOUT = {};\n\nconst FORM_DEFINITION_IDX = 'form-definition';\nconst FORM_PREVIEW_IDX = 'form-preview';\nconst FORM_INPUT_IDX = 'form-input';\nconst FORM_OUTPUT_IDX = 'form-output';\n\nconst TOGGLABLE_CONTAINERS = [\n  FORM_PREVIEW_IDX,\n  FORM_INPUT_IDX,\n  FORM_OUTPUT_IDX\n];\n\nconst PIPE_EVENTS = [\n  'formPlayground.init',\n  'formPlayground.rendered'\n];\n\n\nfunction PlaygroundComponent(props) {\n\n  const {\n    data,\n    emitter,\n    layoutConfig = {},\n    onInit,\n    schema,\n    ...restProps\n  } = props;\n\n  let playgroundRef = (0,diagram_js_lib_ui__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n\n  const paletteContainerRef = (0,diagram_js_lib_ui__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n  const editorContainerRef = (0,diagram_js_lib_ui__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n  const dataContainerRef = (0,diagram_js_lib_ui__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n  const previewContainerRef = (0,diagram_js_lib_ui__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n  const resultContainerRef = (0,diagram_js_lib_ui__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n  const propertiesContainerRef = (0,diagram_js_lib_ui__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n\n  const rootRef = (0,diagram_js_lib_ui__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n\n  // (1) initialize playground orchestrator\n  (0,diagram_js_lib_ui__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    playgroundRef.current = new _bpmn_io_form_js__WEBPACK_IMPORTED_MODULE_9__.Playground({\n      data,\n      schema,\n      editor: { inlinePropertiesPanel: false },\n      propertiesPanel: {\n        feelPopupContainer: rootRef.current,\n        getDocumentationRef\n      },\n      ...restProps\n    });\n  }, []);\n\n  // (1.1) pipe playground API\n  (0,diagram_js_lib_ui__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    playgroundRef.current.on('formPlayground.init', () => {\n      onInit({\n        ...playgroundRef.current,\n        collapse: this.collapse,\n        open: this.open,\n\n        // @pinussilvestrus: this is added for testing purposes\n        _ref: playgroundRef.current\n      });\n    });\n  }, []);\n\n  // (1.2) pipe core playground events\n  (0,diagram_js_lib_ui__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    const emit = (type, e) => {\n      return emitter.emit(type, e);\n    };\n\n    PIPE_EVENTS.forEach(type => {\n      playgroundRef.current.on(type, event => emit(type, event));\n    });\n\n    return () => {\n      PIPE_EVENTS.forEach(type => {\n        playgroundRef.current.off(type, event => emit(type, event));\n      });\n    };\n  }, [ playgroundRef ]);\n\n  // (2) set-up layout context\n  const [ layout, setLayout ] = (0,diagram_js_lib_ui__WEBPACK_IMPORTED_MODULE_2__.useState)(createLayout(layoutConfig));\n\n  const getLayoutForKey = (key, defaultValue) => {\n    return (0,min_dash__WEBPACK_IMPORTED_MODULE_6__.get)(layout, key, defaultValue);\n  };\n\n  const setLayoutForKey = (key, config) => {\n    const newLayout = (0,min_dash__WEBPACK_IMPORTED_MODULE_6__.assign)({}, layout);\n    (0,min_dash__WEBPACK_IMPORTED_MODULE_6__.set)(newLayout, key, config);\n    setLayout(newLayout);\n  };\n\n  const layoutContext = {\n    layout,\n    setLayout,\n    getLayoutForKey,\n    setLayoutForKey\n  };\n\n  const inputOpen = getLayoutForKey([ FORM_INPUT_IDX, 'open' ], false);\n  const toggleInput = () => {\n    inputOpen ? this.collapse([ FORM_INPUT_IDX ]) : this.open([ FORM_INPUT_IDX ]);\n  };\n\n  const outputOpen = getLayoutForKey([ FORM_OUTPUT_IDX, 'open' ], false);\n  const toggleOutput = () => {\n    outputOpen ? this.collapse([ FORM_OUTPUT_IDX ]) : this.open([ FORM_OUTPUT_IDX ]);\n  };\n\n  const previewOpen = getLayoutForKey([ FORM_PREVIEW_IDX, 'open' ], false);\n  const togglePreview = () => {\n    previewOpen ? this.collapse() : this.open();\n  };\n\n  const setContainersLayout = (containers, open) => {\n    let newLayout = (0,min_dash__WEBPACK_IMPORTED_MODULE_6__.assign)({}, layout);\n\n    if (!containers) {\n      containers = TOGGLABLE_CONTAINERS;\n    }\n\n    if (!(0,min_dash__WEBPACK_IMPORTED_MODULE_6__.isArray)(containers)) {\n      containers = [ containers ];\n    }\n\n    containers.map(idx => {\n      (0,min_dash__WEBPACK_IMPORTED_MODULE_6__.set)(newLayout, [ idx, 'open' ], open);\n    });\n\n    setLayout(newLayout);\n  };\n\n  // (2.1) notify interested parties on layout changes\n  (0,diagram_js_lib_ui__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    emitter.emit('formPlayground.layoutChanged', { layout });\n  }, [ emitter, layout ]);\n\n  // (3) attach all component containers\n  (0,diagram_js_lib_ui__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    const playground = playgroundRef.current;\n\n    function attachComponents() {\n      playground.attachPaletteContainer(paletteContainerRef.current);\n      playground.attachEditorContainer(editorContainerRef.current);\n      playground.attachDataContainer(dataContainerRef.current);\n      playground.attachPreviewContainer(previewContainerRef.current);\n      playground.attachResultContainer(resultContainerRef.current);\n      playground.attachPropertiesPanelContainer(propertiesContainerRef.current);\n    }\n\n    playground.on('formPlayground.rendered', attachComponents);\n\n    return () => playground.off('formPlayground.rendered', attachComponents);\n  }, []);\n\n  // (4) provide toggle API\n\n  /**\n   * @param {string|Array<string>} [containers]\n   */\n  this.open = function(containers) {\n    setContainersLayout(containers, true);\n  };\n\n  /**\n   * @param {string|Array<string>} [containers]\n   */\n  this.collapse = function(containers) {\n    return setContainersLayout(containers, false);\n  };\n\n  // (5) listen on dragging events to provide drop feedback\n  (0,diagram_js_lib_ui__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n\n    const bindDropTargetListeners = () => {\n      const editor = playgroundRef.current.getEditor();\n      editor.on('drag.hover', function(event) {\n\n        const { container } = event;\n\n        if (\n          container.classList.contains('fjs-drop-container-horizontal') ||\n          container.classList.contains('fjs-drop-container-vertical')\n        ) {\n          rootRef.current && rootRef.current.classList.add('cfp-dragging');\n        }\n      });\n\n      editor.on('drag.out', function(event) {\n        rootRef.current && rootRef.current.classList.remove('cfp-dragging');\n      });\n    };\n\n    const playground = playgroundRef.current;\n\n    if (playground) {\n      playground.on('formPlayground.rendered', bindDropTargetListeners);\n    }\n\n    return () => {\n      if (playground) {\n        playground.off('formPlayground.rendered', bindDropTargetListeners);\n      }\n    };\n  });\n\n  // (6) render\n  return (0,diagram_js_lib_ui__WEBPACK_IMPORTED_MODULE_0__.html)`\n    <${LayoutContext.Provider} value=${ layoutContext }>\n    <div ref=${rootRef} class=\"${classnames__WEBPACK_IMPORTED_MODULE_7___default()('cfp-root', { 'cfp-open-preview': previewOpen })}\">\n      <div class=\"cfp-palette\" ref=${ paletteContainerRef }></div>\n      <div class=\"cfp-left\">\n        <${CollapsiblePanel} idx=\"${ FORM_DEFINITION_IDX }\" title=\"Form Definition\">\n          <div class=\"cfp-editor-container\" ref=${ editorContainerRef }></div>\n        </${CollapsiblePanel}>\n        <${CollapsiblePanel} open=${inputOpen} idx=\"${ FORM_INPUT_IDX }\" title=\"Form Input\" collapseTo=\"bottom\" onToggle=${toggleInput}>\n          <div class=\"cfp-data-container\" ref=${ dataContainerRef }></div>\n        </${CollapsiblePanel}>\n      </div>\n      <div class=\"cfp-right\">\n        <${CollapsedPreview} \n          idx=${ FORM_PREVIEW_IDX }\n          open=${ previewOpen }\n          previewContainerRef=${ previewContainerRef }\n          onTogglePreview=\"${ togglePreview }\" \n        />\n        <${CollapsiblePanel} open=${outputOpen} idx=\"${ FORM_OUTPUT_IDX }\" title=\"Form Output\" collapseTo=\"bottom\" onToggle=${toggleOutput}>\n          <div class=\"cfp-result-container\" ref=${ resultContainerRef }></div>\n        </${CollapsiblePanel}>\n      </div>\n      <div class=\"cfp-properties\" ref=${ propertiesContainerRef }></div>\n    </div>\n    </${LayoutContext.Provider}>\n  `;\n}\n\n\n// helper ///////////////\n\nfunction createLayout(overrides) {\n  return {\n    ...DEFAULT_LAYOUT,\n    ...overrides\n  };\n}\n\nfunction getDocumentationRef(field) {\n\n  if (!field) {\n    return;\n  }\n\n  if (field.type === 'default') {\n    return 'https://docs.camunda.io/docs/components/modeler/forms/camunda-forms-reference/';\n  }\n\n  const typeToDocsMap = {\n    [_bpmn_io_form_js__WEBPACK_IMPORTED_MODULE_8__.Checklist.config.type]: 'checkbox-group',\n    [_bpmn_io_form_js__WEBPACK_IMPORTED_MODULE_8__.DocumentPreview.config.type]: 'document-preview'\n  };\n\n  return `https://docs.camunda.io/docs/components/modeler/forms/form-element-library/forms-element-library-${typeToDocsMap[field.type] || field.type}/`;\n}\n\n/**\n * @typedef { import('@bpmn-io/form-js-viewer').FormProperties } FormProperties\n * @typedef { import('@bpmn-io/form-js-editor').FormEditorProperties } FormEditorProperties\n *\n * @typedef { {\n *  container?: Element,\n *  data: any,\n *  editorAdditionalModules?: Array<any>,\n *  editorProperties?: FormEditorProperties\n *  exporter?: { name: string, version: string },\n *  layout?: any,\n *  propertiesPanel?: { parent: Element, feelPopupContainer: Element },\n *  schema: any,\n *  viewerAdditionalModules?: Array<any>,\n *  viewerProperties?: FormProperties,\n * } } CamundaFormPlaygroundOptions\n */\n\n/**\n * @param {CamundaFormPlaygroundOptions} options\n */\nfunction CamundaFormPlayground(options) {\n\n  const {\n    container: parent,\n    data,\n    schema,\n    layout: layoutConfig,\n    ...restProps\n  } = options;\n\n  const emitter = (0,mitt__WEBPACK_IMPORTED_MODULE_5__[\"default\"])();\n\n  const safeRef = function(fn) {\n    return function(...args) {\n      if (!playgroundRef) {\n        throw new Error('Camunda Form Playground is not initialized.');\n      }\n\n      return fn(...args);\n    };\n  };\n\n  const container = this._container = min_dom__WEBPACK_IMPORTED_MODULE_3___default()('<div class=\"cfp-container\"></div>');\n\n  let playgroundRef;\n\n  if (parent) {\n    parent.appendChild(container);\n  }\n\n\n  // API //////////\n\n  this.on = emitter.on;\n  this.off = emitter.off;\n  this.fire = emitter.emit;\n\n  // added due to current limitation of <mitt.once>\n  // cf. https://github.com/developit/mitt/issues/136\n  this.once = function(type, fn) {\n    emitter.on(type, fn);\n    emitter.on(type, emitter.off.bind(emitter, type, fn));\n  };\n\n  this.destroy = function() {\n    const parent = container.parentNode;\n    (0,diagram_js_lib_ui__WEBPACK_IMPORTED_MODULE_1__.render)(null, container);\n    parent && parent.removeChild(container);\n  };\n\n  /**\n   * @param {HTMLElement} parent\n   */\n  this.attachTo = function(parent) {\n    if (!parent) {\n      throw new Error('parent required');\n    }\n\n    if (typeof parent === 'string') {\n      parent = (0,min_dom__WEBPACK_IMPORTED_MODULE_4__.query)(parent);\n    }\n\n    this.detach();\n    parent.appendChild(this._container);\n  };\n\n  this.detach = function() {\n    const parentNode = container.parentNode;\n\n    if (parentNode) {\n      parentNode.removeChild(container);\n    }\n  };\n\n  this.get = safeRef((module, strict) => playgroundRef.get(module, strict));\n\n  /**\n   * @param {string|Array<string>} [containers]\n   */\n  this.open = safeRef((containers) => playgroundRef.open(containers));\n\n  /**\n   * @param {string|Array<string>} [containers]\n   */\n  this.collapse = safeRef((containers) => playgroundRef.collapse(containers));\n\n  this.setSchema = safeRef((schema) => playgroundRef.setSchema(schema));\n\n  this.getSchema = safeRef(() => playgroundRef.getSchema());\n\n  this.saveSchema = safeRef(() => playgroundRef.saveSchema());\n\n  this.getDataEditor = safeRef(() => playgroundRef.getDataEditor());\n\n  this.getEditor = safeRef(() => playgroundRef.getEditor());\n\n  this.getForm = safeRef((name, strict) => playgroundRef.getForm(name, strict));\n\n  this.getResultView = safeRef(() => playgroundRef.getResultView());\n\n  this._onInit = function(_ref) {\n    playgroundRef = _ref;\n  };\n\n  (0,diagram_js_lib_ui__WEBPACK_IMPORTED_MODULE_1__.render)((0,diagram_js_lib_ui__WEBPACK_IMPORTED_MODULE_0__.html)`\n    <${PlaygroundComponent}\n      data=${ data }\n      emitter=${ emitter }\n      layoutConfig=${ layoutConfig }\n      onInit=${ this._onInit }\n      schema=${ schema }\n      ...${ restProps }\n    />\n  `, container\n  );\n}\n\n/**\n * @param {CamundaFormPlaygroundOptions} options\n *\n * @return {CamundaFormPlayground}\n */\nasync function createCamundaFormPlayground(options) {\n  const playground = new CamundaFormPlayground(options);\n\n  return new Promise((resolve, reject) => {\n\n    const onInit = () => {\n      return resolve(playground);\n    };\n\n    try {\n      playground.once('formPlayground.init', onInit);\n    } catch (err) {\n      return reject(err);\n    }\n  });\n}\n\n\n//# sourceMappingURL=index.es.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vbm9kZV9tb2R1bGVzL0BjYW11bmRhL2Zvcm0tcGxheWdyb3VuZC9kaXN0L2luZGV4LmVzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTZGO0FBQ3JEO0FBQ2hCO0FBQzZCO0FBQ2pCO0FBQzBDOztBQUU5RTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsU0FBUyx1REFBSTtBQUNiO0FBQ0EsbUJBQW1CLEtBQUs7QUFDeEIsZUFBZSxpREFBVSw0QkFBNEIsMkJBQTJCLEVBQUU7QUFDbEY7QUFDQSx1QkFBdUIsNEJBQTRCO0FBQ25ELGVBQWUsT0FBTzs7QUFFdEIsV0FBVyxjQUFjLHVEQUFJO0FBQzdCO0FBQ0E7QUFDQSx3QkFBd0IsMEJBQTBCLEdBQUcsT0FBTztBQUM1RDtBQUNBLDBCQUEwQixRQUFRO0FBQ2xDO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVEQUFJO0FBQ1o7QUFDQTtBQUNBLFFBQVEsdURBQUk7QUFDWjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFFBQVEsdURBQUk7QUFDWjtBQUNBO0FBQ0EsUUFBUSx1REFBSTtBQUNaO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTs7QUFFQSxTQUFTLHVEQUFJO0FBQ2Isa0JBQWtCLGlEQUFVO0FBQzVCO0FBQ0EsTUFBTSxnQkFBZ0IsRUFBRTtBQUN4QiwwREFBMEQsVUFBVTtBQUNwRTtBQUNBO0FBQ0E7QUFDQSwwRkFBMEYsVUFBVTtBQUNwRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxPQUFPLGtCQUFrQixRQUFRLEtBQUssU0FBUyxNQUFN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Q0EsYUFBYSxzQkFBc0I7QUFDbkM7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsRUFBRSx5REFBTSxDQUFDLHVEQUFJO0FBQ2IsT0FBTztBQUNQLGNBQWM7QUFDZCxpQkFBaUI7QUFDakIsc0JBQXNCO0FBQ3RCLGdCQUFnQjtBQUNoQixnQkFBZ0I7QUFDaEIsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsV0FBVyw4QkFBOEI7QUFDekM7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRThEO0FBQzlEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FtdW5kYS1tb2RlbGVyLWNsaWVudC8uLi9ub2RlX21vZHVsZXMvQGNhbXVuZGEvZm9ybS1wbGF5Z3JvdW5kL2Rpc3QvaW5kZXguZXMuanM/ZDBmOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBodG1sLCBjcmVhdGVDb250ZXh0LCB1c2VSZWYsIHVzZUVmZmVjdCwgdXNlU3RhdGUsIHJlbmRlciB9IGZyb20gJ2RpYWdyYW0tanMvbGliL3VpJztcbmltcG9ydCB7IGRvbWlmeSwgcXVlcnkgfSBmcm9tICdtaW4tZG9tJztcbmltcG9ydCBtaXR0IGZyb20gJ21pdHQnO1xuaW1wb3J0IHsgZ2V0LCBhc3NpZ24sIGlzQXJyYXksIHNldCB9IGZyb20gJ21pbi1kYXNoJztcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IHsgRm9ybVBsYXlncm91bmQsIERvY3VtZW50UHJldmlldywgQ2hlY2tsaXN0IH0gZnJvbSAnQGJwbW4taW8vZm9ybS1qcyc7XG5cbmNvbnN0IG5vb3AgPSAoKSA9PiB7fTtcblxuXG5mdW5jdGlvbiBDb2xsYXBzaWJsZVBhbmVsKHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBjaGlsZHJlbixcbiAgICBjb2xsYXBzZVRvLFxuICAgIGlkeCxcbiAgICBvblRvZ2dsZSxcbiAgICBvcGVuLFxuICAgIHRpdGxlXG4gIH0gPSBwcm9wcztcblxuICBjb25zdCB0b2dnbGUgPSAoZXZlbnQpID0+IHtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBvblRvZ2dsZShvcGVuKTtcbiAgfTtcblxuICByZXR1cm4gaHRtbGBcbiAgICA8ZGl2IFxuICAgICAgZGF0YS1pZHg9XCIkeyBpZHggfVwiIFxuICAgICAgY2xhc3M9XCIke2NsYXNzTmFtZXMoJ2NmcC1jb2xsYXBzaWJsZS1wYW5lbCcsIHsgb3BlbjogIWNvbGxhcHNlVG8gfHwgb3BlbiB9KX1cIlxuICAgID5cbiAgICAgIDxkaXYgb25DbGljaz1cIiR7IGNvbGxhcHNlVG8gPyB0b2dnbGUgOiBub29wIH1cIiBjbGFzcz1cImNmcC1jb2xsYXBzaWJsZS1wYW5lbC10aXRsZVwiPlxuICAgICAgICA8aDE+JHsgdGl0bGUgfTwvaDE+XG5cbiAgICAgICAgJHsgY29sbGFwc2VUbyAmJiBodG1sYFxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJjZnAtY29sbGFwc2libGUtcGFuZWwtYWN0aW9uc1wiPlxuICAgICAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICAgICAgdGl0bGU9XCIkeyBvcGVuID8gJ0Nsb3NlJyA6ICdPcGVuJyB9ICR7IHRpdGxlIH1cIlxuICAgICAgICAgICAgICBjbGFzcz1cImNmcC1jb2xsYXBzaWJsZS1wYW5lbC1hY3Rpb25cIiBcbiAgICAgICAgICAgICAgb25DbGljaz1cIiR7IHRvZ2dsZSB9XCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgJHtnZXRJY29uKGNvbGxhcHNlVG8sIG9wZW4pfVxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIGB9XG4gICAgICA8L2Rpdj5cblxuICAgICAgPGRpdiBjbGFzcz1cImNmcC1jb2xsYXBzaWJsZS1wYW5lbC1jb250ZW50XCI+XG4gICAgICAgICR7IGNoaWxkcmVuIH1cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICBgO1xufVxuXG5cbi8vIGhlbHBlciAvLy8vLy8vLy8vLy8vLy8vXG5cbmZ1bmN0aW9uIGdldEljb24oY29sbGFwc2VUbywgb3Blbikge1xuICBpZiAoY29sbGFwc2VUbyA9PT0gJ3JpZ2h0Jykge1xuICAgIHJldHVybiBvcGVuXG4gICAgICA/IGh0bWxgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgeG1sbnM6eGxpbms9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCIgd2lkdGg9XCIxNlwiIGhlaWdodD1cIjE2XCIgdmlld0JveD1cIjAgMCAxNiAxNlwiPlxuICAgICAgICA8cGF0aCBmaWxsLXJ1bGU9XCJldmVub2RkXCIgZD1cIk00LjQxNDIxMzU2LDEyLjk0OTQ5NDIgTDMsMTEuNTM1MjgwNiBMNi41MzU1MzM5MSw3Ljk5OTc0NjcxIEwzLDQuNDY0MjEyOCBMNC40MTQyMTM1NiwzLjA0OTk5OTI0IEw5LjM2Mzk2MTAzLDcuOTk5NzQ2NzEgTDQuNDE0MjEzNTYsMTIuOTQ5NDk0MiBaIE05LjkxNDIxMzU2LDMgTDExLjkxNDIxMzYsMyBMMTEuOTE0MjEzNiwxMyBMOS45MTQyMTM1NiwxMyBMOS45MTQyMTM1NiwzIFpcIi8+XG4gICAgICA8L3N2Zz5gXG4gICAgICA6IGh0bWxgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgeG1sbnM6eGxpbms9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCIgd2lkdGg9XCIxNlwiIGhlaWdodD1cIjE2XCIgdmlld0JveD1cIjAgMCAxNiAxNlwiPlxuICAgICAgICA8cGF0aCBmaWxsLXJ1bGU9XCJldmVub2RkXCIgZD1cIk0xMS41LDEyLjk0OTQ5NDIgTDYuNTUwMjUyNTMsNy45OTk3NDY3MSBMMTEuNSwzLjA0OTk5OTI0IEwxMi45MTQyMTM2LDQuNDY0MjEyOCBMOS4zNzg2Nzk2Niw3Ljk5OTc0NjcxIEwxMi45MTQyMTM2LDExLjUzNTI4MDYgTDExLjUsMTIuOTQ5NDk0MiBaIE02LDMgTDYsMTMgTDQsMTMgTDQsMyBMNiwzIFpcIi8+XG4gICAgICA8L3N2Zz5gO1xuICB9XG5cbiAgaWYgKGNvbGxhcHNlVG8gPT09ICdib3R0b20nKSB7XG4gICAgcmV0dXJuIG9wZW5cbiAgICAgID8gaHRtbGA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB4bWxuczp4bGluaz1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIiB3aWR0aD1cIjE2XCIgaGVpZ2h0PVwiMTZcIiB2aWV3Qm94PVwiMCAwIDE2IDE2XCI+XG4gICAgICAgIDxwYXRoIGZpbGwtcnVsZT1cImV2ZW5vZGRcIiBkPVwiTTEyLjk0OTQ5NDIsNC40MTQyMTM1NiBMNy45OTk3NDY3MSw5LjM2Mzk2MTAzIEwzLjA0OTk5OTI0LDQuNDE0MjEzNTYgTDQuNDY0MjEyOCwzIEw3Ljk5OTc0NjcxLDYuNTM1NTMzOTEgTDExLjUzNTI4MDYsMyBMMTIuOTQ5NDk0Miw0LjQxNDIxMzU2IFogTTMsOS45MTQyMTM1NiBMMTMsOS45MTQyMTM1NiBMMTMsMTEuOTE0MjEzNiBMMywxMS45MTQyMTM2IEwzLDkuOTE0MjEzNTYgWlwiLz5cbiAgICAgIDwvc3ZnPmBcbiAgICAgIDogaHRtbGA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB4bWxuczp4bGluaz1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIiB3aWR0aD1cIjE2XCIgaGVpZ2h0PVwiMTZcIiB2aWV3Qm94PVwiMCAwIDE2IDE2XCI+XG4gICAgICAgIDxwYXRoIGZpbGwtcnVsZT1cImV2ZW5vZGRcIiBkPVwiTTEyLjk0OTQ5NDIsMTEuNSBMMTEuNTM1MjgwNiwxMi45MTQyMTM2IEw3Ljk5OTc0NjcxLDkuMzc4Njc5NjYgTDQuNDY0MjEyOCwxMi45MTQyMTM2IEwzLjA0OTk5OTI0LDExLjUgTDcuOTk5NzQ2NzEsNi41NTAyNTI1MyBMMTIuOTQ5NDk0MiwxMS41IFogTTMsNiBMMyw0IEwxMyw0IEwxMyw2IEwzLDYgWlwiLz5cbiAgICAgIDwvc3ZnPmA7XG4gIH1cbn1cblxuZnVuY3Rpb24gQ29sbGFwc2VkUHJldmlldyhwcm9wcykge1xuXG4gIGNvbnN0IHtcbiAgICBpZHgsXG4gICAgb25Ub2dnbGVQcmV2aWV3LFxuICAgIHByZXZpZXdDb250YWluZXJSZWYsXG4gICAgb3BlblxuICB9ID0gcHJvcHM7XG5cbiAgY29uc3Qgb25Ub2dnbGUgPSAoKSA9PiB7XG4gICAgb25Ub2dnbGVQcmV2aWV3KCk7XG4gIH07XG5cbiAgcmV0dXJuIGh0bWxgXG4gICAgPGRpdiBjbGFzcz1cIiR7Y2xhc3NOYW1lcyhcbiAgICAnY2ZwLWNvbGxhcHNlZC1wcmV2aWV3JyxcbiAgICB7IHZpc2libGU6ICFvcGVuIH0pfVwiPlxuICAgICAgPGRpdiBjbGFzcz1cImNmcC1jb2xsYXBzZWQtcHJldmlldy10aXRsZVwiIG9uQ2xpY2s9JHsgb25Ub2dnbGUgfT5cbiAgICAgICAgPGgxPkZvcm0gUHJldmlldzwvaDE+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJjZnAtY29sbGFwc2VkLXByZXZpZXctYWN0aW9uc1wiPlxuICAgICAgICA8YnV0dG9uIHRpdGxlPVwiT3BlbiBGb3JtIFByZXZpZXdcIiBjbGFzcz1cImNmcC1jb2xsYXBzZWQtcHJldmlldy1hY3Rpb25cIiBvbkNsaWNrPSR7IG9uVG9nZ2xlIH0+XG4gICAgICAgICAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgeG1sbnM6eGxpbms9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCIgd2lkdGg9XCIxNlwiIGhlaWdodD1cIjE2XCIgdmlld0JveD1cIjAgMCAxNiAxNlwiPlxuICAgICAgICAgICAgPHBhdGggZmlsbC1ydWxlPVwiZXZlbm9kZFwiIGQ9XCJNMTEuNSwxMi45NDk0OTQyIEw2LjU1MDI1MjUzLDcuOTk5NzQ2NzEgTDExLjUsMy4wNDk5OTkyNCBMMTIuOTE0MjEzNiw0LjQ2NDIxMjggTDkuMzc4Njc5NjYsNy45OTk3NDY3MSBMMTIuOTE0MjEzNiwxMS41MzUyODA2IEwxMS41LDEyLjk0OTQ5NDIgWiBNNiwzIEw2LDEzIEw0LDEzIEw0LDMgTDYsMyBaXCIvPlxuICAgICAgICAgIDwvc3ZnPiAgICBcbiAgICAgICAgPC9idXR0b24+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cblxuICAgIDwhLS0gVGhpcyBpcyBub3QgdmlzaWJsZSB3aGVuIHByZXZpZXcgbm90IG9wZW4gLS0+XG4gICAgPCR7Q29sbGFwc2libGVQYW5lbH0gaWR4PVwiJHsgaWR4IH1cIiBvcGVuPSR7b3Blbn0gb25Ub2dnbGU9JHsgb25Ub2dnbGUgfSB0aXRsZT1cIkZvcm0gUHJldmlld1wiIGNvbGxhcHNlVG89XCJyaWdodFwiPlxuICAgICAgPGRpdiBjbGFzcz1cImNmcC1wcmV2aWV3LWNvbnRhaW5lclwiIHJlZj0keyBwcmV2aWV3Q29udGFpbmVyUmVmIH0+PC9kaXY+XG4gICAgPC8ke0NvbGxhcHNpYmxlUGFuZWx9PmA7XG59XG5cbmNvbnN0IExheW91dENvbnRleHQgPSBjcmVhdGVDb250ZXh0KHtcbiAgbGF5b3V0OiB7fSxcbiAgc2V0TGF5b3V0OiAoKSA9PiB7fSxcbiAgZ2V0TGF5b3V0Rm9yS2V5OiAoKSA9PiB7fSxcbiAgc2V0TGF5b3V0Rm9yS2V5OiAoKSA9PiB7fVxufSk7XG5cbmNvbnN0IERFRkFVTFRfTEFZT1VUID0ge307XG5cbmNvbnN0IEZPUk1fREVGSU5JVElPTl9JRFggPSAnZm9ybS1kZWZpbml0aW9uJztcbmNvbnN0IEZPUk1fUFJFVklFV19JRFggPSAnZm9ybS1wcmV2aWV3JztcbmNvbnN0IEZPUk1fSU5QVVRfSURYID0gJ2Zvcm0taW5wdXQnO1xuY29uc3QgRk9STV9PVVRQVVRfSURYID0gJ2Zvcm0tb3V0cHV0JztcblxuY29uc3QgVE9HR0xBQkxFX0NPTlRBSU5FUlMgPSBbXG4gIEZPUk1fUFJFVklFV19JRFgsXG4gIEZPUk1fSU5QVVRfSURYLFxuICBGT1JNX09VVFBVVF9JRFhcbl07XG5cbmNvbnN0IFBJUEVfRVZFTlRTID0gW1xuICAnZm9ybVBsYXlncm91bmQuaW5pdCcsXG4gICdmb3JtUGxheWdyb3VuZC5yZW5kZXJlZCdcbl07XG5cblxuZnVuY3Rpb24gUGxheWdyb3VuZENvbXBvbmVudChwcm9wcykge1xuXG4gIGNvbnN0IHtcbiAgICBkYXRhLFxuICAgIGVtaXR0ZXIsXG4gICAgbGF5b3V0Q29uZmlnID0ge30sXG4gICAgb25Jbml0LFxuICAgIHNjaGVtYSxcbiAgICAuLi5yZXN0UHJvcHNcbiAgfSA9IHByb3BzO1xuXG4gIGxldCBwbGF5Z3JvdW5kUmVmID0gdXNlUmVmKG51bGwpO1xuXG4gIGNvbnN0IHBhbGV0dGVDb250YWluZXJSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IGVkaXRvckNvbnRhaW5lclJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgZGF0YUNvbnRhaW5lclJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgcHJldmlld0NvbnRhaW5lclJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgcmVzdWx0Q29udGFpbmVyUmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBwcm9wZXJ0aWVzQ29udGFpbmVyUmVmID0gdXNlUmVmKG51bGwpO1xuXG4gIGNvbnN0IHJvb3RSZWYgPSB1c2VSZWYobnVsbCk7XG5cbiAgLy8gKDEpIGluaXRpYWxpemUgcGxheWdyb3VuZCBvcmNoZXN0cmF0b3JcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBwbGF5Z3JvdW5kUmVmLmN1cnJlbnQgPSBuZXcgRm9ybVBsYXlncm91bmQoe1xuICAgICAgZGF0YSxcbiAgICAgIHNjaGVtYSxcbiAgICAgIGVkaXRvcjogeyBpbmxpbmVQcm9wZXJ0aWVzUGFuZWw6IGZhbHNlIH0sXG4gICAgICBwcm9wZXJ0aWVzUGFuZWw6IHtcbiAgICAgICAgZmVlbFBvcHVwQ29udGFpbmVyOiByb290UmVmLmN1cnJlbnQsXG4gICAgICAgIGdldERvY3VtZW50YXRpb25SZWZcbiAgICAgIH0sXG4gICAgICAuLi5yZXN0UHJvcHNcbiAgICB9KTtcbiAgfSwgW10pO1xuXG4gIC8vICgxLjEpIHBpcGUgcGxheWdyb3VuZCBBUElcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBwbGF5Z3JvdW5kUmVmLmN1cnJlbnQub24oJ2Zvcm1QbGF5Z3JvdW5kLmluaXQnLCAoKSA9PiB7XG4gICAgICBvbkluaXQoe1xuICAgICAgICAuLi5wbGF5Z3JvdW5kUmVmLmN1cnJlbnQsXG4gICAgICAgIGNvbGxhcHNlOiB0aGlzLmNvbGxhcHNlLFxuICAgICAgICBvcGVuOiB0aGlzLm9wZW4sXG5cbiAgICAgICAgLy8gQHBpbnVzc2lsdmVzdHJ1czogdGhpcyBpcyBhZGRlZCBmb3IgdGVzdGluZyBwdXJwb3Nlc1xuICAgICAgICBfcmVmOiBwbGF5Z3JvdW5kUmVmLmN1cnJlbnRcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9LCBbXSk7XG5cbiAgLy8gKDEuMikgcGlwZSBjb3JlIHBsYXlncm91bmQgZXZlbnRzXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgZW1pdCA9ICh0eXBlLCBlKSA9PiB7XG4gICAgICByZXR1cm4gZW1pdHRlci5lbWl0KHR5cGUsIGUpO1xuICAgIH07XG5cbiAgICBQSVBFX0VWRU5UUy5mb3JFYWNoKHR5cGUgPT4ge1xuICAgICAgcGxheWdyb3VuZFJlZi5jdXJyZW50Lm9uKHR5cGUsIGV2ZW50ID0+IGVtaXQodHlwZSwgZXZlbnQpKTtcbiAgICB9KTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBQSVBFX0VWRU5UUy5mb3JFYWNoKHR5cGUgPT4ge1xuICAgICAgICBwbGF5Z3JvdW5kUmVmLmN1cnJlbnQub2ZmKHR5cGUsIGV2ZW50ID0+IGVtaXQodHlwZSwgZXZlbnQpKTtcbiAgICAgIH0pO1xuICAgIH07XG4gIH0sIFsgcGxheWdyb3VuZFJlZiBdKTtcblxuICAvLyAoMikgc2V0LXVwIGxheW91dCBjb250ZXh0XG4gIGNvbnN0IFsgbGF5b3V0LCBzZXRMYXlvdXQgXSA9IHVzZVN0YXRlKGNyZWF0ZUxheW91dChsYXlvdXRDb25maWcpKTtcblxuICBjb25zdCBnZXRMYXlvdXRGb3JLZXkgPSAoa2V5LCBkZWZhdWx0VmFsdWUpID0+IHtcbiAgICByZXR1cm4gZ2V0KGxheW91dCwga2V5LCBkZWZhdWx0VmFsdWUpO1xuICB9O1xuXG4gIGNvbnN0IHNldExheW91dEZvcktleSA9IChrZXksIGNvbmZpZykgPT4ge1xuICAgIGNvbnN0IG5ld0xheW91dCA9IGFzc2lnbih7fSwgbGF5b3V0KTtcbiAgICBzZXQobmV3TGF5b3V0LCBrZXksIGNvbmZpZyk7XG4gICAgc2V0TGF5b3V0KG5ld0xheW91dCk7XG4gIH07XG5cbiAgY29uc3QgbGF5b3V0Q29udGV4dCA9IHtcbiAgICBsYXlvdXQsXG4gICAgc2V0TGF5b3V0LFxuICAgIGdldExheW91dEZvcktleSxcbiAgICBzZXRMYXlvdXRGb3JLZXlcbiAgfTtcblxuICBjb25zdCBpbnB1dE9wZW4gPSBnZXRMYXlvdXRGb3JLZXkoWyBGT1JNX0lOUFVUX0lEWCwgJ29wZW4nIF0sIGZhbHNlKTtcbiAgY29uc3QgdG9nZ2xlSW5wdXQgPSAoKSA9PiB7XG4gICAgaW5wdXRPcGVuID8gdGhpcy5jb2xsYXBzZShbIEZPUk1fSU5QVVRfSURYIF0pIDogdGhpcy5vcGVuKFsgRk9STV9JTlBVVF9JRFggXSk7XG4gIH07XG5cbiAgY29uc3Qgb3V0cHV0T3BlbiA9IGdldExheW91dEZvcktleShbIEZPUk1fT1VUUFVUX0lEWCwgJ29wZW4nIF0sIGZhbHNlKTtcbiAgY29uc3QgdG9nZ2xlT3V0cHV0ID0gKCkgPT4ge1xuICAgIG91dHB1dE9wZW4gPyB0aGlzLmNvbGxhcHNlKFsgRk9STV9PVVRQVVRfSURYIF0pIDogdGhpcy5vcGVuKFsgRk9STV9PVVRQVVRfSURYIF0pO1xuICB9O1xuXG4gIGNvbnN0IHByZXZpZXdPcGVuID0gZ2V0TGF5b3V0Rm9yS2V5KFsgRk9STV9QUkVWSUVXX0lEWCwgJ29wZW4nIF0sIGZhbHNlKTtcbiAgY29uc3QgdG9nZ2xlUHJldmlldyA9ICgpID0+IHtcbiAgICBwcmV2aWV3T3BlbiA/IHRoaXMuY29sbGFwc2UoKSA6IHRoaXMub3BlbigpO1xuICB9O1xuXG4gIGNvbnN0IHNldENvbnRhaW5lcnNMYXlvdXQgPSAoY29udGFpbmVycywgb3BlbikgPT4ge1xuICAgIGxldCBuZXdMYXlvdXQgPSBhc3NpZ24oe30sIGxheW91dCk7XG5cbiAgICBpZiAoIWNvbnRhaW5lcnMpIHtcbiAgICAgIGNvbnRhaW5lcnMgPSBUT0dHTEFCTEVfQ09OVEFJTkVSUztcbiAgICB9XG5cbiAgICBpZiAoIWlzQXJyYXkoY29udGFpbmVycykpIHtcbiAgICAgIGNvbnRhaW5lcnMgPSBbIGNvbnRhaW5lcnMgXTtcbiAgICB9XG5cbiAgICBjb250YWluZXJzLm1hcChpZHggPT4ge1xuICAgICAgc2V0KG5ld0xheW91dCwgWyBpZHgsICdvcGVuJyBdLCBvcGVuKTtcbiAgICB9KTtcblxuICAgIHNldExheW91dChuZXdMYXlvdXQpO1xuICB9O1xuXG4gIC8vICgyLjEpIG5vdGlmeSBpbnRlcmVzdGVkIHBhcnRpZXMgb24gbGF5b3V0IGNoYW5nZXNcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBlbWl0dGVyLmVtaXQoJ2Zvcm1QbGF5Z3JvdW5kLmxheW91dENoYW5nZWQnLCB7IGxheW91dCB9KTtcbiAgfSwgWyBlbWl0dGVyLCBsYXlvdXQgXSk7XG5cbiAgLy8gKDMpIGF0dGFjaCBhbGwgY29tcG9uZW50IGNvbnRhaW5lcnNcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBwbGF5Z3JvdW5kID0gcGxheWdyb3VuZFJlZi5jdXJyZW50O1xuXG4gICAgZnVuY3Rpb24gYXR0YWNoQ29tcG9uZW50cygpIHtcbiAgICAgIHBsYXlncm91bmQuYXR0YWNoUGFsZXR0ZUNvbnRhaW5lcihwYWxldHRlQ29udGFpbmVyUmVmLmN1cnJlbnQpO1xuICAgICAgcGxheWdyb3VuZC5hdHRhY2hFZGl0b3JDb250YWluZXIoZWRpdG9yQ29udGFpbmVyUmVmLmN1cnJlbnQpO1xuICAgICAgcGxheWdyb3VuZC5hdHRhY2hEYXRhQ29udGFpbmVyKGRhdGFDb250YWluZXJSZWYuY3VycmVudCk7XG4gICAgICBwbGF5Z3JvdW5kLmF0dGFjaFByZXZpZXdDb250YWluZXIocHJldmlld0NvbnRhaW5lclJlZi5jdXJyZW50KTtcbiAgICAgIHBsYXlncm91bmQuYXR0YWNoUmVzdWx0Q29udGFpbmVyKHJlc3VsdENvbnRhaW5lclJlZi5jdXJyZW50KTtcbiAgICAgIHBsYXlncm91bmQuYXR0YWNoUHJvcGVydGllc1BhbmVsQ29udGFpbmVyKHByb3BlcnRpZXNDb250YWluZXJSZWYuY3VycmVudCk7XG4gICAgfVxuXG4gICAgcGxheWdyb3VuZC5vbignZm9ybVBsYXlncm91bmQucmVuZGVyZWQnLCBhdHRhY2hDb21wb25lbnRzKTtcblxuICAgIHJldHVybiAoKSA9PiBwbGF5Z3JvdW5kLm9mZignZm9ybVBsYXlncm91bmQucmVuZGVyZWQnLCBhdHRhY2hDb21wb25lbnRzKTtcbiAgfSwgW10pO1xuXG4gIC8vICg0KSBwcm92aWRlIHRvZ2dsZSBBUElcblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd8QXJyYXk8c3RyaW5nPn0gW2NvbnRhaW5lcnNdXG4gICAqL1xuICB0aGlzLm9wZW4gPSBmdW5jdGlvbihjb250YWluZXJzKSB7XG4gICAgc2V0Q29udGFpbmVyc0xheW91dChjb250YWluZXJzLCB0cnVlKTtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd8QXJyYXk8c3RyaW5nPn0gW2NvbnRhaW5lcnNdXG4gICAqL1xuICB0aGlzLmNvbGxhcHNlID0gZnVuY3Rpb24oY29udGFpbmVycykge1xuICAgIHJldHVybiBzZXRDb250YWluZXJzTGF5b3V0KGNvbnRhaW5lcnMsIGZhbHNlKTtcbiAgfTtcblxuICAvLyAoNSkgbGlzdGVuIG9uIGRyYWdnaW5nIGV2ZW50cyB0byBwcm92aWRlIGRyb3AgZmVlZGJhY2tcbiAgdXNlRWZmZWN0KCgpID0+IHtcblxuICAgIGNvbnN0IGJpbmREcm9wVGFyZ2V0TGlzdGVuZXJzID0gKCkgPT4ge1xuICAgICAgY29uc3QgZWRpdG9yID0gcGxheWdyb3VuZFJlZi5jdXJyZW50LmdldEVkaXRvcigpO1xuICAgICAgZWRpdG9yLm9uKCdkcmFnLmhvdmVyJywgZnVuY3Rpb24oZXZlbnQpIHtcblxuICAgICAgICBjb25zdCB7IGNvbnRhaW5lciB9ID0gZXZlbnQ7XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoJ2Zqcy1kcm9wLWNvbnRhaW5lci1ob3Jpem9udGFsJykgfHxcbiAgICAgICAgICBjb250YWluZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdmanMtZHJvcC1jb250YWluZXItdmVydGljYWwnKVxuICAgICAgICApIHtcbiAgICAgICAgICByb290UmVmLmN1cnJlbnQgJiYgcm9vdFJlZi5jdXJyZW50LmNsYXNzTGlzdC5hZGQoJ2NmcC1kcmFnZ2luZycpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgZWRpdG9yLm9uKCdkcmFnLm91dCcsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIHJvb3RSZWYuY3VycmVudCAmJiByb290UmVmLmN1cnJlbnQuY2xhc3NMaXN0LnJlbW92ZSgnY2ZwLWRyYWdnaW5nJyk7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgY29uc3QgcGxheWdyb3VuZCA9IHBsYXlncm91bmRSZWYuY3VycmVudDtcblxuICAgIGlmIChwbGF5Z3JvdW5kKSB7XG4gICAgICBwbGF5Z3JvdW5kLm9uKCdmb3JtUGxheWdyb3VuZC5yZW5kZXJlZCcsIGJpbmREcm9wVGFyZ2V0TGlzdGVuZXJzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKHBsYXlncm91bmQpIHtcbiAgICAgICAgcGxheWdyb3VuZC5vZmYoJ2Zvcm1QbGF5Z3JvdW5kLnJlbmRlcmVkJywgYmluZERyb3BUYXJnZXRMaXN0ZW5lcnMpO1xuICAgICAgfVxuICAgIH07XG4gIH0pO1xuXG4gIC8vICg2KSByZW5kZXJcbiAgcmV0dXJuIGh0bWxgXG4gICAgPCR7TGF5b3V0Q29udGV4dC5Qcm92aWRlcn0gdmFsdWU9JHsgbGF5b3V0Q29udGV4dCB9PlxuICAgIDxkaXYgcmVmPSR7cm9vdFJlZn0gY2xhc3M9XCIke2NsYXNzTmFtZXMoJ2NmcC1yb290JywgeyAnY2ZwLW9wZW4tcHJldmlldyc6IHByZXZpZXdPcGVuIH0pfVwiPlxuICAgICAgPGRpdiBjbGFzcz1cImNmcC1wYWxldHRlXCIgcmVmPSR7IHBhbGV0dGVDb250YWluZXJSZWYgfT48L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJjZnAtbGVmdFwiPlxuICAgICAgICA8JHtDb2xsYXBzaWJsZVBhbmVsfSBpZHg9XCIkeyBGT1JNX0RFRklOSVRJT05fSURYIH1cIiB0aXRsZT1cIkZvcm0gRGVmaW5pdGlvblwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJjZnAtZWRpdG9yLWNvbnRhaW5lclwiIHJlZj0keyBlZGl0b3JDb250YWluZXJSZWYgfT48L2Rpdj5cbiAgICAgICAgPC8ke0NvbGxhcHNpYmxlUGFuZWx9PlxuICAgICAgICA8JHtDb2xsYXBzaWJsZVBhbmVsfSBvcGVuPSR7aW5wdXRPcGVufSBpZHg9XCIkeyBGT1JNX0lOUFVUX0lEWCB9XCIgdGl0bGU9XCJGb3JtIElucHV0XCIgY29sbGFwc2VUbz1cImJvdHRvbVwiIG9uVG9nZ2xlPSR7dG9nZ2xlSW5wdXR9PlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJjZnAtZGF0YS1jb250YWluZXJcIiByZWY9JHsgZGF0YUNvbnRhaW5lclJlZiB9PjwvZGl2PlxuICAgICAgICA8LyR7Q29sbGFwc2libGVQYW5lbH0+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJjZnAtcmlnaHRcIj5cbiAgICAgICAgPCR7Q29sbGFwc2VkUHJldmlld30gXG4gICAgICAgICAgaWR4PSR7IEZPUk1fUFJFVklFV19JRFggfVxuICAgICAgICAgIG9wZW49JHsgcHJldmlld09wZW4gfVxuICAgICAgICAgIHByZXZpZXdDb250YWluZXJSZWY9JHsgcHJldmlld0NvbnRhaW5lclJlZiB9XG4gICAgICAgICAgb25Ub2dnbGVQcmV2aWV3PVwiJHsgdG9nZ2xlUHJldmlldyB9XCIgXG4gICAgICAgIC8+XG4gICAgICAgIDwke0NvbGxhcHNpYmxlUGFuZWx9IG9wZW49JHtvdXRwdXRPcGVufSBpZHg9XCIkeyBGT1JNX09VVFBVVF9JRFggfVwiIHRpdGxlPVwiRm9ybSBPdXRwdXRcIiBjb2xsYXBzZVRvPVwiYm90dG9tXCIgb25Ub2dnbGU9JHt0b2dnbGVPdXRwdXR9PlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJjZnAtcmVzdWx0LWNvbnRhaW5lclwiIHJlZj0keyByZXN1bHRDb250YWluZXJSZWYgfT48L2Rpdj5cbiAgICAgICAgPC8ke0NvbGxhcHNpYmxlUGFuZWx9PlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwiY2ZwLXByb3BlcnRpZXNcIiByZWY9JHsgcHJvcGVydGllc0NvbnRhaW5lclJlZiB9PjwvZGl2PlxuICAgIDwvZGl2PlxuICAgIDwvJHtMYXlvdXRDb250ZXh0LlByb3ZpZGVyfT5cbiAgYDtcbn1cblxuXG4vLyBoZWxwZXIgLy8vLy8vLy8vLy8vLy8vXG5cbmZ1bmN0aW9uIGNyZWF0ZUxheW91dChvdmVycmlkZXMpIHtcbiAgcmV0dXJuIHtcbiAgICAuLi5ERUZBVUxUX0xBWU9VVCxcbiAgICAuLi5vdmVycmlkZXNcbiAgfTtcbn1cblxuZnVuY3Rpb24gZ2V0RG9jdW1lbnRhdGlvblJlZihmaWVsZCkge1xuXG4gIGlmICghZmllbGQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoZmllbGQudHlwZSA9PT0gJ2RlZmF1bHQnKSB7XG4gICAgcmV0dXJuICdodHRwczovL2RvY3MuY2FtdW5kYS5pby9kb2NzL2NvbXBvbmVudHMvbW9kZWxlci9mb3Jtcy9jYW11bmRhLWZvcm1zLXJlZmVyZW5jZS8nO1xuICB9XG5cbiAgY29uc3QgdHlwZVRvRG9jc01hcCA9IHtcbiAgICBbQ2hlY2tsaXN0LmNvbmZpZy50eXBlXTogJ2NoZWNrYm94LWdyb3VwJyxcbiAgICBbRG9jdW1lbnRQcmV2aWV3LmNvbmZpZy50eXBlXTogJ2RvY3VtZW50LXByZXZpZXcnXG4gIH07XG5cbiAgcmV0dXJuIGBodHRwczovL2RvY3MuY2FtdW5kYS5pby9kb2NzL2NvbXBvbmVudHMvbW9kZWxlci9mb3Jtcy9mb3JtLWVsZW1lbnQtbGlicmFyeS9mb3Jtcy1lbGVtZW50LWxpYnJhcnktJHt0eXBlVG9Eb2NzTWFwW2ZpZWxkLnR5cGVdIHx8IGZpZWxkLnR5cGV9L2A7XG59XG5cbi8qKlxuICogQHR5cGVkZWYgeyBpbXBvcnQoJ0BicG1uLWlvL2Zvcm0tanMtdmlld2VyJykuRm9ybVByb3BlcnRpZXMgfSBGb3JtUHJvcGVydGllc1xuICogQHR5cGVkZWYgeyBpbXBvcnQoJ0BicG1uLWlvL2Zvcm0tanMtZWRpdG9yJykuRm9ybUVkaXRvclByb3BlcnRpZXMgfSBGb3JtRWRpdG9yUHJvcGVydGllc1xuICpcbiAqIEB0eXBlZGVmIHsge1xuICogIGNvbnRhaW5lcj86IEVsZW1lbnQsXG4gKiAgZGF0YTogYW55LFxuICogIGVkaXRvckFkZGl0aW9uYWxNb2R1bGVzPzogQXJyYXk8YW55PixcbiAqICBlZGl0b3JQcm9wZXJ0aWVzPzogRm9ybUVkaXRvclByb3BlcnRpZXNcbiAqICBleHBvcnRlcj86IHsgbmFtZTogc3RyaW5nLCB2ZXJzaW9uOiBzdHJpbmcgfSxcbiAqICBsYXlvdXQ/OiBhbnksXG4gKiAgcHJvcGVydGllc1BhbmVsPzogeyBwYXJlbnQ6IEVsZW1lbnQsIGZlZWxQb3B1cENvbnRhaW5lcjogRWxlbWVudCB9LFxuICogIHNjaGVtYTogYW55LFxuICogIHZpZXdlckFkZGl0aW9uYWxNb2R1bGVzPzogQXJyYXk8YW55PixcbiAqICB2aWV3ZXJQcm9wZXJ0aWVzPzogRm9ybVByb3BlcnRpZXMsXG4gKiB9IH0gQ2FtdW5kYUZvcm1QbGF5Z3JvdW5kT3B0aW9uc1xuICovXG5cbi8qKlxuICogQHBhcmFtIHtDYW11bmRhRm9ybVBsYXlncm91bmRPcHRpb25zfSBvcHRpb25zXG4gKi9cbmZ1bmN0aW9uIENhbXVuZGFGb3JtUGxheWdyb3VuZChvcHRpb25zKSB7XG5cbiAgY29uc3Qge1xuICAgIGNvbnRhaW5lcjogcGFyZW50LFxuICAgIGRhdGEsXG4gICAgc2NoZW1hLFxuICAgIGxheW91dDogbGF5b3V0Q29uZmlnLFxuICAgIC4uLnJlc3RQcm9wc1xuICB9ID0gb3B0aW9ucztcblxuICBjb25zdCBlbWl0dGVyID0gbWl0dCgpO1xuXG4gIGNvbnN0IHNhZmVSZWYgPSBmdW5jdGlvbihmbikge1xuICAgIHJldHVybiBmdW5jdGlvbiguLi5hcmdzKSB7XG4gICAgICBpZiAoIXBsYXlncm91bmRSZWYpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW11bmRhIEZvcm0gUGxheWdyb3VuZCBpcyBub3QgaW5pdGlhbGl6ZWQuJyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmbiguLi5hcmdzKTtcbiAgICB9O1xuICB9O1xuXG4gIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuX2NvbnRhaW5lciA9IGRvbWlmeSgnPGRpdiBjbGFzcz1cImNmcC1jb250YWluZXJcIj48L2Rpdj4nKTtcblxuICBsZXQgcGxheWdyb3VuZFJlZjtcblxuICBpZiAocGFyZW50KSB7XG4gICAgcGFyZW50LmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XG4gIH1cblxuXG4gIC8vIEFQSSAvLy8vLy8vLy8vXG5cbiAgdGhpcy5vbiA9IGVtaXR0ZXIub247XG4gIHRoaXMub2ZmID0gZW1pdHRlci5vZmY7XG4gIHRoaXMuZmlyZSA9IGVtaXR0ZXIuZW1pdDtcblxuICAvLyBhZGRlZCBkdWUgdG8gY3VycmVudCBsaW1pdGF0aW9uIG9mIDxtaXR0Lm9uY2U+XG4gIC8vIGNmLiBodHRwczovL2dpdGh1Yi5jb20vZGV2ZWxvcGl0L21pdHQvaXNzdWVzLzEzNlxuICB0aGlzLm9uY2UgPSBmdW5jdGlvbih0eXBlLCBmbikge1xuICAgIGVtaXR0ZXIub24odHlwZSwgZm4pO1xuICAgIGVtaXR0ZXIub24odHlwZSwgZW1pdHRlci5vZmYuYmluZChlbWl0dGVyLCB0eXBlLCBmbikpO1xuICB9O1xuXG4gIHRoaXMuZGVzdHJveSA9IGZ1bmN0aW9uKCkge1xuICAgIGNvbnN0IHBhcmVudCA9IGNvbnRhaW5lci5wYXJlbnROb2RlO1xuICAgIHJlbmRlcihudWxsLCBjb250YWluZXIpO1xuICAgIHBhcmVudCAmJiBwYXJlbnQucmVtb3ZlQ2hpbGQoY29udGFpbmVyKTtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gcGFyZW50XG4gICAqL1xuICB0aGlzLmF0dGFjaFRvID0gZnVuY3Rpb24ocGFyZW50KSB7XG4gICAgaWYgKCFwYXJlbnQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcigncGFyZW50IHJlcXVpcmVkJyk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBwYXJlbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICBwYXJlbnQgPSBxdWVyeShwYXJlbnQpO1xuICAgIH1cblxuICAgIHRoaXMuZGV0YWNoKCk7XG4gICAgcGFyZW50LmFwcGVuZENoaWxkKHRoaXMuX2NvbnRhaW5lcik7XG4gIH07XG5cbiAgdGhpcy5kZXRhY2ggPSBmdW5jdGlvbigpIHtcbiAgICBjb25zdCBwYXJlbnROb2RlID0gY29udGFpbmVyLnBhcmVudE5vZGU7XG5cbiAgICBpZiAocGFyZW50Tm9kZSkge1xuICAgICAgcGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjb250YWluZXIpO1xuICAgIH1cbiAgfTtcblxuICB0aGlzLmdldCA9IHNhZmVSZWYoKG1vZHVsZSwgc3RyaWN0KSA9PiBwbGF5Z3JvdW5kUmVmLmdldChtb2R1bGUsIHN0cmljdCkpO1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ3xBcnJheTxzdHJpbmc+fSBbY29udGFpbmVyc11cbiAgICovXG4gIHRoaXMub3BlbiA9IHNhZmVSZWYoKGNvbnRhaW5lcnMpID0+IHBsYXlncm91bmRSZWYub3Blbihjb250YWluZXJzKSk7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfEFycmF5PHN0cmluZz59IFtjb250YWluZXJzXVxuICAgKi9cbiAgdGhpcy5jb2xsYXBzZSA9IHNhZmVSZWYoKGNvbnRhaW5lcnMpID0+IHBsYXlncm91bmRSZWYuY29sbGFwc2UoY29udGFpbmVycykpO1xuXG4gIHRoaXMuc2V0U2NoZW1hID0gc2FmZVJlZigoc2NoZW1hKSA9PiBwbGF5Z3JvdW5kUmVmLnNldFNjaGVtYShzY2hlbWEpKTtcblxuICB0aGlzLmdldFNjaGVtYSA9IHNhZmVSZWYoKCkgPT4gcGxheWdyb3VuZFJlZi5nZXRTY2hlbWEoKSk7XG5cbiAgdGhpcy5zYXZlU2NoZW1hID0gc2FmZVJlZigoKSA9PiBwbGF5Z3JvdW5kUmVmLnNhdmVTY2hlbWEoKSk7XG5cbiAgdGhpcy5nZXREYXRhRWRpdG9yID0gc2FmZVJlZigoKSA9PiBwbGF5Z3JvdW5kUmVmLmdldERhdGFFZGl0b3IoKSk7XG5cbiAgdGhpcy5nZXRFZGl0b3IgPSBzYWZlUmVmKCgpID0+IHBsYXlncm91bmRSZWYuZ2V0RWRpdG9yKCkpO1xuXG4gIHRoaXMuZ2V0Rm9ybSA9IHNhZmVSZWYoKG5hbWUsIHN0cmljdCkgPT4gcGxheWdyb3VuZFJlZi5nZXRGb3JtKG5hbWUsIHN0cmljdCkpO1xuXG4gIHRoaXMuZ2V0UmVzdWx0VmlldyA9IHNhZmVSZWYoKCkgPT4gcGxheWdyb3VuZFJlZi5nZXRSZXN1bHRWaWV3KCkpO1xuXG4gIHRoaXMuX29uSW5pdCA9IGZ1bmN0aW9uKF9yZWYpIHtcbiAgICBwbGF5Z3JvdW5kUmVmID0gX3JlZjtcbiAgfTtcblxuICByZW5kZXIoaHRtbGBcbiAgICA8JHtQbGF5Z3JvdW5kQ29tcG9uZW50fVxuICAgICAgZGF0YT0keyBkYXRhIH1cbiAgICAgIGVtaXR0ZXI9JHsgZW1pdHRlciB9XG4gICAgICBsYXlvdXRDb25maWc9JHsgbGF5b3V0Q29uZmlnIH1cbiAgICAgIG9uSW5pdD0keyB0aGlzLl9vbkluaXQgfVxuICAgICAgc2NoZW1hPSR7IHNjaGVtYSB9XG4gICAgICAuLi4keyByZXN0UHJvcHMgfVxuICAgIC8+XG4gIGAsIGNvbnRhaW5lclxuICApO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7Q2FtdW5kYUZvcm1QbGF5Z3JvdW5kT3B0aW9uc30gb3B0aW9uc1xuICpcbiAqIEByZXR1cm4ge0NhbXVuZGFGb3JtUGxheWdyb3VuZH1cbiAqL1xuYXN5bmMgZnVuY3Rpb24gY3JlYXRlQ2FtdW5kYUZvcm1QbGF5Z3JvdW5kKG9wdGlvbnMpIHtcbiAgY29uc3QgcGxheWdyb3VuZCA9IG5ldyBDYW11bmRhRm9ybVBsYXlncm91bmQob3B0aW9ucyk7XG5cbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblxuICAgIGNvbnN0IG9uSW5pdCA9ICgpID0+IHtcbiAgICAgIHJldHVybiByZXNvbHZlKHBsYXlncm91bmQpO1xuICAgIH07XG5cbiAgICB0cnkge1xuICAgICAgcGxheWdyb3VuZC5vbmNlKCdmb3JtUGxheWdyb3VuZC5pbml0Jywgb25Jbml0KTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHJldHVybiByZWplY3QoZXJyKTtcbiAgICB9XG4gIH0pO1xufVxuXG5leHBvcnQgeyBDYW11bmRhRm9ybVBsYXlncm91bmQsIGNyZWF0ZUNhbXVuZGFGb3JtUGxheWdyb3VuZCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXMuanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../node_modules/@camunda/form-playground/dist/index.es.js\n\n}");

/***/ }),

/***/ "../node_modules/@camunda/form-playground/node_modules/domify/index.js":
/*!*****************************************************************************!*\
  !*** ../node_modules/@camunda/form-playground/node_modules/domify/index.js ***!
  \*****************************************************************************/
/***/ ((module) => {

eval("{const wrapMap = {\n\tlegend: [1, '<fieldset>', '</fieldset>'],\n\ttr: [2, '<table><tbody>', '</tbody></table>'],\n\tcol: [2, '<table><tbody></tbody><colgroup>', '</colgroup></table>'],\n\t_default: [0, '', ''],\n};\n\nwrapMap.td\n= wrapMap.th = [3, '<table><tbody><tr>', '</tr></tbody></table>'];\n\nwrapMap.option\n= wrapMap.optgroup = [1, '<select multiple=\"multiple\">', '</select>'];\n\nwrapMap.thead\n= wrapMap.tbody\n= wrapMap.colgroup\n= wrapMap.caption\n= wrapMap.tfoot = [1, '<table>', '</table>'];\n\nwrapMap.polyline\n= wrapMap.ellipse\n= wrapMap.polygon\n= wrapMap.circle\n= wrapMap.text\n= wrapMap.line\n= wrapMap.path\n= wrapMap.rect\n= wrapMap.g = [1, '<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\">', '</svg>'];\n\nfunction domify(htmlString, document = globalThis.document) {\n\tif (typeof htmlString !== 'string') {\n\t\tthrow new TypeError('String expected');\n\t}\n\n\t// Handle comment nodes\n\tconst commentMatch = /^<!--(.*?)-->$/s.exec(htmlString);\n\tif (commentMatch) {\n\t\treturn document.createComment(commentMatch[1]);\n\t}\n\n\tconst tagName = /<([\\w:]+)/.exec(htmlString)?.[1];\n\n\tif (!tagName) {\n\t\treturn document.createTextNode(htmlString);\n\t}\n\n\thtmlString = htmlString.trim();\n\n\t// Body support\n\tif (tagName === 'body') {\n\t\tconst element = document.createElement('html');\n\t\telement.innerHTML = htmlString;\n\t\tconst {lastChild} = element;\n\t\tlastChild.remove();\n\t\treturn lastChild;\n\t}\n\n\t// Wrap map\n\tlet [depth, prefix, suffix] = Object.hasOwn(wrapMap, tagName) ? wrapMap[tagName] : wrapMap._default;\n\tlet element = document.createElement('div');\n\telement.innerHTML = prefix + htmlString + suffix;\n\twhile (depth--) {\n\t\telement = element.lastChild;\n\t}\n\n\t// One element\n\tif (element.firstChild === element.lastChild) {\n\t\tconst {firstChild} = element;\n\t\tfirstChild.remove();\n\t\treturn firstChild;\n\t}\n\n\t// Several elements\n\tconst fragment = document.createDocumentFragment();\n\tfragment.append(...element.childNodes);\n\n\treturn fragment;\n}\n\nmodule.exports = domify;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vbm9kZV9tb2R1bGVzL0BjYW11bmRhL2Zvcm0tcGxheWdyb3VuZC9ub2RlX21vZHVsZXMvZG9taWZ5L2luZGV4LmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLFdBQVc7QUFDcEI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxTQUFTLFlBQVk7QUFDckI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FtdW5kYS1tb2RlbGVyLWNsaWVudC8uLi9ub2RlX21vZHVsZXMvQGNhbXVuZGEvZm9ybS1wbGF5Z3JvdW5kL25vZGVfbW9kdWxlcy9kb21pZnkvaW5kZXguanM/YmNiMyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB3cmFwTWFwID0ge1xuXHRsZWdlbmQ6IFsxLCAnPGZpZWxkc2V0PicsICc8L2ZpZWxkc2V0PiddLFxuXHR0cjogWzIsICc8dGFibGU+PHRib2R5PicsICc8L3Rib2R5PjwvdGFibGU+J10sXG5cdGNvbDogWzIsICc8dGFibGU+PHRib2R5PjwvdGJvZHk+PGNvbGdyb3VwPicsICc8L2NvbGdyb3VwPjwvdGFibGU+J10sXG5cdF9kZWZhdWx0OiBbMCwgJycsICcnXSxcbn07XG5cbndyYXBNYXAudGRcbj0gd3JhcE1hcC50aCA9IFszLCAnPHRhYmxlPjx0Ym9keT48dHI+JywgJzwvdHI+PC90Ym9keT48L3RhYmxlPiddO1xuXG53cmFwTWFwLm9wdGlvblxuPSB3cmFwTWFwLm9wdGdyb3VwID0gWzEsICc8c2VsZWN0IG11bHRpcGxlPVwibXVsdGlwbGVcIj4nLCAnPC9zZWxlY3Q+J107XG5cbndyYXBNYXAudGhlYWRcbj0gd3JhcE1hcC50Ym9keVxuPSB3cmFwTWFwLmNvbGdyb3VwXG49IHdyYXBNYXAuY2FwdGlvblxuPSB3cmFwTWFwLnRmb290ID0gWzEsICc8dGFibGU+JywgJzwvdGFibGU+J107XG5cbndyYXBNYXAucG9seWxpbmVcbj0gd3JhcE1hcC5lbGxpcHNlXG49IHdyYXBNYXAucG9seWdvblxuPSB3cmFwTWFwLmNpcmNsZVxuPSB3cmFwTWFwLnRleHRcbj0gd3JhcE1hcC5saW5lXG49IHdyYXBNYXAucGF0aFxuPSB3cmFwTWFwLnJlY3Rcbj0gd3JhcE1hcC5nID0gWzEsICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2ZXJzaW9uPVwiMS4xXCI+JywgJzwvc3ZnPiddO1xuXG5mdW5jdGlvbiBkb21pZnkoaHRtbFN0cmluZywgZG9jdW1lbnQgPSBnbG9iYWxUaGlzLmRvY3VtZW50KSB7XG5cdGlmICh0eXBlb2YgaHRtbFN0cmluZyAhPT0gJ3N0cmluZycpIHtcblx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdTdHJpbmcgZXhwZWN0ZWQnKTtcblx0fVxuXG5cdC8vIEhhbmRsZSBjb21tZW50IG5vZGVzXG5cdGNvbnN0IGNvbW1lbnRNYXRjaCA9IC9ePCEtLSguKj8pLS0+JC9zLmV4ZWMoaHRtbFN0cmluZyk7XG5cdGlmIChjb21tZW50TWF0Y2gpIHtcblx0XHRyZXR1cm4gZG9jdW1lbnQuY3JlYXRlQ29tbWVudChjb21tZW50TWF0Y2hbMV0pO1xuXHR9XG5cblx0Y29uc3QgdGFnTmFtZSA9IC88KFtcXHc6XSspLy5leGVjKGh0bWxTdHJpbmcpPy5bMV07XG5cblx0aWYgKCF0YWdOYW1lKSB7XG5cdFx0cmV0dXJuIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGh0bWxTdHJpbmcpO1xuXHR9XG5cblx0aHRtbFN0cmluZyA9IGh0bWxTdHJpbmcudHJpbSgpO1xuXG5cdC8vIEJvZHkgc3VwcG9ydFxuXHRpZiAodGFnTmFtZSA9PT0gJ2JvZHknKSB7XG5cdFx0Y29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2h0bWwnKTtcblx0XHRlbGVtZW50LmlubmVySFRNTCA9IGh0bWxTdHJpbmc7XG5cdFx0Y29uc3Qge2xhc3RDaGlsZH0gPSBlbGVtZW50O1xuXHRcdGxhc3RDaGlsZC5yZW1vdmUoKTtcblx0XHRyZXR1cm4gbGFzdENoaWxkO1xuXHR9XG5cblx0Ly8gV3JhcCBtYXBcblx0bGV0IFtkZXB0aCwgcHJlZml4LCBzdWZmaXhdID0gT2JqZWN0Lmhhc093bih3cmFwTWFwLCB0YWdOYW1lKSA/IHdyYXBNYXBbdGFnTmFtZV0gOiB3cmFwTWFwLl9kZWZhdWx0O1xuXHRsZXQgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRlbGVtZW50LmlubmVySFRNTCA9IHByZWZpeCArIGh0bWxTdHJpbmcgKyBzdWZmaXg7XG5cdHdoaWxlIChkZXB0aC0tKSB7XG5cdFx0ZWxlbWVudCA9IGVsZW1lbnQubGFzdENoaWxkO1xuXHR9XG5cblx0Ly8gT25lIGVsZW1lbnRcblx0aWYgKGVsZW1lbnQuZmlyc3RDaGlsZCA9PT0gZWxlbWVudC5sYXN0Q2hpbGQpIHtcblx0XHRjb25zdCB7Zmlyc3RDaGlsZH0gPSBlbGVtZW50O1xuXHRcdGZpcnN0Q2hpbGQucmVtb3ZlKCk7XG5cdFx0cmV0dXJuIGZpcnN0Q2hpbGQ7XG5cdH1cblxuXHQvLyBTZXZlcmFsIGVsZW1lbnRzXG5cdGNvbnN0IGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuXHRmcmFnbWVudC5hcHBlbmQoLi4uZWxlbWVudC5jaGlsZE5vZGVzKTtcblxuXHRyZXR1cm4gZnJhZ21lbnQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZG9taWZ5O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../node_modules/@camunda/form-playground/node_modules/domify/index.js\n\n}");

/***/ }),

/***/ "../node_modules/@camunda/form-playground/node_modules/min-dash/dist/index.esm.js":
/*!****************************************************************************************!*\
  !*** ../node_modules/@camunda/form-playground/node_modules/min-dash/dist/index.esm.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   assign: () => (/* binding */ assign),\n/* harmony export */   bind: () => (/* binding */ bind),\n/* harmony export */   debounce: () => (/* binding */ debounce),\n/* harmony export */   ensureArray: () => (/* binding */ ensureArray),\n/* harmony export */   every: () => (/* binding */ every),\n/* harmony export */   filter: () => (/* binding */ filter),\n/* harmony export */   find: () => (/* binding */ find),\n/* harmony export */   findIndex: () => (/* binding */ findIndex),\n/* harmony export */   flatten: () => (/* binding */ flatten),\n/* harmony export */   forEach: () => (/* binding */ forEach),\n/* harmony export */   get: () => (/* binding */ get),\n/* harmony export */   groupBy: () => (/* binding */ groupBy),\n/* harmony export */   has: () => (/* binding */ has),\n/* harmony export */   isArray: () => (/* binding */ isArray),\n/* harmony export */   isDefined: () => (/* binding */ isDefined),\n/* harmony export */   isFunction: () => (/* binding */ isFunction),\n/* harmony export */   isNil: () => (/* binding */ isNil),\n/* harmony export */   isNumber: () => (/* binding */ isNumber),\n/* harmony export */   isObject: () => (/* binding */ isObject),\n/* harmony export */   isString: () => (/* binding */ isString),\n/* harmony export */   isUndefined: () => (/* binding */ isUndefined),\n/* harmony export */   keys: () => (/* binding */ keys),\n/* harmony export */   map: () => (/* binding */ map),\n/* harmony export */   matchPattern: () => (/* binding */ matchPattern),\n/* harmony export */   merge: () => (/* binding */ merge),\n/* harmony export */   omit: () => (/* binding */ omit),\n/* harmony export */   pick: () => (/* binding */ pick),\n/* harmony export */   reduce: () => (/* binding */ reduce),\n/* harmony export */   set: () => (/* binding */ set),\n/* harmony export */   size: () => (/* binding */ size),\n/* harmony export */   some: () => (/* binding */ some),\n/* harmony export */   sortBy: () => (/* binding */ sortBy),\n/* harmony export */   throttle: () => (/* binding */ throttle),\n/* harmony export */   unionBy: () => (/* binding */ unionBy),\n/* harmony export */   uniqueBy: () => (/* binding */ uniqueBy),\n/* harmony export */   values: () => (/* binding */ values),\n/* harmony export */   without: () => (/* binding */ without)\n/* harmony export */ });\n/**\n * Flatten array, one level deep.\n *\n * @template T\n *\n * @param {T[][] | T[] | null} [arr]\n *\n * @return {T[]}\n */\nfunction flatten(arr) {\n  return Array.prototype.concat.apply([], arr);\n}\n\nconst nativeToString = Object.prototype.toString;\nconst nativeHasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction isUndefined(obj) {\n  return obj === undefined;\n}\n\nfunction isDefined(obj) {\n  return obj !== undefined;\n}\n\nfunction isNil(obj) {\n  return obj == null;\n}\n\nfunction isArray(obj) {\n  return nativeToString.call(obj) === '[object Array]';\n}\n\nfunction isObject(obj) {\n  return nativeToString.call(obj) === '[object Object]';\n}\n\nfunction isNumber(obj) {\n  return nativeToString.call(obj) === '[object Number]';\n}\n\n/**\n * @param {any} obj\n *\n * @return {boolean}\n */\nfunction isFunction(obj) {\n  const tag = nativeToString.call(obj);\n\n  return (\n    tag === '[object Function]' ||\n    tag === '[object AsyncFunction]' ||\n    tag === '[object GeneratorFunction]' ||\n    tag === '[object AsyncGeneratorFunction]' ||\n    tag === '[object Proxy]'\n  );\n}\n\nfunction isString(obj) {\n  return nativeToString.call(obj) === '[object String]';\n}\n\n\n/**\n * Ensure collection is an array.\n *\n * @param {Object} obj\n */\nfunction ensureArray(obj) {\n\n  if (isArray(obj)) {\n    return;\n  }\n\n  throw new Error('must supply array');\n}\n\n/**\n * Return true, if target owns a property with the given key.\n *\n * @param {Object} target\n * @param {String} key\n *\n * @return {Boolean}\n */\nfunction has(target, key) {\n  return !isNil(target) && nativeHasOwnProperty.call(target, key);\n}\n\n/**\n * @template T\n * @typedef { (\n *   ((e: T) => boolean) |\n *   ((e: T, idx: number) => boolean) |\n *   ((e: T, key: string) => boolean) |\n *   string |\n *   number\n * ) } Matcher\n */\n\n/**\n * @template T\n * @template U\n *\n * @typedef { (\n *   ((e: T) => U) | string | number\n * ) } Extractor\n */\n\n\n/**\n * @template T\n * @typedef { (val: T, key: any) => boolean } MatchFn\n */\n\n/**\n * @template T\n * @typedef { T[] } ArrayCollection\n */\n\n/**\n * @template T\n * @typedef { { [key: string]: T } } StringKeyValueCollection\n */\n\n/**\n * @template T\n * @typedef { { [key: number]: T } } NumberKeyValueCollection\n */\n\n/**\n * @template T\n * @typedef { StringKeyValueCollection<T> | NumberKeyValueCollection<T> } KeyValueCollection\n */\n\n/**\n * @template T\n * @typedef { KeyValueCollection<T> | ArrayCollection<T> } Collection\n */\n\n/**\n * Find element in collection.\n *\n * @template T\n * @param {Collection<T>} collection\n * @param {Matcher<T>} matcher\n *\n * @return {Object}\n */\nfunction find(collection, matcher) {\n\n  const matchFn = toMatcher(matcher);\n\n  let match;\n\n  forEach(collection, function(val, key) {\n    if (matchFn(val, key)) {\n      match = val;\n\n      return false;\n    }\n  });\n\n  return match;\n\n}\n\n\n/**\n * Find element index in collection.\n *\n * @template T\n * @param {Collection<T>} collection\n * @param {Matcher<T>} matcher\n *\n * @return {number | string | undefined}\n */\nfunction findIndex(collection, matcher) {\n\n  const matchFn = toMatcher(matcher);\n\n  let idx = isArray(collection) ? -1 : undefined;\n\n  forEach(collection, function(val, key) {\n    if (matchFn(val, key)) {\n      idx = key;\n\n      return false;\n    }\n  });\n\n  return idx;\n}\n\n\n/**\n * Filter elements in collection.\n *\n * @template T\n * @param {Collection<T>} collection\n * @param {Matcher<T>} matcher\n *\n * @return {T[]} result\n */\nfunction filter(collection, matcher) {\n\n  const matchFn = toMatcher(matcher);\n\n  let result = [];\n\n  forEach(collection, function(val, key) {\n    if (matchFn(val, key)) {\n      result.push(val);\n    }\n  });\n\n  return result;\n}\n\n\n/**\n * Iterate over collection; returning something\n * (non-undefined) will stop iteration.\n *\n * @template T\n * @param {Collection<T>} collection\n * @param { ((item: T, idx: number) => (boolean|void)) | ((item: T, key: string) => (boolean|void)) } iterator\n *\n * @return {T} return result that stopped the iteration\n */\nfunction forEach(collection, iterator) {\n\n  let val,\n      result;\n\n  if (isUndefined(collection)) {\n    return;\n  }\n\n  const convertKey = isArray(collection) ? toNum : identity;\n\n  for (let key in collection) {\n\n    if (has(collection, key)) {\n      val = collection[key];\n\n      result = iterator(val, convertKey(key));\n\n      if (result === false) {\n        return val;\n      }\n    }\n  }\n}\n\n/**\n * Return collection without element.\n *\n * @template T\n * @param {ArrayCollection<T>} arr\n * @param {Matcher<T>} matcher\n *\n * @return {T[]}\n */\nfunction without(arr, matcher) {\n\n  if (isUndefined(arr)) {\n    return [];\n  }\n\n  ensureArray(arr);\n\n  const matchFn = toMatcher(matcher);\n\n  return arr.filter(function(el, idx) {\n    return !matchFn(el, idx);\n  });\n\n}\n\n\n/**\n * Reduce collection, returning a single result.\n *\n * @template T\n * @template V\n *\n * @param {Collection<T>} collection\n * @param {(result: V, entry: T, index: any) => V} iterator\n * @param {V} result\n *\n * @return {V} result returned from last iterator\n */\nfunction reduce(collection, iterator, result) {\n\n  forEach(collection, function(value, idx) {\n    result = iterator(result, value, idx);\n  });\n\n  return result;\n}\n\n\n/**\n * Return true if every element in the collection\n * matches the criteria.\n *\n * @param  {Object|Array} collection\n * @param  {Function} matcher\n *\n * @return {Boolean}\n */\nfunction every(collection, matcher) {\n\n  return !!reduce(collection, function(matches, val, key) {\n    return matches && matcher(val, key);\n  }, true);\n}\n\n\n/**\n * Return true if some elements in the collection\n * match the criteria.\n *\n * @param  {Object|Array} collection\n * @param  {Function} matcher\n *\n * @return {Boolean}\n */\nfunction some(collection, matcher) {\n\n  return !!find(collection, matcher);\n}\n\n\n/**\n * Transform a collection into another collection\n * by piping each member through the given fn.\n *\n * @param  {Object|Array}   collection\n * @param  {Function} fn\n *\n * @return {Array} transformed collection\n */\nfunction map(collection, fn) {\n\n  let result = [];\n\n  forEach(collection, function(val, key) {\n    result.push(fn(val, key));\n  });\n\n  return result;\n}\n\n\n/**\n * Get the collections keys.\n *\n * @param  {Object|Array} collection\n *\n * @return {Array}\n */\nfunction keys(collection) {\n  return collection && Object.keys(collection) || [];\n}\n\n\n/**\n * Shorthand for `keys(o).length`.\n *\n * @param  {Object|Array} collection\n *\n * @return {Number}\n */\nfunction size(collection) {\n  return keys(collection).length;\n}\n\n\n/**\n * Get the values in the collection.\n *\n * @param  {Object|Array} collection\n *\n * @return {Array}\n */\nfunction values(collection) {\n  return map(collection, (val) => val);\n}\n\n\n/**\n * Group collection members by attribute.\n *\n * @param {Object|Array} collection\n * @param {Extractor} extractor\n *\n * @return {Object} map with { attrValue => [ a, b, c ] }\n */\nfunction groupBy(collection, extractor, grouped = {}) {\n\n  extractor = toExtractor(extractor);\n\n  forEach(collection, function(val) {\n    let discriminator = extractor(val) || '_';\n\n    let group = grouped[discriminator];\n\n    if (!group) {\n      group = grouped[discriminator] = [];\n    }\n\n    group.push(val);\n  });\n\n  return grouped;\n}\n\n\nfunction uniqueBy(extractor, ...collections) {\n\n  extractor = toExtractor(extractor);\n\n  let grouped = {};\n\n  forEach(collections, (c) => groupBy(c, extractor, grouped));\n\n  let result = map(grouped, function(val, key) {\n    return val[0];\n  });\n\n  return result;\n}\n\n\nconst unionBy = uniqueBy;\n\n\n\n/**\n * Sort collection by criteria.\n *\n * @template T\n *\n * @param {Collection<T>} collection\n * @param {Extractor<T, number | string>} extractor\n *\n * @return {Array}\n */\nfunction sortBy(collection, extractor) {\n\n  extractor = toExtractor(extractor);\n\n  let sorted = [];\n\n  forEach(collection, function(value, key) {\n    let disc = extractor(value, key);\n\n    let entry = {\n      d: disc,\n      v: value\n    };\n\n    for (var idx = 0; idx < sorted.length; idx++) {\n      let { d } = sorted[idx];\n\n      if (disc < d) {\n        sorted.splice(idx, 0, entry);\n        return;\n      }\n    }\n\n    // not inserted, append (!)\n    sorted.push(entry);\n  });\n\n  return map(sorted, (e) => e.v);\n}\n\n\n/**\n * Create an object pattern matcher.\n *\n * @example\n *\n * ```javascript\n * const matcher = matchPattern({ id: 1 });\n *\n * let element = find(elements, matcher);\n * ```\n *\n * @template T\n *\n * @param {T} pattern\n *\n * @return { (el: any) =>  boolean } matcherFn\n */\nfunction matchPattern(pattern) {\n\n  return function(el) {\n\n    return every(pattern, function(val, key) {\n      return el[key] === val;\n    });\n\n  };\n}\n\n\n/**\n * @param {string | ((e: any) => any) } extractor\n *\n * @return { (e: any) => any }\n */\nfunction toExtractor(extractor) {\n\n  /**\n   * @satisfies { (e: any) => any }\n   */\n  return isFunction(extractor) ? extractor : (e) => {\n\n    // @ts-ignore: just works\n    return e[extractor];\n  };\n}\n\n\n/**\n * @template T\n * @param {Matcher<T>} matcher\n *\n * @return {MatchFn<T>}\n */\nfunction toMatcher(matcher) {\n  return isFunction(matcher) ? matcher : (e) => {\n    return e === matcher;\n  };\n}\n\n\nfunction identity(arg) {\n  return arg;\n}\n\nfunction toNum(arg) {\n  return Number(arg);\n}\n\n/* global setTimeout clearTimeout */\n\n/**\n * @typedef { {\n *   (...args: any[]): any;\n *   flush: () => void;\n *   cancel: () => void;\n * } } DebouncedFunction\n */\n\n/**\n * Debounce fn, calling it only once if the given time\n * elapsed between calls.\n *\n * Lodash-style the function exposes methods to `#clear`\n * and `#flush` to control internal behavior.\n *\n * @param  {Function} fn\n * @param  {Number} timeout\n *\n * @return {DebouncedFunction} debounced function\n */\nfunction debounce(fn, timeout) {\n\n  let timer;\n\n  let lastArgs;\n  let lastThis;\n\n  let lastNow;\n\n  function fire(force) {\n\n    let now = Date.now();\n\n    let scheduledDiff = force ? 0 : (lastNow + timeout) - now;\n\n    if (scheduledDiff > 0) {\n      return schedule(scheduledDiff);\n    }\n\n    fn.apply(lastThis, lastArgs);\n\n    clear();\n  }\n\n  function schedule(timeout) {\n    timer = setTimeout(fire, timeout);\n  }\n\n  function clear() {\n    if (timer) {\n      clearTimeout(timer);\n    }\n\n    timer = lastNow = lastArgs = lastThis = undefined;\n  }\n\n  function flush() {\n    if (timer) {\n      fire(true);\n    }\n\n    clear();\n  }\n\n  /**\n   * @type { DebouncedFunction }\n   */\n  function callback(...args) {\n    lastNow = Date.now();\n\n    lastArgs = args;\n    lastThis = this;\n\n    // ensure an execution is scheduled\n    if (!timer) {\n      schedule(timeout);\n    }\n  }\n\n  callback.flush = flush;\n  callback.cancel = clear;\n\n  return callback;\n}\n\n/**\n * Throttle fn, calling at most once\n * in the given interval.\n *\n * @param  {Function} fn\n * @param  {Number} interval\n *\n * @return {Function} throttled function\n */\nfunction throttle(fn, interval) {\n  let throttling = false;\n\n  return function(...args) {\n\n    if (throttling) {\n      return;\n    }\n\n    fn(...args);\n    throttling = true;\n\n    setTimeout(() => {\n      throttling = false;\n    }, interval);\n  };\n}\n\n/**\n * Bind function against target <this>.\n *\n * @param  {Function} fn\n * @param  {Object}   target\n *\n * @return {Function} bound function\n */\nfunction bind(fn, target) {\n  return fn.bind(target);\n}\n\n/**\n * Convenience wrapper for `Object.assign`.\n *\n * @param {Object} target\n * @param {...Object} others\n *\n * @return {Object} the target\n */\nfunction assign(target, ...others) {\n  return Object.assign(target, ...others);\n}\n\n/**\n * Sets a nested property of a given object to the specified value.\n *\n * This mutates the object and returns it.\n *\n * @template T\n *\n * @param {T} target The target of the set operation.\n * @param {(string|number)[]} path The path to the nested value.\n * @param {any} value The value to set.\n *\n * @return {T}\n */\nfunction set(target, path, value) {\n\n  let currentTarget = target;\n\n  forEach(path, function(key, idx) {\n\n    if (typeof key !== 'number' && typeof key !== 'string') {\n      throw new Error('illegal key type: ' + typeof key + '. Key should be of type number or string.');\n    }\n\n    if (key === 'constructor') {\n      throw new Error('illegal key: constructor');\n    }\n\n    if (key === '__proto__') {\n      throw new Error('illegal key: __proto__');\n    }\n\n    let nextKey = path[idx + 1];\n    let nextTarget = currentTarget[key];\n\n    if (isDefined(nextKey) && isNil(nextTarget)) {\n      nextTarget = currentTarget[key] = isNaN(+nextKey) ? {} : [];\n    }\n\n    if (isUndefined(nextKey)) {\n      if (isUndefined(value)) {\n        delete currentTarget[key];\n      } else {\n        currentTarget[key] = value;\n      }\n    } else {\n      currentTarget = nextTarget;\n    }\n  });\n\n  return target;\n}\n\n\n/**\n * Gets a nested property of a given object.\n *\n * @param {Object} target The target of the get operation.\n * @param {(string|number)[]} path The path to the nested value.\n * @param {any} [defaultValue] The value to return if no value exists.\n *\n * @return {any}\n */\nfunction get(target, path, defaultValue) {\n\n  let currentTarget = target;\n\n  forEach(path, function(key) {\n\n    // accessing nil property yields <undefined>\n    if (isNil(currentTarget)) {\n      currentTarget = undefined;\n\n      return false;\n    }\n\n    currentTarget = currentTarget[key];\n  });\n\n  return isUndefined(currentTarget) ? defaultValue : currentTarget;\n}\n\n/**\n * Pick properties from the given target.\n *\n * @template T\n * @template {any[]} V\n *\n * @param {T} target\n * @param {V} properties\n *\n * @return Pick<T, V>\n */\nfunction pick(target, properties) {\n\n  let result = {};\n\n  let obj = Object(target);\n\n  forEach(properties, function(prop) {\n\n    if (prop in obj) {\n      result[prop] = target[prop];\n    }\n  });\n\n  return result;\n}\n\n/**\n * Pick all target properties, excluding the given ones.\n *\n * @template T\n * @template {any[]} V\n *\n * @param {T} target\n * @param {V} properties\n *\n * @return {Omit<T, V>} target\n */\nfunction omit(target, properties) {\n\n  let result = {};\n\n  let obj = Object(target);\n\n  forEach(obj, function(prop, key) {\n\n    if (properties.indexOf(key) === -1) {\n      result[key] = prop;\n    }\n  });\n\n  return result;\n}\n\n/**\n * Recursively merge `...sources` into given target.\n *\n * Does support merging objects; does not support merging arrays.\n *\n * @param {Object} target\n * @param {...Object} sources\n *\n * @return {Object} the target\n */\nfunction merge(target, ...sources) {\n\n  if (!sources.length) {\n    return target;\n  }\n\n  forEach(sources, function(source) {\n\n    // skip non-obj sources, i.e. null\n    if (!source || !isObject(source)) {\n      return;\n    }\n\n    forEach(source, function(sourceVal, key) {\n\n      if (key === '__proto__') {\n        return;\n      }\n\n      let targetVal = target[key];\n\n      if (isObject(sourceVal)) {\n\n        if (!isObject(targetVal)) {\n\n          // override target[key] with object\n          targetVal = {};\n        }\n\n        target[key] = merge(targetVal, sourceVal);\n      } else {\n        target[key] = sourceVal;\n      }\n\n    });\n  });\n\n  return target;\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vbm9kZV9tb2R1bGVzL0BjYW11bmRhL2Zvcm0tcGxheWdyb3VuZC9ub2RlX21vZHVsZXMvbWluLWRhc2gvZGlzdC9pbmRleC5lc20uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLG9CQUFvQjtBQUMvQjtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsV0FBVyxLQUFLO0FBQ2hCO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQjtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQSxPQUFPO0FBQ1A7OztBQUdBO0FBQ0E7QUFDQSxjQUFjLGdDQUFnQztBQUM5Qzs7QUFFQTtBQUNBO0FBQ0EsY0FBYyxNQUFNO0FBQ3BCOztBQUVBO0FBQ0E7QUFDQSxnQkFBZ0IscUJBQXFCO0FBQ3JDOztBQUVBO0FBQ0E7QUFDQSxnQkFBZ0IscUJBQXFCO0FBQ3JDOztBQUVBO0FBQ0E7QUFDQSxjQUFjLDREQUE0RDtBQUMxRTs7QUFFQTtBQUNBO0FB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QUNBLFdBQVcsR0FBRztBQUNkLFdBQVcsR0FBRztBQUNkO0FBQ0EsWUFBWSxZQUFZO0FBQ3hCO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLFdBQVc7QUFDdEI7QUFDQSxZQUFZLFFBQVE7QUFDcEI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFFBQVE7QUFDUjtBQUNBOztBQUVBLEtBQUs7QUFDTCxHQUFHOztBQUVIO0FBQ0E7O0FBRWlVIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FtdW5kYS1tb2RlbGVyLWNsaWVudC8uLi9ub2RlX21vZHVsZXMvQGNhbXVuZGEvZm9ybS1wbGF5Z3JvdW5kL25vZGVfbW9kdWxlcy9taW4tZGFzaC9kaXN0L2luZGV4LmVzbS5qcz8yNmU0Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogRmxhdHRlbiBhcnJheSwgb25lIGxldmVsIGRlZXAuXG4gKlxuICogQHRlbXBsYXRlIFRcbiAqXG4gKiBAcGFyYW0ge1RbXVtdIHwgVFtdIHwgbnVsbH0gW2Fycl1cbiAqXG4gKiBAcmV0dXJuIHtUW119XG4gKi9cbmZ1bmN0aW9uIGZsYXR0ZW4oYXJyKSB7XG4gIHJldHVybiBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLCBhcnIpO1xufVxuXG5jb25zdCBuYXRpdmVUb1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5jb25zdCBuYXRpdmVIYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cbmZ1bmN0aW9uIGlzVW5kZWZpbmVkKG9iaikge1xuICByZXR1cm4gb2JqID09PSB1bmRlZmluZWQ7XG59XG5cbmZ1bmN0aW9uIGlzRGVmaW5lZChvYmopIHtcbiAgcmV0dXJuIG9iaiAhPT0gdW5kZWZpbmVkO1xufVxuXG5mdW5jdGlvbiBpc05pbChvYmopIHtcbiAgcmV0dXJuIG9iaiA9PSBudWxsO1xufVxuXG5mdW5jdGlvbiBpc0FycmF5KG9iaikge1xuICByZXR1cm4gbmF0aXZlVG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCBBcnJheV0nO1xufVxuXG5mdW5jdGlvbiBpc09iamVjdChvYmopIHtcbiAgcmV0dXJuIG5hdGl2ZVRvU3RyaW5nLmNhbGwob2JqKSA9PT0gJ1tvYmplY3QgT2JqZWN0XSc7XG59XG5cbmZ1bmN0aW9uIGlzTnVtYmVyKG9iaikge1xuICByZXR1cm4gbmF0aXZlVG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCBOdW1iZXJdJztcbn1cblxuLyoqXG4gKiBAcGFyYW0ge2FueX0gb2JqXG4gKlxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaXNGdW5jdGlvbihvYmopIHtcbiAgY29uc3QgdGFnID0gbmF0aXZlVG9TdHJpbmcuY2FsbChvYmopO1xuXG4gIHJldHVybiAoXG4gICAgdGFnID09PSAnW29iamVjdCBGdW5jdGlvbl0nIHx8XG4gICAgdGFnID09PSAnW29iamVjdCBBc3luY0Z1bmN0aW9uXScgfHxcbiAgICB0YWcgPT09ICdbb2JqZWN0IEdlbmVyYXRvckZ1bmN0aW9uXScgfHxcbiAgICB0YWcgPT09ICdbb2JqZWN0IEFzeW5jR2VuZXJhdG9yRnVuY3Rpb25dJyB8fFxuICAgIHRhZyA9PT0gJ1tvYmplY3QgUHJveHldJ1xuICApO1xufVxuXG5mdW5jdGlvbiBpc1N0cmluZyhvYmopIHtcbiAgcmV0dXJuIG5hdGl2ZVRvU3RyaW5nLmNhbGwob2JqKSA9PT0gJ1tvYmplY3QgU3RyaW5nXSc7XG59XG5cblxuLyoqXG4gKiBFbnN1cmUgY29sbGVjdGlvbiBpcyBhbiBhcnJheS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKi9cbmZ1bmN0aW9uIGVuc3VyZUFycmF5KG9iaikge1xuXG4gIGlmIChpc0FycmF5KG9iaikpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB0aHJvdyBuZXcgRXJyb3IoJ211c3Qgc3VwcGx5IGFycmF5Jyk7XG59XG5cbi8qKlxuICogUmV0dXJuIHRydWUsIGlmIHRhcmdldCBvd25zIGEgcHJvcGVydHkgd2l0aCB0aGUgZ2l2ZW4ga2V5LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5mdW5jdGlvbiBoYXModGFyZ2V0LCBrZXkpIHtcbiAgcmV0dXJuICFpc05pbCh0YXJnZXQpICYmIG5hdGl2ZUhhc093blByb3BlcnR5LmNhbGwodGFyZ2V0LCBrZXkpO1xufVxuXG4vKipcbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAdHlwZWRlZiB7IChcbiAqICAgKChlOiBUKSA9PiBib29sZWFuKSB8XG4gKiAgICgoZTogVCwgaWR4OiBudW1iZXIpID0+IGJvb2xlYW4pIHxcbiAqICAgKChlOiBULCBrZXk6IHN0cmluZykgPT4gYm9vbGVhbikgfFxuICogICBzdHJpbmcgfFxuICogICBudW1iZXJcbiAqICkgfSBNYXRjaGVyXG4gKi9cblxuLyoqXG4gKiBAdGVtcGxhdGUgVFxuICogQHRlbXBsYXRlIFVcbiAqXG4gKiBAdHlwZWRlZiB7IChcbiAqICAgKChlOiBUKSA9PiBVKSB8IHN0cmluZyB8IG51bWJlclxuICogKSB9IEV4dHJhY3RvclxuICovXG5cblxuLyoqXG4gKiBAdGVtcGxhdGUgVFxuICogQHR5cGVkZWYgeyAodmFsOiBULCBrZXk6IGFueSkgPT4gYm9vbGVhbiB9IE1hdGNoRm5cbiAqL1xuXG4vKipcbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAdHlwZWRlZiB7IFRbXSB9IEFycmF5Q29sbGVjdGlvblxuICovXG5cbi8qKlxuICogQHRlbXBsYXRlIFRcbiAqIEB0eXBlZGVmIHsgeyBba2V5OiBzdHJpbmddOiBUIH0gfSBTdHJpbmdLZXlWYWx1ZUNvbGxlY3Rpb25cbiAqL1xuXG4vKipcbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAdHlwZWRlZiB7IHsgW2tleTogbnVtYmVyXTogVCB9IH0gTnVtYmVyS2V5VmFsdWVDb2xsZWN0aW9uXG4gKi9cblxuLyoqXG4gKiBAdGVtcGxhdGUgVFxuICogQHR5cGVkZWYgeyBTdHJpbmdLZXlWYWx1ZUNvbGxlY3Rpb248VD4gfCBOdW1iZXJLZXlWYWx1ZUNvbGxlY3Rpb248VD4gfSBLZXlWYWx1ZUNvbGxlY3Rpb25cbiAqL1xuXG4vKipcbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAdHlwZWRlZiB7IEtleVZhbHVlQ29sbGVjdGlvbjxUPiB8IEFycmF5Q29sbGVjdGlvbjxUPiB9IENvbGxlY3Rpb25cbiAqL1xuXG4vKipcbiAqIEZpbmQgZWxlbWVudCBpbiBjb2xsZWN0aW9uLlxuICpcbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAcGFyYW0ge0NvbGxlY3Rpb248VD59IGNvbGxlY3Rpb25cbiAqIEBwYXJhbSB7TWF0Y2hlcjxUPn0gbWF0Y2hlclxuICpcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqL1xuZnVuY3Rpb24gZmluZChjb2xsZWN0aW9uLCBtYXRjaGVyKSB7XG5cbiAgY29uc3QgbWF0Y2hGbiA9IHRvTWF0Y2hlcihtYXRjaGVyKTtcblxuICBsZXQgbWF0Y2g7XG5cbiAgZm9yRWFjaChjb2xsZWN0aW9uLCBmdW5jdGlvbih2YWwsIGtleSkge1xuICAgIGlmIChtYXRjaEZuKHZhbCwga2V5KSkge1xuICAgICAgbWF0Y2ggPSB2YWw7XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBtYXRjaDtcblxufVxuXG5cbi8qKlxuICogRmluZCBlbGVtZW50IGluZGV4IGluIGNvbGxlY3Rpb24uXG4gKlxuICogQHRlbXBsYXRlIFRcbiAqIEBwYXJhbSB7Q29sbGVjdGlvbjxUPn0gY29sbGVjdGlvblxuICogQHBhcmFtIHtNYXRjaGVyPFQ+fSBtYXRjaGVyXG4gKlxuICogQHJldHVybiB7bnVtYmVyIHwgc3RyaW5nIHwgdW5kZWZpbmVkfVxuICovXG5mdW5jdGlvbiBmaW5kSW5kZXgoY29sbGVjdGlvbiwgbWF0Y2hlcikge1xuXG4gIGNvbnN0IG1hdGNoRm4gPSB0b01hdGNoZXIobWF0Y2hlcik7XG5cbiAgbGV0IGlkeCA9IGlzQXJyYXkoY29sbGVjdGlvbikgPyAtMSA6IHVuZGVmaW5lZDtcblxuICBmb3JFYWNoKGNvbGxlY3Rpb24sIGZ1bmN0aW9uKHZhbCwga2V5KSB7XG4gICAgaWYgKG1hdGNoRm4odmFsLCBrZXkpKSB7XG4gICAgICBpZHggPSBrZXk7XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBpZHg7XG59XG5cblxuLyoqXG4gKiBGaWx0ZXIgZWxlbWVudHMgaW4gY29sbGVjdGlvbi5cbiAqXG4gKiBAdGVtcGxhdGUgVFxuICogQHBhcmFtIHtDb2xsZWN0aW9uPFQ+fSBjb2xsZWN0aW9uXG4gKiBAcGFyYW0ge01hdGNoZXI8VD59IG1hdGNoZXJcbiAqXG4gKiBAcmV0dXJuIHtUW119IHJlc3VsdFxuICovXG5mdW5jdGlvbiBmaWx0ZXIoY29sbGVjdGlvbiwgbWF0Y2hlcikge1xuXG4gIGNvbnN0IG1hdGNoRm4gPSB0b01hdGNoZXIobWF0Y2hlcik7XG5cbiAgbGV0IHJlc3VsdCA9IFtdO1xuXG4gIGZvckVhY2goY29sbGVjdGlvbiwgZnVuY3Rpb24odmFsLCBrZXkpIHtcbiAgICBpZiAobWF0Y2hGbih2YWwsIGtleSkpIHtcbiAgICAgIHJlc3VsdC5wdXNoKHZhbCk7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5cbi8qKlxuICogSXRlcmF0ZSBvdmVyIGNvbGxlY3Rpb247IHJldHVybmluZyBzb21ldGhpbmdcbiAqIChub24tdW5kZWZpbmVkKSB3aWxsIHN0b3AgaXRlcmF0aW9uLlxuICpcbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAcGFyYW0ge0NvbGxlY3Rpb248VD59IGNvbGxlY3Rpb25cbiAqIEBwYXJhbSB7ICgoaXRlbTogVCwgaWR4OiBudW1iZXIpID0+IChib29sZWFufHZvaWQpKSB8ICgoaXRlbTogVCwga2V5OiBzdHJpbmcpID0+IChib29sZWFufHZvaWQpKSB9IGl0ZXJhdG9yXG4gKlxuICogQHJldHVybiB7VH0gcmV0dXJuIHJlc3VsdCB0aGF0IHN0b3BwZWQgdGhlIGl0ZXJhdGlvblxuICovXG5mdW5jdGlvbiBmb3JFYWNoKGNvbGxlY3Rpb24sIGl0ZXJhdG9yKSB7XG5cbiAgbGV0IHZhbCxcbiAgICAgIHJlc3VsdDtcblxuICBpZiAoaXNVbmRlZmluZWQoY29sbGVjdGlvbikpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBjb252ZXJ0S2V5ID0gaXNBcnJheShjb2xsZWN0aW9uKSA/IHRvTnVtIDogaWRlbnRpdHk7XG5cbiAgZm9yIChsZXQga2V5IGluIGNvbGxlY3Rpb24pIHtcblxuICAgIGlmIChoYXMoY29sbGVjdGlvbiwga2V5KSkge1xuICAgICAgdmFsID0gY29sbGVjdGlvbltrZXldO1xuXG4gICAgICByZXN1bHQgPSBpdGVyYXRvcih2YWwsIGNvbnZlcnRLZXkoa2V5KSk7XG5cbiAgICAgIGlmIChyZXN1bHQgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogUmV0dXJuIGNvbGxlY3Rpb24gd2l0aG91dCBlbGVtZW50LlxuICpcbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAcGFyYW0ge0FycmF5Q29sbGVjdGlvbjxUPn0gYXJyXG4gKiBAcGFyYW0ge01hdGNoZXI8VD59IG1hdGNoZXJcbiAqXG4gKiBAcmV0dXJuIHtUW119XG4gKi9cbmZ1bmN0aW9uIHdpdGhvdXQoYXJyLCBtYXRjaGVyKSB7XG5cbiAgaWYgKGlzVW5kZWZpbmVkKGFycikpIHtcbiAgICByZXR1cm4gW107XG4gIH1cblxuICBlbnN1cmVBcnJheShhcnIpO1xuXG4gIGNvbnN0IG1hdGNoRm4gPSB0b01hdGNoZXIobWF0Y2hlcik7XG5cbiAgcmV0dXJuIGFyci5maWx0ZXIoZnVuY3Rpb24oZWwsIGlkeCkge1xuICAgIHJldHVybiAhbWF0Y2hGbihlbCwgaWR4KTtcbiAgfSk7XG5cbn1cblxuXG4vKipcbiAqIFJlZHVjZSBjb2xsZWN0aW9uLCByZXR1cm5pbmcgYSBzaW5nbGUgcmVzdWx0LlxuICpcbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAdGVtcGxhdGUgVlxuICpcbiAqIEBwYXJhbSB7Q29sbGVjdGlvbjxUPn0gY29sbGVjdGlvblxuICogQHBhcmFtIHsocmVzdWx0OiBWLCBlbnRyeTogVCwgaW5kZXg6IGFueSkgPT4gVn0gaXRlcmF0b3JcbiAqIEBwYXJhbSB7Vn0gcmVzdWx0XG4gKlxuICogQHJldHVybiB7Vn0gcmVzdWx0IHJldHVybmVkIGZyb20gbGFzdCBpdGVyYXRvclxuICovXG5mdW5jdGlvbiByZWR1Y2UoY29sbGVjdGlvbiwgaXRlcmF0b3IsIHJlc3VsdCkge1xuXG4gIGZvckVhY2goY29sbGVjdGlvbiwgZnVuY3Rpb24odmFsdWUsIGlkeCkge1xuICAgIHJlc3VsdCA9IGl0ZXJhdG9yKHJlc3VsdCwgdmFsdWUsIGlkeCk7XG4gIH0pO1xuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cblxuLyoqXG4gKiBSZXR1cm4gdHJ1ZSBpZiBldmVyeSBlbGVtZW50IGluIHRoZSBjb2xsZWN0aW9uXG4gKiBtYXRjaGVzIHRoZSBjcml0ZXJpYS5cbiAqXG4gKiBAcGFyYW0gIHtPYmplY3R8QXJyYXl9IGNvbGxlY3Rpb25cbiAqIEBwYXJhbSAge0Z1bmN0aW9ufSBtYXRjaGVyXG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gZXZlcnkoY29sbGVjdGlvbiwgbWF0Y2hlcikge1xuXG4gIHJldHVybiAhIXJlZHVjZShjb2xsZWN0aW9uLCBmdW5jdGlvbihtYXRjaGVzLCB2YWwsIGtleSkge1xuICAgIHJldHVybiBtYXRjaGVzICYmIG1hdGNoZXIodmFsLCBrZXkpO1xuICB9LCB0cnVlKTtcbn1cblxuXG4vKipcbiAqIFJldHVybiB0cnVlIGlmIHNvbWUgZWxlbWVudHMgaW4gdGhlIGNvbGxlY3Rpb25cbiAqIG1hdGNoIHRoZSBjcml0ZXJpYS5cbiAqXG4gKiBAcGFyYW0gIHtPYmplY3R8QXJyYXl9IGNvbGxlY3Rpb25cbiAqIEBwYXJhbSAge0Z1bmN0aW9ufSBtYXRjaGVyXG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gc29tZShjb2xsZWN0aW9uLCBtYXRjaGVyKSB7XG5cbiAgcmV0dXJuICEhZmluZChjb2xsZWN0aW9uLCBtYXRjaGVyKTtcbn1cblxuXG4vKipcbiAqIFRyYW5zZm9ybSBhIGNvbGxlY3Rpb24gaW50byBhbm90aGVyIGNvbGxlY3Rpb25cbiAqIGJ5IHBpcGluZyBlYWNoIG1lbWJlciB0aHJvdWdoIHRoZSBnaXZlbiBmbi5cbiAqXG4gKiBAcGFyYW0gIHtPYmplY3R8QXJyYXl9ICAgY29sbGVjdGlvblxuICogQHBhcmFtICB7RnVuY3Rpb259IGZuXG4gKlxuICogQHJldHVybiB7QXJyYXl9IHRyYW5zZm9ybWVkIGNvbGxlY3Rpb25cbiAqL1xuZnVuY3Rpb24gbWFwKGNvbGxlY3Rpb24sIGZuKSB7XG5cbiAgbGV0IHJlc3VsdCA9IFtdO1xuXG4gIGZvckVhY2goY29sbGVjdGlvbiwgZnVuY3Rpb24odmFsLCBrZXkpIHtcbiAgICByZXN1bHQucHVzaChmbih2YWwsIGtleSkpO1xuICB9KTtcblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5cbi8qKlxuICogR2V0IHRoZSBjb2xsZWN0aW9ucyBrZXlzLlxuICpcbiAqIEBwYXJhbSAge09iamVjdHxBcnJheX0gY29sbGVjdGlvblxuICpcbiAqIEByZXR1cm4ge0FycmF5fVxuICovXG5mdW5jdGlvbiBrZXlzKGNvbGxlY3Rpb24pIHtcbiAgcmV0dXJuIGNvbGxlY3Rpb24gJiYgT2JqZWN0LmtleXMoY29sbGVjdGlvbikgfHwgW107XG59XG5cblxuLyoqXG4gKiBTaG9ydGhhbmQgZm9yIGBrZXlzKG8pLmxlbmd0aGAuXG4gKlxuICogQHBhcmFtICB7T2JqZWN0fEFycmF5fSBjb2xsZWN0aW9uXG4gKlxuICogQHJldHVybiB7TnVtYmVyfVxuICovXG5mdW5jdGlvbiBzaXplKGNvbGxlY3Rpb24pIHtcbiAgcmV0dXJuIGtleXMoY29sbGVjdGlvbikubGVuZ3RoO1xufVxuXG5cbi8qKlxuICogR2V0IHRoZSB2YWx1ZXMgaW4gdGhlIGNvbGxlY3Rpb24uXG4gKlxuICogQHBhcmFtICB7T2JqZWN0fEFycmF5fSBjb2xsZWN0aW9uXG4gKlxuICogQHJldHVybiB7QXJyYXl9XG4gKi9cbmZ1bmN0aW9uIHZhbHVlcyhjb2xsZWN0aW9uKSB7XG4gIHJldHVybiBtYXAoY29sbGVjdGlvbiwgKHZhbCkgPT4gdmFsKTtcbn1cblxuXG4vKipcbiAqIEdyb3VwIGNvbGxlY3Rpb24gbWVtYmVycyBieSBhdHRyaWJ1dGUuXG4gKlxuICogQHBhcmFtIHtPYmplY3R8QXJyYXl9IGNvbGxlY3Rpb25cbiAqIEBwYXJhbSB7RXh0cmFjdG9yfSBleHRyYWN0b3JcbiAqXG4gKiBAcmV0dXJuIHtPYmplY3R9IG1hcCB3aXRoIHsgYXR0clZhbHVlID0+IFsgYSwgYiwgYyBdIH1cbiAqL1xuZnVuY3Rpb24gZ3JvdXBCeShjb2xsZWN0aW9uLCBleHRyYWN0b3IsIGdyb3VwZWQgPSB7fSkge1xuXG4gIGV4dHJhY3RvciA9IHRvRXh0cmFjdG9yKGV4dHJhY3Rvcik7XG5cbiAgZm9yRWFjaChjb2xsZWN0aW9uLCBmdW5jdGlvbih2YWwpIHtcbiAgICBsZXQgZGlzY3JpbWluYXRvciA9IGV4dHJhY3Rvcih2YWwpIHx8ICdfJztcblxuICAgIGxldCBncm91cCA9IGdyb3VwZWRbZGlzY3JpbWluYXRvcl07XG5cbiAgICBpZiAoIWdyb3VwKSB7XG4gICAgICBncm91cCA9IGdyb3VwZWRbZGlzY3JpbWluYXRvcl0gPSBbXTtcbiAgICB9XG5cbiAgICBncm91cC5wdXNoKHZhbCk7XG4gIH0pO1xuXG4gIHJldHVybiBncm91cGVkO1xufVxuXG5cbmZ1bmN0aW9uIHVuaXF1ZUJ5KGV4dHJhY3RvciwgLi4uY29sbGVjdGlvbnMpIHtcblxuICBleHRyYWN0b3IgPSB0b0V4dHJhY3RvcihleHRyYWN0b3IpO1xuXG4gIGxldCBncm91cGVkID0ge307XG5cbiAgZm9yRWFjaChjb2xsZWN0aW9ucywgKGMpID0+IGdyb3VwQnkoYywgZXh0cmFjdG9yLCBncm91cGVkKSk7XG5cbiAgbGV0IHJlc3VsdCA9IG1hcChncm91cGVkLCBmdW5jdGlvbih2YWwsIGtleSkge1xuICAgIHJldHVybiB2YWxbMF07XG4gIH0pO1xuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cblxuY29uc3QgdW5pb25CeSA9IHVuaXF1ZUJ5O1xuXG5cblxuLyoqXG4gKiBTb3J0IGNvbGxlY3Rpb24gYnkgY3JpdGVyaWEuXG4gKlxuICogQHRlbXBsYXRlIFRcbiAqXG4gKiBAcGFyYW0ge0NvbGxlY3Rpb248VD59IGNvbGxlY3Rpb25cbiAqIEBwYXJhbSB7RXh0cmFjdG9yPFQsIG51bWJlciB8IHN0cmluZz59IGV4dHJhY3RvclxuICpcbiAqIEByZXR1cm4ge0FycmF5fVxuICovXG5mdW5jdGlvbiBzb3J0QnkoY29sbGVjdGlvbiwgZXh0cmFjdG9yKSB7XG5cbiAgZXh0cmFjdG9yID0gdG9FeHRyYWN0b3IoZXh0cmFjdG9yKTtcblxuICBsZXQgc29ydGVkID0gW107XG5cbiAgZm9yRWFjaChjb2xsZWN0aW9uLCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgbGV0IGRpc2MgPSBleHRyYWN0b3IodmFsdWUsIGtleSk7XG5cbiAgICBsZXQgZW50cnkgPSB7XG4gICAgICBkOiBkaXNjLFxuICAgICAgdjogdmFsdWVcbiAgICB9O1xuXG4gICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgc29ydGVkLmxlbmd0aDsgaWR4KyspIHtcbiAgICAgIGxldCB7IGQgfSA9IHNvcnRlZFtpZHhdO1xuXG4gICAgICBpZiAoZGlzYyA8IGQpIHtcbiAgICAgICAgc29ydGVkLnNwbGljZShpZHgsIDAsIGVudHJ5KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIG5vdCBpbnNlcnRlZCwgYXBwZW5kICghKVxuICAgIHNvcnRlZC5wdXNoKGVudHJ5KTtcbiAgfSk7XG5cbiAgcmV0dXJuIG1hcChzb3J0ZWQsIChlKSA9PiBlLnYpO1xufVxuXG5cbi8qKlxuICogQ3JlYXRlIGFuIG9iamVjdCBwYXR0ZXJuIG1hdGNoZXIuXG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiBgYGBqYXZhc2NyaXB0XG4gKiBjb25zdCBtYXRjaGVyID0gbWF0Y2hQYXR0ZXJuKHsgaWQ6IDEgfSk7XG4gKlxuICogbGV0IGVsZW1lbnQgPSBmaW5kKGVsZW1lbnRzLCBtYXRjaGVyKTtcbiAqIGBgYFxuICpcbiAqIEB0ZW1wbGF0ZSBUXG4gKlxuICogQHBhcmFtIHtUfSBwYXR0ZXJuXG4gKlxuICogQHJldHVybiB7IChlbDogYW55KSA9PiAgYm9vbGVhbiB9IG1hdGNoZXJGblxuICovXG5mdW5jdGlvbiBtYXRjaFBhdHRlcm4ocGF0dGVybikge1xuXG4gIHJldHVybiBmdW5jdGlvbihlbCkge1xuXG4gICAgcmV0dXJuIGV2ZXJ5KHBhdHRlcm4sIGZ1bmN0aW9uKHZhbCwga2V5KSB7XG4gICAgICByZXR1cm4gZWxba2V5XSA9PT0gdmFsO1xuICAgIH0pO1xuXG4gIH07XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZyB8ICgoZTogYW55KSA9PiBhbnkpIH0gZXh0cmFjdG9yXG4gKlxuICogQHJldHVybiB7IChlOiBhbnkpID0+IGFueSB9XG4gKi9cbmZ1bmN0aW9uIHRvRXh0cmFjdG9yKGV4dHJhY3Rvcikge1xuXG4gIC8qKlxuICAgKiBAc2F0aXNmaWVzIHsgKGU6IGFueSkgPT4gYW55IH1cbiAgICovXG4gIHJldHVybiBpc0Z1bmN0aW9uKGV4dHJhY3RvcikgPyBleHRyYWN0b3IgOiAoZSkgPT4ge1xuXG4gICAgLy8gQHRzLWlnbm9yZToganVzdCB3b3Jrc1xuICAgIHJldHVybiBlW2V4dHJhY3Rvcl07XG4gIH07XG59XG5cblxuLyoqXG4gKiBAdGVtcGxhdGUgVFxuICogQHBhcmFtIHtNYXRjaGVyPFQ+fSBtYXRjaGVyXG4gKlxuICogQHJldHVybiB7TWF0Y2hGbjxUPn1cbiAqL1xuZnVuY3Rpb24gdG9NYXRjaGVyKG1hdGNoZXIpIHtcbiAgcmV0dXJuIGlzRnVuY3Rpb24obWF0Y2hlcikgPyBtYXRjaGVyIDogKGUpID0+IHtcbiAgICByZXR1cm4gZSA9PT0gbWF0Y2hlcjtcbiAgfTtcbn1cblxuXG5mdW5jdGlvbiBpZGVudGl0eShhcmcpIHtcbiAgcmV0dXJuIGFyZztcbn1cblxuZnVuY3Rpb24gdG9OdW0oYXJnKSB7XG4gIHJldHVybiBOdW1iZXIoYXJnKTtcbn1cblxuLyogZ2xvYmFsIHNldFRpbWVvdXQgY2xlYXJUaW1lb3V0ICovXG5cbi8qKlxuICogQHR5cGVkZWYgeyB7XG4gKiAgICguLi5hcmdzOiBhbnlbXSk6IGFueTtcbiAqICAgZmx1c2g6ICgpID0+IHZvaWQ7XG4gKiAgIGNhbmNlbDogKCkgPT4gdm9pZDtcbiAqIH0gfSBEZWJvdW5jZWRGdW5jdGlvblxuICovXG5cbi8qKlxuICogRGVib3VuY2UgZm4sIGNhbGxpbmcgaXQgb25seSBvbmNlIGlmIHRoZSBnaXZlbiB0aW1lXG4gKiBlbGFwc2VkIGJldHdlZW4gY2FsbHMuXG4gKlxuICogTG9kYXNoLXN0eWxlIHRoZSBmdW5jdGlvbiBleHBvc2VzIG1ldGhvZHMgdG8gYCNjbGVhcmBcbiAqIGFuZCBgI2ZsdXNoYCB0byBjb250cm9sIGludGVybmFsIGJlaGF2aW9yLlxuICpcbiAqIEBwYXJhbSAge0Z1bmN0aW9ufSBmblxuICogQHBhcmFtICB7TnVtYmVyfSB0aW1lb3V0XG4gKlxuICogQHJldHVybiB7RGVib3VuY2VkRnVuY3Rpb259IGRlYm91bmNlZCBmdW5jdGlvblxuICovXG5mdW5jdGlvbiBkZWJvdW5jZShmbiwgdGltZW91dCkge1xuXG4gIGxldCB0aW1lcjtcblxuICBsZXQgbGFzdEFyZ3M7XG4gIGxldCBsYXN0VGhpcztcblxuICBsZXQgbGFzdE5vdztcblxuICBmdW5jdGlvbiBmaXJlKGZvcmNlKSB7XG5cbiAgICBsZXQgbm93ID0gRGF0ZS5ub3coKTtcblxuICAgIGxldCBzY2hlZHVsZWREaWZmID0gZm9yY2UgPyAwIDogKGxhc3ROb3cgKyB0aW1lb3V0KSAtIG5vdztcblxuICAgIGlmIChzY2hlZHVsZWREaWZmID4gMCkge1xuICAgICAgcmV0dXJuIHNjaGVkdWxlKHNjaGVkdWxlZERpZmYpO1xuICAgIH1cblxuICAgIGZuLmFwcGx5KGxhc3RUaGlzLCBsYXN0QXJncyk7XG5cbiAgICBjbGVhcigpO1xuICB9XG5cbiAgZnVuY3Rpb24gc2NoZWR1bGUodGltZW91dCkge1xuICAgIHRpbWVyID0gc2V0VGltZW91dChmaXJlLCB0aW1lb3V0KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNsZWFyKCkge1xuICAgIGlmICh0aW1lcikge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICB9XG5cbiAgICB0aW1lciA9IGxhc3ROb3cgPSBsYXN0QXJncyA9IGxhc3RUaGlzID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgZnVuY3Rpb24gZmx1c2goKSB7XG4gICAgaWYgKHRpbWVyKSB7XG4gICAgICBmaXJlKHRydWUpO1xuICAgIH1cblxuICAgIGNsZWFyKCk7XG4gIH1cblxuICAvKipcbiAgICogQHR5cGUgeyBEZWJvdW5jZWRGdW5jdGlvbiB9XG4gICAqL1xuICBmdW5jdGlvbiBjYWxsYmFjayguLi5hcmdzKSB7XG4gICAgbGFzdE5vdyA9IERhdGUubm93KCk7XG5cbiAgICBsYXN0QXJncyA9IGFyZ3M7XG4gICAgbGFzdFRoaXMgPSB0aGlzO1xuXG4gICAgLy8gZW5zdXJlIGFuIGV4ZWN1dGlvbiBpcyBzY2hlZHVsZWRcbiAgICBpZiAoIXRpbWVyKSB7XG4gICAgICBzY2hlZHVsZSh0aW1lb3V0KTtcbiAgICB9XG4gIH1cblxuICBjYWxsYmFjay5mbHVzaCA9IGZsdXNoO1xuICBjYWxsYmFjay5jYW5jZWwgPSBjbGVhcjtcblxuICByZXR1cm4gY2FsbGJhY2s7XG59XG5cbi8qKlxuICogVGhyb3R0bGUgZm4sIGNhbGxpbmcgYXQgbW9zdCBvbmNlXG4gKiBpbiB0aGUgZ2l2ZW4gaW50ZXJ2YWwuXG4gKlxuICogQHBhcmFtICB7RnVuY3Rpb259IGZuXG4gKiBAcGFyYW0gIHtOdW1iZXJ9IGludGVydmFsXG4gKlxuICogQHJldHVybiB7RnVuY3Rpb259IHRocm90dGxlZCBmdW5jdGlvblxuICovXG5mdW5jdGlvbiB0aHJvdHRsZShmbiwgaW50ZXJ2YWwpIHtcbiAgbGV0IHRocm90dGxpbmcgPSBmYWxzZTtcblxuICByZXR1cm4gZnVuY3Rpb24oLi4uYXJncykge1xuXG4gICAgaWYgKHRocm90dGxpbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBmbiguLi5hcmdzKTtcbiAgICB0aHJvdHRsaW5nID0gdHJ1ZTtcblxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhyb3R0bGluZyA9IGZhbHNlO1xuICAgIH0sIGludGVydmFsKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBCaW5kIGZ1bmN0aW9uIGFnYWluc3QgdGFyZ2V0IDx0aGlzPi5cbiAqXG4gKiBAcGFyYW0gIHtGdW5jdGlvbn0gZm5cbiAqIEBwYXJhbSAge09iamVjdH0gICB0YXJnZXRcbiAqXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn0gYm91bmQgZnVuY3Rpb25cbiAqL1xuZnVuY3Rpb24gYmluZChmbiwgdGFyZ2V0KSB7XG4gIHJldHVybiBmbi5iaW5kKHRhcmdldCk7XG59XG5cbi8qKlxuICogQ29udmVuaWVuY2Ugd3JhcHBlciBmb3IgYE9iamVjdC5hc3NpZ25gLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRcbiAqIEBwYXJhbSB7Li4uT2JqZWN0fSBvdGhlcnNcbiAqXG4gKiBAcmV0dXJuIHtPYmplY3R9IHRoZSB0YXJnZXRcbiAqL1xuZnVuY3Rpb24gYXNzaWduKHRhcmdldCwgLi4ub3RoZXJzKSB7XG4gIHJldHVybiBPYmplY3QuYXNzaWduKHRhcmdldCwgLi4ub3RoZXJzKTtcbn1cblxuLyoqXG4gKiBTZXRzIGEgbmVzdGVkIHByb3BlcnR5IG9mIGEgZ2l2ZW4gb2JqZWN0IHRvIHRoZSBzcGVjaWZpZWQgdmFsdWUuXG4gKlxuICogVGhpcyBtdXRhdGVzIHRoZSBvYmplY3QgYW5kIHJldHVybnMgaXQuXG4gKlxuICogQHRlbXBsYXRlIFRcbiAqXG4gKiBAcGFyYW0ge1R9IHRhcmdldCBUaGUgdGFyZ2V0IG9mIHRoZSBzZXQgb3BlcmF0aW9uLlxuICogQHBhcmFtIHsoc3RyaW5nfG51bWJlcilbXX0gcGF0aCBUaGUgcGF0aCB0byB0aGUgbmVzdGVkIHZhbHVlLlxuICogQHBhcmFtIHthbnl9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZXQuXG4gKlxuICogQHJldHVybiB7VH1cbiAqL1xuZnVuY3Rpb24gc2V0KHRhcmdldCwgcGF0aCwgdmFsdWUpIHtcblxuICBsZXQgY3VycmVudFRhcmdldCA9IHRhcmdldDtcblxuICBmb3JFYWNoKHBhdGgsIGZ1bmN0aW9uKGtleSwgaWR4KSB7XG5cbiAgICBpZiAodHlwZW9mIGtleSAhPT0gJ251bWJlcicgJiYgdHlwZW9mIGtleSAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignaWxsZWdhbCBrZXkgdHlwZTogJyArIHR5cGVvZiBrZXkgKyAnLiBLZXkgc2hvdWxkIGJlIG9mIHR5cGUgbnVtYmVyIG9yIHN0cmluZy4nKTtcbiAgICB9XG5cbiAgICBpZiAoa2V5ID09PSAnY29uc3RydWN0b3InKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2lsbGVnYWwga2V5OiBjb25zdHJ1Y3RvcicpO1xuICAgIH1cblxuICAgIGlmIChrZXkgPT09ICdfX3Byb3RvX18nKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2lsbGVnYWwga2V5OiBfX3Byb3RvX18nKTtcbiAgICB9XG5cbiAgICBsZXQgbmV4dEtleSA9IHBhdGhbaWR4ICsgMV07XG4gICAgbGV0IG5leHRUYXJnZXQgPSBjdXJyZW50VGFyZ2V0W2tleV07XG5cbiAgICBpZiAoaXNEZWZpbmVkKG5leHRLZXkpICYmIGlzTmlsKG5leHRUYXJnZXQpKSB7XG4gICAgICBuZXh0VGFyZ2V0ID0gY3VycmVudFRhcmdldFtrZXldID0gaXNOYU4oK25leHRLZXkpID8ge30gOiBbXTtcbiAgICB9XG5cbiAgICBpZiAoaXNVbmRlZmluZWQobmV4dEtleSkpIHtcbiAgICAgIGlmIChpc1VuZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgZGVsZXRlIGN1cnJlbnRUYXJnZXRba2V5XTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGN1cnJlbnRUYXJnZXRba2V5XSA9IHZhbHVlO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjdXJyZW50VGFyZ2V0ID0gbmV4dFRhcmdldDtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiB0YXJnZXQ7XG59XG5cblxuLyoqXG4gKiBHZXRzIGEgbmVzdGVkIHByb3BlcnR5IG9mIGEgZ2l2ZW4gb2JqZWN0LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXQgVGhlIHRhcmdldCBvZiB0aGUgZ2V0IG9wZXJhdGlvbi5cbiAqIEBwYXJhbSB7KHN0cmluZ3xudW1iZXIpW119IHBhdGggVGhlIHBhdGggdG8gdGhlIG5lc3RlZCB2YWx1ZS5cbiAqIEBwYXJhbSB7YW55fSBbZGVmYXVsdFZhbHVlXSBUaGUgdmFsdWUgdG8gcmV0dXJuIGlmIG5vIHZhbHVlIGV4aXN0cy5cbiAqXG4gKiBAcmV0dXJuIHthbnl9XG4gKi9cbmZ1bmN0aW9uIGdldCh0YXJnZXQsIHBhdGgsIGRlZmF1bHRWYWx1ZSkge1xuXG4gIGxldCBjdXJyZW50VGFyZ2V0ID0gdGFyZ2V0O1xuXG4gIGZvckVhY2gocGF0aCwgZnVuY3Rpb24oa2V5KSB7XG5cbiAgICAvLyBhY2Nlc3NpbmcgbmlsIHByb3BlcnR5IHlpZWxkcyA8dW5kZWZpbmVkPlxuICAgIGlmIChpc05pbChjdXJyZW50VGFyZ2V0KSkge1xuICAgICAgY3VycmVudFRhcmdldCA9IHVuZGVmaW5lZDtcblxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGN1cnJlbnRUYXJnZXQgPSBjdXJyZW50VGFyZ2V0W2tleV07XG4gIH0pO1xuXG4gIHJldHVybiBpc1VuZGVmaW5lZChjdXJyZW50VGFyZ2V0KSA/IGRlZmF1bHRWYWx1ZSA6IGN1cnJlbnRUYXJnZXQ7XG59XG5cbi8qKlxuICogUGljayBwcm9wZXJ0aWVzIGZyb20gdGhlIGdpdmVuIHRhcmdldC5cbiAqXG4gKiBAdGVtcGxhdGUgVFxuICogQHRlbXBsYXRlIHthbnlbXX0gVlxuICpcbiAqIEBwYXJhbSB7VH0gdGFyZ2V0XG4gKiBAcGFyYW0ge1Z9IHByb3BlcnRpZXNcbiAqXG4gKiBAcmV0dXJuIFBpY2s8VCwgVj5cbiAqL1xuZnVuY3Rpb24gcGljayh0YXJnZXQsIHByb3BlcnRpZXMpIHtcblxuICBsZXQgcmVzdWx0ID0ge307XG5cbiAgbGV0IG9iaiA9IE9iamVjdCh0YXJnZXQpO1xuXG4gIGZvckVhY2gocHJvcGVydGllcywgZnVuY3Rpb24ocHJvcCkge1xuXG4gICAgaWYgKHByb3AgaW4gb2JqKSB7XG4gICAgICByZXN1bHRbcHJvcF0gPSB0YXJnZXRbcHJvcF07XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIFBpY2sgYWxsIHRhcmdldCBwcm9wZXJ0aWVzLCBleGNsdWRpbmcgdGhlIGdpdmVuIG9uZXMuXG4gKlxuICogQHRlbXBsYXRlIFRcbiAqIEB0ZW1wbGF0ZSB7YW55W119IFZcbiAqXG4gKiBAcGFyYW0ge1R9IHRhcmdldFxuICogQHBhcmFtIHtWfSBwcm9wZXJ0aWVzXG4gKlxuICogQHJldHVybiB7T21pdDxULCBWPn0gdGFyZ2V0XG4gKi9cbmZ1bmN0aW9uIG9taXQodGFyZ2V0LCBwcm9wZXJ0aWVzKSB7XG5cbiAgbGV0IHJlc3VsdCA9IHt9O1xuXG4gIGxldCBvYmogPSBPYmplY3QodGFyZ2V0KTtcblxuICBmb3JFYWNoKG9iaiwgZnVuY3Rpb24ocHJvcCwga2V5KSB7XG5cbiAgICBpZiAocHJvcGVydGllcy5pbmRleE9mKGtleSkgPT09IC0xKSB7XG4gICAgICByZXN1bHRba2V5XSA9IHByb3A7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIFJlY3Vyc2l2ZWx5IG1lcmdlIGAuLi5zb3VyY2VzYCBpbnRvIGdpdmVuIHRhcmdldC5cbiAqXG4gKiBEb2VzIHN1cHBvcnQgbWVyZ2luZyBvYmplY3RzOyBkb2VzIG5vdCBzdXBwb3J0IG1lcmdpbmcgYXJyYXlzLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRcbiAqIEBwYXJhbSB7Li4uT2JqZWN0fSBzb3VyY2VzXG4gKlxuICogQHJldHVybiB7T2JqZWN0fSB0aGUgdGFyZ2V0XG4gKi9cbmZ1bmN0aW9uIG1lcmdlKHRhcmdldCwgLi4uc291cmNlcykge1xuXG4gIGlmICghc291cmNlcy5sZW5ndGgpIHtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG5cbiAgZm9yRWFjaChzb3VyY2VzLCBmdW5jdGlvbihzb3VyY2UpIHtcblxuICAgIC8vIHNraXAgbm9uLW9iaiBzb3VyY2VzLCBpLmUuIG51bGxcbiAgICBpZiAoIXNvdXJjZSB8fCAhaXNPYmplY3Qoc291cmNlKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZvckVhY2goc291cmNlLCBmdW5jdGlvbihzb3VyY2VWYWwsIGtleSkge1xuXG4gICAgICBpZiAoa2V5ID09PSAnX19wcm90b19fJykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGxldCB0YXJnZXRWYWwgPSB0YXJnZXRba2V5XTtcblxuICAgICAgaWYgKGlzT2JqZWN0KHNvdXJjZVZhbCkpIHtcblxuICAgICAgICBpZiAoIWlzT2JqZWN0KHRhcmdldFZhbCkpIHtcblxuICAgICAgICAgIC8vIG92ZXJyaWRlIHRhcmdldFtrZXldIHdpdGggb2JqZWN0XG4gICAgICAgICAgdGFyZ2V0VmFsID0ge307XG4gICAgICAgIH1cblxuICAgICAgICB0YXJnZXRba2V5XSA9IG1lcmdlKHRhcmdldFZhbCwgc291cmNlVmFsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRhcmdldFtrZXldID0gc291cmNlVmFsO1xuICAgICAgfVxuXG4gICAgfSk7XG4gIH0pO1xuXG4gIHJldHVybiB0YXJnZXQ7XG59XG5cbmV4cG9ydCB7IGFzc2lnbiwgYmluZCwgZGVib3VuY2UsIGVuc3VyZUFycmF5LCBldmVyeSwgZmlsdGVyLCBmaW5kLCBmaW5kSW5kZXgsIGZsYXR0ZW4sIGZvckVhY2gsIGdldCwgZ3JvdXBCeSwgaGFzLCBpc0FycmF5LCBpc0RlZmluZWQsIGlzRnVuY3Rpb24sIGlzTmlsLCBpc051bWJlciwgaXNPYmplY3QsIGlzU3RyaW5nLCBpc1VuZGVmaW5lZCwga2V5cywgbWFwLCBtYXRjaFBhdHRlcm4sIG1lcmdlLCBvbWl0LCBwaWNrLCByZWR1Y2UsIHNldCwgc2l6ZSwgc29tZSwgc29ydEJ5LCB0aHJvdHRsZSwgdW5pb25CeSwgdW5pcXVlQnksIHZhbHVlcywgd2l0aG91dCB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../node_modules/@camunda/form-playground/node_modules/min-dash/dist/index.esm.js\n\n}");

/***/ }),

/***/ "../node_modules/@camunda/form-playground/node_modules/min-dom/dist/index.js":
/*!***********************************************************************************!*\
  !*** ../node_modules/@camunda/form-playground/node_modules/min-dom/dist/index.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   assignStyle: () => (/* binding */ assign),\n/* harmony export */   attr: () => (/* binding */ attr),\n/* harmony export */   classes: () => (/* binding */ classes),\n/* harmony export */   clear: () => (/* binding */ clear),\n/* harmony export */   closest: () => (/* binding */ closest),\n/* harmony export */   delegate: () => (/* binding */ delegate),\n/* harmony export */   domify: () => (/* reexport default export from named module */ domify__WEBPACK_IMPORTED_MODULE_1__),\n/* harmony export */   event: () => (/* binding */ event),\n/* harmony export */   matches: () => (/* binding */ matches),\n/* harmony export */   query: () => (/* binding */ query),\n/* harmony export */   queryAll: () => (/* binding */ all),\n/* harmony export */   remove: () => (/* binding */ remove)\n/* harmony export */ });\n/* harmony import */ var min_dash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! min-dash */ \"../node_modules/@camunda/form-playground/node_modules/min-dash/dist/index.esm.js\");\n/* harmony import */ var domify__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! domify */ \"../node_modules/@camunda/form-playground/node_modules/domify/index.js\");\n\n\n\nfunction _mergeNamespaces(n, m) {\n  m.forEach(function (e) {\n    e && typeof e !== 'string' && !Array.isArray(e) && Object.keys(e).forEach(function (k) {\n      if (k !== 'default' && !(k in n)) {\n        var d = Object.getOwnPropertyDescriptor(e, k);\n        Object.defineProperty(n, k, d.get ? d : {\n          enumerable: true,\n          get: function () { return e[k]; }\n        });\n      }\n    });\n  });\n  return Object.freeze(n);\n}\n\n/**\n * Assigns style attributes in a style-src compliant way.\n *\n * @param {Element} element\n * @param {...Object} styleSources\n *\n * @return {Element} the element\n */\nfunction assign(element, ...styleSources) {\n  const target = element.style;\n\n  (0,min_dash__WEBPACK_IMPORTED_MODULE_0__.forEach)(styleSources, function(style) {\n    if (!style) {\n      return;\n    }\n\n    (0,min_dash__WEBPACK_IMPORTED_MODULE_0__.forEach)(style, function(value, key) {\n      target[key] = value;\n    });\n  });\n\n  return element;\n}\n\n/**\n * Set attribute `name` to `val`, or get attr `name`.\n *\n * @param {Element} el\n * @param {String} name\n * @param {String} [val]\n * @api public\n */\nfunction attr(el, name, val) {\n\n  // get\n  if (arguments.length == 2) {\n    return el.getAttribute(name);\n  }\n\n  // remove\n  if (val === null) {\n    return el.removeAttribute(name);\n  }\n\n  // set\n  el.setAttribute(name, val);\n\n  return el;\n}\n\n/**\n * Taken from https://github.com/component/classes\n *\n * Without the component bits.\n */\n\n/**\n * toString reference.\n */\n\nconst toString = Object.prototype.toString;\n\n/**\n * Wrap `el` in a `ClassList`.\n *\n * @param {Element} el\n * @return {ClassList}\n * @api public\n */\n\nfunction classes(el) {\n  return new ClassList(el);\n}\n\n/**\n * Initialize a new ClassList for `el`.\n *\n * @param {Element} el\n * @api private\n */\n\nfunction ClassList(el) {\n  if (!el || !el.nodeType) {\n    throw new Error('A DOM element reference is required');\n  }\n  this.el = el;\n  this.list = el.classList;\n}\n\n/**\n * Add class `name` if not already present.\n *\n * @param {String} name\n * @return {ClassList}\n * @api public\n */\n\nClassList.prototype.add = function(name) {\n  this.list.add(name);\n  return this;\n};\n\n/**\n * Remove class `name` when present, or\n * pass a regular expression to remove\n * any which match.\n *\n * @param {String|RegExp} name\n * @return {ClassList}\n * @api public\n */\n\nClassList.prototype.remove = function(name) {\n  if ('[object RegExp]' == toString.call(name)) {\n    return this.removeMatching(name);\n  }\n\n  this.list.remove(name);\n  return this;\n};\n\n/**\n * Remove all classes matching `re`.\n *\n * @param {RegExp} re\n * @return {ClassList}\n * @api private\n */\n\nClassList.prototype.removeMatching = function(re) {\n  const arr = this.array();\n  for (let i = 0; i < arr.length; i++) {\n    if (re.test(arr[i])) {\n      this.remove(arr[i]);\n    }\n  }\n  return this;\n};\n\n/**\n * Toggle class `name`, can force state via `force`.\n *\n * For browsers that support classList, but do not support `force` yet,\n * the mistake will be detected and corrected.\n *\n * @param {String} name\n * @param {Boolean} force\n * @return {ClassList}\n * @api public\n */\n\nClassList.prototype.toggle = function(name, force) {\n  if ('undefined' !== typeof force) {\n    if (force !== this.list.toggle(name, force)) {\n      this.list.toggle(name); // toggle again to correct\n    }\n  } else {\n    this.list.toggle(name);\n  }\n  return this;\n};\n\n/**\n * Return an array of classes.\n *\n * @return {Array}\n * @api public\n */\n\nClassList.prototype.array = function() {\n  return Array.from(this.list);\n};\n\n/**\n * Check if class `name` is present.\n *\n * @param {String} name\n * @return {ClassList}\n * @api public\n */\n\nClassList.prototype.has =\nClassList.prototype.contains = function(name) {\n  return this.list.contains(name);\n};\n\n/**\n * Clear utility\n */\n\n/**\n * Removes all children from the given element\n *\n * @param {Element} element\n *\n * @return {Element} the element (for chaining)\n */\nfunction clear(element) {\n  var child;\n\n  while ((child = element.firstChild)) {\n    element.removeChild(child);\n  }\n\n  return element;\n}\n\n/**\n * Closest\n *\n * @param {Element} el\n * @param {string} selector\n * @param {boolean} checkYourSelf (optional)\n */\nfunction closest(element, selector, checkYourSelf) {\n  var actualElement = checkYourSelf ? element : element.parentNode;\n\n  return actualElement && typeof actualElement.closest === 'function' && actualElement.closest(selector) || null;\n}\n\nvar componentEvent = {};\n\nvar bind$1, unbind$1, prefix;\n\nfunction detect () {\n  bind$1 = window.addEventListener ? 'addEventListener' : 'attachEvent';\n  unbind$1 = window.removeEventListener ? 'removeEventListener' : 'detachEvent';\n  prefix = bind$1 !== 'addEventListener' ? 'on' : '';\n}\n\n/**\n * Bind `el` event `type` to `fn`.\n *\n * @param {Element} el\n * @param {String} type\n * @param {Function} fn\n * @param {Boolean} capture\n * @return {Function}\n * @api public\n */\n\nvar bind_1 = componentEvent.bind = function(el, type, fn, capture){\n  if (!bind$1) detect();\n  el[bind$1](prefix + type, fn, capture || false);\n  return fn;\n};\n\n/**\n * Unbind `el` event `type`'s callback `fn`.\n *\n * @param {Element} el\n * @param {String} type\n * @param {Function} fn\n * @param {Boolean} capture\n * @return {Function}\n * @api public\n */\n\nvar unbind_1 = componentEvent.unbind = function(el, type, fn, capture){\n  if (!unbind$1) detect();\n  el[unbind$1](prefix + type, fn, capture || false);\n  return fn;\n};\n\nvar event = /*#__PURE__*/_mergeNamespaces({\n  __proto__: null,\n  bind: bind_1,\n  default: componentEvent,\n  unbind: unbind_1\n}, [componentEvent]);\n\n/**\n * Module dependencies.\n */\n\n\n/**\n * Delegate event `type` to `selector`\n * and invoke `fn(e)`. A callback function\n * is returned which may be passed to `.unbind()`.\n *\n * @param {Element} el\n * @param {String} selector\n * @param {String} type\n * @param {Function} fn\n * @param {Boolean} capture\n * @return {Function}\n * @api public\n */\n\n// Some events don't bubble, so we want to bind to the capture phase instead\n// when delegating.\nvar forceCaptureEvents = [ 'focus', 'blur' ];\n\nfunction bind(el, selector, type, fn, capture) {\n  if (forceCaptureEvents.indexOf(type) !== -1) {\n    capture = true;\n  }\n\n  return event.bind(el, type, function(e) {\n    var target = e.target || e.srcElement;\n    e.delegateTarget = closest(target, selector, true);\n    if (e.delegateTarget) {\n      fn.call(el, e);\n    }\n  }, capture);\n}\n\n/**\n * Unbind event `type`'s callback `fn`.\n *\n * @param {Element} el\n * @param {String} type\n * @param {Function} fn\n * @param {Boolean} capture\n * @api public\n */\nfunction unbind(el, type, fn, capture) {\n  if (forceCaptureEvents.indexOf(type) !== -1) {\n    capture = true;\n  }\n\n  return event.unbind(el, type, fn, capture);\n}\n\nvar delegate = {\n  bind,\n  unbind\n};\n\n/**\n * @param { HTMLElement } element\n * @param { String } selector\n *\n * @return { boolean }\n */\nfunction matches(element, selector) {\n  return element && typeof element.matches === 'function' && element.matches(selector) || false;\n}\n\nfunction query(selector, el) {\n  el = el || document;\n\n  return el.querySelector(selector);\n}\n\nfunction all(selector, el) {\n  el = el || document;\n\n  return el.querySelectorAll(selector);\n}\n\nfunction remove(el) {\n  el.parentNode && el.parentNode.removeChild(el);\n}\n\n\n//# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vbm9kZV9tb2R1bGVzL0BjYW11bmRhL2Zvcm0tcGxheWdyb3VuZC9ub2RlX21vZHVsZXMvbWluLWRvbS9kaXN0L2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQW1DO0FBQ1E7O0FBRTNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFNBQVM7QUFDcEIsV0FBVyxXQUFXO0FBQ3RCO0FBQ0EsWUFBWSxTQUFTO0FBQ3JCO0FBQ0E7QUFDQTs7QUFFQSxFQUFFLGlEQUFPO0FBQ1Q7QUFDQTtBQUNBOztBQUVBLElBQUksaURBQU87QUFDWDtBQUNBLEtBQUs7QUFDTCxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxTQUFTO0FBQ3BCLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFNBQVM7QUFDcEIsWUFBWTtBQUNaO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsU0FBUztBQUNwQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixZQUFZO0FBQ1o7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxlQUFlO0FBQzFCLFlBQVk7QUFDWjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsWUFBWTtBQUNaO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGtCQUFrQixnQkFBZ0I7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLFNBQVM7QUFDcEIsWUFBWTtBQUNaO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsOEJBQThCO0FBQzlCO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsWUFBWTtBQUNaO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsU0FBUztBQUNwQjtBQUNBLFlBQVksU0FBUztBQUNyQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxTQUFTO0FBQ3BCLFdBQVcsUUFBUTtBQUNuQixXQUFXLFNBQVM7QUFDcEI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFNBQVM7QUFDcEIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsVUFBVTtBQUNyQixXQUFXLFNBQVM7QUFDcEIsWUFBWTtBQUNaO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFNBQVM7QUFDcEIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsVUFBVTtBQUNyQixXQUFXLFNBQVM7QUFDcEIsWUFBWTtBQUNaO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFNBQVM7QUFDcEIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixXQUFXLFVBQVU7QUFDckIsV0FBVyxTQUFTO0FBQ3BCLFlBQVk7QUFDWjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxTQUFTO0FBQ3BCLFdBQVcsUUFBUTtBQUNuQixXQUFXLFVBQVU7QUFDckIsV0FBVyxTQUFTO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsWUFBWSxjQUFjO0FBQzFCLFlBQVksU0FBUztBQUNyQjtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFMEg7QUFDMUgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYW11bmRhLW1vZGVsZXItY2xpZW50Ly4uL25vZGVfbW9kdWxlcy9AY2FtdW5kYS9mb3JtLXBsYXlncm91bmQvbm9kZV9tb2R1bGVzL21pbi1kb20vZGlzdC9pbmRleC5qcz9iMzY2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGZvckVhY2ggfSBmcm9tICdtaW4tZGFzaCc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIGRvbWlmeSB9IGZyb20gJ2RvbWlmeSc7XG5cbmZ1bmN0aW9uIF9tZXJnZU5hbWVzcGFjZXMobiwgbSkge1xuICBtLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICBlICYmIHR5cGVvZiBlICE9PSAnc3RyaW5nJyAmJiAhQXJyYXkuaXNBcnJheShlKSAmJiBPYmplY3Qua2V5cyhlKS5mb3JFYWNoKGZ1bmN0aW9uIChrKSB7XG4gICAgICBpZiAoayAhPT0gJ2RlZmF1bHQnICYmICEoayBpbiBuKSkge1xuICAgICAgICB2YXIgZCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSwgayk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLCBrLCBkLmdldCA/IGQgOiB7XG4gICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGVba107IH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuICByZXR1cm4gT2JqZWN0LmZyZWV6ZShuKTtcbn1cblxuLyoqXG4gKiBBc3NpZ25zIHN0eWxlIGF0dHJpYnV0ZXMgaW4gYSBzdHlsZS1zcmMgY29tcGxpYW50IHdheS5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7Li4uT2JqZWN0fSBzdHlsZVNvdXJjZXNcbiAqXG4gKiBAcmV0dXJuIHtFbGVtZW50fSB0aGUgZWxlbWVudFxuICovXG5mdW5jdGlvbiBhc3NpZ24oZWxlbWVudCwgLi4uc3R5bGVTb3VyY2VzKSB7XG4gIGNvbnN0IHRhcmdldCA9IGVsZW1lbnQuc3R5bGU7XG5cbiAgZm9yRWFjaChzdHlsZVNvdXJjZXMsIGZ1bmN0aW9uKHN0eWxlKSB7XG4gICAgaWYgKCFzdHlsZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZvckVhY2goc3R5bGUsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgIHRhcmdldFtrZXldID0gdmFsdWU7XG4gICAgfSk7XG4gIH0pO1xuXG4gIHJldHVybiBlbGVtZW50O1xufVxuXG4vKipcbiAqIFNldCBhdHRyaWJ1dGUgYG5hbWVgIHRvIGB2YWxgLCBvciBnZXQgYXR0ciBgbmFtZWAuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAqIEBwYXJhbSB7U3RyaW5nfSBbdmFsXVxuICogQGFwaSBwdWJsaWNcbiAqL1xuZnVuY3Rpb24gYXR0cihlbCwgbmFtZSwgdmFsKSB7XG5cbiAgLy8gZ2V0XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09IDIpIHtcbiAgICByZXR1cm4gZWwuZ2V0QXR0cmlidXRlKG5hbWUpO1xuICB9XG5cbiAgLy8gcmVtb3ZlXG4gIGlmICh2YWwgPT09IG51bGwpIHtcbiAgICByZXR1cm4gZWwucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuICB9XG5cbiAgLy8gc2V0XG4gIGVsLnNldEF0dHJpYnV0ZShuYW1lLCB2YWwpO1xuXG4gIHJldHVybiBlbDtcbn1cblxuLyoqXG4gKiBUYWtlbiBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9jb21wb25lbnQvY2xhc3Nlc1xuICpcbiAqIFdpdGhvdXQgdGhlIGNvbXBvbmVudCBiaXRzLlxuICovXG5cbi8qKlxuICogdG9TdHJpbmcgcmVmZXJlbmNlLlxuICovXG5cbmNvbnN0IHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcblxuLyoqXG4gKiBXcmFwIGBlbGAgaW4gYSBgQ2xhc3NMaXN0YC5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcmV0dXJuIHtDbGFzc0xpc3R9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmZ1bmN0aW9uIGNsYXNzZXMoZWwpIHtcbiAgcmV0dXJuIG5ldyBDbGFzc0xpc3QoZWwpO1xufVxuXG4vKipcbiAqIEluaXRpYWxpemUgYSBuZXcgQ2xhc3NMaXN0IGZvciBgZWxgLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIENsYXNzTGlzdChlbCkge1xuICBpZiAoIWVsIHx8ICFlbC5ub2RlVHlwZSkge1xuICAgIHRocm93IG5ldyBFcnJvcignQSBET00gZWxlbWVudCByZWZlcmVuY2UgaXMgcmVxdWlyZWQnKTtcbiAgfVxuICB0aGlzLmVsID0gZWw7XG4gIHRoaXMubGlzdCA9IGVsLmNsYXNzTGlzdDtcbn1cblxuLyoqXG4gKiBBZGQgY2xhc3MgYG5hbWVgIGlmIG5vdCBhbHJlYWR5IHByZXNlbnQuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAqIEByZXR1cm4ge0NsYXNzTGlzdH1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuQ2xhc3NMaXN0LnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbihuYW1lKSB7XG4gIHRoaXMubGlzdC5hZGQobmFtZSk7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBSZW1vdmUgY2xhc3MgYG5hbWVgIHdoZW4gcHJlc2VudCwgb3JcbiAqIHBhc3MgYSByZWd1bGFyIGV4cHJlc3Npb24gdG8gcmVtb3ZlXG4gKiBhbnkgd2hpY2ggbWF0Y2guXG4gKlxuICogQHBhcmFtIHtTdHJpbmd8UmVnRXhwfSBuYW1lXG4gKiBAcmV0dXJuIHtDbGFzc0xpc3R9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbkNsYXNzTGlzdC5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24obmFtZSkge1xuICBpZiAoJ1tvYmplY3QgUmVnRXhwXScgPT0gdG9TdHJpbmcuY2FsbChuYW1lKSkge1xuICAgIHJldHVybiB0aGlzLnJlbW92ZU1hdGNoaW5nKG5hbWUpO1xuICB9XG5cbiAgdGhpcy5saXN0LnJlbW92ZShuYW1lKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFJlbW92ZSBhbGwgY2xhc3NlcyBtYXRjaGluZyBgcmVgLlxuICpcbiAqIEBwYXJhbSB7UmVnRXhwfSByZVxuICogQHJldHVybiB7Q2xhc3NMaXN0fVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuQ2xhc3NMaXN0LnByb3RvdHlwZS5yZW1vdmVNYXRjaGluZyA9IGZ1bmN0aW9uKHJlKSB7XG4gIGNvbnN0IGFyciA9IHRoaXMuYXJyYXkoKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAocmUudGVzdChhcnJbaV0pKSB7XG4gICAgICB0aGlzLnJlbW92ZShhcnJbaV0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogVG9nZ2xlIGNsYXNzIGBuYW1lYCwgY2FuIGZvcmNlIHN0YXRlIHZpYSBgZm9yY2VgLlxuICpcbiAqIEZvciBicm93c2VycyB0aGF0IHN1cHBvcnQgY2xhc3NMaXN0LCBidXQgZG8gbm90IHN1cHBvcnQgYGZvcmNlYCB5ZXQsXG4gKiB0aGUgbWlzdGFrZSB3aWxsIGJlIGRldGVjdGVkIGFuZCBjb3JyZWN0ZWQuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gZm9yY2VcbiAqIEByZXR1cm4ge0NsYXNzTGlzdH1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuQ2xhc3NMaXN0LnByb3RvdHlwZS50b2dnbGUgPSBmdW5jdGlvbihuYW1lLCBmb3JjZSkge1xuICBpZiAoJ3VuZGVmaW5lZCcgIT09IHR5cGVvZiBmb3JjZSkge1xuICAgIGlmIChmb3JjZSAhPT0gdGhpcy5saXN0LnRvZ2dsZShuYW1lLCBmb3JjZSkpIHtcbiAgICAgIHRoaXMubGlzdC50b2dnbGUobmFtZSk7IC8vIHRvZ2dsZSBhZ2FpbiB0byBjb3JyZWN0XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHRoaXMubGlzdC50b2dnbGUobmFtZSk7XG4gIH1cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFJldHVybiBhbiBhcnJheSBvZiBjbGFzc2VzLlxuICpcbiAqIEByZXR1cm4ge0FycmF5fVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5DbGFzc0xpc3QucHJvdG90eXBlLmFycmF5ID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBBcnJheS5mcm9tKHRoaXMubGlzdCk7XG59O1xuXG4vKipcbiAqIENoZWNrIGlmIGNsYXNzIGBuYW1lYCBpcyBwcmVzZW50LlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gKiBAcmV0dXJuIHtDbGFzc0xpc3R9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbkNsYXNzTGlzdC5wcm90b3R5cGUuaGFzID1cbkNsYXNzTGlzdC5wcm90b3R5cGUuY29udGFpbnMgPSBmdW5jdGlvbihuYW1lKSB7XG4gIHJldHVybiB0aGlzLmxpc3QuY29udGFpbnMobmFtZSk7XG59O1xuXG4vKipcbiAqIENsZWFyIHV0aWxpdHlcbiAqL1xuXG4vKipcbiAqIFJlbW92ZXMgYWxsIGNoaWxkcmVuIGZyb20gdGhlIGdpdmVuIGVsZW1lbnRcbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnRcbiAqXG4gKiBAcmV0dXJuIHtFbGVtZW50fSB0aGUgZWxlbWVudCAoZm9yIGNoYWluaW5nKVxuICovXG5mdW5jdGlvbiBjbGVhcihlbGVtZW50KSB7XG4gIHZhciBjaGlsZDtcblxuICB3aGlsZSAoKGNoaWxkID0gZWxlbWVudC5maXJzdENoaWxkKSkge1xuICAgIGVsZW1lbnQucmVtb3ZlQ2hpbGQoY2hpbGQpO1xuICB9XG5cbiAgcmV0dXJuIGVsZW1lbnQ7XG59XG5cbi8qKlxuICogQ2xvc2VzdFxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7c3RyaW5nfSBzZWxlY3RvclxuICogQHBhcmFtIHtib29sZWFufSBjaGVja1lvdXJTZWxmIChvcHRpb25hbClcbiAqL1xuZnVuY3Rpb24gY2xvc2VzdChlbGVtZW50LCBzZWxlY3RvciwgY2hlY2tZb3VyU2VsZikge1xuICB2YXIgYWN0dWFsRWxlbWVudCA9IGNoZWNrWW91clNlbGYgPyBlbGVtZW50IDogZWxlbWVudC5wYXJlbnROb2RlO1xuXG4gIHJldHVybiBhY3R1YWxFbGVtZW50ICYmIHR5cGVvZiBhY3R1YWxFbGVtZW50LmNsb3Nlc3QgPT09ICdmdW5jdGlvbicgJiYgYWN0dWFsRWxlbWVudC5jbG9zZXN0KHNlbGVjdG9yKSB8fCBudWxsO1xufVxuXG52YXIgY29tcG9uZW50RXZlbnQgPSB7fTtcblxudmFyIGJpbmQkMSwgdW5iaW5kJDEsIHByZWZpeDtcblxuZnVuY3Rpb24gZGV0ZWN0ICgpIHtcbiAgYmluZCQxID0gd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgPyAnYWRkRXZlbnRMaXN0ZW5lcicgOiAnYXR0YWNoRXZlbnQnO1xuICB1bmJpbmQkMSA9IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyID8gJ3JlbW92ZUV2ZW50TGlzdGVuZXInIDogJ2RldGFjaEV2ZW50JztcbiAgcHJlZml4ID0gYmluZCQxICE9PSAnYWRkRXZlbnRMaXN0ZW5lcicgPyAnb24nIDogJyc7XG59XG5cbi8qKlxuICogQmluZCBgZWxgIGV2ZW50IGB0eXBlYCB0byBgZm5gLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICogQHBhcmFtIHtCb29sZWFufSBjYXB0dXJlXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxudmFyIGJpbmRfMSA9IGNvbXBvbmVudEV2ZW50LmJpbmQgPSBmdW5jdGlvbihlbCwgdHlwZSwgZm4sIGNhcHR1cmUpe1xuICBpZiAoIWJpbmQkMSkgZGV0ZWN0KCk7XG4gIGVsW2JpbmQkMV0ocHJlZml4ICsgdHlwZSwgZm4sIGNhcHR1cmUgfHwgZmFsc2UpO1xuICByZXR1cm4gZm47XG59O1xuXG4vKipcbiAqIFVuYmluZCBgZWxgIGV2ZW50IGB0eXBlYCdzIGNhbGxiYWNrIGBmbmAuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGNhcHR1cmVcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG52YXIgdW5iaW5kXzEgPSBjb21wb25lbnRFdmVudC51bmJpbmQgPSBmdW5jdGlvbihlbCwgdHlwZSwgZm4sIGNhcHR1cmUpe1xuICBpZiAoIXVuYmluZCQxKSBkZXRlY3QoKTtcbiAgZWxbdW5iaW5kJDFdKHByZWZpeCArIHR5cGUsIGZuLCBjYXB0dXJlIHx8IGZhbHNlKTtcbiAgcmV0dXJuIGZuO1xufTtcblxudmFyIGV2ZW50ID0gLyojX19QVVJFX18qL19tZXJnZU5hbWVzcGFjZXMoe1xuICBfX3Byb3RvX186IG51bGwsXG4gIGJpbmQ6IGJpbmRfMSxcbiAgZGVmYXVsdDogY29tcG9uZW50RXZlbnQsXG4gIHVuYmluZDogdW5iaW5kXzFcbn0sIFtjb21wb25lbnRFdmVudF0pO1xuXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxuXG4vKipcbiAqIERlbGVnYXRlIGV2ZW50IGB0eXBlYCB0byBgc2VsZWN0b3JgXG4gKiBhbmQgaW52b2tlIGBmbihlKWAuIEEgY2FsbGJhY2sgZnVuY3Rpb25cbiAqIGlzIHJldHVybmVkIHdoaWNoIG1heSBiZSBwYXNzZWQgdG8gYC51bmJpbmQoKWAuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtTdHJpbmd9IHNlbGVjdG9yXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gY2FwdHVyZVxuICogQHJldHVybiB7RnVuY3Rpb259XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbi8vIFNvbWUgZXZlbnRzIGRvbid0IGJ1YmJsZSwgc28gd2Ugd2FudCB0byBiaW5kIHRvIHRoZSBjYXB0dXJlIHBoYXNlIGluc3RlYWRcbi8vIHdoZW4gZGVsZWdhdGluZy5cbnZhciBmb3JjZUNhcHR1cmVFdmVudHMgPSBbICdmb2N1cycsICdibHVyJyBdO1xuXG5mdW5jdGlvbiBiaW5kKGVsLCBzZWxlY3RvciwgdHlwZSwgZm4sIGNhcHR1cmUpIHtcbiAgaWYgKGZvcmNlQ2FwdHVyZUV2ZW50cy5pbmRleE9mKHR5cGUpICE9PSAtMSkge1xuICAgIGNhcHR1cmUgPSB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIGV2ZW50LmJpbmQoZWwsIHR5cGUsIGZ1bmN0aW9uKGUpIHtcbiAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQgfHwgZS5zcmNFbGVtZW50O1xuICAgIGUuZGVsZWdhdGVUYXJnZXQgPSBjbG9zZXN0KHRhcmdldCwgc2VsZWN0b3IsIHRydWUpO1xuICAgIGlmIChlLmRlbGVnYXRlVGFyZ2V0KSB7XG4gICAgICBmbi5jYWxsKGVsLCBlKTtcbiAgICB9XG4gIH0sIGNhcHR1cmUpO1xufVxuXG4vKipcbiAqIFVuYmluZCBldmVudCBgdHlwZWAncyBjYWxsYmFjayBgZm5gLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICogQHBhcmFtIHtCb29sZWFufSBjYXB0dXJlXG4gKiBAYXBpIHB1YmxpY1xuICovXG5mdW5jdGlvbiB1bmJpbmQoZWwsIHR5cGUsIGZuLCBjYXB0dXJlKSB7XG4gIGlmIChmb3JjZUNhcHR1cmVFdmVudHMuaW5kZXhPZih0eXBlKSAhPT0gLTEpIHtcbiAgICBjYXB0dXJlID0gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiBldmVudC51bmJpbmQoZWwsIHR5cGUsIGZuLCBjYXB0dXJlKTtcbn1cblxudmFyIGRlbGVnYXRlID0ge1xuICBiaW5kLFxuICB1bmJpbmRcbn07XG5cbi8qKlxuICogQHBhcmFtIHsgSFRNTEVsZW1lbnQgfSBlbGVtZW50XG4gKiBAcGFyYW0geyBTdHJpbmcgfSBzZWxlY3RvclxuICpcbiAqIEByZXR1cm4geyBib29sZWFuIH1cbiAqL1xuZnVuY3Rpb24gbWF0Y2hlcyhlbGVtZW50LCBzZWxlY3Rvcikge1xuICByZXR1cm4gZWxlbWVudCAmJiB0eXBlb2YgZWxlbWVudC5tYXRjaGVzID09PSAnZnVuY3Rpb24nICYmIGVsZW1lbnQubWF0Y2hlcyhzZWxlY3RvcikgfHwgZmFsc2U7XG59XG5cbmZ1bmN0aW9uIHF1ZXJ5KHNlbGVjdG9yLCBlbCkge1xuICBlbCA9IGVsIHx8IGRvY3VtZW50O1xuXG4gIHJldHVybiBlbC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbn1cblxuZnVuY3Rpb24gYWxsKHNlbGVjdG9yLCBlbCkge1xuICBlbCA9IGVsIHx8IGRvY3VtZW50O1xuXG4gIHJldHVybiBlbC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlKGVsKSB7XG4gIGVsLnBhcmVudE5vZGUgJiYgZWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbCk7XG59XG5cbmV4cG9ydCB7IGFzc2lnbiBhcyBhc3NpZ25TdHlsZSwgYXR0ciwgY2xhc3NlcywgY2xlYXIsIGNsb3Nlc3QsIGRlbGVnYXRlLCBldmVudCwgbWF0Y2hlcywgcXVlcnksIGFsbCBhcyBxdWVyeUFsbCwgcmVtb3ZlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../node_modules/@camunda/form-playground/node_modules/min-dom/dist/index.js\n\n}");

/***/ }),

/***/ "../node_modules/downloadjs/download.js":
/*!**********************************************!*\
  !*** ../node_modules/downloadjs/download.js ***!
  \**********************************************/
/***/ (function(module, exports) {

eval("{var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;//download.js v4.2, by dandavis; 2008-2016. [MIT] see http://danml.com/download.html for tests/usage\n// v1 landed a FF+Chrome compat way of downloading strings to local un-named files, upgraded to use a hidden frame and optional mime\n// v2 added named files via a[download], msSaveBlob, IE (10+) support, and window.URL support for larger+faster saves than dataURLs\n// v3 added dataURL and Blob Input, bind-toggle arity, and legacy dataURL fallback was improved with force-download mime and base64 support. 3.1 improved safari handling.\n// v4 adds AMD/UMD, commonJS, and plain browser support\n// v4.1 adds url download capability via solo URL argument (same domain/CORS only)\n// v4.2 adds semantic variable names, long (over 2MB) dataURL support, and hidden by default temp anchors\n// https://github.com/rndme/download\n\n(function (root, factory) {\n\tif (true) {\n\t\t// AMD. Register as an anonymous module.\n\t\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t} else // removed by dead control flow\n{}\n}(this, function () {\n\n\treturn function download(data, strFileName, strMimeType) {\n\n\t\tvar self = window, // this script is only for browsers anyway...\n\t\t\tdefaultMime = \"application/octet-stream\", // this default mime also triggers iframe downloads\n\t\t\tmimeType = strMimeType || defaultMime,\n\t\t\tpayload = data,\n\t\t\turl = !strFileName && !strMimeType && payload,\n\t\t\tanchor = document.createElement(\"a\"),\n\t\t\ttoString = function(a){return String(a);},\n\t\t\tmyBlob = (self.Blob || self.MozBlob || self.WebKitBlob || toString),\n\t\t\tfileName = strFileName || \"download\",\n\t\t\tblob,\n\t\t\treader;\n\t\t\tmyBlob= myBlob.call ? myBlob.bind(self) : Blob ;\n\t  \n\t\tif(String(this)===\"true\"){ //reverse arguments, allowing download.bind(true, \"text/xml\", \"export.xml\") to act as a callback\n\t\t\tpayload=[payload, mimeType];\n\t\t\tmimeType=payload[0];\n\t\t\tpayload=payload[1];\n\t\t}\n\n\n\t\tif(url && url.length< 2048){ // if no filename and no mime, assume a url was passed as the only argument\n\t\t\tfileName = url.split(\"/\").pop().split(\"?\")[0];\n\t\t\tanchor.href = url; // assign href prop to temp anchor\n\t\t  \tif(anchor.href.indexOf(url) !== -1){ // if the browser determines that it's a potentially valid url path:\n        \t\tvar ajax=new XMLHttpRequest();\n        \t\tajax.open( \"GET\", url, true);\n        \t\tajax.responseType = 'blob';\n        \t\tajax.onload= function(e){ \n\t\t\t\t  download(e.target.response, fileName, defaultMime);\n\t\t\t\t};\n        \t\tsetTimeout(function(){ ajax.send();}, 0); // allows setting custom ajax headers using the return:\n\t\t\t    return ajax;\n\t\t\t} // end if valid url?\n\t\t} // end if url?\n\n\n\t\t//go ahead and download dataURLs right away\n\t\tif(/^data:([\\w+-]+\\/[\\w+.-]+)?[,;]/.test(payload)){\n\t\t\n\t\t\tif(payload.length > (1024*1024*1.999) && myBlob !== toString ){\n\t\t\t\tpayload=dataUrlToBlob(payload);\n\t\t\t\tmimeType=payload.type || defaultMime;\n\t\t\t}else{\t\t\t\n\t\t\t\treturn navigator.msSaveBlob ?  // IE10 can't do a[download], only Blobs:\n\t\t\t\t\tnavigator.msSaveBlob(dataUrlToBlob(payload), fileName) :\n\t\t\t\t\tsaver(payload) ; // everyone else can save dataURLs un-processed\n\t\t\t}\n\t\t\t\n\t\t}else{//not data url, is it a string with special needs?\n\t\t\tif(/([\\x80-\\xff])/.test(payload)){\t\t\t  \n\t\t\t\tvar i=0, tempUiArr= new Uint8Array(payload.length), mx=tempUiArr.length;\n\t\t\t\tfor(i;i<mx;++i) tempUiArr[i]= payload.charCodeAt(i);\n\t\t\t \tpayload=new myBlob([tempUiArr], {type: mimeType});\n\t\t\t}\t\t  \n\t\t}\n\t\tblob = payload instanceof myBlob ?\n\t\t\tpayload :\n\t\t\tnew myBlob([payload], {type: mimeType}) ;\n\n\n\t\tfunction dataUrlToBlob(strUrl) {\n\t\t\tvar parts= strUrl.split(/[:;,]/),\n\t\t\ttype= parts[1],\n\t\t\tdecoder= parts[2] == \"base64\" ? atob : decodeURIComponent,\n\t\t\tbinData= decoder( parts.pop() ),\n\t\t\tmx= binData.length,\n\t\t\ti= 0,\n\t\t\tuiArr= new Uint8Array(mx);\n\n\t\t\tfor(i;i<mx;++i) uiArr[i]= binData.charCodeAt(i);\n\n\t\t\treturn new myBlob([uiArr], {type: type});\n\t\t }\n\n\t\tfunction saver(url, winMode){\n\n\t\t\tif ('download' in anchor) { //html5 A[download]\n\t\t\t\tanchor.href = url;\n\t\t\t\tanchor.setAttribute(\"download\", fileName);\n\t\t\t\tanchor.className = \"download-js-link\";\n\t\t\t\tanchor.innerHTML = \"downloading...\";\n\t\t\t\tanchor.style.display = \"none\";\n\t\t\t\tdocument.body.appendChild(anchor);\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tanchor.click();\n\t\t\t\t\tdocument.body.removeChild(anchor);\n\t\t\t\t\tif(winMode===true){setTimeout(function(){ self.URL.revokeObjectURL(anchor.href);}, 250 );}\n\t\t\t\t}, 66);\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t// handle non-a[download] safari as best we can:\n\t\t\tif(/(Version)\\/(\\d+)\\.(\\d+)(?:\\.(\\d+))?.*Safari\\//.test(navigator.userAgent)) {\n\t\t\t\tif(/^data:/.test(url))\turl=\"data:\"+url.replace(/^data:([\\w\\/\\-\\+]+)/, defaultMime);\n\t\t\t\tif(!window.open(url)){ // popup blocked, offer direct download:\n\t\t\t\t\tif(confirm(\"Displaying New Document\\n\\nUse Save As... to download, then click back to return to this page.\")){ location.href=url; }\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t//do iframe dataURL download (old ch+FF):\n\t\t\tvar f = document.createElement(\"iframe\");\n\t\t\tdocument.body.appendChild(f);\n\n\t\t\tif(!winMode && /^data:/.test(url)){ // force a mime that will download:\n\t\t\t\turl=\"data:\"+url.replace(/^data:([\\w\\/\\-\\+]+)/, defaultMime);\n\t\t\t}\n\t\t\tf.src=url;\n\t\t\tsetTimeout(function(){ document.body.removeChild(f); }, 333);\n\n\t\t}//end saver\n\n\n\n\n\t\tif (navigator.msSaveBlob) { // IE10+ : (has Blob, but not a[download] or URL)\n\t\t\treturn navigator.msSaveBlob(blob, fileName);\n\t\t}\n\n\t\tif(self.URL){ // simple fast and modern way using Blob and URL:\n\t\t\tsaver(self.URL.createObjectURL(blob), true);\n\t\t}else{\n\t\t\t// handle non-Blob()+non-URL browsers:\n\t\t\tif(typeof blob === \"string\" || blob.constructor===toString ){\n\t\t\t\ttry{\n\t\t\t\t\treturn saver( \"data:\" +  mimeType   + \";base64,\"  +  self.btoa(blob)  );\n\t\t\t\t}catch(y){\n\t\t\t\t\treturn saver( \"data:\" +  mimeType   + \",\" + encodeURIComponent(blob)  );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Blob but not URL support:\n\t\t\treader=new FileReader();\n\t\t\treader.onload=function(e){\n\t\t\t\tsaver(this.result);\n\t\t\t};\n\t\t\treader.readAsDataURL(blob);\n\t\t}\n\t\treturn true;\n\t}; /* end download() */\n}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vbm9kZV9tb2R1bGVzL2Rvd25sb2FkanMvZG93bmxvYWQuanMiLCJtYXBwaW5ncyI6IkFBQUEsaUlBQWlDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsS0FBSyxJQUEwQztBQUMvQztBQUNBLEVBQUUsaUNBQU8sRUFBRSxvQ0FBRSxPQUFPO0FBQUE7QUFBQTtBQUFBLGtHQUFDO0FBQ3JCLEdBQUcsS0FBSztBQUFBLEVBUUw7QUFDSCxDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixrQkFBa0I7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQSwrQkFBK0I7QUFDL0I7QUFDQSxzQkFBc0I7QUFDdEIsMENBQTBDO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxhQUFhLE1BQU07QUFDcEQ7QUFDQSxLQUFLO0FBQ0wsSUFBSTs7O0FBR0o7QUFDQSxtQ0FBbUM7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0EsR0FBRyxLQUFLO0FBQ1I7QUFDQTtBQUNBLFVBQVUsS0FBSztBQUNmLHNDQUFzQyxlQUFlO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLGVBQWU7OztBQUd6QztBQUNBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsU0FBUyxLQUFLOztBQUVkLCtCQUErQixXQUFXO0FBQzFDOztBQUVBOztBQUVBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsdUJBQXVCLHVDQUF1QztBQUN0RixLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0Isb0hBQW9IO0FBQ3BIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsdUNBQXVDO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQiwrQkFBK0I7O0FBRXpELEdBQUc7Ozs7O0FBS0gsOEJBQThCO0FBQzlCO0FBQ0E7O0FBRUEsZ0JBQWdCO0FBQ2hCO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QztBQUM3QyxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2NhbXVuZGEtbW9kZWxlci1jbGllbnQvLi4vbm9kZV9tb2R1bGVzL2Rvd25sb2FkanMvZG93bmxvYWQuanM/YTIxNyJdLCJzb3VyY2VzQ29udGVudCI6WyIvL2Rvd25sb2FkLmpzIHY0LjIsIGJ5IGRhbmRhdmlzOyAyMDA4LTIwMTYuIFtNSVRdIHNlZSBodHRwOi8vZGFubWwuY29tL2Rvd25sb2FkLmh0bWwgZm9yIHRlc3RzL3VzYWdlXG4vLyB2MSBsYW5kZWQgYSBGRitDaHJvbWUgY29tcGF0IHdheSBvZiBkb3dubG9hZGluZyBzdHJpbmdzIHRvIGxvY2FsIHVuLW5hbWVkIGZpbGVzLCB1cGdyYWRlZCB0byB1c2UgYSBoaWRkZW4gZnJhbWUgYW5kIG9wdGlvbmFsIG1pbWVcbi8vIHYyIGFkZGVkIG5hbWVkIGZpbGVzIHZpYSBhW2Rvd25sb2FkXSwgbXNTYXZlQmxvYiwgSUUgKDEwKykgc3VwcG9ydCwgYW5kIHdpbmRvdy5VUkwgc3VwcG9ydCBmb3IgbGFyZ2VyK2Zhc3RlciBzYXZlcyB0aGFuIGRhdGFVUkxzXG4vLyB2MyBhZGRlZCBkYXRhVVJMIGFuZCBCbG9iIElucHV0LCBiaW5kLXRvZ2dsZSBhcml0eSwgYW5kIGxlZ2FjeSBkYXRhVVJMIGZhbGxiYWNrIHdhcyBpbXByb3ZlZCB3aXRoIGZvcmNlLWRvd25sb2FkIG1pbWUgYW5kIGJhc2U2NCBzdXBwb3J0LiAzLjEgaW1wcm92ZWQgc2FmYXJpIGhhbmRsaW5nLlxuLy8gdjQgYWRkcyBBTUQvVU1ELCBjb21tb25KUywgYW5kIHBsYWluIGJyb3dzZXIgc3VwcG9ydFxuLy8gdjQuMSBhZGRzIHVybCBkb3dubG9hZCBjYXBhYmlsaXR5IHZpYSBzb2xvIFVSTCBhcmd1bWVudCAoc2FtZSBkb21haW4vQ09SUyBvbmx5KVxuLy8gdjQuMiBhZGRzIHNlbWFudGljIHZhcmlhYmxlIG5hbWVzLCBsb25nIChvdmVyIDJNQikgZGF0YVVSTCBzdXBwb3J0LCBhbmQgaGlkZGVuIGJ5IGRlZmF1bHQgdGVtcCBhbmNob3JzXG4vLyBodHRwczovL2dpdGh1Yi5jb20vcm5kbWUvZG93bmxvYWRcblxuKGZ1bmN0aW9uIChyb290LCBmYWN0b3J5KSB7XG5cdGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcblx0XHQvLyBBTUQuIFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUuXG5cdFx0ZGVmaW5lKFtdLCBmYWN0b3J5KTtcblx0fSBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpIHtcblx0XHQvLyBOb2RlLiBEb2VzIG5vdCB3b3JrIHdpdGggc3RyaWN0IENvbW1vbkpTLCBidXRcblx0XHQvLyBvbmx5IENvbW1vbkpTLWxpa2UgZW52aXJvbm1lbnRzIHRoYXQgc3VwcG9ydCBtb2R1bGUuZXhwb3J0cyxcblx0XHQvLyBsaWtlIE5vZGUuXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdH0gZWxzZSB7XG5cdFx0Ly8gQnJvd3NlciBnbG9iYWxzIChyb290IGlzIHdpbmRvdylcblx0XHRyb290LmRvd25sb2FkID0gZmFjdG9yeSgpO1xuICB9XG59KHRoaXMsIGZ1bmN0aW9uICgpIHtcblxuXHRyZXR1cm4gZnVuY3Rpb24gZG93bmxvYWQoZGF0YSwgc3RyRmlsZU5hbWUsIHN0ck1pbWVUeXBlKSB7XG5cblx0XHR2YXIgc2VsZiA9IHdpbmRvdywgLy8gdGhpcyBzY3JpcHQgaXMgb25seSBmb3IgYnJvd3NlcnMgYW55d2F5Li4uXG5cdFx0XHRkZWZhdWx0TWltZSA9IFwiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtXCIsIC8vIHRoaXMgZGVmYXVsdCBtaW1lIGFsc28gdHJpZ2dlcnMgaWZyYW1lIGRvd25sb2Fkc1xuXHRcdFx0bWltZVR5cGUgPSBzdHJNaW1lVHlwZSB8fCBkZWZhdWx0TWltZSxcblx0XHRcdHBheWxvYWQgPSBkYXRhLFxuXHRcdFx0dXJsID0gIXN0ckZpbGVOYW1lICYmICFzdHJNaW1lVHlwZSAmJiBwYXlsb2FkLFxuXHRcdFx0YW5jaG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIiksXG5cdFx0XHR0b1N0cmluZyA9IGZ1bmN0aW9uKGEpe3JldHVybiBTdHJpbmcoYSk7fSxcblx0XHRcdG15QmxvYiA9IChzZWxmLkJsb2IgfHwgc2VsZi5Nb3pCbG9iIHx8IHNlbGYuV2ViS2l0QmxvYiB8fCB0b1N0cmluZyksXG5cdFx0XHRmaWxlTmFtZSA9IHN0ckZpbGVOYW1lIHx8IFwiZG93bmxvYWRcIixcblx0XHRcdGJsb2IsXG5cdFx0XHRyZWFkZXI7XG5cdFx0XHRteUJsb2I9IG15QmxvYi5jYWxsID8gbXlCbG9iLmJpbmQoc2VsZikgOiBCbG9iIDtcblx0ICBcblx0XHRpZihTdHJpbmcodGhpcyk9PT1cInRydWVcIil7IC8vcmV2ZXJzZSBhcmd1bWVudHMsIGFsbG93aW5nIGRvd25sb2FkLmJpbmQodHJ1ZSwgXCJ0ZXh0L3htbFwiLCBcImV4cG9ydC54bWxcIikgdG8gYWN0IGFzIGEgY2FsbGJhY2tcblx0XHRcdHBheWxvYWQ9W3BheWxvYWQsIG1pbWVUeXBlXTtcblx0XHRcdG1pbWVUeXBlPXBheWxvYWRbMF07XG5cdFx0XHRwYXlsb2FkPXBheWxvYWRbMV07XG5cdFx0fVxuXG5cblx0XHRpZih1cmwgJiYgdXJsLmxlbmd0aDwgMjA0OCl7IC8vIGlmIG5vIGZpbGVuYW1lIGFuZCBubyBtaW1lLCBhc3N1bWUgYSB1cmwgd2FzIHBhc3NlZCBhcyB0aGUgb25seSBhcmd1bWVudFxuXHRcdFx0ZmlsZU5hbWUgPSB1cmwuc3BsaXQoXCIvXCIpLnBvcCgpLnNwbGl0KFwiP1wiKVswXTtcblx0XHRcdGFuY2hvci5ocmVmID0gdXJsOyAvLyBhc3NpZ24gaHJlZiBwcm9wIHRvIHRlbXAgYW5jaG9yXG5cdFx0ICBcdGlmKGFuY2hvci5ocmVmLmluZGV4T2YodXJsKSAhPT0gLTEpeyAvLyBpZiB0aGUgYnJvd3NlciBkZXRlcm1pbmVzIHRoYXQgaXQncyBhIHBvdGVudGlhbGx5IHZhbGlkIHVybCBwYXRoOlxuICAgICAgICBcdFx0dmFyIGFqYXg9bmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgIFx0XHRhamF4Lm9wZW4oIFwiR0VUXCIsIHVybCwgdHJ1ZSk7XG4gICAgICAgIFx0XHRhamF4LnJlc3BvbnNlVHlwZSA9ICdibG9iJztcbiAgICAgICAgXHRcdGFqYXgub25sb2FkPSBmdW5jdGlvbihlKXsgXG5cdFx0XHRcdCAgZG93bmxvYWQoZS50YXJnZXQucmVzcG9uc2UsIGZpbGVOYW1lLCBkZWZhdWx0TWltZSk7XG5cdFx0XHRcdH07XG4gICAgICAgIFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7IGFqYXguc2VuZCgpO30sIDApOyAvLyBhbGxvd3Mgc2V0dGluZyBjdXN0b20gYWpheCBoZWFkZXJzIHVzaW5nIHRoZSByZXR1cm46XG5cdFx0XHQgICAgcmV0dXJuIGFqYXg7XG5cdFx0XHR9IC8vIGVuZCBpZiB2YWxpZCB1cmw/XG5cdFx0fSAvLyBlbmQgaWYgdXJsP1xuXG5cblx0XHQvL2dvIGFoZWFkIGFuZCBkb3dubG9hZCBkYXRhVVJMcyByaWdodCBhd2F5XG5cdFx0aWYoL15kYXRhOihbXFx3Ky1dK1xcL1tcXHcrLi1dKyk/Wyw7XS8udGVzdChwYXlsb2FkKSl7XG5cdFx0XG5cdFx0XHRpZihwYXlsb2FkLmxlbmd0aCA+ICgxMDI0KjEwMjQqMS45OTkpICYmIG15QmxvYiAhPT0gdG9TdHJpbmcgKXtcblx0XHRcdFx0cGF5bG9hZD1kYXRhVXJsVG9CbG9iKHBheWxvYWQpO1xuXHRcdFx0XHRtaW1lVHlwZT1wYXlsb2FkLnR5cGUgfHwgZGVmYXVsdE1pbWU7XG5cdFx0XHR9ZWxzZXtcdFx0XHRcblx0XHRcdFx0cmV0dXJuIG5hdmlnYXRvci5tc1NhdmVCbG9iID8gIC8vIElFMTAgY2FuJ3QgZG8gYVtkb3dubG9hZF0sIG9ubHkgQmxvYnM6XG5cdFx0XHRcdFx0bmF2aWdhdG9yLm1zU2F2ZUJsb2IoZGF0YVVybFRvQmxvYihwYXlsb2FkKSwgZmlsZU5hbWUpIDpcblx0XHRcdFx0XHRzYXZlcihwYXlsb2FkKSA7IC8vIGV2ZXJ5b25lIGVsc2UgY2FuIHNhdmUgZGF0YVVSTHMgdW4tcHJvY2Vzc2VkXG5cdFx0XHR9XG5cdFx0XHRcblx0XHR9ZWxzZXsvL25vdCBkYXRhIHVybCwgaXMgaXQgYSBzdHJpbmcgd2l0aCBzcGVjaWFsIG5lZWRzP1xuXHRcdFx0aWYoLyhbXFx4ODAtXFx4ZmZdKS8udGVzdChwYXlsb2FkKSl7XHRcdFx0ICBcblx0XHRcdFx0dmFyIGk9MCwgdGVtcFVpQXJyPSBuZXcgVWludDhBcnJheShwYXlsb2FkLmxlbmd0aCksIG14PXRlbXBVaUFyci5sZW5ndGg7XG5cdFx0XHRcdGZvcihpO2k8bXg7KytpKSB0ZW1wVWlBcnJbaV09IHBheWxvYWQuY2hhckNvZGVBdChpKTtcblx0XHRcdCBcdHBheWxvYWQ9bmV3IG15QmxvYihbdGVtcFVpQXJyXSwge3R5cGU6IG1pbWVUeXBlfSk7XG5cdFx0XHR9XHRcdCAgXG5cdFx0fVxuXHRcdGJsb2IgPSBwYXlsb2FkIGluc3RhbmNlb2YgbXlCbG9iID9cblx0XHRcdHBheWxvYWQgOlxuXHRcdFx0bmV3IG15QmxvYihbcGF5bG9hZF0sIHt0eXBlOiBtaW1lVHlwZX0pIDtcblxuXG5cdFx0ZnVuY3Rpb24gZGF0YVVybFRvQmxvYihzdHJVcmwpIHtcblx0XHRcdHZhciBwYXJ0cz0gc3RyVXJsLnNwbGl0KC9bOjssXS8pLFxuXHRcdFx0dHlwZT0gcGFydHNbMV0sXG5cdFx0XHRkZWNvZGVyPSBwYXJ0c1syXSA9PSBcImJhc2U2NFwiID8gYXRvYiA6IGRlY29kZVVSSUNvbXBvbmVudCxcblx0XHRcdGJpbkRhdGE9IGRlY29kZXIoIHBhcnRzLnBvcCgpICksXG5cdFx0XHRteD0gYmluRGF0YS5sZW5ndGgsXG5cdFx0XHRpPSAwLFxuXHRcdFx0dWlBcnI9IG5ldyBVaW50OEFycmF5KG14KTtcblxuXHRcdFx0Zm9yKGk7aTxteDsrK2kpIHVpQXJyW2ldPSBiaW5EYXRhLmNoYXJDb2RlQXQoaSk7XG5cblx0XHRcdHJldHVybiBuZXcgbXlCbG9iKFt1aUFycl0sIHt0eXBlOiB0eXBlfSk7XG5cdFx0IH1cblxuXHRcdGZ1bmN0aW9uIHNhdmVyKHVybCwgd2luTW9kZSl7XG5cblx0XHRcdGlmICgnZG93bmxvYWQnIGluIGFuY2hvcikgeyAvL2h0bWw1IEFbZG93bmxvYWRdXG5cdFx0XHRcdGFuY2hvci5ocmVmID0gdXJsO1xuXHRcdFx0XHRhbmNob3Iuc2V0QXR0cmlidXRlKFwiZG93bmxvYWRcIiwgZmlsZU5hbWUpO1xuXHRcdFx0XHRhbmNob3IuY2xhc3NOYW1lID0gXCJkb3dubG9hZC1qcy1saW5rXCI7XG5cdFx0XHRcdGFuY2hvci5pbm5lckhUTUwgPSBcImRvd25sb2FkaW5nLi4uXCI7XG5cdFx0XHRcdGFuY2hvci5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cdFx0XHRcdGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYW5jaG9yKTtcblx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRhbmNob3IuY2xpY2soKTtcblx0XHRcdFx0XHRkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGFuY2hvcik7XG5cdFx0XHRcdFx0aWYod2luTW9kZT09PXRydWUpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXsgc2VsZi5VUkwucmV2b2tlT2JqZWN0VVJMKGFuY2hvci5ocmVmKTt9LCAyNTAgKTt9XG5cdFx0XHRcdH0sIDY2KTtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cblx0XHRcdC8vIGhhbmRsZSBub24tYVtkb3dubG9hZF0gc2FmYXJpIGFzIGJlc3Qgd2UgY2FuOlxuXHRcdFx0aWYoLyhWZXJzaW9uKVxcLyhcXGQrKVxcLihcXGQrKSg/OlxcLihcXGQrKSk/LipTYWZhcmlcXC8vLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpIHtcblx0XHRcdFx0aWYoL15kYXRhOi8udGVzdCh1cmwpKVx0dXJsPVwiZGF0YTpcIit1cmwucmVwbGFjZSgvXmRhdGE6KFtcXHdcXC9cXC1cXCtdKykvLCBkZWZhdWx0TWltZSk7XG5cdFx0XHRcdGlmKCF3aW5kb3cub3Blbih1cmwpKXsgLy8gcG9wdXAgYmxvY2tlZCwgb2ZmZXIgZGlyZWN0IGRvd25sb2FkOlxuXHRcdFx0XHRcdGlmKGNvbmZpcm0oXCJEaXNwbGF5aW5nIE5ldyBEb2N1bWVudFxcblxcblVzZSBTYXZlIEFzLi4uIHRvIGRvd25sb2FkLCB0aGVuIGNsaWNrIGJhY2sgdG8gcmV0dXJuIHRvIHRoaXMgcGFnZS5cIikpeyBsb2NhdGlvbi5ocmVmPXVybDsgfVxuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXG5cdFx0XHQvL2RvIGlmcmFtZSBkYXRhVVJMIGRvd25sb2FkIChvbGQgY2grRkYpOlxuXHRcdFx0dmFyIGYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaWZyYW1lXCIpO1xuXHRcdFx0ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChmKTtcblxuXHRcdFx0aWYoIXdpbk1vZGUgJiYgL15kYXRhOi8udGVzdCh1cmwpKXsgLy8gZm9yY2UgYSBtaW1lIHRoYXQgd2lsbCBkb3dubG9hZDpcblx0XHRcdFx0dXJsPVwiZGF0YTpcIit1cmwucmVwbGFjZSgvXmRhdGE6KFtcXHdcXC9cXC1cXCtdKykvLCBkZWZhdWx0TWltZSk7XG5cdFx0XHR9XG5cdFx0XHRmLnNyYz11cmw7XG5cdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7IGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZik7IH0sIDMzMyk7XG5cblx0XHR9Ly9lbmQgc2F2ZXJcblxuXG5cblxuXHRcdGlmIChuYXZpZ2F0b3IubXNTYXZlQmxvYikgeyAvLyBJRTEwKyA6IChoYXMgQmxvYiwgYnV0IG5vdCBhW2Rvd25sb2FkXSBvciBVUkwpXG5cdFx0XHRyZXR1cm4gbmF2aWdhdG9yLm1zU2F2ZUJsb2IoYmxvYiwgZmlsZU5hbWUpO1xuXHRcdH1cblxuXHRcdGlmKHNlbGYuVVJMKXsgLy8gc2ltcGxlIGZhc3QgYW5kIG1vZGVybiB3YXkgdXNpbmcgQmxvYiBhbmQgVVJMOlxuXHRcdFx0c2F2ZXIoc2VsZi5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpLCB0cnVlKTtcblx0XHR9ZWxzZXtcblx0XHRcdC8vIGhhbmRsZSBub24tQmxvYigpK25vbi1VUkwgYnJvd3NlcnM6XG5cdFx0XHRpZih0eXBlb2YgYmxvYiA9PT0gXCJzdHJpbmdcIiB8fCBibG9iLmNvbnN0cnVjdG9yPT09dG9TdHJpbmcgKXtcblx0XHRcdFx0dHJ5e1xuXHRcdFx0XHRcdHJldHVybiBzYXZlciggXCJkYXRhOlwiICsgIG1pbWVUeXBlICAgKyBcIjtiYXNlNjQsXCIgICsgIHNlbGYuYnRvYShibG9iKSAgKTtcblx0XHRcdFx0fWNhdGNoKHkpe1xuXHRcdFx0XHRcdHJldHVybiBzYXZlciggXCJkYXRhOlwiICsgIG1pbWVUeXBlICAgKyBcIixcIiArIGVuY29kZVVSSUNvbXBvbmVudChibG9iKSAgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBCbG9iIGJ1dCBub3QgVVJMIHN1cHBvcnQ6XG5cdFx0XHRyZWFkZXI9bmV3IEZpbGVSZWFkZXIoKTtcblx0XHRcdHJlYWRlci5vbmxvYWQ9ZnVuY3Rpb24oZSl7XG5cdFx0XHRcdHNhdmVyKHRoaXMucmVzdWx0KTtcblx0XHRcdH07XG5cdFx0XHRyZWFkZXIucmVhZEFzRGF0YVVSTChibG9iKTtcblx0XHR9XG5cdFx0cmV0dXJuIHRydWU7XG5cdH07IC8qIGVuZCBkb3dubG9hZCgpICovXG59KSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../node_modules/downloadjs/download.js\n\n}");

/***/ }),

/***/ "../node_modules/file-drops/dist/index.js":
/*!************************************************!*\
  !*** ../node_modules/file-drops/dist/index.js ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ fileDrop)\n/* harmony export */ });\n/* harmony import */ var min_dom__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! min-dom */ \"../node_modules/file-drops/node_modules/min-dom/dist/index.esm.js\");\n\n\nvar OVERLAY_HTML = '<div class=\"drop-overlay\">' +\n                     '<div class=\"box\">' +\n                        '<div class=\"label\">{label}</div>' +\n                     '</div>' +\n                   '</div>';\n\n/**\n * @typedef { {\n *   name: string,\n *   path: string | undefined,\n *   contents: string\n * } } File\n */\n\n/**\n * Add file drop functionality to the given element,\n * calling fn(files...) on drop.\n *\n * @example\n *\n * var node = document.querySelector('#container');\n *\n * var dragOverHandler = fileDrop(handleFiles);\n *\n * node.addEventListener('dragover', dragOverHandler);\n *\n * @param { string } [label='Drop files here']\n * @param { (files: File[], dropEvent: DragEvent) => void } fn\n *\n * @return { (event: DragEvent) => any } drag over handler\n */\nfunction fileDrop(label, fn) {\n\n  if (typeof label === 'function') {\n    fn = label;\n    label = 'Drop files here';\n  }\n\n  var self;\n  var extraArgs;\n\n  // we are bound, if overlay exists\n  var overlay;\n\n  /**\n   * @param { DragEvent } event\n   */\n  function onDrop(event) {\n\n    event.preventDefault();\n\n    asyncMap(event.dataTransfer.files, readFile, function(err, files) {\n\n      if (err) {\n        console.warn('file drop failed', err);\n      } else {\n\n        var args = extraArgs.concat([ files, event ]);\n\n        // cleanup on drop\n        // onEnd(event);\n\n        // call provided fn with extraArgs..., files, event\n        fn.apply(self, args);\n      }\n    });\n  }\n\n  function isDragAllowed(dataTransfer) {\n\n    // Universal check for all browsers\n    return dataTransfer && dataTransfer.types && dataTransfer.types.includes('Files');\n  }\n\n  /**\n   * Drag over event to be registered by clients in respective contexts\n   *\n   * @param { DragEvent } _event\n   */\n  function onDragover(_event) {\n\n    // (0) extract extra arguments (extraArgs..., event)\n    var args = slice(arguments);\n\n    /**\n     * @type {DragEvent}\n     */\n    var event = args.pop();\n\n    var dataTransfer = event.dataTransfer,\n        target = event.currentTarget || event.target;\n\n    if (!isDragAllowed(dataTransfer)) {\n      return;\n    }\n\n    // make us a drop zone\n    event.preventDefault();\n\n    dataTransfer.dropEffect = 'copy';\n\n    // only register if we do not drag and drop already\n    if (overlay) {\n      return;\n    }\n\n    overlay = createOverlay(label);\n\n    target.appendChild(overlay);\n\n    self = this;\n    extraArgs = args;\n\n\n    // do not register events during testing\n    if (!target) {\n      return;\n    }\n\n\n    // (2) setup drag listeners\n\n    function onLeave(event) {\n\n      var relatedTarget = event.relatedTarget;\n\n      if (target.contains(relatedTarget)) {\n        return;\n      }\n\n      onEnd();\n    }\n\n    // (2.1) detach on end\n    function onEnd(event) {\n\n      document.removeEventListener('drop', onDrop);\n      document.removeEventListener('drop', onEnd);\n      document.removeEventListener('dragleave', onLeave);\n      document.removeEventListener('dragend', onEnd);\n      document.removeEventListener('dragover', preventDrop);\n\n      if (overlay) {\n        target.removeChild(overlay);\n        overlay = null;\n      }\n    }\n\n    // (2.0) attach drag + cleanup event\n    document.addEventListener('drop', onDrop);\n    document.addEventListener('drop', onEnd);\n    document.addEventListener('dragleave', onLeave);\n    document.addEventListener('dragend', onEnd);\n    document.addEventListener('dragover', preventDrop);\n  }\n\n  onDragover.onDrop = onDrop;\n\n  return onDragover;\n}\n\n\n// helpers ////////////////////////////////////\n\nfunction readFile(dropFile, done) {\n\n  if (!window.FileReader) {\n    return done();\n  }\n\n  var reader = new FileReader();\n\n  // Closure to capture the file information.\n  reader.onload = function(e) {\n\n    done(null, {\n      name: dropFile.name,\n      path: dropFile.path,\n      contents: e.target.result\n    });\n  };\n\n  reader.onerror = function(event) {\n    done(event.target.error);\n  };\n\n  // Read in the image file as a data URL.\n  reader.readAsText(dropFile);\n}\n\n\nfunction asyncMap(elements, iterator, done) {\n\n  var idx = 0,\n      results = [];\n\n  function next() {\n\n    if (idx === elements.length) {\n      done(null, results);\n    } else {\n\n      iterator(elements[idx], function(err, result) {\n\n        if (err) {\n          return done(err);\n        } else {\n          results[idx] = result;\n          idx++;\n\n          next();\n        }\n      });\n    }\n  }\n\n  next();\n}\n\nfunction slice(arr) {\n  return Array.prototype.slice.call(arr);\n}\n\nfunction createOverlay(label) {\n  var markup = OVERLAY_HTML.replace('{label}', label);\n  const overlay = (0,min_dom__WEBPACK_IMPORTED_MODULE_0__.domify)(markup);\n\n  // remove blinking on safari\n  overlay.style.pointerEvents = 'none';\n\n  return overlay;\n}\n\nfunction preventDrop(event) {\n  event.preventDefault();\n}\n\n\n//# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vbm9kZV9tb2R1bGVzL2ZpbGUtZHJvcHMvZGlzdC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFpQzs7QUFFakM7QUFDQTtBQUNBLDZDQUE2QyxNQUFNO0FBQ25EO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFNBQVM7QUFDckIsWUFBWSxnREFBZ0Q7QUFDNUQ7QUFDQSxhQUFhLDRCQUE0QjtBQUN6QztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLGNBQWMsWUFBWTtBQUMxQjtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxRQUFROztBQUVSOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLFlBQVk7QUFDMUI7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7O0FBR0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsTUFBTTs7QUFFTjs7QUFFQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0Esc0NBQXNDLE1BQU07QUFDNUMsa0JBQWtCLCtDQUFNOztBQUV4QjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUUrQjtBQUMvQiIsInNvdXJjZXMiOlsid2VicGFjazovL2NhbXVuZGEtbW9kZWxlci1jbGllbnQvLi4vbm9kZV9tb2R1bGVzL2ZpbGUtZHJvcHMvZGlzdC9pbmRleC5qcz9kNmNjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGRvbWlmeSB9IGZyb20gJ21pbi1kb20nO1xuXG52YXIgT1ZFUkxBWV9IVE1MID0gJzxkaXYgY2xhc3M9XCJkcm9wLW92ZXJsYXlcIj4nICtcbiAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiYm94XCI+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImxhYmVsXCI+e2xhYmVsfTwvZGl2PicgK1xuICAgICAgICAgICAgICAgICAgICAgJzwvZGl2PicgK1xuICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nO1xuXG4vKipcbiAqIEB0eXBlZGVmIHsge1xuICogICBuYW1lOiBzdHJpbmcsXG4gKiAgIHBhdGg6IHN0cmluZyB8IHVuZGVmaW5lZCxcbiAqICAgY29udGVudHM6IHN0cmluZ1xuICogfSB9IEZpbGVcbiAqL1xuXG4vKipcbiAqIEFkZCBmaWxlIGRyb3AgZnVuY3Rpb25hbGl0eSB0byB0aGUgZ2l2ZW4gZWxlbWVudCxcbiAqIGNhbGxpbmcgZm4oZmlsZXMuLi4pIG9uIGRyb3AuXG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiB2YXIgbm9kZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjb250YWluZXInKTtcbiAqXG4gKiB2YXIgZHJhZ092ZXJIYW5kbGVyID0gZmlsZURyb3AoaGFuZGxlRmlsZXMpO1xuICpcbiAqIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCBkcmFnT3ZlckhhbmRsZXIpO1xuICpcbiAqIEBwYXJhbSB7IHN0cmluZyB9IFtsYWJlbD0nRHJvcCBmaWxlcyBoZXJlJ11cbiAqIEBwYXJhbSB7IChmaWxlczogRmlsZVtdLCBkcm9wRXZlbnQ6IERyYWdFdmVudCkgPT4gdm9pZCB9IGZuXG4gKlxuICogQHJldHVybiB7IChldmVudDogRHJhZ0V2ZW50KSA9PiBhbnkgfSBkcmFnIG92ZXIgaGFuZGxlclxuICovXG5mdW5jdGlvbiBmaWxlRHJvcChsYWJlbCwgZm4pIHtcblxuICBpZiAodHlwZW9mIGxhYmVsID09PSAnZnVuY3Rpb24nKSB7XG4gICAgZm4gPSBsYWJlbDtcbiAgICBsYWJlbCA9ICdEcm9wIGZpbGVzIGhlcmUnO1xuICB9XG5cbiAgdmFyIHNlbGY7XG4gIHZhciBleHRyYUFyZ3M7XG5cbiAgLy8gd2UgYXJlIGJvdW5kLCBpZiBvdmVybGF5IGV4aXN0c1xuICB2YXIgb3ZlcmxheTtcblxuICAvKipcbiAgICogQHBhcmFtIHsgRHJhZ0V2ZW50IH0gZXZlbnRcbiAgICovXG4gIGZ1bmN0aW9uIG9uRHJvcChldmVudCkge1xuXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgIGFzeW5jTWFwKGV2ZW50LmRhdGFUcmFuc2Zlci5maWxlcywgcmVhZEZpbGUsIGZ1bmN0aW9uKGVyciwgZmlsZXMpIHtcblxuICAgICAgaWYgKGVycikge1xuICAgICAgICBjb25zb2xlLndhcm4oJ2ZpbGUgZHJvcCBmYWlsZWQnLCBlcnIpO1xuICAgICAgfSBlbHNlIHtcblxuICAgICAgICB2YXIgYXJncyA9IGV4dHJhQXJncy5jb25jYXQoWyBmaWxlcywgZXZlbnQgXSk7XG5cbiAgICAgICAgLy8gY2xlYW51cCBvbiBkcm9wXG4gICAgICAgIC8vIG9uRW5kKGV2ZW50KTtcblxuICAgICAgICAvLyBjYWxsIHByb3ZpZGVkIGZuIHdpdGggZXh0cmFBcmdzLi4uLCBmaWxlcywgZXZlbnRcbiAgICAgICAgZm4uYXBwbHkoc2VsZiwgYXJncyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBpc0RyYWdBbGxvd2VkKGRhdGFUcmFuc2Zlcikge1xuXG4gICAgLy8gVW5pdmVyc2FsIGNoZWNrIGZvciBhbGwgYnJvd3NlcnNcbiAgICByZXR1cm4gZGF0YVRyYW5zZmVyICYmIGRhdGFUcmFuc2Zlci50eXBlcyAmJiBkYXRhVHJhbnNmZXIudHlwZXMuaW5jbHVkZXMoJ0ZpbGVzJyk7XG4gIH1cblxuICAvKipcbiAgICogRHJhZyBvdmVyIGV2ZW50IHRvIGJlIHJlZ2lzdGVyZWQgYnkgY2xpZW50cyBpbiByZXNwZWN0aXZlIGNvbnRleHRzXG4gICAqXG4gICAqIEBwYXJhbSB7IERyYWdFdmVudCB9IF9ldmVudFxuICAgKi9cbiAgZnVuY3Rpb24gb25EcmFnb3ZlcihfZXZlbnQpIHtcblxuICAgIC8vICgwKSBleHRyYWN0IGV4dHJhIGFyZ3VtZW50cyAoZXh0cmFBcmdzLi4uLCBldmVudClcbiAgICB2YXIgYXJncyA9IHNsaWNlKGFyZ3VtZW50cyk7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7RHJhZ0V2ZW50fVxuICAgICAqL1xuICAgIHZhciBldmVudCA9IGFyZ3MucG9wKCk7XG5cbiAgICB2YXIgZGF0YVRyYW5zZmVyID0gZXZlbnQuZGF0YVRyYW5zZmVyLFxuICAgICAgICB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0IHx8IGV2ZW50LnRhcmdldDtcblxuICAgIGlmICghaXNEcmFnQWxsb3dlZChkYXRhVHJhbnNmZXIpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gbWFrZSB1cyBhIGRyb3Agem9uZVxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBkYXRhVHJhbnNmZXIuZHJvcEVmZmVjdCA9ICdjb3B5JztcblxuICAgIC8vIG9ubHkgcmVnaXN0ZXIgaWYgd2UgZG8gbm90IGRyYWcgYW5kIGRyb3AgYWxyZWFkeVxuICAgIGlmIChvdmVybGF5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgb3ZlcmxheSA9IGNyZWF0ZU92ZXJsYXkobGFiZWwpO1xuXG4gICAgdGFyZ2V0LmFwcGVuZENoaWxkKG92ZXJsYXkpO1xuXG4gICAgc2VsZiA9IHRoaXM7XG4gICAgZXh0cmFBcmdzID0gYXJncztcblxuXG4gICAgLy8gZG8gbm90IHJlZ2lzdGVyIGV2ZW50cyBkdXJpbmcgdGVzdGluZ1xuICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG5cbiAgICAvLyAoMikgc2V0dXAgZHJhZyBsaXN0ZW5lcnNcblxuICAgIGZ1bmN0aW9uIG9uTGVhdmUoZXZlbnQpIHtcblxuICAgICAgdmFyIHJlbGF0ZWRUYXJnZXQgPSBldmVudC5yZWxhdGVkVGFyZ2V0O1xuXG4gICAgICBpZiAodGFyZ2V0LmNvbnRhaW5zKHJlbGF0ZWRUYXJnZXQpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgb25FbmQoKTtcbiAgICB9XG5cbiAgICAvLyAoMi4xKSBkZXRhY2ggb24gZW5kXG4gICAgZnVuY3Rpb24gb25FbmQoZXZlbnQpIHtcblxuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignZHJvcCcsIG9uRHJvcCk7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdkcm9wJywgb25FbmQpO1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignZHJhZ2xlYXZlJywgb25MZWF2ZSk7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdkcmFnZW5kJywgb25FbmQpO1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCBwcmV2ZW50RHJvcCk7XG5cbiAgICAgIGlmIChvdmVybGF5KSB7XG4gICAgICAgIHRhcmdldC5yZW1vdmVDaGlsZChvdmVybGF5KTtcbiAgICAgICAgb3ZlcmxheSA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gKDIuMCkgYXR0YWNoIGRyYWcgKyBjbGVhbnVwIGV2ZW50XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIG9uRHJvcCk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIG9uRW5kKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdkcmFnbGVhdmUnLCBvbkxlYXZlKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdkcmFnZW5kJywgb25FbmQpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgcHJldmVudERyb3ApO1xuICB9XG5cbiAgb25EcmFnb3Zlci5vbkRyb3AgPSBvbkRyb3A7XG5cbiAgcmV0dXJuIG9uRHJhZ292ZXI7XG59XG5cblxuLy8gaGVscGVycyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuZnVuY3Rpb24gcmVhZEZpbGUoZHJvcEZpbGUsIGRvbmUpIHtcblxuICBpZiAoIXdpbmRvdy5GaWxlUmVhZGVyKSB7XG4gICAgcmV0dXJuIGRvbmUoKTtcbiAgfVxuXG4gIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuXG4gIC8vIENsb3N1cmUgdG8gY2FwdHVyZSB0aGUgZmlsZSBpbmZvcm1hdGlvbi5cbiAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKGUpIHtcblxuICAgIGRvbmUobnVsbCwge1xuICAgICAgbmFtZTogZHJvcEZpbGUubmFtZSxcbiAgICAgIHBhdGg6IGRyb3BGaWxlLnBhdGgsXG4gICAgICBjb250ZW50czogZS50YXJnZXQucmVzdWx0XG4gICAgfSk7XG4gIH07XG5cbiAgcmVhZGVyLm9uZXJyb3IgPSBmdW5jdGlvbihldmVudCkge1xuICAgIGRvbmUoZXZlbnQudGFyZ2V0LmVycm9yKTtcbiAgfTtcblxuICAvLyBSZWFkIGluIHRoZSBpbWFnZSBmaWxlIGFzIGEgZGF0YSBVUkwuXG4gIHJlYWRlci5yZWFkQXNUZXh0KGRyb3BGaWxlKTtcbn1cblxuXG5mdW5jdGlvbiBhc3luY01hcChlbGVtZW50cywgaXRlcmF0b3IsIGRvbmUpIHtcblxuICB2YXIgaWR4ID0gMCxcbiAgICAgIHJlc3VsdHMgPSBbXTtcblxuICBmdW5jdGlvbiBuZXh0KCkge1xuXG4gICAgaWYgKGlkeCA9PT0gZWxlbWVudHMubGVuZ3RoKSB7XG4gICAgICBkb25lKG51bGwsIHJlc3VsdHMpO1xuICAgIH0gZWxzZSB7XG5cbiAgICAgIGl0ZXJhdG9yKGVsZW1lbnRzW2lkeF0sIGZ1bmN0aW9uKGVyciwgcmVzdWx0KSB7XG5cbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIHJldHVybiBkb25lKGVycik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0c1tpZHhdID0gcmVzdWx0O1xuICAgICAgICAgIGlkeCsrO1xuXG4gICAgICAgICAgbmV4dCgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBuZXh0KCk7XG59XG5cbmZ1bmN0aW9uIHNsaWNlKGFycikge1xuICByZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJyKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlT3ZlcmxheShsYWJlbCkge1xuICB2YXIgbWFya3VwID0gT1ZFUkxBWV9IVE1MLnJlcGxhY2UoJ3tsYWJlbH0nLCBsYWJlbCk7XG4gIGNvbnN0IG92ZXJsYXkgPSBkb21pZnkobWFya3VwKTtcblxuICAvLyByZW1vdmUgYmxpbmtpbmcgb24gc2FmYXJpXG4gIG92ZXJsYXkuc3R5bGUucG9pbnRlckV2ZW50cyA9ICdub25lJztcblxuICByZXR1cm4gb3ZlcmxheTtcbn1cblxuZnVuY3Rpb24gcHJldmVudERyb3AoZXZlbnQpIHtcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbn1cblxuZXhwb3J0IHsgZmlsZURyb3AgYXMgZGVmYXVsdCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../node_modules/file-drops/dist/index.js\n\n}");

/***/ }),

/***/ "../node_modules/file-drops/node_modules/min-dom/dist/index.esm.js":
/*!*************************************************************************!*\
  !*** ../node_modules/file-drops/node_modules/min-dom/dist/index.esm.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   assignStyle: () => (/* binding */ assign),\n/* harmony export */   attr: () => (/* binding */ attr),\n/* harmony export */   classes: () => (/* binding */ classes),\n/* harmony export */   clear: () => (/* binding */ clear),\n/* harmony export */   closest: () => (/* binding */ closest),\n/* harmony export */   delegate: () => (/* binding */ delegate),\n/* harmony export */   domify: () => (/* binding */ domify$1),\n/* harmony export */   event: () => (/* binding */ event),\n/* harmony export */   matches: () => (/* binding */ matches),\n/* harmony export */   query: () => (/* binding */ query),\n/* harmony export */   queryAll: () => (/* binding */ all),\n/* harmony export */   remove: () => (/* binding */ remove)\n/* harmony export */ });\nfunction _mergeNamespaces(n, m) {\n  m.forEach(function (e) {\n    e && typeof e !== 'string' && !Array.isArray(e) && Object.keys(e).forEach(function (k) {\n      if (k !== 'default' && !(k in n)) {\n        var d = Object.getOwnPropertyDescriptor(e, k);\n        Object.defineProperty(n, k, d.get ? d : {\n          enumerable: true,\n          get: function () { return e[k]; }\n        });\n      }\n    });\n  });\n  return Object.freeze(n);\n}\n\n/**\n * Flatten array, one level deep.\n *\n * @template T\n *\n * @param {T[][] | T[] | null} [arr]\n *\n * @return {T[]}\n */\n\nconst nativeToString = Object.prototype.toString;\nconst nativeHasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction isUndefined(obj) {\n  return obj === undefined;\n}\n\nfunction isArray(obj) {\n  return nativeToString.call(obj) === '[object Array]';\n}\n\n/**\n * Return true, if target owns a property with the given key.\n *\n * @param {Object} target\n * @param {String} key\n *\n * @return {Boolean}\n */\nfunction has(target, key) {\n  return nativeHasOwnProperty.call(target, key);\n}\n\n\n/**\n * Iterate over collection; returning something\n * (non-undefined) will stop iteration.\n *\n * @template T\n * @param {Collection<T>} collection\n * @param { ((item: T, idx: number) => (boolean|void)) | ((item: T, key: string) => (boolean|void)) } iterator\n *\n * @return {T} return result that stopped the iteration\n */\nfunction forEach(collection, iterator) {\n\n  let val,\n      result;\n\n  if (isUndefined(collection)) {\n    return;\n  }\n\n  const convertKey = isArray(collection) ? toNum : identity;\n\n  for (let key in collection) {\n\n    if (has(collection, key)) {\n      val = collection[key];\n\n      result = iterator(val, convertKey(key));\n\n      if (result === false) {\n        return val;\n      }\n    }\n  }\n}\n\n\nfunction identity(arg) {\n  return arg;\n}\n\nfunction toNum(arg) {\n  return Number(arg);\n}\n\n/**\n * Assigns style attributes in a style-src compliant way.\n *\n * @param {Element} element\n * @param {...Object} styleSources\n *\n * @return {Element} the element\n */\nfunction assign(element, ...styleSources) {\n  const target = element.style;\n\n  forEach(styleSources, function(style) {\n    if (!style) {\n      return;\n    }\n\n    forEach(style, function(value, key) {\n      target[key] = value;\n    });\n  });\n\n  return element;\n}\n\n/**\n * Set attribute `name` to `val`, or get attr `name`.\n *\n * @param {Element} el\n * @param {String} name\n * @param {String} [val]\n * @api public\n */\nfunction attr(el, name, val) {\n\n  // get\n  if (arguments.length == 2) {\n    return el.getAttribute(name);\n  }\n\n  // remove\n  if (val === null) {\n    return el.removeAttribute(name);\n  }\n\n  // set\n  el.setAttribute(name, val);\n\n  return el;\n}\n\n/**\n * Taken from https://github.com/component/classes\n *\n * Without the component bits.\n */\n\n/**\n * toString reference.\n */\n\nconst toString = Object.prototype.toString;\n\n/**\n * Wrap `el` in a `ClassList`.\n *\n * @param {Element} el\n * @return {ClassList}\n * @api public\n */\n\nfunction classes(el) {\n  return new ClassList(el);\n}\n\n/**\n * Initialize a new ClassList for `el`.\n *\n * @param {Element} el\n * @api private\n */\n\nfunction ClassList(el) {\n  if (!el || !el.nodeType) {\n    throw new Error('A DOM element reference is required');\n  }\n  this.el = el;\n  this.list = el.classList;\n}\n\n/**\n * Add class `name` if not already present.\n *\n * @param {String} name\n * @return {ClassList}\n * @api public\n */\n\nClassList.prototype.add = function(name) {\n  this.list.add(name);\n  return this;\n};\n\n/**\n * Remove class `name` when present, or\n * pass a regular expression to remove\n * any which match.\n *\n * @param {String|RegExp} name\n * @return {ClassList}\n * @api public\n */\n\nClassList.prototype.remove = function(name) {\n  if ('[object RegExp]' == toString.call(name)) {\n    return this.removeMatching(name);\n  }\n\n  this.list.remove(name);\n  return this;\n};\n\n/**\n * Remove all classes matching `re`.\n *\n * @param {RegExp} re\n * @return {ClassList}\n * @api private\n */\n\nClassList.prototype.removeMatching = function(re) {\n  const arr = this.array();\n  for (let i = 0; i < arr.length; i++) {\n    if (re.test(arr[i])) {\n      this.remove(arr[i]);\n    }\n  }\n  return this;\n};\n\n/**\n * Toggle class `name`, can force state via `force`.\n *\n * For browsers that support classList, but do not support `force` yet,\n * the mistake will be detected and corrected.\n *\n * @param {String} name\n * @param {Boolean} force\n * @return {ClassList}\n * @api public\n */\n\nClassList.prototype.toggle = function(name, force) {\n  if ('undefined' !== typeof force) {\n    if (force !== this.list.toggle(name, force)) {\n      this.list.toggle(name); // toggle again to correct\n    }\n  } else {\n    this.list.toggle(name);\n  }\n  return this;\n};\n\n/**\n * Return an array of classes.\n *\n * @return {Array}\n * @api public\n */\n\nClassList.prototype.array = function() {\n  return Array.from(this.list);\n};\n\n/**\n * Check if class `name` is present.\n *\n * @param {String} name\n * @return {ClassList}\n * @api public\n */\n\nClassList.prototype.has =\nClassList.prototype.contains = function(name) {\n  return this.list.contains(name);\n};\n\n/**\n * Clear utility\n */\n\n/**\n * Removes all children from the given element\n *\n * @param {Element} element\n *\n * @return {Element} the element (for chaining)\n */\nfunction clear(element) {\n  var child;\n\n  while ((child = element.firstChild)) {\n    element.removeChild(child);\n  }\n\n  return element;\n}\n\n/**\n * Closest\n *\n * @param {Element} el\n * @param {string} selector\n * @param {boolean} checkYourSelf (optional)\n */\nfunction closest(element, selector, checkYourSelf) {\n  var actualElement = checkYourSelf ? element : element.parentNode;\n\n  return actualElement && typeof actualElement.closest === 'function' && actualElement.closest(selector) || null;\n}\n\nvar componentEvent = {};\n\nvar bind$1, unbind$1, prefix;\n\nfunction detect () {\n  bind$1 = window.addEventListener ? 'addEventListener' : 'attachEvent';\n  unbind$1 = window.removeEventListener ? 'removeEventListener' : 'detachEvent';\n  prefix = bind$1 !== 'addEventListener' ? 'on' : '';\n}\n\n/**\n * Bind `el` event `type` to `fn`.\n *\n * @param {Element} el\n * @param {String} type\n * @param {Function} fn\n * @param {Boolean} capture\n * @return {Function}\n * @api public\n */\n\nvar bind_1 = componentEvent.bind = function(el, type, fn, capture){\n  if (!bind$1) detect();\n  el[bind$1](prefix + type, fn, capture || false);\n  return fn;\n};\n\n/**\n * Unbind `el` event `type`'s callback `fn`.\n *\n * @param {Element} el\n * @param {String} type\n * @param {Function} fn\n * @param {Boolean} capture\n * @return {Function}\n * @api public\n */\n\nvar unbind_1 = componentEvent.unbind = function(el, type, fn, capture){\n  if (!unbind$1) detect();\n  el[unbind$1](prefix + type, fn, capture || false);\n  return fn;\n};\n\nvar event = /*#__PURE__*/_mergeNamespaces({\n  __proto__: null,\n  bind: bind_1,\n  unbind: unbind_1,\n  'default': componentEvent\n}, [componentEvent]);\n\n/**\n * Module dependencies.\n */\n\n/**\n * Delegate event `type` to `selector`\n * and invoke `fn(e)`. A callback function\n * is returned which may be passed to `.unbind()`.\n *\n * @param {Element} el\n * @param {String} selector\n * @param {String} type\n * @param {Function} fn\n * @param {Boolean} capture\n * @return {Function}\n * @api public\n */\n\n// Some events don't bubble, so we want to bind to the capture phase instead\n// when delegating.\nvar forceCaptureEvents = [ 'focus', 'blur' ];\n\nfunction bind(el, selector, type, fn, capture) {\n  if (forceCaptureEvents.indexOf(type) !== -1) {\n    capture = true;\n  }\n\n  return event.bind(el, type, function(e) {\n    var target = e.target || e.srcElement;\n    e.delegateTarget = closest(target, selector, true);\n    if (e.delegateTarget) {\n      fn.call(el, e);\n    }\n  }, capture);\n}\n\n/**\n * Unbind event `type`'s callback `fn`.\n *\n * @param {Element} el\n * @param {String} type\n * @param {Function} fn\n * @param {Boolean} capture\n * @api public\n */\nfunction unbind(el, type, fn, capture) {\n  if (forceCaptureEvents.indexOf(type) !== -1) {\n    capture = true;\n  }\n\n  return event.unbind(el, type, fn, capture);\n}\n\nvar delegate = {\n  bind,\n  unbind\n};\n\n/**\n * Expose `parse`.\n */\n\nvar domify = parse;\n\n/**\n * Tests for browser support.\n */\n\nvar innerHTMLBug = false;\nvar bugTestDiv;\nif (typeof document !== 'undefined') {\n  bugTestDiv = document.createElement('div');\n  // Setup\n  bugTestDiv.innerHTML = '  <link/><table></table><a href=\"/a\">a</a><input type=\"checkbox\"/>';\n  // Make sure that link elements get serialized correctly by innerHTML\n  // This requires a wrapper element in IE\n  innerHTMLBug = !bugTestDiv.getElementsByTagName('link').length;\n  bugTestDiv = undefined;\n}\n\n/**\n * Wrap map from jquery.\n */\n\nvar map = {\n  legend: [1, '<fieldset>', '</fieldset>'],\n  tr: [2, '<table><tbody>', '</tbody></table>'],\n  col: [2, '<table><tbody></tbody><colgroup>', '</colgroup></table>'],\n  // for script/link/style tags to work in IE6-8, you have to wrap\n  // in a div with a non-whitespace character in front, ha!\n  _default: innerHTMLBug ? [1, 'X<div>', '</div>'] : [0, '', '']\n};\n\nmap.td =\nmap.th = [3, '<table><tbody><tr>', '</tr></tbody></table>'];\n\nmap.option =\nmap.optgroup = [1, '<select multiple=\"multiple\">', '</select>'];\n\nmap.thead =\nmap.tbody =\nmap.colgroup =\nmap.caption =\nmap.tfoot = [1, '<table>', '</table>'];\n\nmap.polyline =\nmap.ellipse =\nmap.polygon =\nmap.circle =\nmap.text =\nmap.line =\nmap.path =\nmap.rect =\nmap.g = [1, '<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\">','</svg>'];\n\n/**\n * Parse `html` and return a DOM Node instance, which could be a TextNode,\n * HTML DOM Node of some kind (<div> for example), or a DocumentFragment\n * instance, depending on the contents of the `html` string.\n *\n * @param {String} html - HTML string to \"domify\"\n * @param {Document} doc - The `document` instance to create the Node for\n * @return {DOMNode} the TextNode, DOM Node, or DocumentFragment instance\n * @api private\n */\n\nfunction parse(html, doc) {\n  if ('string' != typeof html) throw new TypeError('String expected');\n\n  // default to the global `document` object\n  if (!doc) doc = document;\n\n  // tag name\n  var m = /<([\\w:]+)/.exec(html);\n  if (!m) return doc.createTextNode(html);\n\n  html = html.replace(/^\\s+|\\s+$/g, ''); // Remove leading/trailing whitespace\n\n  var tag = m[1];\n\n  // body support\n  if (tag == 'body') {\n    var el = doc.createElement('html');\n    el.innerHTML = html;\n    return el.removeChild(el.lastChild);\n  }\n\n  // wrap map\n  var wrap = Object.prototype.hasOwnProperty.call(map, tag) ? map[tag] : map._default;\n  var depth = wrap[0];\n  var prefix = wrap[1];\n  var suffix = wrap[2];\n  var el = doc.createElement('div');\n  el.innerHTML = prefix + html + suffix;\n  while (depth--) el = el.lastChild;\n\n  // one element\n  if (el.firstChild == el.lastChild) {\n    return el.removeChild(el.firstChild);\n  }\n\n  // several elements\n  var fragment = doc.createDocumentFragment();\n  while (el.firstChild) {\n    fragment.appendChild(el.removeChild(el.firstChild));\n  }\n\n  return fragment;\n}\n\nvar domify$1 = domify;\n\n/**\n * @param { HTMLElement } element\n * @param { String } selector\n *\n * @return { boolean }\n */\nfunction matches(element, selector) {\n  return element && typeof element.matches === 'function' && element.matches(selector) || false;\n}\n\nfunction query(selector, el) {\n  el = el || document;\n\n  return el.querySelector(selector);\n}\n\nfunction all(selector, el) {\n  el = el || document;\n\n  return el.querySelectorAll(selector);\n}\n\nfunction remove(el) {\n  el.parentNode && el.parentNode.removeChild(el);\n}\n\n\n//# sourceMappingURL=index.esm.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vbm9kZV9tb2R1bGVzL2ZpbGUtZHJvcHMvbm9kZV9tb2R1bGVzL21pbi1kb20vZGlzdC9pbmRleC5lc20uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0IsU0FBUztBQUNUO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLG9CQUFvQjtBQUMvQjtBQUNBLFlBQVk7QUFDWjs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQjtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQSw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0EsV0FBVyxlQUFlO0FBQzFCLFlBQVksMEZBQTBGO0FBQ3RHO0FBQ0EsWUFBWSxHQUFHO0FBQ2Y7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFNBQVM7QUFDcEIsV0FBVyxXQUFXO0FBQ3RCO0FBQ0EsWUFBWSxTQUFTO0FBQ3JCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFNBQVM7QUFDcEIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsU0FBUztBQUNwQixZQUFZO0FBQ1o7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxTQUFTO0FBQ3BCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFlBQVk7QUFDWjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGVBQWU7QUFDMUIsWUFBWTtBQUNaO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixZQUFZO0FBQ1o7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esa0JBQWtCLGdCQUFnQjtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsU0FBUztBQUNwQixZQUFZO0FBQ1o7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEI7QUFDOUI7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixZQUFZO0FBQ1o7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxTQUFTO0FBQ3BCO0FBQ0EsWUFBWSxTQUFTO0FBQ3JCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFNBQVM7QUFDcEIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsU0FBUztBQUNwQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsU0FBUztBQUNwQixXQUFXLFFBQVE7QUFDbkIsV0FBVyxVQUFVO0FBQ3JCLFdBQVcsU0FBUztBQUNwQixZQUFZO0FBQ1o7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsU0FBUztBQUNwQixXQUFXLFFBQVE7QUFDbkIsV0FBVyxVQUFVO0FBQ3JCLFdBQVcsU0FBUztBQUNwQixZQUFZO0FBQ1o7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxTQUFTO0FBQ3BCLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsV0FBVyxVQUFVO0FBQ3JCLFdBQVcsU0FBUztBQUNwQixZQUFZO0FBQ1o7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsU0FBUztBQUNwQixXQUFXLFFBQVE7QUFDbkIsV0FBVyxVQUFVO0FBQ3JCLFdBQVcsU0FBUztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxVQUFVO0FBQ3JCLFlBQVksU0FBUztBQUNyQjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEseUNBQXlDOztBQUV6Qzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxZQUFZLGNBQWM7QUFDMUIsWUFBWSxTQUFTO0FBQ3JCO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUU4STtBQUM5SSIsInNvdXJjZXMiOlsid2VicGFjazovL2NhbXVuZGEtbW9kZWxlci1jbGllbnQvLi4vbm9kZV9tb2R1bGVzL2ZpbGUtZHJvcHMvbm9kZV9tb2R1bGVzL21pbi1kb20vZGlzdC9pbmRleC5lc20uanM/MjE5ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBfbWVyZ2VOYW1lc3BhY2VzKG4sIG0pIHtcbiAgbS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgZSAmJiB0eXBlb2YgZSAhPT0gJ3N0cmluZycgJiYgIUFycmF5LmlzQXJyYXkoZSkgJiYgT2JqZWN0LmtleXMoZSkuZm9yRWFjaChmdW5jdGlvbiAoaykge1xuICAgICAgaWYgKGsgIT09ICdkZWZhdWx0JyAmJiAhKGsgaW4gbikpIHtcbiAgICAgICAgdmFyIGQgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsIGspO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobiwgaywgZC5nZXQgPyBkIDoge1xuICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBlW2tdOyB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbiAgcmV0dXJuIE9iamVjdC5mcmVlemUobik7XG59XG5cbi8qKlxuICogRmxhdHRlbiBhcnJheSwgb25lIGxldmVsIGRlZXAuXG4gKlxuICogQHRlbXBsYXRlIFRcbiAqXG4gKiBAcGFyYW0ge1RbXVtdIHwgVFtdIHwgbnVsbH0gW2Fycl1cbiAqXG4gKiBAcmV0dXJuIHtUW119XG4gKi9cblxuY29uc3QgbmF0aXZlVG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuY29uc3QgbmF0aXZlSGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG5mdW5jdGlvbiBpc1VuZGVmaW5lZChvYmopIHtcbiAgcmV0dXJuIG9iaiA9PT0gdW5kZWZpbmVkO1xufVxuXG5mdW5jdGlvbiBpc0FycmF5KG9iaikge1xuICByZXR1cm4gbmF0aXZlVG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCBBcnJheV0nO1xufVxuXG4vKipcbiAqIFJldHVybiB0cnVlLCBpZiB0YXJnZXQgb3ducyBhIHByb3BlcnR5IHdpdGggdGhlIGdpdmVuIGtleS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdGFyZ2V0XG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaGFzKHRhcmdldCwga2V5KSB7XG4gIHJldHVybiBuYXRpdmVIYXNPd25Qcm9wZXJ0eS5jYWxsKHRhcmdldCwga2V5KTtcbn1cblxuXG4vKipcbiAqIEl0ZXJhdGUgb3ZlciBjb2xsZWN0aW9uOyByZXR1cm5pbmcgc29tZXRoaW5nXG4gKiAobm9uLXVuZGVmaW5lZCkgd2lsbCBzdG9wIGl0ZXJhdGlvbi5cbiAqXG4gKiBAdGVtcGxhdGUgVFxuICogQHBhcmFtIHtDb2xsZWN0aW9uPFQ+fSBjb2xsZWN0aW9uXG4gKiBAcGFyYW0geyAoKGl0ZW06IFQsIGlkeDogbnVtYmVyKSA9PiAoYm9vbGVhbnx2b2lkKSkgfCAoKGl0ZW06IFQsIGtleTogc3RyaW5nKSA9PiAoYm9vbGVhbnx2b2lkKSkgfSBpdGVyYXRvclxuICpcbiAqIEByZXR1cm4ge1R9IHJldHVybiByZXN1bHQgdGhhdCBzdG9wcGVkIHRoZSBpdGVyYXRpb25cbiAqL1xuZnVuY3Rpb24gZm9yRWFjaChjb2xsZWN0aW9uLCBpdGVyYXRvcikge1xuXG4gIGxldCB2YWwsXG4gICAgICByZXN1bHQ7XG5cbiAgaWYgKGlzVW5kZWZpbmVkKGNvbGxlY3Rpb24pKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgY29udmVydEtleSA9IGlzQXJyYXkoY29sbGVjdGlvbikgPyB0b051bSA6IGlkZW50aXR5O1xuXG4gIGZvciAobGV0IGtleSBpbiBjb2xsZWN0aW9uKSB7XG5cbiAgICBpZiAoaGFzKGNvbGxlY3Rpb24sIGtleSkpIHtcbiAgICAgIHZhbCA9IGNvbGxlY3Rpb25ba2V5XTtcblxuICAgICAgcmVzdWx0ID0gaXRlcmF0b3IodmFsLCBjb252ZXJ0S2V5KGtleSkpO1xuXG4gICAgICBpZiAocmVzdWx0ID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5cbmZ1bmN0aW9uIGlkZW50aXR5KGFyZykge1xuICByZXR1cm4gYXJnO1xufVxuXG5mdW5jdGlvbiB0b051bShhcmcpIHtcbiAgcmV0dXJuIE51bWJlcihhcmcpO1xufVxuXG4vKipcbiAqIEFzc2lnbnMgc3R5bGUgYXR0cmlidXRlcyBpbiBhIHN0eWxlLXNyYyBjb21wbGlhbnQgd2F5LlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudFxuICogQHBhcmFtIHsuLi5PYmplY3R9IHN0eWxlU291cmNlc1xuICpcbiAqIEByZXR1cm4ge0VsZW1lbnR9IHRoZSBlbGVtZW50XG4gKi9cbmZ1bmN0aW9uIGFzc2lnbihlbGVtZW50LCAuLi5zdHlsZVNvdXJjZXMpIHtcbiAgY29uc3QgdGFyZ2V0ID0gZWxlbWVudC5zdHlsZTtcblxuICBmb3JFYWNoKHN0eWxlU291cmNlcywgZnVuY3Rpb24oc3R5bGUpIHtcbiAgICBpZiAoIXN0eWxlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZm9yRWFjaChzdHlsZSwgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAgdGFyZ2V0W2tleV0gPSB2YWx1ZTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgcmV0dXJuIGVsZW1lbnQ7XG59XG5cbi8qKlxuICogU2V0IGF0dHJpYnV0ZSBgbmFtZWAgdG8gYHZhbGAsIG9yIGdldCBhdHRyIGBuYW1lYC5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICogQHBhcmFtIHtTdHJpbmd9IFt2YWxdXG4gKiBAYXBpIHB1YmxpY1xuICovXG5mdW5jdGlvbiBhdHRyKGVsLCBuYW1lLCB2YWwpIHtcblxuICAvLyBnZXRcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMikge1xuICAgIHJldHVybiBlbC5nZXRBdHRyaWJ1dGUobmFtZSk7XG4gIH1cblxuICAvLyByZW1vdmVcbiAgaWYgKHZhbCA9PT0gbnVsbCkge1xuICAgIHJldHVybiBlbC5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7XG4gIH1cblxuICAvLyBzZXRcbiAgZWwuc2V0QXR0cmlidXRlKG5hbWUsIHZhbCk7XG5cbiAgcmV0dXJuIGVsO1xufVxuXG4vKipcbiAqIFRha2VuIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2NvbXBvbmVudC9jbGFzc2VzXG4gKlxuICogV2l0aG91dCB0aGUgY29tcG9uZW50IGJpdHMuXG4gKi9cblxuLyoqXG4gKiB0b1N0cmluZyByZWZlcmVuY2UuXG4gKi9cblxuY29uc3QgdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuXG4vKipcbiAqIFdyYXAgYGVsYCBpbiBhIGBDbGFzc0xpc3RgLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEByZXR1cm4ge0NsYXNzTGlzdH1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZnVuY3Rpb24gY2xhc3NlcyhlbCkge1xuICByZXR1cm4gbmV3IENsYXNzTGlzdChlbCk7XG59XG5cbi8qKlxuICogSW5pdGlhbGl6ZSBhIG5ldyBDbGFzc0xpc3QgZm9yIGBlbGAuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gQ2xhc3NMaXN0KGVsKSB7XG4gIGlmICghZWwgfHwgIWVsLm5vZGVUeXBlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdBIERPTSBlbGVtZW50IHJlZmVyZW5jZSBpcyByZXF1aXJlZCcpO1xuICB9XG4gIHRoaXMuZWwgPSBlbDtcbiAgdGhpcy5saXN0ID0gZWwuY2xhc3NMaXN0O1xufVxuXG4vKipcbiAqIEFkZCBjbGFzcyBgbmFtZWAgaWYgbm90IGFscmVhZHkgcHJlc2VudC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICogQHJldHVybiB7Q2xhc3NMaXN0fVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5DbGFzc0xpc3QucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgdGhpcy5saXN0LmFkZChuYW1lKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFJlbW92ZSBjbGFzcyBgbmFtZWAgd2hlbiBwcmVzZW50LCBvclxuICogcGFzcyBhIHJlZ3VsYXIgZXhwcmVzc2lvbiB0byByZW1vdmVcbiAqIGFueSB3aGljaCBtYXRjaC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ3xSZWdFeHB9IG5hbWVcbiAqIEByZXR1cm4ge0NsYXNzTGlzdH1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuQ2xhc3NMaXN0LnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbihuYW1lKSB7XG4gIGlmICgnW29iamVjdCBSZWdFeHBdJyA9PSB0b1N0cmluZy5jYWxsKG5hbWUpKSB7XG4gICAgcmV0dXJuIHRoaXMucmVtb3ZlTWF0Y2hpbmcobmFtZSk7XG4gIH1cblxuICB0aGlzLmxpc3QucmVtb3ZlKG5hbWUpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogUmVtb3ZlIGFsbCBjbGFzc2VzIG1hdGNoaW5nIGByZWAuXG4gKlxuICogQHBhcmFtIHtSZWdFeHB9IHJlXG4gKiBAcmV0dXJuIHtDbGFzc0xpc3R9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5DbGFzc0xpc3QucHJvdG90eXBlLnJlbW92ZU1hdGNoaW5nID0gZnVuY3Rpb24ocmUpIHtcbiAgY29uc3QgYXJyID0gdGhpcy5hcnJheSgpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuICAgIGlmIChyZS50ZXN0KGFycltpXSkpIHtcbiAgICAgIHRoaXMucmVtb3ZlKGFycltpXSk7XG4gICAgfVxuICB9XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBUb2dnbGUgY2xhc3MgYG5hbWVgLCBjYW4gZm9yY2Ugc3RhdGUgdmlhIGBmb3JjZWAuXG4gKlxuICogRm9yIGJyb3dzZXJzIHRoYXQgc3VwcG9ydCBjbGFzc0xpc3QsIGJ1dCBkbyBub3Qgc3VwcG9ydCBgZm9yY2VgIHlldCxcbiAqIHRoZSBtaXN0YWtlIHdpbGwgYmUgZGV0ZWN0ZWQgYW5kIGNvcnJlY3RlZC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICogQHBhcmFtIHtCb29sZWFufSBmb3JjZVxuICogQHJldHVybiB7Q2xhc3NMaXN0fVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5DbGFzc0xpc3QucHJvdG90eXBlLnRvZ2dsZSA9IGZ1bmN0aW9uKG5hbWUsIGZvcmNlKSB7XG4gIGlmICgndW5kZWZpbmVkJyAhPT0gdHlwZW9mIGZvcmNlKSB7XG4gICAgaWYgKGZvcmNlICE9PSB0aGlzLmxpc3QudG9nZ2xlKG5hbWUsIGZvcmNlKSkge1xuICAgICAgdGhpcy5saXN0LnRvZ2dsZShuYW1lKTsgLy8gdG9nZ2xlIGFnYWluIHRvIGNvcnJlY3RcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5saXN0LnRvZ2dsZShuYW1lKTtcbiAgfVxuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogUmV0dXJuIGFuIGFycmF5IG9mIGNsYXNzZXMuXG4gKlxuICogQHJldHVybiB7QXJyYXl9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbkNsYXNzTGlzdC5wcm90b3R5cGUuYXJyYXkgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5saXN0KTtcbn07XG5cbi8qKlxuICogQ2hlY2sgaWYgY2xhc3MgYG5hbWVgIGlzIHByZXNlbnQuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAqIEByZXR1cm4ge0NsYXNzTGlzdH1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuQ2xhc3NMaXN0LnByb3RvdHlwZS5oYXMgPVxuQ2xhc3NMaXN0LnByb3RvdHlwZS5jb250YWlucyA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgcmV0dXJuIHRoaXMubGlzdC5jb250YWlucyhuYW1lKTtcbn07XG5cbi8qKlxuICogQ2xlYXIgdXRpbGl0eVxuICovXG5cbi8qKlxuICogUmVtb3ZlcyBhbGwgY2hpbGRyZW4gZnJvbSB0aGUgZ2l2ZW4gZWxlbWVudFxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudFxuICpcbiAqIEByZXR1cm4ge0VsZW1lbnR9IHRoZSBlbGVtZW50IChmb3IgY2hhaW5pbmcpXG4gKi9cbmZ1bmN0aW9uIGNsZWFyKGVsZW1lbnQpIHtcbiAgdmFyIGNoaWxkO1xuXG4gIHdoaWxlICgoY2hpbGQgPSBlbGVtZW50LmZpcnN0Q2hpbGQpKSB7XG4gICAgZWxlbWVudC5yZW1vdmVDaGlsZChjaGlsZCk7XG4gIH1cblxuICByZXR1cm4gZWxlbWVudDtcbn1cblxuLyoqXG4gKiBDbG9zZXN0XG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtzdHJpbmd9IHNlbGVjdG9yXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGNoZWNrWW91clNlbGYgKG9wdGlvbmFsKVxuICovXG5mdW5jdGlvbiBjbG9zZXN0KGVsZW1lbnQsIHNlbGVjdG9yLCBjaGVja1lvdXJTZWxmKSB7XG4gIHZhciBhY3R1YWxFbGVtZW50ID0gY2hlY2tZb3VyU2VsZiA/IGVsZW1lbnQgOiBlbGVtZW50LnBhcmVudE5vZGU7XG5cbiAgcmV0dXJuIGFjdHVhbEVsZW1lbnQgJiYgdHlwZW9mIGFjdHVhbEVsZW1lbnQuY2xvc2VzdCA9PT0gJ2Z1bmN0aW9uJyAmJiBhY3R1YWxFbGVtZW50LmNsb3Nlc3Qoc2VsZWN0b3IpIHx8IG51bGw7XG59XG5cbnZhciBjb21wb25lbnRFdmVudCA9IHt9O1xuXG52YXIgYmluZCQxLCB1bmJpbmQkMSwgcHJlZml4O1xuXG5mdW5jdGlvbiBkZXRlY3QgKCkge1xuICBiaW5kJDEgPSB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciA/ICdhZGRFdmVudExpc3RlbmVyJyA6ICdhdHRhY2hFdmVudCc7XG4gIHVuYmluZCQxID0gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIgPyAncmVtb3ZlRXZlbnRMaXN0ZW5lcicgOiAnZGV0YWNoRXZlbnQnO1xuICBwcmVmaXggPSBiaW5kJDEgIT09ICdhZGRFdmVudExpc3RlbmVyJyA/ICdvbicgOiAnJztcbn1cblxuLyoqXG4gKiBCaW5kIGBlbGAgZXZlbnQgYHR5cGVgIHRvIGBmbmAuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGNhcHR1cmVcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG52YXIgYmluZF8xID0gY29tcG9uZW50RXZlbnQuYmluZCA9IGZ1bmN0aW9uKGVsLCB0eXBlLCBmbiwgY2FwdHVyZSl7XG4gIGlmICghYmluZCQxKSBkZXRlY3QoKTtcbiAgZWxbYmluZCQxXShwcmVmaXggKyB0eXBlLCBmbiwgY2FwdHVyZSB8fCBmYWxzZSk7XG4gIHJldHVybiBmbjtcbn07XG5cbi8qKlxuICogVW5iaW5kIGBlbGAgZXZlbnQgYHR5cGVgJ3MgY2FsbGJhY2sgYGZuYC5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gY2FwdHVyZVxuICogQHJldHVybiB7RnVuY3Rpb259XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbnZhciB1bmJpbmRfMSA9IGNvbXBvbmVudEV2ZW50LnVuYmluZCA9IGZ1bmN0aW9uKGVsLCB0eXBlLCBmbiwgY2FwdHVyZSl7XG4gIGlmICghdW5iaW5kJDEpIGRldGVjdCgpO1xuICBlbFt1bmJpbmQkMV0ocHJlZml4ICsgdHlwZSwgZm4sIGNhcHR1cmUgfHwgZmFsc2UpO1xuICByZXR1cm4gZm47XG59O1xuXG52YXIgZXZlbnQgPSAvKiNfX1BVUkVfXyovX21lcmdlTmFtZXNwYWNlcyh7XG4gIF9fcHJvdG9fXzogbnVsbCxcbiAgYmluZDogYmluZF8xLFxuICB1bmJpbmQ6IHVuYmluZF8xLFxuICAnZGVmYXVsdCc6IGNvbXBvbmVudEV2ZW50XG59LCBbY29tcG9uZW50RXZlbnRdKTtcblxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbi8qKlxuICogRGVsZWdhdGUgZXZlbnQgYHR5cGVgIHRvIGBzZWxlY3RvcmBcbiAqIGFuZCBpbnZva2UgYGZuKGUpYC4gQSBjYWxsYmFjayBmdW5jdGlvblxuICogaXMgcmV0dXJuZWQgd2hpY2ggbWF5IGJlIHBhc3NlZCB0byBgLnVuYmluZCgpYC5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge1N0cmluZ30gc2VsZWN0b3JcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICogQHBhcmFtIHtCb29sZWFufSBjYXB0dXJlXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuLy8gU29tZSBldmVudHMgZG9uJ3QgYnViYmxlLCBzbyB3ZSB3YW50IHRvIGJpbmQgdG8gdGhlIGNhcHR1cmUgcGhhc2UgaW5zdGVhZFxuLy8gd2hlbiBkZWxlZ2F0aW5nLlxudmFyIGZvcmNlQ2FwdHVyZUV2ZW50cyA9IFsgJ2ZvY3VzJywgJ2JsdXInIF07XG5cbmZ1bmN0aW9uIGJpbmQoZWwsIHNlbGVjdG9yLCB0eXBlLCBmbiwgY2FwdHVyZSkge1xuICBpZiAoZm9yY2VDYXB0dXJlRXZlbnRzLmluZGV4T2YodHlwZSkgIT09IC0xKSB7XG4gICAgY2FwdHVyZSA9IHRydWU7XG4gIH1cblxuICByZXR1cm4gZXZlbnQuYmluZChlbCwgdHlwZSwgZnVuY3Rpb24oZSkge1xuICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldCB8fCBlLnNyY0VsZW1lbnQ7XG4gICAgZS5kZWxlZ2F0ZVRhcmdldCA9IGNsb3Nlc3QodGFyZ2V0LCBzZWxlY3RvciwgdHJ1ZSk7XG4gICAgaWYgKGUuZGVsZWdhdGVUYXJnZXQpIHtcbiAgICAgIGZuLmNhbGwoZWwsIGUpO1xuICAgIH1cbiAgfSwgY2FwdHVyZSk7XG59XG5cbi8qKlxuICogVW5iaW5kIGV2ZW50IGB0eXBlYCdzIGNhbGxiYWNrIGBmbmAuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGNhcHR1cmVcbiAqIEBhcGkgcHVibGljXG4gKi9cbmZ1bmN0aW9uIHVuYmluZChlbCwgdHlwZSwgZm4sIGNhcHR1cmUpIHtcbiAgaWYgKGZvcmNlQ2FwdHVyZUV2ZW50cy5pbmRleE9mKHR5cGUpICE9PSAtMSkge1xuICAgIGNhcHR1cmUgPSB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIGV2ZW50LnVuYmluZChlbCwgdHlwZSwgZm4sIGNhcHR1cmUpO1xufVxuXG52YXIgZGVsZWdhdGUgPSB7XG4gIGJpbmQsXG4gIHVuYmluZFxufTtcblxuLyoqXG4gKiBFeHBvc2UgYHBhcnNlYC5cbiAqL1xuXG52YXIgZG9taWZ5ID0gcGFyc2U7XG5cbi8qKlxuICogVGVzdHMgZm9yIGJyb3dzZXIgc3VwcG9ydC5cbiAqL1xuXG52YXIgaW5uZXJIVE1MQnVnID0gZmFsc2U7XG52YXIgYnVnVGVzdERpdjtcbmlmICh0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnKSB7XG4gIGJ1Z1Rlc3REaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgLy8gU2V0dXBcbiAgYnVnVGVzdERpdi5pbm5lckhUTUwgPSAnICA8bGluay8+PHRhYmxlPjwvdGFibGU+PGEgaHJlZj1cIi9hXCI+YTwvYT48aW5wdXQgdHlwZT1cImNoZWNrYm94XCIvPic7XG4gIC8vIE1ha2Ugc3VyZSB0aGF0IGxpbmsgZWxlbWVudHMgZ2V0IHNlcmlhbGl6ZWQgY29ycmVjdGx5IGJ5IGlubmVySFRNTFxuICAvLyBUaGlzIHJlcXVpcmVzIGEgd3JhcHBlciBlbGVtZW50IGluIElFXG4gIGlubmVySFRNTEJ1ZyA9ICFidWdUZXN0RGl2LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdsaW5rJykubGVuZ3RoO1xuICBidWdUZXN0RGl2ID0gdW5kZWZpbmVkO1xufVxuXG4vKipcbiAqIFdyYXAgbWFwIGZyb20ganF1ZXJ5LlxuICovXG5cbnZhciBtYXAgPSB7XG4gIGxlZ2VuZDogWzEsICc8ZmllbGRzZXQ+JywgJzwvZmllbGRzZXQ+J10sXG4gIHRyOiBbMiwgJzx0YWJsZT48dGJvZHk+JywgJzwvdGJvZHk+PC90YWJsZT4nXSxcbiAgY29sOiBbMiwgJzx0YWJsZT48dGJvZHk+PC90Ym9keT48Y29sZ3JvdXA+JywgJzwvY29sZ3JvdXA+PC90YWJsZT4nXSxcbiAgLy8gZm9yIHNjcmlwdC9saW5rL3N0eWxlIHRhZ3MgdG8gd29yayBpbiBJRTYtOCwgeW91IGhhdmUgdG8gd3JhcFxuICAvLyBpbiBhIGRpdiB3aXRoIGEgbm9uLXdoaXRlc3BhY2UgY2hhcmFjdGVyIGluIGZyb250LCBoYSFcbiAgX2RlZmF1bHQ6IGlubmVySFRNTEJ1ZyA/IFsxLCAnWDxkaXY+JywgJzwvZGl2PiddIDogWzAsICcnLCAnJ11cbn07XG5cbm1hcC50ZCA9XG5tYXAudGggPSBbMywgJzx0YWJsZT48dGJvZHk+PHRyPicsICc8L3RyPjwvdGJvZHk+PC90YWJsZT4nXTtcblxubWFwLm9wdGlvbiA9XG5tYXAub3B0Z3JvdXAgPSBbMSwgJzxzZWxlY3QgbXVsdGlwbGU9XCJtdWx0aXBsZVwiPicsICc8L3NlbGVjdD4nXTtcblxubWFwLnRoZWFkID1cbm1hcC50Ym9keSA9XG5tYXAuY29sZ3JvdXAgPVxubWFwLmNhcHRpb24gPVxubWFwLnRmb290ID0gWzEsICc8dGFibGU+JywgJzwvdGFibGU+J107XG5cbm1hcC5wb2x5bGluZSA9XG5tYXAuZWxsaXBzZSA9XG5tYXAucG9seWdvbiA9XG5tYXAuY2lyY2xlID1cbm1hcC50ZXh0ID1cbm1hcC5saW5lID1cbm1hcC5wYXRoID1cbm1hcC5yZWN0ID1cbm1hcC5nID0gWzEsICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2ZXJzaW9uPVwiMS4xXCI+JywnPC9zdmc+J107XG5cbi8qKlxuICogUGFyc2UgYGh0bWxgIGFuZCByZXR1cm4gYSBET00gTm9kZSBpbnN0YW5jZSwgd2hpY2ggY291bGQgYmUgYSBUZXh0Tm9kZSxcbiAqIEhUTUwgRE9NIE5vZGUgb2Ygc29tZSBraW5kICg8ZGl2PiBmb3IgZXhhbXBsZSksIG9yIGEgRG9jdW1lbnRGcmFnbWVudFxuICogaW5zdGFuY2UsIGRlcGVuZGluZyBvbiB0aGUgY29udGVudHMgb2YgdGhlIGBodG1sYCBzdHJpbmcuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGh0bWwgLSBIVE1MIHN0cmluZyB0byBcImRvbWlmeVwiXG4gKiBAcGFyYW0ge0RvY3VtZW50fSBkb2MgLSBUaGUgYGRvY3VtZW50YCBpbnN0YW5jZSB0byBjcmVhdGUgdGhlIE5vZGUgZm9yXG4gKiBAcmV0dXJuIHtET01Ob2RlfSB0aGUgVGV4dE5vZGUsIERPTSBOb2RlLCBvciBEb2N1bWVudEZyYWdtZW50IGluc3RhbmNlXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBwYXJzZShodG1sLCBkb2MpIHtcbiAgaWYgKCdzdHJpbmcnICE9IHR5cGVvZiBodG1sKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdTdHJpbmcgZXhwZWN0ZWQnKTtcblxuICAvLyBkZWZhdWx0IHRvIHRoZSBnbG9iYWwgYGRvY3VtZW50YCBvYmplY3RcbiAgaWYgKCFkb2MpIGRvYyA9IGRvY3VtZW50O1xuXG4gIC8vIHRhZyBuYW1lXG4gIHZhciBtID0gLzwoW1xcdzpdKykvLmV4ZWMoaHRtbCk7XG4gIGlmICghbSkgcmV0dXJuIGRvYy5jcmVhdGVUZXh0Tm9kZShodG1sKTtcblxuICBodG1sID0gaHRtbC5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJyk7IC8vIFJlbW92ZSBsZWFkaW5nL3RyYWlsaW5nIHdoaXRlc3BhY2VcblxuICB2YXIgdGFnID0gbVsxXTtcblxuICAvLyBib2R5IHN1cHBvcnRcbiAgaWYgKHRhZyA9PSAnYm9keScpIHtcbiAgICB2YXIgZWwgPSBkb2MuY3JlYXRlRWxlbWVudCgnaHRtbCcpO1xuICAgIGVsLmlubmVySFRNTCA9IGh0bWw7XG4gICAgcmV0dXJuIGVsLnJlbW92ZUNoaWxkKGVsLmxhc3RDaGlsZCk7XG4gIH1cblxuICAvLyB3cmFwIG1hcFxuICB2YXIgd3JhcCA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtYXAsIHRhZykgPyBtYXBbdGFnXSA6IG1hcC5fZGVmYXVsdDtcbiAgdmFyIGRlcHRoID0gd3JhcFswXTtcbiAgdmFyIHByZWZpeCA9IHdyYXBbMV07XG4gIHZhciBzdWZmaXggPSB3cmFwWzJdO1xuICB2YXIgZWwgPSBkb2MuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGVsLmlubmVySFRNTCA9IHByZWZpeCArIGh0bWwgKyBzdWZmaXg7XG4gIHdoaWxlIChkZXB0aC0tKSBlbCA9IGVsLmxhc3RDaGlsZDtcblxuICAvLyBvbmUgZWxlbWVudFxuICBpZiAoZWwuZmlyc3RDaGlsZCA9PSBlbC5sYXN0Q2hpbGQpIHtcbiAgICByZXR1cm4gZWwucmVtb3ZlQ2hpbGQoZWwuZmlyc3RDaGlsZCk7XG4gIH1cblxuICAvLyBzZXZlcmFsIGVsZW1lbnRzXG4gIHZhciBmcmFnbWVudCA9IGRvYy5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gIHdoaWxlIChlbC5maXJzdENoaWxkKSB7XG4gICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoZWwucmVtb3ZlQ2hpbGQoZWwuZmlyc3RDaGlsZCkpO1xuICB9XG5cbiAgcmV0dXJuIGZyYWdtZW50O1xufVxuXG52YXIgZG9taWZ5JDEgPSBkb21pZnk7XG5cbi8qKlxuICogQHBhcmFtIHsgSFRNTEVsZW1lbnQgfSBlbGVtZW50XG4gKiBAcGFyYW0geyBTdHJpbmcgfSBzZWxlY3RvclxuICpcbiAqIEByZXR1cm4geyBib29sZWFuIH1cbiAqL1xuZnVuY3Rpb24gbWF0Y2hlcyhlbGVtZW50LCBzZWxlY3Rvcikge1xuICByZXR1cm4gZWxlbWVudCAmJiB0eXBlb2YgZWxlbWVudC5tYXRjaGVzID09PSAnZnVuY3Rpb24nICYmIGVsZW1lbnQubWF0Y2hlcyhzZWxlY3RvcikgfHwgZmFsc2U7XG59XG5cbmZ1bmN0aW9uIHF1ZXJ5KHNlbGVjdG9yLCBlbCkge1xuICBlbCA9IGVsIHx8IGRvY3VtZW50O1xuXG4gIHJldHVybiBlbC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbn1cblxuZnVuY3Rpb24gYWxsKHNlbGVjdG9yLCBlbCkge1xuICBlbCA9IGVsIHx8IGRvY3VtZW50O1xuXG4gIHJldHVybiBlbC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlKGVsKSB7XG4gIGVsLnBhcmVudE5vZGUgJiYgZWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbCk7XG59XG5cbmV4cG9ydCB7IGFzc2lnbiBhcyBhc3NpZ25TdHlsZSwgYXR0ciwgY2xhc3NlcywgY2xlYXIsIGNsb3Nlc3QsIGRlbGVnYXRlLCBkb21pZnkkMSBhcyBkb21pZnksIGV2ZW50LCBtYXRjaGVzLCBxdWVyeSwgYWxsIGFzIHF1ZXJ5QWxsLCByZW1vdmUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbS5qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../node_modules/file-drops/node_modules/min-dom/dist/index.esm.js\n\n}");

/***/ })

}]);