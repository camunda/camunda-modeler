(self.webpackChunkcamunda_modeler_client=self.webpackChunkcamunda_modeler_client||[]).push([[6238],{5418:(e,t,n)=>{"use strict";function i(e,t,n,i){this._contextPad=e,this._popupMenu=t,this._canvas=n,this._translate=i,e.registerProvider(this)}function a(e,t){var n=e.getPad(t).html.getBoundingClientRect();return{x:n.left,y:n.bottom+5}}n.d(t,{A:()=>c}),i.$inject=["contextPad","popupMenu","canvas","translate"],i.prototype.getContextPadEntries=function(e){return this._createPopupAction([e])},i.prototype.getMultiElementContextPadEntries=function(e){return this._createPopupAction(e)},i.prototype._createPopupAction=function(e){const t=this._translate,n=this._contextPad,i=this._popupMenu;return{"set-color":{group:"edit",className:"bpmn-icon-color",title:t("Set color"),html:'<div class="entry"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor">\n  <path d="m12.5 5.5.3-.4 3.6-3.6c.5-.5 1.3-.5 1.7 0l1 1c.5.4.5 1.2 0 1.7l-3.6 3.6-.4.2v.2c0 1.4.6 2 1 2.7v.6l-1.7 1.6c-.2.2-.4.2-.6 0L7.3 6.6a.4.4 0 0 1 0-.6l.3-.3.5-.5.8-.8c.2-.2.4-.1.6 0 .9.5 1.5 1.1 3 1.1zm-9.9 6 4.2-4.2 6.3 6.3-4.2 4.2c-.3.3-.9.3-1.2 0l-.8-.8-.9-.8-2.3-2.9" />\n</svg></div>',action:{click:(t,r)=>{var o={...a(n,e),cursor:{x:t.x,y:t.y}};i.open(e,"color-picker",o)}}}}};const r=[{label:"Default",fill:void 0,stroke:void 0},{label:"Blue",fill:"#BBDEFB",stroke:"#0D4372"},{label:"Orange",fill:"#FFE0B2",stroke:"#6B3C00"},{label:"Green",fill:"#C8E6C9",stroke:"#205022"},{label:"Red",fill:"#FFCDD2",stroke:"#831311"},{label:"Purple",fill:"#E1BEE7",stroke:"#5B176D"}];function o(e,t,n,i,a){this._popupMenu=n,this._modeling=i,this._translate=a,this._colors=e&&e.colors||r,this._defaultFillColor=t&&t.defaultFillColor||"white",this._defaultStrokeColor=t&&t.defaultStrokeColor||"rgb(34, 36, 42)",this._popupMenu.registerProvider("color-picker",this)}function s(e,t,n){return function(){e.setColor(t,n)}}o.$inject=["config.colorPicker","config.bpmnRenderer","popupMenu","modeling","translate"],o.prototype.getEntries=function(e){var t=this;return this._colors.map((function(n){var i='\n    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 25" height="100%" width="100%">\n      <rect rx="2" x="1" y="1" width="22" height="22" fill="var(--fill-color)" stroke="var(--stroke-color)" style="stroke-width:2"></rect>\n    </svg>\n  '.replace("var(--fill-color)",n.fill||t._defaultFillColor).replace("var(--stroke-color)",n.stroke||t._defaultStrokeColor);return{title:t._translate(n.label),id:n.label.toLowerCase()+"-color",imageHtml:i,action:s(t._modeling,e,n)}}))};const c={__init__:["colorContextPadProvider","colorPopupProvider"],colorContextPadProvider:["type",i],colorPopupProvider:["type",o]}},8493:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(62038);class a{constructor(e,t,n){this._eventBus=e,this._bpmnJSTracking=t,this._selection=n,this._eventBus.on("palette.trigger",this.trackTrigger.bind(this))}trackTrigger(e){const{entry:t,event:n}=e,{target:a}=n;if(!a)return;const r=a.closest("[data-action]"),o=r&&r.getAttribute("data-action");if(!o)return;const s=(0,i.v)(n);this._bpmnJSTracking.track({name:"palette.trigger",data:{entryId:o,entryGroup:t.group||"default",entryTitle:t.title,selection:this._selection.get(),triggerType:s}})}}a.$inject=["eventBus","bpmnJSTracking","selection"];const r={__init__:["paletteTracking"],paletteTracking:["type",a]}},30261:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(98142),a=n(70868);class r extends i.A{constructor(e,t,n){super(e),this.postExecuted("shape.delete",250,(function(e){const{collaborationRoot:i,shape:r}=e,o=t.getRootElement();if((0,a.is)(r,"bpmn:Participant")&&i&&!i.businessObject.get("participants").length&&(0,a.is)(o,"bpmn:Process")){const e=r.businessObject.get("processRef");if(!e)return;n.updateProperties(o,{isExecutable:e.get("isExecutable")})}}),!0)}}r.$inject=["eventBus","canvas","modeling"]},30939:(e,t,n)=>{"use strict";n.d(t,{A:()=>v});var i=n(70868),a=n(42720);class r{constructor(e,t,n,i,a,r){this._canvas=e,this._elementRegistry=n,this._eventBus=i,this._lintingAnnotations=a,this._selection=r,this._active=t&&t.active||!1,this._reports=[],i.on("selection.changed",(()=>this._update())),i.on("lintingAnnotations.click",(({report:e})=>this.showError(e)))}showError(e){const{id:t,propertiesPanel:n={}}=e,i=this._getSelectableElement(t);i&&(this._canvas.scrollToElement(i),i===this._canvas.getRootElement()?this._selection.select():this._selection.select(i));const{entryIds:a=[]}=n;setTimeout((()=>{this._eventBus.fire("propertiesPanel.showEntry",{id:a[Math.max(0,a.length-1)]})}))}setErrors(e){this._reports=e,this._update()}activate(){this._active=!0,this._update()}deactivate(){this._active=!1,this._update()}isActive(){return this._active}_update(){this._lintingAnnotations.setErrors(this.isActive()?this._reports:[]);const e=this._getSelectedElement();this._eventBus.fire("propertiesPanel.setErrors",{errors:(0,a.Yl)(this._reports,e)})}_getSelectableElement(e){let t=this._elementRegistry.get(e);return t||(t=this._elementRegistry.filter((t=>(0,i.is)(t,"bpmn:Participant")&&(0,i.Cf)(t).get("processRef").get("id")===e))[0]),t}_getSelectedElement(){const e=this._selection.get();if(!e||!e.length)return this._canvas.getRootElement();const t=e[0];return t.labelTarget?t.labelTarget:t}}r.$inject=["canvas","config.linting","elementRegistry","eventBus","lintingAnnotations","selection"];var o=n(91922),s=n(63788),c=n.n(s),p=n(29610),l=n(60616),m=n(11750);const u={error:p.qy`
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
  <path d="M16,2C8.3,2,2,8.3,2,16s6.3,14,14,14s14-6.3,14-14S23.7,2,16,2z M21.4,23L16,17.6L10.6,23L9,21.4l5.4-5.4L9,10.6L10.6,9
    l5.4,5.4L21.4,9l1.6,1.6L17.6,16l5.4,5.4L21.4,23z" fill="currentColor" />
</svg>
`,warn:p.qy`
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
<path d="M16,2C8.3,2,2,8.3,2,16s6.3,14,14,14s14-6.3,14-14C30,8.3,23.7,2,16,2z M14.9,8h2.2v11h-2.2V8z M16,25
  c-0.8,0-1.5-0.7-1.5-1.5S15.2,22,16,22c0.8,0,1.5,0.7,1.5,1.5S16.8,25,16,25z" fill="currentColor" />
</svg>
`,info:p.qy`
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
  <path d="M16,2A14,14,0,1,0,30,16,14,14,0,0,0,16,2Zm0,6a1.5,1.5,0,1,1-1.5,1.5A1.5,1.5,0,0,1,16,8Zm4,16.125H12v-2.25h2.875v-5.75H13v-2.25h4.125v8H20Z" fill="currentColor" />
</svg>
`};function d(e){const{onClick:t=()=>{},reports:n}=e,i=n.find((({category:e})=>"error"===e))?"error":n.find((({category:e})=>"warn"===e))?"warn":"info";return p.qy`
    <div
      class=${(0,m.A)("cl-icon",`cl-icon-${i}`)}
      onClick=${t}
      title="Click to show issue"
    >
      ${u[i]}
    </div>
  `}function h(e,t){return(0,l.render)(p.qy`<${d} ...${t} />`,e)}class f{constructor(e,t,n,i){this._canvas=e,this._elementRegistry=t,this._eventBus=n,this._overlays=i,this._reportsByElement={},this._overlayIds={}}setErrors(e){this._reportsByElement=(0,o.$z)(e.filter((e=>"rule-error"!==e.category)),"id"),this._update()}_update(e){e||(e=this._reportsByElement),this._overlays.remove({type:"linting"}),Object.entries(e).forEach((([e,t])=>{const n=this._elementRegistry.get(e);if(!n||n===this._canvas.getRootElement())return;const a=c()('\n        <div class="cl-overlay-root"></div>\n      ');h(a,{reports:t,onClick:()=>{this._eventBus.fire("lintingAnnotations.click",{report:t[0]})}});const r=function(e){return e.parent?{bottom:14,left:-6}:(0,i.is)(e,"bpmn:SubProcess")?{top:50,left:150}:{top:20,left:150}}(n),o=this._overlays.add(n,"linting",{position:r,html:a,scale:{min:.7}});this._overlayIds[e]=o}))}}f.$inject=["canvas","elementRegistry","eventBus","overlays"];const v={__init__:["linting","lintingAnnotations"],linting:["type",r],lintingAnnotations:["type",f]}},33428:(e,t,n)=>{"use strict";n.d(t,{Sl:()=>ge,t7:()=>ne,y:()=>ve});const i=Object.prototype.toString,a=Object.prototype.hasOwnProperty;function r(e){return void 0===e}function o(e){return"[object Array]"===i.call(e)}function s(e){return"[object Object]"===i.call(e)}function c(e){return"[object Number]"===i.call(e)}function p(e){const t=i.call(e);return"[object Function]"===t||"[object AsyncFunction]"===t||"[object GeneratorFunction]"===t||"[object AsyncGeneratorFunction]"===t||"[object Proxy]"===t}function l(e,t){return!(null==e)&&a.call(e,t)}function m(e,t){const n=function(e){return p(e)?e:t=>t===e}(t);let i;return u(e,(function(e,t){if(n(e,t))return i=e,!1})),i}function u(e,t){let n,i;if(r(e))return;const a=o(e)?h:d;for(let r in e)if(l(e,r)&&(n=e[r],i=t(n,a(r)),!1===i))return n}function d(e){return e}function h(e){return Number(e)}function f(e,...t){return Object.assign(e,...t)}const v={id:"events",name:"Events"},g={id:"tasks",name:"Tasks"},y={id:"data",name:"Data"},b={id:"participants",name:"Participants"},E={id:"subprocess",name:"Sub-processes"},x={id:"gateways",name:"Gateways"},w=[{label:"Start event",actionName:"none-start-event",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"Boundary event",actionName:"none-boundary-event",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:BoundaryEvent"}},{label:"End event",actionName:"none-end-event",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}}].map((e=>({...e,group:v}))),_=[{label:"Message start event",actionName:"message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer start event",actionName:"timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Conditional start event",actionName:"conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Signal start event",actionName:"signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}].map((e=>({...e,group:v}))),O=[{label:"Message start event (non-interrupting)",actionName:"replace-with-non-interrupting-message-start",className:"bpmn-icon-start-event-non-interrupting-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition",isInterrupting:!1}},{label:"Timer start event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-start",className:"bpmn-icon-start-event-non-interrupting-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition",isInterrupting:!1}},{label:"Conditional start event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-start",className:"bpmn-icon-start-event-non-interrupting-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",isInterrupting:!1}},{label:"Signal start event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-start",className:"bpmn-icon-start-event-non-interrupting-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition",isInterrupting:!1}},{label:"Escalation start event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-start",className:"bpmn-icon-start-event-non-interrupting-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",isInterrupting:!1}}].map((e=>({...e,group:v,rank:-1}))),S=[{label:"Message intermediate catch event",actionName:"message-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message intermediate throw event",actionName:"message-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-message",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer intermediate catch event",actionName:"timer-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation intermediate throw event",actionName:"escalation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-escalation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional intermediate catch event",actionName:"conditional-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Link intermediate catch event",actionName:"link-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-link",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Link intermediate throw event",actionName:"link-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-link",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Compensation intermediate throw event",actionName:"compensation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-compensation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal intermediate catch event",actionName:"signal-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal intermediate throw event",actionName:"signal-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-signal",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}].map((e=>({...e,group:v}))),A=[{label:"Message boundary event",actionName:"message-boundary",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer boundary event",actionName:"timer-boundary",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation boundary event",actionName:"escalation-boundary",className:"bpmn-icon-intermediate-event-catch-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional boundary event",actionName:"conditional-boundary",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Error boundary event",actionName:"error-boundary",className:"bpmn-icon-intermediate-event-catch-error",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel boundary event",actionName:"cancel-boundary",className:"bpmn-icon-intermediate-event-catch-cancel",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Signal boundary event",actionName:"signal-boundary",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Compensation boundary event",actionName:"compensation-boundary",className:"bpmn-icon-intermediate-event-catch-compensation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Message boundary event (non-interrupting)",actionName:"non-interrupting-message-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!1}},{label:"Timer boundary event (non-interrupting)",actionName:"non-interrupting-timer-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!1}},{label:"Escalation boundary event (non-interrupting)",actionName:"non-interrupting-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!1}},{label:"Conditional boundary event (non-interrupting)",actionName:"non-interrupting-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!1}},{label:"Signal boundary event (non-interrupting)",actionName:"non-interrupting-signal-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!1}}].map((e=>({...e,group:v}))),k=[{label:"Message end event",actionName:"message-end",className:"bpmn-icon-end-event-message",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Escalation end event",actionName:"escalation-end",className:"bpmn-icon-end-event-escalation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Error end event",actionName:"error-end",className:"bpmn-icon-end-event-error",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel end event",actionName:"cancel-end",className:"bpmn-icon-end-event-cancel",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Compensation end event",actionName:"compensation-end",className:"bpmn-icon-end-event-compensation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal end event",actionName:"signal-end",className:"bpmn-icon-end-event-signal",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Terminate end event",actionName:"terminate-end",className:"bpmn-icon-end-event-terminate",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:TerminateEventDefinition"}}].map((e=>({...e,group:v}))),C=[{label:"Exclusive gateway",actionName:"exclusive-gateway",className:"bpmn-icon-gateway-xor",target:{type:"bpmn:ExclusiveGateway"}},{label:"Parallel gateway",actionName:"parallel-gateway",className:"bpmn-icon-gateway-parallel",target:{type:"bpmn:ParallelGateway"}},{label:"Inclusive gateway",search:"or",actionName:"inclusive-gateway",className:"bpmn-icon-gateway-or",target:{type:"bpmn:InclusiveGateway"},rank:-1},{label:"Complex gateway",actionName:"complex-gateway",className:"bpmn-icon-gateway-complex",target:{type:"bpmn:ComplexGateway"},rank:-1},{label:"Event-based gateway",actionName:"event-based-gateway",className:"bpmn-icon-gateway-eventbased",target:{type:"bpmn:EventBasedGateway",instantiate:!1,eventGatewayType:"Exclusive"}}].map((e=>({...e,group:x}))),P=[{label:"Call activity",actionName:"call-activity",className:"bpmn-icon-call-activity",target:{type:"bpmn:CallActivity"}},{label:"Transaction",actionName:"transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Event sub-process",search:"subprocess",actionName:"event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}},{label:"Sub-process (collapsed)",search:"subprocess",actionName:"collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}},{label:"Sub-process (expanded)",search:"subprocess",actionName:"expanded-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Ad-hoc sub-process (collapsed)",search:"adhoc subprocess",actionName:"collapsed-ad-hoc-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:AdHocSubProcess",isExpanded:!1}},{label:"Ad-hoc sub-process (expanded)",search:"adhoc subprocess",actionName:"expanded-ad-hoc-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:AdHocSubProcess",isExpanded:!0}}].map((e=>({...e,group:E}))),T=[...C,...[{label:"Task",actionName:"task",className:"bpmn-icon-task",target:{type:"bpmn:Task"}},{label:"User task",actionName:"user-task",className:"bpmn-icon-user",target:{type:"bpmn:UserTask"}},{label:"Service task",actionName:"service-task",className:"bpmn-icon-service",target:{type:"bpmn:ServiceTask"}},{label:"Send task",actionName:"send-task",className:"bpmn-icon-send",target:{type:"bpmn:SendTask"},rank:-1},{label:"Receive task",actionName:"receive-task",className:"bpmn-icon-receive",target:{type:"bpmn:ReceiveTask"},rank:-1},{label:"Manual task",actionName:"manual-task",className:"bpmn-icon-manual",target:{type:"bpmn:ManualTask"},rank:-1},{label:"Business rule task",actionName:"rule-task",className:"bpmn-icon-business-rule",target:{type:"bpmn:BusinessRuleTask"}},{label:"Script task",actionName:"script-task",className:"bpmn-icon-script",target:{type:"bpmn:ScriptTask"}}].map((e=>({...e,group:g}))),...P,...w,..._,...O,...S,...k,...A,...[{label:"Data store reference",actionName:"data-store-reference",className:"bpmn-icon-data-store",target:{type:"bpmn:DataStoreReference"}},{label:"Data object reference",actionName:"data-object-reference",className:"bpmn-icon-data-object",target:{type:"bpmn:DataObjectReference"}}].map((e=>({...e,group:y}))),...[{label:"Expanded pool/participant",search:"Non-empty pool/participant",actionName:"expanded-pool",className:"bpmn-icon-participant",target:{type:"bpmn:Participant",isExpanded:!0}},{label:"Empty pool/participant",search:"Collapsed pool/participant",actionName:"collapsed-pool",className:"bpmn-icon-lane",target:{type:"bpmn:Participant",isExpanded:!1}}].map((e=>({...e,group:b})))];function R(e,t,n,i,a,r,o){this._elementFactory=e,this._popupMenu=t,this._create=n,this._autoPlace=i,this._rules=a,this._create=n,this._mouse=r,this._translate=o,this.register()}function D(e,t,n,i,a){this._contextPad=e,this._popupMenu=t,this._translate=n,this._canvas=i,this._rules=a,this.register()}function N(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}function $(e,t){var n=M(e);return n&&"function"==typeof n.$instanceOf&&n.$instanceOf(t)}function M(e){return e&&e.businessObject||e}function B(e){this._eventBus=e}function j(e){return function(t,n,i,a,r){(p(t)||c(t))&&(r=a,a=i,i=n,n=t,t=null),this.on(t,e,n,i,a,r)}}function F(e){B.call(this,e),this.init()}function Q(e){F.call(this,e)}R.$inject=["elementFactory","popupMenu","create","autoPlace","rules","mouse","translate"],R.prototype.register=function(){this._popupMenu.registerProvider("bpmn-append",this)},R.prototype.getPopupMenuEntries=function(e){const t=this._rules,n=this._translate,i={};return t.allowed("shape.append",{element:e})?(this._filterEntries(T).forEach((t=>{const{actionName:a,className:r,label:o,target:s,description:c,group:p,search:l,rank:m}=t;i[`append-${a}`]={label:o&&n(o),className:r,description:c,group:p&&{...p,name:n(p.name)},search:l,rank:m,action:this._createEntryAction(e,s)}})),i):[]},R.prototype._filterEntries=function(e){return e.filter((e=>{const t=e.target,{type:n,eventDefinitionType:i}=t;return!(["bpmn:StartEvent","bpmn:Participant"].includes(n)||"bpmn:BoundaryEvent"===n&&r(i))}))},R.prototype._createEntryAction=function(e,t){const n=this._elementFactory,i=this._autoPlace,a=this._create,r=this._mouse,o=i=>{const o=n.create("shape",t);return i instanceof KeyboardEvent&&(i=r.getLastMoveEvent()),a.start(i,o,{source:e})};return{click:this._canAutoPlaceElement(t)?()=>{const a=n.create("shape",t);i.append(e,a)}:o,dragstart:o}},R.prototype._canAutoPlaceElement=e=>{const{type:t}=e;return!("bpmn:BoundaryEvent"===t||"bpmn:SubProcess"===t&&e.triggeredByEvent||"bpmn:IntermediateCatchEvent"===t&&"bpmn:LinkEventDefinition"===e.eventDefinitionType)},D.$inject=["contextPad","popupMenu","translate","canvas","rules"],D.prototype.register=function(){this._contextPad.registerProvider(this)},D.prototype.getContextPadEntries=function(e){const t=this._popupMenu,n=this._translate,i=this._rules,a=this._getAppendMenuPosition.bind(this);if(i.allowed("shape.append",{element:e}))return{append:{group:"model",html:'<div class="entry"><svg width="22" height="22" viewBox="0 0 5.82 5.82" xmlns="http://www.w3.org/2000/svg" fill="currentColor">\n  <path d="M1.3 3.4c.3 0 .5-.2.5-.5s-.2-.4-.5-.4c-.2 0-.4.1-.4.4 0 .3.2.5.4.5zM3 3.4c.2 0 .4-.2.4-.5s-.2-.4-.4-.4c-.3 0-.5.1-.5.4 0 .3.2.5.5.5zM4.6 3.4c.2 0 .4-.2.4-.5s-.2-.4-.4-.4c-.3 0-.5.1-.5.4 0 .3.2.5.5.5z"/>\n</svg></div>',title:n("Append element"),action:{click:function(e,i){const r=f(a(i),{cursor:{x:e.x,y:e.y}});t.open(i,"bpmn-append",r,{title:n("Append element"),width:300,search:!0})}}}}},D.prototype._getAppendMenuPosition=function(e){const t=this._canvas.getContainer().querySelector(".djs-context-pad").getBoundingClientRect();return{x:t.right+5,y:t.top}},B.$inject=["eventBus"],B.prototype.on=function(e,t,n,i,a,r){if((p(t)||c(t))&&(r=a,a=i,i=n,n=t,t=null),p(n)&&(r=a,a=i,i=n,n=1e3),s(a)&&(r=a,a=!1),!p(i))throw new Error("handlerFn must be a function");o(e)||(e=[e]);var l=this._eventBus;u(e,(function(e){var o=["commandStack",e,t].filter((function(e){return e})).join(".");l.on(o,n,a?function(e,t){return function(n){return e.call(t||null,n.context,n.command,n)}}(i,r):i,r)}))},B.prototype.canExecute=j("canExecute"),B.prototype.preExecute=j("preExecute"),B.prototype.preExecuted=j("preExecuted"),B.prototype.execute=j("execute"),B.prototype.executed=j("executed"),B.prototype.postExecute=j("postExecute"),B.prototype.postExecuted=j("postExecuted"),B.prototype.revert=j("revert"),B.prototype.reverted=j("reverted"),F.$inject=["eventBus"],N(F,B),F.prototype.addRule=function(e,t,n){var i=this;"string"==typeof e&&(e=[e]),e.forEach((function(e){i.canExecute(e,t,(function(e,t,i){return n(e)}),!0)}))},F.prototype.init=function(){},N(Q,F),Q.$inject=["eventBus"],Q.prototype.init=function(){this.addRule("shape.append",(function(e){const t=e.element,n=M(t);return(!s(a=t)||!l(a,"labelTarget"))&&(i=t,!m(["bpmn:EndEvent","bpmn:Group","bpmn:TextAnnotation","bpmn:Lane","bpmn:Participant","bpmn:DataStoreReference","bpmn:DataObjectReference"],(function(e){return $(i,e)}))&&!t.waypoints&&(!$(t,"bpmn:IntermediateThrowEvent")||!function(e){return!!m(M(e).eventDefinitions||[],(function(e){return $(e,"bpmn:LinkEventDefinition")}))}(t))&&(!$(t,"bpmn:SubProcess")||!n.triggeredByEvent)&&void 0);var i,a}))};var I,L={__init__:["appendMenuProvider","appendContextPadProvider","appendRules"],appendMenuProvider:["type",R],appendContextPadProvider:["type",D],appendRules:["type",Q]};function z(e,t,n,i,a,r){this._elementFactory=e,this._popupMenu=t,this._create=n,this._autoPlace=i,this._mouse=a,this._translate=r,this.register()}function X(e,t,n,i,a){this._palette=e,this._translate=t,this._popupMenu=n,this._canvas=i,this._mouse=a,this.register()}z.$inject=["elementFactory","popupMenu","create","autoPlace","mouse","translate"],z.prototype.register=function(){this._popupMenu.registerProvider("bpmn-create",this)},z.prototype.getPopupMenuEntries=function(){const e={};return T.forEach((t=>{const{actionName:n,className:i,label:a,target:r,description:o,group:s,search:c,rank:p}=t,l=this._createEntryAction(r);e[`create-${n}`]={label:a&&this._translate(a),className:i,description:o,group:s&&{...s,name:this._translate(s.name)},search:c,rank:p,action:{click:l,dragstart:l}}})),e},z.prototype._createEntryAction=function(e){const t=this._create,n=this._mouse,i=this._popupMenu,a=this._elementFactory;let r;return o=>(i.close(),r="bpmn:Participant"===e.type?a.createParticipantShape(e):a.create("shape",e),o instanceof KeyboardEvent&&(o=n.getLastMoveEvent()),t.start(o,r))},"undefined"!=typeof document&&((I=document.createElement("div")).innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',I.getElementsByTagName("link").length,I=void 0),X.$inject=["palette","translate","popupMenu","canvas","mouse"],X.prototype.register=function(){this._palette.registerProvider(900,this)},X.prototype.getPaletteEntries=function(e){const t=this._translate,n=this._popupMenu,i=this._canvas,a=this._mouse;return{create:{group:"create",html:'<div class="entry"> <svg width="46" height="46" viewBox="-2 -2 9.82 9.82" xmlns="http://www.w3.org/2000/svg" fill="currentColor">\n  <path d="M1.3 3.4c.3 0 .5-.2.5-.5s-.2-.4-.5-.4c-.2 0-.4.1-.4.4 0 .3.2.5.4.5zM3 3.4c.2 0 .4-.2.4-.5s-.2-.4-.4-.4c-.3 0-.5.1-.5.4 0 .3.2.5.5.5zM4.6 3.4c.2 0 .4-.2.4-.5s-.2-.4-.4-.4c-.3 0-.5.1-.5.4 0 .3.2.5.5.5z"/>\n</svg></div>',title:t("Create element"),action:{click:function(e){const r=(e=>{if(e instanceof KeyboardEvent)return{x:(e=a.getLastMoveEvent()).x,y:e.y};const t=e&&e.target||(n=n||document).querySelector('.djs-palette [data-action="create"]');var n;const i=t.getBoundingClientRect();return t&&{x:i.left+i.width/2+35,y:i.top+i.height/2+10}})(e),o=i.getRootElement();n.open(o,"bpmn-create",r,{title:t("Create element"),width:300,search:!0})}}}}};var V={__init__:["createMenuProvider","createPaletteProvider"],createMenuProvider:["type",z],createPaletteProvider:["type",X]};function Y(e){this._injector=e,this.registerActions()}Y.$inject=["injector"],Y.prototype.registerActions=function(){const e=this._injector.get("editorActions",!1),t=this._injector.get("selection",!1),n=this._injector.get("contextPad",!1),i=this._injector.get("palette",!1),a=this._injector.get("popupMenu",!1),r={};t&&n&&i&&a&&i&&f(r,{appendElement:function(e){const r=t&&t.get();1!=r.length||a.isEmpty(r[0],"bpmn-append")?i.triggerEntry("create","click",e):n.triggerEntry("append","click",e)}}),i&&f(r,{createElement:function(e){i.triggerEntry("create","click",e)}}),e&&e.register(r)};var G={__depends__:[L,V],__init__:["createAppendEditorActions"],createAppendEditorActions:["type",Y]},W=["c","C"],q=["v","V"],H=["y","Y"],J=["z","Z"];function U(e){return!e.altKey&&(e.ctrlKey||e.metaKey)}function Z(e,t){return-1!==(e=o(e)?e:[e]).indexOf(t.key)||-1!==e.indexOf(t.code)}function K(e){return e.shiftKey}function ee(e,t){var n=this;e.on("editorActions.init",500,(function(e){var i=e.editorActions;n.registerBindings(t,i)}))}function te(e){this._injector=e,this._keyboard=this._injector.get("keyboard",!1),this._editorActions=this._injector.get("editorActions",!1),this._keyboard&&this._injector.invoke(ee,this)}ee.$inject=["eventBus","keyboard"],ee.prototype.registerBindings=function(e,t){function n(n,i){t.isRegistered(n)&&e.addListener(i)}n("undo",(function(e){if(U(n=e.keyEvent)&&!K(n)&&Z(J,n))return t.trigger("undo"),!0;var n})),n("redo",(function(e){if(U(n=e.keyEvent)&&(Z(H,n)||Z(J,n)&&K(n)))return t.trigger("redo"),!0;var n})),n("copy",(function(e){if(U(n=e.keyEvent)&&Z(W,n))return t.trigger("copy"),!0;var n})),n("paste",(function(e){if(U(n=e.keyEvent)&&Z(q,n))return t.trigger("paste"),!0;var n})),n("stepZoom",(function(e){var n=e.keyEvent;if(Z(["+","Add","="],n)&&U(n))return t.trigger("stepZoom",{value:1}),!0})),n("stepZoom",(function(e){var n=e.keyEvent;if(Z(["-","Subtract"],n)&&U(n))return t.trigger("stepZoom",{value:-1}),!0})),n("zoom",(function(e){var n=e.keyEvent;if(Z("0",n)&&U(n))return t.trigger("zoom",{value:1}),!0})),n("removeSelection",(function(e){if(Z(["Backspace","Delete","Del"],e.keyEvent))return t.trigger("removeSelection"),!0}))},N(te,ee),te.$inject=["injector"],te.prototype.registerBindings=function(){const e=this._keyboard,t=this._editorActions;function n(n,i){t&&t.isRegistered(n)&&e&&e.addListener(i)}ee.prototype.registerBindings.call(this,e,t),n("appendElement",(function(n){const i=n.keyEvent;if(!e||!e.hasModifier(i))return e&&e.isKey(["a","A"],i)?(t&&t.trigger("appendElement",i),!0):void 0})),n("createElement",(function(n){const i=n.keyEvent;if(!e||!e.hasModifier(i))return e&&e.isKey(["n","N"],i)?(t&&t.trigger("createElement",i),!0):void 0}))};var ne={__depends__:[L,V,G,{__depends__:[L,V],__init__:["createAppendKeyboardBindings"],createAppendKeyboardBindings:["type",te]}]};function ie(e,t,n,i,a,r,o){this._popupMenu=e,this._translate=t,this._elementTemplates=n,this._autoPlace=i,this._create=a,this._mouse=r,this._rules=o,this.register()}function ae(e){const{appliesTo:t=[],elementType:n={}}=e,i=n.value||t[0];return"bpmn:BoundaryEvent"!==i&&("bpmn:IntermediateCatchEvent"!==i||"bpmn:LinkEventDefinition"!==n.eventDefinition)}ie.$inject=["popupMenu","translate","elementTemplates","autoPlace","create","move","rules"],ie.prototype.register=function(){this._popupMenu.registerProvider("bpmn-append",this)},ie.prototype.getPopupMenuEntries=function(e){return t=>{if(!this._rules.allowed("shape.append",{element:e}))return[];const n=this._filterTemplates(this._elementTemplates.getLatest());return f(t,this.getTemplateEntries(e,n)),t}},ie.prototype.getTemplateEntries=function(e,t){const n={};return t.map((t=>{const{icon:i={},category:a,keywords:r=[]}=t,o=`append.template-${t.id}`,s={id:"templates",name:this._translate("Templates")};n[o]={label:t.name,description:t.description,documentationRef:t.documentationRef,search:r,imageUrl:i.contents,group:a||s,action:this._getEntryAction(e,t)}})),n},ie.prototype._filterTemplates=function(e){return e.filter((e=>{const{appliesTo:t,elementType:n}=e,i=n&&n.value||t[0];return!["bpmn:StartEvent","bpmn:Participant"].includes(i)&&"bpmn:SequenceFlow"!==i}))},ie.prototype._getEntryAction=function(e,t){const n=n=>{const i=this._elementTemplates.createElement(t);return n instanceof KeyboardEvent&&(n=this._mouse.getLastMoveEvent()),this._create.start(n,i,{source:e})};return{click:ae(t)?()=>{const n=this._elementTemplates.createElement(t);this._autoPlace.append(e,n)}:n,dragstart:n}};var re={__init__:["elementTemplatesAppendProvider"],elementTemplatesAppendProvider:["type",ie]};function oe(e,t,n,i,a){this._popupMenu=e,this._translate=t,this._elementTemplates=n,this._mouse=i,this._create=a,this.register()}oe.$inject=["popupMenu","translate","elementTemplates","mouse","create"],oe.prototype.register=function(){this._popupMenu.registerProvider("bpmn-create",this)},oe.prototype.getPopupMenuEntries=function(e){return t=>(f(t,this.getTemplateEntries(e)),t)},oe.prototype.getTemplateEntries=function(){const e=this._elementTemplates.getLatest(),t={};return e.map((e=>{const{icon:n={},category:i,keywords:a=[]}=e,r=`create.template-${e.id}`,o={id:"templates",name:this._translate("Templates")};t[r]={label:e.name,description:e.description,documentationRef:e.documentationRef,imageUrl:n.contents,group:i||o,search:a,action:{click:this._getEntryAction(e),dragstart:this._getEntryAction(e)}}})),t},oe.prototype._getEntryAction=function(e){const t=this._create,n=this._popupMenu,i=this._elementTemplates,a=this._mouse;return r=>{n.close();let o=i.createElement(e);return r instanceof KeyboardEvent&&(r=a.getLastMoveEvent()),t.start(r,o)}};var se={__init__:["elementTemplatesCreateProvider"],elementTemplatesCreateProvider:["type",oe]};function ce(e,t,n){this._popupMenu=e,this._translate=t,this._elementTemplates=n,this.register()}ce.$inject=["popupMenu","translate","elementTemplates"],ce.prototype.register=function(){this._popupMenu.registerProvider("bpmn-replace",this)},ce.prototype.getPopupMenuEntries=function(e){return t=>{let n=Object.entries(t);return n=[...n,...this.getTemplateEntries(e)],n.reduce(((e,[t,n])=>(e[t]=n,e)),{})}},ce.prototype.getTemplateEntries=function(e){return this._getMatchingTemplates(e).map((t=>{const{icon:n={},category:i,keywords:a=[]}=t,r=`replace.template-${t.id}`,o={id:"templates",name:this._translate("Templates")};return[r,{label:t.name,description:t.description,documentationRef:t.documentationRef,imageUrl:n.contents,search:a,group:i||o,action:()=>{this._elementTemplates.applyTemplate(e,t)}}]}))},ce.prototype._getMatchingTemplates=function(e){return this._elementTemplates.getLatest(e).filter((t=>!function(e,t){const n=M(e);return!!n&&n.get("zeebe:modelerTemplate")===t.id}(e,t)))};var pe={__init__:["elementTemplatesReplaceProvider"],elementTemplatesReplaceProvider:["type",ce]};var le=[{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Sub-process",actionName:"replace-with-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Ad-hoc sub-process",actionName:"replace-with-ad-hoc-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:AdHocSubProcess",isExpanded:!0}},{label:"Event sub-process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}}],me=le,ue=Object.freeze({__proto__:null,AD_HOC_SUBPROCESS_EXPANDED:[{label:"Sub-process",actionName:"replace-with-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Event sub-process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}},{label:"Ad-hoc sub-process (collapsed)",actionName:"replace-with-collapsed-ad-hoc-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:AdHocSubProcess",isExpanded:!1}}],BOUNDARY_EVENT:[{label:"Message boundary event",actionName:"replace-with-message-boundary",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!0}},{label:"Timer boundary event",actionName:"replace-with-timer-boundary",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!0}},{label:"Escalation boundary event",actionName:"replace-with-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!0}},{label:"Conditional boundary event",actionName:"replace-with-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!0}},{label:"Error boundary event",actionName:"replace-with-error-boundary",className:"bpmn-icon-intermediate-event-catch-error",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ErrorEventDefinition",cancelActivity:!0}},{label:"Cancel boundary event",actionName:"replace-with-cancel-boundary",className:"bpmn-icon-intermediate-event-catch-cancel",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CancelEventDefinition",cancelActivity:!0}},{label:"Signal boundary event",actionName:"replace-with-signal-boundary",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!0}},{label:"Compensation boundary event",actionName:"replace-with-compensation-boundary",className:"bpmn-icon-intermediate-event-catch-compensation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CompensateEventDefinition",cancelActivity:!0}},{label:"Message boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-message-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!1}},{label:"Timer boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!1}},{label:"Escalation boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!1}},{label:"Conditional boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!1}},{label:"Signal boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!1}}],DATA_OBJECT_REFERENCE:[{label:"Data store reference",actionName:"replace-with-data-store-reference",className:"bpmn-icon-data-store",target:{type:"bpmn:DataStoreReference"}}],DATA_STORE_REFERENCE:[{label:"Data object reference",actionName:"replace-with-data-object-reference",className:"bpmn-icon-data-object",target:{type:"bpmn:DataObjectReference"}}],END_EVENT:[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message end event",actionName:"replace-with-message-end",className:"bpmn-icon-end-event-message",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Escalation end event",actionName:"replace-with-escalation-end",className:"bpmn-icon-end-event-escalation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Error end event",actionName:"replace-with-error-end",className:"bpmn-icon-end-event-error",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel end event",actionName:"replace-with-cancel-end",className:"bpmn-icon-end-event-cancel",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Compensation end event",actionName:"replace-with-compensation-end",className:"bpmn-icon-end-event-compensation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal end event",actionName:"replace-with-signal-end",className:"bpmn-icon-end-event-signal",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Terminate end event",actionName:"replace-with-terminate-end",className:"bpmn-icon-end-event-terminate",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:TerminateEventDefinition"}}],EVENT_SUB_PROCESS:me,EVENT_SUB_PROCESS_START_EVENT:[{label:"Message start event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition",isInterrupting:!0}},{label:"Timer start event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition",isInterrupting:!0}},{label:"Conditional start event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",isInterrupting:!0}},{label:"Signal start event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition",isInterrupting:!0}},{label:"Error start event",actionName:"replace-with-error-start",className:"bpmn-icon-start-event-error",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ErrorEventDefinition",isInterrupting:!0}},{label:"Escalation start event",actionName:"replace-with-escalation-start",className:"bpmn-icon-start-event-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",isInterrupting:!0}},{label:"Compensation start event",actionName:"replace-with-compensation-start",className:"bpmn-icon-start-event-compensation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:CompensateEventDefinition",isInterrupting:!0}},{label:"Message start event (non-interrupting)",actionName:"replace-with-non-interrupting-message-start",className:"bpmn-icon-start-event-non-interrupting-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition",isInterrupting:!1}},{label:"Timer start event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-start",className:"bpmn-icon-start-event-non-interrupting-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition",isInterrupting:!1}},{label:"Conditional start event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-start",className:"bpmn-icon-start-event-non-interrupting-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",isInterrupting:!1}},{label:"Signal start event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-start",className:"bpmn-icon-start-event-non-interrupting-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition",isInterrupting:!1}},{label:"Escalation start event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-start",className:"bpmn-icon-start-event-non-interrupting-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",isInterrupting:!1}}],GATEWAY:[{label:"Exclusive gateway",actionName:"replace-with-exclusive-gateway",className:"bpmn-icon-gateway-xor",target:{type:"bpmn:ExclusiveGateway"}},{label:"Parallel gateway",actionName:"replace-with-parallel-gateway",className:"bpmn-icon-gateway-parallel",target:{type:"bpmn:ParallelGateway"}},{label:"Inclusive gateway",actionName:"replace-with-inclusive-gateway",className:"bpmn-icon-gateway-or",target:{type:"bpmn:InclusiveGateway"}},{label:"Complex gateway",actionName:"replace-with-complex-gateway",className:"bpmn-icon-gateway-complex",target:{type:"bpmn:ComplexGateway"}},{label:"Event-based gateway",actionName:"replace-with-event-based-gateway",className:"bpmn-icon-gateway-eventbased",target:{type:"bpmn:EventBasedGateway",instantiate:!1,eventGatewayType:"Exclusive"}}],INTERMEDIATE_EVENT:[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message intermediate catch event",actionName:"replace-with-message-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message intermediate throw event",actionName:"replace-with-message-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-message",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer intermediate catch event",actionName:"replace-with-timer-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation intermediate throw event",actionName:"replace-with-escalation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-escalation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional intermediate catch event",actionName:"replace-with-conditional-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Link intermediate catch event",actionName:"replace-with-link-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-link",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Link intermediate throw event",actionName:"replace-with-link-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-link",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Compensation intermediate throw event",actionName:"replace-with-compensation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-compensation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal intermediate catch event",actionName:"replace-with-signal-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal intermediate throw event",actionName:"replace-with-signal-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-signal",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],PARTICIPANT:[{label:"Expanded pool/participant",actionName:"replace-with-expanded-pool",className:"bpmn-icon-participant",target:{type:"bpmn:Participant",isExpanded:!0}},{label:function(e){var t="Empty pool/participant";return e.children&&e.children.length&&(t+=" (removes content)"),t},actionName:"replace-with-collapsed-pool",className:"bpmn-icon-lane",target:{type:"bpmn:Participant",isExpanded:!1}}],SEQUENCE_FLOW:[{label:"Sequence flow",actionName:"replace-with-sequence-flow",className:"bpmn-icon-connection"},{label:"Default flow",actionName:"replace-with-default-flow",className:"bpmn-icon-default-flow"},{label:"Conditional flow",actionName:"replace-with-conditional-flow",className:"bpmn-icon-conditional-flow"}],START_EVENT:[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message start event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer start event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Conditional start event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Signal start event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],START_EVENT_SUB_PROCESS:[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}}],SUBPROCESS_EXPANDED:[{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Event sub-process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}},{label:"Ad-hoc sub-process",actionName:"replace-with-ad-hoc-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:AdHocSubProcess",isExpanded:!0}},{label:"Sub-process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}}],TASK:[{label:"Task",actionName:"replace-with-task",className:"bpmn-icon-task",target:{type:"bpmn:Task"}},{label:"User task",actionName:"replace-with-user-task",className:"bpmn-icon-user",target:{type:"bpmn:UserTask"}},{label:"Service task",actionName:"replace-with-service-task",className:"bpmn-icon-service",target:{type:"bpmn:ServiceTask"}},{label:"Send task",actionName:"replace-with-send-task",className:"bpmn-icon-send",target:{type:"bpmn:SendTask"}},{label:"Receive task",actionName:"replace-with-receive-task",className:"bpmn-icon-receive",target:{type:"bpmn:ReceiveTask"}},{label:"Manual task",actionName:"replace-with-manual-task",className:"bpmn-icon-manual",target:{type:"bpmn:ManualTask"}},{label:"Business rule task",actionName:"replace-with-rule-task",className:"bpmn-icon-business-rule",target:{type:"bpmn:BusinessRuleTask"}},{label:"Script task",actionName:"replace-with-script-task",className:"bpmn-icon-script",target:{type:"bpmn:ScriptTask"}},{label:"Call activity",actionName:"replace-with-call-activity",className:"bpmn-icon-call-activity",target:{type:"bpmn:CallActivity"}},{label:"Sub-process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}},{label:"Sub-process (expanded)",actionName:"replace-with-expanded-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Ad-hoc sub-process (collapsed)",actionName:"replace-with-collapsed-ad-hoc-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:AdHocSubProcess",isExpanded:!1}},{label:"Ad-hoc sub-process (expanded)",actionName:"replace-with-ad-hoc-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:AdHocSubProcess",isExpanded:!0}}],TRANSACTION:le,TYPED_EVENT:{"bpmn:MessageEventDefinition":[{label:"Message start event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message intermediate catch event",actionName:"replace-with-message-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message intermediate throw event",actionName:"replace-with-message-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-message",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message end event",actionName:"replace-with-message-end",className:"bpmn-icon-end-event-message",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}}],"bpmn:TimerEventDefinition":[{label:"Timer start event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Timer intermediate catch event",actionName:"replace-with-timer-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}}],"bpmn:ConditionalEventDefinition":[{label:"Conditional start event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Conditional intermediate catch event",actionName:"replace-with-conditional-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}}],"bpmn:SignalEventDefinition":[{label:"Signal start event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal intermediate catch event",actionName:"replace-with-signal-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal intermediate throw event",actionName:"replace-with-signal-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-signal",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal end event",actionName:"replace-with-signal-end",className:"bpmn-icon-end-event-signal",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],"bpmn:ErrorEventDefinition":[{label:"Error start event",actionName:"replace-with-error-start",className:"bpmn-icon-start-event-error",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Error end event",actionName:"replace-with-error-end",className:"bpmn-icon-end-event-error",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}}],"bpmn:EscalationEventDefinition":[{label:"Escalation start event",actionName:"replace-with-escalation-start",className:"bpmn-icon-start-event-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Escalation intermediate throw event",actionName:"replace-with-escalation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-escalation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Escalation end event",actionName:"replace-with-escalation-end",className:"bpmn-icon-end-event-escalation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}}],"bpmn:CompensateEventDefinition":[{label:"Compensation start event",actionName:"replace-with-compensation-start",className:"bpmn-icon-start-event-compensation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Compensation intermediate throw event",actionName:"replace-with-compensation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-compensation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Compensation end event",actionName:"replace-with-compensation-end",className:"bpmn-icon-end-event-compensation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}}]}});const de=Object.values(ue);function he(e,t,n){this._popupMenu=e,this._translate=t,this._elementTemplates=n,this.register()}function fe(e,t,n){const i=e[t];return!!i&&n.findIndex((([e])=>e===i.actionName))}he.$inject=["popupMenu","translate","elementTemplates"],he.prototype.register=function(){this._popupMenu.registerProvider("bpmn-replace",this)},he.prototype.getPopupMenuEntries=function(e){return t=>{let n=Object.entries(t);return this._elementTemplates&&this._elementTemplates.get(e)&&this.addPlainElementEntry(e,n,this._translate,this._elementTemplates),n.reduce(((e,[t,n])=>(e[t]=n,e)),{})}},he.prototype.addPlainElementEntry=function(e,t,n,i){const a=this.getPlainEntry(e,t,n,i);if(!a)return;const[r,o]=a;t.splice(r,0,[o.id,o])},he.prototype.getPlainEntry=function(e,t,n,i){const{options:a,option:r,optionIndex:o}=function(e){const t=(e,t)=>t.target&&!function(e){return function(t){var n=t.target,i=M(e),a=i.eventDefinitions&&i.eventDefinitions[0],r=i.$type===n.type,o=(a&&a.$type)===n.eventDefinitionType,s=!!n.triggeredByEvent==!!i.triggeredByEvent,c=void 0===n.isExpanded||n.isExpanded===function(e,t){return!$(e,"bpmn:CallActivity")&&($(e,"bpmn:SubProcess")?(t=t||function(e){return e&&e.di}(e),!(!t||!$(t,"bpmndi:BPMNPlane"))||t&&!!t.isExpanded):!$(e,"bpmn:Participant")||!!M(e).processRef)}(e);return!(r&&o&&s&&c)}}(e)(t);return de.reduce(((n,i)=>{if(n)return n;const a=i.findIndex((n=>t(e,n)));return-1!==a?{options:i,option:i[a],optionIndex:a}:void 0}),null)}(e)||{};if(!a)return null;const s={id:"replace-remove-element-template",action:()=>{i.removeTemplate(e)},label:n(r.label),className:r.className},c=fe(a,o-1,t);if(c)return[c+1,s];const p=fe(a,o+1,t);return p?[p,s]:[0,s]};var ve={__init__:["removeTemplateReplaceProvider"],removeTemplateReplaceProvider:["type",he]},ge={__depends__:[re,se,pe,ve]}},40802:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});class i{constructor(e,t,n){this._eventBus=e,this._bpmnJSTracking=t,this._selection=n,this._eventBus.on("elementTemplates.select",this.trackTemplateSelect.bind(this)),this._eventBus.on("elementTemplates.update",this.trackTemplateUpdate.bind(this)),this._eventBus.on("elementTemplates.unlink",this.trackTemplateUnlink.bind(this)),this._eventBus.on("elementTemplates.remove",this.trackTemplateRemove.bind(this))}trackTemplateSelect(e){const{element:t}=e;this._bpmnJSTracking.track({name:"elementTemplates.select",data:{element:t}})}trackTemplateUpdate(e){const{element:t,newTemplate:n}=e;this._bpmnJSTracking.track({name:"elementTemplates.update",data:{element:t,newTemplate:n}})}trackTemplateUnlink(e){const{element:t}=e;this._bpmnJSTracking.track({name:"elementTemplates.unlink",data:{element:t}})}trackTemplateRemove(e){const{element:t}=e;this._bpmnJSTracking.track({name:"elementTemplates.remove",data:{element:t}})}}i.$inject=["eventBus","bpmnJSTracking","selection"];const a={__init__:["elementTemplatesTracking"],elementTemplatesTracking:["type",i]}},42371:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});class i{constructor(e,t,n){this._eventBus=e,this._bpmnJSTracking=t,this._selection=n,this._eventBus.on("feelPopup.opened",this.trackOpen.bind(this)),this._eventBus.on("feelPopup.closed",this.trackClosed.bind(this))}trackOpen(){this._bpmnJSTracking.track({name:"feelPopup.opened",data:{selection:this._selection.get()}})}trackClosed(){this._bpmnJSTracking.track({name:"feelPopup.closed",data:{selection:this._selection.get()}})}}i.$inject=["eventBus","bpmnJSTracking","selection"];const a={__init__:["feelPopupTracking"],feelPopupTracking:["type",i]}},49281:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i={__init__:[n(93366).A]}},51311:(e,t,n)=>{"use strict";n.d(t,{A:()=>dl});var i=n(7475),a=n(64847),r=n(1950);function o(e,t){return t.forEach((function(t){t&&"string"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(n){if("default"!==n&&!(n in e)){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}}))})),Object.freeze(e)}const s=Object.prototype.toString,c=Object.prototype.hasOwnProperty;function p(e,t){return c.call(e,t)}function l(e,t){let n,i;if(void 0===e)return;const a=(r=e,"[object Array]"===s.call(r)?u:m);var r;for(let r in e)if(p(e,r)&&(n=e[r],i=t(n,a(r)),!1===i))return n}function m(e){return e}function u(e){return Number(e)}function d(e,...t){const n=e.style;return l(t,(function(e){e&&l(e,(function(e,t){n[t]=e}))})),e}const h=Object.prototype.toString;function f(e){return new v(e)}function v(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}v.prototype.add=function(e){return this.list.add(e),this},v.prototype.remove=function(e){return"[object RegExp]"==h.call(e)?this.removeMatching(e):(this.list.remove(e),this)},v.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},v.prototype.toggle=function(e,t){return void 0!==t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this},v.prototype.array=function(){return Array.from(this.list)},v.prototype.has=v.prototype.contains=function(e){return this.list.contains(e)};var g,y,b,E={};function x(){g=window.addEventListener?"addEventListener":"attachEvent",y=window.removeEventListener?"removeEventListener":"detachEvent",b="addEventListener"!==g?"on":""}var w,_=o({__proto__:null,bind:E.bind=function(e,t,n,i){return g||x(),e[g](b+t,n,i||!1),n},unbind:E.unbind=function(e,t,n,i){return y||x(),e[y](b+t,n,i||!1),n},default:E},[E]),O=["focus","blur"],S={bind:function(e,t,n,i,a){return-1!==O.indexOf(n)&&(a=!0),_.bind(e,n,(function(n){var a=n.target||n.srcElement;n.delegateTarget=function(e,t){var n=e;return n&&"function"==typeof n.closest&&n.closest(t)||null}(a,t),n.delegateTarget&&i.call(e,n)}),a)},unbind:function(e,t,n,i){return-1!==O.indexOf(t)&&(i=!0),_.unbind(e,t,n,i)}},A=!1;"undefined"!=typeof document&&((w=document.createElement("div")).innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',A=!w.getElementsByTagName("link").length,w=void 0);var k={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:A?[1,"X<div>","</div>"]:[0,"",""]};k.td=k.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],k.option=k.optgroup=[1,'<select multiple="multiple">',"</select>"],k.thead=k.tbody=k.colgroup=k.caption=k.tfoot=[1,"<table>","</table>"],k.polyline=k.ellipse=k.polygon=k.circle=k.text=k.line=k.path=k.rect=k.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];var C=function(e,t){if("string"!=typeof e)throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var i=n[1];if("body"==i)return(a=t.createElement("html")).innerHTML=e,a.removeChild(a.lastChild);var a,r=Object.prototype.hasOwnProperty.call(k,i)?k[i]:k._default,o=r[0],s=r[1],c=r[2];for((a=t.createElement("div")).innerHTML=s+e+c;o--;)a=a.lastChild;if(a.firstChild==a.lastChild)return a.removeChild(a.firstChild);for(var p=t.createDocumentFragment();a.firstChild;)p.appendChild(a.removeChild(a.firstChild));return p};function P(e,t){return(t=t||document).querySelector(e)}function T(e,t){return t.appendChild(function(e,t){if(e.ownerDocument!==t.ownerDocument)try{return t.ownerDocument.importNode(e,!0)}catch(e){}return e}(e,t))}function R(e,t){return T(t,e),e}var D={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":2,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":2,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function N(e,t,n){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),a=D[i];a?(2===a&&"number"==typeof n&&(n=String(n)+"px"),e.style[i]=n):e.setAttributeNS(null,t,n)}function $(e,t,n){if("string"==typeof t){if(void 0===n)return function(e,t){return D[t]?e.style[t]:e.getAttributeNS(null,t)}(e,t);N(e,t,n)}else!function(e,t){var n,i,a=Object.keys(t);for(n=0;i=a[n];n++)N(e,i,t[i])}(e,t);return e}const M=Object.prototype.toString;function B(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}B.prototype.add=function(e){return this.list.add(e),this},B.prototype.remove=function(e){return"[object RegExp]"==M.call(e)?this.removeMatching(e):(this.list.remove(e),this)},B.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},B.prototype.toggle=function(e,t){return void 0!==t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this},B.prototype.array=function(){return Array.from(this.list)},B.prototype.has=B.prototype.contains=function(e){return this.list.contains(e)};var j="http://www.w3.org/2000/svg",F='<svg xmlns="'+j+'"';function Q(e){var t=!1;"<svg"===e.substring(0,4)?-1===e.indexOf(j)&&(e=F+e.substring(4)):(e=F+">"+e+"</svg>",t=!0);var n=function(e){var t;return(t=new DOMParser).async=!1,t.parseFromString(e,"text/xml")}(e);if(!t)return n;for(var i=document.createDocumentFragment(),a=n.firstChild;a.firstChild;)i.appendChild(a.firstChild);return i}function I(e,t){var n;return"<"===(e=e.trim()).charAt(0)?(n=Q(e).firstChild,n=document.importNode(n,!0)):n=document.createElementNS(j,e),t&&$(n,t),n}var L=/([&<>]{1})/g,z=/([&<>\n\r"]{1})/g,X={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"'"};function V(e,t){return e.replace(t,(function(e,t){return X[t]||t}))}function Y(e,t){var n,i,a,r,o;switch(e.nodeType){case 3:t.push(V(e.textContent,L));break;case 1:if(t.push("<",e.tagName),e.hasAttributes())for(n=0,i=(a=e.attributes).length;n<i;++n)r=a.item(n),t.push(" ",r.name,'="',V(r.value,z),'"');if(e.hasChildNodes()){for(t.push(">"),n=0,i=(o=e.childNodes).length;n<i;++n)Y(o.item(n),t);t.push("</",e.tagName,">")}else t.push("/>");break;case 8:t.push("\x3c!--",V(e.nodeValue,L),"--\x3e");break;case 4:t.push("<![CDATA[",e.nodeValue,"]]>");break;default:throw new Error("unable to handle node "+e.nodeType)}return t}function G(e,t){if(void 0!==t){try{!function(e,t){var n=Q(t);if(function(e){for(var t;t=e.firstChild;)e.removeChild(t)}(e),t){"#document-fragment"===n.nodeName||(n=n.documentElement);for(var i,a=(i=n.childNodes,Array.prototype.slice.call(i)),r=0;r<a.length;r++)T(a[r],e)}}(e,t)}catch(e){throw new Error("error parsing SVG: "+e.message)}return e}return function(e){for(var t=e.firstChild,n=[];t;)Y(t,n),t=t.nextSibling;return n.join("")}(e)}function W(e){var t=e.parentNode;return t&&t.removeChild(e),e}var q=n(96222),H=n(58886),J=n(53112);function U(e,t){H.ij.call(this,e,t)}U.prototype=Object.create(H.ij.prototype),U.prototype.fromXML=function(e,t,n){(0,r.Kg)(t)||(n=t,t="bpmn:Definitions");var i=new J.m((0,r.kp)({model:this,lax:!0},n)),a=i.handler(t);return i.fromXML(e,a)},U.prototype.toXML=function(e,t){var n=new J.A(t);return new Promise((function(t,i){try{return t({xml:n.toXML(e)})}catch(e){return i(e)}}))};const Z={bpmn:{name:"BPMN20",uri:"http://www.omg.org/spec/BPMN/20100524/MODEL",prefix:"bpmn",associations:[],types:[{name:"Interface",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"operations",type:"Operation",isMany:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"Operation",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"inMessageRef",type:"Message",isReference:!0},{name:"outMessageRef",type:"Message",isReference:!0},{name:"errorRef",type:"Error",isMany:!0,isReference:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"EndPoint",superClass:["RootElement"]},{name:"Auditing",superClass:["BaseElement"]},{name:"GlobalTask",superClass:["CallableElement"],properties:[{name:"resources",type:"ResourceRole",isMany:!0}]},{name:"Monitoring",superClass:["BaseElement"]},{name:"Performer",superClass:["ResourceRole"]},{name:"Process",superClass:["FlowElementsContainer","CallableElement"],properties:[{name:"processType",type:"ProcessType",isAttr:!0},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"properties",type:"Property",isMany:!0},{name:"laneSets",isMany:!0,replaces:"FlowElementsContainer#laneSets",type:"LaneSet"},{name:"flowElements",isMany:!0,replaces:"FlowElementsContainer#flowElements",type:"FlowElement"},{name:"artifacts",type:"Artifact",isMany:!0},{name:"resources",type:"ResourceRole",isMany:!0},{name:"correlationSubscriptions",type:"CorrelationSubscription",isMany:!0},{name:"supports",type:"Process",isMany:!0,isReference:!0},{name:"definitionalCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"isExecutable",isAttr:!0,type:"Boolean"}]},{name:"LaneSet",superClass:["BaseElement"],properties:[{name:"lanes",type:"Lane",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Lane",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"partitionElementRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"partitionElement",type:"BaseElement"},{name:"flowNodeRef",type:"FlowNode",isMany:!0,isReference:!0},{name:"childLaneSet",type:"LaneSet",xml:{serialize:"xsi:type"}}]},{name:"GlobalManualTask",superClass:["GlobalTask"]},{name:"ManualTask",superClass:["Task"]},{name:"UserTask",superClass:["Task"],properties:[{name:"renderings",type:"Rendering",isMany:!0},{name:"implementation",isAttr:!0,type:"String"}]},{name:"Rendering",superClass:["BaseElement"]},{name:"HumanPerformer",superClass:["Performer"]},{name:"PotentialOwner",superClass:["HumanPerformer"]},{name:"GlobalUserTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"renderings",type:"Rendering",isMany:!0}]},{name:"Gateway",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"gatewayDirection",type:"GatewayDirection",default:"Unspecified",isAttr:!0}]},{name:"EventBasedGateway",superClass:["Gateway"],properties:[{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"eventGatewayType",type:"EventBasedGatewayType",isAttr:!0,default:"Exclusive"}]},{name:"ComplexGateway",superClass:["Gateway"],properties:[{name:"activationCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ExclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"InclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ParallelGateway",superClass:["Gateway"]},{name:"RootElement",isAbstract:!0,superClass:["BaseElement"]},{name:"Relationship",superClass:["BaseElement"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"direction",type:"RelationshipDirection",isAttr:!0},{name:"source",isMany:!0,isReference:!0,type:"Element"},{name:"target",isMany:!0,isReference:!0,type:"Element"}]},{name:"BaseElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,type:"String",isId:!0},{name:"documentation",type:"Documentation",isMany:!0},{name:"extensionDefinitions",type:"ExtensionDefinition",isMany:!0,isReference:!0},{name:"extensionElements",type:"ExtensionElements"}]},{name:"Extension",properties:[{name:"mustUnderstand",default:!1,isAttr:!0,type:"Boolean"},{name:"definition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"extensionAttributeDefinitions",type:"ExtensionAttributeDefinition",isMany:!0}]},{name:"ExtensionAttributeDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"type",isAttr:!0,type:"String"},{name:"isReference",default:!1,isAttr:!0,type:"Boolean"},{name:"extensionDefinition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionElements",properties:[{name:"valueRef",isAttr:!0,isReference:!0,type:"Element"},{name:"values",type:"Element",isMany:!0},{name:"extensionAttributeDefinition",type:"ExtensionAttributeDefinition",isAttr:!0,isReference:!0}]},{name:"Documentation",superClass:["BaseElement"],properties:[{name:"text",type:"String",isBody:!0},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Event",isAbstract:!0,superClass:["FlowNode","InteractionNode"],properties:[{name:"properties",type:"Property",isMany:!0}]},{name:"IntermediateCatchEvent",superClass:["CatchEvent"]},{name:"IntermediateThrowEvent",superClass:["ThrowEvent"]},{name:"EndEvent",superClass:["ThrowEvent"]},{name:"StartEvent",superClass:["CatchEvent"],properties:[{name:"isInterrupting",default:!0,isAttr:!0,type:"Boolean"}]},{name:"ThrowEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"inputSet",type:"InputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"CatchEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"parallelMultiple",isAttr:!0,type:"Boolean",default:!1},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"outputSet",type:"OutputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"BoundaryEvent",superClass:["CatchEvent"],properties:[{name:"cancelActivity",default:!0,isAttr:!0,type:"Boolean"},{name:"attachedToRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"EventDefinition",isAbstract:!0,superClass:["RootElement"]},{name:"CancelEventDefinition",superClass:["EventDefinition"]},{name:"ErrorEventDefinition",superClass:["EventDefinition"],properties:[{name:"errorRef",type:"Error",isAttr:!0,isReference:!0}]},{name:"TerminateEventDefinition",superClass:["EventDefinition"]},{name:"EscalationEventDefinition",superClass:["EventDefinition"],properties:[{name:"escalationRef",type:"Escalation",isAttr:!0,isReference:!0}]},{name:"Escalation",properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"escalationCode",isAttr:!0,type:"String"}],superClass:["RootElement"]},{name:"CompensateEventDefinition",superClass:["EventDefinition"],properties:[{name:"waitForCompletion",isAttr:!0,type:"Boolean",default:!0},{name:"activityRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"TimerEventDefinition",superClass:["EventDefinition"],properties:[{name:"timeDate",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeCycle",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeDuration",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"LinkEventDefinition",superClass:["EventDefinition"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"target",type:"LinkEventDefinition",isReference:!0},{name:"source",type:"LinkEventDefinition",isMany:!0,isReference:!0}]},{name:"MessageEventDefinition",superClass:["EventDefinition"],properties:[{name:"messageRef",type:"Message",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isReference:!0}]},{name:"ConditionalEventDefinition",superClass:["EventDefinition"],properties:[{name:"condition",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"SignalEventDefinition",superClass:["EventDefinition"],properties:[{name:"signalRef",type:"Signal",isAttr:!0,isReference:!0}]},{name:"Signal",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ImplicitThrowEvent",superClass:["ThrowEvent"]},{name:"DataState",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"ItemAwareElement",superClass:["BaseElement"],properties:[{name:"itemSubjectRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"dataState",type:"DataState"}]},{name:"DataAssociation",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"ItemAwareElement",isMany:!0,isReference:!0},{name:"targetRef",type:"ItemAwareElement",isReference:!0},{name:"transformation",type:"FormalExpression",xml:{serialize:"property"}},{name:"assignment",type:"Assignment",isMany:!0}]},{name:"DataInput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"inputSetRef",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithOptional",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithWhileExecuting",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"DataOutput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"outputSetRef",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithOptional",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithWhileExecuting",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"InputSet",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"dataInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"optionalInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"whileExecutingInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"outputSetRefs",type:"OutputSet",isMany:!0,isReference:!0}]},{name:"OutputSet",superClass:["BaseElement"],properties:[{name:"dataOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"inputSetRefs",type:"InputSet",isMany:!0,isReference:!0},{name:"optionalOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"whileExecutingOutputRefs",type:"DataOutput",isMany:!0,isReference:!0}]},{name:"Property",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"DataInputAssociation",superClass:["DataAssociation"]},{name:"DataOutputAssociation",superClass:["DataAssociation"]},{name:"InputOutputSpecification",superClass:["BaseElement"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"inputSets",type:"InputSet",isMany:!0},{name:"outputSets",type:"OutputSet",isMany:!0}]},{name:"DataObject",superClass:["FlowElement","ItemAwareElement"],properties:[{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"}]},{name:"InputOutputBinding",properties:[{name:"inputDataRef",type:"InputSet",isAttr:!0,isReference:!0},{name:"outputDataRef",type:"OutputSet",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"Assignment",superClass:["BaseElement"],properties:[{name:"from",type:"Expression",xml:{serialize:"xsi:type"}},{name:"to",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"DataStore",superClass:["RootElement","ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"capacity",isAttr:!0,type:"Integer"},{name:"isUnlimited",default:!0,isAttr:!0,type:"Boolean"}]},{name:"DataStoreReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataStoreRef",type:"DataStore",isAttr:!0,isReference:!0}]},{name:"DataObjectReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataObjectRef",type:"DataObject",isAttr:!0,isReference:!0}]},{name:"ConversationLink",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ConversationAssociation",superClass:["BaseElement"],properties:[{name:"innerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0},{name:"outerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0}]},{name:"CallConversation",superClass:["ConversationNode"],properties:[{name:"calledCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"Conversation",superClass:["ConversationNode"]},{name:"SubConversation",superClass:["ConversationNode"],properties:[{name:"conversationNodes",type:"ConversationNode",isMany:!0}]},{name:"ConversationNode",isAbstract:!0,superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"messageFlowRefs",type:"MessageFlow",isMany:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0}]},{name:"GlobalConversation",superClass:["Collaboration"]},{name:"PartnerEntity",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"PartnerRole",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"CorrelationProperty",superClass:["RootElement"],properties:[{name:"correlationPropertyRetrievalExpression",type:"CorrelationPropertyRetrievalExpression",isMany:!0},{name:"name",isAttr:!0,type:"String"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Error",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"errorCode",isAttr:!0,type:"String"}]},{name:"CorrelationKey",superClass:["BaseElement"],properties:[{name:"correlationPropertyRef",type:"CorrelationProperty",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Expression",superClass:["BaseElement"],isAbstract:!1,properties:[{name:"body",isBody:!0,type:"String"}]},{name:"FormalExpression",superClass:["Expression"],properties:[{name:"language",isAttr:!0,type:"String"},{name:"evaluatesToTypeRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Message",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"itemRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"ItemDefinition",superClass:["RootElement"],properties:[{name:"itemKind",type:"ItemKind",isAttr:!0},{name:"structureRef",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"import",type:"Import",isAttr:!0,isReference:!0}]},{name:"FlowElement",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"categoryValueRef",type:"CategoryValue",isMany:!0,isReference:!0}]},{name:"SequenceFlow",superClass:["FlowElement"],properties:[{name:"isImmediate",isAttr:!0,type:"Boolean"},{name:"conditionExpression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"sourceRef",type:"FlowNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"FlowNode",isAttr:!0,isReference:!0}]},{name:"FlowElementsContainer",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"laneSets",type:"LaneSet",isMany:!0},{name:"flowElements",type:"FlowElement",isMany:!0}]},{name:"CallableElement",isAbstract:!0,superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"supportedInterfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"ioBinding",type:"InputOutputBinding",isMany:!0,xml:{serialize:"property"}}]},{name:"FlowNode",isAbstract:!0,superClass:["FlowElement"],properties:[{name:"incoming",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"outgoing",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"lanes",type:"Lane",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"CorrelationPropertyRetrievalExpression",superClass:["BaseElement"],properties:[{name:"messagePath",type:"FormalExpression"},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"CorrelationPropertyBinding",superClass:["BaseElement"],properties:[{name:"dataPath",type:"FormalExpression"},{name:"correlationPropertyRef",type:"CorrelationProperty",isAttr:!0,isReference:!0}]},{name:"Resource",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"resourceParameters",type:"ResourceParameter",isMany:!0}]},{name:"ResourceParameter",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isRequired",isAttr:!0,type:"Boolean"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"CorrelationSubscription",superClass:["BaseElement"],properties:[{name:"correlationKeyRef",type:"CorrelationKey",isAttr:!0,isReference:!0},{name:"correlationPropertyBinding",type:"CorrelationPropertyBinding",isMany:!0}]},{name:"MessageFlow",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"MessageFlowAssociation",superClass:["BaseElement"],properties:[{name:"innerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0},{name:"outerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0}]},{name:"InteractionNode",isAbstract:!0,properties:[{name:"incomingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0},{name:"outgoingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"Participant",superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"interfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"participantMultiplicity",type:"ParticipantMultiplicity"},{name:"endPointRefs",type:"EndPoint",isMany:!0,isReference:!0},{name:"processRef",type:"Process",isAttr:!0,isReference:!0}]},{name:"ParticipantAssociation",superClass:["BaseElement"],properties:[{name:"innerParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"outerParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"ParticipantMultiplicity",properties:[{name:"minimum",default:0,isAttr:!0,type:"Integer"},{name:"maximum",default:1,isAttr:!0,type:"Integer"}],superClass:["BaseElement"]},{name:"Collaboration",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"participants",type:"Participant",isMany:!0},{name:"messageFlows",type:"MessageFlow",isMany:!0},{name:"artifacts",type:"Artifact",isMany:!0},{name:"conversations",type:"ConversationNode",isMany:!0},{name:"conversationAssociations",type:"ConversationAssociation"},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0},{name:"messageFlowAssociations",type:"MessageFlowAssociation",isMany:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"choreographyRef",type:"Choreography",isMany:!0,isReference:!0},{name:"conversationLinks",type:"ConversationLink",isMany:!0}]},{name:"ChoreographyActivity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"loopType",type:"ChoreographyLoopType",default:"None",isAttr:!0}]},{name:"CallChoreography",superClass:["ChoreographyActivity"],properties:[{name:"calledChoreographyRef",type:"Choreography",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"SubChoreography",superClass:["ChoreographyActivity","FlowElementsContainer"],properties:[{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"ChoreographyTask",superClass:["ChoreographyActivity"],properties:[{name:"messageFlowRef",type:"MessageFlow",isMany:!0,isReference:!0}]},{name:"Choreography",superClass:["Collaboration","FlowElementsContainer"]},{name:"GlobalChoreographyTask",superClass:["Choreography"],properties:[{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Group",superClass:["Artifact"],properties:[{name:"categoryValueRef",type:"CategoryValue",isAttr:!0,isReference:!0}]},{name:"Association",superClass:["Artifact"],properties:[{name:"associationDirection",type:"AssociationDirection",isAttr:!0},{name:"sourceRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"targetRef",type:"BaseElement",isAttr:!0,isReference:!0}]},{name:"Category",superClass:["RootElement"],properties:[{name:"categoryValue",type:"CategoryValue",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Artifact",isAbstract:!0,superClass:["BaseElement"]},{name:"CategoryValue",superClass:["BaseElement"],properties:[{name:"categorizedFlowElements",type:"FlowElement",isMany:!0,isVirtual:!0,isReference:!0},{name:"value",isAttr:!0,type:"String"}]},{name:"Activity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"isForCompensation",default:!1,isAttr:!0,type:"Boolean"},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"boundaryEventRefs",type:"BoundaryEvent",isMany:!0,isReference:!0},{name:"properties",type:"Property",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"startQuantity",default:1,isAttr:!0,type:"Integer"},{name:"resources",type:"ResourceRole",isMany:!0},{name:"completionQuantity",default:1,isAttr:!0,type:"Integer"},{name:"loopCharacteristics",type:"LoopCharacteristics"}]},{name:"ServiceTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"SubProcess",superClass:["Activity","FlowElementsContainer","InteractionNode"],properties:[{name:"triggeredByEvent",default:!1,isAttr:!0,type:"Boolean"},{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"LoopCharacteristics",isAbstract:!0,superClass:["BaseElement"]},{name:"MultiInstanceLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"isSequential",default:!1,isAttr:!0,type:"Boolean"},{name:"behavior",type:"MultiInstanceBehavior",default:"All",isAttr:!0},{name:"loopCardinality",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopDataInputRef",type:"ItemAwareElement",isReference:!0},{name:"loopDataOutputRef",type:"ItemAwareElement",isReference:!0},{name:"inputDataItem",type:"DataInput",xml:{serialize:"property"}},{name:"outputDataItem",type:"DataOutput",xml:{serialize:"property"}},{name:"complexBehaviorDefinition",type:"ComplexBehaviorDefinition",isMany:!0},{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"oneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0},{name:"noneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0}]},{name:"StandardLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"testBefore",default:!1,isAttr:!0,type:"Boolean"},{name:"loopCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopMaximum",type:"Integer",isAttr:!0}]},{name:"CallActivity",superClass:["Activity","InteractionNode"],properties:[{name:"calledElement",type:"String",isAttr:!0}]},{name:"Task",superClass:["Activity","InteractionNode"]},{name:"SendTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ReceiveTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ScriptTask",superClass:["Task"],properties:[{name:"scriptFormat",isAttr:!0,type:"String"},{name:"script",type:"String"}]},{name:"BusinessRuleTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"AdHocSubProcess",superClass:["SubProcess"],properties:[{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"ordering",type:"AdHocOrdering",isAttr:!0},{name:"cancelRemainingInstances",default:!0,isAttr:!0,type:"Boolean"}]},{name:"Transaction",superClass:["SubProcess"],properties:[{name:"protocol",isAttr:!0,type:"String"},{name:"method",isAttr:!0,type:"String"}]},{name:"GlobalScriptTask",superClass:["GlobalTask"],properties:[{name:"scriptLanguage",isAttr:!0,type:"String"},{name:"script",isAttr:!0,type:"String"}]},{name:"GlobalBusinessRuleTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"ComplexBehaviorDefinition",superClass:["BaseElement"],properties:[{name:"condition",type:"FormalExpression"},{name:"event",type:"ImplicitThrowEvent"}]},{name:"ResourceRole",superClass:["BaseElement"],properties:[{name:"resourceRef",type:"Resource",isReference:!0},{name:"resourceParameterBindings",type:"ResourceParameterBinding",isMany:!0},{name:"resourceAssignmentExpression",type:"ResourceAssignmentExpression"},{name:"name",isAttr:!0,type:"String"}]},{name:"ResourceParameterBinding",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"parameterRef",type:"ResourceParameter",isAttr:!0,isReference:!0}],superClass:["BaseElement"]},{name:"ResourceAssignmentExpression",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}}],superClass:["BaseElement"]},{name:"Import",properties:[{name:"importType",isAttr:!0,type:"String"},{name:"location",isAttr:!0,type:"String"},{name:"namespace",isAttr:!0,type:"String"}]},{name:"Definitions",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"targetNamespace",isAttr:!0,type:"String"},{name:"expressionLanguage",default:"http://www.w3.org/1999/XPath",isAttr:!0,type:"String"},{name:"typeLanguage",default:"http://www.w3.org/2001/XMLSchema",isAttr:!0,type:"String"},{name:"imports",type:"Import",isMany:!0},{name:"extensions",type:"Extension",isMany:!0},{name:"rootElements",type:"RootElement",isMany:!0},{name:"diagrams",isMany:!0,type:"bpmndi:BPMNDiagram"},{name:"exporter",isAttr:!0,type:"String"},{name:"relationships",type:"Relationship",isMany:!0},{name:"exporterVersion",isAttr:!0,type:"String"}]}],enumerations:[{name:"ProcessType",literalValues:[{name:"None"},{name:"Public"},{name:"Private"}]},{name:"GatewayDirection",literalValues:[{name:"Unspecified"},{name:"Converging"},{name:"Diverging"},{name:"Mixed"}]},{name:"EventBasedGatewayType",literalValues:[{name:"Parallel"},{name:"Exclusive"}]},{name:"RelationshipDirection",literalValues:[{name:"None"},{name:"Forward"},{name:"Backward"},{name:"Both"}]},{name:"ItemKind",literalValues:[{name:"Physical"},{name:"Information"}]},{name:"ChoreographyLoopType",literalValues:[{name:"None"},{name:"Standard"},{name:"MultiInstanceSequential"},{name:"MultiInstanceParallel"}]},{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"MultiInstanceBehavior",literalValues:[{name:"None"},{name:"One"},{name:"All"},{name:"Complex"}]},{name:"AdHocOrdering",literalValues:[{name:"Parallel"},{name:"Sequential"}]}],xml:{tagAlias:"lowerCase",typePrefix:"t"}},bpmndi:{name:"BPMNDI",uri:"http://www.omg.org/spec/BPMN/20100524/DI",prefix:"bpmndi",types:[{name:"BPMNDiagram",properties:[{name:"plane",type:"BPMNPlane",redefines:"di:Diagram#rootElement"},{name:"labelStyle",type:"BPMNLabelStyle",isMany:!0}],superClass:["di:Diagram"]},{name:"BPMNPlane",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"}],superClass:["di:Plane"]},{name:"BPMNShape",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"isHorizontal",isAttr:!0,type:"Boolean"},{name:"isExpanded",isAttr:!0,type:"Boolean"},{name:"isMarkerVisible",isAttr:!0,type:"Boolean"},{name:"label",type:"BPMNLabel"},{name:"isMessageVisible",isAttr:!0,type:"Boolean"},{name:"participantBandKind",type:"ParticipantBandKind",isAttr:!0},{name:"choreographyActivityShape",type:"BPMNShape",isAttr:!0,isReference:!0}],superClass:["di:LabeledShape"]},{name:"BPMNEdge",properties:[{name:"label",type:"BPMNLabel"},{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"sourceElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#source"},{name:"targetElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#target"},{name:"messageVisibleKind",type:"MessageVisibleKind",isAttr:!0,default:"initiating"}],superClass:["di:LabeledEdge"]},{name:"BPMNLabel",properties:[{name:"labelStyle",type:"BPMNLabelStyle",isAttr:!0,isReference:!0,redefines:"di:DiagramElement#style"}],superClass:["di:Label"]},{name:"BPMNLabelStyle",properties:[{name:"font",type:"dc:Font"}],superClass:["di:Style"]}],enumerations:[{name:"ParticipantBandKind",literalValues:[{name:"top_initiating"},{name:"middle_initiating"},{name:"bottom_initiating"},{name:"top_non_initiating"},{name:"middle_non_initiating"},{name:"bottom_non_initiating"}]},{name:"MessageVisibleKind",literalValues:[{name:"initiating"},{name:"non_initiating"}]}],associations:[]},dc:{name:"DC",uri:"http://www.omg.org/spec/DD/20100524/DC",prefix:"dc",types:[{name:"Boolean"},{name:"Integer"},{name:"Real"},{name:"String"},{name:"Font",properties:[{name:"name",type:"String",isAttr:!0},{name:"size",type:"Real",isAttr:!0},{name:"isBold",type:"Boolean",isAttr:!0},{name:"isItalic",type:"Boolean",isAttr:!0},{name:"isUnderline",type:"Boolean",isAttr:!0},{name:"isStrikeThrough",type:"Boolean",isAttr:!0}]},{name:"Point",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0}]},{name:"Bounds",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0},{name:"width",type:"Real",isAttr:!0},{name:"height",type:"Real",isAttr:!0}]}],associations:[]},di:{name:"DI",uri:"http://www.omg.org/spec/DD/20100524/DI",prefix:"di",types:[{name:"DiagramElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"extension",type:"Extension"},{name:"owningDiagram",type:"Diagram",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"owningElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"modelElement",isReadOnly:!0,isVirtual:!0,isReference:!0,type:"Element"},{name:"style",type:"Style",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"ownedElement",type:"DiagramElement",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Node",isAbstract:!0,superClass:["DiagramElement"]},{name:"Edge",isAbstract:!0,superClass:["DiagramElement"],properties:[{name:"source",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"target",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"waypoint",isUnique:!1,isMany:!0,type:"dc:Point",xml:{serialize:"xsi:type"}}]},{name:"Diagram",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"rootElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0},{name:"name",isAttr:!0,type:"String"},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,type:"Real"},{name:"ownedStyle",type:"Style",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Shape",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Plane",isAbstract:!0,superClass:["Node"],properties:[{name:"planeElement",type:"DiagramElement",subsettedProperty:"DiagramElement-ownedElement",isMany:!0}]},{name:"LabeledEdge",isAbstract:!0,superClass:["Edge"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"LabeledShape",isAbstract:!0,superClass:["Shape"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"Label",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Style",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"}]},{name:"Extension",properties:[{name:"values",isMany:!0,type:"Element"}]}],associations:[],xml:{tagAlias:"lowerCase"}},bioc:{name:"bpmn.io colors for BPMN",uri:"http://bpmn.io/schema/bpmn/biocolor/1.0",prefix:"bioc",types:[{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]}],enumerations:[],associations:[]},color:{name:"BPMN in Color",uri:"http://www.omg.org/spec/BPMN/non-normative/color/1.0",prefix:"color",types:[{name:"ColoredLabel",extends:["bpmndi:BPMNLabel"],properties:[{name:"color",isAttr:!0,type:"String"}]},{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"background-color",isAttr:!0,type:"String"},{name:"border-color",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"border-color",isAttr:!0,type:"String"}]}],enumerations:[],associations:[]}};function K(e,t){return new U((0,r.kp)({},Z,e),t)}function ee(e){return e?"<"+e.$type+(e.id?' id="'+e.id:"")+'" />':"<null>"}function te(e){(0,r.zy)(e,"di")||Object.defineProperty(e,"di",{enumerable:!1,get:function(){throw new Error("Tried to access di from the businessObject. The di is available through the diagram element only. For more information, see https://github.com/bpmn-io/bpmn-js/issues/1472")}})}function ne(e,t){return e.$instanceOf(t)}function ie(e){var t={},n=[],i={};function a(e,t){return function(n){e(n,t)}}function o(e){t[e.id]=e}function s(t,n){try{var a=i[t.id]&&function(t,n){if(t.gfx)throw new Error(`already rendered ${ee(t)}`);return e.element(t,i[t.id],n)}(t,n);return o(t),a}catch(e){c(e.message,{element:t,error:e}),console.error(`failed to import ${ee(t)}`,e)}}function c(t,n){e.error(t,n)}var p=this.registerDi=function(e){var t=e.bpmnElement;t?i[t.id]?c(`multiple DI elements defined for ${ee(t)}`,{element:t}):(i[t.id]=e,te(t)):c(`no bpmnElement referenced in ${ee(e)}`,{element:e})};function l(e){p(e)}this.handleDefinitions=function(o,s){var h=o.diagrams;if(s&&-1===h.indexOf(s))throw new Error("diagram not part of <bpmn:Definitions />");if(!s&&h&&h.length&&(s=h[0]),!s)throw new Error("no diagram to display");i={},function(e){var t;t=e.plane,p(t),(0,r.jJ)(t.planeElement,l)}(s);var f=s.plane;if(!f)throw new Error(`no plane for ${ee(s)}`);var v=f.bpmnElement;if(!v){if(v=function(e){return(0,r.I6)(e.rootElements,(function(e){return ne(e,"bpmn:Process")||ne(e,"bpmn:Collaboration")}))}(o),!v)throw new Error("no process or collaboration to display");c(`correcting missing bpmnElement on ${ee(f)} to ${ee(v)}`),f.bpmnElement=v,p(f)}var g,b,E=function(t,n){return e.root(t,i[t.id],n)}(v,f);if(ne(v,"bpmn:Process")||ne(v,"bpmn:SubProcess"))u(v,E);else{if(!ne(v,"bpmn:Collaboration"))throw new Error(`unsupported bpmnElement for ${ee(f)}: ${ee(v)}`);g=v,b=E,(0,r.jJ)(g.participants,a(S,b)),n.push((function(){!function(e,t){(0,r.jJ)(e,a(d,t))}(g.messageFlows,b)})),y(g.artifacts,b),function(e,n){(0,r.pb)(e,(function(e){return!t[e.id]&&ne(e,"bpmn:Process")&&e.laneSets})).forEach(a(u,n))}(o.rootElements,E)}m(n)};var m=this.handleDeferred=function(){for(;n.length;)n.shift()()};function u(e,t){O(e,t),b(e.ioSpecification,t),y(e.artifacts,t),o(e)}function d(e,t){s(e,t)}function h(e,t){s(e,t)}function f(e,t){s(e,t)}function v(e,t){s(e,t)}function g(e,t){s(e,t)}function y(e,t){(0,r.jJ)(e,(function(e){ne(e,"bpmn:Association")?n.push((function(){g(e,t)})):g(e,t)}))}function b(e,t){e&&((0,r.jJ)(e.dataInputs,a(f,t)),(0,r.jJ)(e.dataOutputs,a(v,t)))}var E=this.handleSubProcess=function(e,t){O(e,t),y(e.artifacts,t)};function x(e,t){var i=s(e,t);ne(e,"bpmn:SubProcess")&&E(e,i||t),ne(e,"bpmn:Activity")&&b(e.ioSpecification,t),n.push((function(){(0,r.jJ)(e.dataInputAssociations,a(h,t)),(0,r.jJ)(e.dataOutputAssociations,a(h,t))}))}function w(e,t){n.push((function(){var n=s(e,t);e.childLaneSet&&_(e.childLaneSet,n||t),function(e){(0,r.jJ)(e.flowNodeRef,(function(t){var n=t.get("lanes");n&&n.push(e)}))}(e)}))}function _(e,t){(0,r.jJ)(e.lanes,a(w,t))}function O(e,t){!function(e,t){(0,r.jJ)(e,(function(e){ne(e,"bpmn:SequenceFlow")?n.push((function(){!function(e,t){s(e,t)}(e,t)})):ne(e,"bpmn:BoundaryEvent")?n.unshift((function(){x(e,t)})):ne(e,"bpmn:FlowNode")?x(e,t):ne(e,"bpmn:DataObject")||(ne(e,"bpmn:DataStoreReference")||ne(e,"bpmn:DataObjectReference")?function(e,t){s(e,t)}(e,t):c(`unrecognized flowElement ${ee(e)} in context ${ee(t&&t.businessObject)}`,{element:e,context:t}))}))}(e.flowElements,t),e.laneSets&&function(e,t){(0,r.jJ)(e,a(_,t))}(e.laneSets,t)}function S(e,t){var n=s(e,t),i=e.processRef;i&&u(i,n||t)}}var ae=n(70868);function re(e,t,n){var i,a,o,s=[];function c(e,t){var n=new ie({root:function(e,t){return i.add(e,t)},element:function(e,t,n){return i.add(e,t,n)},error:function(e,t){s.push({message:e,context:t})}});t=t||e.diagrams&&e.diagrams[0];var a=function(e,t){if(t&&t.plane){var n,i=t.plane.bpmnElement,a=i;(0,ae.is)(i,"bpmn:Process")||(0,ae.is)(i,"bpmn:Collaboration")||(a=function(e){for(var t=e;t;){if((0,ae.is)(t,"bpmn:Process"))return t;t=t.$parent}}(i)),n=(0,ae.is)(a,"bpmn:Collaboration")?a:(0,r.I6)(e.rootElements,(function(e){if((0,ae.is)(e,"bpmn:Collaboration"))return(0,r.I6)(e.participants,(function(e){return e.processRef===a}))}));var o=[a];n&&(o=(0,r.Tj)(n.participants,(function(e){return e.processRef}))).push(n);var s=oe(o),c=[t],p=[i];return(0,r.jJ)(e.diagrams,(function(e){if(e.plane){var t=e.plane.bpmnElement;-1!==s.indexOf(t)&&-1===p.indexOf(t)&&(c.push(e),p.push(t))}})),c}}(e,t);if(!a)throw new Error("no diagram to display");(0,r.jJ)(a,(function(t){n.handleDefinitions(e,t)}));var c=t.plane.bpmnElement.id;o.setRootElement(o.findRoot(c+"_plane")||o.findRoot(c))}return new Promise((function(r,p){try{return i=e.get("bpmnImporter"),a=e.get("eventBus"),o=e.get("canvas"),a.fire("import.render.start",{definitions:t}),c(t,n),a.fire("import.render.complete",{error:void 0,warnings:s}),r({warnings:s})}catch(e){return e.warnings=s,p(e)}}))}function oe(e){var t=[];return(0,r.jJ)(e,(function(e){e&&(t.push(e),t=t.concat(oe(e.flowElements)))})),t}var se,ce='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.02 5.57" width="53" height="21"><path fill="currentColor" d="M1.88.92v.14c0 .41-.13.68-.4.8.33.14.46.44.46.86v.33c0 .61-.33.95-.95.95H0V0h.95c.65 0 .93.3.93.92zM.63.57v1.06h.24c.24 0 .38-.1.38-.43V.98c0-.28-.1-.4-.32-.4zm0 1.63v1.22h.36c.2 0 .32-.1.32-.39v-.35c0-.37-.12-.48-.4-.48H.63zM4.18.99v.52c0 .64-.31.98-.94.98h-.3V4h-.62V0h.92c.63 0 .94.35.94.99zM2.94.57v1.35h.3c.2 0 .3-.09.3-.37v-.6c0-.29-.1-.38-.3-.38h-.3zm2.89 2.27L6.25 0h.88v4h-.6V1.12L6.1 3.99h-.6l-.46-2.82v2.82h-.55V0h.87zM8.14 1.1V4h-.56V0h.79L9 2.4V0h.56v4h-.64zm2.49 2.29v.6h-.6v-.6zM12.12 1c0-.63.33-1 .95-1 .61 0 .95.37.95 1v2.04c0 .64-.34 1-.95 1-.62 0-.95-.37-.95-1zm.62 2.08c0 .28.13.39.33.39s.32-.1.32-.4V.98c0-.29-.12-.4-.32-.4s-.33.11-.33.4z"/><path fill="currentColor" d="M0 4.53h14.02v1.04H0zM11.08 0h.63v.62h-.63zm.63 4V1h-.63v2.98z"/></svg>',pe={verticalAlign:"middle"},le={color:"#404040"},me={zIndex:"1001",position:"fixed",top:"0",left:"0",right:"0",bottom:"0"},ue={width:"100%",height:"100%",background:"rgba(40,40,40,0.2)"},de={position:"absolute",left:"50%",top:"40%",transform:"translate(-50%)",width:"260px",padding:"10px",background:"white",boxShadow:"0 1px 4px rgba(0,0,0,0.3)",fontFamily:"Helvetica, Arial, sans-serif",fontSize:"14px",display:"flex",lineHeight:"1.3"},he='<div class="bjs-powered-by-lightbox"><div class="backdrop"></div><div class="notice"><a href="https://bpmn.io" target="_blank" rel="noopener" class="link">'+ce+'</a><span>Web-based tooling for BPMN, DMN and forms powered by <a href="https://bpmn.io" target="_blank" rel="noopener">bpmn.io</a>.</span></div></div>';function fe(e){e=(0,r.kp)({},ge,e),this._moddle=this._createModdle(e),this._container=this._createContainer(e),this._init(this._container,this._moddle,e),function(e){const t=C('<a href="http://bpmn.io" target="_blank" class="bjs-powered-by" title="Powered by bpmn.io" >'+ce+"</a>");d(P("svg",t),pe),d(t,le,{position:"absolute",bottom:"15px",right:"15px",zIndex:"100"}),e.appendChild(t),_.bind(t,"click",(function(e){se||(d(se=C(he),me),d(P("svg",se),pe),d(P(".backdrop",se),ue),d(P(".notice",se),de),d(P(".link",se),le,{margin:"15px 20px 15px 10px",alignSelf:"center"}),S.bind(se,".backdrop","click",(function(e){document.body.removeChild(se)}))),document.body.appendChild(se),e.preventDefault()}))}(this._container)}function ve(e,t){return e.warnings=t,e}(0,i.A)(fe,q.A),fe.prototype.importXML=async function(e,t){const n=this;let i=[];try{let r;e=this._emit("import.parse.start",{xml:e})||e;try{r=await this._moddle.fromXML(e,"bpmn:Definitions")}catch(e){throw this._emit("import.parse.complete",{error:e}),e}let o=r.rootElement;const s=r.references,c=r.warnings,p=r.elementsById;i=i.concat(c),o=this._emit("import.parse.complete",(a={error:null,definitions:o,elementsById:p,references:s,warnings:i},n.get("eventBus").createEvent(a)))||o;const l=await this.importDefinitions(o,t);return i=i.concat(l.warnings),this._emit("import.done",{error:null,warnings:i}),{warnings:i}}catch(e){let t=e;throw i=i.concat(t.warnings||[]),ve(t,i),t=function(e){const t=/unparsable content <([^>]+)> detected([\s\S]*)$/.exec(e.message);return t&&(e.message="unparsable content <"+t[1]+"> detected; this may indicate an invalid BPMN 2.0 diagram file"+t[2]),e}(t),this._emit("import.done",{error:t,warnings:t.warnings}),t}var a},fe.prototype.importDefinitions=async function(e,t){return this._setDefinitions(e),{warnings:(await this.open(t)).warnings}},fe.prototype.open=async function(e){const t=this._definitions;let n=e;if(!t){const e=new Error("no XML imported");throw ve(e,[]),e}if("string"==typeof e&&(n=function(e,t){return t&&(0,r.I6)(e.diagrams,(function(e){return e.id===t}))||null}(t,e),!n)){const t=new Error("BPMNDiagram <"+e+"> not found");throw ve(t,[]),t}try{this.clear()}catch(e){throw ve(e,[]),e}const{warnings:i}=await re(this,t,n);return{warnings:i}},fe.prototype.saveXML=async function(e){e=e||{};let t,n,i=this._definitions;try{if(!i)throw new Error("no definitions loaded");i=this._emit("saveXML.start",{definitions:i})||i,n=(await this._moddle.toXML(i,e)).xml,n=this._emit("saveXML.serialized",{xml:n})||n}catch(e){t=e}const a=t?{error:t}:{xml:n};if(this._emit("saveXML.done",a),t)throw t;return a},fe.prototype.saveSVG=async function(){let e,t;this._emit("saveSVG.start");try{const t=this.get("canvas"),n=t.getActiveLayer(),i=P(":scope > defs",t._svg),a=G(n),r=i?"<defs>"+G(i)+"</defs>":"",o=n.getBBox();e='<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- created with bpmn-js / http://bpmn.io --\x3e\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+o.width+'" height="'+o.height+'" viewBox="'+o.x+" "+o.y+" "+o.width+" "+o.height+'" version="1.1">'+r+a+"</svg>"}catch(e){t=e}if(this._emit("saveSVG.done",{error:t,svg:e}),t)throw t;return{svg:e}},fe.prototype._setDefinitions=function(e){this._definitions=e},fe.prototype.getModules=function(){return this._modules},fe.prototype.clear=function(){this.getDefinitions()&&q.A.prototype.clear.call(this)},fe.prototype.destroy=function(){var e;q.A.prototype.destroy.call(this),(e=this._container).parentNode&&e.parentNode.removeChild(e)},fe.prototype.on=function(e,t,n,i){return this.get("eventBus").on(e,t,n,i)},fe.prototype.off=function(e,t){this.get("eventBus").off(e,t)},fe.prototype.attachTo=function(e){if(!e)throw new Error("parentNode required");this.detach(),e.get&&e.constructor.prototype.jquery&&(e=e.get(0)),"string"==typeof e&&(e=P(e)),e.appendChild(this._container),this._emit("attach",{}),this.get("canvas").resized()},fe.prototype.getDefinitions=function(){return this._definitions},fe.prototype.detach=function(){const e=this._container,t=e.parentNode;t&&(this._emit("detach",{}),t.removeChild(e))},fe.prototype._init=function(e,t,n){const i=n.modules||this.getModules(n),a=n.additionalModules||[],o=[].concat([{bpmnjs:["value",this],moddle:["value",t]}],i,a),s=(0,r.kp)((0,r.cJ)(n,["additionalModules"]),{canvas:(0,r.kp)({},n.canvas,{container:e}),modules:o});q.A.call(this,s),n&&n.container&&this.attachTo(n.container)},fe.prototype._emit=function(e,t){return this.get("eventBus").fire(e,t)},fe.prototype._createContainer=function(e){const t=C('<div class="bjs-container"></div>');return d(t,{width:ye(e.width),height:ye(e.height),position:e.position}),t},fe.prototype._createModdle=function(e){return new K((0,r.kp)({},this._moddleExtensions,e.moddleExtensions))},fe.prototype._modules=[];const ge={width:"100%",height:"100%",position:"relative"};function ye(e){return e+((0,r.Et)(e)?"px":"")}function be(e){fe.call(this,e),this.on("import.parse.complete",(function(e){e.error||this._collectIds(e.definitions,e.elementsById)}),this),this.on("diagram.destroy",(function(){this.get("moddle").ids.clear()}),this)}(0,i.A)(be,fe),be.prototype._createModdle=function(e){var t=fe.prototype._createModdle.call(this,e);return t.ids=new a.A([32,36,1]),t},be.prototype._collectIds=function(e,t){var n,i=e.$model.ids;for(n in i.clear(),t)i.claim(n,t[n])};var Ee=n(1591),xe=n(97810),we=n(48719),_e=n(64242),Oe=n(24107),Se="hsl(225, 10%, 15%)";function Ae(e,t){return(0,r.zN)(e.eventDefinitions,(function(e){return e.$type===t}))}function ke(e,t,n){var i=(0,ae.S2)(e);return n||i.get("color:background-color")||i.get("bioc:fill")||t||"white"}function Ce(e,t,n){var i=(0,ae.S2)(e);return n||i.get("color:border-color")||i.get("bioc:stroke")||t||Se}function Pe(e,t,n,i){var a=(0,ae.S2)(e).get("label");return i||a&&a.get("color:color")||t||Ce(e,n)}function Te(e){var t=e.x+e.width/2,n=e.y+e.height/2,i=e.width/2,a=[["M",t,n],["m",0,-i],["a",i,i,0,1,1,0,2*i],["a",i,i,0,1,1,0,-2*i],["z"]];return(0,Oe.tx)(a)}function Re(e,t){var n=e.x,i=e.y,a=e.width,r=e.height,o=[["M",n+t,i],["l",a-2*t,0],["a",t,t,0,0,1,t,t],["l",0,r-2*t],["a",t,t,0,0,1,-t,t],["l",2*t-a,0],["a",t,t,0,0,1,-t,-t],["l",0,2*t-r],["a",t,t,0,0,1,t,-t],["z"]];return(0,Oe.tx)(o)}function De(e,t={}){return{width:Ne(e,t),height:$e(e,t)}}function Ne(e,t={}){return(0,r.zy)(t,"width")?t.width:e.width}function $e(e,t={}){return(0,r.zy)(t,"height")?t.height:e.height}var Me=n(46757),Be=new a.A,je=.95;function Fe(e,t,n,i,a,o,s){Ee.A.call(this,t,s);var c=e&&e.defaultFillColor,p=e&&e.defaultStrokeColor,l=e&&e.defaultLabelColor;function m(e){return n.computeStyle(e,{strokeLinecap:"round",strokeLinejoin:"round",stroke:Se,strokeWidth:2,fill:"white"})}function u(e){return n.computeStyle(e,["no-fill"],{strokeLinecap:"round",strokeLinejoin:"round",stroke:Se,strokeWidth:2})}function d(e,t){var{ref:n={x:0,y:0},scale:i=1,element:r,parentGfx:o=a._svg}=t,s=I("marker",{id:e,viewBox:"0 0 20 20",refX:n.x,refY:n.y,markerWidth:20*i,markerHeight:20*i,orient:"auto"});R(s,r);var c=P(":scope > defs",o);c||R(o,c=I("defs")),R(c,s)}function h(e,t,n,i){var a=Be.nextPrefixed("marker-");return function(e,t,n,i,a){"sequenceflow-end"===n&&d(t,{element:I("path",{d:"M 1 5 L 11 10 L 1 15 Z",...m({fill:a,stroke:a,strokeWidth:1})}),ref:{x:11,y:10},scale:.5,parentGfx:e}),"messageflow-start"===n&&d(t,{element:I("circle",{cx:6,cy:6,r:3.5,...m({fill:i,stroke:a,strokeWidth:1,strokeDasharray:[1e4,1]})}),ref:{x:6,y:6},parentGfx:e}),"messageflow-end"===n&&d(t,{element:I("path",{d:"m 1 5 l 0 -3 l 7 3 l -7 3 z",...m({fill:i,stroke:a,strokeWidth:1,strokeDasharray:[1e4,1]})}),ref:{x:8.5,y:5},parentGfx:e}),"association-start"===n&&d(t,{element:I("path",{d:"M 11 5 L 1 10 L 11 15",...u({fill:"none",stroke:a,strokeWidth:1.5,strokeDasharray:[1e4,1]})}),ref:{x:1,y:10},scale:.5,parentGfx:e}),"association-end"===n&&d(t,{element:I("path",{d:"M 1 5 L 11 10 L 1 15",...u({fill:"none",stroke:a,strokeWidth:1.5,strokeDasharray:[1e4,1]})}),ref:{x:11,y:10},scale:.5,parentGfx:e}),"conditional-flow-marker"===n&&d(t,{element:I("path",{d:"M 0 10 L 8 6 L 16 10 L 8 14 Z",...m({fill:i,stroke:a})}),ref:{x:-1,y:10},scale:.5,parentGfx:e}),"conditional-default-flow-marker"===n&&d(t,{element:I("path",{d:"M 6 4 L 10 16",...m({stroke:a,fill:"none"})}),ref:{x:0,y:10},scale:.5,parentGfx:e})}(e,a,t,n,i),"url(#"+a+")"}function f(e,t,n,i,a={}){(0,r.Gv)(i)&&(a=i,i=0),i=i||0,a=m(a);var o=I("circle",{cx:t/2,cy:n/2,r:Math.round((t+n)/4-i),...a});return R(e,o),o}function v(e,t,n,i,a,o){(0,r.Gv)(a)&&(o=a,a=0),a=a||0,o=m(o);var s=I("rect",{x:a,y:a,width:t-2*a,height:n-2*a,rx:i,ry:i,...o});return R(e,s),s}function g(e,t,n,i){n=u(n);var a=(0,Oe.RJ)(t,n,i);return R(e,a),a}function y(e,t,n){return g(e,t,n,5)}function b(e,t,n){n=u(n);var i=I("path",{...n,d:t});return R(e,i),i}function E(e,t,n,i){return b(t,n,(0,r.kp)({"data-marker":e},i))}function x(e){return X[e]}function w(e){return function(t,n,i){return x(e)(t,n,i)}}function _(e,t,n={},a){var r,o=(0,ae.Cf)(e),s="bpmn:IntermediateThrowEvent"===(r=o).$type||"bpmn:EndEvent"===r.$type,l=a||e;return o.get("eventDefinitions")&&o.get("eventDefinitions").length>1?o.get("parallelMultiple")?function(e,t,n={}){return b(e,i.getScaledPath("EVENT_PARALLEL_MULTIPLE",{xScaleFactor:1.2,yScaleFactor:1.2,containerWidth:n.width||t.width,containerHeight:n.height||t.height,position:{mx:.458,my:.194}}),{fill:ke(t,c,n.fill),stroke:Ce(t,p,n.stroke),strokeWidth:1})}(t,l,n):function(e,t,n={},a){return b(e,i.getScaledPath("EVENT_MULTIPLE",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:n.width||t.width,containerHeight:n.height||t.height,position:{mx:.211,my:.36}}),{fill:a?Ce(t,p,n.stroke):ke(t,c,n.fill),stroke:Ce(t,p,n.stroke),strokeWidth:1})}(t,l,n,s):Ae(o,"bpmn:MessageEventDefinition")?function(e,t,n={},a){return b(e,i.getScaledPath("EVENT_MESSAGE",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:n.width||t.width,containerHeight:n.height||t.height,position:{mx:.235,my:.315}}),{fill:a?Ce(t,p,n.stroke):ke(t,c,n.fill),stroke:a?ke(t,c,n.fill):Ce(t,p,n.stroke),strokeWidth:1})}(t,l,n,s):Ae(o,"bpmn:TimerEventDefinition")?function(e,t,n={}){var a=n.width||t.width,r=n.height||t.height,o=n.width?1:2,s=f(e,a,r,.2*r,{fill:ke(t,c,n.fill),stroke:Ce(t,p,n.stroke),strokeWidth:o});b(e,i.getScaledPath("EVENT_TIMER_WH",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:a,containerHeight:r,position:{mx:.5,my:.5}}),{stroke:Ce(t,p,n.stroke),strokeWidth:o});for(var l=0;l<12;l++){var m=a/2,u=r/2;b(e,i.getScaledPath("EVENT_TIMER_LINE",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:a,containerHeight:r,position:{mx:.5,my:.5}}),{strokeWidth:1,stroke:Ce(t,p,n.stroke),transform:"rotate("+30*l+","+u+","+m+")"})}return s}(t,l,n):Ae(o,"bpmn:ConditionalEventDefinition")?function(e,t,n={}){return b(e,i.getScaledPath("EVENT_CONDITIONAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:n.width||t.width,containerHeight:n.height||t.height,position:{mx:.5,my:.222}}),{fill:ke(t,c,n.fill),stroke:Ce(t,p,n.stroke),strokeWidth:1})}(t,l,n):Ae(o,"bpmn:SignalEventDefinition")?function(e,t,n={},a){return b(e,i.getScaledPath("EVENT_SIGNAL",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:n.width||t.width,containerHeight:n.height||t.height,position:{mx:.5,my:.2}}),{strokeWidth:1,fill:a?Ce(t,p,n.stroke):ke(t,c,n.fill),stroke:Ce(t,p,n.stroke)})}(t,l,n,s):Ae(o,"bpmn:EscalationEventDefinition")?function(e,t,n={},a){return b(e,i.getScaledPath("EVENT_ESCALATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:n.width||t.width,containerHeight:n.height||t.height,position:{mx:.5,my:.2}}),{fill:a?Ce(t,p,n.stroke):ke(t,c,n.fill),stroke:Ce(t,p,n.stroke),strokeWidth:1})}(t,l,n,s):Ae(o,"bpmn:LinkEventDefinition")?function(e,t,n={},a){return b(e,i.getScaledPath("EVENT_LINK",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.57,my:.263}}),{fill:a?Ce(t,p,n.stroke):ke(t,c,n.fill),stroke:Ce(t,p,n.stroke),strokeWidth:1})}(t,l,n,s):Ae(o,"bpmn:ErrorEventDefinition")?function(e,t,n={},a){return b(e,i.getScaledPath("EVENT_ERROR",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:n.width||t.width,containerHeight:n.height||t.height,position:{mx:.2,my:.722}}),{fill:a?Ce(t,p,n.stroke):ke(t,c,n.fill),stroke:Ce(t,p,n.stroke),strokeWidth:1})}(t,l,n,s):Ae(o,"bpmn:CancelEventDefinition")?function(e,t,n={},a){var r=b(e,i.getScaledPath("EVENT_CANCEL_45",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.638,my:-.055}}),{fill:a?Ce(t,p,n.stroke):"none",stroke:Ce(t,p,n.stroke),strokeWidth:1});return(0,Me.e$)(r,45),r}(t,l,n,s):Ae(o,"bpmn:CompensateEventDefinition")?function(e,t,n={},a){return b(e,i.getScaledPath("EVENT_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:n.width||t.width,containerHeight:n.height||t.height,position:{mx:.22,my:.5}}),{fill:a?Ce(t,p,n.stroke):ke(t,c,n.fill),stroke:Ce(t,p,n.stroke),strokeWidth:1})}(t,l,n,s):Ae(o,"bpmn:TerminateEventDefinition")?function(e,t,n={}){return f(e,t.width,t.height,8,{fill:Ce(t,p,n.stroke),stroke:Ce(t,p,n.stroke),strokeWidth:4})}(t,l,n):null}var O={ParticipantMultiplicityMarker:function(e,t,n={}){var a=Ne(t,n),r=$e(t,n);E("participant-multiplicity",e,i.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:a,containerHeight:r,position:{mx:(a/2-6)/a,my:(r-15)/r}}),{strokeWidth:2,fill:ke(t,c,n.fill),stroke:Ce(t,p,n.stroke)})},SubProcessMarker:function(e,t,n={}){var a=v(e,14,14,0,{strokeWidth:1,fill:ke(t,c,n.fill),stroke:Ce(t,p,n.stroke)});(0,Me.Tl)(a,t.width/2-7.5,t.height-20),E("sub-process",e,i.getScaledPath("MARKER_SUB_PROCESS",{xScaleFactor:1.5,yScaleFactor:1.5,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2-7.5)/t.width,my:(t.height-20)/t.height}}),{fill:ke(t,c,n.fill),stroke:Ce(t,p,n.stroke)})},ParallelMarker:function(e,t,n){var a=Ne(t,n),r=$e(t,n);E("parallel",e,i.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:a,containerHeight:r,position:{mx:(a/2+n.parallel)/a,my:(r-20)/r}}),{fill:ke(t,c,n.fill),stroke:Ce(t,p,n.stroke)})},SequentialMarker:function(e,t,n){E("sequential",e,i.getScaledPath("MARKER_SEQUENTIAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+n.seq)/t.width,my:(t.height-19)/t.height}}),{fill:ke(t,c,n.fill),stroke:Ce(t,p,n.stroke)})},CompensationMarker:function(e,t,n){E("compensation",e,i.getScaledPath("MARKER_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+n.compensation)/t.width,my:(t.height-13)/t.height}}),{strokeWidth:1,fill:ke(t,c,n.fill),stroke:Ce(t,p,n.stroke)})},LoopMarker:function(e,t,n){var a=Ne(t,n),r=$e(t,n);E("loop",e,i.getScaledPath("MARKER_LOOP",{xScaleFactor:1,yScaleFactor:1,containerWidth:a,containerHeight:r,position:{mx:(a/2+n.loop)/a,my:(r-7)/r}}),{strokeWidth:1.5,fill:"none",stroke:Ce(t,p,n.stroke),strokeMiterlimit:.5})},AdhocMarker:function(e,t,n){var a=Ne(t,n),r=$e(t,n);E("adhoc",e,i.getScaledPath("MARKER_ADHOC",{xScaleFactor:1,yScaleFactor:1,containerWidth:a,containerHeight:r,position:{mx:(a/2+n.adhoc)/a,my:(r-15)/r}}),{strokeWidth:1,fill:Ce(t,p,n.stroke),stroke:Ce(t,p,n.stroke)})}};function S(e,t,n,i){O[e](t,n,i)}function A(e,t,n=[],i={}){i={fill:i.fill,stroke:i.stroke,width:Ne(t,i),height:$e(t,i)};var a=(0,ae.Cf)(t),o=n.includes("SubProcessMarker");i=o?{...i,seq:-21,parallel:-22,compensation:-25,loop:-18,adhoc:10}:{...i,seq:-5,parallel:-6,compensation:-7,loop:0,adhoc:-8},a.get("isForCompensation")&&n.push("CompensationMarker"),(0,ae.is)(a,"bpmn:AdHocSubProcess")&&(n.push("AdhocMarker"),o||(0,r.kp)(i,{compensation:i.compensation-18}));var s=a.get("loopCharacteristics"),c=s&&s.get("isSequential");s&&((0,r.kp)(i,{compensation:i.compensation-18}),n.includes("AdhocMarker")&&(0,r.kp)(i,{seq:-23,loop:-18,parallel:-24}),void 0===c&&n.push("LoopMarker"),!1===c&&n.push("ParallelMarker"),!0===c&&n.push("SequentialMarker")),n.includes("CompensationMarker")&&1===n.length&&(0,r.kp)(i,{compensation:-8}),(0,r.jJ)(n,(function(n){S(n,e,t,i)}))}function k(e,t,n={}){n=(0,r.kp)({size:{width:100}},n);var i,a=o.createText(t||"",n);return(i=a,new B(i)).add("djs-label"),R(e,a),a}function C(e,t,n,i={}){var a=(0,ae.Cf)(t),r=De({x:t.x,y:t.y,width:t.width,height:t.height},i);return k(e,a.name,{align:n,box:r,padding:7,style:{fill:Pe(t,l,p,i.stroke)}})}function T(e,t,n,i={}){var a=(0,xe.$b)(n),r=k(e,t,{box:{height:30,width:a?$e(n,i):Ne(n,i)},align:"center-middle",style:{fill:Pe(n,l,p,i.stroke)}});if(a){var o=-1*$e(n,i);(0,Me.pd)(r,0,-o,270)}}function D(e,t,n={}){var{width:i,height:a}=De(t,n);return v(e,i,a,10,{...n,fill:ke(t,c,n.fill),fillOpacity:je,stroke:Ce(t,p,n.stroke)})}function N(e,t,n={}){var i=(0,ae.Cf)(t),a=ke(t,c,n.fill),r=Ce(t,p,n.stroke);return"One"!==i.get("associationDirection")&&"Both"!==i.get("associationDirection")||(n.markerEnd=h(e,"association-end",a,r)),"Both"===i.get("associationDirection")&&(n.markerStart=h(e,"association-start",a,r)),n=Qe(n,["markerStart","markerEnd"]),y(e,t.waypoints,{...n,stroke:r,strokeDasharray:"0, 5"})}function M(e,t,n={}){var a=ke(t,c,n.fill),r=Ce(t,p,n.stroke),o=b(e,i.getScaledPath("DATA_OBJECT_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.474,my:.296}}),{fill:a,fillOpacity:je,stroke:r});return function(e){var t=e.dataObjectRef;return e.isCollection||t&&t.isCollection}((0,ae.Cf)(t))&&b(e,i.getScaledPath("DATA_OBJECT_COLLECTION_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.33,my:(t.height-18)/t.height}}),{strokeWidth:2,fill:a,stroke:r}),o}function j(e,t,n={}){return f(e,t.width,t.height,{fillOpacity:je,...n,fill:ke(t,c,n.fill),stroke:Ce(t,p,n.stroke)})}function F(e,t,n={}){return function(e,t,n,i){var a=t/2,r=n/2,o=[{x:a,y:0},{x:t,y:r},{x:a,y:n},{x:0,y:r}].map((function(e){return e.x+","+e.y})).join(" ");i=m(i);var s=I("polygon",{...i,points:o});return R(e,s),s}(e,t.width,t.height,{fill:ke(t,c,n.fill),fillOpacity:je,stroke:Ce(t,p,n.stroke)})}function Q(e,t,n={}){var i=v(e,Ne(t,n),$e(t,n),0,{fill:ke(t,c,n.fill),fillOpacity:n.fillOpacity||je,stroke:Ce(t,p,n.stroke),strokeWidth:1.5}),a=(0,ae.Cf)(t);return(0,ae.is)(a,"bpmn:Lane")&&T(e,a.get("name"),t,n),i}function L(e,t,n={}){var i=D(e,t,n),a=(0,xe.Av)(t);if((0,xe.Q1)(t)&&($(i,{strokeDasharray:"0, 5.5",strokeWidth:2.5}),!a)){var r=((0,ae.Cf)(t).flowElements||[]).filter((e=>(0,ae.is)(e,"bpmn:StartEvent")));1===r.length&&function(e,t,n,i){var a={fill:ke(i,c,n.fill),stroke:Ce(i,p,n.stroke),width:22,height:22},r=(0,ae.Cf)(e).isInterrupting;f(t,20,20,{fill:a.fill,stroke:a.stroke,strokeWidth:r?1:1.2,strokeDasharray:r?0:3,transform:"translate(1,1)"}),_(e,t,a,i)}(r[0],e,n,t)}return C(e,t,a?"center-top":"center-middle",n),A(e,t,a?void 0:["SubProcessMarker"],n),i}function z(e,t,n={}){var i=D(e,t,n);return C(e,t,"center-middle",n),A(e,t,void 0,n),i}var X=this.handlers={"bpmn:AdHocSubProcess":function(e,t,n={}){return L(e,t,n=(0,xe.Av)(t)?Qe(n,["fill","stroke","width","height"]):Qe(n,["fill","stroke"]))},"bpmn:Association":function(e,t,n={}){return N(e,t,n=Qe(n,["fill","stroke"]))},"bpmn:BoundaryEvent":function(e,t,n={}){var{renderIcon:i=!0}=n;n=Qe(n,["fill","stroke"]);var a=(0,ae.Cf)(t).get("cancelActivity");n={strokeWidth:1.5,fill:ke(t,c,n.fill),fillOpacity:1,stroke:Ce(t,p,n.stroke)},a||(n.strokeDasharray="6");var r=j(e,t,n);return f(e,t.width,t.height,3,{...n,fill:"none"}),i&&_(t,e,n),r},"bpmn:BusinessRuleTask":function(e,t,n={}){var a=z(e,t,n=Qe(n,["fill","stroke"]));return $(b(e,i.getScaledPath("TASK_TYPE_BUSINESS_RULE_MAIN",{abspos:{x:8,y:8}})),{fill:ke(t,c,n.fill),stroke:Ce(t,p,n.stroke),strokeWidth:1}),$(b(e,i.getScaledPath("TASK_TYPE_BUSINESS_RULE_HEADER",{abspos:{x:8,y:8}})),{fill:Ce(t,p,n.stroke),stroke:Ce(t,p,n.stroke),strokeWidth:1}),a},"bpmn:CallActivity":function(e,t,n={}){return n=Qe(n,["fill","stroke"]),L(e,t,{strokeWidth:5,...n})},"bpmn:ComplexGateway":function(e,t,n={}){var a=F(e,t,n=Qe(n,["fill","stroke"]));return b(e,i.getScaledPath("GATEWAY_COMPLEX",{xScaleFactor:.5,yScaleFactor:.5,containerWidth:t.width,containerHeight:t.height,position:{mx:.46,my:.26}}),{fill:Ce(t,p,n.stroke),stroke:Ce(t,p,n.stroke),strokeWidth:1}),a},"bpmn:DataInput":function(e,t,n={}){n=Qe(n,["fill","stroke"]);var a=i.getRawPath("DATA_ARROW"),r=M(e,t,n);return b(e,a,{fill:"none",stroke:Ce(t,p,n.stroke),strokeWidth:1}),r},"bpmn:DataInputAssociation":function(e,t,n={}){return n=Qe(n,["fill","stroke"]),N(e,t,{...n,markerEnd:h(e,"association-end",ke(t,c,n.fill),Ce(t,p,n.stroke))})},"bpmn:DataObject":function(e,t,n={}){return M(e,t,n=Qe(n,["fill","stroke"]))},"bpmn:DataObjectReference":w("bpmn:DataObject"),"bpmn:DataOutput":function(e,t,n={}){n=Qe(n,["fill","stroke"]);var a=i.getRawPath("DATA_ARROW"),r=M(e,t,n);return b(e,a,{strokeWidth:1,fill:ke(t,c,n.fill),stroke:Ce(t,p,n.stroke)}),r},"bpmn:DataOutputAssociation":function(e,t,n={}){return n=Qe(n,["fill","stroke"]),N(e,t,{...n,markerEnd:h(e,"association-end",ke(t,c,n.fill),Ce(t,p,n.stroke))})},"bpmn:DataStoreReference":function(e,t,n={}){return n=Qe(n,["fill","stroke"]),b(e,i.getScaledPath("DATA_STORE",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:0,my:.133}}),{fill:ke(t,c,n.fill),fillOpacity:je,stroke:Ce(t,p,n.stroke),strokeWidth:2})},"bpmn:EndEvent":function(e,t,n={}){var{renderIcon:i=!0}=n;n=Qe(n,["fill","stroke"]);var a=j(e,t,{...n,strokeWidth:4});return i&&_(t,e,n),a},"bpmn:EventBasedGateway":function(e,t,n={}){n=Qe(n,["fill","stroke"]);var a=(0,ae.Cf)(t),r=F(e,t,n);f(e,t.width,t.height,.2*t.height,{fill:ke(t,"none",n.fill),stroke:Ce(t,p,n.stroke),strokeWidth:1});var o=a.get("eventGatewayType"),s=!!a.get("instantiate");if("Parallel"===o){var c=i.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:t.width,containerHeight:t.height,position:{mx:.474,my:.296}});b(e,c,{fill:"none",stroke:Ce(t,p,n.stroke),strokeWidth:1})}else"Exclusive"===o&&(s||f(e,t.width,t.height,.26*t.height,{fill:"none",stroke:Ce(t,p,n.stroke),strokeWidth:1}),function(){var a=i.getScaledPath("GATEWAY_EVENT_BASED",{xScaleFactor:.18,yScaleFactor:.18,containerWidth:t.width,containerHeight:t.height,position:{mx:.36,my:.44}});b(e,a,{fill:"none",stroke:Ce(t,p,n.stroke),strokeWidth:2})}());return r},"bpmn:ExclusiveGateway":function(e,t,n={}){var a=F(e,t,n=Qe(n,["fill","stroke"])),r=i.getScaledPath("GATEWAY_EXCLUSIVE",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:t.width,containerHeight:t.height,position:{mx:.32,my:.3}});return(0,ae.S2)(t).get("isMarkerVisible")&&b(e,r,{fill:Ce(t,p,n.stroke),stroke:Ce(t,p,n.stroke),strokeWidth:1}),a},"bpmn:Gateway":function(e,t,n={}){return F(e,t,n=Qe(n,["fill","stroke"]))},"bpmn:Group":function(e,t,n={}){return n=Qe(n,["fill","stroke","width","height"]),v(e,t.width,t.height,10,{stroke:Ce(t,p,n.stroke),strokeWidth:1.5,strokeDasharray:"10, 6, 0, 6",fill:"none",pointerEvents:"none",width:Ne(t,n),height:$e(t,n)})},"bpmn:InclusiveGateway":function(e,t,n={}){var i=F(e,t,n=Qe(n,["fill","stroke"]));return f(e,t.width,t.height,.24*t.height,{fill:ke(t,c,n.fill),stroke:Ce(t,p,n.stroke),strokeWidth:2.5}),i},"bpmn:IntermediateEvent":function(e,t,n={}){var{renderIcon:i=!0}=n;n=Qe(n,["fill","stroke"]);var a=j(e,t,{...n,strokeWidth:1.5});return f(e,t.width,t.height,3,{fill:"none",stroke:Ce(t,p,n.stroke),strokeWidth:1.5}),i&&_(t,e,n),a},"bpmn:IntermediateCatchEvent":w("bpmn:IntermediateEvent"),"bpmn:IntermediateThrowEvent":w("bpmn:IntermediateEvent"),"bpmn:Lane":function(e,t,n={}){return n=Qe(n,["fill","stroke","width","height"]),Q(e,t,{...n,fillOpacity:.25})},"bpmn:ManualTask":function(e,t,n={}){var a=z(e,t,n=Qe(n,["fill","stroke"]));return b(e,i.getScaledPath("TASK_TYPE_MANUAL",{abspos:{x:17,y:15}}),{fill:ke(t,c,n.fill),stroke:Ce(t,p,n.stroke),strokeWidth:.5}),a},"bpmn:MessageFlow":function(e,t,n={}){n=Qe(n,["fill","stroke"]);var a=(0,ae.Cf)(t),r=(0,ae.S2)(t),o=ke(t,c,n.fill),s=Ce(t,p,n.stroke),l=y(e,t.waypoints,{markerEnd:h(e,"messageflow-end",o,s),markerStart:h(e,"messageflow-start",o,s),stroke:s,strokeDasharray:"10, 11",strokeWidth:1.5});if(a.get("messageRef")){var m=l.getPointAtLength(l.getTotalLength()/2),u=i.getScaledPath("MESSAGE_FLOW_MARKER",{abspos:{x:m.x,y:m.y}}),d={strokeWidth:1};"initiating"===r.get("messageVisibleKind")?(d.fill=o,d.stroke=s):(d.fill=s,d.stroke=o);var f=b(e,u,d),v=k(e,a.get("messageRef").get("name"),{align:"center-top",fitBox:!0,style:{fill:s}}),g=f.getBBox(),E=v.getBBox(),x=m.x-E.width/2,w=m.y+g.height/2+10;(0,Me.pd)(v,x,w,0)}return l},"bpmn:ParallelGateway":function(e,t,n={}){var a=F(e,t,n=Qe(n,["fill","stroke"]));return b(e,i.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.6,yScaleFactor:.6,containerWidth:t.width,containerHeight:t.height,position:{mx:.46,my:.2}}),{fill:Ce(t,p,n.stroke),stroke:Ce(t,p,n.stroke),strokeWidth:1}),a},"bpmn:Participant":function(e,t,n={}){var i=Q(e,t,n=Qe(n,["fill","stroke","width","height"])),a=(0,xe.Av)(t),r=(0,xe.$b)(t),o=(0,ae.Cf)(t),s=o.get("name");if(a)g(e,r?[{x:30,y:0},{x:30,y:$e(t,n)}]:[{x:0,y:30},{x:Ne(t,n),y:30}],{stroke:Ce(t,p,n.stroke),strokeWidth:1.5}),T(e,s,t,n);else{var c=De(t,n);r||(c.height=Ne(t,n),c.width=$e(t,n));var m=k(e,s,{box:c,align:"center-middle",style:{fill:Pe(t,l,p,n.stroke)}});if(!r){var u=-1*$e(t,n);(0,Me.pd)(m,0,-u,270)}}return o.get("participantMultiplicity")&&S("ParticipantMultiplicityMarker",e,t,n),i},"bpmn:ReceiveTask":function(e,t,n={}){n=Qe(n,["fill","stroke"]);var a,r=(0,ae.Cf)(t),o=z(e,t,n);return r.get("instantiate")?(f(e,28,28,4.4,{fill:ke(t,c,n.fill),stroke:Ce(t,p,n.stroke),strokeWidth:1}),a=i.getScaledPath("TASK_TYPE_INSTANTIATING_SEND",{abspos:{x:7.77,y:9.52}})):a=i.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:21,containerHeight:14,position:{mx:.3,my:.4}}),b(e,a,{fill:ke(t,c,n.fill),stroke:Ce(t,p,n.stroke),strokeWidth:1}),o},"bpmn:ScriptTask":function(e,t,n={}){var a=z(e,t,n=Qe(n,["fill","stroke"]));return b(e,i.getScaledPath("TASK_TYPE_SCRIPT",{abspos:{x:15,y:20}}),{fill:ke(t,c,n.fill),stroke:Ce(t,p,n.stroke),strokeWidth:1}),a},"bpmn:SendTask":function(e,t,n={}){var a=z(e,t,n=Qe(n,["fill","stroke"]));return b(e,i.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:1,yScaleFactor:1,containerWidth:21,containerHeight:14,position:{mx:.285,my:.357}}),{fill:Ce(t,p,n.stroke),stroke:ke(t,c,n.fill),strokeWidth:1}),a},"bpmn:SequenceFlow":function(e,t,n={}){n=Qe(n,["fill","stroke"]);var i=ke(t,c,n.fill),a=Ce(t,p,n.stroke),r=y(e,t.waypoints,{markerEnd:h(e,"sequenceflow-end",i,a),stroke:a}),o=(0,ae.Cf)(t),{source:s}=t;if(s){var l=(0,ae.Cf)(s);o.get("conditionExpression")&&(0,ae.is)(l,"bpmn:Activity")&&$(r,{markerStart:h(e,"conditional-flow-marker",i,a)}),l.get("default")&&((0,ae.is)(l,"bpmn:Gateway")||(0,ae.is)(l,"bpmn:Activity"))&&l.get("default")===o&&$(r,{markerStart:h(e,"conditional-default-flow-marker",i,a)})}return r},"bpmn:ServiceTask":function(e,t,n={}){var a=z(e,t,n=Qe(n,["fill","stroke"]));return f(e,10,10,{fill:ke(t,c,n.fill),stroke:"none",transform:"translate(6, 6)"}),b(e,i.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:12,y:18}}),{fill:ke(t,c,n.fill),stroke:Ce(t,p,n.stroke),strokeWidth:1}),f(e,10,10,{fill:ke(t,c,n.fill),stroke:"none",transform:"translate(11, 10)"}),b(e,i.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:17,y:22}}),{fill:ke(t,c,n.fill),stroke:Ce(t,p,n.stroke),strokeWidth:1}),a},"bpmn:StartEvent":function(e,t,n={}){var{renderIcon:i=!0}=n;n=Qe(n,["fill","stroke"]),(0,ae.Cf)(t).get("isInterrupting")||(n={...n,strokeDasharray:"6"});var a=j(e,t,n);return i&&_(t,e,n),a},"bpmn:SubProcess":function(e,t,n={}){return L(e,t,n=(0,xe.Av)(t)?Qe(n,["fill","stroke","width","height"]):Qe(n,["fill","stroke"]))},"bpmn:Task":function(e,t,n={}){return z(e,t,n=Qe(n,["fill","stroke"]))},"bpmn:TextAnnotation":function(e,t,n={}){n=Qe(n,["fill","stroke","width","height"]);var{width:a,height:r}=De(t,n),o=v(e,a,r,0,0,{fill:"none",stroke:"none"});return b(e,i.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:a,containerHeight:r,position:{mx:0,my:0}}),{stroke:Ce(t,p,n.stroke)}),k(e,(0,ae.Cf)(t).get("text")||"",{align:"left-top",box:De(t,n),padding:7,style:{fill:Pe(t,l,p,n.stroke)}}),o},"bpmn:Transaction":function(e,t,i={}){i=(0,xe.Av)(t)?Qe(i,["fill","stroke","width","height"]):Qe(i,["fill","stroke"]);var a=L(e,t,{strokeWidth:1.5,...i}),r=n.style(["no-fill","no-events"],{stroke:Ce(t,p,i.stroke),strokeWidth:1.5});return(0,xe.Av)(t)||(i={}),v(e,Ne(t,i),$e(t,i),7,3,r),a},"bpmn:UserTask":function(e,t,n={}){var a=z(e,t,n=Qe(n,["fill","stroke"]));return b(e,i.getScaledPath("TASK_TYPE_USER_1",{abspos:{x:15,y:12}}),{fill:ke(t,c,n.fill),stroke:Ce(t,p,n.stroke),strokeWidth:.5}),b(e,i.getScaledPath("TASK_TYPE_USER_2",{abspos:{x:15,y:12}}),{fill:ke(t,c,n.fill),stroke:Ce(t,p,n.stroke),strokeWidth:.5}),b(e,i.getScaledPath("TASK_TYPE_USER_3",{abspos:{x:15,y:12}}),{fill:Ce(t,p,n.stroke),stroke:Ce(t,p,n.stroke),strokeWidth:.5}),a},label:function(e,t,n={}){return function(e,t,n={}){var i={width:90,height:30,x:t.width/2+t.x,y:t.height/2+t.y};return k(e,(0,we.p9)(t),{box:i,fitBox:!0,style:(0,r.kp)({},o.getExternalStyle(),{fill:Pe(t,l,p,n.stroke)})})}(e,t,n)}};this._drawPath=b,this._renderer=x}function Qe(e,t=[]){return t.reduce(((t,n)=>(e[n]&&(t[n]=e[n]),t)),{})}(0,i.A)(Fe,Ee.A),Fe.$inject=["config.bpmnRenderer","eventBus","styles","pathMap","canvas","textRenderer"],Fe.prototype.canRender=function(e){return(0,ae.is)(e,"bpmn:BaseElement")},Fe.prototype.drawShape=function(e,t,n={}){var{type:i}=t;return this._renderer(i)(e,t,n)},Fe.prototype.drawConnection=function(e,t,n={}){var{type:i}=t;return this._renderer(i)(e,t,n)},Fe.prototype.getShapePath=function(e){return(0,_e.J2)(e)?Re(e,4):(0,ae.is)(e,"bpmn:Event")?Te(e):(0,ae.is)(e,"bpmn:Activity")?Re(e,10):(0,ae.is)(e,"bpmn:Gateway")?function(e){var t=e.width/2,n=e.height/2,i=[["M",e.x+t,e.y],["l",t,n],["l",-t,n],["l",-t,-n],["z"]];return(0,Oe.tx)(i)}(e):function(e){var t=e.x,n=e.y,i=e.width,a=[["M",t,n],["l",i,0],["l",0,e.height],["l",-i,0],["z"]];return(0,Oe.tx)(a)}(e)};var Ie=n(4156);function Le(e){var t=(0,r.kp)({fontFamily:"Arial, sans-serif",fontSize:12,fontWeight:"normal",lineHeight:1.2},e&&e.defaultStyle||{}),n=parseInt(t.fontSize,10)-1,i=(0,r.kp)({},t,{fontSize:n},e&&e.externalStyle||{}),a=new Ie.A({style:t});this.getExternalLabelBounds=function(e,t){var n=a.getDimensions(t,{box:{width:90,height:30},style:i});return{x:Math.round(e.x+e.width/2-n.width/2),y:Math.round(e.y),width:Math.ceil(n.width),height:Math.ceil(n.height)}},this.getTextAnnotationBounds=function(e,n){var i=a.getDimensions(n,{box:e,style:t,align:"left-top",padding:5});return{x:e.x,y:e.y,width:e.width,height:Math.max(30,Math.round(i.height))}},this.createText=function(e,t){return a.createText(e,t||{})},this.getDefaultStyle=function(){return t},this.getExternalStyle=function(){return i}}Le.$inject=["config.textRenderer"];var ze=/\{([^{}]+)\}/g,Xe=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g;const Ve={__init__:["bpmnRenderer"],bpmnRenderer:["type",Fe],textRenderer:["type",Le],pathMap:["type",function(){this.pathMap={EVENT_MESSAGE:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:36,width:36,heightElements:[6,14],widthElements:[10.5,21]},EVENT_SIGNAL:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x1},0 Z",height:36,width:36,heightElements:[18],widthElements:[10,20]},EVENT_ESCALATION:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x0},-{e.y1} l -{e.x0},{e.y1} Z",height:36,width:36,heightElements:[20,7],widthElements:[8]},EVENT_CONDITIONAL:{d:"M {e.x0},{e.y0} l {e.x1},0 l 0,{e.y2} l -{e.x1},0 Z M {e.x2},{e.y3} l {e.x0},0 M {e.x2},{e.y4} l {e.x0},0 M {e.x2},{e.y5} l {e.x0},0 M {e.x2},{e.y6} l {e.x0},0 M {e.x2},{e.y7} l {e.x0},0 M {e.x2},{e.y8} l {e.x0},0 ",height:36,width:36,heightElements:[8.5,14.5,18,11.5,14.5,17.5,20.5,23.5,26.5],widthElements:[10.5,14.5,12.5]},EVENT_LINK:{d:"m {mx},{my} 0,{e.y0} -{e.x1},0 0,{e.y1} {e.x1},0 0,{e.y0} {e.x0},-{e.y2} -{e.x0},-{e.y2} z",height:36,width:36,heightElements:[4.4375,6.75,7.8125],widthElements:[9.84375,13.5]},EVENT_ERROR:{d:"m {mx},{my} {e.x0},-{e.y0} {e.x1},-{e.y1} {e.x2},{e.y2} {e.x3},-{e.y3} -{e.x4},{e.y4} -{e.x5},-{e.y5} z",height:36,width:36,heightElements:[.023,8.737,8.151,16.564,10.591,8.714],widthElements:[.085,6.672,6.97,4.273,5.337,6.636]},EVENT_CANCEL_45:{d:"m {mx},{my} -{e.x1},0 0,{e.x0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:36,width:36,heightElements:[4.75,8.5],widthElements:[4.75,8.5]},EVENT_COMPENSATION:{d:"m {mx},{my} {e.x0},-{e.y0} 0,{e.y1} z m {e.x1},-{e.y2} {e.x2},-{e.y3} 0,{e.y1} -{e.x2},-{e.y3} z",height:36,width:36,heightElements:[6.5,13,.4,6.1],widthElements:[9,9.3,8.7]},EVENT_TIMER_WH:{d:"M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} ",height:36,width:36,heightElements:[10,2],widthElements:[3,7]},EVENT_TIMER_LINE:{d:"M {mx},{my} m {e.x0},{e.y0} l -{e.x1},{e.y1} ",height:36,width:36,heightElements:[10,3],widthElements:[0,0]},EVENT_MULTIPLE:{d:"m {mx},{my} {e.x1},-{e.y0} {e.x1},{e.y0} -{e.x0},{e.y1} -{e.x2},0 z",height:36,width:36,heightElements:[6.28099,12.56199],widthElements:[3.1405,9.42149,12.56198]},EVENT_PARALLEL_MULTIPLE:{d:"m {mx},{my} {e.x0},0 0,{e.y1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} -{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z",height:36,width:36,heightElements:[2.56228,7.68683],widthElements:[2.56228,7.68683]},GATEWAY_EXCLUSIVE:{d:"m {mx},{my} {e.x0},{e.y0} {e.x1},{e.y0} {e.x2},0 {e.x4},{e.y2} {e.x4},{e.y1} {e.x2},0 {e.x1},{e.y3} {e.x0},{e.y3} {e.x3},0 {e.x5},{e.y1} {e.x5},{e.y2} {e.x3},0 z",height:17.5,width:17.5,heightElements:[8.5,6.5312,-6.5312,-8.5],widthElements:[6.5,-6.5,3,-3,5,-5]},GATEWAY_PARALLEL:{d:"m {mx},{my} 0,{e.y1} -{e.x1},0 0,{e.y0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:30,width:30,heightElements:[5,12.5],widthElements:[5,12.5]},GATEWAY_EVENT_BASED:{d:"m {mx},{my} {e.x0},{e.y0} {e.x0},{e.y1} {e.x1},{e.y2} {e.x2},0 z",height:11,width:11,heightElements:[-6,6,12,-12],widthElements:[9,-3,-12]},GATEWAY_COMPLEX:{d:"m {mx},{my} 0,{e.y0} -{e.x0},-{e.y1} -{e.x1},{e.y2} {e.x0},{e.y1} -{e.x2},0 0,{e.y3} {e.x2},0  -{e.x0},{e.y1} l {e.x1},{e.y2} {e.x0},-{e.y1} 0,{e.y0} {e.x3},0 0,-{e.y0} {e.x0},{e.y1} {e.x1},-{e.y2} -{e.x0},-{e.y1} {e.x2},0 0,-{e.y3} -{e.x2},0 {e.x0},-{e.y1} -{e.x1},-{e.y2} -{e.x0},{e.y1} 0,-{e.y0} -{e.x3},0 z",height:17.125,width:17.125,heightElements:[4.875,3.4375,2.125,3],widthElements:[3.4375,2.125,4.875,3]},DATA_OBJECT_PATH:{d:"m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0",height:61,width:51,heightElements:[10,50,60],widthElements:[10,40,50,60]},DATA_OBJECT_COLLECTION_PATH:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},DATA_ARROW:{d:"m 5,9 9,0 0,-3 5,5 -5,5 0,-3 -9,0 z",height:61,width:51,heightElements:[],widthElements:[]},DATA_STORE:{d:"m  {mx},{my} l  0,{e.y2} c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 l  0,-{e.y2} c -{e.x0},-{e.y1} -{e.x1},-{e.y1} -{e.x2},0c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1} {e.x2},0m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0",height:61,width:61,heightElements:[7,10,45],widthElements:[2,58,60]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",height:30,width:10,heightElements:[30],widthElements:[10]},MARKER_SUB_PROCESS:{d:"m{mx},{my} m 7,2 l 0,10 m -5,-5 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_PARALLEL:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},MARKER_SEQUENTIAL:{d:"m{mx},{my} m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_COMPENSATION:{d:"m {mx},{my} 7,-5 0,10 z m 7.1,-0.3 6.9,-4.7 0,10 -6.9,-4.7 z",height:10,width:21,heightElements:[],widthElements:[]},MARKER_LOOP:{d:"m {mx},{my} c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 -6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902",height:13.9,width:13.7,heightElements:[],widthElements:[]},MARKER_ADHOC:{d:"m {mx},{my} m 0.84461,2.64411 c 1.05533,-1.23780996 2.64337,-2.07882 4.29653,-1.97997996 2.05163,0.0805 3.85579,1.15803 5.76082,1.79107 1.06385,0.34139996 2.24454,0.1438 3.18759,-0.43767 0.61743,-0.33642 1.2775,-0.64078 1.7542,-1.17511 0,0.56023 0,1.12046 0,1.6807 -0.98706,0.96237996 -2.29792,1.62393996 -3.6918,1.66181996 -1.24459,0.0927 -2.46671,-0.2491 -3.59505,-0.74812 -1.35789,-0.55965 -2.75133,-1.33436996 -4.27027,-1.18121996 -1.37741,0.14601 -2.41842,1.13685996 -3.44288,1.96782996 z",height:4,width:15,heightElements:[],widthElements:[]},TASK_TYPE_SEND:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:14,width:21,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_SCRIPT:{d:"m {mx},{my} c 9.966553,-6.27276 -8.000926,-7.91932 2.968968,-14.938 l -8.802728,0 c -10.969894,7.01868 6.997585,8.66524 -2.968967,14.938 z m -7,-12 l 5,0 m -4.5,3 l 4.5,0 m -3,3 l 5,0m -4,3 l 5,0",height:15,width:12.6,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_USER_1:{d:"m {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 -4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 zm -8,6 l 0,5.5 m 11,0 l 0,-5"},TASK_TYPE_USER_2:{d:"m {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 -2.66499998,0 -4.822,-1.981 -4.822,-4.4310005 "},TASK_TYPE_USER_3:{d:"m {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 -4.20799998,3.36699999 -4.20699998,4.34799999 z"},TASK_TYPE_MANUAL:{d:"m {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 -0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 -1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 -10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 -0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 -1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 -0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 -5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z"},TASK_TYPE_INSTANTIATING_SEND:{d:"m {mx},{my} l 0,8.4 l 12.6,0 l 0,-8.4 z l 6.3,3.6 l 6.3,-3.6"},TASK_TYPE_SERVICE:{d:"m {mx},{my} v -1.71335 c 0.352326,-0.0705 0.703932,-0.17838 1.047628,-0.32133 0.344416,-0.14465 0.665822,-0.32133 0.966377,-0.52145 l 1.19431,1.18005 1.567487,-1.57688 -1.195028,-1.18014 c 0.403376,-0.61394 0.683079,-1.29908 0.825447,-2.01824 l 1.622133,-0.01 v -2.2196 l -1.636514,0.01 c -0.07333,-0.35153 -0.178319,-0.70024 -0.323564,-1.04372 -0.145244,-0.34406 -0.321407,-0.6644 -0.522735,-0.96217 l 1.131035,-1.13631 -1.583305,-1.56293 -1.129598,1.13589 c -0.614052,-0.40108 -1.302883,-0.68093 -2.022633,-0.82247 l 0.0093,-1.61852 h -2.241173 l 0.0042,1.63124 c -0.353763,0.0736 -0.705369,0.17977 -1.049785,0.32371 -0.344415,0.14437 -0.665102,0.32092 -0.9635006,0.52046 l -1.1698628,-1.15823 -1.5667691,1.5792 1.1684265,1.15669 c -0.4026573,0.61283 -0.68308,1.29797 -0.8247287,2.01713 l -1.6588041,0.003 v 2.22174 l 1.6724648,-0.006 c 0.073327,0.35077 0.1797598,0.70243 0.3242851,1.04472 0.1452428,0.34448 0.3214064,0.6644 0.5227339,0.96066 l -1.1993431,1.19723 1.5840256,1.56011 1.1964668,-1.19348 c 0.6140517,0.40346 1.3028827,0.68232 2.0233517,0.82331 l 7.19e-4,1.69892 h 2.226848 z m 0.221462,-3.9957 c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_SERVICE_FILL:{d:"m {mx},{my} c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_BUSINESS_RULE_HEADER:{d:"m {mx},{my} 0,4 20,0 0,-4 z"},TASK_TYPE_BUSINESS_RULE_MAIN:{d:"m {mx},{my} 0,12 20,0 0,-12 zm 0,8 l 20,0 m -13,-4 l 0,8"},MESSAGE_FLOW_MARKER:{d:"m {mx},{my} m -10.5 ,-7 l 0,14 l 21,0 l 0,-14 z l 10.5,6 l 10.5,-6"}},this.getRawPath=function(e){return this.pathMap[e].d},this.getScaledPath=function(e,t){var n,i,a=this.pathMap[e];t.abspos?(n=t.abspos.x,i=t.abspos.y):(n=t.containerWidth*t.position.mx,i=t.containerHeight*t.position.my);var r,o,s={};if(t.position){for(var c=t.containerHeight/a.height*t.yScaleFactor,p=t.containerWidth/a.width*t.xScaleFactor,l=0;l<a.heightElements.length;l++)s["y"+l]=a.heightElements[l]*c;for(var m=0;m<a.widthElements.length;m++)s["x"+m]=a.widthElements[m]*p}return r=a.d,o={mx:n,my:i,e:s},String(r).replace(ze,(function(e,t){return function(e,t,n){var i=n;return t.replace(Xe,(function(e,t,n,a,r){t=t||a,i&&(t in i&&(i=i[t]),"function"==typeof i&&r&&(i=i()))})),i=(null==i||i==n?e:i)+""}(e,t,o)}))}}]};var Ye=n(31323),Ge=n(67319);function We(e,t,n){return(0,r.kp)({id:e.id,type:e.$type,businessObject:e,di:t},n)}function qe(e,t,n){var i=e.waypoint;return!i||i.length<2?[(0,Ge.pp)(t),(0,Ge.pp)(n)]:i.map((function(e){return{x:e.x,y:e.y}}))}function He(e,t,n){return new Error(`element ${ee(t)} referenced by ${ee(e)}#${n} not yet drawn`)}function Je(e,t,n,i,a){this._eventBus=e,this._canvas=t,this._elementFactory=n,this._elementRegistry=i,this._textRenderer=a}Je.$inject=["eventBus","canvas","elementFactory","elementRegistry","textRenderer"],Je.prototype.add=function(e,t,n){var i,a,r,o,s,c,p;if((0,ae.is)(t,"bpmndi:BPMNPlane")){var l=(0,ae.is)(e,"bpmn:SubProcess")?{id:e.id+"_plane"}:{};i=this._elementFactory.createRoot(We(e,t,l)),this._canvas.addRootElement(i)}else if((0,ae.is)(t,"bpmndi:BPMNShape")){var m=!(0,xe.Av)(e,t),u=function(e){return(0,ae.is)(e,"bpmn:Group")}(e);a=n&&(n.hidden||n.collapsed);var d=t.bounds;i=this._elementFactory.createShape(We(e,t,{collapsed:m,hidden:a,x:Math.round(d.x),y:Math.round(d.y),width:Math.round(d.width),height:Math.round(d.height),isFrame:u})),(0,ae.is)(e,"bpmn:BoundaryEvent")&&this._attachBoundary(e,i),(0,ae.is)(e,"bpmn:Lane")&&(r=0),(0,ae.is)(e,"bpmn:DataStoreReference")&&(o=n,c=(s=(0,Ge.pp)(d)).x,p=s.y,c>=o.x&&c<=o.x+o.width&&p>=o.y&&p<=o.y+o.height||(n=this._canvas.findRoot(n))),this._canvas.addShape(i,n,r)}else{if(!(0,ae.is)(t,"bpmndi:BPMNEdge"))throw new Error(`unknown di ${ee(t)} for element ${ee(e)}`);var h=this._getSource(e),f=this._getTarget(e);a=n&&(n.hidden||n.collapsed),i=this._elementFactory.createConnection(We(e,t,{hidden:a,source:h,target:f,waypoints:qe(t,h,f)})),(0,ae.is)(e,"bpmn:DataAssociation")&&(n=this._canvas.findRoot(n)),this._canvas.addConnection(i,n,r)}return(0,we.UC)(e)&&(0,we.p9)(i)&&this.addLabel(e,t,i),this._eventBus.fire("bpmnElement.added",{element:i}),i},Je.prototype._attachBoundary=function(e,t){var n=e.attachedToRef;if(!n)throw new Error(`missing ${ee(e)}#attachedToRef`);var i=this._elementRegistry.get(n.id),a=i&&i.attachers;if(!i)throw He(e,n,"attachedToRef");t.host=i,a||(i.attachers=a=[]),-1===a.indexOf(t)&&a.push(t)},Je.prototype.addLabel=function(e,t,n){var i,a,r;return i=(0,we.Dg)(t,n),(a=(0,we.p9)(n))&&(i=this._textRenderer.getExternalLabelBounds(i,a)),r=this._elementFactory.createLabel(We(e,t,{id:e.id+"_label",labelTarget:n,type:"label",hidden:n.hidden||!(0,we.p9)(n),x:Math.round(i.x),y:Math.round(i.y),width:Math.round(i.width),height:Math.round(i.height)})),this._canvas.addShape(r,n.parent)},Je.prototype._getConnectedElement=function(e,t){var n,i,a=e.$type;if(i=e[t+"Ref"],"source"===t&&"bpmn:DataInputAssociation"===a&&(i=i&&i[0]),("source"===t&&"bpmn:DataOutputAssociation"===a||"target"===t&&"bpmn:DataInputAssociation"===a)&&(i=e.$parent),n=i&&this._getElement(i))return n;throw i?He(e,i,t+"Ref"):new Error(`${ee(e)}#${t} Ref not specified`)},Je.prototype._getSource=function(e){return this._getConnectedElement(e,"source")},Je.prototype._getTarget=function(e){return this._getConnectedElement(e,"target")},Je.prototype._getElement=function(e){return this._elementRegistry.get(e.id)};const Ue={__depends__:[Ve,{__depends__:[Ye.A],bpmnImporter:["type",Je]}]};var Ze=n(4912),Ke=n(17987),et=n(98142);function tt(e,t){t.invoke(et.A,this),this.executed((function(t){var n=t.context;n.rootElement?e.setRootElement(n.rootElement):n.rootElement=e.getRootElement()})),this.revert((function(t){var n=t.context;n.rootElement&&e.setRootElement(n.rootElement)}))}(0,i.A)(tt,et.A),tt.$inject=["canvas","injector"];const nt={__init__:["rootElementsBehavior"],rootElementsBehavior:["type",tt]};var it=n(75340),at=n(71964);function rt(e,t,n){var i=C('<ul class="bjs-breadcrumbs"></ul>'),a=n.getContainer(),o=f(a);a.appendChild(i);var s=[];function c(e){e&&(s=function(e){for(var t=[],n=(0,ae.Cf)(e);n;n=n.$parent)((0,ae.is)(n,"bpmn:SubProcess")||(0,ae.is)(n,"bpmn:Process"))&&t.push(n);return t.reverse()}(e));var a=s.flatMap((function(e){var i=n.findRoot((0,at.hJ)(e))||n.findRoot(e.id);if(!i&&(0,ae.is)(e,"bpmn:Process")){var a=t.find((function(t){var n=(0,ae.Cf)(t);return n&&n.get("processRef")===e}));i=a&&n.findRoot(a.id)}if(!i)return[];var r=(0,it.Z)(e.name||e.id),o=C('<li><span class="bjs-crumb"><a title="'+r+'">'+r+"</a></span></li>");return o.addEventListener("click",(function(){n.setRootElement(i)})),o}));i.innerHTML="";var r=a.length>1;o.toggle("bjs-breadcrumbs-shown",r),a.forEach((function(e){i.appendChild(e)}))}e.on("element.changed",(function(e){var t=e.element,n=(0,ae.Cf)(t);(0,r.I6)(s,(function(e){return e===n}))&&c()})),e.on("root.set",(function(e){c(e.element)}))}function ot(e,t){var n=null,i=new st;e.on("root.set",(function(e){var a=e.element,r=t.viewbox(),o=i.get(a);if(i.set(n,{x:r.x,y:r.y,zoom:r.scale}),n=a,(0,ae.is)(a,"bpmn:SubProcess")||o){o=o||{x:0,y:0,zoom:1};var s=(r.x-o.x)*r.scale,c=(r.y-o.y)*r.scale;0===s&&0===c||t.scroll({dx:s,dy:c}),o.zoom!==r.scale&&t.zoom(o.zoom,{x:0,y:0})}})),e.on("diagram.clear",(function(){i.clear(),n=null}))}function st(){this._entries=[],this.set=function(e,t){var n=!1;for(var i in this._entries)if(this._entries[i][0]===e){this._entries[i][1]=t,n=!0;break}n||this._entries.push([e,t])},this.get=function(e){for(var t in this._entries)if(this._entries[t][0]===e)return this._entries[t][1];return null},this.clear=function(){this._entries.length=0},this.remove=function(e){var t=-1;for(var n in this._entries)if(this._entries[n][0]===e){t=n;break}-1!==t&&this._entries.splice(t,1)}}rt.$inject=["eventBus","elementRegistry","canvas"],ot.$inject=["eventBus","canvas"];function ct(e,t){this._eventBus=e,this._moddle=t;var n=this;e.on("import.render.start",1500,(function(e,t){n._handleImport(t.definitions)}))}function pt(e){return(0,ae.is)(e,"bpmndi:BPMNDiagram")?e:pt(e.$parent)}ct.prototype._handleImport=function(e){if(e.diagrams){var t=this;this._definitions=e,this._processToDiagramMap={},e.diagrams.forEach((function(e){e.plane&&e.plane.bpmnElement&&(t._processToDiagramMap[e.plane.bpmnElement.id]=e)})),e.diagrams.filter((e=>e.plane)).flatMap((e=>t._createNewDiagrams(e.plane))).forEach((function(e){t._movePlaneElementsToOrigin(e.plane)}))}},ct.prototype._createNewDiagrams=function(e){var t=this,n=[],i=[];e.get("planeElement").forEach((function(t){var a=t.bpmnElement;if(a){var r=a.$parent;(0,ae.is)(a,"bpmn:SubProcess")&&!t.isExpanded&&n.push(a),function(e,t){var n=e.$parent;return!(!(0,ae.is)(n,"bpmn:SubProcess")||n===t.bpmnElement)&&!(0,ae.f7)(e,["bpmn:DataInputAssociation","bpmn:DataOutputAssociation"])}(a,e)&&i.push({diElement:t,parent:r})}}));var a=[];return n.forEach((function(e){if(!t._processToDiagramMap[e.id]){var n=t._createDiagram(e);t._processToDiagramMap[e.id]=n,a.push(n)}})),i.forEach((function(e){for(var i=e.diElement,a=e.parent;a&&-1===n.indexOf(a);)a=a.$parent;if(a){var r=t._processToDiagramMap[a.id];t._moveToDiPlane(i,r.plane)}})),a},ct.prototype._movePlaneElementsToOrigin=function(e){var t=e.get("planeElement"),n=function(e){var t={top:1/0,right:-1/0,bottom:-1/0,left:1/0};return e.planeElement.forEach((function(e){if(e.bounds){var n=(0,Ge.Fy)(e.bounds);t.top=Math.min(n.top,t.top),t.left=Math.min(n.left,t.left)}})),(0,Ge.cD)(t)}(e),i=n.x-180,a=n.y-160;t.forEach((function(e){e.waypoint?e.waypoint.forEach((function(e){e.x=e.x-i,e.y=e.y-a})):e.bounds&&(e.bounds.x=e.bounds.x-i,e.bounds.y=e.bounds.y-a)}))},ct.prototype._moveToDiPlane=function(e,t){var n=pt(e).plane.get("planeElement");n.splice(n.indexOf(e),1),t.get("planeElement").push(e)},ct.prototype._createDiagram=function(e){var t=this._moddle.create("bpmndi:BPMNPlane",{bpmnElement:e}),n=this._moddle.create("bpmndi:BPMNDiagram",{plane:t});return t.$parent=n,t.bpmnElement=e,n.$parent=this._definitions,this._definitions.diagrams.push(n),n},ct.$inject=["eventBus","moddle"];var lt=250;function mt(e,t,n,i,a){et.A.call(this,t),this._canvas=e,this._eventBus=t,this._elementRegistry=n,this._overlays=i,this._translate=a;var r=this;this.executed("shape.toggleCollapse",lt,(function(e){var t=e.shape;r._canDrillDown(t)?r._addOverlay(t):r._removeOverlay(t)}),!0),this.reverted("shape.toggleCollapse",lt,(function(e){var t=e.shape;r._canDrillDown(t)?r._addOverlay(t):r._removeOverlay(t)}),!0),this.executed(["shape.create","shape.move","shape.delete"],lt,(function(e){var t=e.oldParent,n=e.newParent||e.parent,i=e.shape;r._canDrillDown(i)&&r._addOverlay(i),r._updateDrilldownOverlay(t),r._updateDrilldownOverlay(n),r._updateDrilldownOverlay(i)}),!0),this.reverted(["shape.create","shape.move","shape.delete"],lt,(function(e){var t=e.oldParent,n=e.newParent||e.parent,i=e.shape;r._canDrillDown(i)&&r._addOverlay(i),r._updateDrilldownOverlay(t),r._updateDrilldownOverlay(n),r._updateDrilldownOverlay(i)}),!0),t.on("import.render.complete",(function(){n.filter((function(e){return r._canDrillDown(e)})).map((function(e){r._addOverlay(e)}))}))}(0,i.A)(mt,et.A),mt.prototype._updateDrilldownOverlay=function(e){var t=this._canvas;if(e){var n=t.findRoot(e);n&&this._updateOverlayVisibility(n)}},mt.prototype._canDrillDown=function(e){var t=this._canvas;return(0,ae.is)(e,"bpmn:SubProcess")&&t.findRoot((0,at.hJ)(e))},mt.prototype._updateOverlayVisibility=function(e){var t=this._overlays,n=(0,ae.Cf)(e),i=t.get({element:n.id,type:"drilldown"})[0];if(i){var a=n&&n.get("flowElements")&&n.get("flowElements").length;f(i.html).toggle("bjs-drilldown-empty",!a)}},mt.prototype._addOverlay=function(e){var t=this._canvas,n=this._overlays,i=(0,ae.Cf)(e);n.get({element:e,type:"drilldown"}).length&&this._removeOverlay(e);var a=C('<button type="button" class="bjs-drilldown"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.81801948,3.50735931 L10.4996894,9.1896894 L10.5,4 L12,4 L12,12 L4,12 L4,10.5 L9.6896894,10.4996894 L3.75735931,4.56801948 C3.46446609,4.27512627 3.46446609,3.80025253 3.75735931,3.50735931 C4.05025253,3.21446609 4.52512627,3.21446609 4.81801948,3.50735931 Z"/></svg></button>'),r=i.get("name")||i.get("id"),o=this._translate("Open {element}",{element:r});a.setAttribute("title",o),a.addEventListener("click",(function(){t.setRootElement(t.findRoot((0,at.hJ)(e)))})),n.add(e,"drilldown",{position:{bottom:-7,right:-8},html:a}),this._updateOverlayVisibility(e)},mt.prototype._removeOverlay=function(e){this._overlays.remove({element:e,type:"drilldown"})},mt.$inject=["canvas","eventBus","elementRegistry","overlays","translate"];const ut={__depends__:[Ze.A,Ke.A,nt],__init__:["drilldownBreadcrumbs","drilldownOverlayBehavior","drilldownCentering","subprocessCompatibility"],drilldownBreadcrumbs:["type",rt],drilldownCentering:["type",ot],drilldownOverlayBehavior:["type",mt],subprocessCompatibility:["type",ct]};var dt=n(86104);function ht(e){fe.call(this,e)}(0,i.A)(ht,fe),ht.prototype._modules=[Ue,ut,Ze.A,dt.A,Ye.A],ht.prototype._moddleExtensions={};var ft=n(56373),vt=n(84361),gt=n(3834);function yt(e){ht.call(this,e)}(0,i.A)(yt,ht),yt.prototype._navigationModules=[ft.A,vt.A,gt.A],yt.prototype._modules=[].concat(ht.prototype._modules,yt.prototype._navigationModules);var bt=n(30566),Et=n(80598),xt=n(96412);const wt={align:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2000 2000">\n              <line x1="200" y1="150" x2="200" y2="1850" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>\n              <rect x="500" y="150" width="1300" height="700" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>\n              <rect x="500" y="1150" width="700" height="700" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>\n          </svg>',bottom:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">\n            <line x1="150" y1="1650" x2="1650" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>\n            <rect x="150" y="350" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>\n            <rect x="1050" y="850" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>\n          </svg>',center:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">\n            <line x1="900" y1="150" x2="900" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>\n            <rect x="250" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>\n            <rect x="500" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>\n          </svg>',left:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">\n            <line x1="100" y1="150" x2="100" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>\n            <rect x="100" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>\n            <rect x="100" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>\n          </svg>',right:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">\n            <line x1="1650" y1="150" x2="1650" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>\n            <rect x="350" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>\n            <rect x="850" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>\n          </svg>',top:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">\n            <line x1="150" y1="150" x2="1650" y2="150" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>\n            <rect x="150" y="150" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>\n            <rect x="1050" y="150" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>\n          </svg>',middle:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">\n            <line x1="150" y1="900" x2="1650" y2="900" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>\n            <rect x="150" y="250" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>\n            <rect x="1050" y="500" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>\n          </svg>'};function _t(e,t,n,i){e.registerProvider(900,this),this._contextPad=e,this._popupMenu=t,this._translate=n,this._canvas=i}_t.$inject=["contextPad","popupMenu","translate","canvas"],_t.prototype.getMultiElementContextPadEntries=function(e){var t={};return this._isAllowed(e)&&(0,r.kp)(t,this._getEntries(e)),t},_t.prototype._isAllowed=function(e){return!this._popupMenu.isEmpty(e,"align-elements")},_t.prototype._getEntries=function(){var e=this;return{"align-elements":{group:"align-elements",title:e._translate("Align elements"),html:`<div class="entry">${wt.align}</div>`,action:{click:function(t,n){var i=e._getMenuPosition(n);(0,r.kp)(i,{cursor:{x:t.x,y:t.y}}),e._popupMenu.open(n,"align-elements",i)}}}}},_t.prototype._getMenuPosition=function(e){var t=this._contextPad.getPad(e).html.getBoundingClientRect();return{x:t.left,y:t.bottom+5}};var Ot=["left","center","right","top","middle","bottom"];function St(e,t,n,i){this._alignElements=t,this._translate=n,this._popupMenu=e,this._rules=i,e.registerProvider("align-elements",this)}St.$inject=["popupMenu","alignElements","translate","rules"],St.prototype.getPopupMenuEntries=function(e){var t={};return this._isAllowed(e)&&(0,r.kp)(t,this._getEntries(e)),t},St.prototype._isAllowed=function(e){return this._rules.allowed("elements.align",{elements:e})},St.prototype._getEntries=function(e){var t=this._alignElements,n=this._translate,i=this._popupMenu,a={};return(0,r.jJ)(Ot,(function(r){a["align-elements-"+r]={group:"align",title:n("Align elements "+r),className:"bjs-align-elements-menu-entry",imageHtml:wt[r],action:function(){t.trigger(e,r),i.close()}}})),a};var At=n(24049),kt=n(91970);function Ct(e){At.A.call(this,e)}Ct.$inject=["eventBus"],(0,i.A)(Ct,At.A),Ct.prototype.init=function(){this.addRule("elements.align",(function(e){var t=e.elements,n=(0,r.pb)(t,(function(e){return!(e.waypoints||e.host||e.labelTarget)}));return!((n=(0,kt.wT)(n)).length<2)&&n}))};const Pt={__depends__:[bt.A,Et.A,xt.A],__init__:["alignElementsContextPadProvider","alignElementsMenuProvider","bpmnAlignElements"],alignElementsContextPadProvider:["type",_t],alignElementsMenuProvider:["type",St],bpmnAlignElements:["type",Ct]};var Tt=n(89768);function Rt(e,t){for((0,r.Kg)(t)&&(t=[t]);e=e.parent;)if((0,ae.f7)(e,t))return e;return null}function Dt(e,t){var n=Rt(e,"bpmn:Process");if(n)return!0;var i,a=["bpmn:Participant","bpmn:Lane"];if(n=Rt(e,a))return(0,xe.$b)(n);if((0,ae.f7)(e,a))return(0,xe.$b)(e);for(i=(0,ae.Cf)(e);i&&!(0,ae.is)(i,"bpmn:Process");i=i.$parent);if(!t)return!0;var r=t.find((function(e){var t=(0,ae.Cf)(e);return t&&t.get("processRef")===i}));return!r||(0,xe.$b)(r)}var Nt=n(27714);function $t(e,t,n){var i=Dt(e,n);return(0,ae.is)(t,"bpmn:TextAnnotation")?function(e,t,n){var i=(0,Ge.Fy)(e),a=n?{x:i.right+t.width/2,y:i.top-50-t.height/2}:{x:i.right+50+t.width/2,y:i.bottom+t.height/2};(0,_e.fX)(e)&&(a=(0,Ge.pp)(e),n?(a.x+=100,a.y-=50):(a.x+=100,a.y+=50));var r={margin:n?-30:30,minDistance:20},o=n?{y:r}:{x:r};return(0,Nt.D6)(e,t,a,(0,Nt.u6)(o))}(e,t,i):(0,ae.f7)(t,["bpmn:DataObjectReference","bpmn:DataStoreReference"])?function(e,t,n){var i=(0,Ge.Fy)(e),a=n?{x:i.right-10+t.width/2,y:i.bottom+40+t.width/2}:{x:i.left-40-t.width/2,y:i.bottom-10+t.height/2},r={margin:30,minDistance:30},o=n?{x:r}:{y:r};return(0,Nt.D6)(e,t,a,(0,Nt.u6)(o))}(e,t,i):(0,ae.is)(t,"bpmn:FlowNode")?function(e,t,n){var i=(0,Ge.Fy)(e),a=(0,Ge.pp)(e),r=n?{directionHint:"e",minDistance:80,baseOrientation:"left",boundaryOrientation:"top",start:"top",end:"bottom"}:{directionHint:"s",minDistance:90,baseOrientation:"top",boundaryOrientation:"left",start:"left",end:"right"},o=(0,Nt.dq)(e,{filter:function(e){return(0,ae.is)(e,"bpmn:SequenceFlow")},direction:r.directionHint}),s=30,c=r.minDistance,p=r.baseOrientation;(0,ae.is)(e,"bpmn:BoundaryEvent")&&-1!==(p=(0,Ge.vc)(e,e.host,-25)).indexOf(r.boundaryOrientation)&&(s*=-1);var l=n?{x:i.right+o+t.width/2,y:a.y+Mt(p,c,r)}:{x:a.x+Mt(p,c,r),y:i.bottom+o+t.height/2},m={margin:s,minDistance:c},u=n?{y:m}:{x:m};return(0,Nt.D6)(e,t,l,(0,Nt.u6)(u))}(e,t,i):void 0}function Mt(e,t,n){return e.includes(n.start)?-1*t:e.includes(n.end)?t:0}function Bt(e,t){e.on("autoPlace",(function(e){var n=e.shape;return $t(e.source,n,t)}))}Bt.$inject=["eventBus","elementRegistry"];const jt={__depends__:[Tt.A],__init__:["bpmnAutoPlace"],bpmnAutoPlace:["type",Bt]};var Ft=n(80454);function Qt(e,t,n,i){et.A.call(this,e),this._elementRegistry=t,this._modeling=n,this._rules=i;var a=this;this.postExecuted(["shape.create"],(function(e){var t=e.context,n=t.hints||{},i=t.shape,r=t.parent||t.newParent;!1!==n.autoResize&&a._expand([i],r)})),this.postExecuted(["elements.move"],(function(e){var t=e.context,n=(0,Ft.Bq)((0,Ft.zu)(t.closure.topLevel)),i=t.hints,r=!i||i.autoResize;if(!1!==r){var o=(0,Ft.$z)(n,(function(e){return e.parent.id}));(0,Ft.jJ)(o,(function(e,t){(0,Ft.cy)(r)&&(e=e.filter((function(e){return(0,Ft.I6)(r,(0,Ft.gH)({id:e.id}))}))),a._expand(e,t)}))}})),this.postExecuted(["shape.toggleCollapse"],(function(e){var t=e.context,n=t.hints,i=t.shape;n&&!1===n.autoResize||i.collapsed||a._expand(i.children||[],i)})),this.postExecuted(["shape.resize"],(function(e){var t=e.context,n=t.hints,i=t.shape,r=i.parent;n&&!1===n.autoResize||r&&a._expand([i],r)}))}function It(e){e.invoke(Qt,this)}function Lt(e){At.A.call(this,e);var t=this;this.addRule("element.autoResize",(function(e){return t.canResize(e.elements,e.target)}))}function zt(e,t){Lt.call(this,e),this._modeling=t}Qt.$inject=["eventBus","elementRegistry","modeling","rules"],(0,i.A)(Qt,et.A),Qt.prototype._getOptimalBounds=function(e,t){var n=this.getOffset(t),i=this.getPadding(t),a=(0,Ge.Fy)((0,kt.U7)(e)),r=(0,Ge.Fy)(t),o={};return a.top-r.top<i.top&&(o.top=a.top-n.top),a.left-r.left<i.left&&(o.left=a.left-n.left),r.right-a.right<i.right&&(o.right=a.right+n.right),r.bottom-a.bottom<i.bottom&&(o.bottom=a.bottom+n.bottom),(0,Ge.cD)((0,Ft.kp)({},r,o))},Qt.prototype._expand=function(e,t){if("string"==typeof t&&(t=this._elementRegistry.get(t)),this._rules.allowed("element.autoResize",{elements:e,target:t})){var n=this._getOptimalBounds(e,t);if(function(e,t){return e.x!==t.x||e.y!==t.y||e.width!==t.width||e.height!==t.height}(n,t)){var i=function(e,t){var n="";return e=(0,Ge.Fy)(e),t=(0,Ge.Fy)(t),e.top>t.top&&(n=n.concat("n")),e.right<t.right&&(n=n.concat("w")),e.bottom<t.bottom&&(n=n.concat("s")),e.left>t.left&&(n=n.concat("e")),n}((0,Ft.Up)(t,["x","y","width","height"]),n);this.resize(t,n,{autoResize:i});var a=t.parent;a&&this._expand([t],a)}}},Qt.prototype.getOffset=function(e){return{top:60,bottom:60,left:100,right:100}},Qt.prototype.getPadding=function(e){return{top:2,bottom:2,left:15,right:15}},Qt.prototype.resize=function(e,t,n){this._modeling.resizeShape(e,t,null,n)},It.$inject=["injector"],(0,i.A)(It,Qt),It.prototype.resize=function(e,t,n){(0,ae.is)(e,"bpmn:Participant")?this._modeling.resizeLane(e,t,null,n):this._modeling.resizeShape(e,t,null,n)},Lt.$inject=["eventBus"],(0,i.A)(Lt,At.A),Lt.prototype.canResize=function(e,t){return!1},(0,i.A)(zt,Lt),zt.$inject=["eventBus","modeling"],zt.prototype.canResize=function(e,t){if((0,ae.is)(t.di,"bpmndi:BPMNPlane"))return!1;if(!(0,ae.is)(t,"bpmn:Participant")&&!(0,ae.is)(t,"bpmn:Lane")&&!(0,ae.is)(t,"bpmn:SubProcess"))return!1;var n=!0;return(0,r.jJ)(e,(function(e){((0,ae.is)(e,"bpmn:Lane")||(0,_e.J2)(e))&&(n=!1)})),n};const Xt={__init__:["bpmnAutoResize","bpmnAutoResizeProvider"],bpmnAutoResize:["type",It],bpmnAutoResizeProvider:["type",zt]};var Vt=n(15167),Yt=n(86816),Gt=n(25359),Wt=n(48461),qt=n(30601),Ht=n(17417),Jt=n(37706);const Ut="complex-preview";class Zt{constructor(e,t,n){this._canvas=e,this._graphicsFactory=t,this._previewSupport=n,this._markers=[]}create(e){this.cleanUp();const{created:t=[],moved:n=[],removed:i=[],resized:a=[]}=e,r=this._canvas.getLayer(Ut);t.filter((e=>!function(e){return e.hidden}(e))).forEach((e=>{let t;(0,_e.fX)(e)?(t=this._graphicsFactory._createContainer("connection",(0,Ht.vt)("g")),this._graphicsFactory.drawConnection((0,Jt.P)(t),e)):(t=this._graphicsFactory._createContainer("shape",(0,Ht.vt)("g")),this._graphicsFactory.drawShape((0,Jt.P)(t),e),(0,Me.Tl)(t,e.x,e.y)),this._previewSupport.addDragger(e,r,t)})),n.forEach((({element:e,delta:t})=>{this._previewSupport.addDragger(e,r,void 0,"djs-dragging"),this._canvas.addMarker(e,"djs-element-hidden"),this._markers.push([e,"djs-element-hidden"]);const n=this._previewSupport.addDragger(e,r);(0,_e.fX)(e)?(0,Me.Tl)(n,t.x,t.y):(0,Me.Tl)(n,e.x+t.x,e.y+t.y)})),i.forEach((e=>{this._previewSupport.addDragger(e,r,void 0,"djs-dragging"),this._canvas.addMarker(e,"djs-element-hidden"),this._markers.push([e,"djs-element-hidden"])})),a.forEach((({shape:e,bounds:t})=>{this._canvas.addMarker(e,"djs-hidden"),this._markers.push([e,"djs-hidden"]),this._previewSupport.addDragger(e,r,void 0,"djs-dragging");const n=this._graphicsFactory._createContainer("shape",(0,Ht.vt)("g"));this._graphicsFactory.drawShape((0,Jt.P)(n),e,{width:t.width,height:t.height}),(0,Me.Tl)(n,t.x,t.y),this._previewSupport.addDragger(e,r,n)}))}cleanUp(){(0,Ht.IU)(this._canvas.getLayer(Ut)),this._markers.forEach((([e,t])=>this._canvas.removeMarker(e,t))),this._markers=[]}show(){this._canvas.showLayer(Ut)}hide(){this._canvas.hideLayer(Ut)}}Zt.$inject=["canvas","graphicsFactory","previewSupport"];const Kt={__depends__:[qt.A],__init__:["complexPreview"],complexPreview:["type",Zt]};var en=n(79356),tn=["top","bottom","left","right"];function nn(e,t){function n(e){if((0,we.ur)(e)&&!(0,_e.fX)(e)){var n=function(e){var t=(0,Ge.pp)(e.label),n=an((0,Ge.pp)(e),t);if(i=n,-1!==tn.indexOf(i)){var i,a=function(e){var t=(0,Ge.pp)(e);return[].concat(e.incoming.map((function(e){return e.waypoints[e.waypoints.length-2]})),e.outgoing.map((function(e){return e.waypoints[1]}))).map((function(e){return an(t,e)}))}(e);if(e.host){var r=function(e){var t,n=e.host,i=(0,Ge.pp)(e),a=(0,Ge.vc)(i,n);return t=a.indexOf("-")>=0?a.split("-"):[a],tn.filter((function(e){return-1===t.indexOf(e)}))}(e);a=a.concat(r)}var o=tn.filter((function(e){return-1===a.indexOf(e)}));if(-1===o.indexOf(n))return o[0]}}(e);n&&function(e,n){var i=(0,Ge.pp)(e),a=e.label,r=(0,Ge.pp)(a);if(a.parent){var o,s=(0,Ge.Fy)(e);switch(n){case"top":o={x:i.x,y:s.top-10-a.height/2};break;case"left":o={x:s.left-10-a.width/2,y:i.y};break;case"bottom":o={x:i.x,y:s.bottom+10+a.height/2};break;case"right":o={x:s.right+10+a.width/2,y:i.y}}var c=(0,en.p)(o,r);t.moveShape(a,c)}}(e,n)}}et.A.call(this,e),this.postExecuted(["connection.create","connection.layout","connection.updateWaypoints"],(function(e){var t=e.context,i=t.connection,a=i.source,r=i.target;!1!==(t.hints||{}).createElementsBehavior&&(n(a),n(r))})),this.postExecuted(["label.create"],(function(e){var t=e.context,i=t.shape;!1!==(t.hints||{}).createElementsBehavior&&n(i.labelTarget)})),this.postExecuted(["elements.create"],(function(e){var t=e.context,i=t.elements;!1!==(t.hints||{}).createElementsBehavior&&i.forEach((function(e){n(e)}))}))}function an(e,t){return(0,Ge.vc)(t,e,5)}function rn(e){et.A.call(this,e),this.preExecute("shape.append",(function(e){var t=e.source,n=e.shape;e.position||((0,ae.is)(n,"bpmn:TextAnnotation")?e.position={x:t.x+t.width/2+75,y:t.y-50-n.height/2}:e.position={x:t.x+t.width+80+n.width/2,y:t.y+t.height/2})}),!0)}function on(e,t){e.invoke(et.A,this),this.postExecute("shape.move",(function(e){var n=e.newParent,i=e.shape,a=(0,r.pb)(i.incoming.concat(i.outgoing),(function(e){return(0,ae.is)(e,"bpmn:Association")}));(0,r.jJ)(a,(function(e){t.moveConnection(e,{x:0,y:0},n)}))}),!0)}function sn(e,t){t.invoke(et.A,this),this._bpmnReplace=e;var n=this;this.postExecuted("elements.create",500,(function(e){var t=e.elements;1===(t=t.filter((function(e){return cn(e,e.host)}))).length&&t.map((function(e){return t.indexOf(e)})).forEach((function(i){var a=t[i];e.elements[i]=n._replaceShape(t[i],a)}))}),!0),this.preExecute("elements.move",500,(function(e){var t=e.shapes,i=e.newHost;if(1===t.length){var a=t[0];cn(a,i)&&(e.shapes=[n._replaceShape(a,i)])}}),!0)}function cn(e,t){return!(0,_e.J2)(e)&&(0,ae.f7)(e,["bpmn:IntermediateThrowEvent","bpmn:IntermediateCatchEvent"])&&!!t}function pn(e,t){function n(e){return(0,r.pb)(e.attachers,(function(e){return(0,ae.is)(e,"bpmn:BoundaryEvent")}))}et.A.call(this,e),this.postExecute("connection.create",(function(e){var i=e.context.source,a=e.context.target,r=n(a);(0,ae.is)(i,"bpmn:EventBasedGateway")&&(0,ae.is)(a,"bpmn:ReceiveTask")&&r.length>0&&t.removeElements(r)})),this.postExecute("connection.reconnect",(function(e){var i=e.context.oldSource,a=e.context.newSource;(0,ae.is)(i,"bpmn:Gateway")&&(0,ae.is)(a,"bpmn:EventBasedGateway")&&(0,r.jJ)(a.outgoing,(function(e){var i=e.target,a=n(i);(0,ae.is)(i,"bpmn:ReceiveTask")&&a.length>0&&t.removeElements(a)}))}))}function ln(e,t,n){function i(e){t.updateProperties(e,{isForCompensation:!0})}function a(e){t.updateProperties(e,{isForCompensation:void 0})}et.A.call(this,e),this.preExecute("shape.replace",(function(e){const{newData:n,oldShape:i}=e;if(un(e.oldShape)&&"bpmn:CompensateEventDefinition"!==n.eventDefinitionType||"bpmn:BoundaryEvent"!==n.type){const t=i.outgoing.find((({target:e})=>mn(e)));t&&t.target&&(e._connectionTarget=t.target)}else if(!un(e.oldShape)&&"bpmn:CompensateEventDefinition"===n.eventDefinitionType&&"bpmn:BoundaryEvent"===n.type){const n=i.outgoing.find((({target:e})=>dn(e)));n&&n.target&&(e._connectionTarget=n.target),function(e){const n=e.outgoing.filter((e=>(0,ae.is)(e,"bpmn:SequenceFlow")));t.removeElements(n)}(i)}}),!0),this.postExecuted("shape.replace",(function(e){const{_connectionTarget:n,newShape:i}=e;n&&t.connect(i,n)}),!0),this.preExecute("connection.create",(function(e){const n=e.connection,a=e.source,r=e.target;un(a)&&dn(r)&&(i(r),function(e,n){const i=e.outgoing.filter((e=>(0,ae.is)(e,"bpmn:Association")));i.filter((e=>mn(e.target)&&!n.includes(e))).forEach((e=>t.removeConnection(e)))}(a,[n]))}),!0),this.postExecuted("connection.delete",(function(e){const t=e.source,n=e.target;un(t)&&mn(n)&&a(n)}),!0),this.postExecuted("connection.reconnect",(function(e){const t=e.newTarget,n=e.oldSource,r=e.oldTarget;if(r!==t){const e=n;mn(r)&&a(r),un(e)&&dn(t)&&i(t)}}),!0),this.postExecuted("element.updateProperties",(function(e){const{element:i}=e;mn(i)?(function(e){for(const i of e.incoming)n.canConnect(i.source,e)||t.removeConnection(i);for(const i of e.outgoing)n.canConnect(e,i.target)||t.removeConnection(i)}(i),function(e){const n=e.attachers.slice();n.length&&t.removeElements(n)}(i)):dn(i)&&function(e){const n=e.incoming.filter((e=>un(e.source)));t.removeElements(n)}(i)}),!0)}function mn(e){const t=(0,ae.Cf)(e);return t&&t.get("isForCompensation")}function un(e){return e&&(0,ae.is)(e,"bpmn:BoundaryEvent")&&(0,xe.Ip)(e,"bpmn:CompensateEventDefinition")}function dn(e){return e&&(0,ae.is)(e,"bpmn:Activity")&&!(0,xe.Q1)(e)}function hn(e){e.invoke(et.A,this),this.preExecute("shape.create",1500,(function(e){var t=e.context,n=t.parent,i=t.shape;(0,ae.is)(n,"bpmn:Lane")&&!(0,ae.is)(i,"bpmn:Lane")&&(t.parent=Rt(n,"bpmn:Participant"))}))}function fn(e,t){et.A.call(this,e),this.preExecute("shape.create",(function(e){var n=e.context.shape;if((0,ae.is)(n,"bpmn:DataObjectReference")&&"label"!==n.type){var i=t.create("bpmn:DataObject");i.isCollection=n.businessObject.dataObjectRef?.isCollection||!1,n.businessObject.dataObjectRef=i}}))}(0,i.A)(nn,et.A),nn.$inject=["eventBus","modeling"],(0,i.A)(rn,et.A),rn.$inject=["eventBus"],(0,i.A)(on,et.A),on.$inject=["injector","modeling"],sn.$inject=["bpmnReplace","injector"],(0,i.A)(sn,et.A),sn.prototype._replaceShape=function(e,t){var n,i,a=(n=e,(i=(0,ae.Cf)(n).eventDefinitions)&&i[0]),r={type:"bpmn:BoundaryEvent",host:t};return a&&(r.eventDefinitionType=a.$type),this._bpmnReplace.replaceElement(e,r,{layoutConnection:!1})},pn.$inject=["eventBus","modeling"],(0,i.A)(pn,et.A),(0,i.A)(ln,et.A),ln.$inject=["eventBus","modeling","bpmnRules"],hn.$inject=["injector"],(0,i.A)(hn,et.A),fn.$inject=["eventBus","bpmnFactory"],(0,i.A)(fn,et.A);var vn=2e3;function gn(e,t,n){function i(){var t=e.getRootElement();return(0,ae.is)(t,"bpmn:Collaboration")?t:n.makeCollaboration()}et.A.call(this,t),t.on(["create.start","shape.move.start"],vn,(function(t){var n=t.context,i=n.shape,a=e.getRootElement();if((0,ae.is)(i,"bpmn:Participant")&&(0,ae.is)(a,"bpmn:Process")&&a.children.length){var o=a.children.filter((function(e){return!(0,ae.is)(e,"bpmn:Group")&&!(0,_e.J2)(e)&&!(0,_e.fX)(e)}));if(o.length){var s=(0,kt.U7)(o),c=function(e,t){t={width:t.width+40+30,height:t.height+40};var n=Math.max(e.width,t.width),i=Math.max(e.height,t.height);return{x:-n/2,y:-i/2,width:n,height:i}}(i,s);(0,r.kp)(i,c),n.createConstraints=function(e,t){return{bottom:(t=(0,Ge.Fy)(t)).top+e.height/2-20,left:t.right-e.width/2+20,top:t.bottom-e.height/2+20,right:t.left+e.width/2-20-30}}(i,s)}}})),t.on("create.start",vn,(function(n){var i=n.context.shape,a=e.getRootElement(),r=e.getGraphics(a);function o(e){e.element=a,e.gfx=r}(0,ae.is)(i,"bpmn:Participant")&&(0,ae.is)(a,"bpmn:Process")&&(t.on("element.hover",vn,o),t.once("create.cleanup",(function(){t.off("element.hover",o)})))})),this.preExecute("elements.create",vn,(function(e){var t,n=e.elements,a=e.parent,o=function(e){return(0,r.I6)(e,(function(e){return(0,ae.is)(e,"bpmn:Participant")}))}(n);o&&(0,ae.is)(a,"bpmn:Process")&&(e.parent=i(),(t=e.hints=e.hints||{}).participant=o,t.process=a,t.processRef=(0,ae.Cf)(o).get("processRef"))}),!0),this.preExecute("shape.create",(function(e){var t=e.parent,n=e.shape;(0,ae.is)(n,"bpmn:Participant")&&(0,ae.is)(t,"bpmn:Process")&&(e.parent=i(),e.process=t,e.processRef=(0,ae.Cf)(n).get("processRef"))}),!0),this.execute("shape.create",(function(e){var t=e.hints||{},n=e.process||t.process,i=e.shape,a=t.participant;!n||a&&i!==a||(0,ae.Cf)(i).set("processRef",(0,ae.Cf)(n))}),!0),this.revert("shape.create",(function(e){var t=e.hints||{},n=e.process||t.process,i=e.processRef||t.processRef,a=e.shape,r=t.participant;!n||r&&a!==r||(0,ae.Cf)(a).set("processRef",i)}),!0),this.postExecute("shape.create",(function(e){var t=e.hints||{},i=e.process||e.hints.process,a=e.shape,r=t.participant;if(i){var o=i.children.slice();r?a===r&&n.moveElements(o,{x:0,y:0},r):n.moveElements(o,{x:0,y:0},a)}}),!0)}gn.$inject=["canvas","eventBus","modeling"],(0,i.A)(gn,et.A);var yn=n(93742),bn="__targetRef_placeholder";function En(e,t){function n(e,n){var i=e.get("properties"),a=(0,r.I6)(i,(function(e){return e.name===bn}));return!a&&n&&(a=t.create("bpmn:Property",{name:bn}),(0,yn.WQ)(i,a)),a}function i(e,t){var i=n(e);i&&(function(e,t,n){var i=e.get("dataInputAssociations");return(0,r.I6)(i,(function(e){return e!==n&&e.targetRef===t}))}(e,i,t)||(0,yn.TF)(e.get("properties"),i))}function a(e){var t,a=e.context,r=a.connection,o=r.businessObject,s=r.target,c=s&&s.businessObject,p=a.newTarget,l=p&&p.businessObject,m=a.oldTarget||a.target,u=m&&m.businessObject,d=r.businessObject;u&&u!==c&&i(u,o),l&&l!==c&&i(l,o),c?(t=n(c,!0),d.targetRef=t):d.targetRef=null}et.A.call(this,e),this.executed(["connection.create","connection.delete","connection.move","connection.reconnect"],xn(a)),this.reverted(["connection.create","connection.delete","connection.move","connection.reconnect"],xn(a))}function xn(e){return function(t){var n=t.context.connection;if((0,ae.is)(n,"bpmn:DataInputAssociation"))return e(t)}}function wn(e){this._bpmnUpdater=e}function _n(e,t,n,i){function a(e){return e.children.filter((function(e){return(0,ae.is)(e,"bpmn:DataStoreReference")&&!e.labelTarget}))}function r(e,i){var a=e.businessObject||e;if(i=i||n.filter((function(e){return(0,ae.is)(e,"bpmn:Participant")&&(0,ae.Cf)(e).processRef}))[0]){var r=i.businessObject||i;t.execute("dataStore.updateContainment",{dataStoreBo:a,dataStoreDi:(0,ae.S2)(e),newSemanticParent:r.processRef||r,newDiParent:(0,ae.S2)(i)})}}et.A.call(this,i),t.registerHandler("dataStore.updateContainment",wn),this.preExecute("shape.create",(function(e){var t=e.context,n=t.shape;(0,ae.is)(n,"bpmn:DataStoreReference")&&"label"!==n.type&&(t.hints||(t.hints={}),t.hints.autoResize=!1)})),this.preExecute("elements.move",(function(e){var t=e.context,n=t.shapes;n.filter((function(e){return(0,ae.is)(e,"bpmn:DataStoreReference")})).length&&(t.hints||(t.hints={}),t.hints.autoResize=n.filter((function(e){return!(0,ae.is)(e,"bpmn:DataStoreReference")})))})),this.postExecute("shape.create",(function(e){var t=e.context.shape,n=t.parent;(0,ae.is)(t,"bpmn:DataStoreReference")&&"label"!==t.type&&(0,ae.is)(n,"bpmn:Collaboration")&&r(t)})),this.postExecute("shape.move",(function(e){var t=e.context,n=t.shape,i=t.oldParent,a=n.parent;(0,ae.is)(i,"bpmn:Collaboration")||(0,ae.is)(n,"bpmn:DataStoreReference")&&"label"!==n.type&&(0,ae.is)(a,"bpmn:Collaboration")&&r(n,(0,ae.is)(i,"bpmn:Participant")?i:function(e){for(;e.parent;){if((0,ae.is)(e.parent,"bpmn:Participant"))return e.parent;e=e.parent}}(i))})),this.postExecute("shape.delete",(function(t){var n=t.context.shape,i=e.getRootElement();(0,ae.f7)(n,["bpmn:Participant","bpmn:SubProcess"])&&(0,ae.is)(i,"bpmn:Collaboration")&&a(i).filter((function(e){return function(e,t){for(var n=e.businessObject||e,i=t.businessObject||t;n.$parent;){if(n.$parent===i.processRef||i)return!0;n=n.$parent}return!1}(e,n)})).forEach((function(e){r(e)}))})),this.postExecute("canvas.updateRoot",(function(e){var t=e.context,n=t.oldRoot,i=t.newRoot;a(n).forEach((function(e){(0,ae.is)(i,"bpmn:Process")&&r(e,i)}))}))}En.$inject=["eventBus","bpmnFactory"],(0,i.A)(En,et.A),wn.$inject=["bpmnUpdater"],wn.prototype.execute=function(e){var t=e.dataStoreBo,n=e.dataStoreDi,i=e.newSemanticParent,a=e.newDiParent;return e.oldSemanticParent=t.$parent,e.oldDiParent=n.$parent,this._bpmnUpdater.updateSemanticParent(t,i),this._bpmnUpdater.updateDiParent(n,a),[]},wn.prototype.revert=function(e){var t=e.dataStoreBo,n=e.dataStoreDi,i=e.oldSemanticParent,a=e.oldDiParent;return this._bpmnUpdater.updateSemanticParent(t,i),this._bpmnUpdater.updateDiParent(n,a),[]},_n.$inject=["canvas","commandStack","elementRegistry","eventBus"],(0,i.A)(_n,et.A);var On=n(60593),Sn=Math.abs,An=["bpmn:Participant","bpmn:Process","bpmn:SubProcess"],kn=30;function Cn(e,t){return t=t||[],e.children.filter((function(e){(0,ae.is)(e,"bpmn:Lane")&&(Cn(e,t),t.push(e))})),t}function Pn(e){return e.children.filter((function(e){return(0,ae.is)(e,"bpmn:Lane")}))}function Tn(e){return Rt(e,An)||e}function Rn(e,t){et.A.call(this,e),this.postExecuted("shape.delete",500,(function(e){var n=e.context,i=n.hints,a=n.shape,r=n.oldParent;(0,ae.is)(a,"bpmn:Lane")&&(i&&i.nested||function(e,n){var i,a,r,o,s,c=(0,xe.$b)(e),p=Pn(n),l=[],m=[],u=[],d=[];(0,kt.qO)(p,(function(t){return c?t.y>e.y?m.push(t):l.push(t):t.x>e.x?d.push(t):u.push(t),t.children})),p.length&&(i=c?m.length&&l.length?e.height/2:e.height:d.length&&u.length?e.width/2:e.width,l.length&&(a=t.calculateAdjustments(l,"y",i,e.y-10),t.makeSpace(a.movingShapes,a.resizingShapes,{x:0,y:i},"s")),m.length&&(r=t.calculateAdjustments(m,"y",-i,e.y+e.height+10),t.makeSpace(r.movingShapes,r.resizingShapes,{x:0,y:-i},"n")),u.length&&(o=t.calculateAdjustments(u,"x",i,e.x-10),t.makeSpace(o.movingShapes,o.resizingShapes,{x:i,y:0},"e")),d.length&&(s=t.calculateAdjustments(d,"x",-i,e.x+e.width+10),t.makeSpace(s.movingShapes,s.resizingShapes,{x:-i,y:0},"w")))}(a,r))}))}function Dn(e,t){t.invoke(et.A,this),this._bpmnReplace=e;var n=this;this.postExecuted("elements.create",500,(function(e){var t=e.elements;t.filter((function(e){return Nn(e,e.host)})).map((function(e){return t.indexOf(e)})).forEach((function(i){e.elements[i]=n._replaceShape(t[i])}))}),!0),this.preExecute("elements.move",500,(function(e){var t=e.shapes,i=e.newHost;t.forEach((function(e,a){var r,o=e.host;Nn(e,(r=o,-1!==t.indexOf(r)?o:i))&&(t[a]=n._replaceShape(e))}))}),!0)}function Nn(e,t){return!(0,_e.J2)(e)&&(0,ae.is)(e,"bpmn:BoundaryEvent")&&!t}Rn.$inject=["eventBus","spaceTool"],(0,i.A)(Rn,et.A),Dn.$inject=["bpmnReplace","injector"],(0,i.A)(Dn,et.A),Dn.prototype._replaceShape=function(e){var t,n,i,a=(n=e,(i=(0,ae.Cf)(n).eventDefinitions)&&i[0]);return t=a?{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:a.$type}:{type:"bpmn:IntermediateThrowEvent"},this._bpmnReplace.replaceElement(e,t,{layoutConnection:!1})};var $n=n(42596);function Mn(e,t,n){function i(e,i,a){var o,s,c,p,l,m,u,d,h=i.waypoints,f=e.outgoing.slice(),v=e.incoming.slice();d=(0,r.Et)(a.width)?(0,Ge.pp)(a):a;var g=(0,$n.C)(h,d);if(g){if(o=h.slice(0,g.index),s=h.slice(g.index+(g.bendpoint?1:0)),!o.length||!s.length)return;c=g.bendpoint?h[g.index]:d,1!==o.length&&Bn(e,o[o.length-1])||o.push(jn(c)),1!==s.length&&Bn(e,s[0])||s.unshift(jn(c))}p=i.source,l=i.target,t.canConnect(p,e,i)&&(n.reconnectEnd(i,e,o||d),m=i),t.canConnect(e,l,i)&&(m?u=n.connect(e,l,{type:i.type,waypoints:s}):(n.reconnectStart(i,e,s||d),u=i));var y=[].concat(m&&(0,r.pb)(v,(function(e){return e.source===m.source}))||[],u&&(0,r.pb)(f,(function(e){return e.target===u.target}))||[]);y.length&&n.removeElements(y)}et.A.call(this,e),this.preExecute("elements.move",(function(e){var n=e.newParent,i=e.shapes,a=e.delta,o=i[0];if(o&&n){n&&n.waypoints&&(e.newParent=n=n.parent);var s=(0,Ge.pp)(o),c={x:s.x+a.x,y:s.y+a.y},p=(0,r.I6)(n.children,(function(e){return t.canInsert(i,e)&&(0,$n.C)(e.waypoints,c)}));p&&(e.targetFlow=p,e.position=c)}}),!0),this.postExecuted("elements.move",(function(e){var t=e.shapes,n=e.targetFlow,a=e.position;n&&i(t[0],n,a)}),!0),this.preExecute("shape.create",(function(e){var n=e.parent,i=e.shape;t.canInsert(i,n)&&(e.targetFlow=n,e.parent=n.parent)}),!0),this.postExecuted("shape.create",(function(e){var t=e.shape,n=e.targetFlow,a=e.position;n&&i(t,n,a)}),!0)}function Bn(e,t){var n=t.x,i=t.y;return n>=e.x&&n<=e.x+e.width&&i>=e.y&&i<=e.y+e.height}function jn(e){return(0,r.kp)({},e)}function Fn(e,t){et.A.call(this,e),this.preExecuted("connection.create",(function(e){var n=e.context,i=n.connection,a=n.source,r=n.target,o=n.hints;o&&!1===o.createElementsBehavior||!Qn(i)||((0,ae.is)(a,"bpmn:EventBasedGateway")?r.incoming.filter((e=>e!==i&&Qn(e))):r.incoming.filter((e=>e!==i&&Qn(e)&&(0,ae.is)(e.source,"bpmn:EventBasedGateway")))).forEach((function(e){t.removeConnection(e)}))})),this.preExecuted("shape.replace",(function(e){var n=e.context.newShape;(0,ae.is)(n,"bpmn:EventBasedGateway")&&n.outgoing.filter(Qn).reduce((function(e,t){return e.includes(t.target)?e:e.concat(t.target)}),[]).forEach((function(e){e.incoming.filter(Qn).forEach((function(i){const a=e.incoming.filter(Qn).filter((function(e){return e.source===n}));(i.source!==n||a.length>1)&&t.removeConnection(i)}))}))}))}function Qn(e){return(0,ae.is)(e,"bpmn:SequenceFlow")}(0,i.A)(Mn,et.A),Mn.$inject=["eventBus","bpmnRules","modeling"],Fn.$inject=["eventBus","modeling"],(0,i.A)(Fn,et.A);var In=1500;function Ln(e,t,n){t.on(["create.hover","create.move","create.out","create.end","shape.move.hover","shape.move.move","shape.move.out","shape.move.end"],In,(function(t){var i=t.context.shape||t.shape,a=t.hover;(0,ae.is)(a,"bpmn:Lane")&&!(0,ae.f7)(i,["bpmn:Lane","bpmn:Participant"])&&(t.hover=Tn(a),t.hoverGfx=e.getGraphics(t.hover));var r=n.getRootElement();a!==r&&(i.labelTarget||(0,ae.f7)(i,["bpmn:Group","bpmn:TextAnnotation"]))&&(t.hover=r,t.hoverGfx=e.getGraphics(t.hover))})),t.on(["connect.hover","connect.out","connect.end","connect.cleanup","global-connect.hover","global-connect.out","global-connect.end","global-connect.cleanup"],In,(function(t){var n=t.hover;(0,ae.is)(n,"bpmn:Lane")&&(t.hover=Tn(n)||n,t.hoverGfx=e.getGraphics(t.hover))})),t.on(["bendpoint.move.hover"],In,(function(t){var n=t.context,i=t.hover,a=n.type;(0,ae.is)(i,"bpmn:Lane")&&/reconnect/.test(a)&&(t.hover=Tn(i)||i,t.hoverGfx=e.getGraphics(t.hover))})),t.on(["connect.start"],In,(function(e){var t=e.context,n=t.start;(0,ae.is)(n,"bpmn:Lane")&&(t.start=Tn(n)||n)})),t.on("shape.move.start",2e3,(function(e){var t=e.shape;(0,ae.is)(t,"bpmn:Lane")&&(e.shape=Tn(t)||t)})),t.on("spaceTool.move",2e3,(function(e){var t=e.hover;t&&(0,ae.is)(t,"bpmn:Lane")&&(e.hover=Tn(t))}))}function zn(e,t,n,i,a,r){function o(e,t,i){var a=n.filter((function(e){return(0,ae.is)(e,"bpmn:Group")})).filter((function(e){return e.businessObject!==i}));t&&!function(e,t){return e.some((function(e){var n=(0,ae.Cf)(e);return(n.categoryValueRef&&n.categoryValueRef.$parent)===t}))}(a,t)&&function(e){var t=e.$parent;t&&((0,yn.TF)(t.get("rootElements"),e),e.$parent=null)}(t),e&&!function(e,t){return e.some((function(e){return(0,ae.Cf)(e).categoryValueRef===t}))}(a,e)&&function(e){var t=e.$parent;t&&((0,yn.TF)(t.get("categoryValue"),e),e.$parent=null)}(e)}function s(e,n){return function(e,t,n){return(0,yn.WQ)(t.get("categoryValue"),e),e.$parent=t,(0,yn.WQ)(n.get("rootElements"),t),t.$parent=n,e}(e,n,t.getDefinitions())}function c(n,i){var a=(0,ae.Cf)(n),r=a.categoryValueRef;r||(r=a.categoryValueRef=i.categoryValue=i.categoryValue||function(e){return e.create("bpmn:CategoryValue")}(e));var o=r.$parent;o||(o=r.$parent=i.category=i.category||function(e){return e.create("bpmn:Category")}(e)),s(r,o,t.getDefinitions())}function p(e,t){var n=t.category,i=t.categoryValue,a=(0,ae.Cf)(e);i?(a.categoryValueRef=null,o(i,n,a)):o(null,a.categoryValueRef.$parent,a)}function l(t,n){var i=e.create(t.$type);return r.copyElement(t,i,null,n)}a.invoke(et.A,this),this.execute("label.create",(function(e){var t=e.context,n=t.labelTarget;(0,ae.is)(n,"bpmn:Group")&&c(n,t)})),this.revert("label.create",(function(e){var t=e.context,n=t.labelTarget;(0,ae.is)(n,"bpmn:Group")&&p(n,t)})),this.execute("shape.delete",(function(e){var t=e.context,n=t.shape,i=(0,ae.Cf)(n);if((0,ae.is)(n,"bpmn:Group")&&!n.labelTarget){var a=t.categoryValue=i.categoryValueRef;a&&(o(a,t.category=a.$parent,i),i.categoryValueRef=null)}})),this.reverted("shape.delete",(function(e){var t=e.context,n=t.shape;if((0,ae.is)(n,"bpmn:Group")&&!n.labelTarget){var i=t.category,a=t.categoryValue,r=(0,ae.Cf)(n);a&&(r.categoryValueRef=a,s(a,i))}})),this.execute("shape.create",(function(e){var t=e.context,n=t.shape;(0,ae.is)(n,"bpmn:Group")&&!n.labelTarget&&(0,ae.Cf)(n).categoryValueRef&&c(n,t)})),this.reverted("shape.create",(function(e){var t=e.context,n=t.shape;(0,ae.is)(n,"bpmn:Group")&&!n.labelTarget&&(0,ae.Cf)(n).categoryValueRef&&p(n,t)})),i.on("copyPaste.copyElement",770,(function(e){var t=e.descriptor,n=e.element;if((0,ae.is)(n,"bpmn:Group")&&!n.labelTarget){var i=(0,ae.Cf)(n);if(i.categoryValueRef){var a=i.categoryValueRef;t.categoryValue=l(a,!0),a.$parent&&(t.category=l(a.$parent,!0))}}})),i.on("copyPaste.pasteElement",770,(function(e){var t=e.descriptor,n=t.businessObject,i=t.categoryValue,a=t.category;i&&(i=n.categoryValueRef=l(i)),a&&(i.$parent=l(a)),delete t.category,delete t.categoryValue}))}function Xn(e,t,n,i){var a,r,o,s;return 0==(a=(i.y-n.y)*(t.x-e.x)-(i.x-n.x)*(t.y-e.y))?null:(r=e.y-n.y,o=e.x-n.x,s=((i.x-n.x)*r-(i.y-n.y)*o)/a,{x:Math.round(e.x+s*(t.x-e.x)),y:Math.round(e.y+s*(t.y-e.y))})}function Vn(e){function t(e,t,n){var i,a={x:n.x,y:n.y-50},r={x:n.x-50,y:n.y},o=Xn(e,t,n,a),s=Xn(e,t,n,r);i=o&&s?Yn(o,n)>Yn(s,n)?s:o:o||s,e.original=i}e.on("bpmnElement.added",(function(e){var n,i,a=e.element;a.waypoints&&(t((i=(n=a).waypoints)[0],i[1],(0,Ge.pp)(n.source)),t(i[i.length-1],i[i.length-2],(0,Ge.pp)(n.target)))}))}function Yn(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Gn(e){et.A.call(this,e);var t=["bpmn:Participant","bpmn:Lane"];this.executed(["shape.move","shape.create","shape.resize"],(function(e){var n=e.context.shape,i=(0,ae.Cf)(n),a=(0,ae.S2)(n);if((0,ae.f7)(i,t)){var r=a.get("isHorizontal");void 0===r&&(r=!0),a.set("isHorizontal",r)}}))}Ln.$inject=["elementRegistry","eventBus","canvas"],zn.$inject=["bpmnFactory","bpmnjs","elementRegistry","eventBus","injector","moddleCopy"],(0,i.A)(zn,et.A),Vn.$inject=["eventBus"],Gn.$inject=["eventBus"],(0,i.A)(Gn,et.A);var Wn=n(67392),qn=Math.sqrt,Hn=Math.min,Jn=Math.max,Un=Math.abs;function Zn(e){return Math.pow(e,2)}function Kn(e,t){return qn(Zn(e.x-t.x)+Zn(e.y-t.y))}function ei(e,t,n,i){var a=t.x-e.x,r=t.y-e.y,o=n.x-e.x,s=n.y-e.y,c=a*a+r*r,p=(a*o+r*s)/c,l=p*p-(o*o+s*s-i*i)/c;if(l<0&&l>-1e-6&&(l=0),l<0)return[];var m=qn(l),u=-p+m,d=-p-m,h={x:e.x-a*u,y:e.y-r*u};return 0===l?[h]:[h,{x:e.x-a*d,y:e.y-r*d}].filter((function(n){return function(e,t,n){return ti(e.x,t.x,n.x)&&ti(e.y,t.y,n.y)}(n,e,t)}))}function ti(e,t,n){return e>=Hn(t,n)-ni&&e<=Jn(t,n)+ni}var ni=.1;function ii(e,t){return Un(e.x-t.x)<=ni&&Un(e.y-t.y)<=ni}function ai(e,t,n,i){var a=0,r=0,o={point:e,delta:{x:0,y:0}},s=function(e,t){var n,i,a,r,o,s,c,p,l,m,u,d,h=0;for(h=0;h<t.length-1;h++){if(ii(n=t[h],i=t[h+1])?s=[n]:(a=Kn(e,n),r=Kn(e,i),s=ei(n,i,e,Hn(a,r))),s.length<1)throw new Error("expected between [1, 2] circle -> line intersections");1===s.length&&(c={type:"bendpoint",position:s[0],segmentIndex:h,bendpointIndex:ii(n,s[0])?h:h+1}),2===s.length&&(u=s[0],d=s[1],c={type:"segment",position:o={x:(u.x+d.x)/2,y:(u.y+d.y)/2},segmentIndex:h,relativeLocation:Kn(n,o)/Kn(n,i)}),p=Kn(c.position,e),(!m||l>p)&&(m=c,l=p)}return m}(e,n),c=s.segmentIndex,p=function(e,t,n,i){var a=n.segmentIndex,r=t.length-e.length;if(i.segmentMove){var o=i.segmentMove.segmentStartIndex,s=i.segmentMove.newSegmentStartIndex;return a===o?s:a>=s?a+r<s?s:a+r:a}if(i.bendpointMove){var c,p=i.bendpointMove.insert,l=i.bendpointMove.bendpointIndex;return 0===r?a:(a>=l&&(c=p?a+1:a-1),a<l&&(c=a,p&&"bendpoint"!==n.type&&l-1===a&&ri(t,l)<n.relativeLocation&&c++),c)}return 0===r?a:i.connectionStart&&0===a?0:i.connectionEnd&&a===e.length-2?t.length-2:Math.floor((t.length-2)/2)}(n,t,s,i);if(p<0||p>t.length-2||null===p)return o;var l,m,u,d,h,f,v,g=oi(n,c),y=oi(t,p),b=s.position,E=(d=g,h=b,f=(0,Wn.kf)(d[0],d[1]),v=(0,Wn.kf)(d[0],h),0===f?0:v/f),x=(l=g,m=y,u=(0,Wn._H)(l),(0,Wn._H)(m)-u);if("bendpoint"===s.type){var w=t.length-n.length,_=s.bendpointIndex,O=n[_];if(-1!==t.indexOf(O))return o;if(0===w){var S=t[_];return{delta:{x:a=S.x-s.position.x,y:r=S.y-s.position.y},point:{x:e.x+a,y:e.y+r}}}w<0&&0!==_&&_<n.length-1&&(E=ri(n,_))}var A={x:(y[1].x-y[0].x)*E+y[0].x,y:(y[1].y-y[0].y)*E+y[0].y},k=(0,Wn.VE)({x:e.x-b.x,y:e.y-b.y},x);return a=A.x+k.x-e.x,r=A.y+k.y-e.y,{point:(0,Ge.PG)(A),delta:(0,Ge.PG)({x:a,y:r})}}function ri(e,t){var n=(0,Wn.kf)(e[t-1],e[t]);return n/(n+(0,Wn.kf)(e[t],e[t+1]))}function oi(e,t){return[e[t],e[t+1]]}var si=n(84410),ci="name",pi="text";function li(e,t,n,i){function a(e){var n=e.context,a=n.element,r=n.properties;if(ci in r&&t.updateLabel(a,r[ci]),pi in r&&(0,ae.is)(a,"bpmn:TextAnnotation")){var o=i.getTextAnnotationBounds({x:a.x,y:a.y,width:a.width,height:a.height},r[pi]||"");t.updateLabel(a,r.text,o)}}et.A.call(this,e),this.postExecute("element.updateProperties",a),this.postExecute("element.updateModdleProperties",(e=>{(0,ae.Cf)(e.context.element)===e.context.moddleElement&&a(e)})),this.postExecute(["shape.create","connection.create"],(function(e){var n=e.context;if(!1!==(n.hints||{}).createElementsBehavior){var i=n.shape||n.connection;!(0,_e.J2)(i)&&(0,we.UC)(i)&&(0,we.p9)(i)&&t.updateLabel(i,(0,we.p9)(i))}})),this.postExecute("shape.delete",(function(e){var n=e.context,i=n.labelTarget,a=n.hints||{};i&&!1!==a.unsetLabel&&t.updateLabel(i,null,null,{removeShape:!1})})),this.postExecute(["connection.layout","connection.updateWaypoints"],(function(e){var n=e.context;if(!1!==(n.hints||{}).labelBehavior){var i,a=n.connection.label;a&&a.parent&&(i=function(e){var t=e.context,n=t.connection,i=n.label,a=(0,r.kp)({},t.hints),o=t.newWaypoints||n.waypoints,s=t.oldWaypoints;return void 0===a.startChanged&&(a.startChanged=!!a.connectionStart),void 0===a.endChanged&&(a.endChanged=!!a.connectionEnd),function(e,t,n,i){return ai((0,Ge.pp)(e),t,n,i).delta}(i,o,s,a)}(e),t.moveShape(a,i))}})),this.postExecute(["shape.replace"],(function(e){var t=e.context,n=t.newShape,i=t.oldShape,a=(0,ae.Cf)(n);a&&(0,we.UC)(a)&&i.label&&n.label&&(n.label.x=i.label.x,n.label.y=i.label.y)})),this.postExecute("shape.resize",(function(e){var n,i=e.context,a=i.shape,o=i.newBounds,s=i.oldBounds;if((0,we.ur)(a)){var c=a.label,p=function(e,t,n){var i=(0,si._)(e,t,n);return(0,Ge.PG)((0,en.p)(i,e))}(function(e,t){if(t.length){var n=function(e,t){var n=t.map((function(t){return{line:t,distance:(0,Wn.YZ)(e,t)}}));return(0,r.Ul)(n,"distance")[0].line}(e,t);return(0,Wn.P0)(e,n)}}((0,Ge.pp)(c),[[{x:(n=s).x,y:n.y},{x:n.x+(n.width||0),y:n.y}],[{x:n.x+(n.width||0),y:n.y},{x:n.x+(n.width||0),y:n.y+(n.height||0)}],[{x:n.x,y:n.y+(n.height||0)},{x:n.x+(n.width||0),y:n.y+(n.height||0)}],[{x:n.x,y:n.y},{x:n.x,y:n.y+(n.height||0)}]]),s,o);t.moveShape(c,p)}}))}function mi(e,t){function n(e,t){var n=e.context,i=n.connection,a=(0,r.kp)({},n.hints),o=n.newWaypoints||i.waypoints,s=n.oldWaypoints;return void 0===a.startChanged&&(a.startChanged=!!a.connectionStart),void 0===a.endChanged&&(a.endChanged=!!a.connectionEnd),function(e,t,n,i){return ai(e,t,n,i).point}(t,o,s,a)}et.A.call(this,e),this.postExecute(["connection.layout","connection.updateWaypoints"],(function(e){var i=e.context.connection,a=i.outgoing;i.incoming.forEach((function(i){var a=i.waypoints[i.waypoints.length-1],r=n(e,a),o=[].concat(i.waypoints.slice(0,-1),[r]);t.updateWaypoints(i,o)})),a.forEach((function(i){var a=i.waypoints[0],r=n(e,a),o=[].concat([r],i.waypoints.slice(1));t.updateWaypoints(i,o)}))})),this.postExecute(["connection.move"],(function(e){var n=e.context,i=n.connection,a=i.outgoing,r=i.incoming,o=n.delta;r.forEach((function(e){var n=e.waypoints[e.waypoints.length-1],i={x:n.x+o.x,y:n.y+o.y},a=[].concat(e.waypoints.slice(0,-1),[i]);t.updateWaypoints(e,a)})),a.forEach((function(e){var n=e.waypoints[0],i={x:n.x+o.x,y:n.y+o.y},a=[].concat([i],e.waypoints.slice(1));t.updateWaypoints(e,a)}))}))}(0,i.A)(li,et.A),li.$inject=["eventBus","modeling","bpmnFactory","textRenderer"],(0,i.A)(mi,et.A),mi.$inject=["eventBus","modeling"];var ui=n(44944);function di(e,t){et.A.call(this,e),this.postExecute("shape.replace",(function(e){var n=e.oldShape,i=e.newShape;if(function(e,t){return(0,ae.is)(e,"bpmn:Participant")&&(0,xe.Av)(e)&&(0,ae.is)(t,"bpmn:Participant")&&!(0,xe.Av)(t)}(n,i)){var a,r,o,s,c=(a=n,r=(0,kt.cZ)([a],!1),o=[],s=[],r.forEach((function(e){e!==a&&(e.incoming.forEach((function(e){(0,ae.is)(e,"bpmn:MessageFlow")&&o.push(e)})),e.outgoing.forEach((function(e){(0,ae.is)(e,"bpmn:MessageFlow")&&s.push(e)})))}),[]),{incoming:o,outgoing:s});c.incoming.forEach((function(e){var a=(0,ui.tQ)(e,i,n);t.reconnectEnd(e,i,a)})),c.outgoing.forEach((function(e){var a=(0,ui.Fe)(e,i,n);t.reconnectStart(e,i,a)}))}}),!0)}di.$inject=["eventBus","modeling"],(0,i.A)(di,et.A);const hi=["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:EscalationEventDefinition","bpmn:ConditionalEventDefinition","bpmn:SignalEventDefinition"];function fi(e){const t=(0,ae.Cf)(e);if(!((0,ae.is)(t,"bpmn:BoundaryEvent")||(0,ae.is)(t,"bpmn:StartEvent")&&(0,xe.Q1)(t.$parent)))return!1;const n=t.get("eventDefinitions");return!(!n||!n.length)&&hi.some((e=>(0,ae.is)(n[0],e)))}function vi(e){return(0,ae.is)(e,"bpmn:BoundaryEvent")?"cancelActivity":"isInterrupting"}function gi(e,t){e.invoke(et.A,this),this.postExecuted("shape.replace",(function(e){const n=e.context.oldShape,i=e.context.newShape,a=e.context.hints;if(!fi(i))return;const r=vi(i);if(a.targetElement&&void 0!==a.targetElement[r])return;const o=(0,ae.Cf)(n).get(r);o!==(0,ae.Cf)(i).get(r)&&t.updateProperties(i,{[r]:o})}))}function yi(e,t){et.A.call(this,e),this.preExecute("shape.resize",(function(e){var n=e.shape,i=(0,ae.S2)(n),a=i&&i.get("label");a&&a.get("bounds")&&t.updateModdleProperties(n,a,{bounds:void 0})}),!0)}function bi(e,t,n){et.A.call(this,e),this.preExecute("shape.delete",(function(e){var i,a,r,o=e.context.shape;if(1===o.incoming.length&&1===o.outgoing.length){var s=o.incoming[0],c=o.outgoing[0];if((0,ae.is)(s,"bpmn:SequenceFlow")&&(0,ae.is)(c,"bpmn:SequenceFlow")&&t.canConnect(s.source,c.target,s)){var p=(i=s.waypoints,a=c.waypoints,(r=Xn(Ei(i[i.length-2]),Ei(i[i.length-1]),Ei(a[1]),Ei(a[0])))?[].concat(i.slice(0,i.length-1),[r],a.slice(1)):[Ei(i[0]),Ei(a[a.length-1])]);n.reconnectEnd(s,c.target,p)}}}))}function Ei(e){return e.original||e}function xi(e,t){et.A.call(this,e),this.preExecute("shape.delete",(function(e){var t=e.shape,n=t.parent;(0,ae.is)(t,"bpmn:Participant")&&(e.collaborationRoot=n)}),!0),this.postExecute("shape.delete",(function(e){var n=e.collaborationRoot;if(n&&!n.businessObject.participants.length){var i=t.makeProcess(),a=n.children.slice();t.moveElements(a,{x:0,y:0},i)}}),!0)}function wi(e,t,n,i){et.A.call(this,e);var a=i.get("dragging",!1);function o(e){var i,a,r=e.source,o=e.target;e.parent&&((0,ae.is)(e,"bpmn:SequenceFlow")&&(n.canConnectSequenceFlow(r,o)||(a=!0),n.canConnectMessageFlow(r,o)&&(i="bpmn:MessageFlow")),(0,ae.is)(e,"bpmn:MessageFlow")&&(n.canConnectMessageFlow(r,o)||(a=!0),n.canConnectSequenceFlow(r,o)&&(i="bpmn:SequenceFlow")),a&&t.removeConnection(e),i&&t.connect(r,o,{type:i,waypoints:e.waypoints.slice()}))}this.postExecuted("elements.move",(function(e){var t=e.closure.allConnections;(0,r.jJ)(t,o)}),!0),this.preExecute("connection.reconnect",(function(e){var i,r,o=e.context,s=o.connection,c=o.newSource||s.source,p=o.newTarget||s.target;(i=n.canConnect(c,p))&&i.type!==s.type&&(r=t.connect(c,p,{type:i.type,associationDirection:i.associationDirection,waypoints:s.waypoints.slice()}),s.parent&&t.removeConnection(s),o.connection=r,a&&function(e,t){var n,i=a.context(),r=i&&i.payload.previousSelection;r&&r.length&&-1!==(n=r.indexOf(e))&&r.splice(n,1,t)}(s,r))})),this.postExecuted("element.updateProperties",(function(e){var n,i=e.context,a=i.properties,o=i.element,s=o.businessObject;a.default&&(n=(0,r.I6)(o.outgoing,(0,r.gH)({id:o.businessObject.default.id})))&&t.updateProperties(n,{conditionExpression:void 0}),a.conditionExpression&&s.sourceRef.default===s&&t.updateProperties(o.source,{default:void 0})}))}function _i(e,t,n,i,a,o){i.invoke(et.A,this),this._bpmnReplace=e,this._elementRegistry=n,this._selection=o,this.postExecuted(["elements.create"],500,(function(e){var n=e.context,i=n.parent,a=n.elements,o=(0,r.TS)(a,(function(e,n){var a=t.canReplace([n],n.host||n.parent||i);return a?e.concat(a.replacements):e}),[]);o.length&&this._replaceElements(a,o)}),this),this.postExecuted(["elements.move"],500,(function(e){var n=e.context,i=n.newParent,a=n.newHost,o=[];(0,r.jJ)(n.closure.topLevel,(function(e){o=(0,xe.Q1)(e)?o.concat(e.children):o.concat(e)})),1===o.length&&a&&(i=a);var s=t.canReplace(o,i);s&&this._replaceElements(o,s.replacements,a)}),this),this.postExecute(["shape.replace"],1500,(function(e){var n,i=e.context,a=i.oldShape,r=i.newShape,o=a.attachers;o&&o.length&&(n=t.canReplace(o,r),this._replaceElements(o,n.replacements))}),this),this.postExecuted(["shape.replace"],1500,(function(e){var t=e.context,n=t.oldShape,i=t.newShape;a.unclaimId(n.businessObject.id,n.businessObject),a.updateProperties(i,{id:n.id})}))}gi.$inject=["injector","modeling"],(0,i.A)(gi,et.A),(0,i.A)(yi,et.A),yi.$inject=["eventBus","modeling"],(0,i.A)(bi,et.A),bi.$inject=["eventBus","bpmnRules","modeling"],xi.$inject=["eventBus","modeling"],(0,i.A)(xi,et.A),(0,i.A)(wi,et.A),wi.$inject=["eventBus","modeling","bpmnRules","injector"],(0,i.A)(_i,et.A),_i.prototype._replaceElements=function(e,t){var n=this._elementRegistry,i=this._bpmnReplace,a=this._selection;(0,r.jJ)(t,(function(t){var a={type:t.newElementType},r=n.get(t.oldElementId),o=e.indexOf(r);e[o]=i.replaceElement(r,a,{select:!1})})),t&&a.select(e)},_i.$inject=["bpmnReplace","bpmnRules","elementRegistry","injector","modeling","selection"];var Oi={width:140,height:120},Si={width:300,height:60},Ai={width:60,height:300},ki={width:300,height:150},Ci={width:150,height:300},Pi={width:140,height:120},Ti={width:50,height:30};function Ri(e){e.on("resize.start",1500,(function(e){var t=e.context,n=t.shape,i=t.direction,a=t.balanced;((0,ae.is)(n,"bpmn:Lane")||(0,ae.is)(n,"bpmn:Participant"))&&(t.resizeConstraints=function(e,t,n){var i=Tn(e),a=!0,r=!0,o=Cn(i,[i]),s=(0,Ge.Fy)(e),c={},p={},l=(0,xe.$b)(e),m=l?Si:Ai;/n/.test(t)?p.top=s.bottom-m.height:/e/.test(t)?p.right=s.left+m.width:/s/.test(t)?p.bottom=s.top+m.height:/w/.test(t)&&(p.left=s.right-m.width),o.forEach((function(e){var i=(0,Ge.Fy)(e);l?(i.top<s.top-10&&(a=!1),i.bottom>s.bottom+10&&(r=!1)):(i.left<s.left-10&&(a=!1),i.right>s.right+10&&(r=!1)),/n/.test(t)&&(n&&Di(s.top-i.bottom)<10&&ji(c,"top",i.top+m.height),Di(s.top-i.top)<5&&Bi(p,"top",i.bottom-m.height)),/e/.test(t)&&(n&&Di(s.right-i.left)<10&&Bi(c,"right",i.right-m.width),Di(s.right-i.right)<5&&ji(p,"right",i.left+m.width)),/s/.test(t)&&(n&&Di(s.bottom-i.top)<10&&Bi(c,"bottom",i.bottom-m.height),Di(s.bottom-i.bottom)<5&&ji(p,"bottom",i.top+m.height)),/w/.test(t)&&(n&&Di(s.left-i.right)<10&&ji(c,"left",i.left+m.width),Di(s.left-i.left)<5&&Bi(p,"left",i.right-m.width))}));var u=i.children.filter((function(e){return!e.hidden&&!e.waypoints&&((0,ae.is)(e,"bpmn:FlowElement")||(0,ae.is)(e,"bpmn:Artifact"))})),d=l?Fi:Qi;return u.forEach((function(e){var n=(0,Ge.Fy)(e);!/n/.test(t)||l&&!a||Bi(p,"top",n.top-d.top),/e/.test(t)&&(l||r)&&ji(p,"right",n.right+d.right),!/s/.test(t)||l&&!r||ji(p,"bottom",n.bottom+d.bottom),/w/.test(t)&&(l||a)&&Bi(p,"left",n.left-d.left)})),{min:p,max:c}}(n,i,a)),(0,ae.is)(n,"bpmn:SubProcess")&&(0,xe.Av)(n)&&(t.minDimensions=Pi),(0,ae.is)(n,"bpmn:TextAnnotation")&&(t.minDimensions=Ti)}))}Ri.$inject=["eventBus"];var Di=Math.abs,Ni=Math.min,$i=Math.max;function Mi(e,t,n,i){var a=e[t];e[t]=void 0===a?n:i(n,a)}function Bi(e,t,n){return Mi(e,t,n,Ni)}function ji(e,t,n){return Mi(e,t,n,$i)}var Fi={top:20,left:50,right:20,bottom:20},Qi={top:50,left:20,right:20,bottom:20},Ii=n(72120);function Li(e,t){e.on("resize.start",1501,(function(e){var t=e.context,n=t.shape;((0,ae.is)(n,"bpmn:Lane")||(0,ae.is)(n,"bpmn:Participant"))&&(t.balanced=!(0,Ii.Io)(e))})),e.on("resize.end",1001,(function(e){var n=e.context,i=n.shape,a=n.canExecute,r=n.newBounds;if((0,ae.is)(i,"bpmn:Lane")||(0,ae.is)(i,"bpmn:Participant"))return a&&(r=(0,Ge.Au)(r),t.resizeLane(i,r,n.balanced)),!1}))}function zi(e,t,n,i,a){function o(e){return(0,ae.f7)(e,["bpmn:ReceiveTask","bpmn:SendTask"])||function(e,t){return(0,r.cy)(t)||(t=[t]),(0,r.zN)(t,(function(t){return(0,xe.Ip)(e,t)}))}(e,["bpmn:ErrorEventDefinition","bpmn:EscalationEventDefinition","bpmn:MessageEventDefinition","bpmn:SignalEventDefinition"])}function s(t){var n=e.getDefinitions().get("rootElements");return!!(0,r.I6)(n,(0,r.gH)({id:t.id}))}function c(e){return(0,ae.is)(e,"bpmn:ErrorEventDefinition")?"errorRef":(0,ae.is)(e,"bpmn:EscalationEventDefinition")?"escalationRef":(0,ae.is)(e,"bpmn:MessageEventDefinition")?"messageRef":(0,ae.is)(e,"bpmn:SignalEventDefinition")?"signalRef":void 0}function p(e){if((0,ae.f7)(e,["bpmn:ReceiveTask","bpmn:SendTask"]))return e.get("messageRef");var t=e.get("eventDefinitions")[0];return t.get(c(t))}n.invoke(et.A,this),this.executed(["shape.create","element.updateProperties","element.updateModdleProperties"],(function(t){var n=t.shape||t.element;if(o(n)){var i,a=p((0,ae.Cf)(n));a&&!s(a)&&(i=e.getDefinitions().get("rootElements"),(0,yn.WQ)(i,a),t.addedRootElement=a)}}),!0),this.reverted(["shape.create","element.updateProperties","element.updateModdleProperties"],(function(t){var n=t.addedRootElement;if(n){var i=e.getDefinitions().get("rootElements");(0,yn.TF)(i,n)}}),!0),t.on("copyPaste.copyElement",(function(e){var t=e.descriptor,n=e.element;if(!n.labelTarget&&o(n)){var i=p((0,ae.Cf)(n));i&&(t.referencedRootElement=i)}})),t.on("copyPaste.pasteElement",500,(function(e){var t=e.descriptor,n=t.businessObject,r=t.referencedRootElement;r&&(s(r)||(r=i.copyElement(r,a.create(r.$type))),function(e,t){if((0,ae.f7)(e,["bpmn:ReceiveTask","bpmn:SendTask"]))return e.set("messageRef",t);var n=e.get("eventDefinitions")[0];n.set(c(n),t)}(n,r),delete t.referencedRootElement)}))}Li.$inject=["eventBus","modeling"],zi.$inject=["bpmnjs","eventBus","injector","moddleCopy","bpmnFactory"],(0,i.A)(zi,et.A);var Xi=Math.max;function Vi(e){e.on("spaceTool.getMinDimensions",(function(e){var t=e.shapes,n=e.axis,i=e.start,a={};return(0,r.jJ)(t,(function(e){var t=e.id;(0,ae.is)(e,"bpmn:Participant")&&(a[t]=function(e,t,n){var i=(0,xe.$b)(e);if(!Pn(e).length)return i?ki:Ci;var a=function(e){return"x"===e}(t);return a?i?ki:{width:Gi(e,n,a),height:Ci.height}:i?{width:ki.width,height:Yi(e,n,a)}:Ci}(e,n,i)),(0,ae.is)(e,"bpmn:Lane")&&(a[t]=(0,xe.$b)(e)?Si:Ai),(0,ae.is)(e,"bpmn:SubProcess")&&(0,xe.Av)(e)&&(a[t]=Pi),(0,ae.is)(e,"bpmn:TextAnnotation")&&(a[t]=Ti),(0,ae.is)(e,"bpmn:Group")&&(a[t]=Oi)})),a}))}function Yi(e,t,n){var i;return i=function(e,t,n){var i;return i=Wi(Pn(e),t,n),e.height-i.height+Si.height}(e,t,n),Xi(ki.height,i)}function Gi(e,t,n){var i;return i=function(e,t,n){var i;return i=Wi(Pn(e),t,n),e.width-i.width+Ai.width}(e,t,n),Xi(Ci.width,i)}function Wi(e,t,n){var i,a,r;for(i=0;i<e.length;i++)if(a=e[i],!n&&t>=a.y&&t<=a.y+a.height||n&&t>=a.x&&t<=a.x+a.width)return(r=Pn(a)).length?Wi(r,t,n):a}Vi.$inject=["eventBus"];function qi(e,t,n,i,a,o,s){et.A.call(this,t),this._canvas=e,this._eventBus=t,this._modeling=n,this._elementFactory=i,this._bpmnFactory=a,this._bpmnjs=o,this._elementRegistry=s;var c=this;function p(e){return(0,ae.is)(e,"bpmn:SubProcess")&&!(0,xe.Av)(e)}function l(t){var n=t.shape,i=t.newRootElement,a=(0,ae.Cf)(n);i=c._addDiagram(i||a),t.newRootElement=e.addRootElement(i)}function m(t){var n=t.shape,i=(0,ae.Cf)(n);c._removeDiagram(i);var a=t.newRootElement=s.get((0,at.hJ)(i));e.removeRootElement(a)}this.executed("shape.create",(function(e){p(e.shape)&&l(e)}),!0),this.postExecuted("shape.create",(function(e){var t=e.shape,n=e.newRootElement;n&&t.children&&(c._showRecursively(t.children),c._moveChildrenToShape(t,n))}),!0),this.reverted("shape.create",(function(e){p(e.shape)&&m(e)}),!0),this.preExecuted("shape.delete",(function(e){var t=e.shape;if(p(t)){var i=s.get((0,at.hJ)(t));i&&n.removeElements(i.children.slice())}}),!0),this.executed("shape.delete",(function(e){p(e.shape)&&m(e)}),!0),this.reverted("shape.delete",(function(e){p(e.shape)&&l(e)}),!0),this.preExecuted("shape.replace",(function(t){var n=t.oldShape,i=t.newShape;p(n)&&p(i)&&(t.oldRoot=e.removeRootElement((0,at.hJ)(n)))}),!0),this.postExecuted("shape.replace",(function(t){var i=t.newShape,a=t.oldRoot,r=e.findRoot((0,at.hJ)(i));if(a&&r){var o=a.children;n.moveElements(o,{x:0,y:0},r)}}),!0),this.executed("element.updateProperties",(function(e){var t=e.element;if((0,ae.is)(t,"bpmn:SubProcess")){var n=e.properties,i=e.oldProperties.id,a=n.id;if(i!==a){if((0,at.hC)(t))return s.updateId(t,(0,at.vY)(a)),void s.updateId(i,a);s.get((0,at.vY)(i))&&s.updateId((0,at.vY)(i),(0,at.vY)(a))}}}),!0),this.reverted("element.updateProperties",(function(e){var t=e.element;if((0,ae.is)(t,"bpmn:SubProcess")){var n=e.properties,i=e.oldProperties.id,a=n.id;if(i!==a){if((0,at.hC)(t))return s.updateId(t,(0,at.vY)(i)),void s.updateId(a,i);var r=s.get((0,at.vY)(a));r&&s.updateId(r,(0,at.vY)(i))}}}),!0),t.on("element.changed",(function(e){var n=e.element;if((0,at.hC)(n)){var i=n,a=s.get((0,at.rr)(i));a&&a!==i&&t.fire("element.changed",{element:a})}})),this.executed("shape.toggleCollapse",400,(function(e){var t=e.shape;(0,ae.is)(t,"bpmn:SubProcess")&&((0,xe.Av)(t)?m(e):(l(e),c._showRecursively(t.children)))}),!0),this.reverted("shape.toggleCollapse",400,(function(e){var t=e.shape;(0,ae.is)(t,"bpmn:SubProcess")&&((0,xe.Av)(t)?m(e):(l(e),c._showRecursively(t.children)))}),!0),this.postExecuted("shape.toggleCollapse",600,(function(e){var t=e.shape;if((0,ae.is)(t,"bpmn:SubProcess")){var n=e.newRootElement;n&&((0,xe.Av)(t)?c._moveChildrenToShape(n,t):c._moveChildrenToShape(t,n))}}),!0),t.on("copyPaste.createTree",(function(e){var t=e.element,n=e.children;if(p(t)){var i=(0,at.hJ)(t),a=s.get(i);a&&n.push.apply(n,a.children)}})),t.on("copyPaste.copyElement",(function(e){var t=e.descriptor,n=e.element,i=e.elements,a=n.parent;if((0,ae.is)((0,ae.S2)(a),"bpmndi:BPMNPlane")){var o=(0,at.rr)(a),s=(0,r.I6)(i,(function(e){return e.id===o}));s&&(t.parent=s.id)}})),t.on("copyPaste.pasteElement",(function(e){var t=e.descriptor;t.parent&&(p(t.parent)||t.parent.hidden)&&(t.hidden=!0)}))}function Hi(e,t){e.invoke(et.A,this),this.postExecuted("shape.replace",(function(e){var n=e.context.oldShape,i=e.context.newShape;if((0,ae.is)(i,"bpmn:SubProcess")&&!(0,ae.is)(i,"bpmn:AdHocSubProcess")&&((0,ae.is)(n,"bpmn:Task")||(0,ae.is)(n,"bpmn:CallActivity"))&&(0,xe.Av)(i)){var a,r={x:(a=i).x+a.width/6,y:a.y+a.height/2};t.createShape({type:"bpmn:StartEvent"},r,i)}}))}function Ji(e){et.A.call(this,e),this.preExecute("connection.create",(function(e){const{target:t}=e;(0,ae.is)(t,"bpmn:TextAnnotation")&&(e.parent=t.parent)}),!0),this.preExecute(["shape.create","shape.resize","elements.move"],(function(e){const t=e.shapes||[e.shape];1===t.length&&(0,ae.is)(t[0],"bpmn:TextAnnotation")&&(e.hints=e.hints||{},e.hints.autoResize=!1)}),!0)}function Ui(e,t){et.A.call(this,e),this.postExecuted("shape.toggleCollapse",1500,(function(e){var n=e.shape;if(!(0,xe.Av)(n)){var i=(0,kt.cZ)(n);i.forEach((function(e){var t=e.incoming.slice(),n=e.outgoing.slice();(0,r.jJ)(t,(function(e){a(e,!0)})),(0,r.jJ)(n,(function(e){a(e,!1)}))}))}function a(e,a){-1!==i.indexOf(e.source)&&-1!==i.indexOf(e.target)||(a?t.reconnectEnd(e,n,(0,Ge.pp)(n)):t.reconnectStart(e,n,(0,Ge.pp)(n)))}}),!0)}function Zi(e,t,n){et.A.call(this,e),this.executed(["shape.toggleCollapse"],500,(function(e){var t,n=e.context.shape;(0,ae.is)(n,"bpmn:SubProcess")&&(n.collapsed?(0,ae.S2)(n).isExpanded=!1:((t=n.children).length&&t.forEach((function(e){"label"!==e.type||e.businessObject.name||(e.hidden=!0)})),(0,ae.S2)(n).isExpanded=!0))})),this.reverted(["shape.toggleCollapse"],500,(function(e){var t=e.context.shape;t.collapsed?(0,ae.S2)(t).isExpanded=!1:(0,ae.S2)(t).isExpanded=!0})),this.postExecuted(["shape.toggleCollapse"],500,(function(e){var i,a=e.context.shape,r=t.getDefaultSize(a);i=a.collapsed?function(e,t){return{x:e.x+(e.width-t.width)/2,y:e.y+(e.height-t.height)/2,width:t.width,height:t.height}}(a,r):function(e,t){var n,i,a,r=t;return n=(a=e.children,a.filter((function(e){return!e.hidden}))).concat([e]),(i=(0,On.uR)(n))?(r.width=Math.max(i.width,r.width),r.height=Math.max(i.height,r.height),r.x=i.x+(i.width-r.width)/2,r.y=i.y+(i.height-r.height)/2):(r.x=e.x+(e.width-r.width)/2,r.y=e.y+(e.height-r.height)/2),r}(a,r),n.resizeShape(a,i,null,{autoResize:!a.collapsed&&"nwse"})}))}function Ki(e,t,n,i){t.invoke(et.A,this),this.preExecute("shape.delete",(function(e){var t=e.context.shape,a=t.businessObject;(0,_e.J2)(t)||((0,ae.is)(t,"bpmn:Participant")&&(0,xe.Av)(t)&&n.ids.unclaim(a.processRef.id),i.unclaimId(a.id,a))})),this.preExecute("connection.delete",(function(e){var t=e.context.connection.businessObject;i.unclaimId(t.id,t)})),this.preExecute("canvas.updateRoot",(function(){var t=e.getRootElement(),i=t.businessObject;(0,ae.is)(t,"bpmn:Collaboration")&&n.ids.unclaim(i.id)}))}function ea(e,t){et.A.call(this,e),this.preExecute("connection.delete",(function(e){var n=e.context.connection,i=n.source;(function(e,t){if(!(0,ae.is)(e,"bpmn:SequenceFlow"))return!1;var n=(0,ae.Cf)(t),i=(0,ae.Cf)(e);return n.get("default")===i})(n,i)&&t.updateProperties(i,{default:null})}))}function ta(e,t){var n;et.A.call(this,e);var i=["spaceTool","lane.add","lane.resize","lane.split","elements.create","elements.delete","elements.move","shape.create","shape.delete","shape.move","shape.resize"];this.preExecute(i,5e3,(function(e){(n=n||new na).enter()})),this.postExecuted(i,500,(function(e){!function(){if(!n)throw new Error("out of bounds release");n.leave()&&(t.updateLaneRefs(n.flowNodes,n.lanes),n=null)}()})),this.preExecute(["shape.create","shape.move","shape.delete","shape.resize"],(function(e){var t=e.context.shape,i=function(){if(!n)throw new Error("out of bounds release");return n}();t.labelTarget||((0,ae.is)(t,"bpmn:Lane")&&i.addLane(t),(0,ae.is)(t,"bpmn:FlowNode")&&i.addFlowNode(t))}))}function na(){this.flowNodes=[],this.lanes=[],this.counter=0,this.addLane=function(e){this.lanes.push(e)},this.addFlowNode=function(e){this.flowNodes.push(e)},this.enter=function(){this.counter++},this.leave=function(){return this.counter--,!this.counter}}function ia(e,t){et.A.call(this,e),this.postExecuted("elements.create",(function(e){const n=e.context.elements;for(const e of n)aa(e)&&!ra(e)&&t.updateProperties(e,{isForCompensation:void 0})}))}function aa(e){const t=(0,ae.Cf)(e);return t&&t.isForCompensation}function ra(e){return e.incoming.filter((e=>function(e){return e&&(0,ae.is)(e,"bpmn:BoundaryEvent")&&(0,xe.Ip)(e,"bpmn:CompensateEventDefinition")}(e.source))).length>0}(0,i.A)(qi,et.A),qi.prototype._moveChildrenToShape=function(e,t){var n,i=this._modeling,a=e.children;if(a){var r=(a=a.concat(a.reduce((function(t,n){return n.label&&n.label.parent!==e?t.concat(n.label):t}),[]))).filter((function(e){return!e.hidden}));if(r.length){var o=(0,kt.U7)(r);if(t.x){var s=(0,Ge.pp)(t),c=(0,Ge.pp)(o);n={x:s.x-c.x,y:s.y-c.y}}else n={x:180-o.x,y:160-o.y};i.moveElements(a,n,t,{autoResize:!1})}else i.moveElements(a,{x:0,y:0},t,{autoResize:!1})}},qi.prototype._showRecursively=function(e,t){var n=this,i=[];return e.forEach((function(e){e.hidden=!!t,i=i.concat(e),e.children&&(i=i.concat(n._showRecursively(e.children,e.collapsed||t)))})),i},qi.prototype._addDiagram=function(e){var t=this._bpmnjs.getDefinitions().diagrams;return e.businessObject||(e=this._createNewDiagram(e)),t.push(e.di.$parent),e},qi.prototype._createNewDiagram=function(e){var t=this._bpmnFactory,n=this._elementFactory,i=t.create("bpmndi:BPMNPlane",{bpmnElement:e}),a=t.create("bpmndi:BPMNDiagram",{plane:i});return i.$parent=a,n.createRoot({id:(0,at.hJ)(e),type:e.$type,di:i,businessObject:e,collapsed:!0})},qi.prototype._removeDiagram=function(e){var t=this._bpmnjs.getDefinitions().diagrams,n=(0,r.I6)(t,(function(t){return t.plane.bpmnElement.id===e.id}));return t.splice(t.indexOf(n),1),n},qi.$inject=["canvas","eventBus","modeling","elementFactory","bpmnFactory","bpmnjs","elementRegistry"],Hi.$inject=["injector","modeling"],(0,i.A)(Hi,et.A),(0,i.A)(Ji,et.A),Ji.$inject=["eventBus"],(0,i.A)(Ui,et.A),Ui.$inject=["eventBus","modeling"],(0,i.A)(Zi,et.A),Zi.$inject=["eventBus","elementFactory","modeling"],(0,i.A)(Ki,et.A),Ki.$inject=["canvas","injector","moddle","modeling"],(0,i.A)(ea,et.A),ea.$inject=["eventBus","modeling"],ta.$inject=["eventBus","modeling"],(0,i.A)(ta,et.A),(0,i.A)(ia,et.A),ia.$inject=["eventBus","modeling"];const oa={__init__:["adaptiveLabelPositioningBehavior","appendBehavior","associationBehavior","attachEventBehavior","boundaryEventBehavior","compensateBoundaryEventBehaviour","createBehavior","createDataObjectBehavior","createParticipantBehavior","dataInputAssociationBehavior","dataStoreBehavior","deleteLaneBehavior","detachEventBehavior","dropOnFlowBehavior","eventBasedGatewayBehavior","fixHoverBehavior","groupBehavior","importDockingFix","isHorizontalFix","labelBehavior","layoutConnectionBehavior","messageFlowBehavior","nonInterruptingBehavior","removeElementBehavior","removeEmbeddedLabelBoundsBehavior","removeParticipantBehavior","replaceConnectionBehavior","replaceElementBehaviour","resizeBehavior","resizeLaneBehavior","rootElementReferenceBehavior","spaceToolBehavior","subProcessPlaneBehavior","subProcessStartEventBehavior","textAnnotationBehavior","toggleCollapseConnectionBehaviour","toggleElementCollapseBehaviour","unclaimIdBehavior","updateFlowNodeRefsBehavior","unsetDefaultFlowBehavior","setCompensationActivityAfterPasteBehavior"],adaptiveLabelPositioningBehavior:["type",nn],appendBehavior:["type",rn],associationBehavior:["type",on],attachEventBehavior:["type",sn],boundaryEventBehavior:["type",pn],compensateBoundaryEventBehaviour:["type",ln],createBehavior:["type",hn],createDataObjectBehavior:["type",fn],createParticipantBehavior:["type",gn],dataInputAssociationBehavior:["type",En],dataStoreBehavior:["type",_n],deleteLaneBehavior:["type",Rn],detachEventBehavior:["type",Dn],dropOnFlowBehavior:["type",Mn],eventBasedGatewayBehavior:["type",Fn],fixHoverBehavior:["type",Ln],groupBehavior:["type",zn],importDockingFix:["type",Vn],isHorizontalFix:["type",Gn],labelBehavior:["type",li],layoutConnectionBehavior:["type",mi],messageFlowBehavior:["type",di],nonInterruptingBehavior:["type",gi],removeElementBehavior:["type",bi],removeEmbeddedLabelBoundsBehavior:["type",yi],removeParticipantBehavior:["type",xi],replaceConnectionBehavior:["type",wi],replaceElementBehaviour:["type",_i],resizeBehavior:["type",Ri],resizeLaneBehavior:["type",Li],rootElementReferenceBehavior:["type",zi],spaceToolBehavior:["type",Vi],subProcessPlaneBehavior:["type",qi],subProcessStartEventBehavior:["type",Hi],textAnnotationBehavior:["type",Ji],toggleCollapseConnectionBehaviour:["type",Ui],toggleElementCollapseBehaviour:["type",Zi],unclaimIdBehavior:["type",Ki],unsetDefaultFlowBehavior:["type",ea],updateFlowNodeRefsBehavior:["type",ta],setCompensationActivityAfterPasteBehavior:["type",ia]};var sa=n(81734);function ca(e,t){var n=(0,Ge.vc)(e,t,-15);return"intersect"!==n?n:null}function pa(e){At.A.call(this,e)}function la(e){return!e||(0,_e.J2)(e)}function ma(e){do{if((0,ae.is)(e,"bpmn:Process"))return(0,ae.Cf)(e);if((0,ae.is)(e,"bpmn:Participant"))return(0,ae.Cf)(e).processRef||(0,ae.Cf)(e)}while(e=e.parent)}function ua(e){return(0,ae.is)(e,"bpmn:TextAnnotation")}function da(e){return(0,ae.is)(e,"bpmn:Group")&&!e.labelTarget}function ha(e){return(0,ae.is)(e,"bpmn:BoundaryEvent")&&ya(e,"bpmn:CompensateEventDefinition")}function fa(e){return(0,ae.Cf)(e).isForCompensation}function va(e){for(var t=e;t=t.parent;){if((0,ae.is)(t,"bpmn:FlowElementsContainer"))return(0,ae.Cf)(t);if((0,ae.is)(t,"bpmn:Participant"))return(0,ae.Cf)(t).processRef}return null}function ga(e,t){return va(e)===va(t)}function ya(e,t){var n=(0,ae.Cf)(e);return!!(0,r.I6)(n.eventDefinitions||[],(function(e){return(0,ae.is)(e,t)}))}function ba(e,t){return((0,ae.Cf)(e).eventDefinitions||[]).every((function(e){return(0,ae.is)(e,t)}))}function Ea(e,t){var n=function(e){for(var t=[];e;)(e=e.parent)&&t.push(e);return t}(t);return-1!==n.indexOf(e)}function xa(e,t,n){if(la(e)||la(t))return null;if(!(0,ae.is)(n,"bpmn:DataAssociation")){if($a(e,t))return{type:"bpmn:MessageFlow"};if(Ma(e,t))return{type:"bpmn:SequenceFlow"}}return Ba(e,t)||(Na(e,t)?{type:"bpmn:Association",associationDirection:"One"}:!!Da(e,t)&&{type:"bpmn:Association",associationDirection:"None"})}function wa(e,t){return!(!(0,_e.J2)(e)&&!da(e))||!((0,ae.is)(t,"bpmn:Participant")&&!(0,xe.Av)(t))&&((0,ae.is)(e,"bpmn:Participant")?(0,ae.is)(t,"bpmn:Process")||(0,ae.is)(t,"bpmn:Collaboration"):(0,ae.f7)(e,["bpmn:DataInput","bpmn:DataOutput"])&&e.parent?t===e.parent:(0,ae.is)(e,"bpmn:Lane")?(0,ae.is)(t,"bpmn:Participant")||(0,ae.is)(t,"bpmn:Lane"):!((0,ae.is)(e,"bpmn:BoundaryEvent")&&(n=e,!(0,ae.Cf)(n).cancelActivity||!Oa(n)&&!Sa(n)))&&((0,ae.is)(e,"bpmn:FlowElement")&&!(0,ae.is)(e,"bpmn:DataStoreReference")?(0,ae.is)(t,"bpmn:FlowElementsContainer")?(0,xe.Av)(t):(0,ae.f7)(t,["bpmn:Participant","bpmn:Lane"]):(0,ae.is)(e,"bpmn:DataStoreReference")&&(0,ae.is)(t,"bpmn:Collaboration")?(0,r.zN)((0,ae.Cf)(t).get("participants"),(function(e){return!!e.get("processRef")})):(0,ae.f7)(e,["bpmn:Artifact","bpmn:DataAssociation","bpmn:DataStoreReference"])?(0,ae.f7)(t,["bpmn:Collaboration","bpmn:Lane","bpmn:Participant","bpmn:Process","bpmn:SubProcess"]):!!(0,ae.is)(e,"bpmn:MessageFlow")&&((0,ae.is)(t,"bpmn:Collaboration")||e.source.parent==t||e.target.parent==t)));var n}function _a(e){return(0,ae.is)(e,"bpmn:Lane")}function Oa(e){var t=(0,ae.Cf)(e);return t&&!(t.eventDefinitions&&t.eventDefinitions.length)}function Sa(e){return Aa(e,["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:SignalEventDefinition","bpmn:ConditionalEventDefinition"])}function Aa(e,t){return t.some((function(t){return ya(e,t)}))}function ka(e,t,n,i){if(Array.isArray(e)||(e=[e]),1!==e.length)return!1;var a=e[0];return!(0,_e.J2)(a)&&!!function(e){return!!function(e){return!(0,_e.J2)(e)&&(0,ae.is)(e,"bpmn:BoundaryEvent")}(e)||!(!(0,ae.is)(e,"bpmn:IntermediateThrowEvent")||!Oa(e))||(0,ae.is)(e,"bpmn:IntermediateCatchEvent")&&Sa(e)}(a)&&!(0,xe.Q1)(t)&&!(!(0,ae.is)(t,"bpmn:Activity")||fa(t))&&!(i&&!ca(i,t))&&!function(e){return(0,ae.is)(e,"bpmn:ReceiveTask")&&(0,r.I6)(e.incoming,(function(e){return(0,ae.is)(e.source,"bpmn:EventBasedGateway")}))}(t)&&"attach"}function Ca(e,t,n){if(!t)return!1;var i={replacements:[]};return(0,r.jJ)(e,(function(e){(0,xe.Q1)(t)||(0,ae.is)(e,"bpmn:StartEvent")&&"label"!==e.type&&wa(e,t)&&((0,xe.oh)(e)||i.replacements.push({oldElementId:e.id,newElementType:"bpmn:StartEvent"}),((0,xe.GM)(e)||(0,xe.ph)(e)||(0,xe.fP)(e))&&i.replacements.push({oldElementId:e.id,newElementType:"bpmn:StartEvent"}),Aa(e,["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:SignalEventDefinition","bpmn:ConditionalEventDefinition"])&&(0,ae.is)(t,"bpmn:SubProcess")&&i.replacements.push({oldElementId:e.id,newElementType:"bpmn:StartEvent"})),(0,ae.is)(t,"bpmn:Transaction")||ya(e,"bpmn:CancelEventDefinition")&&"label"!==e.type&&((0,ae.is)(e,"bpmn:EndEvent")&&wa(e,t)&&i.replacements.push({oldElementId:e.id,newElementType:"bpmn:EndEvent"}),(0,ae.is)(e,"bpmn:BoundaryEvent")&&ka(e,t,0,n)&&i.replacements.push({oldElementId:e.id,newElementType:"bpmn:BoundaryEvent"}))})),!!i.replacements.length&&i}function Pa(e,t){return!(0,r.zN)(e,_a)&&(!t||e.every((function(e){return wa(e,t)})))}function Ta(e,t,n,i){return!!t&&(!(!(0,_e.J2)(e)&&!da(e))||n!==t&&(!n||!Ea(n,t))&&(wa(e,t)||ja(e,t)))}function Ra(e,t){return(0,ae.is)(e,"bpmn:SubProcess")?(0,xe.Av)(e)&&(!t||t.width>=100&&t.height>=80):!!((0,ae.is)(e,"bpmn:Lane")||(0,ae.is)(e,"bpmn:Participant")||ua(e)||da(e))}function Da(e,t){return!(Ea(t,e)||Ea(e,t)||!function(e,t){var n=ua(e),i=ua(t);return(n||i)&&n!==i}(e,t)&&!Ba(e,t))}function Na(e,t){return ga(e,t)&&ha(e)&&(0,ae.is)(t,"bpmn:Activity")&&(n=e,!t.attachers.includes(n))&&!(0,xe.Q1)(t);var n}function $a(e,t){return!(Qa(e)&&!Qa(t))&&(i=e,(0,ae.is)(i,"bpmn:InteractionNode")&&!(0,ae.is)(i,"bpmn:BoundaryEvent")&&(!(0,ae.is)(i,"bpmn:Event")||(0,ae.is)(i,"bpmn:ThrowEvent")&&ba(i,"bpmn:MessageEventDefinition"))&&function(e){return(0,ae.is)(e,"bpmn:InteractionNode")&&!fa(e)&&(!(0,ae.is)(e,"bpmn:Event")||(0,ae.is)(e,"bpmn:CatchEvent")&&ba(e,"bpmn:MessageEventDefinition"))&&!((0,ae.is)(e,"bpmn:BoundaryEvent")&&!ya(e,"bpmn:MessageEventDefinition"))}(t)&&(n=t,!(ma(e)===ma(n))));var n,i}function Ma(e,t){return n=e,(0,ae.is)(n,"bpmn:FlowNode")&&!(0,ae.is)(n,"bpmn:EndEvent")&&!(0,xe.Q1)(n)&&!((0,ae.is)(n,"bpmn:IntermediateThrowEvent")&&ya(n,"bpmn:LinkEventDefinition"))&&!ha(n)&&!fa(n)&&function(e){return(0,ae.is)(e,"bpmn:FlowNode")&&!(0,ae.is)(e,"bpmn:StartEvent")&&!(0,ae.is)(e,"bpmn:BoundaryEvent")&&!(0,xe.Q1)(e)&&!((0,ae.is)(e,"bpmn:IntermediateCatchEvent")&&ya(e,"bpmn:LinkEventDefinition"))&&!fa(e)}(t)&&ga(e,t)&&!((0,ae.is)(e,"bpmn:EventBasedGateway")&&!function(e){return(0,ae.is)(e,"bpmn:ReceiveTask")||(0,ae.is)(e,"bpmn:IntermediateCatchEvent")&&(ya(e,"bpmn:MessageEventDefinition")||ya(e,"bpmn:TimerEventDefinition")||ya(e,"bpmn:ConditionalEventDefinition")||ya(e,"bpmn:SignalEventDefinition"))}(t));var n}function Ba(e,t){return(0,ae.f7)(e,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&(0,ae.f7)(t,["bpmn:Activity","bpmn:ThrowEvent"])?{type:"bpmn:DataInputAssociation"}:!(!(0,ae.f7)(t,["bpmn:DataObjectReference","bpmn:DataStoreReference"])||!(0,ae.f7)(e,["bpmn:Activity","bpmn:CatchEvent"]))&&{type:"bpmn:DataOutputAssociation"}}function ja(e,t,n){if(!t)return!1;if(Array.isArray(e)){if(1!==e.length)return!1;e=e[0]}return t.source!==e&&t.target!==e&&(0,ae.f7)(t,["bpmn:SequenceFlow","bpmn:MessageFlow"])&&!(0,_e.J2)(t)&&(0,ae.is)(e,"bpmn:FlowNode")&&!(0,ae.is)(e,"bpmn:BoundaryEvent")&&wa(e,t.parent)}function Fa(e,t){return!!(0,_e.J2)(t)||!((0,ae.is)(t,"bpmn:Lane")&&!function(e,t){return e&&t&&-1!==e.indexOf(t)}(e,t.parent))}function Qa(e){return Rt(e,"bpmn:Process")||Rt(e,"bpmn:Collaboration")}(0,i.A)(pa,At.A),pa.$inject=["eventBus"],pa.prototype.init=function(){this.addRule("connection.start",(function(e){return la(t=e.source)?null:(0,ae.f7)(t,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference","bpmn:Group","bpmn:TextAnnotation"]);var t})),this.addRule("connection.create",(function(e){var t=e.source,n=e.target,i=e.hints||{},a=i.targetParent;if(i.targetAttach)return!1;a&&(n.parent=a);try{return xa(t,n)}finally{a&&(n.parent=null)}})),this.addRule("connection.reconnect",(function(e){var t=e.connection;return xa(e.source,e.target,t)})),this.addRule("connection.updateWaypoints",(function(e){return{type:e.connection.type}})),this.addRule("shape.resize",(function(e){return Ra(e.shape,e.newBounds)})),this.addRule("elements.create",(function(e){var t=e.elements,n=e.position,i=e.target;return!((0,_e.fX)(i)&&!ja(t,i))&&(0,r.Si)(t,(function(e){return(0,_e.fX)(e)?xa(e.source,e.target,e):e.host?ka(e,e.host,0,n):Ta(e,i,null)}))})),this.addRule("elements.move",(function(e){var t=e.target,n=e.shapes,i=e.position;return ka(n,t,0,i)||Ca(n,t,i)||Pa(n,t)||ja(n,t)})),this.addRule("shape.create",(function(e){return Ta(e.shape,e.target,e.source,e.position)})),this.addRule("shape.attach",(function(e){return ka(e.shape,e.target,0,e.position)})),this.addRule("element.copy",(function(e){var t=e.element;return Fa(e.elements,t)}))},pa.prototype.canConnectMessageFlow=$a,pa.prototype.canConnectSequenceFlow=Ma,pa.prototype.canConnectDataAssociation=Ba,pa.prototype.canConnectAssociation=Da,pa.prototype.canConnectCompensationAssociation=Na,pa.prototype.canMove=Pa,pa.prototype.canAttach=ka,pa.prototype.canReplace=Ca,pa.prototype.canDrop=wa,pa.prototype.canInsert=ja,pa.prototype.canCreate=Ta,pa.prototype.canConnect=xa,pa.prototype.canResize=Ra,pa.prototype.canCopy=Fa;const Ia={__depends__:[sa.A],__init__:["bpmnRules"],bpmnRules:["type",pa]};function La(e,t){e.on("saveXML.start",2e3,(function(){var e=t.getRootElements();(0,r.jJ)(e,(function(e){var t,n,i=(0,ae.S2)(e);t=(0,kt.cZ)([e],!1),t=(0,r.pb)(t,(function(t){return t!==e&&!t.labelTarget})),n=(0,r.Tj)(t,ae.S2),i.set("planeElement",n)}))}))}La.$inject=["eventBus","canvas"];const za={__init__:["bpmnDiOrdering"],bpmnDiOrdering:["type",La]};function Xa(e){et.A.call(this,e);var t=this;this.preExecute(["shape.create","connection.create"],(function(e){var n=e.context,i=n.shape||n.connection,a=n.parent,r=t.getOrdering(i,a);r&&(void 0!==r.parent&&(n.parent=r.parent),n.parentIndex=r.index)})),this.preExecute(["shape.move","connection.move"],(function(e){var n=e.context,i=n.shape||n.connection,a=n.newParent||i.parent,r=t.getOrdering(i,a);r&&(void 0!==r.parent&&(n.newParent=r.parent),n.newParentIndex=r.index)}))}function Va(e,t){Xa.call(this,e);var n=[{type:"bpmn:SubProcess",order:{level:6}},{type:"bpmn:SequenceFlow",order:{level:9,containers:["bpmn:Participant","bpmn:FlowElementsContainer"]}},{type:"bpmn:DataAssociation",order:{level:9,containers:["bpmn:Collaboration","bpmn:FlowElementsContainer"]}},{type:"bpmn:TextAnnotation",order:{level:9}},{type:"bpmn:MessageFlow",order:{level:9,containers:["bpmn:Collaboration"]}},{type:"bpmn:Association",order:{level:6,containers:["bpmn:Participant","bpmn:FlowElementsContainer","bpmn:Collaboration"]}},{type:"bpmn:BoundaryEvent",order:{level:8}},{type:"bpmn:Group",order:{level:10,containers:["bpmn:Collaboration","bpmn:FlowElementsContainer"]}},{type:"bpmn:FlowElement",order:{level:5}},{type:"bpmn:Participant",order:{level:-2}},{type:"bpmn:Lane",order:{level:-1}}];function i(e){var t=e.order;if(t||(e.order=t=function(e){if(e.labelTarget)return{level:10};var t=(0,r.I6)(n,(function(t){return(0,ae.f7)(e,[t.type])}));return t&&t.order||{level:1}}(e)),!t)throw new Error(`no order for <${e.id}>`);return t}this.getOrdering=function(e,n){if(e.labelTarget||(0,ae.is)(e,"bpmn:TextAnnotation"))return{parent:t.findRoot(n)||t.getRootElement(),index:-1};var a=i(e);a.containers&&(n=function(e,t,n){for(var i=t;i&&!(0,ae.f7)(i,n);)i=i.parent;if(!i)throw new Error(`no parent for <${e.id}> in <${t&&t.id}>`);return i}(e,n,a.containers));var o=n.children.indexOf(e),s=(0,r.SL)(n.children,(function(t){return!(!e.labelTarget&&t.labelTarget)&&a.level<i(t).level}));return-1!==s&&-1!==o&&o<s&&(s-=1),{index:s,parent:n}}}Xa.prototype.getOrdering=function(e,t){return null},(0,i.A)(Xa,et.A),Va.$inject=["eventBus","canvas"],(0,i.A)(Va,Xa);const Ya={__init__:["bpmnOrderingProvider"],bpmnOrderingProvider:["type",Va]};var Ga=n(48909),Wa=n(84322),qa=n(74071);function Ha(e,t,n,i,a,r,o,s){this._canvas=e,this._create=t,this._elementFactory=i,this._eventBus=a,this._modeling=r,this._mouse=o,this._rules=s,a.on("copyPaste.copyElement",(function(e){var t=e.descriptor,n=e.element,i=e.elements;t.priority=1,t.id=n.id,(0,Ft.I6)(i,(function(e){return e===n.parent}))&&(t.parent=n.parent.id),function(e){return!!e.host}(n)&&(t.priority=2,t.host=n.host.id),(0,_e.fX)(n)&&(t.priority=3,t.source=n.source.id,t.target=n.target.id,t.waypoints=function(e){return(0,Ft.Tj)(e.waypoints,(function(e){return(e=Ja(e)).original&&(e.original=Ja(e.original)),e}))}(n)),(0,_e.J2)(n)&&(t.priority=4,t.labelTarget=n.labelTarget.id),(0,Ft.jJ)(["x","y","width","height"],(function(e){(0,Ft.Et)(n[e])&&(t[e]=n[e])})),t.hidden=n.hidden,t.collapsed=n.collapsed})),a.on("copyPaste.elementsCopied",2e3,(function(e){!1!==e.hints?.clip&&n.set(e.tree)})),a.on("copyPaste.pasteElements",2e3,(function(e){e.tree||(e.tree=n.get())})),a.on("copyPaste.pasteElements",(function(e){var t=e.hints;(0,Ft.kp)(t,{createElementsBehavior:!1})}))}function Ja(e){return(0,Ft.kp)({},e)}function Ua(e,t){var n=t.indexOf(e);return-1===n?t:t.splice(n,1)}Ha.$inject=["canvas","create","clipboard","elementFactory","eventBus","modeling","mouse","rules"],Ha.prototype.copy=function(e,t={}){var n,i;return(0,Ft.cy)(e)||(e=e?[e]:[]),i=!1===(n=this._eventBus.fire("copyPaste.canCopyElements",{elements:e}))?{}:this.createTree((0,Ft.cy)(n)?n:e),this._eventBus.fire("copyPaste.elementsCopied",{elements:e,tree:i,hints:t}),i},Ha.prototype.paste=function(e={}){var t=this._eventBus.createEvent({type:"copyPaste.pasteElements",hints:{},...e});if(!1!==this._eventBus.fire(t)){var n=t.tree;if(n){var i=t.hints,a=this._createElements(n);if(t.element&&t.point)return this._paste(a,t.element,t.point,i);this._create.start(this._mouse.getLastMoveEvent(),a,{hints:i})}}},Ha.prototype.duplicate=function(e,t={}){var n=this.copy(e,{clip:!1});return this.paste({...t,tree:n})},Ha.prototype._paste=function(e,t,n,i){(0,Ft.jJ)(e,(function(e){(0,Ft.Et)(e.x)||(e.x=0),(0,Ft.Et)(e.y)||(e.y=0)}));var a=(0,kt.U7)(e);return(0,Ft.jJ)(e,(function(e){(0,_e.fX)(e)&&(e.waypoints=(0,Ft.Tj)(e.waypoints,(function(e){return{x:e.x-a.x-a.width/2,y:e.y-a.y-a.height/2}}))),(0,Ft.kp)(e,{x:e.x-a.x-a.width/2,y:e.y-a.y-a.height/2})})),this._modeling.createElements(e,n,t,(0,Ft.kp)({},i))},Ha.prototype._createElements=function(e){var t=this,n=this._eventBus,i={},a=[];return(0,Ft.jJ)(e,(function(e,r){r=parseInt(r,10),e=(0,Ft.Ul)(e,"priority"),(0,Ft.jJ)(e,(function(e){var r,o=(0,Ft.kp)({},(0,Ft.cJ)(e,["priority"]));return i[e.parent]?o.parent=i[e.parent]:delete o.parent,n.fire("copyPaste.pasteElement",{cache:i,descriptor:o}),(0,_e.fX)(o)?(o.source=i[e.source],o.target=i[e.target],r=i[e.id]=t.createConnection(o),void a.push(r)):(0,_e.J2)(o)?(o.labelTarget=i[o.labelTarget],r=i[e.id]=t.createLabel(o),void a.push(r)):(o.host&&(o.host=i[o.host]),r=i[e.id]=t.createShape(o),void a.push(r))}))})),a},Ha.prototype.createConnection=function(e){return this._elementFactory.createConnection((0,Ft.cJ)(e,["id"]))},Ha.prototype.createLabel=function(e){return this._elementFactory.createLabel((0,Ft.cJ)(e,["id"]))},Ha.prototype.createShape=function(e){return this._elementFactory.createShape((0,Ft.cJ)(e,["id"]))},Ha.prototype.hasRelations=function(e,t){var n,i;return!((0,_e.fX)(e)&&(n=(0,Ft.I6)(t,(0,Ft.gH)({id:e.source.id})),i=(0,Ft.I6)(t,(0,Ft.gH)({id:e.target.id})),!n||!i)||(0,_e.J2)(e)&&!(0,Ft.I6)(t,(0,Ft.gH)({id:e.labelTarget.id})))},Ha.prototype.createTree=function(e){var t=this._rules,n=this,i={},a=[],r=(0,kt.wT)(e);function o(e,t){var n=(0,Ft.I6)(a,(function(t){return e===t.element}));n?n.depth<t&&(a=function(e,t){var n=t.indexOf(e);return-1!==n&&t.splice(n,1),t}(n,a),a.push({element:n.element,depth:t})):a.push({element:e,depth:t})}return(0,kt.qO)(r,(function(e,t,i){if(!(0,_e.J2)(e)){(0,Ft.jJ)(e.labels,(function(e){o(e,i)})),(0,Ft.jJ)([e.attachers,e.incoming,e.outgoing],(function(e){e&&e.length&&(0,Ft.jJ)(e,(function(e){(0,Ft.jJ)(e.labels,(function(e){o(e,i)})),o(e,i)}))})),o(e,i);var a=[];return e.children&&(a=e.children.slice()),n._eventBus.fire("copyPaste.createTree",{element:e,children:a}),a}})),e=(0,Ft.Tj)(a,(function(e){return e.element})),a=(0,Ft.Tj)(a,(function(t){return t.descriptor={},n._eventBus.fire("copyPaste.copyElement",{descriptor:t.descriptor,element:t.element,elements:e}),t})),a=(0,Ft.Ul)(a,(function(e){return e.descriptor.priority})),e=(0,Ft.Tj)(a,(function(e){return e.element})),(0,Ft.jJ)(a,(function(a){var r=a.depth;n.hasRelations(a.element,e)&&function(e,n){return t.allowed("element.copy",{element:e,elements:n})}(a.element,e)?(i[r]||(i[r]=[]),i[r].push(a.descriptor)):Ua(a.element,e)})),i};const Za={__depends__:[Ga.A,Wa.A,qa.A,sa.A],__init__:["copyPaste"],copyPaste:["type",Ha]};function Ka(e,t,n){(0,r.cy)(n)||(n=[n]),(0,r.jJ)(n,(function(n){(0,r.b0)(e[n])||(t[n]=e[n])}))}function er(e,t,n){function i(t,i){var a=e.create(t.$type);return n.copyElement(t,a,null,i)}t.on("copyPaste.copyElement",750,(function(e){var t=e.descriptor,n=e.element,a=(0,ae.Cf)(n);if((0,_e.J2)(n))return t;var r=t.businessObject=i(a,!0),o=t.di=i((0,ae.S2)(n),!0);o.bpmnElement=r,Ka(r,t,"name"),Ka(o,t,"isExpanded"),a.default&&(t.default=a.default.id)}));var a="-bpmn-js-refs";t.on("copyPaste.pasteElement",(function(e){var t=e.cache,n=e.descriptor,a=n.businessObject,r=n.di;if((0,_e.J2)(n))return n.businessObject=(0,ae.Cf)(t[n.labelTarget]),void(n.di=(0,ae.S2)(t[n.labelTarget]));a=n.businessObject=i(a),(r=n.di=i(r)).bpmnElement=a,Ka(n,a,["isExpanded","name"]),n.type=a.$type})),t.on("copyPaste.copyElement",750,(function(e){var t=e.descriptor,n=e.element;if((0,ae.is)(n,"bpmn:Participant")){var a=(0,ae.Cf)(n);a.processRef&&(t.processRef=i(a.processRef,!0))}})),t.on("copyPaste.pasteElement",(function(e){var t=e.descriptor,n=t.processRef;n&&(t.processRef=i(n))})),t.on("copyPaste.pasteElement",750,(function(e){var t=e.cache;!function(e,t){e[a]=t}(t,function(e,t,n){var i=(0,ae.Cf)(e);return e.default&&(n[e.default]={element:i,property:"default"}),e.host&&((0,ae.Cf)(e).attachedToRef=(0,ae.Cf)(t[e.host])),(0,r.cJ)(n,(0,r.TS)(n,(function(t,n,a){var r=n.element,o=n.property;return a===e.id&&(r.set(o,i),t.push(e.id)),t}),[]))}(e.descriptor,t,function(e){return e[a]=e[a]||{}}(t)))}))}er.$inject=["bpmnFactory","eventBus","moddleCopy"];const tr=["artifacts","dataInputAssociations","dataOutputAssociations","default","flowElements","lanes","incoming","outgoing","categoryValue"],nr=["errorRef","escalationRef","messageRef","signalRef","dataObjectRef"];function ir(e,t,n){this._bpmnFactory=t,this._eventBus=e,this._moddle=n,e.on("moddleCopy.canCopyProperties",(e=>{const{propertyNames:t}=e;if(t&&t.length)return(0,r.Ul)(t,(e=>"extensionElements"===e))})),e.on("moddleCopy.canCopyProperty",(e=>{const{parent:t,property:n,propertyName:i}=e,a=(0,r.Gv)(t)&&t.$descriptor;return i&&nr.includes(i)?n:(!i||!tr.includes(i))&&!(i&&a&&!(0,r.I6)(a.properties,(0,r.gH)({name:i})))&&void 0})),e.on("moddleCopy.canSetCopiedProperty",(e=>{const{property:t}=e;if((0,ae.is)(t,"bpmn:ExtensionElements")&&(!t.values||!t.values.length))return!1}))}function ar(e,t){return(0,r.TS)(e.properties,((e,n)=>t&&n.default?e:e.concat(n.name)),[])}ir.$inject=["eventBus","bpmnFactory","moddle"],ir.prototype.copyElement=function(e,t,n,i=!1){n&&!(0,r.cy)(n)&&(n=[n]),n=n||ar(e.$descriptor);const a=this._eventBus.fire("moddleCopy.canCopyProperties",{propertyNames:n,sourceElement:e,targetElement:t,clone:i});return!1===a||((0,r.cy)(a)&&(n=a),(0,r.jJ)(n,(n=>{let a;(0,r.zy)(e,n)&&(a=e.get(n));const o=this.copyProperty(a,t,n,i);(0,r.O9)(o)&&!1!==this._eventBus.fire("moddleCopy.canSetCopiedProperty",{parent:t,property:o,propertyName:n})&&t.set(n,o)}))),t},ir.prototype.copyProperty=function(e,t,n,i=!1){let a=this._eventBus.fire("moddleCopy.canCopyProperty",{parent:t,property:e,propertyName:n,clone:i});if(!1===a)return;if(a)return(0,r.Gv)(a)&&a.$type&&!a.$parent&&(a.$parent=t),a;const o=this._moddle.getPropertyDescriptor(t,n);if(!o.isReference){if(o.isId)return e&&this._copyId(e,t,i);if((0,r.cy)(e))return(0,r.TS)(e,((e,a)=>{const r=this.copyProperty(a,t,n,i);return r?e.concat(r):e}),[]);if((0,r.Gv)(e)&&e.$type){if(this._moddle.getElementDescriptor(e).isGeneric)return;return a=this._bpmnFactory.create(e.$type),a.$parent=t,a=this.copyElement(e,a,null,i),a}return e}},ir.prototype._copyId=function(e,t,n=!1){return n?e:this._moddle.ids.assigned(e)?void 0:(this._moddle.ids.claim(e,t),e)};const rr={__depends__:[Za],__init__:["bpmnCopyPaste","moddleCopy"],bpmnCopyPaste:["type",er],moddleCopy:["type",ir]};var or=n(78303),sr=["cancelActivity","instantiate","eventGatewayType","triggeredByEvent","isInterrupting"];function cr(e,t,n,i,a,o){this.replaceElement=function(s,c,p){p=p||{};var l=c.type,m=s.businessObject;if(pr(m)&&("bpmn:SubProcess"===l||"bpmn:AdHocSubProcess"===l)&&function(e,t){var n=e&&(0,r.zy)(e,"collapsed")?e.collapsed:!(0,xe.Av)(e);return n!==(t&&((0,r.zy)(t,"collapsed")||(0,r.zy)(t,"isExpanded"))?(0,r.zy)(t,"collapsed")?t.collapsed:!t.isExpanded:n)}(s,c))return i.toggleCollapse(s),s;var u=e.create(l),d={type:l,businessObject:u,di:{}};"bpmn:ExclusiveGateway"===l&&(d.di.isMarkerVisible=!0),function(e,t,n){(0,r.cy)(n)||(n=[n]),(0,r.jJ)(n,(function(n){(0,r.b0)(e[n])||(t[n]=e[n])}))}(s.di,d.di,["fill","stroke","background-color","border-color","color"]);var h,f=ar(m.$descriptor),v=ar(u.$descriptor,!0),g=(h=v,f.filter((function(e){return h.includes(e)})));(0,r.kp)(u,(0,r.Up)(c,sr));var y=(0,r.pb)(g,(function(e){return"eventDefinitions"===e?lr(s,c.eventDefinitionType):"loopCharacteristics"===e?!(0,xe.Q1)(u):!((0,r.zy)(u,e)||"processRef"===e&&!1===c.isExpanded||"triggeredByEvent"===e||"isForCompensation"===e&&(0,xe.Q1)(u))}));if(u=n.copyElement(m,u,y),c.eventDefinitionType&&(lr(u,c.eventDefinitionType)||(d.eventDefinitionType=c.eventDefinitionType,d.eventDefinitionAttrs=c.eventDefinitionAttrs)),(0,ae.is)(m,"bpmn:Activity")){if(pr(m))d.isExpanded=(0,xe.Av)(s);else if(c&&(0,r.zy)(c,"isExpanded")){d.isExpanded=c.isExpanded;var b=t.getDefaultSize(u,{isExpanded:d.isExpanded});d.width=b.width,d.height=b.height,d.x=s.x-(d.width-s.width)/2,d.y=s.y-(d.height-s.height)/2}(0,xe.Av)(s)&&!(0,ae.is)(m,"bpmn:Task")&&d.isExpanded&&(d.width=s.width,d.height=s.height)}if(pr(m)&&!pr(u)&&(p.moveChildren=!1),(0,ae.is)(m,"bpmn:Participant")){!0===c.isExpanded?u.processRef=e.create("bpmn:Process"):p.moveChildren=!1;var E=(0,xe.$b)(s);(0,ae.S2)(s).isHorizontal||((0,ae.S2)(d).isHorizontal=E),d.width=E?s.width:t.getDefaultSize(d).width,d.height=E?t.getDefaultSize(d).height:s.height}return o.allowed("shape.resize",{shape:u})||(d.height=t.getDefaultSize(d).height,d.width=t.getDefaultSize(d).width),u.name=m.name,(0,ae.f7)(m,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&(0,ae.f7)(u,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&(u.default=m.default),c.host&&!(0,ae.is)(m,"bpmn:BoundaryEvent")&&(0,ae.is)(u,"bpmn:BoundaryEvent")&&(d.host=c.host),"bpmn:DataStoreReference"!==d.type&&"bpmn:DataObjectReference"!==d.type||(d.x=s.x+(s.width-d.width)/2),a.replaceElement(s,d,{...p,targetElement:c})}}function pr(e){return(0,ae.is)(e,"bpmn:SubProcess")}function lr(e,t){var n=(0,ae.Cf)(e);return t&&n.get("eventDefinitions").some((function(e){return(0,ae.is)(e,t)}))}cr.$inject=["bpmnFactory","elementFactory","moddleCopy","modeling","replace","rules"];const mr={__depends__:[rr,or.A,dt.A],bpmnReplace:["type",cr]};var ur=n(43513),dr=n(44391),hr=n(27224),fr=n(25141),vr=Math.abs,gr=Math.round,yr={x:"width",y:"height"},br="crosshair",Er={n:"top",w:"left",s:"bottom",e:"right"},xr={n:"s",w:"e",s:"n",e:"w"};function wr(e,t,n,i,a,r,o){this._canvas=e,this._dragging=t,this._eventBus=n,this._modeling=i,this._rules=a,this._toolManager=r,this._mouse=o;var s=this;r.registerTool("space",{tool:"spaceTool.selection",dragging:"spaceTool"}),n.on("spaceTool.selection.end",(function(e){n.once("spaceTool.selection.ended",(function(){s.activateMakeSpace(e.originalEvent)}))})),n.on("spaceTool.move",1500,(function(e){var t=e.context,n=t.initialized;n||(n=t.initialized=s.init(e,t)),n&&Or(e)})),n.on("spaceTool.end",(function(e){var t=e.context,i=t.axis,a=t.direction,r=t.movingShapes,o=t.resizingShapes,c=t.start;if(t.initialized){Or(e);var p={x:0,y:0};p[i]=gr(e["d"+i]),s.makeSpace(r,o,p,a,c),n.once("spaceTool.ended",(function(e){s.activateSelection(e.originalEvent,!0,!0)}))}}))}function _r(e){return{top:e.top-20,right:e.right+20,bottom:e.bottom+20,left:e.left-20}}function Or(e){var t,n,i=e.context.spaceToolConstraints;i&&((0,Ft.Et)(i.left)&&(t=Math.max(e.x,i.left),e.dx=e.dx+t-e.x,e.x=t),(0,Ft.Et)(i.right)&&(t=Math.min(e.x,i.right),e.dx=e.dx+t-e.x,e.x=t),(0,Ft.Et)(i.top)&&(n=Math.max(e.y,i.top),e.dy=e.dy+n-e.y,e.y=n),(0,Ft.Et)(i.bottom)&&(n=Math.min(e.y,i.bottom),e.dy=e.dy+n-e.y,e.y=n))}function Sr(e,t){return-1!==e.indexOf(t)}wr.$inject=["canvas","dragging","eventBus","modeling","rules","toolManager","mouse"],wr.prototype.activateSelection=function(e,t,n){this._dragging.init(e,"spaceTool.selection",{autoActivate:t,cursor:br,data:{context:{reactivate:n}},trapClick:!1})},wr.prototype.activateMakeSpace=function(e){this._dragging.init(e,"spaceTool",{autoActivate:!0,cursor:br,data:{context:{}}})},wr.prototype.makeSpace=function(e,t,n,i,a){return this._modeling.createSpace(e,t,n,i,a)},wr.prototype.init=function(e,t){var n=vr(e.dx)>vr(e.dy)?"x":"y",i=e["d"+n],a=e[n]-i;if(vr(i)<5)return!1;i<0&&(i*=-1),(0,Ii.Io)(e)&&(i*=-1);var r=(0,hr.u6)(n,i),o=this._canvas.getRootElement();!(0,Ii.KH)(e)&&e.hover&&(o=e.hover);var s=[...(0,kt.cZ)(o,!0),...o.attachers||[]],c=this.calculateAdjustments(s,n,i,a),p=function(e,t,n,i,a){var r=e.movingShapes,o=e.resizingShapes;if(o.length){var s,c,p={};return(0,Ft.jJ)(o,(function(e){var l,m,u,d,h,f,v=e.attachers,g=e.children,y=(0,Ge.Fy)(e),b=(0,Ft.pb)(g,(function(e){return!((0,_e.fX)(e)||(0,_e.J2)(e)||Sr(r,e)||Sr(o,e))})),E=(0,Ft.pb)(g,(function(e){return!(0,_e.fX)(e)&&!(0,_e.J2)(e)&&Sr(r,e)})),x=[],w=[];b.length&&(m=_r((0,Ge.Fy)((0,kt.U7)(b))),l=i-y[Er[n]]+m[Er[n]],"n"===n?p.bottom=c=(0,Ft.Et)(c)?Math.min(c,l):l:"w"===n?p.right=c=(0,Ft.Et)(c)?Math.min(c,l):l:"s"===n?p.top=s=(0,Ft.Et)(s)?Math.max(s,l):l:"e"===n&&(p.left=s=(0,Ft.Et)(s)?Math.max(s,l):l)),E.length&&(u=_r((0,Ge.Fy)((0,kt.U7)(E))),l=i-u[Er[xr[n]]]+y[Er[xr[n]]],"n"===n?p.bottom=c=(0,Ft.Et)(c)?Math.min(c,l):l:"w"===n?p.right=c=(0,Ft.Et)(c)?Math.min(c,l):l:"s"===n?p.top=s=(0,Ft.Et)(s)?Math.max(s,l):l:"e"===n&&(p.left=s=(0,Ft.Et)(s)?Math.max(s,l):l)),v&&v.length&&(v.forEach((function(e){Sr(r,e)?x.push(e):w.push(e)})),x.length&&(d=(0,Ge.Fy)((0,kt.U7)(x.map(Ge.pp))),h=y[Er[xr[n]]]-(d[Er[xr[n]]]-i)),w.length&&(f=(0,Ge.Fy)((0,kt.U7)(w.map(Ge.pp)))[Er[n]]-(y[Er[n]]-i)),"n"===n?(l=Math.min(h||1/0,f||1/0),p.bottom=c=(0,Ft.Et)(c)?Math.min(c,l):l):"w"===n?(l=Math.min(h||1/0,f||1/0),p.right=c=(0,Ft.Et)(c)?Math.min(c,l):l):"s"===n?(l=Math.max(h||-1/0,f||-1/0),p.top=s=(0,Ft.Et)(s)?Math.max(s,l):l):"e"===n&&(l=Math.max(h||-1/0,f||-1/0),p.left=s=(0,Ft.Et)(s)?Math.max(s,l):l));var _=a&&a[e.id];_&&("n"===n?(l=i+e[yr[t]]-_[yr[t]],p.bottom=c=(0,Ft.Et)(c)?Math.min(c,l):l):"w"===n?(l=i+e[yr[t]]-_[yr[t]],p.right=c=(0,Ft.Et)(c)?Math.min(c,l):l):"s"===n?(l=i-e[yr[t]]+_[yr[t]],p.top=s=(0,Ft.Et)(s)?Math.max(s,l):l):"e"===n&&(l=i-e[yr[t]]+_[yr[t]],p.left=s=(0,Ft.Et)(s)?Math.max(s,l):l))})),p}}(c,n,r,a,this._eventBus.fire("spaceTool.getMinDimensions",{axis:n,direction:r,shapes:c.resizingShapes,start:a}));return(0,Ft.kp)(t,c,{axis:n,direction:r,spaceToolConstraints:p,start:a}),(0,fr.hZ)("resize-"+("x"===n?"ew":"ns")),!0},wr.prototype.calculateAdjustments=function(e,t,n,i){var a=this._rules,r=[],o=[],s=[],c=[];function p(e){r.includes(e)||r.push(e);var t=e.label;t&&!r.includes(t)&&r.push(t)}(0,Ft.jJ)(e,(function(e){if(e.parent&&!(0,_e.J2)(e))if((0,_e.fX)(e))c.push(e);else{var r=e[t],l=r+e[yr[t]];if(function(e){return!!e.host}(e)&&(n>0&&(0,Ge.pp)(e)[t]>i||n<0&&(0,Ge.pp)(e)[t]<i))s.push(e);else{var m;if(!(n>0&&r>i||n<0&&l<i))return r<i&&l>i&&a.allowed("shape.resize",{shape:e})?(m=e,void(o.includes(m)||o.push(m))):void 0;p(e)}}})),(0,Ft.jJ)(r,(function(e){var t=e.attachers;t&&(0,Ft.jJ)(t,(function(e){p(e)}))}));var l=r.concat(o);return(0,Ft.jJ)(s,(function(e){var t=e.host;Sr(l,t)&&p(e)})),l=r.concat(o),(0,Ft.jJ)(c,(function(e){var t=e.source,n=e.target,i=e.label;Sr(l,t)&&Sr(l,n)&&i&&p(i)})),{movingShapes:r,resizingShapes:o}},wr.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateSelection(e,!!e)},wr.prototype.isActive=function(){var e=this._dragging.context();return!!e&&/^spaceTool/.test(e.prefix)};var Ar="djs-dragging",kr="djs-resizing",Cr=Math.max;function Pr(e,t,n,i,a){function r(e,t){(0,Ft.jJ)(e,(function(e){a.addDragger(e,t),n.addMarker(e,Ar)}))}e.on("spaceTool.selection.start",(function(e){var t=n.getLayer("space"),a=e.context,r=(0,Ht.vt)("g");(0,Ht.CF)(r,i.cls("djs-crosshair-group",["no-events"])),(0,Ht.BC)(t,r);var o=(0,Ht.vt)("path");(0,Ht.CF)(o,"d","M 0,-10000 L 0,10000"),(0,Ht.Ly)(o).add("djs-crosshair"),(0,Ht.BC)(r,o);var s=(0,Ht.vt)("path");(0,Ht.CF)(s,"d","M -10000,0 L 10000,0"),(0,Ht.Ly)(s).add("djs-crosshair"),(0,Ht.BC)(r,s),a.crosshairGroup=r})),e.on("spaceTool.selection.move",(function(e){var t=e.context.crosshairGroup;(0,Me.Tl)(t,e.x,e.y)})),e.on("spaceTool.selection.cleanup",(function(e){var t=e.context.crosshairGroup;t&&(0,Ht.TF)(t)})),e.on("spaceTool.move",250,(function(e){var o=e.context,s=o.line,c=o.axis,p=o.movingShapes,l=o.resizingShapes;if(o.initialized){if(!o.dragGroup){var m=n.getLayer("space");s=(0,Ht.vt)("path"),(0,Ht.CF)(s,"d","M0,0 L0,0"),(0,Ht.Ly)(s).add("djs-crosshair"),(0,Ht.BC)(m,s),o.line=s;var u=(0,Ht.vt)("g");(0,Ht.CF)(u,i.cls("djs-drag-group",["no-events"])),(0,Ht.BC)(n.getActiveLayer(),u),r(p,u),r(o.movingConnections=t.filter((function(e){var t=!1;(0,Ft.jJ)(p,(function(n){(0,Ft.jJ)(n.outgoing,(function(n){e===n&&(t=!0)}))}));var n=!1;(0,Ft.jJ)(p,(function(t){(0,Ft.jJ)(t.incoming,(function(t){e===t&&(n=!0)}))}));var i=!1;(0,Ft.jJ)(l,(function(t){(0,Ft.jJ)(t.outgoing,(function(t){e===t&&(i=!0)}))}));var a=!1;return(0,Ft.jJ)(l,(function(t){(0,Ft.jJ)(t.incoming,(function(t){e===t&&(a=!0)}))})),(0,_e.fX)(e)&&(t||i)&&(n||a)})),u),o.dragGroup=u}if(!o.frameGroup){var d=(0,Ht.vt)("g");(0,Ht.CF)(d,i.cls("djs-frame-group",["no-events"])),(0,Ht.BC)(n.getActiveLayer(),d);var h=[];(0,Ft.jJ)(l,(function(e){var t=a.addFrame(e,d),i=t.getBBox();h.push({element:t,initialBounds:i}),n.addMarker(e,kr)})),o.frameGroup=d,o.frames=h}var f={x:"M"+e.x+", -10000 L"+e.x+", 10000",y:"M -10000, "+e.y+" L 10000, "+e.y};(0,Ht.CF)(s,{d:f[c]});var v={x:e.dx,y:e.dy};v[{x:"y",y:"x"}[o.axis]]=0,(0,Me.Tl)(o.dragGroup,v.x,v.y),(0,Ft.jJ)(o.frames,(function(e){var t,n,i=e.element,a=e.initialBounds;"e"===o.direction?(0,Ht.CF)(i,{width:Cr(a.width+v.x,5)}):(t=Cr(a.width-v.x,5),(0,Ht.CF)(i,{width:t,x:a.x+a.width-t})),"s"===o.direction?(0,Ht.CF)(i,{height:Cr(a.height+v.y,5)}):(n=Cr(a.height-v.y,5),(0,Ht.CF)(i,{height:n,y:a.y+a.height-n}))}))}})),e.on("spaceTool.cleanup",(function(e){var t=e.context,i=t.movingShapes,a=t.movingConnections,r=t.resizingShapes,o=t.line,s=t.dragGroup,c=t.frameGroup;(0,Ft.jJ)(i,(function(e){n.removeMarker(e,Ar)})),(0,Ft.jJ)(a,(function(e){n.removeMarker(e,Ar)})),s&&((0,Ht.TF)(o),(0,Ht.TF)(s)),(0,Ft.jJ)(r,(function(e){n.removeMarker(e,kr)})),c&&(0,Ht.TF)(c)}))}Pr.$inject=["eventBus","elementRegistry","canvas","styles","previewSupport"];const Tr={__init__:["spaceToolPreview"],__depends__:[ur.A,sa.A,dr.A,qt.A,qa.A],spaceTool:["type",wr],spaceToolPreview:["type",Pr]};function Rr(e,t){e.invoke(wr,this),this._canvas=t}Rr.$inject=["injector","canvas"],(0,i.A)(Rr,wr),Rr.prototype.calculateAdjustments=function(e,t,n,i){var a=this._canvas.getRootElement(),o=e[0]===a?null:e[0],s=[];o&&(s=(0,r.zu)((0,kt.rx)(a.children.filter((e=>(0,ae.is)(e,"bpmn:Artifact"))),(0,kt.U7)(o))));const c=[...e,...s];var p=wr.prototype.calculateAdjustments.call(this,c,t,n,i);return p.resizingShapes=p.resizingShapes.filter((function(e){return!((0,ae.is)(e,"bpmn:TextAnnotation")||function(e){return(0,ae.is)(e,"bpmn:Participant")&&!(0,ae.Cf)(e).processRef}(e)&&("y"===t&&(0,xe.$b)(e)||"x"===t&&!(0,xe.$b)(e)))})),p};const Dr={__depends__:[Tr],spaceTool:["type",Rr]};var Nr=n(19112),$r=n(55063);function Mr(e,t,n){et.A.call(this,t);var i=e.get("movePreview",!1);t.on("shape.move.start",1400,(function(e){var t=e.context,n=t.shapes,i=t.validatedShapes;t.shapes=Br(n),t.validatedShapes=Br(i)})),i&&t.on("shape.move.start",250,(function(e){var t=e.context,n=t.shapes,a=[];(0,Ft.jJ)(n,(function(e){(0,Ft.jJ)(e.labels,(function(n){n.hidden||-1!==t.shapes.indexOf(n)||a.push(n),e.labelTarget&&a.push(e)}))})),(0,Ft.jJ)(a,(function(e){i.makeDraggable(t,e,!0)}))})),this.preExecuted("elements.move",1400,(function(e){var t=e.context.closure,n=t.enclosedElements,i=[];(0,Ft.jJ)(n,(function(e){(0,Ft.jJ)(e.labels,(function(e){n[e.id]||i.push(e)}))})),t.addAll(i)})),this.preExecute(["connection.delete","shape.delete"],(function(e){var t=e.context,i=t.connection||t.shape;(0,$r.l)(i.labels,(function(e){n.removeShape(e,{nested:!0})}))})),this.execute("shape.delete",(function(e){var t=e.context,n=t.shape,i=n.labelTarget;i&&(t.labelTargetIndex=(0,yn.qh)(i.labels,n),t.labelTarget=i,n.labelTarget=null)})),this.revert("shape.delete",(function(e){var t=e.context,n=t.shape,i=t.labelTarget,a=t.labelTargetIndex;i&&((0,yn.WQ)(i.labels,n,a),n.labelTarget=i)}))}function Br(e){return(0,Ft.pb)(e,(function(t){return-1===e.indexOf(t.labelTarget)}))}(0,i.A)(Mr,et.A),Mr.$inject=["injector","eventBus","modeling"];const jr={__init__:["labelSupport"],labelSupport:["type",Mr]};var Fr="attach-ok";function Qr(e,t,n,i,a){et.A.call(this,t);var r=e.get("movePreview",!1);t.on("shape.move.start",1401,(function(e){var t,n,i=e.context,a=i.shapes,r=i.validatedShapes;i.shapes=(n=Ir(t=a),(0,Ft.RK)("id",t,n)),i.validatedShapes=function(e){var t=(0,Ft.$z)(e,"id");return(0,Ft.pb)(e,(function(e){for(;e;){if(e.host&&t[e.host.id])return!1;e=e.parent}return!0}))}(r)})),r&&t.on("shape.move.start",251,(function(e){var t=e.context,n=Ir(t.shapes);(0,Ft.jJ)(n,(function(e){r.makeDraggable(t,e,!0),(0,Ft.jJ)(e.labels,(function(e){r.makeDraggable(t,e,!0)}))}))})),r&&t.on("shape.move.start",(function(e){var i=e.context.shapes;if(1===i.length){var a=i[0].host;a&&(n.addMarker(a,Fr),t.once(["shape.move.out","shape.move.cleanup"],(function(){n.removeMarker(a,Fr)})))}})),this.preExecuted("elements.move",1401,(function(e){var t=e.context,n=t.closure,i=Ir(t.shapes);(0,Ft.jJ)(i,(function(e){n.add(e,n.topLevel[e.host.id])}))})),this.postExecuted("elements.move",(function(e){var t,n=e.context,i=n.shapes,r=n.newHost;r&&1!==i.length||(t=r?i:(0,Ft.pb)(i,(function(e){var t,n=e.host;return function(e){return!!e.host}(e)&&(t=n,!(-1!==i.indexOf(t)))})),(0,Ft.jJ)(t,(function(e){a.updateAttachment(e,r)})))})),this.postExecuted("elements.move",(function(e){var t=e.context.shapes;(0,Ft.jJ)(t,(function(e){(0,Ft.jJ)(e.attachers,(function(e){(0,Ft.jJ)(e.outgoing.slice(),(function(e){i.allowed("connection.reconnect",{connection:e,source:e.source,target:e.target})||a.removeConnection(e)})),(0,Ft.jJ)(e.incoming.slice(),(function(e){i.allowed("connection.reconnect",{connection:e,source:e.source,target:e.target})||a.removeConnection(e)}))}))}))})),this.postExecute("shape.create",(function(e){var t=e.context,n=t.shape,i=t.host;i&&a.updateAttachment(n,i)})),this.postExecute("shape.replace",(function(e){var t=e.context,n=t.oldShape,r=t.newShape;(0,$r.l)(n.attachers,(function(e){"attach"===i.allowed("elements.move",{target:r,shapes:[e]})?a.updateAttachment(e,r):a.removeShape(e)})),r.attachers.length&&(0,Ft.jJ)(r.attachers,(function(e){var t=(0,si.D)(e,n,r);a.moveShape(e,t,e.parent)}))})),this.postExecute("shape.resize",(function(e){var t=e.context,n=t.shape,i=t.oldBounds,r=t.newBounds,o=n.attachers;!1!==(t.hints||{}).attachSupport&&(0,Ft.jJ)(o,(function(e){var t=(0,si.D)(e,i,r);a.moveShape(e,t,e.parent),(0,Ft.jJ)(e.labels,(function(e){a.moveShape(e,t,e.parent)}))}))})),this.preExecute("shape.delete",(function(e){var t=e.context.shape;(0,$r.l)(t.attachers,(function(e){a.removeShape(e)})),t.host&&a.updateAttachment(t,null)}))}function Ir(e){return(0,Ft.Bq)((0,Ft.Tj)(e,(function(e){return e.attachers||[]})))}(0,i.A)(Qr,et.A),Qr.$inject=["injector","eventBus","canvas","rules","modeling"];const Lr={__depends__:[sa.A],__init__:["attachSupport"],attachSupport:["type",Qr]};function zr(e){this._model=e}function Xr(e,t,n){et.A.call(this,e),this._bpmnFactory=t;var i=this;function a(e){var t=e.context.oldRoot.children;(0,r.jJ)(t,(function(e){(0,ae.is)(e,"bpmn:BaseElement")&&i.updateParent(e)}))}function o(e){var t=e.context.shape;(0,ae.is)(t,"bpmn:BaseElement")&&i.updateBounds(t)}function s(e){i.updateConnection(e.context)}function c(e){i.updateConnectionWaypoints(e.context.connection)}function p(e){i.updateAttachment(e.context)}function l(e){const{element:n}=e.context,i=(0,we.p9)(n),a=(0,ae.S2)(n),r=a&&a.get("label");(0,we.UC)(n)||(0,at.hC)(n)||(i&&!r?a.set("label",t.create("bpmndi:BPMNLabel")):!i&&r&&a.set("label",void 0))}this.executed(["connection.layout","connection.create"],(function(e){var t,i=e.context,a=i.hints||{};i.cropped||!1===a.createElementsBehavior||((t=i.connection).waypoints=n.getCroppedWaypoints(t),i.cropped=!0)})),this.reverted(["connection.layout"],(function(e){delete e.context.cropped})),this.executed(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],Vr((function(e){var t=e.context;i.updateParent(t.shape||t.connection,t.oldParent)}))),this.reverted(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],Vr((function(e){var t=e.context,n=t.shape||t.connection,a=t.parent||t.newParent;i.updateParent(n,a)}))),this.executed(["canvas.updateRoot"],a),this.reverted(["canvas.updateRoot"],a),this.executed(["shape.move","shape.create","shape.resize"],Vr((function(e){"label"!==e.context.shape.type&&o(e)}))),this.reverted(["shape.move","shape.create","shape.resize"],Vr((function(e){"label"!==e.context.shape.type&&o(e)}))),e.on("shape.changed",(function(e){"label"===e.element.type&&o({context:{shape:e.element}})})),this.executed(["connection.create","connection.move","connection.delete","connection.reconnect"],Vr(s)),this.reverted(["connection.create","connection.move","connection.delete","connection.reconnect"],Vr(s)),this.executed(["connection.layout","connection.move","connection.updateWaypoints"],Vr(c)),this.reverted(["connection.layout","connection.move","connection.updateWaypoints"],Vr(c)),this.executed("connection.reconnect",Vr((function(e){var t=e.context,n=t.connection,i=t.oldSource,a=t.newSource,r=(0,ae.Cf)(n),o=(0,ae.Cf)(i),s=(0,ae.Cf)(a);r.conditionExpression&&!(0,ae.f7)(s,["bpmn:Activity","bpmn:ExclusiveGateway","bpmn:InclusiveGateway"])&&(t.oldConditionExpression=r.conditionExpression,delete r.conditionExpression),i!==a&&o.default===r&&(t.oldDefault=o.default,delete o.default)}))),this.reverted("connection.reconnect",Vr((function(e){var t=e.context,n=t.connection,i=t.oldSource,a=t.newSource,r=(0,ae.Cf)(n),o=(0,ae.Cf)(i),s=(0,ae.Cf)(a);t.oldConditionExpression&&(r.conditionExpression=t.oldConditionExpression),t.oldDefault&&(o.default=t.oldDefault,delete s.default)}))),this.executed(["element.updateAttachment"],Vr(p)),this.reverted(["element.updateAttachment"],Vr(p)),this.executed("element.updateLabel",Vr(l)),this.reverted("element.updateLabel",Vr(l))}function Vr(e){return function(t){var n=t.context,i=n.shape||n.connection||n.element;(0,ae.is)(i,"bpmn:BaseElement")&&e(t)}}zr.$inject=["moddle"],zr.prototype._needsId=function(e){return(0,ae.f7)(e,["bpmn:RootElement","bpmn:FlowElement","bpmn:MessageFlow","bpmn:DataAssociation","bpmn:Artifact","bpmn:Participant","bpmn:Lane","bpmn:LaneSet","bpmn:Process","bpmn:Collaboration","bpmndi:BPMNShape","bpmndi:BPMNEdge","bpmndi:BPMNDiagram","bpmndi:BPMNPlane","bpmn:Property","bpmn:CategoryValue"])},zr.prototype._ensureId=function(e){var t;e.id?this._model.ids.claim(e.id,e):(t=(0,ae.is)(e,"bpmn:Activity")?"Activity":(0,ae.is)(e,"bpmn:Event")?"Event":(0,ae.is)(e,"bpmn:Gateway")?"Gateway":(0,ae.f7)(e,["bpmn:SequenceFlow","bpmn:MessageFlow"])?"Flow":(e.$type||"").replace(/^[^:]*:/g,""),t+="_",!e.id&&this._needsId(e)&&(e.id=this._model.ids.nextPrefixed(t,e)))},zr.prototype.create=function(e,t){var n=this._model.create(e,t||{});return this._ensureId(n),n},zr.prototype.createDiLabel=function(){return this.create("bpmndi:BPMNLabel",{bounds:this.createDiBounds()})},zr.prototype.createDiShape=function(e,t){return this.create("bpmndi:BPMNShape",(0,r.kp)({bpmnElement:e,bounds:this.createDiBounds()},t))},zr.prototype.createDiBounds=function(e){return this.create("dc:Bounds",e)},zr.prototype.createDiWaypoints=function(e){var t=this;return(0,r.Tj)(e,(function(e){return t.createDiWaypoint(e)}))},zr.prototype.createDiWaypoint=function(e){return this.create("dc:Point",(0,r.Up)(e,["x","y"]))},zr.prototype.createDiEdge=function(e,t){return this.create("bpmndi:BPMNEdge",(0,r.kp)({bpmnElement:e,waypoint:this.createDiWaypoints([])},t))},zr.prototype.createDiPlane=function(e,t){return this.create("bpmndi:BPMNPlane",(0,r.kp)({bpmnElement:e},t))},(0,i.A)(Xr,et.A),Xr.$inject=["eventBus","bpmnFactory","connectionDocking"],Xr.prototype.updateAttachment=function(e){var t=e.shape,n=t.businessObject,i=t.host;n.attachedToRef=i&&i.businessObject},Xr.prototype.updateParent=function(e,t){if(!((0,_e.J2)(e)||(0,ae.is)(e,"bpmn:DataStoreReference")&&e.parent&&(0,ae.is)(e.parent,"bpmn:Collaboration"))){var n=e.parent,i=e.businessObject,a=(0,ae.S2)(e),r=n&&n.businessObject,o=(0,ae.S2)(n);(0,ae.is)(e,"bpmn:FlowNode")&&this.updateFlowNodeRefs(i,r,t&&t.businessObject),(0,ae.is)(e,"bpmn:DataOutputAssociation")&&(r=e.source?e.source.businessObject:null),(0,ae.is)(e,"bpmn:DataInputAssociation")&&(r=e.target?e.target.businessObject:null),this.updateSemanticParent(i,r),(0,ae.is)(e,"bpmn:DataObjectReference")&&i.dataObjectRef&&this.updateSemanticParent(i.dataObjectRef,r),this.updateDiParent(a,o)}},Xr.prototype.updateBounds=function(e){var t=(0,ae.S2)(e),n=function(e){if((0,ae.is)(e,"bpmn:Activity")){var t=(0,ae.S2)(e);if(t){var n=t.get("label");if(n)return n.get("bounds")}}}(e);if(n){var i=(0,en.p)(n,t.get("bounds"));(0,r.kp)(n,{x:e.x+i.x,y:e.y+i.y})}var a=(0,_e.J2)(e)?this._getLabel(t):t,o=a.bounds;o||(o=this._bpmnFactory.createDiBounds(),a.set("bounds",o)),(0,r.kp)(o,{x:e.x,y:e.y,width:e.width,height:e.height})},Xr.prototype.updateFlowNodeRefs=function(e,t,n){var i,a;n!==t&&((0,ae.is)(n,"bpmn:Lane")&&(i=n.get("flowNodeRef"),(0,yn.TF)(i,e)),(0,ae.is)(t,"bpmn:Lane")&&(a=t.get("flowNodeRef"),(0,yn.WQ)(a,e)))},Xr.prototype.updateDiConnection=function(e,t,n){var i=(0,ae.S2)(e),a=(0,ae.S2)(t),r=(0,ae.S2)(n);i.sourceElement&&i.sourceElement.bpmnElement!==(0,ae.Cf)(t)&&(i.sourceElement=t&&a),i.targetElement&&i.targetElement.bpmnElement!==(0,ae.Cf)(n)&&(i.targetElement=n&&r)},Xr.prototype.updateDiParent=function(e,t){if(t&&!(0,ae.is)(t,"bpmndi:BPMNPlane")&&(t=t.$parent),e.$parent!==t){var n=(t||e.$parent).get("planeElement");t?(n.push(e),e.$parent=t):((0,yn.TF)(n,e),e.$parent=null)}},Xr.prototype.getLaneSet=function(e){var t,n;return(0,ae.is)(e,"bpmn:Lane")?((t=e.childLaneSet)||(t=this._bpmnFactory.create("bpmn:LaneSet"),e.childLaneSet=t,t.$parent=e),t):((0,ae.is)(e,"bpmn:Participant")&&(e=e.processRef),(t=(n=e.get("laneSets"))[0])||((t=this._bpmnFactory.create("bpmn:LaneSet")).$parent=e,n.push(t)),t)},Xr.prototype.updateSemanticParent=function(e,t,n){var i;if(e.$parent!==t&&(!(0,ae.is)(e,"bpmn:DataInput")&&!(0,ae.is)(e,"bpmn:DataOutput")||((0,ae.is)(t,"bpmn:Participant")&&"processRef"in t&&(t=t.processRef),!("ioSpecification"in t)||t.ioSpecification!==e.$parent))){if((0,ae.is)(e,"bpmn:Lane"))t&&(t=this.getLaneSet(t)),i="lanes";else if((0,ae.is)(e,"bpmn:FlowElement")){if(t)if((0,ae.is)(t,"bpmn:Participant"))t=t.processRef;else if((0,ae.is)(t,"bpmn:Lane"))do{t=t.$parent.$parent}while((0,ae.is)(t,"bpmn:Lane"));i="flowElements"}else if((0,ae.is)(e,"bpmn:Artifact")){for(;t&&!(0,ae.is)(t,"bpmn:Process")&&!(0,ae.is)(t,"bpmn:SubProcess")&&!(0,ae.is)(t,"bpmn:Collaboration");){if((0,ae.is)(t,"bpmn:Participant")){t=t.processRef;break}t=t.$parent}i="artifacts"}else if((0,ae.is)(e,"bpmn:MessageFlow"))i="messageFlows";else if((0,ae.is)(e,"bpmn:Participant")){i="participants";var a,r=e.processRef;r&&(a=function(e){for(;e&&!(0,ae.is)(e,"bpmn:Definitions");)e=e.$parent;return e}(e.$parent||t),e.$parent&&((0,yn.TF)(a.get("rootElements"),r),r.$parent=null),t&&((0,yn.WQ)(a.get("rootElements"),r),r.$parent=a))}else(0,ae.is)(e,"bpmn:DataOutputAssociation")?i="dataOutputAssociations":(0,ae.is)(e,"bpmn:DataInputAssociation")&&(i="dataInputAssociations");if(!i)throw new Error(`no parent for <${e.id}> in <${t.id}>`);var o;if(e.$parent&&(o=e.$parent.get(i),(0,yn.TF)(o,e)),t?((o=t.get(i)).push(e),e.$parent=t):e.$parent=null,n){var s=n.get(i);(0,yn.TF)(o,e),t&&(s||(s=[],t.set(i,s)),s.push(e))}}},Xr.prototype.updateConnectionWaypoints=function(e){(0,ae.S2)(e).set("waypoint",this._bpmnFactory.createDiWaypoints(e.waypoints))},Xr.prototype.updateConnection=function(e){var t,n=e.connection,i=(0,ae.Cf)(n),a=n.source,r=(0,ae.Cf)(a),o=n.target,s=(0,ae.Cf)(n.target);if((0,ae.is)(i,"bpmn:DataAssociation"))(0,ae.is)(i,"bpmn:DataInputAssociation")?(i.get("sourceRef")[0]=r,t=e.parent||e.newParent||s,this.updateSemanticParent(i,s,t)):(0,ae.is)(i,"bpmn:DataOutputAssociation")&&(t=e.parent||e.newParent||r,this.updateSemanticParent(i,r,t),i.targetRef=s);else{var c=(0,ae.is)(i,"bpmn:SequenceFlow");i.sourceRef!==r&&(c&&((0,yn.TF)(i.sourceRef&&i.sourceRef.get("outgoing"),i),r&&r.get("outgoing")&&r.get("outgoing").push(i)),i.sourceRef=r),i.targetRef!==s&&(c&&((0,yn.TF)(i.targetRef&&i.targetRef.get("incoming"),i),s&&s.get("incoming")&&s.get("incoming").push(i)),i.targetRef=s)}this.updateConnectionWaypoints(n),this.updateDiConnection(n,a,o)},Xr.prototype._getLabel=function(e){return e.label||(e.label=this._bpmnFactory.createDiLabel()),e.label};var Yr=n(87496);function Gr(e,t){Yr.A.call(this),this._bpmnFactory=e,this._moddle=t}function Wr(e,t,n){return void 0===t[n]?t:(e[n]=t[n],(0,r.cJ)(t,[n]))}(0,i.A)(Gr,Yr.A),Gr.$inject=["bpmnFactory","moddle"],Gr.prototype._baseCreate=Yr.A.prototype.create,Gr.prototype.create=function(e,t){if("label"===e){var n=t.di||this._bpmnFactory.createDiLabel();return this._baseCreate(e,(0,r.kp)({type:"label",di:n},we.X9,t))}return this.createElement(e,t)},Gr.prototype.createElement=function(e,t){var n,i,a,o,s=(t=(0,r.kp)({},t||{})).businessObject,c=t.di;if(!s){if(!t.type)throw new Error("no shape type specified");te(s=this._bpmnFactory.create(t.type))}if(i=c,!(0,ae.f7)(i,["bpmndi:BPMNShape","bpmndi:BPMNEdge","bpmndi:BPMNDiagram","bpmndi:BPMNPlane"])){var p=(0,r.kp)({},c||{},{id:s.id+"_di"});c="root"===e?this._bpmnFactory.createDiPlane(s,p):"connection"===e?this._bpmnFactory.createDiEdge(s,p):this._bpmnFactory.createDiShape(s,p)}return(0,ae.is)(s,"bpmn:Group")&&(t=(0,r.kp)({isFrame:!0},t)),t=function(e,t){return(0,r.jJ)(["processRef","isInterrupting","associationDirection","isForCompensation"],(function(n){t=Wr(e,t,n)})),t}(s,t),t.isExpanded&&(t=Wr(c,t,"isExpanded")),(0,ae.f7)(s,["bpmn:Lane","bpmn:Participant"])&&(t=Wr(c,t,"isHorizontal")),(0,ae.is)(s,"bpmn:SubProcess")&&(t.collapsed=!(0,xe.Av)(s,c)),(0,ae.is)(s,"bpmn:ExclusiveGateway")&&((0,r.zy)(c,"isMarkerVisible")?void 0===c.isMarkerVisible&&(c.isMarkerVisible=!1):c.isMarkerVisible=!0),(0,r.O9)(t.triggeredByEvent)&&(s.triggeredByEvent=t.triggeredByEvent,delete t.triggeredByEvent),(0,r.O9)(t.cancelActivity)&&(s.cancelActivity=t.cancelActivity,delete t.cancelActivity),t.eventDefinitionType&&(a=s.get("eventDefinitions")||[],o=this._bpmnFactory.create(t.eventDefinitionType,t.eventDefinitionAttrs),"bpmn:ConditionalEventDefinition"===t.eventDefinitionType&&(o.condition=this._bpmnFactory.create("bpmn:FormalExpression")),a.push(o),o.$parent=s,s.eventDefinitions=a,delete t.eventDefinitionType),n=this.getDefaultSize(s,c),t=(0,r.kp)({id:s.id},n,t,{businessObject:s,di:c}),this._baseCreate(e,t)},Gr.prototype.getDefaultSize=function(e,t){var n=(0,ae.Cf)(e);if(t=t||(0,ae.S2)(e),(0,ae.is)(n,"bpmn:SubProcess"))return(0,xe.Av)(n,t)?{width:350,height:200}:{width:100,height:80};if((0,ae.is)(n,"bpmn:Task"))return{width:100,height:80};if((0,ae.is)(n,"bpmn:Gateway"))return{width:50,height:50};if((0,ae.is)(n,"bpmn:Event"))return{width:36,height:36};if((0,ae.is)(n,"bpmn:Participant")){var i=void 0===t.isHorizontal||!0===t.isHorizontal;return(0,xe.Av)(n,t)?i?{width:600,height:250}:{width:250,height:600}:i?{width:400,height:60}:{width:60,height:400}}return(0,ae.is)(n,"bpmn:Lane")?{width:400,height:100}:(0,ae.is)(n,"bpmn:DataObjectReference")?{width:36,height:50}:(0,ae.is)(n,"bpmn:DataStoreReference")?{width:50,height:50}:(0,ae.is)(n,"bpmn:TextAnnotation")?{width:100,height:30}:(0,ae.is)(n,"bpmn:Group")?{width:300,height:300}:{width:100,height:80}},Gr.prototype.createParticipantShape=function(e){return(0,r.Gv)(e)||(e={isExpanded:e}),!1!==(e=(0,r.kp)({type:"bpmn:Participant"},e||{})).isExpanded&&(e.processRef=this._bpmnFactory.create("bpmn:Process")),this.createShape(e)};var qr=n(77550);function Hr(e){this._elementRegistry=e}function Jr(e,t){(0,r.jJ)(t,(function(t,n){e.set(n,t)}))}Hr.$inject=["elementRegistry"],Hr.prototype.execute=function(e){var t=e.element,n=e.moddleElement,i=e.properties;if(!n)throw new Error("<moddleElement> required");var a=e.changed||this._getVisualReferences(n).concat(t),o=e.oldProperties||function(e,t){return(0,r.TS)(t,(function(t,n){return t[n]=e.get(n),t}),{})}(n,(0,r.HP)(i));return Jr(n,i),e.oldProperties=o,e.changed=a,a},Hr.prototype.revert=function(e){var t=e.oldProperties,n=e.moddleElement,i=e.changed;return Jr(n,t),i},Hr.prototype._getVisualReferences=function(e){var t=this._elementRegistry;return(0,ae.is)(e,"bpmn:DataObject")?function(e,t){return t.filter((function(t){return(0,ae.is)(t,"bpmn:DataObjectReference")&&(0,ae.Cf)(t).dataObjectRef===e}))}(e,t):[]};var Ur="default",Zr="id",Kr={width:0,height:0};function eo(e,t,n,i){this._elementRegistry=e,this._moddle=t,this._modeling=n,this._textRenderer=i}function to(e,t){return Zr in e&&e[Zr]!==t[Zr]}function no(e,t){var n=e.businessObject,i=(0,ae.S2)(e);(0,r.jJ)(t,(function(e,t){"di"!==t?n.set(t,e):i&&function(e,t){(0,r.jJ)(t,(function(t,n){e.set(n,t)}))}(i,e)}))}eo.$inject=["elementRegistry","moddle","modeling","textRenderer"],eo.prototype.execute=function(e){var t=e.element,n=[t];if(!t)throw new Error("element required");var i=this._elementRegistry,a=this._moddle.ids,o=t.businessObject,s=function(e){var t=(0,r.kp)({},e);return io.forEach((function(n){n in e&&(t[n]=(0,ae.Cf)(t[n]))})),t}(e.properties),c=e.oldProperties||function(e,t){var n=(0,r.HP)(t),i=e.businessObject,a=(0,ae.S2)(e);return(0,r.TS)(n,(function(e,n){return e[n]="di"!==n?i.get(n):function(e,t){return(0,r.TS)(t,(function(t,n){return t[n]=e&&e.get(n),t}),{})}(a,(0,r.HP)(t.di)),e}),{})}(t,s);return to(s,o)&&(a.unclaim(o[Zr]),i.updateId(t,s[Zr]),a.claim(s[Zr],o)),Ur in s&&(s[Ur]&&n.push(i.get(s[Ur].id)),o[Ur]&&n.push(i.get(o[Ur].id))),no(t,s),e.oldProperties=c,e.changed=n,n},eo.prototype.postExecute=function(e){var t=e.element.label,n=t&&(0,ae.Cf)(t).name;if(n){var i=this._textRenderer.getExternalLabelBounds(t,n);this._modeling.resizeShape(t,i,Kr)}},eo.prototype.revert=function(e){var t=e.element,n=e.properties,i=e.oldProperties,a=t.businessObject,r=this._elementRegistry,o=this._moddle.ids;return no(t,i),to(n,a)&&(o.unclaim(n[Zr]),r.updateId(t,i[Zr]),o.claim(i[Zr],a)),e.changed};var io=["default"];function ao(e,t){this._canvas=e,this._modeling=t}function ro(e,t){this._modeling=e,this._spaceTool=t}function oo(e){this._modeling=e}function so(e,t){this._modeling=e,this._spaceTool=t}ao.$inject=["canvas","modeling"],ao.prototype.execute=function(e){var t=this._canvas,n=e.newRoot,i=n.businessObject,a=t.getRootElement(),r=a.businessObject,o=r.$parent,s=(0,ae.S2)(a);return t.setRootElement(n),t.removeRootElement(a),(0,yn.WQ)(o.rootElements,i),i.$parent=o,(0,yn.TF)(o.rootElements,r),r.$parent=null,a.di=null,s.bpmnElement=i,n.di=s,e.oldRoot=a,[]},ao.prototype.revert=function(e){var t=this._canvas,n=e.newRoot,i=n.businessObject,a=e.oldRoot,r=a.businessObject,o=i.$parent,s=(0,ae.S2)(n);return t.setRootElement(a),t.removeRootElement(n),(0,yn.TF)(o.rootElements,i),i.$parent=null,(0,yn.WQ)(o.rootElements,r),r.$parent=o,n.di=null,s.bpmnElement=r,a.di=s,[]},ro.$inject=["modeling","spaceTool"],ro.prototype.preExecute=function(e){var t=this._spaceTool,n=this._modeling,i=e.shape,a=e.location,o=Tn(i),s=o===i,c=s?i:i.parent,p=Pn(c),l=(0,xe.$b)(i);if(l?"left"===a?a="top":"right"===a&&(a="bottom"):"top"===a?a="left":"bottom"===a&&(a="right"),!p.length){var m=l?{x:i.x+kn,y:i.y,width:i.width-kn,height:i.height}:{x:i.x,y:i.y+kn,width:i.width,height:i.height-kn};n.createShape({type:"bpmn:Lane",isHorizontal:l},m,c)}var u,d,h,f,v,g=[];(0,kt.qO)(o,(function(e){return g.push(e),e.label&&g.push(e.label),e===i?[]:(0,r.pb)(e.children,(function(e){return e!==i}))})),"top"===a?(u=-120,h=(d=i.y)+10,f="n",v="y"):"left"===a?(u=-120,h=(d=i.x)+10,f="w",v="x"):"bottom"===a?(u=120,h=(d=i.y+i.height)-10,f="s",v="y"):"right"===a&&(u=120,h=(d=i.x+i.width)-10,f="e",v="x");var y=t.calculateAdjustments(g,v,u,h),b=l?{x:0,y:u}:{x:u,y:0};t.makeSpace(y.movingShapes,y.resizingShapes,b,f,h);var E=l?{x:i.x+(s?kn:0),y:d-("top"===a?120:0),width:i.width-(s?kn:0),height:120}:{x:d-("left"===a?120:0),y:i.y+(s?kn:0),width:120,height:i.height-(s?kn:0)};e.newLane=n.createShape({type:"bpmn:Lane",isHorizontal:l},E,c)},oo.$inject=["modeling"],oo.prototype.preExecute=function(e){var t=this._modeling,n=e.shape,i=e.count,a=Pn(n),r=a.length;if(r>i)throw new Error(`more than <${i}> child lanes`);var o,s,c,p,l=(0,xe.$b)(n),m=l?n.height:n.width,u=Math.round(m/i);for(p=0;p<i;p++)o=p===i-1?m-u*p:u,s=l?{x:n.x+kn,y:n.y+p*u,width:n.width-kn,height:o}:{x:n.x+p*u,y:n.y+kn,width:o,height:n.height-kn},p<r?t.resizeShape(a[p],s):(c={type:"bpmn:Lane",isHorizontal:l},t.createShape(c,s,n))},so.$inject=["modeling","spaceTool"],so.prototype.preExecute=function(e){var t=e.shape,n=e.newBounds;!1!==e.balanced?this.resizeBalanced(t,n):this.resizeSpace(t,n)},so.prototype.resizeBalanced=function(e,t){var n=this._modeling,i=function(e,t){var n=Tn(e),i=Cn(n,(0,ae.is)(n,"bpmn:Process")?[]:[n]),a=(0,Ge.Fy)(e),r=(0,Ge.Fy)(t),o=function(e,t){return(0,On.Sc)((0,Ge.Fy)(t),(0,Ge.Fy)(e))}(e,t),s=[],c=(0,xe.$b)(e);return i.forEach((function(t){if(t!==e){var n=c?0:o.top,i=c?o.right:0,p=c?0:o.bottom,l=c?o.left:0,m=(0,Ge.Fy)(t);o.top&&(Sn(m.bottom-a.top)<10&&(p=r.top-m.bottom),Sn(m.top-a.top)<5&&(n=r.top-m.top)),o.left&&(Sn(m.right-a.left)<10&&(i=r.left-m.right),Sn(m.left-a.left)<5&&(l=r.left-m.left)),o.bottom&&(Sn(m.top-a.bottom)<10&&(n=r.bottom-m.top),Sn(m.bottom-a.bottom)<5&&(p=r.bottom-m.bottom)),o.right&&(Sn(m.left-a.right)<10&&(l=r.right-m.left),Sn(m.right-a.right)<5&&(i=r.right-m.right)),(n||i||p||l)&&s.push({shape:t,newBounds:(0,On.rF)(t,{top:n,right:i,bottom:p,left:l})})}})),s}(e,t);n.resizeShape(e,t),i.forEach((function(e){n.resizeShape(e.shape,e.newBounds)}))},so.prototype.resizeSpace=function(e,t){var n,i,a,r,o,s=this._spaceTool,c=(0,Ge.Fy)(e),p=(0,Ge.Fy)(t),l=(0,On.Sc)(p,c),m=Tn(e),u=[],d=[];(0,kt.qO)(m,(function(e){return u.push(e),((0,ae.is)(e,"bpmn:Lane")||(0,ae.is)(e,"bpmn:Participant"))&&d.push(e),e.children})),(l.bottom||l.top)&&(n=l.bottom||l.top,i=e.y+(l.bottom?e.height:0)+(l.bottom?-10:10),a=l.bottom?"s":"n",r=l.top>0||l.bottom<0?-n:n,o=s.calculateAdjustments(u,"y",r,i),s.makeSpace(o.movingShapes,o.resizingShapes,{x:0,y:n},a)),(l.left||l.right)&&(n=l.right||l.left,i=e.x+(l.right?e.width:0)+(l.right?-10:100),a=l.right?"e":"w",r=l.left>0||l.right<0?-n:n,o=s.calculateAdjustments(d,"x",r,i),s.makeSpace(o.movingShapes,o.resizingShapes,{x:n,y:0},a))};var co="flowNodeRef",po="lanes";function lo(e){this._elementRegistry=e}function mo(e){this._moddle=e}lo.$inject=["elementRegistry"],lo.prototype._computeUpdates=function(e,t){var n=[],i=[],a={},r=[];function o(e){-1===n.indexOf(e)&&(r.push(e),n.push(e))}return t.forEach((function(e){var t=Tn(e);t&&-1===n.indexOf(t)&&(t.children.filter((function(e){return(0,ae.is)(e,"bpmn:FlowNode")})).forEach(o),n.push(t))})),e.forEach(o),r.forEach((function(e){var t=e.businessObject,n=t.get(po).slice(),r=function(e){if(!e.parent)return[];var t=function(e){var t=Tn(e);return a[t.id]||(a[t.id]=Cn(t)),a[t.id]}(e);return t.filter((function(t){return n=e,i=t,a=(0,Ge.Fy)(i),r=n.x+n.width/2,o=n.y+n.height/2,r>a.left&&r<a.right&&o>a.top&&o<a.bottom;var n,i,a,r,o})).map((function(e){return e.businessObject}))}(e);i.push({flowNode:t,remove:n,add:r})})),t.forEach((function(e){var t=e.businessObject;e.parent||t.get(co).forEach((function(e){i.push({flowNode:e,remove:[t],add:[]})}))})),i},lo.prototype.execute=function(e){var t=e.updates;return t||(t=e.updates=this._computeUpdates(e.flowNodeShapes,e.laneShapes)),t.forEach((function(e){var t=e.flowNode,n=t.get(po);e.remove.forEach((function(e){(0,yn.TF)(n,e),(0,yn.TF)(e.get(co),t)})),e.add.forEach((function(e){(0,yn.WQ)(n,e),(0,yn.WQ)(e.get(co),t)}))})),[]},lo.prototype.revert=function(e){return e.updates.forEach((function(e){var t=e.flowNode,n=t.get(po);e.add.forEach((function(e){(0,yn.TF)(n,e),(0,yn.TF)(e.get(co),t)})),e.remove.forEach((function(e){(0,yn.WQ)(n,e),(0,yn.WQ)(e.get(co),t)}))})),[]},mo.$inject=["moddle"],mo.prototype.execute=function(e){var t=this._moddle.ids,n=e.id,i=e.element;return e.claiming?t.claim(n,i):t.unclaim(n),[]},mo.prototype.revert=function(e){var t=this._moddle.ids,n=e.id,i=e.element;return e.claiming?t.unclaim(n):t.claim(n,i),[]};var uo={fill:void 0,stroke:void 0};function ho(e){this._commandStack=e,this._normalizeColor=function(e){if(e){if((0,r.Kg)(e)){var t=function(e){var t=document.createElement("canvas").getContext("2d");return t.fillStyle="transparent",t.fillStyle=e,/^#[0-9a-fA-F]{6}$/.test(t.fillStyle)?t.fillStyle:null}(e);if(t)return t}throw new Error(`invalid color value: ${e}`)}}}ho.$inject=["commandStack"],ho.prototype.postExecute=function(e){var t=e.elements,n=e.colors||uo,i=this,a={};"fill"in n&&(0,r.kp)(a,{"background-color":this._normalizeColor(n.fill)}),"stroke"in n&&(0,r.kp)(a,{"border-color":this._normalizeColor(n.stroke)}),(0,r.jJ)(t,(function(e){var t=(0,_e.fX)(e)?(0,r.Up)(a,["border-color"]):a,n=(0,ae.S2)(e);if(function(e){"border-color"in e&&(e.stroke=e["border-color"]),"background-color"in e&&(e.fill=e["background-color"])}(t),(0,_e.J2)(e))i._commandStack.execute("element.updateModdleProperties",{element:e,moddleElement:n.label,properties:{color:a["border-color"]}});else{if(!(0,ae.f7)(n,["bpmndi:BPMNEdge","bpmndi:BPMNShape"]))return;i._commandStack.execute("element.updateProperties",{element:e,properties:{di:t}})}}))};var fo={width:0,height:0};function vo(e,t,n){function i(e,t){var n=e.label||e,i=e.labelTarget||e;return(0,we.je)(n,t,i!==n),[n,i]}this.preExecute=function(t){var n=t.element,i=n.businessObject,a=t.newLabel;if(!(0,_e.J2)(n)&&(0,we.UC)(n)&&!(0,we.ur)(n)&&!go(a)){var r=(0,we.QX)(n);r={x:r.x,y:r.y+7},e.createLabel(n,r,{id:i.id+"_label",businessObject:i,di:n.di})}},this.execute=function(e){return e.oldLabel=(0,we.p9)(e.element),i(e.element,e.newLabel)},this.revert=function(e){return i(e.element,e.oldLabel)},this.postExecute=function(n){var i=n.element,a=i.label||i,r=n.newLabel,o=n.newBounds,s=n.hints||{};if((0,_e.J2)(a)||(0,ae.is)(a,"bpmn:TextAnnotation"))if((0,_e.J2)(a)&&go(r))!1!==s.removeShape&&e.removeShape(a,{unsetLabel:!1});else{var c=(0,we.p9)(i);void 0===o&&(o=t.getExternalLabelBounds(a,c)),o&&e.resizeShape(a,o,fo)}}}function go(e){return!e||!e.trim()}function yo(e,t,n,i){qr.A.call(this,e,t,n),this._bpmnRules=i}vo.$inject=["modeling","textRenderer","bpmnFactory"],(0,i.A)(yo,qr.A),yo.$inject=["eventBus","elementFactory","commandStack","bpmnRules"],yo.prototype.getHandlers=function(){var e=qr.A.prototype.getHandlers.call(this);return e["element.updateModdleProperties"]=Hr,e["element.updateProperties"]=eo,e["canvas.updateRoot"]=ao,e["lane.add"]=ro,e["lane.resize"]=so,e["lane.split"]=oo,e["lane.updateRefs"]=lo,e["id.updateClaim"]=mo,e["element.setColor"]=ho,e["element.updateLabel"]=vo,e},yo.prototype.updateLabel=function(e,t,n,i){this._commandStack.execute("element.updateLabel",{element:e,newLabel:t,newBounds:n,hints:i||{}})},yo.prototype.connect=function(e,t,n,i){var a=this._bpmnRules;if(n||(n=a.canConnect(e,t)),n)return this.createConnection(e,t,n,e.parent,i)},yo.prototype.updateModdleProperties=function(e,t,n){this._commandStack.execute("element.updateModdleProperties",{element:e,moddleElement:t,properties:n})},yo.prototype.updateProperties=function(e,t){this._commandStack.execute("element.updateProperties",{element:e,properties:t})},yo.prototype.resizeLane=function(e,t,n){this._commandStack.execute("lane.resize",{shape:e,newBounds:t,balanced:n})},yo.prototype.addLane=function(e,t){var n={shape:e,location:t};return this._commandStack.execute("lane.add",n),n.newLane},yo.prototype.splitLane=function(e,t){this._commandStack.execute("lane.split",{shape:e,count:t})},yo.prototype.makeCollaboration=function(){var e=this._create("root",{type:"bpmn:Collaboration"}),t={newRoot:e};return this._commandStack.execute("canvas.updateRoot",t),e},yo.prototype.makeProcess=function(){var e=this._create("root",{type:"bpmn:Process"}),t={newRoot:e};return this._commandStack.execute("canvas.updateRoot",t),e},yo.prototype.updateLaneRefs=function(e,t){this._commandStack.execute("lane.updateRefs",{flowNodeShapes:e,laneShapes:t})},yo.prototype.claimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t,claiming:!0})},yo.prototype.unclaimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t})},yo.prototype.setColor=function(e,t){e.length||(e=[e]),this._commandStack.execute("element.setColor",{elements:e,colors:t})};var bo=n(57905),Eo=n(71711),xo=Math.round,wo={"h:h":20,"v:v":20,"h:v":-10,"v:h":-10};function _o(e,t,n){var i,a,r,o=(0,Ge.vc)(t,e,5),s=n.split(":")[0],c=xo((t.x-e.x)/2+e.x),p=xo((t.y-e.y)/2+e.y),l=(r=o,{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/left|right/,v:/top|bottom/}[s].test(r)),m=/h|r|l/.test(s),u=!1,d=!1;return l?(i=m?{x:c,y:e.y}:{x:e.x,y:p},a=m?"h:h":"v:v"):(u=function(e,t){return!{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/./,v:/./}[t].test(e)}(o,s),a=m?"h:v":"v:h",u?m?(d=p===e.y,i={x:e.x+20*(/l/.test(s)?-1:1),y:d?p+20:p}):i={x:(d=c===e.x)?c+20:c,y:e.y+20*(/t/.test(s)?-1:1)}:i={x:c,y:p}),{waypoints:So(e,i,a).concat(i),directions:a,turnNextDirections:d}}function Oo(e){return e.split(":").reverse().join(":")}function So(e,t,n){if(!function(e){return e&&/^h|v|t|r|b|l:h|v|t|r|b|l$/.test(e)}(n=n||"h:h"))throw new Error("unknown directions: <"+n+">: must be specified as <start>:<end> with start/end in { h,v,t,r,b,l }");if(Po(n)){var i=function(e,t,n){return _o(e,t,n)}(e,t,n),a=function(e,t,n){var i=_o(t,e,Oo(n));return{waypoints:i.waypoints.slice().reverse(),directions:Oo(i.directions),turnNextDirections:i.turnNextDirections}}(e,t,n),r=function(e,t){var n=e.directions.split(":")[1],i=t.directions.split(":")[0];e.turnNextDirections&&(n="h"==n?"v":"h"),t.turnNextDirections&&(i="h"==i?"v":"h");var a=n+":"+i;return{waypoints:So(e.waypoints[e.waypoints.length-1],t.waypoints[0],a),directions:a}}(i,a);return[].concat(i.waypoints,r.waypoints,a.waypoints)}return function(e,t,n){var i=xo((t.x-e.x)/2+e.x),a=xo((t.y-e.y)/2+e.y);if("h:v"===n)return[{x:t.x,y:e.y}];if("v:h"===n)return[{x:e.x,y:t.y}];if("h:h"===n)return[{x:i,y:e.y},{x:i,y:t.y}];if("v:v"===n)return[{x:e.x,y:a},{x:t.x,y:a}];throw new Error("invalid directions: can only handle varians of [hv]:[hv]")}(e,t,n)}function Ao(e,t,n,i,a,r){var o;return(0,Ft.cy)(n)&&(a=n,r=i,n=(0,Ge.pp)(e),i=(0,Ge.pp)(t)),a=a||[],o=-1!==(r=(0,Ft.kp)({preferredLayouts:[]},r)).preferredLayouts.indexOf("straight")&&function(e,t,n,i,a){var r,o,s={};return o=(0,Ge.vc)(e,t),/^(top|bottom|left|right)$/.test(o)?(/top|bottom/.test(o)&&(r="x"),/left|right/.test(o)&&(r="y"),"target"===a.preserveDocking?ko(r,i,e)?(s[r]=i[r],[{x:void 0!==s.x?s.x:n.x,y:void 0!==s.y?s.y:n.y,original:{x:void 0!==s.x?s.x:n.x,y:void 0!==s.y?s.y:n.y}},{x:i.x,y:i.y}]):null:ko(r,n,t)?(s[r]=n[r],[{x:n.x,y:n.y},{x:void 0!==s.x?s.x:i.x,y:void 0!==s.y?s.y:i.y,original:{x:void 0!==s.x?s.x:i.x,y:void 0!==s.y?s.y:i.y}}]):null):null}(e,t,n,i,r),o||(o=r.connectionEnd&&function(e,t,n,i){var a=i.slice().reverse();return(a=Co(e,t,n,a))?a.reverse():null}(t,e,i,a),o||(o=r.connectionStart&&Co(e,t,n,a))||(!r.connectionStart&&!r.connectionEnd&&a&&a.length?a:function(e,t,n,i,a){var r=a&&a.preferredLayouts||[],o=(0,Ft.FF)(r,"straight")[0]||"h:h",s=wo[o]||0,c=(0,Ge.vc)(e,t,s),p=function(e,t){if(Po(t))return t;switch(e){case"intersect":return"t:t";case"top":case"bottom":return"v:v";case"left":case"right":return"h:h";default:return t}}(c,o);n=n||(0,Ge.pp)(e),i=i||(0,Ge.pp)(t);var l=p.split(":"),m=To(n,e,l[0],function(e){return{top:"bottom",bottom:"top",left:"right",right:"left","top-left":"bottom-right","bottom-right":"top-left","top-right":"bottom-left","bottom-left":"top-right"}[e]}(c));return function(e,t,n){var i=So(e,t,n);return i.unshift(e),i.push(t),Ro(i)}(m,To(i,t,l[1],c),p)}(e,t,n,i,r)))}function ko(e,t,n){return function(e,t,n){return e>=t&&e<=n}(t[e],n[e],n[e]+n[{x:"width",y:"height"}[e]])}function Co(e,t,n,i){if(function(e){return e.length<3||!(e.length>4)&&!!(0,Ft.I6)(e,(function(t,n){var i=e[n-1];return i&&(0,Eo.cK)(t,i)<3}))}(i))return null;var a,r=i[0],o=i.slice();return o[0]=n,o[1]=function(e,t,n){switch((0,Eo.ke)(t,e)){case"v":return{x:n.x,y:e.y};case"h":return{x:e.x,y:n.y}}return{x:e.x,y:e.y}}(o[1],r,n),a=function(e,t,n){var i;for(i=e.length-2;0!==i;i--)if((0,Eo.El)(e[i],t,20)||(0,Eo.El)(e[i],n,20))return e.slice(i);return e}(o,e,t),a!==o&&(o=Co(e,t,n,a)),o&&(0,Eo.ke)(o)?null:o}function Po(e){return e&&/t|r|b|l/.test(e)}function To(e,t,n,i){if("h"===n&&(n=/left/.test(i)?"l":"r"),"v"===n&&(n=/top/.test(i)?"t":"b"),"t"===n)return{original:e,x:e.x,y:t.y};if("r"===n)return{original:e,x:t.x+t.width,y:e.y};if("b"===n)return{original:e,x:e.x,y:t.y+t.height};if("l"===n)return{original:e,x:t.x,y:e.y};throw new Error("unexpected dockingDirection: <"+n+">")}function Ro(e){return e.reduce((function(t,n,i){var a=t[t.length-1],r=e[i+1];return(0,Eo.XP)(a,r,n,0)||t.push(n),t}),[])}var Do={default:["h:h"],fromGateway:["v:h"],toGateway:["h:v"],loop:{fromTop:["t:r"],fromRight:["r:b"],fromLeft:["l:t"],fromBottom:["b:l"]},boundaryLoop:{alternateHorizontalSide:"b",alternateVerticalSide:"l",default:"v"},messageFlow:["straight","v:v"],subProcess:["straight","h:h"],isHorizontal:!0},No={default:["v:v"],fromGateway:["h:v"],toGateway:["v:h"],loop:{fromTop:["t:l"],fromRight:["r:t"],fromLeft:["l:b"],fromBottom:["b:r"]},boundaryLoop:{alternateHorizontalSide:"t",alternateVerticalSide:"r",default:"h"},messageFlow:["straight","h:h"],subProcess:["straight","v:v"],isHorizontal:!1},$o={top:"bottom","top-right":"bottom-left","top-left":"bottom-right",right:"left",bottom:"top","bottom-right":"top-left","bottom-left":"top-right",left:"right"},Mo={top:"t",right:"r",bottom:"b",left:"l"};function Bo(e){this._elementRegistry=e}function jo(e,t){return(0,ae.is)(t,"bpmn:Participant")?"source":(0,ae.is)(e,"bpmn:Participant")?"target":Lo(t)?"source":Lo(e)||(0,ae.is)(t,"bpmn:Event")?"target":(0,ae.is)(e,"bpmn:Event")?"source":null}function Fo(e){return Lo(e)?"target":"source"}function Qo(e,t){return e?e.original||e:(0,Ge.pp)(t)}function Io(e,t){return(0,ae.is)(t,"bpmn:Activity")&&(0,ae.is)(e,"bpmn:BoundaryEvent")&&t.businessObject.isForCompensation}function Lo(e){return(0,ae.is)(e,"bpmn:SubProcess")&&(0,xe.Av)(e)}function zo(e,t){return e===t}function Xo(e){var t=/right|left/.exec(e);return t&&t[0]}function Vo(e){var t=/top|bottom/.exec(e);return t&&t[0]}function Yo(e,t){return $o[e]===t}function Go(e){return"right"===e||"left"===e}function Wo(e,t,n){var i=t.waypoints,a=i&&i.length&&(0,Ge.vc)(i[0],e);return"top"===a?n.loop.fromTop:"right"===a?n.loop.fromRight:"left"===a?n.loop.fromLeft:n.loop.fromBottom}function qo(e,t,n,i){var a,r,o,s,c=(0,Ge.pp)(e),p=(0,Ge.pp)(t),l=(s=(o=e).host,(0,Ge.vc)((0,Ge.pp)(o),s,-10)),m=zo(e.host,t),u=-1!==["top","right","bottom","left"].indexOf(l),d=(0,Ge.vc)(p,c,{x:e.width/2+t.width/2,y:e.height/2+t.height/2});return m?function(e,t,n,i,a,r){var o=t?e:r.isHorizontal?Vo(e):Xo(e);return[Mo[o]+":"+(t?Go(e)?Ho("y",n,i,a)?"h":r.boundaryLoop.alternateHorizontalSide:Ho("x",n,i,a)?"v":r.boundaryLoop.alternateVerticalSide:r.boundaryLoop.default)]}(l,u,e,t,n,i):(a=function(e,t,n,i){if(n)return Mo[e];var a=Vo(e),r=Xo(e),o=Vo(t),s=Xo(t);if(i){if(zo(a,o)||Yo(r,s))return Mo[a]}else if(zo(r,s)||Yo(a,o))return Mo[r];return Mo[i?r:a]}(l,d,u,i.isHorizontal),r=function(e,t,n,i){return n?Go(e)?(a=t,r=Xo(e),o=$o[r],-1!==a.indexOf(o)||zo(e,t)?"h":"v"):function(e,t){var n=Vo(e),i=$o[n];return-1!==t.indexOf(i)}(e,t)||zo(e,t)?"v":"h":i?zo(Vo(e),Vo(t))?"h":"v":zo(Xo(e),Xo(t))?"v":"h";var a,r,o}(l,d,u,i.isHorizontal),[a+":"+r])}function Ho(e,t,n,i){return!(Jo(e,i,n,40)||Jo(e,i,{x:n.x+n.width,y:n.y+n.height},40)||Jo(e,i,(0,Ge.pp)(t),40))}function Jo(e,t,n,i){return Math.abs(t[e]-n[e])<i}(0,i.A)(Bo,bo.A),Bo.prototype.layoutConnection=function(e,t){t||(t={});var n,i,a=t.source||e.source,o=t.target||e.target,s=t.waypoints||e.waypoints,c=t.connectionStart,p=t.connectionEnd,l=this._elementRegistry;if(c||(c=Qo(s&&s[0],a)),p||(p=Qo(s&&s[s.length-1],o)),((0,ae.is)(e,"bpmn:Association")||(0,ae.is)(e,"bpmn:DataAssociation"))&&s&&!Io(a,o))return[].concat([c],s.slice(1,-1),[p]);var m=Dt(a,l)?Do:No;return(0,ae.is)(e,"bpmn:MessageFlow")?n=function(e,t,n){return{preferredLayouts:n.messageFlow,preserveDocking:jo(e,t)}}(a,o,m):((0,ae.is)(e,"bpmn:SequenceFlow")||Io(a,o))&&(n=a===o?{preferredLayouts:Wo(a,e,m)}:(0,ae.is)(a,"bpmn:BoundaryEvent")?{preferredLayouts:qo(a,o,p,m)}:Lo(a)||Lo(o)?{preferredLayouts:m.subProcess,preserveDocking:Fo(a)}:(0,ae.is)(a,"bpmn:Gateway")?{preferredLayouts:m.fromGateway}:(0,ae.is)(o,"bpmn:Gateway")?{preferredLayouts:m.toGateway}:{preferredLayouts:m.default}),n&&(i=Ro(Ao(a,o,c,p,s,n=(0,r.kp)(n,t)))),i||[c,p]},Bo.$inject=["elementRegistry"];var Uo=n(10270);const Zo={__init__:["modeling","bpmnUpdater"],__depends__:[oa,Ia,za,Ya,mr,Nr.A,jr,Lr,dt.A,Ke.A,Dr],bpmnFactory:["type",zr],bpmnUpdater:["type",Xr],elementFactory:["type",Gr],modeling:["type",yo],layouter:["type",Bo],connectionDocking:["type",Uo.A]},Ko=Math.round;function es(e,t,n,i,a,r){this._complexPreview=e,this._connectionDocking=t,this._elementFactory=n,this._eventBus=i,this._layouter=a,this._rules=r}es.prototype.create=function(e,t,n){const i=this._complexPreview,a=this._connectionDocking,o=this._elementFactory,s=this._eventBus,c=this._layouter,p=this._rules,l=o.createShape((0,r.kp)({type:t},n)),m=s.fire("autoPlace",{source:e,shape:l});if(!m)return;(0,r.kp)(l,{x:m.x-Ko(l.width/2),y:m.y-Ko(l.height/2)});const u=p.allowed("connection.create",{source:e,target:l,hints:{targetParent:e.parent}});let d=null;u&&(d=o.createConnection(u),d.waypoints=c.layoutConnection(d,{source:e,target:l}),d.waypoints=a.getCroppedWaypoints(d,e,l)),i.create({created:[l,d].filter((e=>!(0,r.gD)(e)))})},es.prototype.cleanUp=function(){this._complexPreview.cleanUp()},es.$inject=["complexPreview","connectionDocking","elementFactory","eventBus","layouter","rules"];const ts={__depends__:[jt,Kt,Zo],__init__:["appendPreview"],appendPreview:["type",es]};var ns=n(7827),is=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message start event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer start event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Conditional start event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Signal start event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],as=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}}],rs=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message intermediate catch event",actionName:"replace-with-message-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message intermediate throw event",actionName:"replace-with-message-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-message",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer intermediate catch event",actionName:"replace-with-timer-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation intermediate throw event",actionName:"replace-with-escalation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-escalation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional intermediate catch event",actionName:"replace-with-conditional-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Link intermediate catch event",actionName:"replace-with-link-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-link",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Link intermediate throw event",actionName:"replace-with-link-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-link",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Compensation intermediate throw event",actionName:"replace-with-compensation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-compensation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal intermediate catch event",actionName:"replace-with-signal-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal intermediate throw event",actionName:"replace-with-signal-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-signal",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],os=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message end event",actionName:"replace-with-message-end",className:"bpmn-icon-end-event-message",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Escalation end event",actionName:"replace-with-escalation-end",className:"bpmn-icon-end-event-escalation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Error end event",actionName:"replace-with-error-end",className:"bpmn-icon-end-event-error",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel end event",actionName:"replace-with-cancel-end",className:"bpmn-icon-end-event-cancel",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Compensation end event",actionName:"replace-with-compensation-end",className:"bpmn-icon-end-event-compensation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal end event",actionName:"replace-with-signal-end",className:"bpmn-icon-end-event-signal",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Terminate end event",actionName:"replace-with-terminate-end",className:"bpmn-icon-end-event-terminate",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:TerminateEventDefinition"}}],ss=[{label:"Exclusive gateway",actionName:"replace-with-exclusive-gateway",className:"bpmn-icon-gateway-xor",target:{type:"bpmn:ExclusiveGateway"}},{label:"Parallel gateway",actionName:"replace-with-parallel-gateway",className:"bpmn-icon-gateway-parallel",target:{type:"bpmn:ParallelGateway"}},{label:"Inclusive gateway",actionName:"replace-with-inclusive-gateway",className:"bpmn-icon-gateway-or",target:{type:"bpmn:InclusiveGateway"}},{label:"Complex gateway",actionName:"replace-with-complex-gateway",className:"bpmn-icon-gateway-complex",target:{type:"bpmn:ComplexGateway"}},{label:"Event-based gateway",actionName:"replace-with-event-based-gateway",className:"bpmn-icon-gateway-eventbased",target:{type:"bpmn:EventBasedGateway",instantiate:!1,eventGatewayType:"Exclusive"}}],cs=[{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Event sub-process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}},{label:"Ad-hoc sub-process",actionName:"replace-with-ad-hoc-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:AdHocSubProcess",isExpanded:!0}},{label:"Sub-process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}}],ps=[{label:"Sub-process",actionName:"replace-with-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Event sub-process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}},{label:"Ad-hoc sub-process (collapsed)",actionName:"replace-with-collapsed-ad-hoc-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:AdHocSubProcess",isExpanded:!1}}],ls=[{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Sub-process",actionName:"replace-with-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Ad-hoc sub-process",actionName:"replace-with-ad-hoc-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:AdHocSubProcess",isExpanded:!0}},{label:"Event sub-process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}}],ms=ls,us=[{label:"Task",actionName:"replace-with-task",className:"bpmn-icon-task",target:{type:"bpmn:Task"}},{label:"User task",actionName:"replace-with-user-task",className:"bpmn-icon-user",target:{type:"bpmn:UserTask"}},{label:"Service task",actionName:"replace-with-service-task",className:"bpmn-icon-service",target:{type:"bpmn:ServiceTask"}},{label:"Send task",actionName:"replace-with-send-task",className:"bpmn-icon-send",target:{type:"bpmn:SendTask"}},{label:"Receive task",actionName:"replace-with-receive-task",className:"bpmn-icon-receive",target:{type:"bpmn:ReceiveTask"}},{label:"Manual task",actionName:"replace-with-manual-task",className:"bpmn-icon-manual",target:{type:"bpmn:ManualTask"}},{label:"Business rule task",actionName:"replace-with-rule-task",className:"bpmn-icon-business-rule",target:{type:"bpmn:BusinessRuleTask"}},{label:"Script task",actionName:"replace-with-script-task",className:"bpmn-icon-script",target:{type:"bpmn:ScriptTask"}},{label:"Call activity",actionName:"replace-with-call-activity",className:"bpmn-icon-call-activity",target:{type:"bpmn:CallActivity"}},{label:"Sub-process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}},{label:"Sub-process (expanded)",actionName:"replace-with-expanded-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Ad-hoc sub-process (collapsed)",actionName:"replace-with-collapsed-ad-hoc-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:AdHocSubProcess",isExpanded:!1}},{label:"Ad-hoc sub-process (expanded)",actionName:"replace-with-ad-hoc-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:AdHocSubProcess",isExpanded:!0}}],ds=[{label:"Data store reference",actionName:"replace-with-data-store-reference",className:"bpmn-icon-data-store",target:{type:"bpmn:DataStoreReference"}}],hs=[{label:"Data object reference",actionName:"replace-with-data-object-reference",className:"bpmn-icon-data-object",target:{type:"bpmn:DataObjectReference"}}],fs=[{label:"Message boundary event",actionName:"replace-with-message-boundary",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!0}},{label:"Timer boundary event",actionName:"replace-with-timer-boundary",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!0}},{label:"Escalation boundary event",actionName:"replace-with-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!0}},{label:"Conditional boundary event",actionName:"replace-with-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!0}},{label:"Error boundary event",actionName:"replace-with-error-boundary",className:"bpmn-icon-intermediate-event-catch-error",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ErrorEventDefinition",cancelActivity:!0}},{label:"Cancel boundary event",actionName:"replace-with-cancel-boundary",className:"bpmn-icon-intermediate-event-catch-cancel",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CancelEventDefinition",cancelActivity:!0}},{label:"Signal boundary event",actionName:"replace-with-signal-boundary",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!0}},{label:"Compensation boundary event",actionName:"replace-with-compensation-boundary",className:"bpmn-icon-intermediate-event-catch-compensation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CompensateEventDefinition",cancelActivity:!0}},{label:"Message boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-message-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!1}},{label:"Timer boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!1}},{label:"Escalation boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!1}},{label:"Conditional boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!1}},{label:"Signal boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!1}}],vs=[{label:"Message start event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition",isInterrupting:!0}},{label:"Timer start event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition",isInterrupting:!0}},{label:"Conditional start event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",isInterrupting:!0}},{label:"Signal start event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition",isInterrupting:!0}},{label:"Error start event",actionName:"replace-with-error-start",className:"bpmn-icon-start-event-error",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ErrorEventDefinition",isInterrupting:!0}},{label:"Escalation start event",actionName:"replace-with-escalation-start",className:"bpmn-icon-start-event-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",isInterrupting:!0}},{label:"Compensation start event",actionName:"replace-with-compensation-start",className:"bpmn-icon-start-event-compensation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:CompensateEventDefinition",isInterrupting:!0}},{label:"Message start event (non-interrupting)",actionName:"replace-with-non-interrupting-message-start",className:"bpmn-icon-start-event-non-interrupting-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition",isInterrupting:!1}},{label:"Timer start event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-start",className:"bpmn-icon-start-event-non-interrupting-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition",isInterrupting:!1}},{label:"Conditional start event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-start",className:"bpmn-icon-start-event-non-interrupting-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",isInterrupting:!1}},{label:"Signal start event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-start",className:"bpmn-icon-start-event-non-interrupting-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition",isInterrupting:!1}},{label:"Escalation start event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-start",className:"bpmn-icon-start-event-non-interrupting-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",isInterrupting:!1}}],gs=[{label:"Sequence flow",actionName:"replace-with-sequence-flow",className:"bpmn-icon-connection"},{label:"Default flow",actionName:"replace-with-default-flow",className:"bpmn-icon-default-flow"},{label:"Conditional flow",actionName:"replace-with-conditional-flow",className:"bpmn-icon-conditional-flow"}],ys=[{label:"Expanded pool/participant",actionName:"replace-with-expanded-pool",className:"bpmn-icon-participant",target:{type:"bpmn:Participant",isExpanded:!0}},{label:function(e){var t="Empty pool/participant";return e.children&&e.children.length&&(t+=" (removes content)"),t},actionName:"replace-with-collapsed-pool",className:"bpmn-icon-lane",target:{type:"bpmn:Participant",isExpanded:!1}}],bs={"bpmn:MessageEventDefinition":[{label:"Message start event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message intermediate catch event",actionName:"replace-with-message-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message intermediate throw event",actionName:"replace-with-message-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-message",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message end event",actionName:"replace-with-message-end",className:"bpmn-icon-end-event-message",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}}],"bpmn:TimerEventDefinition":[{label:"Timer start event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Timer intermediate catch event",actionName:"replace-with-timer-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}}],"bpmn:ConditionalEventDefinition":[{label:"Conditional start event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Conditional intermediate catch event",actionName:"replace-with-conditional-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}}],"bpmn:SignalEventDefinition":[{label:"Signal start event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal intermediate catch event",actionName:"replace-with-signal-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal intermediate throw event",actionName:"replace-with-signal-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-signal",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal end event",actionName:"replace-with-signal-end",className:"bpmn-icon-end-event-signal",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],"bpmn:ErrorEventDefinition":[{label:"Error start event",actionName:"replace-with-error-start",className:"bpmn-icon-start-event-error",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Error end event",actionName:"replace-with-error-end",className:"bpmn-icon-end-event-error",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}}],"bpmn:EscalationEventDefinition":[{label:"Escalation start event",actionName:"replace-with-escalation-start",className:"bpmn-icon-start-event-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Escalation intermediate throw event",actionName:"replace-with-escalation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-escalation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Escalation end event",actionName:"replace-with-escalation-end",className:"bpmn-icon-end-event-escalation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}}],"bpmn:CompensateEventDefinition":[{label:"Compensation start event",actionName:"replace-with-compensation-start",className:"bpmn-icon-start-event-compensation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Compensation intermediate throw event",actionName:"replace-with-compensation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-compensation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Compensation end event",actionName:"replace-with-compensation-end",className:"bpmn-icon-end-event-compensation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}}]};const Es='\n  <svg viewBox="0 0 2048 2048" xmlns="http://www.w3.org/2000/svg">\n    <g transform="translate(0 995.64)">\n      <path d="m1899 28.357c21.545 567.43-598.38 1023.5-1133.6 835.92-548.09-147.21-801.57-873.95-463.59-1330 302.62-480.3 1071.7-507.54 1407.6-49.847 122.14 153.12 190.07 348.07 189.59 543.91z" fill="none" stroke="currentColor" stroke-dasharray="418.310422, 361.2328165" stroke-linecap="round" stroke-width="100"/>\n    </g>\n  </svg>',xs='\n  <svg viewBox="0 0 2048 2048" xmlns="http://www.w3.org/2000/svg">\n     <g transform="translate(0 995.64)" fill="none" stroke="currentColor" stroke-linecap="round">\n        <circle cx="1024" cy="28.357" r="875" stroke-dasharray="418.310422, 361.2328165" stroke-width="100"/>\n        <circle cx="1024" cy="28.357" r="685" stroke-dasharray="348.31044857,261.23283643" stroke-dashoffset="500" stroke-width="100"/>\n     </g>\n  </svg>';function ws(e,t,n,i,a,r,o,s){this._bpmnFactory=e,this._popupMenu=t,this._modeling=n,this._moddle=i,this._bpmnReplace=a,this._rules=r,this._translate=o,this._moddleCopy=s,this._register()}ws.$inject=["bpmnFactory","popupMenu","modeling","moddle","bpmnReplace","rules","translate","moddleCopy"],ws.prototype._register=function(){this._popupMenu.registerProvider("bpmn-replace",this)},ws.prototype.getPopupMenuEntries=function(e){var t,n=e.businessObject,i=this._rules,a=[],o=[];if((0,r.cy)(e)||!i.allowed("shape.replace",{element:e}))return{};var s,c=(s=e,function(e){var t=e.target,n=(0,ae.Cf)(s),i=n.eventDefinitions&&n.eventDefinitions[0],a=n.$type===t.type,r=(i&&i.$type)===t.eventDefinitionType,o=!!t.triggeredByEvent==!!n.triggeredByEvent,c=void 0===t.isExpanded||t.isExpanded===(0,xe.Av)(s);return!(a&&r&&o&&c)});return(0,ae.is)(n,"bpmn:DataObjectReference")?this._createEntries(e,ds):(0,ae.is)(n,"bpmn:DataStoreReference")&&!(0,ae.is)(e.parent,"bpmn:Collaboration")?this._createEntries(e,hs):((0,ae.is)(n,"bpmn:Event")&&!(0,ae.is)(n,"bpmn:BoundaryEvent")&&(t=n.get("eventDefinitions")[0]?.$type,a=bs[t]||[],!(0,xe.Q1)(n.$parent)&&(0,ae.is)(n.$parent,"bpmn:SubProcess")&&(a=(0,r.pb)(a,(function(e){return"bpmn:StartEvent"!==e.target.type})))),(0,ae.is)(n,"bpmn:StartEvent")&&!(0,ae.is)(n.$parent,"bpmn:SubProcess")?(o=(0,r.pb)(is.concat(a),c),this._createEntries(e,o)):(0,ae.is)(n,"bpmn:Participant")?(o=(0,r.pb)(ys,(function(t){return(0,xe.Av)(e)!==t.target.isExpanded})),this._createEntries(e,o)):(0,ae.is)(n,"bpmn:StartEvent")&&(0,xe.Q1)(n.$parent)?(o=(0,r.pb)(vs.concat(a),(function(e){var t=!1!==e.target.isInterrupting,i=n.isInterrupting===t;return c(e)||!c(e)&&!i})),this._createEntries(e,o)):(0,ae.is)(n,"bpmn:StartEvent")&&!(0,xe.Q1)(n.$parent)&&(0,ae.is)(n.$parent,"bpmn:SubProcess")?(o=(0,r.pb)(as.concat(a),c),this._createEntries(e,o)):(0,ae.is)(n,"bpmn:EndEvent")?(o=(0,r.pb)(os.concat(a),(function(e){return!("bpmn:CancelEventDefinition"==e.target.eventDefinitionType&&!(0,ae.is)(n.$parent,"bpmn:Transaction"))&&c(e)})),this._createEntries(e,o)):(0,ae.is)(n,"bpmn:BoundaryEvent")?(o=(0,r.pb)(fs,(function(e){var t=e.target;if("bpmn:CancelEventDefinition"==t.eventDefinitionType&&!(0,ae.is)(n.attachedToRef,"bpmn:Transaction"))return!1;var i=!1!==t.cancelActivity,a=n.cancelActivity==i;return c(e)||!c(e)&&!a})),this._createEntries(e,o)):(0,ae.is)(n,"bpmn:IntermediateCatchEvent")||(0,ae.is)(n,"bpmn:IntermediateThrowEvent")?(o=(0,r.pb)(rs.concat(a),c),this._createEntries(e,o)):(0,ae.is)(n,"bpmn:Gateway")?(o=(0,r.pb)(ss,c),this._createEntries(e,o)):(0,ae.is)(n,"bpmn:Transaction")?(o=(0,r.pb)(ls,c),this._createEntries(e,o)):(0,xe.Q1)(n)&&(0,xe.Av)(e)?(o=(0,r.pb)(ms,c),this._createEntries(e,o)):(0,ae.is)(n,"bpmn:AdHocSubProcess")&&(0,xe.Av)(e)?(o=(0,r.pb)(ps,c),this._createEntries(e,o)):(0,ae.is)(n,"bpmn:SubProcess")&&(0,xe.Av)(e)?(o=(0,r.pb)(cs,c),this._createEntries(e,o)):(0,ae.is)(n,"bpmn:SubProcess")&&!(0,xe.Av)(e)?(o=(0,r.pb)(us,(function(t){return t.target.type===e.type==(!0===t.target.isExpanded)})),this._createEntries(e,o)):(0,ae.is)(n,"bpmn:SequenceFlow")?this._createSequenceFlowEntries(e,gs):(0,ae.is)(n,"bpmn:FlowNode")?(o=(0,r.pb)(us,c),this._createEntries(e,o)):{})},ws.prototype.getPopupMenuHeaderEntries=function(e){var t={};return(0,ae.is)(e,"bpmn:Activity")&&!(0,xe.Q1)(e)&&(t={...t,...this._getLoopCharacteristicsHeaderEntries(e)}),(0,ae.is)(e,"bpmn:DataObjectReference")&&(t={...t,...this._getCollectionHeaderEntries(e)}),(0,ae.is)(e,"bpmn:Participant")&&(t={...t,...this._getParticipantMultiplicityHeaderEntries(e)}),fi(e)&&(t={...t,...this._getNonInterruptingHeaderEntries(e)}),t},ws.prototype._createEntries=function(e,t){var n={},i=this;return(0,r.jJ)(t,(function(t){n[t.actionName]=i._createEntry(t,e)})),n},ws.prototype._createSequenceFlowEntries=function(e,t){var n=(0,ae.Cf)(e),i={},a=this._modeling,o=this._moddle,s=this;return(0,r.jJ)(t,(function(t){switch(t.actionName){case"replace-with-default-flow":n.sourceRef.default!==n&&((0,ae.is)(n.sourceRef,"bpmn:ExclusiveGateway")||(0,ae.is)(n.sourceRef,"bpmn:InclusiveGateway")||(0,ae.is)(n.sourceRef,"bpmn:ComplexGateway")||(0,ae.is)(n.sourceRef,"bpmn:Activity"))&&(i={...i,[t.actionName]:s._createEntry(t,e,(function(){a.updateProperties(e.source,{default:n})}))});break;case"replace-with-conditional-flow":!n.conditionExpression&&(0,ae.is)(n.sourceRef,"bpmn:Activity")&&(i={...i,[t.actionName]:s._createEntry(t,e,(function(){var t=o.create("bpmn:FormalExpression",{body:""});a.updateProperties(e,{conditionExpression:t})}))});break;default:(0,ae.is)(n.sourceRef,"bpmn:Activity")&&n.conditionExpression&&(i={...i,[t.actionName]:s._createEntry(t,e,(function(){a.updateProperties(e,{conditionExpression:void 0})}))}),((0,ae.is)(n.sourceRef,"bpmn:ExclusiveGateway")||(0,ae.is)(n.sourceRef,"bpmn:InclusiveGateway")||(0,ae.is)(n.sourceRef,"bpmn:ComplexGateway")||(0,ae.is)(n.sourceRef,"bpmn:Activity"))&&n.sourceRef.default===n&&(i={...i,[t.actionName]:s._createEntry(t,e,(function(){a.updateProperties(e.source,{default:void 0})}))})}})),i},ws.prototype._createEntry=function(e,t,n){var i=this._translate,a=this._bpmnReplace.replaceElement,r=e.label;return r&&"function"==typeof r&&(r=r(t)),n=n||function(){return a(t,e.target)},{label:i(r),className:e.className,action:n}},ws.prototype._getLoopCharacteristicsHeaderEntries=function(e){var t=this,n=this._translate;function i(n,i){if(i.active)t._modeling.updateProperties(e,{loopCharacteristics:void 0});else{var a=e.businessObject.get("loopCharacteristics");a&&(0,ae.is)(a,i.options.loopCharacteristics)?t._modeling.updateModdleProperties(e,a,{isSequential:i.options.isSequential}):(a=t._moddle.create(i.options.loopCharacteristics,{isSequential:i.options.isSequential}),t._modeling.updateProperties(e,{loopCharacteristics:a}))}}var a,r,o,s=(0,ae.Cf)(e).loopCharacteristics;return s&&(a=s.isSequential,r=void 0===s.isSequential,o=void 0!==s.isSequential&&!s.isSequential),{"toggle-parallel-mi":{className:"bpmn-icon-parallel-mi-marker",title:n("Parallel multi-instance"),active:o,action:i,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!1}},"toggle-sequential-mi":{className:"bpmn-icon-sequential-mi-marker",title:n("Sequential multi-instance"),active:a,action:i,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!0}},"toggle-loop":{className:"bpmn-icon-loop-marker",title:n("Loop"),active:r,action:i,options:{loopCharacteristics:"bpmn:StandardLoopCharacteristics"}}}},ws.prototype._getCollectionHeaderEntries=function(e){var t=this,n=this._translate,i=e.businessObject.dataObjectRef;if(!i)return{};var a=i.isCollection;return{"toggle-is-collection":{className:"bpmn-icon-parallel-mi-marker",title:n("Collection"),active:a,action:function(n,a){t._modeling.updateModdleProperties(e,i,{isCollection:!a.active})}}}},ws.prototype._getParticipantMultiplicityHeaderEntries=function(e){var t=this,n=this._bpmnFactory,i=this._translate,a=e.businessObject.participantMultiplicity;return{"toggle-participant-multiplicity":{className:"bpmn-icon-parallel-mi-marker",title:i("Participant multiplicity"),active:!!a,action:function(i,a){var r;a.active||(r=n.create("bpmn:ParticipantMultiplicity")),t._modeling.updateProperties(e,{participantMultiplicity:r})}}}},ws.prototype._getNonInterruptingHeaderEntries=function(e){const t=this._translate,n=(0,ae.Cf)(e),i=this,a=vi(e),r=(0,ae.is)(e,"bpmn:BoundaryEvent")?xs:Es,o=!n[a];return{"toggle-non-interrupting":{imageHtml:r,title:t("Toggle non-interrupting"),active:o,action:function(){i._modeling.updateProperties(e,{[a]:!!o})}}}};const _s={__depends__:[xt.A,mr,jt],__init__:["replaceMenuProvider"],replaceMenuProvider:["type",ws]};function Os(e,t,n,i,a,r,o,s,c,p,l,m,u){e=e||{},i.registerProvider(this),this._contextPad=i,this._modeling=a,this._elementFactory=r,this._connect=o,this._create=s,this._popupMenu=c,this._canvas=p,this._rules=l,this._translate=m,this._eventBus=n,this._appendPreview=u,!1!==e.autoPlace&&(this._autoPlace=t.get("autoPlace",!1)),n.on("create.end",250,(function(e){var t=e.context.shape;if((0,Ii.Io)(e)&&i.isOpen(t)){var n=i.getEntries(t);n.replace&&n.replace.action.click(e,t)}})),n.on("contextPad.close",(function(){u.cleanUp()}))}function Ss(e,t,n){var i=e.$instanceOf(t),a=!1,o=e.eventDefinitions||[];return(0,r.jJ)(o,(function(e){e.$type===n&&(a=!0)})),i&&a}Os.$inject=["config.contextPad","injector","eventBus","contextPad","modeling","elementFactory","connect","create","popupMenu","canvas","rules","translate","appendPreview"],Os.prototype.getMultiElementContextPadEntries=function(e){var t=this._modeling,n={};return this._isDeleteAllowed(e)&&(0,r.kp)(n,{delete:{group:"edit",className:"bpmn-icon-trash",title:this._translate("Delete"),action:{click:function(e,n){t.removeElements(n.slice())}}}}),n},Os.prototype._isDeleteAllowed=function(e){var t=this._rules.allowed("elements.delete",{elements:e});return(0,r.cy)(t)?(0,r.Si)(e,(e=>t.includes(e))):t},Os.prototype.getContextPadEntries=function(e){var t=this._contextPad,n=this._modeling,i=this._elementFactory,a=this._connect,o=this._create,s=this._popupMenu,c=this._autoPlace,p=this._translate,l=this._appendPreview,m={};if("label"===e.type)return this._isDeleteAllowed([e])&&(0,r.kp)(m,f()),m;var u=e.businessObject;function d(e,t){a.start(e,t)}function h(e,t){n.removeElements([t])}function f(){return{delete:{group:"edit",className:"bpmn-icon-trash",title:p("Delete"),action:{click:h}}}}function v(e,t,n,a){function s(t,n){var s=i.createShape((0,r.kp)({type:e},a));o.start(t,s,{source:n})}var p=c?function(t,n){var o=i.createShape((0,r.kp)({type:e},a));c.append(n,o)}:s,m=c?function(t,n){return l.create(n,e,a),()=>{l.cleanUp()}}:null;return{group:"model",className:t,title:n,action:{dragstart:s,click:p,hover:m}}}function g(e){return function(i,a){n.splitLane(a,e),t.open(a,!0)}}if((0,ae.f7)(u,["bpmn:Lane","bpmn:Participant"])&&(0,xe.Av)(e)){var y=Pn(e);(0,r.kp)(m,{"lane-insert-above":{group:"lane-insert-above",className:"bpmn-icon-lane-insert-above",title:p("Add lane above"),action:{click:function(e,t){n.addLane(t,"top")}}}}),y.length<2&&(((0,xe.$b)(e)?e.height>=120:e.width>=120)&&(0,r.kp)(m,{"lane-divide-two":{group:"lane-divide",className:"bpmn-icon-lane-divide-two",title:p("Divide into two lanes"),action:{click:g(2)}}}),((0,xe.$b)(e)?e.height>=180:e.width>=180)&&(0,r.kp)(m,{"lane-divide-three":{group:"lane-divide",className:"bpmn-icon-lane-divide-three",title:p("Divide into three lanes"),action:{click:g(3)}}})),(0,r.kp)(m,{"lane-insert-below":{group:"lane-insert-below",className:"bpmn-icon-lane-insert-below",title:p("Add lane below"),action:{click:function(e,t){n.addLane(t,"bottom")}}}})}return(0,ae.is)(u,"bpmn:FlowNode")&&((0,ae.is)(u,"bpmn:EventBasedGateway")?(0,r.kp)(m,{"append.receive-task":v("bpmn:ReceiveTask","bpmn-icon-receive-task",p("Append receive task")),"append.message-intermediate-event":v("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-message",p("Append message intermediate catch event"),{eventDefinitionType:"bpmn:MessageEventDefinition"}),"append.timer-intermediate-event":v("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-timer",p("Append timer intermediate catch event"),{eventDefinitionType:"bpmn:TimerEventDefinition"}),"append.condition-intermediate-event":v("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-condition",p("Append conditional intermediate catch event"),{eventDefinitionType:"bpmn:ConditionalEventDefinition"}),"append.signal-intermediate-event":v("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-signal",p("Append signal intermediate catch event"),{eventDefinitionType:"bpmn:SignalEventDefinition"})}):Ss(u,"bpmn:BoundaryEvent","bpmn:CompensateEventDefinition")?(0,r.kp)(m,{"append.compensation-activity":v("bpmn:Task","bpmn-icon-task",p("Append compensation activity"),{isForCompensation:!0})}):(0,ae.is)(u,"bpmn:EndEvent")||u.isForCompensation||Ss(u,"bpmn:IntermediateThrowEvent","bpmn:LinkEventDefinition")||(0,xe.Q1)(u)||(0,r.kp)(m,{"append.end-event":v("bpmn:EndEvent","bpmn-icon-end-event-none",p("Append end event")),"append.gateway":v("bpmn:ExclusiveGateway","bpmn-icon-gateway-none",p("Append gateway")),"append.append-task":v("bpmn:Task","bpmn-icon-task",p("Append task")),"append.intermediate-event":v("bpmn:IntermediateThrowEvent","bpmn-icon-intermediate-event-none",p("Append intermediate/boundary event"))})),s.isEmpty(e,"bpmn-replace")||(0,r.kp)(m,{replace:{group:"edit",className:"bpmn-icon-screw-wrench",title:p("Change element"),action:{click:function(e,n){var i=(0,r.kp)(function(e){var n=t.getPad(e).html.getBoundingClientRect();return{x:n.left,y:n.bottom+5}}(n),{cursor:{x:e.x,y:e.y}});s.open(n,"bpmn-replace",i,{title:p("Change element"),width:300,search:!0})}}}}),(0,ae.is)(u,"bpmn:SequenceFlow")&&(0,r.kp)(m,{"append.text-annotation":v("bpmn:TextAnnotation","bpmn-icon-text-annotation",p("Add text annotation"))}),(0,ae.is)(u,"bpmn:MessageFlow")&&(0,r.kp)(m,{"append.text-annotation":v("bpmn:TextAnnotation","bpmn-icon-text-annotation",p("Add text annotation"))}),(0,ae.f7)(u,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference"])&&(0,r.kp)(m,{"append.text-annotation":v("bpmn:TextAnnotation","bpmn-icon-text-annotation",p("Add text annotation")),connect:{group:"connect",className:"bpmn-icon-connection-multi",title:p("Connect to other element"),action:{click:d,dragstart:d}}}),(0,ae.is)(u,"bpmn:TextAnnotation")&&(0,r.kp)(m,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:p("Connect using association"),action:{click:d,dragstart:d}}}),(0,ae.f7)(u,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&(0,r.kp)(m,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:p("Connect using data input association"),action:{click:d,dragstart:d}}}),(0,ae.is)(u,"bpmn:Group")&&(0,r.kp)(m,{"append.text-annotation":v("bpmn:TextAnnotation","bpmn-icon-text-annotation",p("Add text annotation"))}),this._isDeleteAllowed([e])&&(0,r.kp)(m,f()),m};const As={__depends__:[ts,ns.A,Et.A,dt.A,Gt.A,Wa.A,_s],__init__:["contextPadProvider"],contextPadProvider:["type",Os]};var ks=n(27855);function Cs(e){At.A.call(this,e)}Cs.$inject=["eventBus"],(0,i.A)(Cs,At.A),Cs.prototype.init=function(){this.addRule("elements.distribute",(function(e){var t=e.elements;return t=(0,r.pb)(t,(function(e){var t=(0,ae.f7)(e,["bpmn:Association","bpmn:BoundaryEvent","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:Lane","bpmn:MessageFlow","bpmn:SequenceFlow","bpmn:TextAnnotation"]);return!(e.labelTarget||t)})),!((t=(0,kt.wT)(t)).length<3)&&t}))};const Ps='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">\n                <polyline points="450 400 450 150 1350 150 1350 400" style="fill:none;stroke:currentColor;stroke-width:100;stroke-linejoin:round;"/>\n                <rect x="150" y="450" width="600" height="1200" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>\n                <rect x="1050" y="450" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>\n              </svg>',Ts='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">\n              <polyline points="400 1350 150 1350 150 450 400 450" style="fill:none;stroke:currentColor;stroke-width:100;stroke-linejoin:round;"/>\n              <rect x="450" y="150" width="1200" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>\n              <rect x="450" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>\n            </svg>';function Rs(e,t,n,i){this._distributeElements=t,this._translate=n,this._popupMenu=e,this._rules=i,e.registerProvider("align-elements",900,this)}Rs.$inject=["popupMenu","distributeElements","translate","rules"],Rs.prototype.getPopupMenuEntries=function(e){var t={};return this._isAllowed(e)&&(0,r.kp)(t,this._getEntries(e)),t},Rs.prototype._isAllowed=function(e){return this._rules.allowed("elements.distribute",{elements:e})},Rs.prototype._getEntries=function(e){var t=this._distributeElements,n=this._translate,i=this._popupMenu;return{"distribute-elements-horizontal":{group:"distribute",title:n("Distribute elements horizontally"),className:"bjs-align-elements-menu-entry",imageHtml:Ps,action:function(n,a){t.trigger(e,"horizontal"),i.close()}},"distribute-elements-vertical":{group:"distribute",title:n("Distribute elements vertically"),imageHtml:Ts,action:function(n,a){t.trigger(e,"vertical"),i.close()}}}};const Ds={__depends__:[xt.A,ks.A],__init__:["bpmnDistributeElements","distributeElementsMenuProvider"],bpmnDistributeElements:["type",Cs],distributeElementsMenuProvider:["type",Rs]};var Ns=n(88354),$s=n(46622);function Ms(e){e.invoke($s.A,this)}(0,i.A)(Ms,$s.A),Ms.$inject=["injector"],Ms.prototype._registerDefaultActions=function(e){$s.A.prototype._registerDefaultActions.call(this,e);var t=e.get("canvas",!1),n=e.get("elementRegistry",!1),i=e.get("selection",!1),a=e.get("spaceTool",!1),o=e.get("lassoTool",!1),s=e.get("handTool",!1),c=e.get("globalConnect",!1),p=e.get("distributeElements",!1),l=e.get("alignElements",!1),m=e.get("directEditing",!1),u=e.get("searchPad",!1),d=e.get("modeling",!1),h=e.get("contextPad",!1);t&&n&&i&&this._registerAction("selectElements",(function(){var e=t.getRootElement(),a=n.filter((function(t){return t!==e}));return i.select(a),a})),a&&this._registerAction("spaceTool",(function(){a.toggle()})),o&&this._registerAction("lassoTool",(function(){o.toggle()})),s&&this._registerAction("handTool",(function(){s.toggle()})),c&&this._registerAction("globalConnectTool",(function(){c.toggle()})),i&&p&&this._registerAction("distributeElements",(function(e){var t=i.get(),n=e.type;t.length&&p.trigger(t,n)})),i&&l&&this._registerAction("alignElements",(function(e){var t=i.get(),n=[],a=e.type;t.length&&(n=(0,r.pb)(t,(function(e){return!(0,ae.is)(e,"bpmn:Lane")})),l.trigger(n,a))})),i&&d&&this._registerAction("setColor",(function(e){var t=i.get();t.length&&d.setColor(t,e)})),i&&m&&this._registerAction("directEditing",(function(){var e=i.get();e.length&&m.activate(e[0])})),u&&this._registerAction("find",(function(){u.toggle()})),t&&d&&this._registerAction("moveToOrigin",(function(){var e,i,a=t.getRootElement();i=(0,ae.is)(a,"bpmn:Collaboration")?n.filter((function(e){return(0,ae.is)(e.parent,"bpmn:Collaboration")})):n.filter((function(e){return e!==a&&!(0,ae.is)(e.parent,"bpmn:SubProcess")})),e=(0,kt.U7)(i),d.moveElements(i,{x:-e.x,y:-e.y},a)})),i&&h&&this._registerAction("replaceElement",(function(e){h.triggerEntry("replace","click",e)}))};const Bs={__depends__:[Ns.A],editorActions:["type",Ms]};function js(e){e.on(["create.init","shape.move.init"],(function(e){var t=e.context,n=e.shape;(0,ae.f7)(n,["bpmn:Participant","bpmn:SubProcess","bpmn:TextAnnotation"])&&(t.gridSnappingContext||(t.gridSnappingContext={}),t.gridSnappingContext.snapLocation="top-left")}))}js.$inject=["eventBus"];var Fs=n(54964);function Qs(e,t,n){e.on("autoPlace",2e3,(function(e){var i=e.source,a=(0,Ge.pp)(i),r=e.shape,o=$t(i,r,n);return["x","y"].forEach((function(e){var n={};o[e]!==a[e]&&(o[e]>a[e]?n.min=o[e]:n.max=o[e],(0,ae.is)(r,"bpmn:TextAnnotation")&&(function(e){return"x"===e}(e)?n.offset=-r.width/2:n.offset=-r.height/2),o[e]=t.snapValue(o[e],n))})),o}))}function Is(e,t,n){t.on(["create.start","shape.move.start"],1750,(function(t){var i=t.context,a=i.shape,r=e.getRootElement();(0,ae.is)(a,"bpmn:Participant")&&(0,ae.is)(r,"bpmn:Process")&&r.children.length&&i.createConstraints&&(a.width=n.snapValue(a.width,{min:a.width}),a.height=n.snapValue(a.height,{min:a.height}))}))}function Ls(e,t,n){et.A.call(this,e),this._gridSnapping=t;var i=this;this.postExecuted(["connection.create","connection.layout"],3e3,(function(e){var t=e.context,a=t.connection,r=t.hints||{},o=a.waypoints;r.connectionStart||r.connectionEnd||!1===r.createElementsBehavior||function(e){return e.length>3}(o)&&n.updateWaypoints(a,i.snapMiddleSegments(o))}))}function zs(e,t,n){var i=(0,Eo.ke)(t,n),a={};return function(e){return"h"===e}(i)&&(a.y=e.snapValue(t.y)),function(e){return"v"===e}(i)&&(a.x=e.snapValue(t.x)),("x"in a||"y"in a)&&(t=(0,r.kp)({},t,a),n=(0,r.kp)({},n,a)),[t,n]}Qs.$inject=["eventBus","gridSnapping","elementRegistry"],Is.$inject=["canvas","eventBus","gridSnapping"],Ls.$inject=["eventBus","gridSnapping","modeling"],(0,i.A)(Ls,et.A),Ls.prototype.snapMiddleSegments=function(e){var t,n=this._gridSnapping;e=e.slice();for(var i=1;i<e.length-2;i++)t=zs(n,e[i],e[i+1]),e[i]=t[0],e[i+1]=t[1];return e};const Xs={__init__:["gridSnappingAutoPlaceBehavior","gridSnappingParticipantBehavior","gridSnappingLayoutConnectionBehavior"],gridSnappingAutoPlaceBehavior:["type",Qs],gridSnappingParticipantBehavior:["type",Is],gridSnappingLayoutConnectionBehavior:["type",Ls]},Vs={__depends__:[Fs.A,Xs],__init__:["bpmnGridSnapping"],bpmnGridSnapping:["type",js]};function Ys(e,t){this._interactionEvents=t;var n=this;e.on(["interactionEvents.createHit","interactionEvents.updateHit"],(function(e){var t=e.element,i=e.gfx;return(0,ae.is)(t,"bpmn:Lane")?n._createParticipantHit(t,i):(0,ae.is)(t,"bpmn:Participant")?(0,xe.Av)(t)?n._createParticipantHit(t,i):n._createDefaultHit(t,i):(0,ae.is)(t,"bpmn:SubProcess")?(0,xe.Av)(t)?n._createSubProcessHit(t,i):n._createDefaultHit(t,i):void 0}))}Ys.$inject=["eventBus","interactionEvents"],Ys.prototype._createDefaultHit=function(e,t){return this._interactionEvents.removeHits(t),this._interactionEvents.createDefaultHit(e,t),!0},Ys.prototype._createParticipantHit=function(e,t){this._interactionEvents.removeHits(t),this._interactionEvents.createBoxHit(t,"no-move",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"click-stroke",{width:e.width,height:e.height});var n=(0,xe.$b)(e)?{width:30,height:e.height}:{width:e.width,height:30};return this._interactionEvents.createBoxHit(t,"all",n),!0},Ys.prototype._createSubProcessHit=function(e,t){return this._interactionEvents.removeHits(t),this._interactionEvents.createBoxHit(t,"no-move",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"click-stroke",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"all",{width:e.width,height:30}),!0};const Gs={__init__:["bpmnInteractionEvents"],bpmnInteractionEvents:["type",Ys]};var Ws=n(76137),qs=n(29725);function Hs(e){e.invoke(qs.Ay,this)}(0,i.A)(Hs,qs.Ay),Hs.$inject=["injector"],Hs.prototype.registerBindings=function(e,t){function n(n,i){t.isRegistered(n)&&e.addListener(i)}qs.Ay.prototype.registerBindings.call(this,e,t),n("selectElements",(function(n){var i=n.keyEvent;if(e.isKey(["a","A"],i)&&e.isCmd(i))return t.trigger("selectElements"),!0})),n("find",(function(n){var i=n.keyEvent;if(e.isKey(["f","F"],i)&&e.isCmd(i))return t.trigger("find"),!0})),n("spaceTool",(function(n){var i=n.keyEvent;if(!e.hasModifier(i))return e.isKey(["s","S"],i)?(t.trigger("spaceTool"),!0):void 0})),n("lassoTool",(function(n){var i=n.keyEvent;if(!e.hasModifier(i))return e.isKey(["l","L"],i)?(t.trigger("lassoTool"),!0):void 0})),n("handTool",(function(n){var i=n.keyEvent;if(!e.hasModifier(i))return e.isKey(["h","H"],i)?(t.trigger("handTool"),!0):void 0})),n("globalConnectTool",(function(n){var i=n.keyEvent;if(!e.hasModifier(i))return e.isKey(["c","C"],i)?(t.trigger("globalConnectTool"),!0):void 0})),n("directEditing",(function(n){var i=n.keyEvent;if(!e.hasModifier(i))return e.isKey(["e","E"],i)?(t.trigger("directEditing"),!0):void 0})),n("replaceElement",(function(n){var i=n.keyEvent;if(!e.hasModifier(i))return e.isKey(["r","R"],i)?(t.trigger("replaceElement",i),!0):void 0}))};const Js={__depends__:[Ws.A],__init__:["keyboardBindings"],keyboardBindings:["type",Hs]};var Us=n(6188),Zs=n(60188);function Ks(e,t,n,i,a,r,o){function s(e,t){(t||(0,ae.f7)(e,["bpmn:Task","bpmn:TextAnnotation","bpmn:Participant"])||ec(e))&&i.activate(e)}this._bpmnFactory=t,this._canvas=n,this._modeling=a,this._textRenderer=o,i.registerProvider(this),e.on("element.dblclick",(function(e){s(e.element,!0)})),e.on(["autoPlace.start","canvas.viewbox.changing","drag.init","element.mousedown","popupMenu.open","root.set","selection.changed"],(function(){i.isActive()&&i.complete()})),e.on(["shape.remove","connection.remove"],2e3,(function(e){i.isActive(e.element)&&i.cancel()})),e.on(["commandStack.changed"],(function(e){i.isActive()&&i.cancel()})),e.on("directEditing.activate",(function(e){r.removeResizers()})),e.on("create.end",500,(function(e){var t=e.context,n=t.shape,i=e.context.canExecute;e.isTouch||i&&(t.hints&&!1===t.hints.createElementsBehavior||s(n))})),e.on("autoPlace.end",500,(function(e){s(e.shape)}))}function ec(e){return(0,ae.is)(e,"bpmn:SubProcess")&&!(0,xe.Av)(e)}Ks.$inject=["eventBus","bpmnFactory","canvas","directEditing","modeling","resizeHandles","textRenderer"],Ks.prototype.activate=function(e){var t=(0,we.p9)(e);if(void 0!==t){var n={text:t},i=this.getEditingBBox(e);(0,r.kp)(n,i);var a={},o=n.style||{};return(0,r.kp)(o,{backgroundColor:null,border:null}),((0,ae.f7)(e,["bpmn:Task","bpmn:Participant","bpmn:Lane","bpmn:CallActivity"])||ec(e))&&(0,r.kp)(a,{centerVertically:!0}),(0,we.UC)(e)&&((0,r.kp)(a,{autoResize:!0}),(0,r.kp)(o,{backgroundColor:"#ffffff",border:"1px solid #ccc"})),(0,ae.is)(e,"bpmn:TextAnnotation")&&((0,r.kp)(a,{resizable:!0,autoResize:!0}),(0,r.kp)(o,{backgroundColor:"#ffffff",border:"1px solid #ccc"})),(0,r.kp)(n,{options:a,style:o}),n}},Ks.prototype.getEditingBBox=function(e){var t=this._canvas,n=e.label||e,i=t.getAbsoluteBBox(n),a=i.x+i.width/2,o=i.y+i.height/2,s={x:i.x,y:i.y},c=t.zoom(),p=this._textRenderer.getDefaultStyle(),l=this._textRenderer.getExternalStyle(),m=l.fontSize*c,u=l.lineHeight,d=p.fontSize*c,h=p.lineHeight,f={fontFamily:this._textRenderer.getDefaultStyle().fontFamily,fontWeight:this._textRenderer.getDefaultStyle().fontWeight};if((0,ae.is)(e,"bpmn:Lane")||function(e){return(0,ae.is)(e,"bpmn:Participant")&&(0,xe.Av)(e)}(e)){var v=(0,xe.$b)(e),g=v?{width:i.height,height:30*c,x:i.x-i.height/2+15*c,y:o-30*c/2}:{width:i.width,height:30*c};(0,r.kp)(s,g),(0,r.kp)(f,{fontSize:d+"px",lineHeight:h,paddingTop:7*c+"px",paddingBottom:7*c+"px",paddingLeft:5*c+"px",paddingRight:5*c+"px",transform:v?"rotate(-90deg)":null})}if(function(e){return(0,ae.is)(e,"bpmn:Participant")&&!(0,xe.Av)(e)}(e)){var y=(0,xe.$b)(e),b=y?{width:i.width,height:i.height}:{width:i.height,height:i.width,x:a-i.height/2,y:o-i.width/2};(0,r.kp)(s,b),(0,r.kp)(f,{fontSize:d+"px",lineHeight:h,paddingTop:7*c+"px",paddingBottom:7*c+"px",paddingLeft:5*c+"px",paddingRight:5*c+"px",transform:y?null:"rotate(-90deg)"})}((0,ae.f7)(e,["bpmn:Task","bpmn:CallActivity"])||ec(e))&&((0,r.kp)(s,{width:i.width,height:i.height}),(0,r.kp)(f,{fontSize:d+"px",lineHeight:h,paddingTop:7*c+"px",paddingBottom:7*c+"px",paddingLeft:5*c+"px",paddingRight:5*c+"px"})),function(e){return(0,ae.is)(e,"bpmn:SubProcess")&&(0,xe.Av)(e)}(e)&&((0,r.kp)(s,{width:i.width,x:i.x}),(0,r.kp)(f,{fontSize:d+"px",lineHeight:h,paddingTop:7*c+"px",paddingBottom:7*c+"px",paddingLeft:5*c+"px",paddingRight:5*c+"px"}));var E=90*c,x=7*c,w=4*c;if(n.labelTarget&&((0,r.kp)(s,{width:E,height:i.height+x+w,x:a-E/2,y:i.y-x}),(0,r.kp)(f,{fontSize:m+"px",lineHeight:u,paddingTop:x+"px",paddingBottom:w+"px"})),(0,we.UC)(n)&&!(0,we.ur)(n)&&!(0,_e.J2)(n)){var _=(0,we.QX)(e),O=t.getAbsoluteBBox({x:_.x,y:_.y,width:0,height:0}),S=m+x+w;(0,r.kp)(s,{width:E,height:S,x:O.x-E/2,y:O.y-S/2}),(0,r.kp)(f,{fontSize:m+"px",lineHeight:u,paddingTop:x+"px",paddingBottom:w+"px"})}return(0,ae.is)(e,"bpmn:TextAnnotation")&&((0,r.kp)(s,{width:i.width,height:i.height,minWidth:30*c,minHeight:10*c}),(0,r.kp)(f,{textAlign:"left",paddingTop:5*c+"px",paddingBottom:7*c+"px",paddingLeft:7*c+"px",paddingRight:5*c+"px",fontSize:d+"px",lineHeight:h})),{bounds:s,style:f}},Ks.prototype.update=function(e,t,n,i){var a,r,o;(0,ae.is)(e,"bpmn:TextAnnotation")&&(r=this._canvas.getAbsoluteBBox(e),a={x:e.x,y:e.y,width:e.width/r.width*i.width,height:e.height/r.height*i.height}),(o=t)&&o.trim()||(t=null),this._modeling.updateLabel(e,t,a)};var tc="djs-element-hidden",nc="djs-label-hidden";function ic(e,t,n){var i,a,r,o=this,s=t.getDefaultLayer();e.on("directEditing.activate",(function(e){var c=e.active;if(i=c.element.label||c.element,(0,ae.is)(i,"bpmn:TextAnnotation")){a=t.getAbsoluteBBox(i),r=I("g");var p=n.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:i.width,containerHeight:i.height,position:{mx:0,my:0}}),l=o.path=I("path");$(l,{d:p,strokeWidth:2,stroke:ac(i)}),R(r,l),R(s,r),(0,Me.Tl)(r,i.x,i.y)}(0,ae.is)(i,"bpmn:TextAnnotation")||i.labelTarget?t.addMarker(i,tc):((0,ae.is)(i,"bpmn:Task")||(0,ae.is)(i,"bpmn:CallActivity")||(0,ae.is)(i,"bpmn:SubProcess")||(0,ae.is)(i,"bpmn:Participant")||(0,ae.is)(i,"bpmn:Lane"))&&t.addMarker(i,nc)})),e.on("directEditing.resize",(function(e){if((0,ae.is)(i,"bpmn:TextAnnotation")){var t=e.height,r=e.dy,s=Math.max(i.height/a.height*(t+r),0),c=n.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:i.width,containerHeight:s,position:{mx:0,my:0}});$(o.path,{d:c})}})),e.on(["directEditing.complete","directEditing.cancel"],(function(e){var n=e.active;n&&(t.removeMarker(n.element.label||n.element,tc),t.removeMarker(i,nc)),i=void 0,a=void 0,r&&(W(r),r=void 0)}))}function ac(e,t){return(0,ae.S2)(e).get("stroke")||t||"black"}ic.$inject=["eventBus","canvas","pathMap"];const rc={__depends__:[Ke.A,Zs.A,ns.A],__init__:["labelEditingProvider","labelEditingPreview"],labelEditingProvider:["type",Ks],labelEditingPreview:["type",ic]};var oc=n(46055);const sc=["bpmn:Event","bpmn:SequenceFlow","bpmn:Gateway"],cc={class:"bjs-label-link",stroke:"var(--element-selected-outline-secondary-stroke-color)",strokeDasharray:"5, 5"};function pc(e,t,n,i,a){const r=t.getLayer("overlays");function o(e,t,n=[]){const i=(0,Oe.RJ)([(0,Ge.pp)(t),(0,Ge.pp)(e)],cc),a=i.getAttribute("d"),o=n.includes(e)?s(e):c(e),p=(0,Ge.ki)(o,a);if(!p)return;const l=n.includes(t)?s(t):c(t),m=(0,Ge.ki)(l,a)||(0,Ge.pp)(t);(0,Wn.kf)(m,p)<15||((0,Oe.si)(i,[m,p]),R(r,i))}function s(e){const t=i.getOutline(e),n=i.offset;return t?t.x?Re({x:e.x+lc(t,"x")-2,y:e.y+lc(t,"y")-2,width:lc(t,"width")+4,height:lc(t,"height")+4},lc(t,"rx")):t.cx?Te({x:e.x-n,y:e.y-n,width:2*lc(t,"r"),height:2*lc(t,"r")}):void 0:c(e)}function c(e){return n.getShapePath(e)}e.on(["selection.changed","shape.changed"],(function(){var e,t;(e=`.${cc.class}`,t=r,(t=t||document).querySelectorAll(e)).forEach(W)})),e.on("selection.changed",(function({newSelection:e}){const t=e.filter((e=>(0,ae.f7)(e,sc)));if(1===t.length){const n=t[0];(0,_e.J2)(n)?o(n,n.labelTarget,e):n.labels?.length&&o(n.labels[0],n,e)}if(2===t.length){const n=t.find(_e.J2),i=t.find((e=>e.labels?.includes(n)));n&&i&&o(n,i,e)}})),e.on("shape.changed",(function({element:e}){(0,ae.f7)(e,sc)&&function(e){return a.get().includes(e)}(e)&&((0,_e.J2)(e)?o(e,e.labelTarget,a.get()):e.labels?.length&&o(e.labels[0],e,a.get()))}))}function lc(e,t){return parseFloat($(e,t)||0)}pc.$inject=["eventBus","canvas","graphicsFactory","outline","selection"];const mc={__depends__:[dt.A,oc.A],__init__:["labelLink"],labelLink:["type",pc]};var uc=n(81953),dc=n(43709),hc=new dc.A("tt");function fc(e,t){e.style.display=!1===t?"none":""}var vc="djs-tooltip",gc="."+vc;function yc(e,t){var n,i;this._eventBus=e,this._canvas=t,this._ids=hc,this._tooltipDefaults={show:{minZoom:.7,maxZoom:5}},this._tooltips={},this._tooltipRoot=(n=t.getContainer(),i=(0,uc.zm)('<div class="djs-tooltip-container" />'),(0,uc.HZ)(i,{position:"absolute",width:"0",height:"0"}),n.insertBefore(i,n.firstChild),i);var a=this;uc.Mm.bind(this._tooltipRoot,gc,"mousedown",(function(e){e.stopPropagation()})),uc.Mm.bind(this._tooltipRoot,gc,"mouseover",(function(e){a.trigger("mouseover",e)})),uc.Mm.bind(this._tooltipRoot,gc,"mouseout",(function(e){a.trigger("mouseout",e)})),this._init()}yc.$inject=["eventBus","canvas"],yc.prototype.add=function(e){if(!e.position)throw new Error("must specifiy tooltip position");if(!e.html)throw new Error("must specifiy tooltip html");var t=this._ids.next();return e=(0,Ft.kp)({},this._tooltipDefaults,e,{id:t}),this._addTooltip(e),e.timeout&&this.setTimeout(e),t},yc.prototype.trigger=function(e,t){var n=t.delegateTarget||t.target,i=this.get((0,uc.CF)(n,"data-tooltip-id"));i&&("mouseover"===e&&i.timeout&&this.clearTimeout(i),"mouseout"===e&&i.timeout&&(i.timeout=1e3,this.setTimeout(i)))},yc.prototype.get=function(e){return"string"!=typeof e&&(e=e.id),this._tooltips[e]},yc.prototype.clearTimeout=function(e){if(e=this.get(e)){var t=e.removeTimer;t&&(clearTimeout(t),e.removeTimer=null)}},yc.prototype.setTimeout=function(e){if(e=this.get(e)){this.clearTimeout(e);var t=this;e.removeTimer=setTimeout((function(){t.remove(e)}),e.timeout)}},yc.prototype.remove=function(e){var t=this.get(e);t&&((0,uc.TF)(t.html),(0,uc.TF)(t.htmlContainer),delete t.htmlContainer,delete this._tooltips[t.id])},yc.prototype.show=function(){fc(this._tooltipRoot)},yc.prototype.hide=function(){fc(this._tooltipRoot,!1)},yc.prototype._updateRoot=function(e){var t=e.scale||1,n=e.scale||1,i="matrix("+t+",0,0,"+n+","+-1*e.x*t+","+-1*e.y*n+")";this._tooltipRoot.style.transform=i,this._tooltipRoot.style["-ms-transform"]=i},yc.prototype._addTooltip=function(e){var t,n=e.id,i=e.html,a=this._tooltipRoot;i.get&&i.constructor.prototype.jquery&&(i=i.get(0)),(0,Ft.Kg)(i)&&(i=(0,uc.zm)(i)),t=(0,uc.zm)('<div data-tooltip-id="'+n+'" class="'+vc+'">'),(0,uc.HZ)(t,{position:"absolute"}),t.appendChild(i),e.type&&(0,uc.Ly)(t).add("djs-tooltip-"+e.type),e.className&&(0,uc.Ly)(t).add(e.className),e.htmlContainer=t,a.appendChild(t),this._tooltips[n]=e,this._updateTooltip(e)},yc.prototype._updateTooltip=function(e){var t,n,i,a=e.position;t=e.htmlContainer,n=a.x,i=a.y,(0,uc.HZ)(t,{left:n+"px",top:i+"px"})},yc.prototype._updateTooltipVisibilty=function(e){(0,Ft.jJ)(this._tooltips,(function(t){var n=t.show,i=t.htmlContainer,a=!0;n&&((n.minZoom>e.scale||n.maxZoom<e.scale)&&(a=!1),fc(i,a))}))},yc.prototype._init=function(){var e=this;this._eventBus.on("canvas.viewbox.changing",(function(t){e.hide()})),this._eventBus.on("canvas.viewbox.changed",(function(t){var n;n=t.viewbox,e._updateRoot(n),e._updateTooltipVisibilty(n),e.show()}))};const bc={__init__:["tooltips"],tooltips:["type",yc]};function Ec(e,t,n){function i(e,n,i){t.add({position:{x:e.x+5,y:e.y+5},type:"error",timeout:i||2e3,html:"<div>"+n+"</div>"})}e.on(["shape.move.rejected","create.rejected"],(function(e){var t=e.context,a=t.shape,r=t.target;(0,ae.is)(r,"bpmn:Collaboration")&&((0,ae.is)(a,"bpmn:FlowNode")?i(e,n("flow elements must be children of pools/participants")):(0,ae.is)(a,"bpmn:DataObjectReference")&&i(e,n("Data object must be placed within a pool/participant.")))}))}Ec.$inject=["eventBus","tooltips","translate"];const xc={__depends__:[bc],__init__:["modelingFeedback"],modelingFeedback:["type",Ec]};var wc=n(16351),_c=n(33266),Oc=n(2159),Sc=n(827),Ac="connect-ok",kc="connect-not-ok";function Cc(e,t,n,i,a,r,o){var s=this;this._dragging=t,this._rules=r,this._mouse=o,a.registerTool("global-connect",{tool:"global-connect",dragging:"global-connect.drag"}),e.on("global-connect.hover",(function(e){var t=e.context,n=e.hover,a=t.canStartConnect=s.canStartConnect(n);null!==a&&(t.startTarget=n,i.addMarker(n,a?Ac:kc))})),e.on(["global-connect.out","global-connect.cleanup"],(function(e){var t=e.context.startTarget,n=e.context.canStartConnect;t&&i.removeMarker(t,n?Ac:kc)})),e.on(["global-connect.ended"],(function(t){var i=t.context.startTarget,a={x:t.x,y:t.y};if(s.canStartConnect(i))return e.once("element.out",(function(){e.once(["connect.ended","connect.canceled"],(function(){e.fire("global-connect.drag.ended")})),n.start(null,i,a)})),!1}))}Cc.$inject=["eventBus","dragging","connect","canvas","toolManager","rules","mouse"],Cc.prototype.start=function(e,t){this._dragging.init(e,"global-connect",{autoActivate:t,trapClick:!1,data:{context:{}}})},Cc.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();return this.start(e,!!e)},Cc.prototype.isActive=function(){var e=this._dragging.context();return e&&/^global-connect/.test(e.prefix)},Cc.prototype.canStartConnect=function(e){return this._rules.allowed("connection.start",{source:e})};const Pc={__depends__:[Gt.A,sa.A,ur.A,dr.A,qa.A],globalConnect:["type",Cc]};function Tc(e,t,n,i,a,r,o,s){this._palette=e,this._create=t,this._elementFactory=n,this._spaceTool=i,this._lassoTool=a,this._handTool=r,this._globalConnect=o,this._translate=s,e.registerProvider(this)}Tc.$inject=["palette","create","elementFactory","spaceTool","lassoTool","handTool","globalConnect","translate"],Tc.prototype.getPaletteEntries=function(){var e={},t=this._create,n=this._elementFactory,i=this._spaceTool,a=this._lassoTool,o=this._handTool,s=this._globalConnect,c=this._translate;function p(e,i,a,o,s){function c(i){var a=n.createShape((0,r.kp)({type:e},s));t.start(i,a)}return{group:i,className:a,title:o,action:{dragstart:c,click:c}}}function l(e){var i=n.createShape({type:"bpmn:SubProcess",x:0,y:0,isExpanded:!0}),a=n.createShape({type:"bpmn:StartEvent",x:40,y:82,parent:i});t.start(e,[i,a],{hints:{autoSelect:[i]}})}function m(e){t.start(e,n.createParticipantShape())}return(0,r.kp)(e,{"hand-tool":{group:"tools",className:"bpmn-icon-hand-tool",title:c("Activate hand tool"),action:{click:function(e){o.activateHand(e)}}},"lasso-tool":{group:"tools",className:"bpmn-icon-lasso-tool",title:c("Activate lasso tool"),action:{click:function(e){a.activateSelection(e)}}},"space-tool":{group:"tools",className:"bpmn-icon-space-tool",title:c("Activate create/remove space tool"),action:{click:function(e){i.activateSelection(e)}}},"global-connect-tool":{group:"tools",className:"bpmn-icon-connection-multi",title:c("Activate global connect tool"),action:{click:function(e){s.start(e)}}},"tool-separator":{group:"tools",separator:!0},"create.start-event":p("bpmn:StartEvent","event","bpmn-icon-start-event-none",c("Create start event")),"create.intermediate-event":p("bpmn:IntermediateThrowEvent","event","bpmn-icon-intermediate-event-none",c("Create intermediate/boundary event")),"create.end-event":p("bpmn:EndEvent","event","bpmn-icon-end-event-none",c("Create end event")),"create.exclusive-gateway":p("bpmn:ExclusiveGateway","gateway","bpmn-icon-gateway-none",c("Create gateway")),"create.task":p("bpmn:Task","activity","bpmn-icon-task",c("Create task")),"create.data-object":p("bpmn:DataObjectReference","data-object","bpmn-icon-data-object",c("Create data object reference")),"create.data-store":p("bpmn:DataStoreReference","data-store","bpmn-icon-data-store",c("Create data store reference")),"create.subprocess-expanded":{group:"activity",className:"bpmn-icon-subprocess-expanded",title:c("Create expanded sub-process"),action:{dragstart:l,click:l}},"create.participant-expanded":{group:"collaboration",className:"bpmn-icon-participant",title:c("Create pool/participant"),action:{dragstart:m,click:m}},"create.group":p("bpmn:Group","artifact","bpmn-icon-group",c("Create group"))}),e};const Rc={__depends__:[_c.A,Wa.A,Dr,Oc.A,Sc.A,Pc,Ye.A],__init__:["paletteProvider"],paletteProvider:["type",Tc]};function Dc(e,t,n,i,a){et.A.call(this,e),e.on("shape.move.move",250,(function(e){var o=e.context,s=o.canExecute;o.visualReplacements||(o.visualReplacements={}),s&&s.replacements?function(e){var o=e.canExecute.replacements;(0,r.jJ)(o,(function(o){var s=o.oldElementId,c={type:o.newElementType};if(!e.visualReplacements[s]){var p=t.get(s);(0,r.kp)(c,{x:p.x,y:p.y});var l=n.createShape(c);i.addShape(l,p.parent);var m=P('[data-element-id="'+(0,it.F)(p.id)+'"]',e.dragGroup);m&&$(m,{display:"none"});var u=a.addDragger(l,e.dragGroup);e.visualReplacements[s]=u,i.removeShape(l)}}))}(o):function(e){var t=e.visualReplacements;(0,r.jJ)(t,(function(n,i){var a=P('[data-element-id="'+(0,it.F)(i)+'"]',e.dragGroup);a&&$(a,{display:"inline"}),n.remove(),t[i]&&delete t[i]}))}(o)}))}Dc.$inject=["eventBus","elementRegistry","elementFactory","canvas","previewSupport"],(0,i.A)(Dc,et.A);const Nc={__depends__:[qt.A],__init__:["bpmnReplacePreview"],bpmnReplacePreview:["type",Dc]};var $c=n(67633),Mc=n(56287),Bc=["x","y"],jc=Math.abs;function Fc(e){e.on(["connect.hover","connect.move","connect.end"],1250,(function(e){var t,n=e.context,i=n.canExecute,a=n.start,o=n.hover,s=n.source,c=n.target;e.originalEvent&&(0,Mc.nM)(e.originalEvent)||(n.initialConnectionStart||(n.initialConnectionStart=n.connectionStart),i&&o&&function(e,t,n){Bc.forEach((function(i){var a=Lc(i,t);e[i]<t[i]+n?(0,$c.CU)(e,i,t[i]+n):e[i]>t[i]+a-n&&(0,$c.CU)(e,i,t[i]+a-n)}))}(e,o,function(e){return(0,ae.is)(e,"bpmn:Task")?10:20}(o)),o&&(t=i,(0,r.zN)(["bpmn:Association","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:SequenceFlow"],(function(e){return Ic(t,e)})))?(n.connectionStart=(0,$c.jz)(a),(0,ae.f7)(o,["bpmn:Event","bpmn:Gateway"])&&Qc(e,(0,$c.jz)(o)),(0,ae.f7)(o,["bpmn:Task","bpmn:SubProcess"])&&function(e,t){var n=(0,$c.jz)(t);Bc.forEach((function(i){(function(e,t,n){return e[n]>t[n]+20&&e[n]<t[n]+Lc(n,t)-20})(e,t,i)&&(0,$c.CU)(e,i,n[i])}))}(e,o),(0,ae.is)(s,"bpmn:BoundaryEvent")&&c===s.host&&function(e){var t=e.context,n=t.source,i=t.target;if(!function(e){var t=e.hover,n=e.source;return t&&n&&t===n}(t)){var a=(0,$c.jz)(n),r=(0,Ge.vc)(a,i,-10),o=[];/top|bottom/.test(r)&&o.push("x"),/left|right/.test(r)&&o.push("y"),o.forEach((function(t){var n,i=e[t];jc(i-a[t])<40&&(n=i>a[t]?a[t]+40:a[t]-40,(0,$c.CU)(e,t,n))}))}}(e)):Ic(i,"bpmn:MessageFlow")?((0,ae.is)(a,"bpmn:Event")&&(n.connectionStart=(0,$c.jz)(a)),(0,ae.is)(o,"bpmn:Event")&&Qc(e,(0,$c.jz)(o))):n.connectionStart=n.initialConnectionStart)}))}function Qc(e,t){(0,$c.CU)(e,"x",t.x),(0,$c.CU)(e,"y",t.y)}function Ic(e,t){return e&&e.type===t}function Lc(e,t){return"x"===e?t.width:t.height}Fc.$inject=["eventBus"];var zc=n(39680);function Xc(e,t){t.invoke(zc.A,this),e.on(["create.move","create.end"],1500,Vc),e.on(["create.move","create.end","shape.move.move","shape.move.end"],1500,(function(e){var t=e.context,n=t.canExecute,i=t.target;n&&("attach"===n||n.attach)&&!(0,$c.AC)(e)&&function(e,t){var n,i=(0,Ge.Fy)(t),a=ca(e,t),r=e.context.shape;n=r.parent?{x:0,y:0}:(0,Ge.pp)(r),/top/.test(a)?(0,$c.CU)(e,"y",i.top-n.y):/bottom/.test(a)&&(0,$c.CU)(e,"y",i.bottom-n.y),/left/.test(a)?(0,$c.CU)(e,"x",i.left-n.x):/right/.test(a)&&(0,$c.CU)(e,"x",i.right-n.x)}(e,i)}))}function Vc(e){var t=e.context.createConstraints;if(t){var n=t.top,i=t.right,a=t.bottom,r=t.left;(r&&r>=e.x||i&&i<=e.x)&&(0,$c.CU)(e,"x",e.x),(n&&n>=e.y||a&&a<=e.y)&&(0,$c.CU)(e,"y",e.y)}}function Yc(e,t){return-1!==e.indexOf(t)}function Gc(e,t,n){return t?{x:e.x-n.x,y:e.y-n.y}:{x:e.x,y:e.y}}(0,i.A)(Xc,zc.A),Xc.$inject=["eventBus","injector"],Xc.prototype.initSnap=function(e){var t=zc.A.prototype.initSnap.call(this,e),n=e.shape,i=!!this._elementRegistry.get(n.id);return(0,r.jJ)(n.outgoing,(function(n){var a=n.waypoints[0];a=a.original||a,t.setSnapOrigin(n.id+"-docking",Gc(a,i,e))})),(0,r.jJ)(n.incoming,(function(n){var a=n.waypoints[n.waypoints.length-1];a=a.original||a,t.setSnapOrigin(n.id+"-docking",Gc(a,i,e))})),(0,ae.is)(n,"bpmn:Participant")&&t.setSnapLocations(["top-left","bottom-right","mid"]),t},Xc.prototype.addSnapTargetPoints=function(e,t,n){zc.A.prototype.addSnapTargetPoints.call(this,e,t,n);var i=this.getSnapTargets(t,n);(0,r.jJ)(i,(function(n){var i;i=n,((0,ae.is)(i,"bpmn:SubProcess")&&(0,xe.Av)(i)||(0,ae.is)(i,"bpmn:Participant")||[t,n].every((function(e){return(0,ae.is)(e,"bpmn:TextAnnotation")})))&&(e.add("top-left",(0,$c.lA)(n)),e.add("bottom-right",(0,$c.oF)(n)))}));var a=this._elementRegistry;return(0,r.jJ)(t.incoming,(function(n){if(a.get(t.id)){Yc(i,n.source)||e.add("mid",(0,Ge.pp)(n.source));var r=n.waypoints[0];e.add(n.id+"-docking",r.original||r)}})),(0,r.jJ)(t.outgoing,(function(n){if(a.get(t.id)){Yc(i,n.target)||e.add("mid",(0,Ge.pp)(n.target));var r=n.waypoints[n.waypoints.length-1];e.add(n.id+"-docking",r.original||r)}})),(0,ae.is)(n,"bpmn:SequenceFlow")&&(e=this.addSnapTargetPoints(e,t,n.parent)),e},Xc.prototype.getSnapTargets=function(e,t){return zc.A.prototype.getSnapTargets.call(this,e,t).filter((function(e){return!(0,ae.is)(e,"bpmn:Lane")}))};const Wc={__depends__:[n(56875).A],__init__:["connectSnapping","createMoveSnapping"],connectSnapping:["type",Fc],createMoveSnapping:["type",Xc]};var qc=n(35506),Hc=n(98294);function Jc(e,t,n,i){this._elementRegistry=e,this._canvas=n,this._search=i,t.registerProvider(this)}function Uc(e){const{item:{element:t},tokens:n}=e;return{element:t,primaryTokens:n.label,secondaryTokens:n.id}}Jc.$inject=["elementRegistry","searchPad","canvas","search"],Jc.prototype.find=function(e){var t=this._canvas.getRootElements(),n=this._elementRegistry.filter((function(e){return!(0,_e.J2)(e)&&!t.includes(e)}));return this._search(n.map((e=>({element:e,label:(0,we.p9)(e),id:e.id}))),e,{keys:["label","id"]}).map(Uc)};const Zc={__depends__:[qc.A,Hc.A],__init__:["bpmnSearch"],bpmnSearch:["type",Jc]},Kc={width:36,height:50},ep={width:50,height:50};function tp(e,t,n){return I("path",{d:e,strokeWidth:2,transform:`translate(${t.x}, ${t.y})`,...n})}function np(e,t){this._styles=t,e.registerProvider(this)}function ip(e,t){var n;return"bpmn:DataObjectReference"===t?n=Kc:"bpmn:DataStoreReference"===t&&(n=ep),e.width===n.width&&e.height===n.height}np.$inject=["outline","styles"],np.prototype.getOutline=function(e){const t=this._styles.cls("djs-outline",["no-fill"]);var n;return(0,we.gF)(e)?($(n=I("rect"),(0,r.kp)({x:-5,y:-5,rx:4,width:e.width+10,height:e.height+10},t)),n):(0,_e.J2)(e)?void 0:((0,ae.is)(e,"bpmn:Gateway")?(n=I("rect"),(0,r.kp)(n.style,{"transform-box":"fill-box",transform:"rotate(45deg)","transform-origin":"center"}),$(n,(0,r.kp)({x:2,y:2,rx:4,width:e.width-4,height:e.height-4},t))):(0,ae.f7)(e,["bpmn:Task","bpmn:SubProcess","bpmn:Group","bpmn:CallActivity"])?$(n=I("rect"),(0,r.kp)({x:-5,y:-5,rx:14,width:e.width+10,height:e.height+10},t)):(0,ae.is)(e,"bpmn:EndEvent")?$(n=I("circle"),(0,r.kp)({cx:e.width/2,cy:e.height/2,r:e.width/2+5+1},t)):(0,ae.is)(e,"bpmn:Event")?$(n=I("circle"),(0,r.kp)({cx:e.width/2,cy:e.height/2,r:e.width/2+5},t)):(0,ae.is)(e,"bpmn:DataObjectReference")&&ip(e,"bpmn:DataObjectReference")?n=tp("M44.7648 11.3263L36.9892 2.64074C36.0451 1.58628 34.5651 0.988708 33.1904 0.988708H5.98667C3.22688 0.988708 0.989624 3.34892 0.989624 6.26039V55.0235C0.989624 57.9349 3.22688 60.2952 5.98667 60.2952H40.966C43.7257 60.2952 45.963 57.9349 45.963 55.0235V14.9459C45.963 13.5998 45.6407 12.3048 44.7648 11.3263Z",{x:-6,y:-6},t):(0,ae.is)(e,"bpmn:DataStoreReference")&&ip(e,"bpmn:DataStoreReference")&&(n=tp("M1.03845 48.1347C1.03845 49.3511 1.07295 50.758 1.38342 52.064C1.69949 53.3938 2.32428 54.7154 3.56383 55.6428C6.02533 57.4841 10.1161 58.7685 14.8212 59.6067C19.5772 60.4538 25.1388 60.8738 30.6831 60.8738C36.2276 60.8738 41.7891 60.4538 46.545 59.6067C51.2504 58.7687 55.3412 57.4842 57.8028 55.6429C59.0424 54.7156 59.6673 53.3938 59.9834 52.064C60.2938 50.7579 60.3285 49.351 60.3285 48.1344V13.8415C60.3285 12.6249 60.2938 11.218 59.9834 9.91171C59.6673 8.58194 59.0423 7.2602 57.8027 6.33294C55.341 4.49168 51.2503 3.20723 46.545 2.36914C41.7891 1.522 36.2276 1.10204 30.6831 1.10205C25.1388 1.10206 19.5772 1.52206 14.8213 2.36923C10.1162 3.20734 6.02543 4.49183 3.5639 6.33314C2.32433 7.26038 1.69951 8.58206 1.38343 9.91181C1.07295 11.2179 1.03845 12.6247 1.03845 13.8411V48.1347Z",{x:-6,y:-6},t)),n)},np.prototype.updateOutline=function(e,t){if(!(0,_e.J2)(e))return(0,ae.f7)(e,["bpmn:SubProcess","bpmn:Group"])?($(t,{width:e.width+10,height:e.height+10}),!0):!!(0,ae.f7)(e,["bpmn:Event","bpmn:Gateway","bpmn:DataStoreReference","bpmn:DataObjectReference"])};const ap={__depends__:[oc.A],__init__:["outlineProvider"],outlineProvider:["type",np]};function rp(e){be.call(this,e)}function op(e,t){return t.forEach((function(t){t&&"string"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(n){if("default"!==n&&!(n in e)){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}}))})),Object.freeze(e)}function sp(e,t,n){return 2==arguments.length?e.getAttribute(t):null===n?e.removeAttribute(t):(e.setAttribute(t,n),e)}(0,i.A)(rp,be),rp.Viewer=ht,rp.NavigatedViewer=yt,rp.prototype.createDiagram=function(){return this.importXML('<?xml version="1.0" encoding="UTF-8"?><bpmn:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" targetNamespace="http://bpmn.io/schema/bpmn" id="Definitions_1"><bpmn:process id="Process_1" isExecutable="false"><bpmn:startEvent id="StartEvent_1"/></bpmn:process><bpmndi:BPMNDiagram id="BPMNDiagram_1"><bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1"><bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1"><dc:Bounds height="36.0" width="36.0" x="173.0" y="102.0"/></bpmndi:BPMNShape></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn:definitions>')},rp.prototype._interactionModules=[ft.A,vt.A,gt.A],rp.prototype._modelingModules=[Pt,jt,Vt.A,Xt,Yt.A,Gt.A,Wt.A,As,rr,Wa.A,Ds,Bs,Vs,Gs,Js,Us.A,rc,mc,Zo,xc,wc.A,Rc,Nc,Zs.A,Wc,Zc,ap],rp.prototype._modules=[].concat(ht.prototype._modules,rp.prototype._interactionModules,rp.prototype._modelingModules),Object.prototype.toString,Object.prototype.hasOwnProperty;const cp=Object.prototype.toString;function pp(e){return new lp(e)}function lp(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}lp.prototype.add=function(e){return this.list.add(e),this},lp.prototype.remove=function(e){return"[object RegExp]"==cp.call(e)?this.removeMatching(e):(this.list.remove(e),this)},lp.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},lp.prototype.toggle=function(e,t){return void 0!==t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this},lp.prototype.array=function(){return Array.from(this.list)},lp.prototype.has=lp.prototype.contains=function(e){return this.list.contains(e)};var mp,up,dp,hp={};function fp(){mp=window.addEventListener?"addEventListener":"attachEvent",up=window.removeEventListener?"removeEventListener":"detachEvent",dp="addEventListener"!==mp?"on":""}var vp,gp=op({__proto__:null,bind:hp.bind=function(e,t,n,i){return mp||fp(),e[mp](dp+t,n,i||!1),n},unbind:hp.unbind=function(e,t,n,i){return up||fp(),e[up](dp+t,n,i||!1),n},default:hp},[hp]),yp=!1;"undefined"!=typeof document&&((vp=document.createElement("div")).innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',yp=!vp.getElementsByTagName("link").length,vp=void 0);var bp={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:yp?[1,"X<div>","</div>"]:[0,"",""]};function Ep(e,t){return(t=t||document).querySelector(e)}function xp(e,t){return function(e,t){t.appendChild(function(e,t){if(e.ownerDocument!==t.ownerDocument)try{return t.ownerDocument.importNode(e,!0)}catch(e){}return e}(e,t))}(t,e),e}bp.td=bp.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],bp.option=bp.optgroup=[1,'<select multiple="multiple">',"</select>"],bp.thead=bp.tbody=bp.colgroup=bp.caption=bp.tfoot=[1,"<table>","</table>"],bp.polyline=bp.ellipse=bp.polygon=bp.circle=bp.text=bp.line=bp.path=bp.rect=bp.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];var wp={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":2,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":2,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function _p(e,t,n){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),a=wp[i];a?(2===a&&"number"==typeof n&&(n=String(n)+"px"),e.style[i]=n):e.setAttributeNS(null,t,n)}function Op(e,t,n){if("string"==typeof t){if(void 0===n)return function(e,t){return wp[t]?e.style[t]:e.getAttributeNS(null,t)}(e,t);_p(e,t,n)}else!function(e,t){var n,i,a=Object.keys(t);for(n=0;i=a[n];n++)_p(e,i,t[i])}(e,t);return e}const Sp=Object.prototype.toString;function Ap(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}Ap.prototype.add=function(e){return this.list.add(e),this},Ap.prototype.remove=function(e){return"[object RegExp]"==Sp.call(e)?this.removeMatching(e):(this.list.remove(e),this)},Ap.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},Ap.prototype.toggle=function(e,t){return void 0!==t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this},Ap.prototype.array=function(){return Array.from(this.list)},Ap.prototype.has=Ap.prototype.contains=function(e){return this.list.contains(e)};var kp="http://www.w3.org/2000/svg",Cp='<svg xmlns="'+kp+'"';function Pp(e,t){var n;return"<"===(e=e.trim()).charAt(0)?(n=function(e){var t=!1;"<svg"===e.substring(0,4)?-1===e.indexOf(kp)&&(e=Cp+e.substring(4)):(e=Cp+">"+e+"</svg>",t=!0);var n=function(e){var t;return(t=new DOMParser).async=!1,t.parseFromString(e,"text/xml")}(e);if(!t)return n;for(var i=document.createDocumentFragment(),a=n.firstChild;a.firstChild;)i.appendChild(a.firstChild);return i}(e).firstChild,n=document.importNode(n,!0)):n=document.createElementNS(kp,e),t&&Op(n,t),n}const Tp=Object.prototype.toString,Rp=Object.prototype.hasOwnProperty;function Dp(e,t){return!(null==e)&&Rp.call(e,t)}function Np(e,t){let n,i;if(void 0===e)return;const a=function(e){return"[object Array]"===Tp.call(e)}(e)?Bp:Mp;for(let r in e)if(Dp(e,r)&&(n=e[r],i=t(n,a(r)),!1===i))return n}function $p(e,t){return!!function(e,n,i){return Np(e,(function(e,n){var a,r;a=e,r=n,i=i&&t(a,r)})),i}(e,0,!0)}function Mp(e){return e}function Bp(e){return Number(e)}function jp(e,...t){return Object.assign(e,...t)}var Fp=new dc.A,Qp={min:.2,max:4};function Ip(e,t,n,i,a){var r=this;function o(e){r._state._svgClientRect&&!Yp(r._state._svgClientRect)||(r._state._svgClientRect=r._svg.getBoundingClientRect()),zp(Lp({x:e.x-r._state._svgClientRect.left,y:e.y-r._state._svgClientRect.top},r._svg,r._lastViewbox),r._canvas),r._update()}function s(e){return function(t){var n=Jp(t);r._state._svgClientRect&&!Yp(r._state._svgClientRect)||(r._state._svgClientRect=r._svg.getBoundingClientRect()),e&&o(n);var a=Lp({x:n.x-r._state._svgClientRect.left,y:n.y-r._state._svgClientRect.top},r._svg,r._lastViewbox),s=i.viewbox(),l=function(e,t){var n=t.x+t.width/2,i=t.y+t.height/2;return{x:e.x-n,y:e.y-i}}(a,s),m=r._viewportDom.getBoundingClientRect(),u={x:n.x-m.left+1,y:n.y-m.top+1};jp(r._state,{cachedViewbox:s,initialDragPosition:{x:n.x,y:n.y},isDragging:!0,offsetViewport:l,offsetViewportDom:u,viewportClientRect:r._viewport.getBoundingClientRect(),parentClientRect:r._parent.getBoundingClientRect()}),gp.bind(document,"mousemove",c),gp.bind(document,"mouseup",p)}}function c(e){var t=Jp(e);if(r._state.isDragging){r._state._svgClientRect&&!Yp(r._state._svgClientRect)||(r._state._svgClientRect=r._svg.getBoundingClientRect());var n=r._state.offsetViewportDom,i=r._state.viewportClientRect,a=r._state.parentClientRect;jp(r._viewportDom.style,{top:t.y-n.y-a.top+"px",left:t.x-n.x-a.left+"px"});var o=Wp(a,{top:t.y-n.y-a.top,left:t.x-n.x-a.left,width:i.width,height:i.height});jp(r._overlay.style,{clipPath:o});var s=Lp({x:t.x-r._state._svgClientRect.left,y:t.y-r._state._svgClientRect.top},r._svg,r._lastViewbox);zp({x:s.x-r._state.offsetViewport.x,y:s.y-r._state.offsetViewport.y},r._canvas)}}function p(e){var t=Jp(e);r._state.isDragging&&(r._state.initialDragPosition.x===t.x&&r._state.initialDragPosition.y===t.y&&o(e),r._update(),jp(r._state,{cachedViewbox:null,initialDragPosition:null,isDragging:!1,offsetViewport:null,offsetViewportDom:null}),gp.unbind(document,"mousemove",c),gp.unbind(document,"mouseup",p))}this._canvas=i,this._elementRegistry=a,this._eventBus=n,this._injector=t,this._state={isOpen:void 0,isDragging:!1,initialDragPosition:null,offsetViewport:null,cachedViewbox:null,dragger:null,svgClientRect:null,parentClientRect:null,zoomDelta:0},this._minimapId=Fp.next(),this._init(),this.toggle(e&&e.open||!1),gp.bind(this._viewportDom,"mousedown",s(!1)),gp.bind(this._svg,"mousedown",s(!0)),gp.bind(this._parent,"wheel",(function(e){if(e.preventDefault(),e.stopPropagation(),e.ctrlKey&&(r._state._svgClientRect&&!Yp(r._state._svgClientRect)||(r._state._svgClientRect=r._svg.getBoundingClientRect()),t=e,n=r._state._svgClientRect,t.x>n.left&&t.x<n.left+n.width&&t.y>n.top&&t.y<n.top+n.height)){var t,n,a,o,s,c=0===e.deltaMode?.02:.32,p=Math.sqrt(Math.pow(e.deltaY,2)+Math.pow(e.deltaX,2))*Gp(e.deltaY)*-c;if(r._state.zoomDelta+=p,Math.abs(r._state.zoomDelta)>.1){var l=p>0?1:-1,m=Math.log(i.zoom())/Math.log(10),u=(a=Qp,o=Math.log(a.min)/Math.log(10),s=Math.log(a.max)/Math.log(10),(Math.abs(o)+Math.abs(s))/20),d=Math.round(m/u)*u;d+=u*l;var h=Math.pow(10,d);i.zoom(function(e,t){return Math.max(e.min,Math.min(e.max,t))}(Qp,h),f),r._state.zoomDelta=0;var f=Lp({x:e.clientX-r._state._svgClientRect.left,y:e.clientY-r._state._svgClientRect.top},r._svg,r._lastViewbox);zp(f,r._canvas),r._update()}}})),gp.bind(this._toggle,"click",(function(e){e.preventDefault(),e.stopPropagation(),r.toggle()})),n.on(["shape.added","connection.added"],(function(e){var t=e.element;r._addElement(t),r._update()})),n.on(["shape.removed","connection.removed"],(function(e){var t=e.element;r._removeElement(t),r._update()})),n.on("elements.changed",250,(function(e){e.elements.forEach((function(e){r._updateElement(e)})),r._update()})),n.on("element.updateId",(function(e){var t=e.element,n=e.newId;r._updateElementId(t,n)})),n.on("canvas.viewbox.changed",(function(){r._state.isDragging||r._update()})),n.on("canvas.resized",(function(){document.body.contains(r._parent)&&(r._state.isDragging||r._update(),r._state._svgClientRect=r._svg.getBoundingClientRect())})),n.on(["root.set","plane.set"],(function(e){r._clear(),(e.element||e.plane.rootElement).children.forEach((function(e){r._addElement(e)})),r._update()}))}function Lp(e,t,n){var i=t.getBoundingClientRect(),a=function(e,t){var n=e.width/e.height,i=jp({},{x:e.x,y:e.y,width:e.width,height:e.height});if(n>t){var a=i.width*(1/t);jp(i,{y:i.y-(a-i.height)/2,height:a})}else if(n<t){var r=i.height*t;jp(i,{x:i.x-(r-i.width)/2,width:r})}return i}(n,i.width/i.height);return{x:Xp(e.x,0,i.width,a.x,a.x+a.width),y:Xp(e.y,0,i.height,a.y,a.y+a.height)}}function zp(e,t){var n=t.viewbox(),i=n.width,a=n.height;t.viewbox({x:e.x-i/2,y:e.y-a/2,width:i,height:a})}function Xp(e,t,n,i,a){return(e-t)*(a-i)/(n-t)+i}function Vp(e,t,n){var i=function(e){var t=Ep(".children",e);return t||xp(e,t=Pp("g",{class:"children"})),t}(t),a=[].slice.call(i.childNodes)[n];a?t.insertBefore(e,a.nextSibling):t.appendChild(e)}function Yp(e){return 0===e.width&&0===e.height}Ip.$inject=["config.minimap","injector","eventBus","canvas","elementRegistry"],Ip.prototype._init=function(){var e=this._canvas.getContainer(),t=this._parent=document.createElement("div");pp(t).add("djs-minimap"),e.appendChild(t);var n=this._toggle=document.createElement("div");pp(n).add("toggle"),t.appendChild(n);var i=this._map=document.createElement("div");pp(i).add("map"),t.appendChild(i);var a=this._svg=Pp("svg");Op(a,{width:"100%",height:"100%"}),xp(i,a),xp(a,this._elementsGroup=Pp("g"));var r=this._viewportGroup=Pp("g");xp(a,r);var o,s=this._viewport=Pp("rect");(o=s,new Ap(o)).add("viewport"),xp(r,s),gp.bind(t,"mousedown",(function(e){e.stopPropagation()}));var c=this._viewportDom=document.createElement("div");pp(c).add("viewport-dom"),this._parent.appendChild(c);var p=this._overlay=document.createElement("div");pp(p).add("overlay"),this._parent.appendChild(p)},Ip.prototype._update=function(){var e=this._canvas.viewbox(),t=e.inner,n=e.outer;if(Hp(e)){var i,a,r,o,s=n.width-t.width,c=n.height-t.height;t.width<n.width?(i=t.x-s/2,r=n.width,t.x+t.width<n.width&&(i=Math.min(0,t.x))):(i=t.x,r=t.width),t.height<n.height?(a=t.y-c/2,o=n.height,t.y+t.height<n.height&&(a=Math.min(0,t.y))):(a=t.y,o=t.height),i-=50,a-=50,r+=100,o+=100,this._lastViewbox={x:i,y:a,width:r,height:o},Op(this._svg,{viewBox:i+", "+a+", "+r+", "+o}),Op(this._viewport,{x:e.x,y:e.y,width:e.width,height:e.height});var p=this._state._parentClientRect=this._parent.getBoundingClientRect(),l=this._viewport.getBoundingClientRect(),m={top:l.top-p.top,left:l.left-p.left,width:l.width,height:l.height};jp(this._viewportDom.style,{top:m.top+"px",left:m.left+"px",width:m.width+"px",height:m.height+"px"});var u=Wp(p,m);jp(this._overlay.style,{clipPath:u})}},Ip.prototype.open=function(){jp(this._state,{isOpen:!0}),pp(this._parent).add("open");var e=this._injector.get("translate",!1)||function(e){return e};sp(this._toggle,"title",e("Close minimap")),this._update(),this._eventBus.fire("minimap.toggle",{open:!0})},Ip.prototype.close=function(){jp(this._state,{isOpen:!1}),pp(this._parent).remove("open");var e=this._injector.get("translate",!1)||function(e){return e};sp(this._toggle,"title",e("Open minimap")),this._eventBus.fire("minimap.toggle",{open:!1})},Ip.prototype.toggle=function(e){var t=this.isOpen();void 0===e&&(e=!t),e!=t&&(e?this.open():this.close())},Ip.prototype.isOpen=function(){return this._state.isOpen},Ip.prototype._updateElement=function(e){try{void 0!==e.parent&&null!==e.parent&&(this._removeElement(e),this._addElement(e))}catch(e){console.warn("Minimap#_updateElement errored",e)}},Ip.prototype._updateElementId=function(e,t){try{var n=Ep("#"+(0,it.F)(this._prefixId(e.id)),this._elementsGroup);n&&(n.id=this._prefixId(t))}catch(e){console.warn("Minimap#_updateElementId errored",e)}},Ip.prototype.isOnActivePlane=function(e){var t=this._canvas;return t.findRoot?t.findRoot(e)===t.getRootElement():!t.findPlane||t.findPlane(e)===t.getActivePlane()},Ip.prototype._addElement=function(e){var t=this;if(this._removeElement(e),this.isOnActivePlane(e)){var n,i,a,r=this._createElement(e),o=Ep("#"+(0,it.F)(this._prefixId(e.parent.id)),this._elementsGroup);if(r){var s=function(e,t){var n=Ep(".djs-children",t.parentNode);if(n){var i=[].slice.call(n.childNodes),a=-1;return i.forEach((function(t,n){Ep(".djs-element",t)===e&&(a=n)})),a}}(this._elementRegistry.getGraphics(e),this._elementRegistry.getGraphics(e.parent));return"undefined"!==s&&o?o.childNodes.length>s?Vp(r,o,s):Vp(r,o,o.childNodes.length-1):this._elementsGroup.appendChild(r),function(e){return e.waypoints}(e)?(i=0,a=0,void 0!==(n=e.parent).x&&void 0!==n.y&&(i=-n.x,a=-n.y),Op(r,{transform:"translate("+i+" "+a+")"})):(i=e.x,a=e.y,o&&(i-=(n=e.parent).x,a-=n.y),Op(r,{transform:"translate("+i+" "+a+")"})),e.children&&e.children.length&&e.children.forEach((function(e){t._addElement(e)})),r}}},Ip.prototype._removeElement=function(e){var t=this._svg.getElementById(this._prefixId(e.id));t&&function(e){var t=e.parentNode;t&&t.removeChild(e)}(t)},Ip.prototype._createElement=function(e){var t,n=this._elementRegistry.getGraphics(e);if(n&&(t=(0,Jt.P)(n))){var i=function(e){return(t=e,(t=t||document).querySelectorAll("[id]")).forEach((function(e){e.remove()})),e;var t}(function(e){return e.cloneNode(!0)}(t));return Op(i,{id:this._prefixId(e.id)}),i}},Ip.prototype._clear=function(){!function(e){for(var t;t=e.firstChild;)e.removeChild(t)}(this._elementsGroup)},Ip.prototype._prefixId=function(e){return"djs-minimap-"+e+"-"+this._minimapId};var Gp=Math.sign||function(e){return e>=0?1:-1};function Wp(e,t){return"polygon("+[qp(t.left,t.top),qp(t.left+t.width,t.top),qp(t.left+t.width,t.top+t.height),qp(t.left,t.top+t.height),qp(t.left,e.height),qp(e.width,e.height),qp(e.width,0),qp(0,0),qp(0,e.height),qp(t.left,e.height)].join(", ")+")"}function qp(e,t){return e+"px "+t+"px"}function Hp(e){return $p(e,(function(e){return function(e){return"[object Object]"===Tp.call(e)}(e)?Hp(e):(t=e,"[object Number]"===Tp.call(t)&&isFinite(e));var t}))}function Jp(e){return e.center?e.center:{x:e.clientX,y:e.clientY}}var Up={__init__:["minimap"],minimap:["type",Ip]},Zp=n(27828),Kp=n(97926),el=n(78338);function tl(e,t){this._canvas=e;var n=this;t.on("diagram.init",(function(){n._init(),n.toggle(!0)})),t.on("gridSnapping.toggle",(function(e){var t=e.active;n.toggle(t),n._centerGridAroundViewbox()})),t.on("canvas.viewbox.changed",(function(e){var t=e.viewbox;n._centerGridAroundViewbox(t)}))}tl.prototype._init=function(){var e=(0,Kp.P)("defs",this._canvas._svg);e||(e=(0,Zp.vt)("defs"),(0,Zp.BC)(this._canvas._svg,e));var t=this._pattern=(0,Zp.vt)("pattern"),n="djs-grid-pattern-"+Math.trunc(1e6*Math.random());(0,Zp.CF)(t,{id:n,width:el.E,height:el.E,patternUnits:"userSpaceOnUse"});var i=this._circle=(0,Zp.vt)("circle");(0,Zp.CF)(i,{cx:.5,cy:.5,r:.5,fill:"#ccc"}),(0,Zp.BC)(t,i),(0,Zp.BC)(e,t);var a=this._gfx=(0,Zp.vt)("rect");(0,Zp.CF)(a,{x:-5e4,y:-5e4,width:1e5,height:1e5,fill:`url(#${n})`})},tl.prototype._centerGridAroundViewbox=function(e){e||(e=this._canvas.viewbox());var t=(0,Ge.pp)(e);(0,Zp.CF)(this._gfx,{x:-5e4+(0,el.y)(t.x,el.E),y:-5e4+(0,el.y)(t.y,el.E)})},tl.prototype.isVisible=function(){return this._visible},tl.prototype.toggle=function(e){if(void 0===e&&(e=!this._visible),e!==this._visible){var t=this._getParent();e?(0,Zp.BC)(t,this._gfx):(0,Zp.IU)(t),this._visible=e}},tl.prototype._getParent=function(){return this._canvas.getLayer("djs-grid",-2)},tl.$inject=["canvas","eventBus"];var nl={__init__:["grid"],grid:["type",tl]},il=n(72969),al=n(99186);function rl(e){function t(e){if(!e.labelTarget){var t=(0,ae.Cf)(e);(0,ae.is)(t,"bpmn:Participant")&&(t=t.processRef),(0,ae.is)(t,"bpmn:Process")&&(t.isExecutable=!!t.isExecutable)}}e.on(["shape.added","root.added"],(function(e){t(e.element)})),e.on("elements.changed",(function(e){e.elements.forEach((function(e){t(e)}))}))}rl.$inject=["eventBus"];const ol={__init__:[rl]},sl=Object.prototype.toString;function cl(e){const t={};return function(n,i){if(function(e){return"[object Object]"===sl.call(e)}(i)&&(a=i.$type,"[object String]"===sl.call(a))){const{id:n}=i;if(n&&t[n])return t[n];const a=i.$type,r=Object.assign({},i);if(delete r.$type,!e.getTypeDescriptor(a))return;const o=e.create(a,r);return n&&(t[n]=o),o}var a;return i}}Object.prototype.hasOwnProperty;const pl="bpmn-js-clip----";class ll{constructor(e,t,n){void 0!==navigator.clipboard&&(e.on("copyPaste.elementsCopied",2050,(function(e){!1!==e.hints?.clip&&(navigator.clipboard.writeText(pl+JSON.stringify(e.tree)).then((()=>{console.log("[native-copy-paste]","clipboard","written")})).catch((e=>{console.error("[native-copy-paste]","failed to populate global clipboard",e)})),e.hints.clip=!1)})),e.on("copyPaste.pasteElements",2050,(function(e){if(e.tree)return;const i={...e};return navigator.clipboard.readText().then((e=>{if(!e?.startsWith(pl))return;console.log("[native-copy-paste]","clipboard","read");const a=JSON.parse(e.substring(16),cl(n));t.paste({...i,tree:a})})).catch((e=>{console.error("[native-copy-paste]","failed to paste from global clipboard",e)})),!1})))}}ll.$inject=["eventBus","copyPaste","moddle"];const ml={__init__:["nativeCopyPaste"],nativeCopyPaste:["type",ll]};var ul=n(92106);function dl(e={}){rp.call(this,e)}(0,i.A)(dl,rp),dl.prototype.getModules=function(e={}){return[...rp.prototype.getModules.call(this,e),e.disableAdjustOrigin?il.A:al.A,e.disableGrid?{}:nl]},dl.prototype._extensionModules=[Up,ol,ml,ul.BpmnPropertiesPanelModule,ul.BpmnPropertiesProviderModule],dl.prototype._modules=[].concat(rp.prototype._modules,dl.prototype._extensionModules)},56927:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});class i{constructor(e,t,n,i){this._eventBus=e,this._bpmnJSTracking=t,this._elementRegistry=n,this._selection=i,this._eventBus.on("commandStack.elements.create.postExecuted",this.trackElementsCreate.bind(this)),this._eventBus.on("commandStack.shape.append.postExecuted",this.trackElementAppend.bind(this)),this._eventBus.on("commandStack.shape.replace.postExecuted",this.trackElementReplace.bind(this))}trackElementsCreate(e){const{context:t}=e;this._bpmnJSTracking.track({name:"modeling.createElements",data:{elements:t.elements}})}trackElementAppend(e){const{shape:t,source:n}=e.context;this._bpmnJSTracking.track({name:"modeling.appendElement",data:{element:t,sourceElement:n}})}trackElementReplace(e){const{oldShape:t,newShape:n}=e.context;this._bpmnJSTracking.track({name:"modeling.replaceElement",data:{newElement:n,oldElement:t}})}}i.$inject=["eventBus","bpmnJSTracking","elementRegistry","selection"];const a={__init__:["modelingTracking"],modelingTracking:["type",i]}},57834:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(62038);class a{constructor(e,t,n){this._eventBus=e,this._bpmnJSTracking=t,this._selection=n,this._eventBus.on("contextPad.trigger",this.trackTrigger.bind(this))}trackTrigger(e){const{entry:t,event:n}=e,{target:a}=n;if(!a)return;const r=a.closest("[data-action]"),o=r&&r.getAttribute("data-action");if(!o)return;const s=(0,i.v)(n);this._bpmnJSTracking.track({name:"contextPad.trigger",data:{entryId:o,entryGroup:t.group||"default",entryTitle:t.title,selection:this._selection.get(),triggerType:s}})}}a.$inject=["eventBus","bpmnJSTracking","selection"];const r={__init__:["contextPadTracking"],contextPadTracking:["type",a]}},62038:(e,t,n)=>{"use strict";function i(e){return e instanceof PointerEvent?"click":e instanceof DragEvent?"drag":e instanceof KeyboardEvent?"keyboard":void 0}n.d(t,{v:()=>i})},63788:e=>{const t={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:[0,"",""]};t.td=t.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],t.option=t.optgroup=[1,'<select multiple="multiple">',"</select>"],t.thead=t.tbody=t.colgroup=t.caption=t.tfoot=[1,"<table>","</table>"],t.polyline=t.ellipse=t.polygon=t.circle=t.text=t.line=t.path=t.rect=t.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"],e.exports=function(e,n=globalThis.document){if("string"!=typeof e)throw new TypeError("String expected");const i=/^<!--(.*?)-->$/s.exec(e);if(i)return n.createComment(i[1]);const a=/<([\w:]+)/.exec(e)?.[1];if(!a)return n.createTextNode(e);if(e=e.trim(),"body"===a){const t=n.createElement("html");t.innerHTML=e;const{lastChild:i}=t;return i.remove(),i}let[r,o,s]=Object.hasOwn(t,a)?t[a]:t._default,c=n.createElement("div");for(c.innerHTML=o+e+s;r--;)c=c.lastChild;if(c.firstChild===c.lastChild){const{firstChild:e}=c;return e.remove(),e}const p=n.createDocumentFragment();return p.append(...c.childNodes),p}},65321:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(62038);class a{constructor(e,t,n){this._eventBus=e,this._bpmnJSTracking=t,this._selection=n,this._eventBus.on("popupMenu.open",this.trackOpen.bind(this)),this._eventBus.on("popupMenu.trigger",this.trackTrigger.bind(this))}trackOpen(){this._bpmnJSTracking.track({name:"popupMenu.open",data:{selection:this._selection.get()}})}trackTrigger(e){const{entry:t,event:n}=e,a=(0,i.v)(n);this._bpmnJSTracking.track({name:"popupMenu.trigger",data:{entryId:t.id,entryGroup:t.group||"default",entryLabel:t.label,triggerType:a}})}}a.$inject=["eventBus","bpmnJSTracking","selection"];const r={__init__:["popupMenuTracking"],popupMenuTracking:["type",a]}},66778:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});class i{constructor(e,t){this._eventBus=t,this._isEnabled=!1,e&&e.track&&this.on("tracking.event",e.track)}isEnabled(){return this._isEnabled}enable(){this._isEnabled=!0,this._eventBus.fire("tracking.enabled")}disable(){this._isEnabled=!1,this._eventBus.fire("tracking.disabled")}on(...e){return this._eventBus.on(...e)}track(e){this.isEnabled()&&this._eventBus.fire("tracking.event",function(e){e.data||(e.data={});for(const[t,n]of Object.entries(e.data))Array.isArray(n)?e.data[t]=n.map(r):e.data[t]=r(n);return e}(e))}}i.$inject=["config.bpmnJSTracking","eventBus"];const a={__init__:["bpmnJSTracking"],bpmnJSTracking:["type",i]};function r(e){return function(e){return e&&(e.$type||e.type)}(e)?{type:e.type||e.$type,collapsed:e.collapsed,attachers:e.attachers&&e.attachers.map(r),incoming:e.incoming&&e.incoming.map(r),outgoing:e.outgoing&&e.outgoing.map(r),parent:e.parent&&r(e.parent)}:e}var o=n(57834),s=n(40802),c=n(42371),p=n(56927),l=n(8493),m=n(65321);class u{constructor(e,t){this._bpmnJSTracking=t,this._eventBus=e,this._eventBus.on("refactorings.execute",this.trackRefactoring.bind(this))}trackRefactoring(e){const{refactoring:t}=e;this._bpmnJSTracking.track({name:"refactorings.execute",data:{refactoring:t}})}}u.$inject=["eventBus","bpmnJSTracking"];class d{constructor(e,t){this._eventBus=e,this._bpmnJSTracking=t,this._eventBus.on("selection.changed",this.trackEvent.bind(this))}trackEvent(e){this._bpmnJSTracking.track({name:"selection.select",data:{oldSelection:e.oldSelection,newSelection:e.newSelection}})}}d.$inject=["eventBus","bpmnJSTracking"];o.A,s.A,c.A,p.A,l.A,m.A},72794:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});class i{constructor(e){this._variableResolver=e,this.register()}getVariables(e){}register(){this._variableResolver.registerProvider(this)}}i.$inject=["variableResolver"]},76522:(e,t,n)=>{"use strict";n.d(t,{FF:()=>u,Gv:()=>c,I6:()=>l,O9:()=>o,b0:()=>r,cy:()=>s,gH:()=>f,zN:()=>h,zy:()=>p});const i=Object.prototype.toString,a=Object.prototype.hasOwnProperty;function r(e){return void 0===e}function o(e){return void 0!==e}function s(e){return"[object Array]"===i.call(e)}function c(e){return"[object Object]"===i.call(e)}function p(e,t){return!(null==e)&&a.call(e,t)}function l(e,t){const n=v(t);let i;return m(e,(function(e,t){if(n(e,t))return i=e,!1})),i}function m(e,t){let n,i;if(r(e))return;const a=s(e)?y:g;for(let r in e)if(p(e,r)&&(n=e[r],i=t(n,a(r)),!1===i))return n}function u(e,t){if(r(e))return[];!function(e){if(!s(e))throw new Error("must supply array")}(e);const n=v(t);return e.filter((function(e,t){return!n(e,t)}))}function d(e,t){return!!function(e,n,i){return m(e,(function(e,n){var a,r;a=e,r=n,i=i&&t(a,r)})),i}(e,0,!0)}function h(e,t){return!!l(e,t)}function f(e){return function(t){return d(e,(function(e,n){return t[n]===e}))}}function v(e){return function(e){const t=i.call(e);return"[object Function]"===t||"[object AsyncFunction]"===t||"[object GeneratorFunction]"===t||"[object AsyncGeneratorFunction]"===t||"[object Proxy]"===t}(e)?e:t=>t===e}function g(e){return e}function y(e){return Number(e)}},84639:(e,t,n)=>{"use strict";n.d(t,{e1:()=>Ye,mK:()=>Le.A,wN:()=>Ve});var i=n(91488),a=n(70868);class r{constructor(e){this._generate=e,this.value=null,this.valid=!1}invalidate(){this.valid=!1}get(){return this.valid||(this.value=this._generate(),this.valid=!0),this.value}}const o=Object.prototype.toString,s=Object.prototype.hasOwnProperty;function c(e,t){return!(null==e)&&s.call(e,t)}function p(e,t){let n,i;if(void 0===e)return;const a=function(e){return"[object Array]"===o.call(e)}(e)?u:m;for(let r in e)if(c(e,r)&&(n=e[r],i=t(n,a(r)),!1===i))return n}function l(e){return function(e){const t=o.call(e);return"[object Function]"===t||"[object AsyncFunction]"===t||"[object GeneratorFunction]"===t||"[object AsyncGeneratorFunction]"===t||"[object Proxy]"===t}(e)?e:t=>t===e}function m(e){return e}function u(e){return Number(e)}function d(e,t=void 0){const n=e.get("extensionElements");if(!n)return[];const i=n.get("values");return i&&i.length?t?i.filter((e=>(0,a.is)(e,t))):i:[]}function h(e){return v(e,"zeebe:IoMapping")[0]||v(e,"camunda:InputOutput")[0]}function f(e,t){var n=h(e);return n&&n.get(t)||[]}function v(e,t){var n=[],i=e.get("extensionElements");if(void 0!==i){var r=i.get("values");void 0!==r&&(n=function(e){const n=l((function(e){return(0,a.is)(e,t)}));let i=[];return p(e,(function(e,t){n(e,t)&&i.push(e)})),i}(r))}return n}function g(e,t,n){var i=y(e);if(function(e){return!!function(e){return f(e,"outputParameters")}(e).length}(e))return e;var r=i.find((function(e){return(0,a.is)(e,"bpmn:SubProcess")&&function(e,t){return function(e){return f(e,"inputParameters")}(e).find((function(e){return e.target===t||e.name===t}))}(e,n)}));return r||t}function y(e){for(var t=[],n=e;n.$parent;)t.push(n.$parent),n=n.$parent;return t}class b{constructor(e,t){this.providers=[],this._eventBus=e,this._bpmnjs=t,this.rawVariables=new r(this._generateRawVariables.bind(this)),this.parsedVariables=new r((async()=>{const t={variables:await this.getRawVariables()};return e.fire("variableResolver.parseVariables",t),t.variables})),e.on(["commandStack.changed","diagram.clear","import.done","variables.changed"],(()=>{this.invalidateCache()})),e.on("variableResolver.parseVariables",((e,t)=>{t.variables=this._parseVariables(t.variables)}))}_baseExtractor(){return[]}async getRawVariables(){return await this.rawVariables.get()}async getVariables(){return await this.parsedVariables.get()}invalidateCache(){this.rawVariables.invalidate(),this.parsedVariables.invalidate()}async _generateRawVariables(){const e=this._bpmnjs,t={},n=e.getDefinitions().get("rootElements").map((async e=>{const n=await this._baseExtractor(e,[this._extractor.bind(this)]);t[e.id]=n.map((e=>(e.provider||(e.provider=[this._baseExtractor]),e)))}));return await Promise.all(n),t}_parseVariables(e){const t={};for(const n in e){const i=e[n],a=[];i.forEach((e=>{const t=a.find((t=>t.name===e.name&&t.scope===e.scope));t?(E("origin",t,e),E("provider",t,e),x(t,e)):a.push(e)})),_(a),t[n]=a}return t}async _extractor(e){const{elements:t,containerElement:n,processVariables:i}=e,a=this,r=t.flatMap((e=>a.providers.map((async t=>{const a=await t.getVariables(e);a&&a.forEach((a=>{i.push({...O(a),origin:[e],scope:a.scope||g(e,n,a.name),provider:[t]})}))}))));await Promise.all(r)}registerProvider(e){this.providers.push(e),this.invalidateCache()}async getProcessVariables(e){const t=(0,a.Cf)(e);return(await this.getVariables())[t.id]||[]}async getVariablesForElement(e){const t=(0,a.Cf)(e),n=function(e){const t=(0,a.Cf)(e);if((0,a.is)(t,"bpmn:Participant"))return t.processRef;if((0,a.is)(t,"bpmn:Process"))return t;let n=t;for(;n.$parent&&!(0,a.is)(n,"bpmn:Process");)n=n.$parent;return n}(t),i=await this.getProcessVariables(n);var r=i.filter((function(e){return e.scope.id===t.id})),o=y(t);const s=[...r,...i.filter((function(e){return o.find((function(t){return t.id===e.scope.id}))}))].reverse(),c=new Set;return s.filter((e=>!!e.provider.find((e=>e!==this._baseExtractor))||!c.has(e.name)&&(c.add(e.name),!0)))}}function E(e,t,n){n[e]||(n[e]=[]),t[e]||(t[e]=[]);const i=n[e].filter((n=>!t[e].includes(n)));t[e].push(...i)}function x(e,t,n=[]){n.includes(t)||n.includes(e)||(n.push(t),n.push(e),e.type=w(e.type,t.type,"|"),e.info=w(e.info,t.info,"\n"),e.isList=!!e.isList==!!t.isList?e.isList:"optional",t.entries&&(e.entries||(e.entries=[]),t.entries.forEach((t=>{const i=e.entries.find((e=>e.name===t.name));i?x(i,t,n):e.entries.push(t)}))))}b.$inject=["eventBus","bpmnjs"];const w=(e,t,n)=>{if(e&&e!==t){const i=e.split(n);return i.includes(t)||i.push(t),i.join(n)}return t};function _(e){e&&e.forEach((e=>{e.detail=e.type,_(e.entries)}))}function O(e){const t={...e};return t.entries&&(t.entries=t.entries.map(O)),t}var S=n(79873),A=n(782),k=n(31650);const C=122,P=123,T=4,R=131,D=19,N=140,$=23,M=141,B=41,j=68,F=154,Q=70,I=155,L=72,z=156,X=168,V=89,Y=90,G=170,W=97,q=172,H="undefined"!=typeof process&&process.env&&/\bfparse(:dbg)?\b/.test(process.env.LOG),J="undefined"!=typeof process&&process.env&&/\bfparse:dbg\b/.test(process.env.LOG),U="undefined"!=typeof process&&process.env&&/\bcontext\b/.test(process.env.LOG),Z=[9,11,12,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],K=ne("\n\r"),ee="*".charCodeAt(0),te=ne("'./-+*^");function ne(e){return Array.from(e).map((e=>e.charCodeAt(0)))}function ie(e){return e>=48&&e<=57||183===e||e>=768&&e<=879||e>=8255&&e<=8256}function ae(e,t){return t.concat(e.split(/\n/g).join("\n"+t))}function re(e,t=0){const n=e.peek(t);return n===ee&&e.peek(t+1)===ee?{offset:2,token:"**"}:(i=n,te.includes(i)?{offset:1,token:String.fromCharCode(n)}:null);var i}function oe(e,t=0,n=!1){for(let a=!1,r=[],o=0;;o++){const s=e.peek(t+o);if(!(63===(i=s)||i>=65&&i<=90||95===i||i>=97&&i<=122||i>=192&&i<=214||i>=216&&i<=246||i>=248&&i<=767||i>=880&&i<=893||i>=895&&i<=8191||i>=8204&&i<=8205||i>=8304&&i<=8591||i>=11264&&i<=12271||i>=12289&&i<=55295||i>=63744&&i<=64975||i>=65008&&i<=65533||i>=55296&&i<=56319||i>=56320&&i<=57343||(a||n)&&ie(s)))return r.length?{token:String.fromCharCode(...r),offset:o}:null;a||(a=!0),r.push(s)}var i}function se(e,t){for(let i=!1,a=0;;a++){if(n=e.peek(t+a),!Z.includes(n))return i?{token:" ",offset:a}:null;i||(i=!0)}var n}const ce={[C]:"identifier",[P]:"nameIdentifier"},pe=new A.Lu(((e,t)=>{J&&console.log("%s: T <identifier | nameIdentifier>",e.pos);const n=function(e,t){const{keys:n,prefixes:i}=t.contextCache(),a=t.tokens;for(let t=0,r=[],o=null;;){const s=a.length+r.length>0,c=r.length>0,p=oe(e,t,s)||s&&re(e,t)||c&&se(e,t);if(!p)return o;const{token:l,offset:m}=p;if(t+=m," "===l)continue;r=[...r,l];const u=[...a,...r].join(" ");if(n.has(u)){const e=r[0];o={token:e,offset:e.length,term:123}}if(!i.has(u)){if(ve.some((e=>e===u))){const e=r[0];o={token:e,offset:e.length,term:122}}if(!ve.some((e=>e.startsWith(u))))return o}}}(e,t.context),i=t.context.tokens,a=n||oe(e,0,i.length>0);a&&(e.advance(a.offset),e.acceptToken(n?n.term:122),H&&console.log("%s: MATCH <%s> <%s>",e.pos,n?ce[n.term]:"identifier",a.token))}),{contextual:!0}),le=new A.Lu(((e,t)=>{J&&console.log("%s: T <propertyIdentifier>",e.pos);const n=oe(e,0,t.context.tokens.length>0);n&&(e.advance(n.offset),e.acceptToken(121),H&&console.log("%s: MATCH <propertyIdentifier> <%s>",e.pos,n.token))})),me=new A.Lu(((e,t)=>{let n;J&&console.log("%s: T <insertSemi>",e.pos);let i=!1;for(n=0;;n++){const t=e.peek(n);if(!Z.includes(t)){K.includes(t)&&(i=!0);break}}if(i){const t=oe(e,n+1);if(se(e,n+1)||t&&/^(then|else|return|satisfies)$/.test(t.token))return;H&&console.log("%s: MATCH <insertSemi>",e.pos),e.acceptToken(124)}})),ue={[z]:"FunctionInvocation",[I]:"FilterExpression",[F]:"PathExpression"},de={[q]:"Context",[G]:"FunctionDefinition",[R]:"ForExpression",[X]:"List",[N]:"IfExpression",[M]:"QuantifiedExpression"},he={[W]:"Context",[Y]:"FunctionDefinition",[T]:"ForExpression",[V]:"List",[D]:"IfExpression",[$]:"QuantifiedExpression",[j]:"PathExpression",[L]:"FunctionInvocation",[Q]:"FilterExpression",[B]:"ArithmeticExpression"};class fe{constructor(e){this.fn=e}get(e){return this.fn(e)}static of(e){return new fe(e)}}const ve=Object.keys({"date and time":1,date:1,time:1,duration:1});function ge(e,t){const n=we(e),i=function(e){const t=[];for(let n=1;n<=e.length;n++)t.push(e.substring(0,n));return t}(n);t.keys.add(n);for(const e of i)t.prefixes.add(e);return t.originalMap.set(n,e),t}function ye(e){const t=be();for(const n of e.getKeys())ge(n,t);return t}function be(e){return{keys:new Set(e?.keys),prefixes:new Set(e?.prefixes),originalMap:new Map(e?.originalMap)}}class Ee{constructor(e={}){this.value=e}getKeys(){return Object.keys(this.value)}get(e){const t=this.value[e],n=this.constructor;return n.isAtomic(t)?t:n.of(t)}set(e,t){return new(0,this.constructor)({...this.value,[e]:t})}merge(e){const t=this.constructor;return new t(t.__merge(this.value,e))}static isAtomic(e){return!e||e instanceof this||e instanceof fe||"object"!=typeof e}static of(...e){return new this(e.reduce(((e,t)=>this.__merge(e,t)),{}))}static __unwrap(e){return e?e instanceof this?e.value:this.isAtomic(e)?{}:e:{}}static __merge(e,t){const n=Object.assign({},this.__unwrap(e));for(const[e,i]of Object.entries(this.__unwrap(t)))i instanceof fe?n[e]=i:c(n,e)?n[e]=this.__merge(n[e],i):n[e]=i;return n}}class xe{constructor({name:e="Expressions",tokens:t=[],children:n=[],parent:i=null,context:a,value:r,raw:o,__cache:s}){this.name=e,this.tokens=t,this.children=n,this.parent=i,this.context=a,this.value=r,this.raw=o,this.__cache=s}get root(){let e=this;for(;e.parent;)e=e.parent;return e}get cache(){const e=this.root;return e.__cache||(e.__cache=new WeakMap),e.__cache}enterScope(e){const t=this.of({name:e,parent:this});return U&&console.log("[%s] enter",t.path,t.context),t}exitScope(e){return this.parent?(U&&console.log("[%s] exit %o\n%s",this.path,this.context,ae(e,"  ")),this.parent.pushChild(this)):(U&&console.log("[%s] NO exit %o\n%s",this.path,this.context,ae(e,"  ")),this)}token(e){return U&&console.log("[%s] token <%s> + <%s>",this.path,this.tokens.join(" "),e),this.assign({tokens:[...this.tokens,e]})}literal(e){return U&&console.log("[%s] literal %o",this.path,e),this.pushChild(this.of({name:"Literal",value:e}))}computedValue(){for(let e=this;;e=Ae(e.children)){if(!e)return null;if(e.value)return e.value}}contextCache(){let e=this.cache.get(this.context);return e||(e=ye(this.context),this.cache.set(this.context,e)),e}get path(){return this.parent?.path?.concat(" > ",this.name)||this.name}get(e){const t=e&&we(e),n=this.contextCache().originalMap.get(t);if(void 0===n)return;const i=this.context.get(n);return i instanceof fe?i.get(this):i}resolveName(){const e=this.tokens.join(" "),t=this.assign({tokens:[]}),n=this.of({name:"VariableName",parent:t,value:this.get(e),raw:e});return U&&console.log("[%s] resolve name <%s=%s>",n.path,e,this.get(e)),t.pushChild(n)}pushChild(e){if(!e)return this;const t=this.assign({children:[...this.children,e]});return e.parent=t,t}pushChildren(e){let t=this;for(const n of e)t=t.pushChild(n);return t}declareName(){if(0===this.tokens.length)throw Error("no tokens to declare name");const e=this.tokens.join(" ");return U&&console.log("[%s] declareName <%s>",this.path,e),this.assign({tokens:[]}).pushChild(this.of({name:"Name",value:e}))}define(e,t){if("string"!=typeof e)return U&&console.log("[%s] no define <%s=%s>",this.path,e,t),this;U&&console.log("[%s] define <%s=%s>",this.path,e,t);const n=this.context,i=n.set(e,t),a=ge(e,be(this.cache.get(n)||ye(n)));return this.cache.set(i,a),this.assign({context:i})}assign(e={}){return xe.of({...this,...e})}of(e={}){const t={context:this.context,parent:this.parent};return xe.of({...t,...e})}static of(e){const{name:t,tokens:n=[],children:i=[],parent:a=null,context:r,value:o,raw:s,__cache:c}=e;if(!r)throw new Error("must provide <context>");return new xe({name:t,tokens:[...n],children:[...i],context:r,parent:a,value:o,raw:s,__cache:c})}}function we(e){return e.replace(/\s*([./\-'+]|\*\*?)\s*/g," $1 ").replace(/\s{2,}/g," ").trim()}function _e(e,t,n){const i=e.children.filter((e=>e.name!==t)),a=e.children.filter((e=>e.name===t)),r=i[0],o=i[Math.max(1,i.length-1)],s=r?.computedValue(),c=o?.computedValue()||null;return e.assign({children:a}).enterScope(t).pushChildren(i).exitScope(n).define(s,c)}function Oe(e={},t=Ee){const n=xe.of({context:t.of(e)});return new A.Aj({start:n,reduce(e,n,i,a){if(19===n){const[n,i]=e.children.slice(-2);e=e.assign({value:t.of(n?.computedValue(),i?.computedValue())})}if(89===n&&(e=e.assign({value:t.of(...e.children.map((e=>e?.computedValue())))})),70===n){const[t,n]=e.children.slice(-2);e=e.assign({value:t?.computedValue()})}if(72===n){const[t,...n]=e.children;"get value"===t?.raw&&(e=function(e,t){if(!t.length)return e.assign({value:null});if("Name"===t[0].name&&(t=function(e){const t={};for(let n=0;n<e.length;n+=2){const[i,a]=e.slice(n,n+2);t[i.value]=a}return["m","key"].map((e=>t[e]))}(t)),2!==t.length)return e.assign({value:null});const[n,i]=t,a=i?.computedValue(),r=n?.computedValue();return r&&"object"==typeof r&&"string"==typeof a?e.assign({value:[we(a),a].reduce(((e,t)=>r.get(t)||e),null)}):e.assign({value:null})}(e,n))}const r=de[n];if(r)return e.enterScope(r);const o=ue[n];if(o){const{children:i,context:a}=e,r=i.slice(0,-1),s=Ae(i);let c=null;return 154===n&&(c=t.of(s?.computedValue())),155===n&&(c=t.of(a,s?.computedValue()).set("item",s?.computedValue())),e.assign({children:r}).enterScope(o).pushChild(s).assign({context:c||a})}const s=a.read(a.pos,i.pos);if(he[n])return e.exitScope(s);if(98===n){const n=e.children.filter((e=>"ContextEntry"!==e.name)),i=n[0],a=Ae(n);return _e(e,"ContextEntry",s).assign({value:t.of(e.value).set(i?.computedValue(),a?.computedValue())})}if(7===n||27===n)return _e(e,"InExpression",s);if(139===n)return e.define("partial",fe.of((e=>Ae(e.children)?.computedValue())));if(76===n){const t=Ae(e.children).computedValue();return e.define(t,1)}if(145===n||146===n||147===n){const t=e.children.slice(0,-1),n=Ae(e.children);return e.assign({children:t}).enterScope("ArithmeticExpression").pushChild(n)}if(148===n)return e.enterScope("ArithmeticExpression");if(9===n||10===n||101===n)return e.token(s);if(80===n)return e.literal(s.replace(/^"|"$/g,""));if(81===n)return e.literal("true"===s);if(79===n)return e.literal(parseFloat(s));if(161===n)return e.literal(null);if(47===n)return e.resolveName();if(8===n||100===n)return e.declareName();if((128===n||37===n)&&e.tokens.length>0)throw new Error("uncleared name");if(128===n){let t=e;for(;t.parent;)t=t.exitScope(s);return t}return e}})}const Se=Oe({});function Ae(e){return e[e.length-1]}const ke=(0,k.pn)({StringLiteral:k._A.string,NumericLiteral:k._A.number,BooleanLiteral:k._A.bool,"AtLiteral!":k._A.special(k._A.string),CompareOp:k._A.compareOperator,ArithOp:k._A.arithmeticOperator,"for if then else some every satisfies between return":k._A.controlKeyword,"in instance of and or":k._A.operatorKeyword,function:k._A.definitionKeyword,as:k._A.keyword,"Type/...":k._A.typeName,Wildcard:k._A.special(k._A.variableName),null:k._A.null,LineComment:k._A.lineComment,BlockComment:k._A.blockComment,'VariableName! "?"':k._A.variableName,"DateTimeConstructor! SpecialFunctionName!":k._A.function(k._A.special(k._A.variableName)),"List Interval":k._A.list,Context:k._A.definition(k._A.literal),"Name!":k._A.definition(k._A.variableName),"Key/Name! ContextEntryType/Name!":k._A.definition(k._A.propertyName),"PathExpression/VariableName!":k._A.function(k._A.propertyName),"FormalParameter/ParameterName!":k._A.function(k._A.definition(k._A.variableName)),"( )":k._A.paren,"[ ]":k._A.squareBracket,"{ }":k._A.brace,".":k._A.derefOperator,", ;":k._A.separator,"..":k._A.punctuation}),Ce={__proto__:null,for:10,in:32,return:36,if:40,then:42,else:44,some:48,every:50,satisfies:56,or:60,and:64,between:72,instance:86,of:89,days:101,time:103,duration:105,years:107,months:109,date:111,list:117,context:123,function:130,null:156,true:332,false:332,"?":170,external:186,not:211},Pe=A.U1.deserialize({version:14,states:"C|O`QYOOO`QYOOO$yQYOOOOQU'#Ce'#CeO%TQYO'#C`O&^QYO'#FQOOQQ'#Ff'#FfO&hQYO'#FfO`QYO'#DVOOQU'#En'#EnO(_Q^O'#D]OOQU'#D^'#D^OOQU'#D]'#D]OOQO'#Fn'#FnO*[QWO'#DvOOQQ'#D}'#D}OOQQ'#EO'#EOOOQQ'#EP'#EPO*aOWO'#ESO*[QWO'#EQOOQQ'#EQ'#EQOOQQ'#Ft'#FtOOQQ'#Fr'#FrOOQQ'#Fz'#FzOOQQ'#EU'#EUO`QYO'#EWOOQQ'#FS'#FSO*iQ^O'#FSO,`QYO'#EXO,gQWO'#EYOOQP'#GO'#GOO,lQXO'#EaOOQQ'#F{'#F{OOQQ'#FR'#FRQOQWOOOOQQ'#FT'#FTOOQQ'#F^'#F^O`QYO'#CoOOQQ'#F_'#F_O%TQYO'#CsO,zQYO'#DwOOQQ'#Fs'#FsO-PQYO'#EROOQO'#ER'#ERO`QYO'#EVO`QYO'#EUOOQO'#F|'#F|Q-XQWOOO-^QYO'#DRO.TQWO'#FbOOQO'#DT'#DTO.`QYO'#FfO.gQWOOO/^QYO'#CdO/kQYO'#FVOOQQ'#Cc'#CcO/pQYO'#FUOOQQ'#Cb'#CbO/xQYO,58zO`QYO,59iOOQQ'#Fc'#FcOOQQ'#Fd'#FdOOQQ'#Fe'#FeO`QYO,59qO`QYO,59qO`QYO,59qOOQQ'#Fl'#FlO/}QYO,5:^OOQQ'#Fm'#FmO`QYO,5:`O`QYO,59eO`QYO,59gO`QYO,59iO1|QYO,59iO2TQYO,59rOOQQ,5:i,5:iO2YQYO,59qOOQU-E8l-E8lO3|QYO'#FoOOQQ,5:b,5:bOOQQ,5:n,5:nOOQQ,5:l,5:lO4TQYO,5:rOOQQ,5;n,5;nO4_QYO,5:qO4lQWO,5:sO4qQYO,5:tOOQP'#Ee'#EeO5hQXO'#EdOOQO'#Ec'#EcO5oQWO'#EbO5tQWO'#GPO5|QWO,5:{O6RQYO,59ZO/kQYO'#FaOOQQ'#Cw'#CwO6YQYO'#F`OOQQ'#Cv'#CvO6bQYO,59_O6gQYO,5:cO6lQYO,5:mO4WQYO,5:qO6qQYO,5:pO`QYO'#EwQ-XQWOOO`QYO'#EmO7hQWO,5;|O`QYOOOOQR'#Cf'#CfOOQQ'#Ej'#EjO8bQYO,59OO`QYO,5;qOOQQ'#FY'#FYO%TQYO'#EkO8rQYO,5;pO`QYO1G.fOOQQ'#F]'#F]O9iQYO1G/TO<`QYO1G/]O<jQYO1G/]O<tQYO1G/]OOQQ1G/x1G/xO>hQYO1G/zO>oQYO1G/PO?xQYO1G/ROARQYO1G/TO`QYO1G/TOOQQ1G/T1G/TOAiQYO1G/^OBWQ^O'#CdOCjQYO'#FqOOQO'#Dz'#DzOCtQWO'#DyOCyQWO'#FpOOQO'#Dx'#DxOOQO'#D{'#D{ODRQWO,5<ZOOQQ1G0^1G0^O`QYO1G0]O`QYO'#EsODWQWO,5<]OOQQ1G0_1G0_ODcQWO'#E[ODnQWO'#F}OOQO'#EZ'#EZODvQWO1G0`OOQP'#Eu'#EuOD{QXO,5;OO`QYO,5:|OESQXO'#EvOE_QWO,5<kOOQQ1G0g1G0gO`QYO1G.uO`QYO,5;{O%TQYO'#ElOEgQYO,5;zO`QYO1G.yOEoQYO1G/}OOQO1G0X1G0XOOQO,5;c,5;cOOQO-E8u-E8uOOQO,5;X,5;XOOQO-E8k-E8kOEtQWOOOOQQ-E8h-E8hOEyQYO'#CmOOQQ1G1]1G1]OOQQ,5;V,5;VOOQQ-E8i-E8iOFWQYO7+$QOOQQ7+%f7+%fO`QYO7+$oOF}QYO,5:rOG[QWO7+$oOGaQYO'#D[OOQQ'#DZ'#DZOITQYO'#D_OIYQYO'#D_OI_QYO'#D_OIdQ`O'#DgOIiQ`O'#DjOInQ`O'#DnOOQQ7+$x7+$xO`QYO,5:eO%TQYO'#ErOIsQWO,5<[OOQQ1G1u1G1uOJyQYO7+%wOKWQYO,5;_OOQO-E8q-E8qOAiQYO,5:vO%TQYO'#EtOKeQWO,5<iOKmQYO7+%zOOQP-E8s-E8sOKtQYO1G0hOOQO,5;b,5;bOOQO-E8t-E8tOLOQYO7+$aOLVQYO1G1gOOQQ,5;W,5;WOOQQ-E8j-E8jOLaQYO7+$eOOQO7+%i7+%iO`QYO,59XOMWQYO<<HZOOQQ<<HZ<<HZO/}QYO'#EoONaQYO,59vO!!TQYO,59yO!!YQYO,59yO!!_QYO,59yO!!dQYO,5:RO%TQYO,5:UO!#RQbO,5:YO!#YQYO1G0POOQO,5;^,5;^OOQO-E8p-E8pO!#dQYO<<IcOOQQ<<Ic<<IcOOQO1G0b1G0bOOQO,5;`,5;`OOQO-E8r-E8rO!&fQYO'#E^OOQQ<<If<<IfO`QYO<<IfO`QYO<<G{O!']QYO1G.sOOQQ,5;Z,5;ZOOQQ-E8m-E8mO!'gQYO1G/eOOQQ1G/e1G/eO!'lQbO'#D]O!'}Q`O'#D[O!(YQ`O1G/mO!(_QWO'#DmO!(dQ`O'#FhOOQO'#Dl'#DlO!(lQ`O1G/pOOQO'#Dq'#DqO!(qQ`O'#FjOOQO'#Dp'#DpO!(yQ`O1G/tOOQQAN?QAN?QO!)OQYOAN=gOOQQ7+%P7+%PO!)uQ`O,59vOOQQ7+%X7+%XO!!dQYO,5:XO%TQYO'#EpO!*QQ`O,5<SOOQQ7+%[7+%[O!!dQYO'#EqO!*YQ`O,5<UO!*bQ`O7+%`OOQO1G/s1G/sOOQO,5;[,5;[OOQO-E8n-E8nOOQO,5;],5;]OOQO-E8o-E8oOAiQYO<<HzOOQQAN>fAN>fO/}QYO'#EoO!!dQYO<<HzO!*gQ`O7+%`O!*lQ`O1G/tO!#RQbO,5:YO!*qQ`O'#Dn",stateData:"!+U~O#rOS#sOSPOSQOS~OTsOZVO[UOdtOhvOivOr}Os}OviO!T{O!U{O!VxO!XzO!c!OO!g|O!igO!pyO!wjO#SnO#nRO#oRO$ZZO$i_O$j`O$k`O$laO$mbO~OTsO[UOdtOhvOivOr}Os}OviO!T{O!U{O!VxO!XzO!c!OO!g|O!igO!pyO!wjO#SnO#nRO#oRO$ZZO$i_O$j`O$k`O$laO$mbO~OZ!TO#]!UO~P#VO#nRO#oRO~OZ!^O[!^O]!_O^!_O_!`O`!kOn!hOp!iOr!]Os!]Ot!jO{!lO!i!fO#z!dOv$bX~O#l#tX$t#tX~P%]O$i!mOT$YXZ$YX[$YXd$YXh$YXi$YXr$YXs$YXv$YX!T$YX!U$YX!V$YX!X$YX!c$YX!g$YX!i$YX!p$YX!w$YX#S$YX#n$YX#o$YX$Z$YX$j$YX$k$YX$l$YX$m$YX~O#nRO#oROZ!PX[!PX]!PX^!PX_!PX`!PXn!PXp!PXr!PXs!PXt!PXv!PX{!PX!i!PX#l!PX#p!PX#z!PX$t!PX$O!PXx!PX#}!PX!g!PXe!PXb!PX#R!PXf!PXl!PX~Ov!pO~O$j`O$k`O~O#p!uOZ#vX[#vX]#vX^#vX_#vX`#vXn#vXp#vXr#vXs#vXt#vXv#vX{#vX!i#vX#l#vX#z#vX$t#vX$O#vXx#vX#}#vX!g#vXe#vXb#vX#R#vXf#vXl#vX~O!g$eP~P`Ov!xO~O#m!yO$j`O$k`O#R$sP~Op#VO~Op#WOv!uX~O$t#ZO~O#luX$OuX$tuXxuX#}uX!guXeuXbuX#RuXfuXluX~P%]O$O#]O#l$UXx$UX~O#l#[X~P&hOv#_O~OZ#`O[#`O]#`O^#`O_#`O#nRO#oRO#z#`O#{#`O$]WX~O`WXxWX$OWX~P.lO`#dO~O$O#eOb#xX~Ob#hO~O#nRO#oRO$ZZO~OTsOZVO[UOdtOhvOivOr}Os}O!T{O!U{O!VxO!XzO!c!OO!g|O!igO!pyO!wjO#SnO#nRO#oRO$ZZO$i_O$j`O$k`O$laO$mbO~Ov#rO~P0YO|#tO~O{!lO!i!fO#z!dOZya[ya]ya^ya_ya`yanyapyaryasyatyav$bX#lya$tya$Oyaxya#}ya!gyaeyabya#Ryafyalya~Ox$eP~P`Ox#}O#}$OO~P%]O#}$OO$O$PO!g$eX~P%]O!g$RO~O#nRO#oROx$qP~OZ#`O[#`O]#`O^#`O_#`O#m!yO#z#`O#{#`O~O$]#WX~P4|O$]$YO~O$O$ZO#R$sX~O#R$]O~Oe$^O~P%]O$O$`Ol$SX~Ol$bO~O!W$cO~O!T$dO~O#l!xa$t!xa$O!xax!xa#}!xa!g!xae!xab!xa#R!xaf!xal!xa~P%]O$O#]O#l$Uax$Ua~OZ#`O[#`O]#`O^#`O_#`O#nRO#oRO#z#`O#{#`O~O`Wa$]WaxWa$OWa~P7sO$O#eOb#xa~OZ!^O[!^O]!_O^!_O_!`O{!lO!i!fO#z!dOv$bX~O`qinqipqirqisqitqi#lqi$tqi$Oqixqi#}qi!gqieqibqi#Rqifqilqi~P8zO_!`O{!lO!i!fO#z!dOZyi[yi`yinyipyiryisyityiv$bX#lyi$tyi$Oyixyi#}yi!gyieyibyi#Ryifyilyi~O]!_O^!_O~P:rO]yi^yi~P:rO{!lO!i!fO#z!dOZyi[yi]yi^yi_yi`yinyipyiryisyityiv$bX#lyi$tyi$Oyixyi#}yi!gyieyibyi#Ryifyilyi~O!g$pO~P%]O`!kOp!iOr!]Os!]Ot!jOnmi#lmi$tmi$Omixmi#}mi!gmiemibmi#Rmifmilmi~P8zO`!kOr!]Os!]Ot!jOnoipoi#loi$toi$Ooixoi#}oi!goieoiboi#Roifoiloi~P8zO`!kOn!hOp$qOr!]Os!]Ot!jO~P8zO!S$vO!V$wO!X$xO![$yO!_$zO!c${O#nRO#oRO$ZZO~OZ#bX[#bX]#bX^#bX_#bX`#bXn#bXp#bXr#bXs#bXt#bXv#bXx#bX{#bX!i#bX#n#bX#o#bX#p#bX#z#bX$O#bX~P.lO$O$POx$eX~P%]O$]$}O~O$O%OOx$dX~Ox%QO~O$O$PO!g$eax$ea~O$]%UOx#OX$O#OX~O$O%VOx$qX~Ox%XO~O$]#Wa~P4|O#m!yO$j`O$k`O~O$O$ZO#R$sa~O$O$`Ol$Sa~O!U%cO~OxrO~O#}%dObaX$OaX~P%]O#lSq$tSq$OSqxSq#}Sq!gSqeSqbSq#RSqfSqlSq~P%]Ox#}O#}$OO$OuX~P%]Ox%fO~O#z%gOZ!OX[!OX]!OX^!OX_!OX`!OXn!OXp!OXr!OXs!OXt!OXv!OX{!OX!i!OX#l!OX$t!OX$O!OXx!OX#}!OX!g!OXe!OXb!OX#R!OXf!OXl!OX~Op%iO~Op%jO~Op%kO~O!]%lO~O!]%mO~O!]%nO~O$O%OOx$da~OZ!^O[!^O]!_O^!_O_!`O`!kOn!hOp!iOr!]Os!]Ot!jO{!lO#z!dOv$bX~Ox%sO!g%sO!i%rO~PI{O!g#ga$O#gax#ga~P%]O$O%VOx$qa~O#P%yO~P`O#R#Ui$O#Ui~P%]Of%zO~P%]Ol$Ti$O$Ti~P%]O#lgq$tgq$Ogqxgq#}gq!ggqegqbgq#Rgqfgqlgq~P%]O`qynqypqyrqysqytqy#lqy$tqy$Oqyxqy#}qy!gqyeqybqy#Rqyfqylqy~P8zO#z%gOZ!Oa[!Oa]!Oa^!Oa_!Oa`!Oan!Oap!Oar!Oas!Oat!Oav!Oa{!Oa!i!Oa#l!Oa$t!Oa$O!Oax!Oa#}!Oa!g!Oae!Oab!Oa#R!Oaf!Oal!Oa~O!T&OO~O!W&OO~O!T&PO~O!S$vO!V$wO!X$xO![$yO!_$zO!c&uO#nRO#oRO$ZZO~O!Y$^P~P!!dOx!mi$O!mi~P%]OT$aXZ$aX[$aX]!yy^!yy_!yy`!yyd$aXh$aXi$aXn!yyp!yyr$aXs$aXt!yyv$aX{!yy!T$aX!U$aX!V$aX!X$aX!c$aX!g$aX!i$aX!p$aX!w$aX#S$aX#l!yy#n$aX#o$aX#z!yy$Z$aX$i$aX$j$aX$k$aX$l$aX$m$aX$t!yy$O!yyx!yy#}!yye!yyb!yy#R!yyf!yyl!yy~O#l#QX$t#QX$O#QXx#QX#}#QX!g#QXe#QXb#QX#R#QXf#QXl#QX~P%]Obai$Oai~P%]O!U&_O~O#nRO#oRO!Y!PX#z!PX$O!PX~O#z&pO!Y!OX$O!OX~O!Y&aO~O$]&bO~O$O&cO!Y$[X~O!Y&eO~O$O&fO!Y$^X~O!Y&hO~O#lc!R$tc!R$Oc!Rxc!R#}c!R!gc!Rec!Rbc!R#Rc!Rfc!Rlc!R~P%]O#z&pO!Y!Oa$O!Oa~O$O&cO!Y$[a~O$O&fO!Y$^a~O$_&nO~O$_&qO~O!Y&rO~O!]&tO~O$Z$j~$j$k_^$i#zQP]Q~",goto:"E}$tPPPP$uP%n%q%w&Z'tPPPPPP'}P$uPPP$uPP(Q(TP$uP$uP$uPPP(ZP(fP$u$uPP(o)U)a*n)UPPPPPPP)UPP)UP+s+v)UP+|,S$uP$uP$u,Z-S-V-]-SP-e.^-e-e/^0VP$u1O$u1w1w2p2sP2yPP1w3P3V/Y3ZPP3cP3f3m3s3y4P5[5f5l5r5x6P6V6]6cPPPPPPPP6i6r8y9r:k:nPP:rPP:x:{;t<m<p<t<y=h>W>wP?pP?sP?w@jA]BUB[B_$uBeBePPPPPC^8yDVEOEREz!mjOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%zR![SQ!YSR$m#eS!WS#eS#Qw$`W#w!p!x%O%VT&T%m&c#WXOPQWYilu|}!]!a!b!c!e!g!h!i!j!k#Z#]#_#c#g#r#t$O$P$Y$^$_$b$q$}%U%X%d%g%l%n%y%z&Q&b&f&n&p&q&tb!VSw!x#e$`%O%V%m&cU#a!V#b#uR#u!pU#a!V#b#uT$W!z$XR$l#cR#UwQ#SwR%`$`U!RQ#_#rQ#s!kR$g#]QrQQ$i#_R$s#rQ$|#tQ%t%UQ&S%lU&X%n&f&tQ&i&bT&o&n&qc$u#t%U%l%n&b&f&n&q&t!lkOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%zQ#m!eU$t#t%U&nS%|%g&p]&R%l%n&b&f&q&t#V[OPQWilu|}!]!a!b!c!e!g!h!i!j!k!p#Z#]#_#c#g#r#t$O$P$Y$^$_$b$q$}%U%X%d%g%l%n%y%z&b&f&n&p&q&tR&W%mQ&U%mR&j&cQ&[%nR&s&tS&Y%n&tR&l&f!m]OPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%zR#|!pQ#y!pR%p%OS#x!p%OT$S!x%V!meOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%z!leOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%zQ!rbT!{o$Z!mcOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%z!mdOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%z!mhOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%z!mpOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%zR$V!xQ$T!xR%u%VQ%x%XR&]%yQ!}oR%[$ZT!|o$ZS!zo$ZT$W!z$XRrQS#b!V#uR$j#bQ#f!YR$n#fQ$a#SR%a$aQ#^!RR$h#^!vYOPQWilu|}!]!a!b!c!e!g!h!i!j!k!p#Z#]#_#c#g#r#t$O$P$Y$^$_$b$q$}%U%X%d%g%y%z&nS!oY&Q_&Q%l%n&b&f&p&q&tQ%h$tS%}%h&`R&`&RQ&d&UR&k&dQ&g&YR&m&gQ%P#yR%q%PS$Q!v#vR%T$QQ%W$TR%v%WQ$X!zR%Y$XQ$[!}R%]$[Q#[!PR$f#[QrOQ!PPR$e#ZUTOP#ZW!QQ!k#]#_Q!nWQ!tiQ!vlQ#PuQ#X|Q#Y}Q#i!]Q#j!aQ#k!bQ#l!cQ#n!gQ#o!hQ#p!iQ#q!jQ#v!pQ$k#cQ$o#gQ$r#rQ%R$OQ%S$PQ%Z$YQ%^$^Q%_$_Q%b$bQ%e$qQ%o$}S%w%X%yQ%{%dR&^%z!mqOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%z!mSOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%zR!ZST!XS#eQ#c!WR$_#QR#g![!muOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%z!mwOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%zR#TwT#Rw$`V!SQ#_#r!X!aT!Q!t!v#P#X#Y#i#n#o#p#q#v$k$o$r%R%S%Z%^%_%b%e%o%w%{&^!Z!bT!Q!t!v#P#X#Y#i#j#n#o#p#q#v$k$o$r%R%S%Z%^%_%b%e%o%w%{&^!]!cT!Q!t!v#P#X#Y#i#j#k#n#o#p#q#v$k$o$r%R%S%Z%^%_%b%e%o%w%{&^!mWOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%zR&V%mT&Z%n&t!a!eT!Q!n!t!v#P#X#Y#i#j#k#l#n#o#p#q#v$k$o$r%R%S%Z%^%_%b%e%o%w%{&^!a!gT!Q!n!t!v#P#X#Y#i#j#k#l#n#o#p#q#v$k$o$r%R%S%Z%^%_%b%e%o%w%{&^!m^OPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%zQ!q^R!scR#z!pQ!wlR#{!p!mfOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%z!mlOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%z!mmOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%zR$U!x!moOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%zR#Oo",nodeNames:" LineComment BlockComment Expression ForExpression for InExpressions InExpression Name Identifier Identifier ArithOp ArithOp ArithOp ArithOp ArithOp in IterationContext return IfExpression if then else QuantifiedExpression some every InExpressions InExpression satisfies Disjunction or Conjunction and Comparison CompareOp CompareOp between PositiveUnaryTest ( PositiveUnaryTests ) ArithmeticExpression InstanceOfExpression instance of Type QualifiedName VariableName BacktickIdentifier SpecialType days time duration years months date > ListType list < ContextType context ContextEntryTypes ContextEntryType FunctionType function ArgumentTypes ArgumentType PathExpression ] FilterExpression [ FunctionInvocation SpecialFunctionName NamedParameters NamedParameter ParameterName PositionalParameters null NumericLiteral StringLiteral BooleanLiteral DateTimeLiteral DateTimeConstructor AtLiteral ? SimplePositiveUnaryTest Interval ParenthesizedExpression List FunctionDefinition FormalParameters FormalParameter external FunctionBody } { Context ContextEntry Key Name Identifier Expressions UnaryTests Wildcard not",maxTerm:174,context:Se,nodeProps:[["group",-17,4,19,23,29,31,33,41,42,68,70,72,85,86,88,89,90,97,"Expr",47,"Expr Expr",-5,78,79,80,81,82,"Expr Literal"],["closedBy",38,")",71,"]",96,"}"],["openedBy",40,"(",69,"[",95,"{"]],propSources:[ke],skippedNodes:[0,1,2],repeatNodeCount:14,tokenData:"2t~RvXY#iYZ$^Z[#i]^$^pq#iqr$crs$nwx*[xy*ayz*fz{*k{|*x|}*}}!O+S!O!P+a!P!Q,k!Q![.f![!].}!]!^/S!^!_/X!_!`$i!`!a/h!b!c/r!}#O/w#P#Q/|#Q#R*s#S#T0R#o#p2j#q#r2o$f$g#i#BY#BZ#i$IS$I_#i$I|$I}$^$I}$JO$^$JT$JU#i$KV$KW#i&FU&FV#i?HT?HU#i~#nY#r~XY#iZ[#ipq#i$f$g#i#BY#BZ#i$IS$I_#i$JT$JU#i$KV$KW#i&FU&FV#i?HT?HU#i~$cO#s~~$fP!_!`$i~$nOr~~$qXOY$nYZ%^Zr$nrs'us#O$n#O#P'|#P;'S$n;'S;=`)c<%lO$n~%aVOr%^rs%vs#O%^#O#P%{#P;'S%^;'S;=`'S<%lO%^~%{O$j~~&OWOr%^rs&hs#O%^#O#P%{#P;'S%^;'S;=`'Y;=`<%l%^<%lO%^~&mV$j~Or%^rs%vs#O%^#O#P%{#P;'S%^;'S;=`'S<%lO%^~'VP;=`<%l%^~']WOr%^rs%vs#O%^#O#P%{#P;'S%^;'S;=`'S;=`<%l%^<%lO%^~'|O$j~$k~~(PYOY$nYZ$nZr$nrs(os#O$n#O#P'|#P;'S$n;'S;=`)i;=`<%l$n<%lO$n~(vX$j~$k~OY$nYZ%^Zr$nrs'us#O$n#O#P'|#P;'S$n;'S;=`)c<%lO$n~)fP;=`<%l$n~)lYOY$nYZ%^Zr$nrs'us#O$n#O#P'|#P;'S$n;'S;=`)c;=`<%l$n<%lO$n~*aO#{~~*fOv~~*kOx~~*pP^~z{*s~*xO_~~*}O[~~+SO$O~R+XPZP!`!a+[Q+aO$_Q~+fQ#z~!O!P+l!Q![+q~+qO#}~~+vR$i~!Q![+q!g!h,P#X#Y,P~,SR{|,]}!O,]!Q![,c~,`P!Q![,c~,hP$i~!Q![,c~,pQ]~z{,v!P!Q-}~,yTOz,vz{-Y{;'S,v;'S;=`-w<%lO,v~-]VOz,vz{-Y{!P,v!P!Q-r!Q;'S,v;'S;=`-w<%lO,v~-wOQ~~-zP;=`<%l,v~.SSP~OY-}Z;'S-};'S;=`.`<%lO-}~.cP;=`<%l-}~.kS$i~!O!P.w!Q![.f!g!h,P#X#Y,P~.zP!Q![+q~/SO$]~~/XO$t~R/`P!]QsP!_!`/cP/hOsPR/oP!YQsP!_!`/c~/wO$m~~/|O!i~~0RO!g~~0UVO#O0R#O#P0k#P#S0R#S#T1r#T;'S0R;'S;=`1w<%lO0R~0nWO#O0R#O#P0k#P#S0R#S#T1W#T;'S0R;'S;=`1};=`<%l0R<%lO0R~1]V$Z~O#O0R#O#P0k#P#S0R#S#T1r#T;'S0R;'S;=`1w<%lO0R~1wO$Z~~1zP;=`<%l0R~2QWO#O0R#O#P0k#P#S0R#S#T1r#T;'S0R;'S;=`1w;=`<%l0R<%lO0R~2oO#S~~2tO#R~",tokenizers:[le,pe,me,0,1],topRules:{Expression:[0,3],Expressions:[1,102],UnaryTests:[2,103]},dialects:{camunda:2568},dynamicPrecedences:{31:-1,68:1,72:-1,74:-1},specialized:[{term:122,get:e=>Ce[e]||-1}],tokenPrec:2571});class Te extends Ee{constructor(e={entries:{}}){super(e);const t=this.value.entries=this.value.entries||{};for(const[e,n]of Object.entries(t))n instanceof Te||(t[e]=Te.of(n))}getKeys(){return Object.keys(this.value.entries)}get(e){const t=this.value.entries[e];if(!t)return t;const n=t?.value.atomicValue;return n?.fn?n:t}set(e,t){return this.constructor.of({...this.value,entries:{...this.value.entries,[e]:t}})}static __unwrap(e){return this.isAtomic(e)?e instanceof this?e.value:{atomicValue:e}:e}static __merge(e,t){const{entries:n={},...i}=this.__unwrap(e),{entries:a={},...r}=this.__unwrap(t);return{...i,...r,entries:super.__merge(n,a)}}}function Re(e){const t=[];return e.forEach((e=>{e.origin.forEach((n=>{const i=function(e,t){const n=e.scope!==t?Ne(e,t)||$e(e,t):$e(e,t)||Ne(e,t);if(!n)return;return{expression:n,unresolved:Me(De(n))}}(e,n);if(!i)return;const{expression:a,unresolved:r}=i;t.push({variable:e,expression:a,unresolved:r})}))})),function(e,t){const n=[];e.forEach((e=>{const{variable:t,unresolved:i}=e,a=n.findIndex((({unresolved:e})=>e.includes(t.name)));if(a>-1)return void n.splice(a,0,e);const r=n.findLastIndex((({variable:e})=>i.includes(e.name)));r>-1?n.splice(r+1,0,e):n.push(e)}));const i={name:"OuterContext",entries:Be(t.filter((t=>!e.find((({variable:e})=>{})))))},a=[];return n.forEach((({variable:e,expression:t})=>{const n=De(t,function(e,t){const n={entries:{}},i=t.origin.flatMap((e=>[e,...y(e)]));for(const t in e.entries){const a=e.entries[t];i.find((e=>e.id===a.scope.id))&&(n.entries[t]=a)}return n}(i,e));let r=n.computedValue();r instanceof Te||(r=Te.of(r)),r.scope=e.scope,i.entries[e.name]=r,a.push({newVariable:je({[e.name]:r})[0],oldVariable:e})})),a.map((({newVariable:e,oldVariable:t})=>t?{...e,...t}:e))}(t,e)}function De(e,t={}){const n=Oe(t,Te);let i=n.start;const a=new A.Aj({start:n.start,reduce(...e){const t=n.reduce(...e);return i=t,t}}),r=Pe.configure({contextTracker:a,strict:!0});try{r.parse(e)}catch(e){return i}return i}function Ne(e,t){const n=d(t,"zeebe:IoMapping")[0];if(!n)return;let i;if(i=t===e.scope?n.inputParameters:n.outputParameters,!i)return;const a=i.slice().reverse().find((t=>t.target===e.name));return a&&a.source?a.source.substring(1):void 0}function $e(e,t){const n=d(t,"zeebe:Script")[0];if(n&&n.expression)return n.resultVariable===e.name?n.expression.substring(1):void 0}function Me(e){const t=[];return t.push(...e.children.flatMap(Me)),"VariableName"!==e.name||e.value||t.push(e.raw),t}function Be(e){if(!e)return;const t={};return e.forEach((e=>{t[e.name]={...e},t[e.name].entries=Be(e.entries)})),t}function je(e){if(!e)return;const t=[];for(const n in e){let i=e[n];i instanceof Te&&(i=i.value),i?t.push({...Fe(i),entries:je(i.entries),name:n,scope:i.scope}):t.push({name:n})}return t}function Fe(e){return{...e,type:Qe(e),info:Ie(e)}}function Qe(e){return e?e.type?e.type:e.entries&&Object.keys(e.entries).length?"Context":e.atomicValue?(t=typeof e.atomicValue).charAt(0).toUpperCase()+t.slice(1):"":"";var t}function Ie(e){return e?e.info?e.info:e.atomicValue?""+e.atomicValue:"":""}var Le=n(72794);class ze extends Le.A{getVariables(e){const t=[],n=d(e,"zeebe:TaskHeaders")[0];if(!n||!n.values)return;const i=n.values,a=i.find((e=>"resultVariable"===e.key)),r=i.find((e=>"resultExpression"===e.key));if(a&&a.value&&t.push({name:a.value}),r&&r.value){const e=je(De(r.value.substring(1)).computedValue());e&&e.length>0&&t.push(...e[0].entries)}return t}}const Xe=ze,Ve={__init__:["variableResolver","connectorVariableProvider"],variableResolver:["type",class extends b{constructor(e,t){super(e,t),this._baseExtractor=S.V8,e.on("variableResolver.parseVariables",2e3,this._resolveVariables)}async getVariablesForElement(e,t){const n=await super.getVariablesForElement(e),i=(0,a.Cf)(e);if(!t)return n;const r=h(i);if(!r)return n;const o=function(e,t){const n=[];if((0,a.is)(e,"zeebe:Input")){const i=t.inputParameters,a=i.slice(i.indexOf(e)).map((e=>e.target));n.push(...a)}const i=t.outputParameters;if((0,a.is)(e,"zeebe:Output")){const t=i.slice(i.indexOf(e)).map((e=>e.target));n.push(...t)}else if(i){const e=i.map((e=>e.target));n.push(...e)}return n}(t,r);return n.filter((e=>e.origin.length>1||e.origin[0]!==i||!(!(0,a.is)(t,"zeebe:Output")||!e.provider.find((e=>e!==this._baseExtractor)))||!o.includes(e.name)))}_resolveVariables(e,t){const n=t.variables,i={};for(const e in n){const t=n[e],a=Re(t);i[e]=[...t,...a]}t.variables=i}}],connectorVariableProvider:["type",Xe]},Ye={__init__:["variableResolver"],variableResolver:["type",class extends b{constructor(e,t){super(e,t),this._baseExtractor=i.V}}]}},93693:(e,t,n)=>{"use strict";n.d(t,{V:()=>o,t:()=>r});var i=n(70868),a=n(76522);function r(e,t=void 0){const n=(0,i.Cf)(e).get("extensionElements");if(!n)return[];const a=n.get("values");return a&&a.length?t?a.filter((e=>(0,i.is)(e,t))):a:[]}function o(e,t,n,i){(0,a.cy)(n)||(n=[n]);const r=t.get("extensionElements"),o=r.get("values").filter((e=>!n.includes(e)));i.execute("element.updateModdleProperties",{element:e,moddleElement:r,properties:{values:o}})}}}]);
//# sourceMappingURL=6238.js.map