/*! For license information please see 7578.js.LICENSE.txt */
(self.webpackChunkcamunda_modeler_client=self.webpackChunkcamunda_modeler_client||[]).push([[7578],{486:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(58120);function o(e,t,n){this._eventBus=e,this._canvas=t,this._translate=n,e.on("diagram.init",(function(){this._init()}),this),e.on("import.done",(function(e){e.error||this.update()}),this),this.HTML_MARKUP='<div class="dmn-definitions"><div class="dmn-definitions-name" title="'+this._translate("Definition name")+'" spellcheck="false"></div><div class="dmn-definitions-id" title="'+this._translate("Definition ID")+'" spellcheck="false"></div></div>'}o.$inject=["eventBus","canvas","translate"],o.prototype._init=function(){var e=this._canvas,t=this._eventBus,n=e.getContainer(),o=this._container=(0,i.zm)(this.HTML_MARKUP);n.appendChild(o),this.nameElement=(0,i.P)(".dmn-definitions-name",this._container),this.idElement=(0,i.P)(".dmn-definitions-id",this._container),i.Mm.bind(o,".dmn-definitions-name, .dmn-definitions-id","mousedown",(function(e){e.stopPropagation()})),t.fire("definitionIdView.create",{html:o})},o.prototype.update=function(){var e=this._canvas.getRootElement().businessObject;this.nameElement.textContent=e.name,this.idElement.textContent=e.id};var s=n(11847);const r={__depends__:[n(31323).A],__init__:["definitionPropertiesView","definitionPropertiesPaletteAdapter"],definitionPropertiesView:["type",o],definitionPropertiesPaletteAdapter:["type",s.A]}},11847:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(58120);function o(e,t){function n(e,n){var o=t.getContainer();(0,i.Ly)(o).toggle(e,n)}e.on("palette.create",(function(){n("with-palette",!0)})),e.on("palette.changed",(function(e){n("with-palette-two-column",e.twoColumn)}))}o.$inject=["eventBus","canvas"]},13337:function(e){var t;t="undefined"!=typeof global?global:this,e.exports=function(e){if(e.CSS&&e.CSS.escape)return e.CSS.escape;var t=function(e){if(0==arguments.length)throw new TypeError("`CSS.escape` requires an argument.");for(var t,n=String(e),i=n.length,o=-1,s="",r=n.charCodeAt(0);++o<i;)0!=(t=n.charCodeAt(o))?s+=t>=1&&t<=31||127==t||0==o&&t>=48&&t<=57||1==o&&t>=48&&t<=57&&45==r?"\\"+t.toString(16)+" ":0==o&&1==i&&45==t||!(t>=128||45==t||95==t||t>=48&&t<=57||t>=65&&t<=90||t>=97&&t<=122)?"\\"+n.charAt(o):n.charAt(o):s+="ï¿½";return s};return e.CSS||(e.CSS={}),e.CSS.escape=t,t}(t)},15210:e=>{"use strict";e.exports=JSON.parse('{"name":"Modeler","uri":"http://camunda.org/schema/modeler/1.0","prefix":"modeler","xml":{"tagAlias":"lowerCase"},"associations":[],"types":[{"name":"Definitions","isAbstract":true,"extends":["dmn:Definitions"],"properties":[{"name":"executionPlatform","isAttr":true,"type":"String"},{"name":"executionPlatformVersion","isAttr":true,"type":"String"}]}],"enumerations":[]}')},19365:(e,t,n)=>{"use strict";n.d(t,{Gv:()=>a,HP:()=>g,O9:()=>s,Si:()=>h,TS:()=>p,Tj:()=>m,Ul:()=>f,Up:()=>x,cy:()=>r,jJ:()=>d,kp:()=>_,pb:()=>u,sg:()=>b});const i=Object.prototype.toString,o=Object.prototype.hasOwnProperty;function s(e){return void 0!==e}function r(e){return"[object Array]"===i.call(e)}function a(e){return"[object Object]"===i.call(e)}function l(e){const t=i.call(e);return"[object Function]"===t||"[object AsyncFunction]"===t||"[object GeneratorFunction]"===t||"[object AsyncGeneratorFunction]"===t||"[object Proxy]"===t}function c(e,t){return!(null==e)&&o.call(e,t)}function u(e,t){const n=function(e){return l(e)?e:t=>t===e}(t);let i=[];return d(e,(function(e,t){n(e,t)&&i.push(e)})),i}function d(e,t){let n,i;if(void 0===e)return;const o=r(e)?v:y;for(let s in e)if(c(e,s)&&(n=e[s],i=t(n,o(s)),!1===i))return n}function p(e,t,n){return d(e,(function(e,i){n=t(n,e,i)})),n}function h(e,t){return!!p(e,(function(e,n,i){return e&&t(n,i)}),!0)}function m(e,t){let n=[];return d(e,(function(e,i){n.push(t(e,i))})),n}function g(e){return e&&Object.keys(e)||[]}function f(e,t){t=function(e){return l(e)?e:t=>t[e]}(t);let n=[];return d(e,(function(e,i){let o=t(e,i),s={d:o,v:e};for(var r=0;r<n.length;r++){let{d:e}=n[r];if(o<e)return void n.splice(r,0,s)}n.push(s)})),m(n,(e=>e.v))}function y(e){return e}function v(e){return Number(e)}function b(e,t){let n,i,o,s;function r(n){let r=Date.now(),c=n?0:s+t-r;if(c>0)return a(c);e.apply(o,i),l()}function a(e){n=setTimeout(r,e)}function l(){n&&clearTimeout(n),n=s=i=o=void 0}function c(...e){s=Date.now(),i=e,o=this,n||a(t)}return c.flush=function(){n&&r(!0),l()},c.cancel=l,c}function _(e,...t){return Object.assign(e,...t)}function x(e,t){let n={},i=Object(e);return d(t,(function(t){t in i&&(n[t]=e[t])})),n}},22696:e=>{"use strict";var t=/["'&<>]/;e.exports=function(e){var n,i=""+e,o=t.exec(i);if(!o)return i;var s="",r=0,a=0;for(r=o.index;r<i.length;r++){switch(i.charCodeAt(r)){case 34:n="&quot;";break;case 38:n="&amp;";break;case 39:n="&#39;";break;case 60:n="&lt;";break;case 62:n="&gt;";break;default:continue}a!==r&&(s+=i.substring(a,r)),a=r+1,s+=n}return a!==r?s+i.substring(a,r):s}},23906:(e,t,n)=>{"use strict";n.d(t,{Cf:()=>a,Fm:()=>p,Mz:()=>r,TO:()=>u,Xy:()=>s,f7:()=>c,is:()=>o,mG:()=>l});var i=n(53656);function o(e,t){var n=a(e);return n&&"function"==typeof n.$instanceOf&&n.$instanceOf(t)}function s(e){return o(e,"dmn:InputClause")}function r(e){return o(e,"dmn:OutputClause")}function a(e){return e&&e.businessObject||e}function l(e){return a(e).name}function c(e,t){return(0,i.zN)(t,(function(t){return o(e,t)}))}function u(e){var t=a(e);if(o(t,"dmn:Decision"))return t.get("decisionLogic");if(o(t,"dmn:BusinessKnowledgeModel")){var n=t.get("encapsulatedLogic");return n&&n.get("body")}}const d="https://www.omg.org/spec/DMN/20191111/FEEL/";function p(e){for(let t=e;t;t=t.$parent){const e=t.get("expressionLanguage");if(e)return!(e!==d&&!/feel/i.test(e));if(o(t,"dmn:FunctionDefinition"))return"FEEL"===(t.get("kind")||"FEEL")}return!0}},35326:(e,t,n)=>{"use strict";n.d(t,{O:()=>o});var i=n(53656);function o(e){return function(){if(!window.Promise)throw new Error("Promises is not supported in this environment. Please polyfill Promise.");var t=arguments.length;if(!(t>=1&&(0,i.Tn)(arguments[t-1])))return e.apply(this,arguments);var n=arguments[t-1];console.warn(new Error("Passing callbacks to "+e.name.replace("bound ","")+" is deprecated and will be removed in a future major release. Please switch to promises: https://bpmn.io/l/moving-to-promises.html"));var o=Array.prototype.slice.call(arguments,0,-1);e.apply(this,o).then((function(e){var t=Object.keys(e)[0];return n(null,e[t])}),(function(e){return n(e,e.warnings)}))}}},39569:(e,t,n)=>{"use strict";function i(e,t){return t.forEach((function(t){t&&"string"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(n){if("default"!==n&&!(n in e)){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}}))})),Object.freeze(e)}n.d(t,{Mm:()=>m,P:()=>v,TF:()=>b,f0:()=>p,zm:()=>y}),Object.prototype.toString,Object.prototype.hasOwnProperty;const o=Object.prototype.toString;function s(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}s.prototype.add=function(e){return this.list.add(e),this},s.prototype.remove=function(e){return"[object RegExp]"==o.call(e)?this.removeMatching(e):(this.list.remove(e),this)},s.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},s.prototype.toggle=function(e,t){return void 0!==t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this},s.prototype.array=function(){return Array.from(this.list)},s.prototype.has=s.prototype.contains=function(e){return this.list.contains(e)};var r,a,l,c={};function u(){r=window.addEventListener?"addEventListener":"attachEvent",a=window.removeEventListener?"removeEventListener":"detachEvent",l="addEventListener"!==r?"on":""}var d,p=i({__proto__:null,bind:c.bind=function(e,t,n,i){return r||u(),e[r](l+t,n,i||!1),n},unbind:c.unbind=function(e,t,n,i){return a||u(),e[a](l+t,n,i||!1),n},default:c},[c]),h=["focus","blur"],m={bind:function(e,t,n,i,o){return-1!==h.indexOf(n)&&(o=!0),p.bind(e,n,(function(n){var o=n.target||n.srcElement;n.delegateTarget=function(e,t){var n=e;return n&&"function"==typeof n.closest&&n.closest(t)||null}(o,t),n.delegateTarget&&i.call(e,n)}),o)},unbind:function(e,t,n,i){return-1!==h.indexOf(t)&&(i=!0),p.unbind(e,t,n,i)}},g=!1;"undefined"!=typeof document&&((d=document.createElement("div")).innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',g=!d.getElementsByTagName("link").length,d=void 0);var f={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:g?[1,"X<div>","</div>"]:[0,"",""]};f.td=f.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],f.option=f.optgroup=[1,'<select multiple="multiple">',"</select>"],f.thead=f.tbody=f.colgroup=f.caption=f.tfoot=[1,"<table>","</table>"],f.polyline=f.ellipse=f.polygon=f.circle=f.text=f.line=f.path=f.rect=f.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];var y=function(e,t){if("string"!=typeof e)throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var i=n[1];if("body"==i)return(o=t.createElement("html")).innerHTML=e,o.removeChild(o.lastChild);var o,s=Object.prototype.hasOwnProperty.call(f,i)?f[i]:f._default,r=s[0],a=s[1],l=s[2];for((o=t.createElement("div")).innerHTML=a+e+l;r--;)o=o.lastChild;if(o.firstChild==o.lastChild)return o.removeChild(o.firstChild);for(var c=t.createDocumentFragment();o.firstChild;)c.appendChild(o.removeChild(o.firstChild));return c};function v(e,t){return(t=t||document).querySelector(e)}function b(e){e.parentNode&&e.parentNode.removeChild(e)}},41258:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var i=n(54988),o=n(53656),s=n(58886),r=n(53112);function a(e,t){s.ij.call(this,e,t)}a.prototype=Object.create(s.ij.prototype),a.prototype.fromXML=function(e,t,n){(0,o.Kg)(t)||(n=t,t="dmn:Definitions");var i=new r.m((0,o.kp)({model:this,lax:!0},n)),s=i.handler(t);return i.fromXML(e,s)},a.prototype.toXML=function(e,t){var n=new r.A(t);return new Promise((function(t,i){try{return t({xml:n.toXML(e)})}catch(e){return i(e)}}))};var l={dc:{name:"DC",prefix:"dc",uri:"http://www.omg.org/spec/DMN/20180521/DC/",types:[{name:"Dimension",properties:[{name:"width",isAttr:!0,type:"Real"},{name:"height",isAttr:!0,type:"Real"}]},{name:"Bounds",properties:[{name:"height",isAttr:!0,type:"Real"},{name:"width",isAttr:!0,type:"Real"},{name:"x",isAttr:!0,type:"Real"},{name:"y",isAttr:!0,type:"Real"}]},{name:"Point",properties:[{name:"x",isAttr:!0,type:"Real"},{name:"y",isAttr:!0,type:"Real"}]},{name:"Color",properties:[{name:"red",type:"UML_Standard_Profile.mdzip:eee_1045467100323_917313_65"},{name:"green",type:"UML_Standard_Profile.mdzip:eee_1045467100323_917313_65"},{name:"blue",type:"UML_Standard_Profile.mdzip:eee_1045467100323_917313_65"}]}],associations:[],enumerations:[{name:"AlignmentKind",literalValues:[{name:"start"},{name:"center"},{name:"end"}]}]},di:{name:"DI",prefix:"di",uri:"http://www.omg.org/spec/DMN/20180521/DI/",types:[{name:"DiagramElement",isAbstract:!0,properties:[{name:"extension",type:"Extension"},{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"style",isReference:!0,type:"Style",xml:{serialize:"property"}},{name:"sharedStyle",isReference:!0,isVirtual:!0,type:"Style"}]},{name:"Diagram",superClass:["DiagramElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,type:"Real"}]},{name:"Shape",isAbstract:!0,properties:[{name:"bounds",type:"dc:Bounds"}],superClass:["DiagramElement"]},{name:"Edge",isAbstract:!0,properties:[{name:"waypoint",type:"dc:Point",isMany:!0,xml:{serialize:"property"}}],superClass:["DiagramElement"]},{name:"Style",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"}]},{name:"Extension",properties:[{name:"values",isMany:!0,type:"Element"}]}],associations:[],enumerations:[],xml:{tagAlias:"lowerCase"}},dmn:{name:"DMN",prefix:"dmn",uri:"https://www.omg.org/spec/DMN/20191111/MODEL/",types:[{name:"AuthorityRequirement",superClass:["DMNElement"],properties:[{name:"requiredAuthority",type:"DMNElementReference",xml:{serialize:"property"}},{name:"requiredDecision",type:"DMNElementReference",xml:{serialize:"property"}},{name:"requiredInput",type:"DMNElementReference",xml:{serialize:"property"}}]},{name:"ItemDefinition",superClass:["NamedElement"],properties:[{name:"typeRef",type:"String"},{name:"allowedValues",type:"UnaryTests",xml:{serialize:"property"}},{name:"typeLanguage",type:"String",isAttr:!0},{name:"itemComponent",type:"ItemDefinition",isMany:!0,xml:{serialize:"property"}},{name:"functionItem",type:"FunctionItem"},{name:"isCollection",isAttr:!0,type:"Boolean"}]},{name:"Definitions",superClass:["NamedElement"],properties:[{name:"import",type:"Import",isMany:!0},{name:"itemDefinition",type:"ItemDefinition",isMany:!0},{name:"drgElement",type:"DRGElement",isMany:!0},{name:"artifact",type:"Artifact",isMany:!0},{name:"elementCollection",type:"ElementCollection",isMany:!0},{name:"businessContextElement",type:"BusinessContextElement",isMany:!0},{name:"namespace",type:"String",isAttr:!0},{name:"expressionLanguage",type:"String",isAttr:!0},{name:"typeLanguage",type:"String",isAttr:!0},{name:"exporter",isAttr:!0,type:"String"},{name:"exporterVersion",isAttr:!0,type:"String"},{name:"dmnDI",type:"dmndi:DMNDI"}]},{name:"KnowledgeSource",superClass:["DRGElement"],properties:[{name:"authorityRequirement",type:"AuthorityRequirement",isMany:!0},{name:"type",type:"String"},{name:"owner",type:"DMNElementReference",xml:{serialize:"property"}},{name:"locationURI",type:"String",isAttr:!0}]},{name:"DecisionRule",superClass:["DMNElement"],properties:[{name:"inputEntry",type:"UnaryTests",isMany:!0,xml:{serialize:"property"}},{name:"outputEntry",type:"LiteralExpression",isMany:!0,xml:{serialize:"property"}},{name:"annotationEntry",type:"RuleAnnotation",isMany:!0,xml:{serialize:"property"}}]},{name:"Expression",isAbstract:!0,superClass:["DMNElement"],properties:[{name:"typeRef",isAttr:!0,type:"String"}]},{name:"InformationItem",superClass:["NamedElement"],properties:[{name:"typeRef",isAttr:!0,type:"String"}]},{name:"Decision",superClass:["DRGElement"],properties:[{name:"question",type:"String",xml:{serialize:"property"}},{name:"allowedAnswers",type:"String",xml:{serialize:"property"}},{name:"variable",type:"InformationItem",xml:{serialize:"property"}},{name:"informationRequirement",type:"InformationRequirement",isMany:!0},{name:"knowledgeRequirement",type:"KnowledgeRequirement",isMany:!0},{name:"authorityRequirement",type:"AuthorityRequirement",isMany:!0},{name:"supportedObjective",isMany:!0,type:"DMNElementReference",xml:{serialize:"property"}},{name:"impactedPerformanceIndicator",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}},{name:"decisionMaker",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}},{name:"decisionOwner",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}},{name:"usingProcess",isMany:!0,type:"DMNElementReference",xml:{serialize:"property"}},{name:"usingTask",isMany:!0,type:"DMNElementReference",xml:{serialize:"property"}},{name:"decisionLogic",type:"Expression"}]},{name:"Invocation",superClass:["Expression"],properties:[{name:"calledFunction",type:"Expression"},{name:"binding",type:"Binding",isMany:!0}]},{name:"OrganisationalUnit",superClass:["BusinessContextElement"],properties:[{name:"decisionMade",type:"Decision",isReference:!0,isMany:!0},{name:"decisionOwned",type:"Decision",isReference:!0,isMany:!0}]},{name:"Import",superClass:["NamedElement"],properties:[{name:"importType",type:"String",isAttr:!0},{name:"locationURI",type:"String",isAttr:!0},{name:"namespace",type:"String",isAttr:!0}]},{name:"InformationRequirement",superClass:["DMNElement"],properties:[{name:"requiredDecision",type:"DMNElementReference",xml:{serialize:"property"}},{name:"requiredInput",type:"DMNElementReference",xml:{serialize:"property"}}]},{name:"ElementCollection",superClass:["NamedElement"],properties:[{name:"drgElement",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}}]},{name:"DRGElement",isAbstract:!0,superClass:["NamedElement"],properties:[]},{name:"InputData",superClass:["DRGElement"],properties:[{name:"variable",type:"InformationItem",xml:{serialize:"property"}}]},{name:"DMNElement",isAbstract:!0,properties:[{name:"description",type:"String"},{name:"extensionElements",type:"ExtensionElements"},{name:"id",type:"String",isAttr:!0,isId:!0},{name:"extensionAttribute",type:"ExtensionAttribute",isMany:!0},{name:"label",isAttr:!0,type:"String"}]},{name:"InputClause",superClass:["DMNElement"],properties:[{name:"inputExpression",type:"LiteralExpression",xml:{serialize:"property"}},{name:"inputValues",type:"UnaryTests",xml:{serialize:"property"}}]},{name:"DecisionTable",superClass:["Expression"],properties:[{name:"input",type:"InputClause",isMany:!0,xml:{serialize:"property"}},{name:"output",type:"OutputClause",isMany:!0,xml:{serialize:"property"}},{name:"annotation",type:"RuleAnnotationClause",isMany:!0,xml:{serialize:"property"}},{name:"rule",type:"DecisionRule",isMany:!0,xml:{serialize:"property"}},{name:"hitPolicy",type:"HitPolicy",isAttr:!0,default:"UNIQUE"},{name:"aggregation",type:"BuiltinAggregator",isAttr:!0},{name:"preferredOrientation",type:"DecisionTableOrientation",isAttr:!0},{name:"outputLabel",isAttr:!0,type:"String"}]},{name:"LiteralExpression",superClass:["Expression"],properties:[{name:"expressionLanguage",type:"String",isAttr:!0},{name:"text",type:"String"},{name:"importedValues",type:"ImportedValues"}]},{name:"Binding",properties:[{name:"parameter",type:"InformationItem",xml:{serialize:"property"}},{name:"bindingFormula",type:"Expression"}]},{name:"KnowledgeRequirement",superClass:["DMNElement"],properties:[{name:"requiredKnowledge",type:"DMNElementReference",xml:{serialize:"property"}}]},{name:"BusinessKnowledgeModel",superClass:["Invocable"],properties:[{name:"encapsulatedLogic",type:"FunctionDefinition",xml:{serialize:"property"}},{name:"knowledgeRequirement",type:"KnowledgeRequirement",isMany:!0},{name:"authorityRequirement",type:"AuthorityRequirement",isMany:!0}]},{name:"BusinessContextElement",isAbstract:!0,superClass:["NamedElement"],properties:[{name:"URI",type:"String",isAttr:!0}]},{name:"PerformanceIndicator",superClass:["BusinessContextElement"],properties:[{name:"impactingDecision",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}}]},{name:"FunctionDefinition",superClass:["Expression"],properties:[{name:"formalParameter",type:"InformationItem",isMany:!0,xml:{serialize:"property"}},{name:"body",type:"Expression"},{name:"kind",type:"FunctionKind",isAttr:!0}]},{name:"Context",superClass:["Expression"],properties:[{name:"contextEntry",type:"ContextEntry",isMany:!0}]},{name:"ContextEntry",superClass:["DMNElement"],properties:[{name:"variable",type:"InformationItem",xml:{serialize:"property"}},{name:"value",type:"Expression"}]},{name:"List",superClass:["Expression"],properties:[{name:"elements",isMany:!0,type:"Expression"}]},{name:"Relation",superClass:["Expression"],properties:[{name:"column",type:"InformationItem",isMany:!0,xml:{serialize:"property"}},{name:"row",type:"List",isMany:!0,xml:{serialize:"property"}}]},{name:"OutputClause",superClass:["DMNElement"],properties:[{name:"outputValues",type:"UnaryTests",xml:{serialize:"property"}},{name:"defaultOutputEntry",type:"LiteralExpression",xml:{serialize:"property"}},{name:"name",isAttr:!0,type:"String"},{name:"typeRef",isAttr:!0,type:"String"}]},{name:"UnaryTests",superClass:["Expression"],properties:[{name:"text",type:"String"},{name:"expressionLanguage",type:"String",isAttr:!0}]},{name:"NamedElement",isAbstract:!0,superClass:["DMNElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"ImportedValues",superClass:["Import"],properties:[{name:"importedElement",type:"String"},{name:"expressionLanguage",type:"String",isAttr:!0}]},{name:"DecisionService",superClass:["Invocable"],properties:[{name:"outputDecision",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}},{name:"encapsulatedDecision",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}},{name:"inputDecision",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}},{name:"inputData",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}}]},{name:"ExtensionElements",properties:[{name:"values",type:"Element",isMany:!0}]},{name:"ExtensionAttribute",properties:[{name:"value",type:"Element"},{name:"valueRef",type:"Element",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Element",isAbstract:!0,properties:[{name:"extensionAttribute",type:"ExtensionAttribute",isAttr:!0,isReference:!0},{name:"elements",type:"ExtensionElements",isAttr:!0,isReference:!0}]},{name:"Artifact",isAbstract:!0,superClass:["DMNElement"],properties:[]},{name:"Association",superClass:["Artifact"],properties:[{name:"sourceRef",type:"DMNElementReference",xml:{serialize:"property"}},{name:"targetRef",type:"DMNElementReference",xml:{serialize:"property"}},{name:"associationDirection",type:"AssociationDirection",isAttr:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat",isAttr:!0,type:"String",default:"text/plain"}]},{name:"RuleAnnotationClause",properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"RuleAnnotation",properties:[{name:"text",type:"String"}]},{name:"Invocable",isAbstract:!0,superClass:["DRGElement"],properties:[{name:"variable",type:"InformationItem",xml:{serialize:"property"}}]},{name:"Group",superClass:["Artifact"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"FunctionItem",superClass:["DMNElement"],properties:[{name:"parameters",isMany:!0,type:"InformationItem",xml:{serialize:"property"}},{name:"outputTypeRef",isAttr:!0,type:"String"}]},{name:"DMNElementReference",properties:[{isAttr:!0,name:"href",type:"String"}]}],enumerations:[{name:"HitPolicy",literalValues:[{name:"UNIQUE"},{name:"FIRST"},{name:"PRIORITY"},{name:"ANY"},{name:"COLLECT"},{name:"RULE ORDER"},{name:"OUTPUT ORDER"}]},{name:"BuiltinAggregator",literalValues:[{name:"SUM"},{name:"COUNT"},{name:"MIN"},{name:"MAX"}]},{name:"DecisionTableOrientation",literalValues:[{name:"Rule-as-Row"},{name:"Rule-as-Column"},{name:"CrossTable"}]},{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"FunctionKind",literalValues:[{name:"FEEL"},{name:"Java"},{name:"PMML"}]}],associations:[],xml:{tagAlias:"lowerCase"}},dmndi:{name:"DMNDI",prefix:"dmndi",uri:"https://www.omg.org/spec/DMN/20191111/DMNDI/",types:[{name:"DMNDI",properties:[{name:"diagrams",type:"DMNDiagram",isMany:!0},{name:"styles",type:"DMNStyle",isMany:!0}]},{name:"DMNStyle",superClass:["di:Style"],properties:[{name:"fillColor",type:"dc:Color",isAttr:!0},{name:"strokeColor",type:"dc:Color",isAttr:!0},{name:"fontColor",type:"dc:Color",isAttr:!0},{name:"fontSize",isAttr:!0,type:"Real"},{name:"fontFamily",isAttr:!0,type:"String"},{name:"fontItalic",isAttr:!0,type:"Boolean"},{name:"fontBold",isAttr:!0,type:"Boolean"},{name:"fontUnderline",isAttr:!0,type:"Boolean"},{name:"fontStrikeThrough",isAttr:!0,type:"Boolean"},{name:"labelHorizontalAlignment",type:"dc:AlignmentKind",isAttr:!0},{name:"labelVerticalAlignment",type:"dc:AlignmentKind",isAttr:!0}]},{name:"DMNDiagram",superClass:["di:Diagram"],properties:[{name:"dmnElementRef",type:"dmn:DMNElement",isAttr:!0,isReference:!0},{name:"size",type:"Size"},{name:"localStyle",type:"DMNStyle",isVirtual:!0},{name:"sharedStyle",type:"DMNStyle",isVirtual:!0,isReference:!0,redefines:"di:DiagramElement#sharedStyle"},{name:"diagramElements",type:"DMNDiagramElement",isMany:!0}]},{name:"DMNDiagramElement",isAbstract:!0,superClass:["di:DiagramElement"],properties:[{name:"dmnElementRef",type:"dmn:DMNElement",isAttr:!0,isReference:!0},{name:"sharedStyle",type:"DMNStyle",isVirtual:!0,isReference:!0,redefines:"di:DiagramElement#sharedStyle"},{name:"localStyle",type:"DMNStyle",isVirtual:!0},{name:"label",type:"DMNLabel"}]},{name:"DMNLabel",superClass:["di:Shape"],properties:[{name:"text",type:"Text"}]},{name:"DMNShape",superClass:["di:Shape","DMNDiagramElement"],properties:[{name:"isListedInputData",isAttr:!0,type:"Boolean"},{name:"decisionServiceDividerLine",type:"DMNDecisionServiceDividerLine"},{name:"isCollapsed",isAttr:!0,type:"Boolean"}]},{name:"DMNEdge",superClass:["di:Edge","DMNDiagramElement"],properties:[{name:"sourceElement",type:"DMNDiagramElement",isAttr:!0,isReference:!0},{name:"targetElement",type:"DMNDiagramElement",isAttr:!0,isReference:!0}]},{name:"DMNDecisionServiceDividerLine",superClass:["di:Edge"]},{name:"Text",properties:[{name:"text",isBody:!0,type:"String"}]},{name:"Size",superClass:["dc:Dimension"]}],associations:[],enumerations:[]},biodi:{name:"bpmn.io DI for DMN",uri:"http://bpmn.io/schema/dmn/biodi/2.0",prefix:"biodi",xml:{tagAlias:"lowerCase"},types:[{name:"DecisionTable",isAbstract:!0,extends:["dmn:DecisionTable"],properties:[{name:"annotationsWidth",isAttr:!0,type:"Integer"}]},{name:"OutputClause",isAbstract:!0,extends:["dmn:OutputClause"],properties:[{name:"width",isAttr:!0,type:"Integer"}]},{name:"InputClause",isAbstract:!0,extends:["dmn:InputClause"],properties:[{name:"width",isAttr:!0,type:"Integer"}]}]}};function c(e,t){return new a((0,o.kp)({},l,e),t)}var u=n(39569),d=n(35326);const p={width:"100%",height:"100%",position:"relative"};class h{constructor(e={}){this._eventBus=new i.A,this._viewsChanged=(0,o.sg)(this._viewsChanged,0),this._views=[],this._viewers={},this.open=(0,d.O)(this.open.bind(this)),this.importXML=(0,d.O)(this.importXML.bind(this)),this.saveXML=(0,d.O)(this.saveXML.bind(this)),this._init(e)}importXML(e,t){var n=this;return t=t||{open:!0},new Promise((function(o,s){var r=n._activeView;n._clear().then((()=>{var a;e=n._emit("import.parse.start",{xml:e})||e,n._moddle.fromXML(e,"dmn:Definitions").then((e=>{var l=e.rootElement,c=e.references,u=e.elementsById;if(a=e.warnings,l=n._emit("import.parse.complete",i({error:null,definitions:l,elementsById:u,references:c,warnings:a}))||l,n._setDefinitions(l),!t.open)return n._emit("import.done",{error:null,warnings:a}),void o({warnings:a});var d=n._getInitialView(n._views,r);if(!d){var p=new Error("no displayable contents");return n._emit("import.done",{error:p,warnings:a}),p.warnings=a,s(p)}n.open(d).then((e=>({warnings:e.warnings}))).catch((e=>({error:e,warnings:e.warnings}))).then((e=>{var t=[].concat(a,e.warnings);n._emit("import.done",{error:e.error,warnings:t}),e.error?(e.error.warnings=t,s(e.error)):o({warnings:t})}))})).catch((t=>{return a=t.warnings,t=function(e,t){if("failed to parse document as <dmn:Definitions>"!==e.message)return null;var n=-1!==t.indexOf('"http://www.omg.org/spec/DMN/20151101/dmn.xsd"')?"1.1":-1!==t.indexOf('"http://www.omg.org/spec/DMN/20180521/MODEL/"')&&"1.2";return n?(e=new Error("unsupported DMN "+n+" file detected; only DMN 1.3 files can be opened"),console.error("Cannot open what looks like a DMN "+n+" diagram. Please refer to https://bpmn.io/l/dmn-compatibility.html to learn how to make the toolkit compatible with older DMN files",e),e):null}(t,e)||((r=/unparsable content <([^>]+)> detected([\s\S]*)$/.exec((o=t).message))?(o.message="unparsable content <"+r[1]+"> detected; this may indicate an invalid DMN 1.3 diagram file"+r[2],o):null)||t,n._emit("import.parse.complete",i({error:t,warnings:a})),n._emit("import.done",{error:t,warnings:a}),t.warnings=a,s(t);var o,r}))})).catch((e=>(n._emit("import.done",{error:e,warnings:[]}),e.warnings=[],s(e))))}));function i(e){var t=n._eventBus.createEvent(e);return Object.defineProperty(t,"context",{enumerable:!0,get:function(){return console.warn(new Error("import.parse.complete <context> is deprecated and will be removed in future library versions")),{warnings:e.warnings,references:e.references,elementsById:e.elementsById}}}),t}}getDefinitions(){return this._definitions}getActiveView(){return this._activeView}getActiveViewer(){var e=this.getActiveView();return e&&this._getViewer(e)}getView(e){return this._views.filter((function(t){return t.element===e}))[0]}getViews(){return this._views}saveXML(e){var t=this;e=e||{};var n=this._definitions;return new Promise((function(i,o){n?(n=t._emit("saveXML.start",{definitions:n})||n,t._moddle.toXML(n,e).then((function(e){var n=e.xml;return{xml:n=t._emit("saveXML.serialized",{xml:n})||n}})).catch((e=>({error:e}))).then((e=>{t._emit("saveXML.done",e),e.error?o(e.error):i({xml:e.xml})}))):o(new Error("no definitions loaded"))}))}on(...e){this._eventBus.on(...e)}off(...e){this._eventBus.off(...e)}once(...e){this._eventBus.once(...e)}attachTo(e){e.get&&e.constructor.prototype.jquery&&(e=e.get(0)),"string"==typeof e&&(e=(0,u.P)(e)),e.appendChild(this._container),this._emit("attach",{})}detach(){this._emit("detach",{}),(0,u.TF)(this._container)}destroy(){Object.keys(this._viewers).forEach((e=>{y(this._viewers[e],"destroy")})),(0,u.TF)(this._container)}_init(e){this._options=e,this._moddle=this._createModdle(e),this._viewers={},this._views=[];const t=(0,u.zm)('<div class="dmn-js-parent"></div>'),n=(0,o.kp)({},p,e);(0,o.kp)(t.style,{width:m(n.width),height:m(n.height),position:n.position}),this._container=t,e.container&&this.attachTo(e.container)}_clear(){return this._switchView(null)}open(e){return this._switchView(e)}_setDefinitions(e){this._definitions=e,this._updateViews()}_viewsChanged=()=>{this._emit("views.changed",{views:this._views,activeView:this._activeView})};_updateViews(){var e=this._definitions;if(!e)return this._views=[],void this._switchView(null);var t=this._getViewProviders(),n=[e,...e.drgElement||[]],i=this._views,s=[];for(var r of n){var a=(0,o.I6)(t,(function(e){return"string"==typeof e.opens?e.opens===r.$type:e.opens(r)}));if(a){var l={element:r,id:r.id,name:r.name,type:a.id};s.push(l)}}var c,u=this._activeView;if(!u||(c=(0,o.I6)(s,(function(e){return g(u,e)}))||this._getInitialView(s),c)){var d=!g(u,c)||f(u,c),p=i.length!==s.length||!(0,o.Si)(s,(function(e){return(0,o.I6)(i,(function(t){return g(t,e)&&!f(t,e)}))}));this._activeView=c,this._views=s,(d||p)&&this._viewsChanged()}else this._switchView(null)}_getInitialView(e,t){var n;return t&&(n=(0,o.I6)(e,(function(e){return g(e,t)}))||(0,o.I6)(e,(function(e){return e.type===t}))),n||e[0]}_switchView(e){var t=this;return new Promise((function(n,i){var o,s=(e,o)=>{t._viewsChanged(),e?i(e):n(o)},r=t.getActiveView(),a=e&&t._getViewer(e),l=e&&e.element;if(r&&(o=t._getViewer(r))!==a&&(y(o,"clear"),o.detach()),t._activeView=e,a)return o!==a&&a.attachTo(t._container),t._emit("import.render.start",{view:e,element:l}),void a.open(l).then((n=>{t._emit("import.render.complete",{view:e,error:null,warnings:n.warnings}),s(null,n)})).catch((n=>{t._emit("import.render.complete",{view:e,error:n,warnings:n.warnings}),s(n,null)}));s()}))}_getViewer(e){var t=e.type,n=this._viewers[t];return n||(n=this._viewers[t]=this._createViewer(e.type),this._emit("viewer.created",{type:t,viewer:n})),n}_createViewer(e){var t=(0,o.I6)(this._getViewProviders(),(function(t){return t.id===e}));if(!t)throw new Error("no provider for view type <"+e+">");var n=t.constructor,i=this._options[e]||{};return new n({...this._options.common||{},...i,additionalModules:[...i.additionalModules||[],{_parent:["value",this],moddle:["value",this._moddle]}]})}_emit(...e){return this._eventBus.fire(...e)}_createModdle(e){return new c(e.moddleExtensions)}_getViewProviders(){return[]}}function m(e){return e+((0,o.Et)(e)?"px":"")}function g(e,t){return(0,o.O9)(e)?!!(0,o.O9)(t)&&(e.element===t.element||e.id===t.id):!(0,o.O9)(t)}function f(e,t){return!e||!t||e.name!==t.name}function y(e,t){(0,o.Tn)(e[t])&&e[t]()}},46389:(e,t,n)=>{"use strict";n.d(t,{j:()=>r,p:()=>s});var i=n(23906);function o(e){return(0,i.is)(e,"dmn:Decision")||(0,i.is)(e,"dmn:BusinessKnowledgeModel")||(0,i.is)(e,"dmn:InputData")||(0,i.is)(e,"dmn:KnowledgeSource")?"name":(0,i.is)(e,"dmn:TextAnnotation")?"text":void 0}function s(e){var t=e.businessObject,n=o(t);if(n)return t[n]||""}function r(e,t,n){var i=e.businessObject,s=o(i);return s&&(i[s]=t),n&&(e.hidden=!t),e}},53610:(e,t,n)=>{"use strict";function i(e,t){return t.forEach((function(t){t&&"string"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(n){if("default"!==n&&!(n in e)){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}}))})),Object.freeze(e)}function o(e,t,n){return 2==arguments.length?e.getAttribute(t):null===n?e.removeAttribute(t):(e.setAttribute(t,n),e)}n.d(t,{CF:()=>o,IU:()=>l,Ly:()=>r,P:()=>m,YG:()=>g,f0:()=>h});const s=Object.prototype.toString;function r(e){return new a(e)}function a(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}function l(e){for(var t;t=e.firstChild;)e.removeChild(t);return e}function c(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}a.prototype.add=function(e){return this.list.add(e),this},a.prototype.remove=function(e){return"[object RegExp]"==s.call(e)?this.removeMatching(e):(this.list.remove(e),this)},a.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},a.prototype.toggle=function(e,t){return void 0!==t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this},a.prototype.array=function(){return Array.from(this.list)},a.prototype.has=a.prototype.contains=function(e){return this.list.contains(e)};var u,d={},p=function(){if(u)return d;var e,t,n;function i(){e=window.addEventListener?"addEventListener":"attachEvent",t=window.removeEventListener?"removeEventListener":"detachEvent",n="addEventListener"!==e?"on":""}return u=1,d.bind=function(t,o,s,r){return e||i(),t[e](n+o,s,r||!1),s},d.unbind=function(e,o,s,r){return t||i(),e[t](n+o,s,r||!1),s},d}(),h=i({__proto__:null,default:c(p)},[p]);function m(e,t){return(t=t||document).querySelector(e)}function g(e,t){return(t=t||document).querySelectorAll(e)}},53656:(e,t,n)=>{"use strict";n.d(t,{$z:()=>f,Et:()=>a,Gv:()=>r,I6:()=>d,Kg:()=>c,O9:()=>s,Si:()=>m,TS:()=>h,Tn:()=>l,jJ:()=>p,kp:()=>_,sg:()=>b,zN:()=>g});const i=Object.prototype.toString,o=Object.prototype.hasOwnProperty;function s(e){return void 0!==e}function r(e){return"[object Object]"===i.call(e)}function a(e){return"[object Number]"===i.call(e)}function l(e){const t=i.call(e);return"[object Function]"===t||"[object AsyncFunction]"===t||"[object GeneratorFunction]"===t||"[object AsyncGeneratorFunction]"===t||"[object Proxy]"===t}function c(e){return"[object String]"===i.call(e)}function u(e,t){return!(null==e)&&o.call(e,t)}function d(e,t){const n=function(e){return l(e)?e:t=>t===e}(t);let i;return p(e,(function(e,t){if(n(e,t))return i=e,!1})),i}function p(e,t){let n,o;if(void 0===e)return;const s=function(e){return"[object Array]"===i.call(e)}(e)?v:y;for(let i in e)if(u(e,i)&&(n=e[i],o=t(n,s(i)),!1===o))return n}function h(e,t,n){return p(e,(function(e,i){n=t(n,e,i)})),n}function m(e,t){return!!h(e,(function(e,n,i){return e&&t(n,i)}),!0)}function g(e,t){return!!d(e,t)}function f(e,t,n={}){return t=function(e){return l(e)?e:t=>t[e]}(t),p(e,(function(e){let i=t(e)||"_",o=n[i];o||(o=n[i]=[]),o.push(e)})),n}function y(e){return e}function v(e){return Number(e)}function b(e,t){let n,i,o,s;function r(n){let r=Date.now(),c=n?0:s+t-r;if(c>0)return a(c);e.apply(o,i),l()}function a(e){n=setTimeout(r,e)}function l(){n&&clearTimeout(n),n=s=i=o=void 0}function c(...e){s=Date.now(),i=e,o=this,n||a(t)}return c.flush=function(){n&&r(!0),l()},c.cancel=l,c}function _(e,...t){return Object.assign(e,...t)}},58120:(e,t,n)=>{"use strict";function i(e,t){return t.forEach((function(t){t&&"string"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(n){if("default"!==n&&!(n in e)){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}}))})),Object.freeze(e)}function o(e,t,n){return 2==arguments.length?e.getAttribute(t):null===n?e.removeAttribute(t):(e.setAttribute(t,n),e)}n.d(t,{CF:()=>o,Ly:()=>r,Mm:()=>f,P:()=>_,TF:()=>x,zm:()=>b}),Object.prototype.toString,Object.prototype.hasOwnProperty;const s=Object.prototype.toString;function r(e){return new a(e)}function a(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}a.prototype.add=function(e){return this.list.add(e),this},a.prototype.remove=function(e){return"[object RegExp]"==s.call(e)?this.removeMatching(e):(this.list.remove(e),this)},a.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},a.prototype.toggle=function(e,t){return void 0!==t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this},a.prototype.array=function(){return Array.from(this.list)},a.prototype.has=a.prototype.contains=function(e){return this.list.contains(e)};var l,c,u,d={};function p(){l=window.addEventListener?"addEventListener":"attachEvent",c=window.removeEventListener?"removeEventListener":"detachEvent",u="addEventListener"!==l?"on":""}var h,m=i({__proto__:null,bind:d.bind=function(e,t,n,i){return l||p(),e[l](u+t,n,i||!1),n},unbind:d.unbind=function(e,t,n,i){return c||p(),e[c](u+t,n,i||!1),n},default:d},[d]),g=["focus","blur"],f={bind:function(e,t,n,i,o){return-1!==g.indexOf(n)&&(o=!0),m.bind(e,n,(function(n){var o=n.target||n.srcElement;n.delegateTarget=function(e,t){var n=e;return n&&"function"==typeof n.closest&&n.closest(t)||null}(o,t),n.delegateTarget&&i.call(e,n)}),o)},unbind:function(e,t,n,i){return-1!==g.indexOf(t)&&(i=!0),m.unbind(e,t,n,i)}},y=!1;"undefined"!=typeof document&&((h=document.createElement("div")).innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',y=!h.getElementsByTagName("link").length,h=void 0);var v={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:y?[1,"X<div>","</div>"]:[0,"",""]};v.td=v.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],v.option=v.optgroup=[1,'<select multiple="multiple">',"</select>"],v.thead=v.tbody=v.colgroup=v.caption=v.tfoot=[1,"<table>","</table>"],v.polyline=v.ellipse=v.polygon=v.circle=v.text=v.line=v.path=v.rect=v.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];var b=function(e,t){if("string"!=typeof e)throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var i=n[1];if("body"==i)return(o=t.createElement("html")).innerHTML=e,o.removeChild(o.lastChild);var o,s=Object.prototype.hasOwnProperty.call(v,i)?v[i]:v._default,r=s[0],a=s[1],l=s[2];for((o=t.createElement("div")).innerHTML=a+e+l;r--;)o=o.lastChild;if(o.firstChild==o.lastChild)return o.removeChild(o.firstChild);for(var c=t.createDocumentFragment();o.firstChild;)c.appendChild(o.removeChild(o.firstChild));return c};function _(e,t){return(t=t||document).querySelector(e)}function x(e){e.parentNode&&e.parentNode.removeChild(e)}},60210:(e,t,n)=>{"use strict";function i(e,t){return t.appendChild(function(e,t){if(e.ownerDocument!==t.ownerDocument)try{return t.ownerDocument.importNode(e,!0)}catch(e){}return e}(e,t))}function o(e,t){return i(t,e),e}n.d(t,{BC:()=>o,CF:()=>l,LI:()=>_,vt:()=>m});var s=2,r={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":s,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":s,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function a(e,t,n){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),o=r[i];o?(o===s&&"number"==typeof n&&(n=String(n)+"px"),e.style[i]=n):e.setAttributeNS(null,t,n)}function l(e,t,n){if("string"==typeof t){if(void 0===n)return function(e,t){return r[t]?e.style[t]:e.getAttributeNS(null,t)}(e,t);a(e,t,n)}else!function(e,t){var n,i,o=Object.keys(t);for(n=0;i=o[n];n++)a(e,i,t[i])}(e,t);return e}const c=Object.prototype.toString;function u(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}u.prototype.add=function(e){return this.list.add(e),this},u.prototype.remove=function(e){return"[object RegExp]"==c.call(e)?this.removeMatching(e):(this.list.remove(e),this)},u.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},u.prototype.toggle=function(e,t){return void 0!==t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this},u.prototype.array=function(){return Array.from(this.list)},u.prototype.has=u.prototype.contains=function(e){return this.list.contains(e)};var d={svg:"http://www.w3.org/2000/svg"},p='<svg xmlns="'+d.svg+'"';function h(e){var t=!1;"<svg"===e.substring(0,4)?-1===e.indexOf(d.svg)&&(e=p+e.substring(4)):(e=p+">"+e+"</svg>",t=!0);var n=function(e){var t;return(t=new DOMParser).async=!1,t.parseFromString(e,"text/xml")}(e);if(!t)return n;for(var i=document.createDocumentFragment(),o=n.firstChild;o.firstChild;)i.appendChild(o.firstChild);return i}function m(e,t){var n;return"<"===(e=e.trim()).charAt(0)?(n=h(e).firstChild,n=document.importNode(n,!0)):n=document.createElementNS(d.svg,e),t&&l(n,t),n}var g=/([&<>]{1})/g,f=/([&<>\n\r"]{1})/g,y={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"'"};function v(e,t){return e.replace(t,(function(e,t){return y[t]||t}))}function b(e,t){var n,i,o,s,r;switch(e.nodeType){case 3:t.push(v(e.textContent,g));break;case 1:if(t.push("<",e.tagName),e.hasAttributes())for(n=0,i=(o=e.attributes).length;n<i;++n)s=o.item(n),t.push(" ",s.name,'="',v(s.value,f),'"');if(e.hasChildNodes()){for(t.push(">"),n=0,i=(r=e.childNodes).length;n<i;++n)b(r.item(n),t);t.push("</",e.tagName,">")}else t.push("/>");break;case 8:t.push("\x3c!--",v(e.nodeValue,g),"--\x3e");break;case 4:t.push("<![CDATA[",e.nodeValue,"]]>");break;default:throw new Error("unable to handle node "+e.nodeType)}return t}function _(e,t){if(void 0!==t){try{!function(e,t){var n=h(t);if(function(e){for(var t;t=e.firstChild;)e.removeChild(t)}(e),t){"#document-fragment"===n.nodeName||(n=n.documentElement);for(var o,s=(o=n.childNodes,Array.prototype.slice.call(o)),r=0;r<s.length;r++)i(s[r],e)}}(e,t)}catch(e){throw new Error("error parsing SVG: "+e.message)}return e}return function(e){for(var t=e.firstChild,n=[];t;)b(t,n),t=t.nextSibling;return n.join("")}(e)}},68523:(e,t,n)=>{"use strict";n.d(t,{$v:()=>zh,f8:()=>Bh});var i=n(41258),o=n(64847),s=n(23906);class r extends i.A{_init(e){super._init(e),this.on("import.parse.complete",(e=>{e.error||this._collectIds(e.definitions,e.elementsById)})),this.on("destroy",(()=>{this._moddle.ids.clear()})),this.on("viewer.created",(({viewer:e})=>{e.on("elements.changed",(({elements:e})=>{e.some((function(e){return(0,s.f7)(e,["dmn:Decision","dmn:Definitions","dmn:BusinessKnowledgeModel"])}))&&this._updateViews()}))}))}_collectIds(e,t){var n,i=e.$model.ids;for(n in i.clear(),t)i.claim(n,t[n])}_createModdle(e){var t=super._createModdle(e);return t.ids=new o.A([32,36,1]),t}}var a=n(7475),l=n(98364),c=n(30566),u=n(89768),d=n(27714),p=n(67319),h=n(19365),m=n(87496),g={width:135,height:46},f={width:180,height:80},y={width:125,height:45},v={width:100,height:63};function b(e){m.A.call(this),this._drdFactory=e}(0,a.A)(b,m.A),b.$inject=["drdFactory"],b.prototype.baseCreate=m.A.prototype.create,b.prototype.create=function(e,t){return this.createDrdElement(e,t)},b.prototype.createDrdElement=function(e,t){var n,i=this._drdFactory,o=(t=t||{}).businessObject;if(!o){if(!t.type)throw new Error("no shape type specified");o=i.create(t.type)}return o.di||("connection"===e?o.di=i.createDiEdge(o,[]):"shape"===e&&(o.di=i.createDiShape(o,{}))),n=this._getDefaultSize(o),t=(0,h.kp)({businessObject:o,id:o.id},n,t),this.baseCreate(e,t)},b.prototype._getDefaultSize=function(e){return(0,s.is)(e,"dmn:BusinessKnowledgeModel")?g:(0,s.is)(e,"dmn:Decision")?f:(0,s.is)(e,"dmn:InputData")?y:(0,s.is)(e,"dmn:KnowledgeSource")?v:{width:100,height:80}};var _="left",x="right",C=f.width;function E(e){return!(0,s.is)(e,"dmn:Association")}function w(e,t){return Math.abs(t.x-e.x)}function D(e){e.on("autoPlace",(function(e){var t,n,i=e.shape;return t=e.source,n=i,(0,s.is)(n,"dmn:TextAnnotation")?function(e,t){var n=(0,p.Fy)(e),i={x:n.right+t.width/2,y:n.top-50-t.height/2};return(0,d.D6)(e,t,i,(0,d.u6)({y:{margin:-30,minDistance:20}}))}(t,n):(0,s.is)(n,"dmn:DRGElement")?function(e,t){var n=(0,p.Fy)(e),i=(0,p.pp)(e),o=(0,d.dq)(e,{defaultDistance:180,direction:"s",getWeight:function(t){return t.target===e?1:-1},filter:E,reference:"center"}),s={x:i.x,y:n.bottom+o};return(0,d.D6)(e,t,s,function(e){var t,n,i=(0,p.pp)(e);return function(e,o,s){var r;return t?(o.x<i.x?t=s:n=s,r=w(i,(0,p.pp)(t))<w(i,(0,p.pp)(n))?_:x):(t=s,n=s,r=(0,p.pp)(s).x-i.x>0?_:x),r===_?{x:Math.min((0,p.pp)(t).x-C-60,(0,p.Fy)(t).left-60-e.width/2),y:o.y}:{x:Math.max((0,p.pp)(n).x+C+60,(0,p.Fy)(n).right+60+e.width/2),y:o.y}}}(e))}(t,n):void 0}))}D.$inject=["eventBus"];const S={__depends__:[u.A],__init__:["dmnAutoPlace"],dmnAutoPlace:["type",D]};var A=n(15167),j=n(86816),O=n(31323),R=n(80598),M=n(86104),k=n(25359),I=n(84322),T=n(96412),F=n(78303);function P(e,t,n,i){this.replaceElement=function(n,i,o){o=o||{};var s=i.type,r=n.businessObject,a=e.create(s),l={type:s,businessObject:a};if(l.width=n.width,l.height=n.height,a.name=r.name,i.table){var c=e.create("dmn:DecisionTable");c.$parent=a;var u=e.create("dmn:OutputClause");u.typeRef="string",u.$parent=c,c.output=[u];var d=e.create("dmn:InputClause");d.$parent=c;var p=e.create("dmn:LiteralExpression",{typeRef:"string"});d.inputExpression=p,p.$parent=d,c.input=[d],L(a,c,e)}if(i.expression){var h=e.create("dmn:LiteralExpression"),m=e.create("dmn:InformationItem",{name:r.name});L(a,h,e,m)}return t.replaceElement(n,l,o)}}function L(e,t,n,i){if((0,s.is)(e,"dmn:Decision"))e.decisionLogic=t,t.$parent=e;else if((0,s.is)(e,"dmn:BusinessKnowledgeModel")){var o=n.create("dmn:FunctionDefinition",{body:t});e.encapsulatedLogic=o,o.$parent=e,t.$parent=o}i&&(e.variable=i,i.$parent=e)}P.$inject=["drdFactory","replace","selection","modeling"];const N={__depends__:[F.A,M.A],drdReplace:["type",P]},$=[{label:"Empty",actionName:"replace-with-empty-decision",className:"dmn-icon-clear",target:{type:"dmn:Decision",table:!1,expression:!1}},{label:"Decision table",actionName:"replace-with-decision-table",className:"dmn-icon-decision-table",target:{type:"dmn:Decision",table:!0,expression:!1}},{label:"Literal expression",actionName:"replace-with-literal-expression",className:"dmn-icon-literal-expression",target:{type:"dmn:Decision",table:!1,expression:!0}}],B=[{label:"Empty",actionName:"replace-with-empty",className:"dmn-icon-clear",target:{type:"dmn:BusinessKnowledgeModel",table:!1,expression:!1}},{label:"Literal Expression",actionName:"replace-with-literal-expression",className:"dmn-icon-literal-expression",target:{type:"dmn:BusinessKnowledgeModel",table:!1,expression:!0}}];function V(e,t,n,i,o,s){this._popupMenu=e,this._modeling=t,this._moddle=n,this._drdReplace=i,this._rules=o,this._translate=s,this.register()}V.$inject=["popupMenu","modeling","moddle","drdReplace","rules","translate"],V.prototype.register=function(){this._popupMenu.registerProvider("dmn-replace",this)},V.prototype.getEntries=function(e){var t,n,i=e.businessObject;return this._rules.allowed("shape.replace",{element:e})?(0,s.is)(i,"dmn:Decision")?(n=(0,s.TO)(i),t=(0,h.pb)($,(function(e){var t="replace-with-empty-decision"===e.actionName&&n,i="replace-with-decision-table"===e.actionName&&!(0,s.is)(n,"dmn:DecisionTable"),o="replace-with-literal-expression"===e.actionName&&!(0,s.is)(n,"dmn:LiteralExpression");return t||i||o})),this._createEntries(e,t)):(0,s.is)(i,"dmn:BusinessKnowledgeModel")?(n=(0,s.TO)(i),t=(0,h.pb)(B,(function(e){var t="replace-with-empty"===e.actionName&&n,i="replace-with-decision-table"===e.actionName&&!(0,s.is)(n,"dmn:DecisionTable"),o="replace-with-literal-expression"===e.actionName&&!(0,s.is)(n,"dmn:LiteralExpression");return t||i||o})),this._createEntries(e,t)):[]:[]},V.prototype._createEntries=function(e,t){var n=[],i=this;return(0,h.jJ)(t,(function(t){var o=i._createMenuEntry(t,e);n.push(o)})),n},V.prototype._createMenuEntry=function(e,t,n){var i=this._drdReplace.replaceElement;return n=n||function(){return i(t,e.target)},{label:(0,this._translate)(e.label),className:e.className,id:e.actionName,action:n}},V.prototype.getHeaderEntries=function(e){return[]};const U={__depends__:[O.A,T.A,N],__init__:["replaceMenuProvider"],replaceMenuProvider:["type",V]};var z=n(72120);function K(e,t,n,i,o,s,r,a,l,c,u,d){u=u||{},t.registerProvider(this),this._contextPad=t,this._modeling=n,this._elementFactory=i,this._connect=o,this._create=s,this._rules=r,this._popupMenu=a,this._canvas=l,this._translate=c,!1!==u.autoPlace&&(this._autoPlace=d.get("autoPlace",!1)),e.on("create.end",250,(function(e){var n=e.context.shape;if((0,z.Io)(e)){var i=t.getEntries(n);i.replace&&i.replace.action.click(e,n)}}))}K.$inject=["eventBus","contextPad","modeling","elementFactory","connect","create","rules","popupMenu","canvas","translate","config.contextPad","injector"],K.prototype.getContextPadEntries=function(e){var t=this._modeling,n=this._elementFactory,i=this._connect,o=this._create,r=this._popupMenu,a=this._contextPad,l=this._rules,c=this._translate,u=this._autoPlace,d={};if("label"===e.type)return d;var p=e.businessObject;function m(e,t,n){i.start(e,t,n)}function g(e,t,i,s){function r(t,i){var r=n.createShape((0,h.kp)({type:e},s));o.start(t,r,{source:i,hints:{connectionTarget:i}})}var a=u?function(t,i){var o=n.createShape((0,h.kp)({type:e},s));u.append(i,o,{connectionTarget:i})}:r;return{group:"model",className:t,title:i,action:{dragstart:r,click:a}}}(0,s.is)(p,"dmn:Decision")&&(0,h.kp)(d,{"append.decision":g("dmn:Decision","dmn-icon-decision",c("Append decision"))}),(0,s.f7)(p,["dmn:BusinessKnowledgeModel","dmn:Decision","dmn:KnowledgeSource"])&&(0,h.kp)(d,{"append.knowledge-source":g("dmn:KnowledgeSource","dmn-icon-knowledge-source",c("Append knowledge source"))}),(0,s.f7)(p,["dmn:BusinessKnowledgeModel","dmn:Decision"])&&(0,h.kp)(d,{"append.business-knowledge-model":g("dmn:BusinessKnowledgeModel","dmn-icon-business-knowledge",c("Append business knowledge model"))}),(0,s.f7)(p,["dmn:Decision","dmn:KnowledgeSource"])&&(0,h.kp)(d,{"append.input-data":g("dmn:InputData","dmn-icon-input-data",c("Append input data"))}),(0,s.is)(p,"dmn:DRGElement")&&(0,h.kp)(d,{"append.text-annotation":g("dmn:TextAnnotation","dmn-icon-text-annotation",c("Add text annotation")),connect:{group:"connect",className:"dmn-icon-connection-multi",title:c("Connect to other element"),action:{click:m,dragstart:m}}}),(0,s.is)(p,"dmn:TextAnnotation")&&(0,h.kp)(d,{connect:{group:"connect",className:"dmn-icon-connection-multi",title:c("Connect to other element"),action:{click:m,dragstart:m}}}),r.isEmpty(e,"dmn-replace")||(0,h.kp)(d,{replace:{group:"edit",className:"dmn-icon-screw-wrench",title:c("Change type"),action:{click:function(e,t){var n=(0,h.kp)(function(e){var t=a.getPad(e).html.getBoundingClientRect();return{x:t.left,y:t.bottom+5}}(t),{cursor:{x:e.x,y:e.y}});r.open(t,"dmn-replace",n)}}}});var f=l.allowed("elements.delete",{elements:[e]});return(0,h.cy)(f)&&(f=f[0]===e),f&&(0,h.kp)(d,{delete:{group:"edit",className:"dmn-icon-trash",title:c("Delete"),action:{click:function(n){t.removeElements([e])}}}}),d},K.prototype.getMultiElementContextPadEntries=function(e){var t=this._modeling,n=this._translate,i={};return this._isDeleteAllowed(e)&&(0,h.kp)(i,{delete:{group:"edit",className:"dmn-icon-trash",title:n("Delete"),action:{click:(e,n)=>t.removeElements(n.slice())}}}),i},K.prototype._isDeleteAllowed=function(e){var t=this._rules.allowed("elements.delete",{elements:e});return(0,h.cy)(t)?(0,h.Si)(e,(e=>t.includes(e))):t};const q={__depends__:[O.A,R.A,M.A,k.A,I.A,U],__init__:["contextPadProvider"],contextPadProvider:["type",K]};var W=n(48461),G=n(486),H=n(58120);const X=/\s/,J=/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i,Y=/^[a-z_][\w-.]*$/i,Z=/\$\{([^}]*)\}/g;function Q(e,t,n,i,o){this._eventBus=e,this._modeling=t,this._canvas=n,this._definitionPropertiesView=i,this._translate=o,e.on("definitionIdView.create",(function(e){this._container=e.html;var t=(0,H.P)(".dmn-definitions-name",this._container),n=(0,H.P)(".dmn-definitions-id",this._container);this._setup(t,"name"),this._setup(n,"id")}),this)}Q.$inject=["eventBus","modeling","canvas","definitionPropertiesView","translate"],Q.prototype.update=function(e,t){var n=this._canvas.getRootElement(),i={};if(i[e]=t,"id"===e){var o=function(e,t){const n=e.$model.ids.assigned(t);return t?n&&n!==e?"Element must have unique ID.":function(e){return t=e=function(e){return e.replace(Z,"$1")}(e),X.test(t)?"Id must not contain spaces.":Y.test(e)?void 0:J.test(e)?"Id must not contain prefix.":"Id must be a valid QName.";var t}(t):"Element must have ID."}((0,s.Cf)(n),t);if(o)return void this._addErrorMessage(o);this._clearErrorMessage()}this._modeling.updateProperties(n,i)},Q.prototype._setup=function(e,t){var n=this;e.setAttribute("contenteditable",!0),e.addEventListener("input",(0,h.sg)((function(e){var i=e.target.value||e.target.textContent;n.update(t,i.trim())}),300)),e.addEventListener("keydown",(function(t){13===t.keyCode&&(e.blur(),window.getSelection().removeAllRanges())})),e.addEventListener("blur",(function(){n._clearErrorMessage(),n._definitionPropertiesView.update()}))},Q.prototype._addErrorMessage=function(e){const t='<span class="dmn-definitions-error-message">'+this._translate(e)+"</span>";var n=(0,H.P)(".dmn-definitions-id",this._container);this._clearErrorMessage(),(0,H.Ly)(n).add("dmn-definitions-error"),n.parentElement.appendChild((0,H.zm)(t))},Q.prototype._clearErrorMessage=function(){var e=(0,H.P)(".dmn-definitions-id",this._container);if((0,H.Ly)(e).has("dmn-definitions-error")){(0,H.Ly)(e).remove("dmn-definitions-error");const t=(0,H.P)(".dmn-definitions-error-message",this._container);e.parentNode.removeChild(t)}};var ee=n(11847);const te={__depends__:[G.A],__init__:["definitionPropertiesEdit","definitionPropertiesPaletteAdapter"],definitionPropertiesEdit:["type",Q],definitionPropertiesPaletteAdapter:["type",ee.A]};var ne=n(27855);function ie(e){e.registerFilter((function(e){return(0,h.pb)(e,(function(e){var t=(0,s.f7)(e,["dmn:AuthorityRequirement","dmn:InformationRequirement","dmn:KnowledgeRequirement","dmn:Association","dmn:TextAnnotation"]);return!(e.labelTarget||t)}))}))}ie.$inject=["distributeElements"];const oe={__depends__:[ne.A],__init__:["drdDistributeElements"],drdDistributeElements:["type",ie]};var se=n(88354),re=n(46622);function ae(e){e.invoke(re.A,this)}(0,a.A)(ae,re.A),ae.$inject=["injector"],ae.prototype._registerDefaultActions=function(e){re.A.prototype._registerDefaultActions.call(this,e);const t=e.get("canvas",!1),n=e.get("elementRegistry",!1),i=e.get("selection",!1),o=e.get("lassoTool",!1),s=e.get("handTool",!1),r=e.get("directEditing",!1),a=e.get("distributeElements",!1),l=e.get("alignElements",!1),c=e.get("searchPad",!1);t&&n&&i&&this._registerAction("selectElements",(function(){var e=t.getRootElement(),o=n.filter((function(t){return t!==e}));return i.select(o),o})),i&&a&&this._registerAction("distributeElements",(function(e){var t=i.get(),n=e.type;t.length>2&&a.trigger(t,n)})),i&&l&&this._registerAction("alignElements",(function(e){var t=i.get(),n=e.type;t.length>1&&l.trigger(t,n)})),o&&this._registerAction("lassoTool",(function(){o.toggle()})),s&&this._registerAction("handTool",(function(){s.toggle()})),i&&r&&this._registerAction("directEditing",(function(){var e=i.get();e.length&&r.activate(e[0])})),i&&c&&this._registerAction("find",(function(){c.toggle()}))};const le={__depends__:[se.A],editorActions:["type",ae]};var ce=n(84464);function ue(e,t,n,i){n.on("import.start",(({definitions:n})=>{(0,ce.$)(n)||function(n){var o=n.dmnDI;o||(o=e.create("dmndi:DMNDI"),n.set("dmnDI",o));var r=e.create("dmndi:DMNDiagram");o.set("diagrams",[r]);var a=0;(0,h.jJ)(n.get("drgElement"),(function(n){if((0,s.is)(n,"dmn:Decision")){var o=t._getDefaultSize(n),l=e.createDiShape(n,{x:150+30*a,y:150+30*a,width:o.width,height:o.height});i.updateDiParent(l,r),a++}}))}(n)}))}ue.$inject=["drdFactory","elementFactory","eventBus","drdUpdater"];const de={__init__:["diGenerator"],diGenerator:["type",ue]};var pe=n(54964),he=n(76137),me=n(29725);function ge(e){e.invoke(me.Ay,this)}(0,a.A)(ge,me.Ay),ge.$inject=["injector"],ge.prototype.registerBindings=function(e,t){function n(n,i){t.isRegistered(n)&&e.addListener(i)}me.Ay.prototype.registerBindings.call(this,e,t),n("selectElements",(function(n){var i=n.keyEvent;if(e.isKey(["a","A"],i)&&e.isCmd(i))return t.trigger("selectElements"),!0})),n("lassoTool",(function(n){var i=n.keyEvent;if(!e.hasModifier(i))return e.isKey(["l","L"],i)?(t.trigger("lassoTool"),!0):void 0})),n("handTool",(function(n){var i=n.keyEvent;if(!e.hasModifier(i))return e.isKey(["h","H"],i)?(t.trigger("handTool"),!0):void 0})),n("directEditing",(function(n){var i=n.keyEvent;if(!e.hasModifier(i))return e.isKey(["e","E"],i)?(t.trigger("directEditing"),!0):void 0})),n("find",(function(n){var i=n.keyEvent;if(e.isKey(["f","F"],i)&&e.isCmd(i))return t.trigger("find"),!0}))};const fe={__depends__:[he.A],__init__:["keyboardBindings"],keyboardBindings:["type",ge]};var ye=n(56373),ve=n(6188),be=n(19112),_e=n(17987),xe=n(7827),Ce=n(46389),Ee="djs-label-hidden";function we(e,t,n,i,o){this._canvas=e,this._modeling=i,this._textRenderer=o,this._eventBus=n,t.registerProvider(this),n.on("element.dblclick",(function(e){t.activate(e.element)})),n.on(["autoPlace.start","canvas.viewbox.changing","drag.init","drillDown.click","element.mousedown","popupMenu.open","selection.changed"],(function(){t.complete()})),n.on(["commandStack.changed"],(function(){t.cancel()})),n.on("create.end",500,(function(e){var n=e.shape;((0,s.is)(n,"dmn:Decision")||(0,s.is)(n,"dmn:InputData")||(0,s.is)(n,"dmn:BusinessKnowledgeModel")||(0,s.is)(n,"dmn:KnowledgeSource")||(0,s.is)(n,"dmn:TextAnnotation"))&&t.activate(n)})),n.on("autoPlace.end",500,(function(e){t.activate(e.shape)})),this._eventBus.on(["directEditing.complete","directEditing.cancel"],(function(t){var n=t.active;if(n){var i=n.element.label||n.element;e.removeMarker(i,Ee)}}))}we.$inject=["canvas","directEditing","eventBus","modeling","textRenderer"],we.prototype.activate=function(e){var t=(0,Ce.p)(e);if((0,h.O9)(t)){var n={text:t},i=this.getEditingBBox(e);(0,h.kp)(n,i);var o={},r=n.style||{};return(0,s.is)(e,"dmn:DRGElement")&&((0,h.kp)(o,{centerVertically:!0}),(0,h.kp)(r,{backgroundColor:null,border:null})),(0,s.is)(e,"dmn:TextAnnotation")&&(0,h.kp)(o,{resizable:!0}),(0,h.kp)(n,{options:o,style:r}),this._canvas.addMarker(e,Ee),n}},we.prototype.getEditingBBox=function(e){var t=this._canvas,n=e.label||e,i=t.getAbsoluteBBox(n),o={x:i.x,y:i.y},r=t.zoom(),a=this._textRenderer.getDefaultStyle(),l=a.fontSize*r,c=a.lineHeight,u={fontFamily:this._textRenderer.getDefaultStyle().fontFamily,fontWeight:this._textRenderer.getDefaultStyle().fontWeight};return(0,s.is)(e,"dmn:DRGElement")&&((0,h.kp)(o,{width:i.width,height:i.height}),(0,h.kp)(u,{fontSize:l+"px",lineHeight:c,paddingTop:7*r+"px",paddingBottom:7*r+"px",paddingLeft:5*r+"px",paddingRight:5*r+"px"})),(0,s.is)(e,"dmn:TextAnnotation")&&((0,h.kp)(o,{width:i.width,height:i.height,minWidth:30*r,minHeight:10*r}),(0,h.kp)(u,{textAlign:"left",paddingTop:5*r+"px",paddingBottom:7*r+"px",paddingLeft:7*r+"px",paddingRight:5*r+"px",fontSize:l+"px",lineHeight:c})),{bounds:o,style:u}},we.prototype.update=function(e,t,n,i){var o,r,a;(0,s.is)(e,"dmn:TextAnnotation")&&(r=this._canvas.getAbsoluteBBox(e),o={x:e.x,y:e.y,width:e.width/r.width*i.width,height:e.height/r.height*i.height}),(a=t)&&a.trim()||(t=null),this._modeling.updateLabel(e,t,o)};const De={__depends__:[be.A,_e.A,xe.A],__init__:["labelEditingProvider"],labelEditingProvider:["type",we]};var Se=n(98142);function Ae(e,t){t.invoke(Se.A,this),this.preExecute("connection.create",(function(t){var n=t.connection,i=n.businessObject,o=t.source,r=t.target;(0,s.is)(n,"dmn:Association")?((i.sourceRef=e.create("dmn:DMNElementReference",{href:"#"+o.id})).$parent=i,(i.targetRef=e.create("dmn:DMNElementReference",{href:"#"+r.id})).$parent=i):(i["required"+function(e){return(0,s.is)(e,"dmn:BusinessKnowledgeModel")?"Knowledge":(0,s.is)(e,"dmn:Decision")?"Decision":(0,s.is)(e,"dmn:InputData")?"Input":(0,s.is)(e,"dmn:KnowledgeSource")?"Authority":void 0}(o)]=e.create("dmn:DMNElementReference",{href:"#"+o.id})).$parent=i}),!0)}function je(e,t,n,i){function o(e,i,o){i||(i=e.incoming.filter((function(e){return(0,s.is)(e,"dmn:InformationRequirement")})));var r={};o?r[o]=i:r=function(e,t){var n={};return t.forEach((function(t){var i=(0,p.vc)(t.source,e).split("-").shift();n[i]||(n[i]=[]),n[i].push(t)})),n}(e,i),(0,h.jJ)(r,(function(i,o){i=function(e,t){var n;return n=t.includes("top")||t.includes("bottom")?"x":"y",e.sort((function(e,t){return(0,p.pp)(e.source)[n]-(0,p.pp)(t.source)[n]}))}(i,o);var s=function(e,t,n){return e.map((function(i,o){var s=i.source,r=(0,p.pp)(s),a=(0,p.Fy)(s),l=(0,p.Fy)(t),c=e.length;return n.includes("bottom")?{start:{x:r.x,y:a.top},end:{x:l.left+t.width/(c+1)*(o+1),y:l.bottom}}:n.includes("top")?{start:{x:r.x,y:a.bottom},end:{x:l.left+t.width/(c+1)*(o+1),y:l.top}}:n.includes("right")?{start:{x:a.left,y:r.y},end:{x:l.right,y:l.top+t.height/(c+1)*(o+1)}}:{start:{x:a.right,y:r.y},end:{x:l.left,y:l.top+t.height/(c+1)*(o+1)}}}))}(i,e,o);i.forEach(((e,i)=>{var o=s[i].start,r=s[i].end,a=t.layoutConnection(e,{connectionStart:o,connectionEnd:r});n.updateWaypoints(e,a)}))}))}e.invoke(Se.A,this),this.preExecute(["connection.create","connection.reconnect"],(function(e){var t=e.connection,n=e.newSource||e.source,o=e.newTarget||e.target;if((!(0,s.is)(t,"dmn:InformationRequirement")||i.allowed("connection.connect",{connection:t,source:n,target:o}))&&(0,s.is)(t,"dmn:InformationRequirement")){var r=(0,p.vc)(n,o);e.hints||(e.hints={}),(0,h.kp)(e.hints,function(e,t,n){var i=(0,p.pp)(e),o=(0,p.pp)(t);return n.includes("bottom")?(i.y=e.y,o.y=t.y+t.height):n.includes("top")?(i.y=e.y+e.height,o.y=t.y):n.includes("right")?(i.x=e.x,o.x=t.x+t.width):(i.x=e.x+e.width,o.x=t.x),{connectionStart:i,connectionEnd:o}}(n,o,r))}}),!0),this.postExecuted(["connection.create","connection.delete","connection.reconnect"],(function(e){var t=e.connection,n=t.source||e.source,i=t.target||e.target;if((0,s.is)(t,"dmn:InformationRequirement")){var r=(0,p.vc)(n,i),a=i.incoming.filter((e=>{var t=(0,p.vc)(e.source,e.target);return(0,s.is)(e,"dmn:InformationRequirement")&&Oe(t,r)}));a.length&&o(i,a,r)}}),!0),this.preExecute("connection.reconnect",(function(e){var t=e.connection,n=t.source,i=t.target;if((0,s.is)(t,"dmn:InformationRequirement")){var r=(0,p.vc)(n,i),a=i.incoming.filter((e=>{var n=(0,p.vc)(e.source,e.target);return e!==t&&(0,s.is)(e,"dmn:InformationRequirement")&&Oe(n,r)}));a.length&&o(i,a,r)}}),!0),this.postExecuted("elements.move",500,(function(e){var t=e.shapes,n=e.closure.enclosedConnections;t.forEach((function(e){if((0,s.f7)(e,["dmn:Decision","dmn:InputData"])){var t=e.incoming.filter((function(e){return(0,s.is)(e,"dmn:InformationRequirement")&&!n[e.id]}));t.length&&o(e,t),e.outgoing.forEach((function(e){(0,s.is)(e,"dmn:InformationRequirement")&&!n[e.id]&&o(e.target)}))}}))}),!0)}function Oe(e,t){return e&&t&&e.split("-").shift()===t.split("-").shift()}function Re(e,t,n){e.invoke(Se.A,this),this.preExecute("connection.reconnect",(function(e){var i=e.connection,o=e.newSource||i.source,s=e.newTarget||i.target,r=i.waypoints.slice(),a=n.allowed("connection.reconnect",{connection:i,source:o,target:s});a&&a.type!==i.type&&(e.connection=t.connect(o,s,{type:a.type,waypoints:r}),t.removeConnection(i))}),!0)}function Me(e,t,n){Se.A.call(this,e),this._modeling=t,this.postExecuted(["shape.replace"],1500,(function(e){var i=e.context,o=i.oldShape,s=i.newShape;t.unclaimId(o.businessObject.id,o.businessObject),t.updateProperties(s,{id:o.id}),n.select(s)}))}Ae.$inject=["drdFactory","injector"],(0,a.A)(Ae,Se.A),je.$inject=["injector","layouter","modeling","rules"],(0,a.A)(je,Se.A),(0,a.A)(Re,Se.A),Re.$inject=["injector","modeling","rules"],(0,a.A)(Me,Se.A),Me.$inject=["eventBus","modeling","selection"];var ke=n(53656);class Ie extends Se.A{constructor(e){super(e),this.executed("element.updateProperties",this.updateIds.bind(this))}updateIds({context:e}){const{element:t,oldProperties:n,properties:i}=e,o=(0,s.Cf)(t);if(this.shouldSkipUpdate(o,n,i))return;const r=function(e){let t=e;for(;!(0,s.is)(t,"dmn:Definitions");)t=t.$parent;return t}(o);r.get("drgElement").forEach((e=>{!function(e,t,n){const i={authorityRequirement:()=>{e.authorityRequirement.forEach((e=>{const{requiredAuthority:i,requiredDecision:o,requiredInput:s}=e;i&&i.href===`#${t}`&&(i.href=`#${n}`),o&&o.href===`#${t}`&&(o.href=`#${n}`),s&&s.href===`#${t}`&&(s.href=`#${n}`)}))},informationRequirement:()=>{e.informationRequirement.forEach((e=>{const{requiredDecision:i,requiredInput:o}=e;i&&i.href===`#${t}`&&(i.href=`#${n}`),o&&o.href===`#${t}`&&(o.href=`#${n}`)}))},knowledgeRequirement:()=>{e.knowledgeRequirement.forEach((e=>{const{requiredKnowledge:i}=e;i&&i.href===`#${t}`&&(i.href=`#${n}`)}))}};(0,ke.jJ)(i,((t,n)=>{e[n]&&t()}))}(e,n.id,i.id)})),r.get("artifact").forEach((e=>{!function(e,t,n){const i={sourceRef:()=>{const{sourceRef:i}=e;i.href===`#${t}`&&(i.href=`#${n}`)},targetRef:()=>{const{targetRef:i}=e;i.href===`#${t}`&&(i.href=`#${n}`)}};(0,ke.jJ)(i,((t,n)=>{e[n]&&t()}))}(e,n.id,i.id)}))}shouldSkipUpdate(e,t,n){return!function(e,t){return"id"in e&&"id"in t}(t,n)||!(0,s.is)(e,"dmn:DRGElement")&&!(0,s.is)(e,"dmn:TextAnnotation")}}Ie.$inject=["eventBus"];class Te extends Se.A{static $inject=["eventBus","modeling"];constructor(e,t){super(e),this._modeling=t,this.postExecuted("element.updateProperties",this.updateVariableFromElement),this.postExecuted("element.updateLabel",this.updateVariableFromLabel)}updateVariableFromLabel=({context:e})=>{const{element:t,newLabel:n}=e,i=(0,s.Cf)(t).variable;i&&this._modeling.updateProperties(i,{name:n})};updateVariableFromElement=({context:e})=>{const{element:t,properties:n}=e,i=(0,s.Cf)(t);i.variable&&((0,s.is)(t,"dmn:Decision")||(0,s.is)(t,"dmn:BusinessKnowledgeModel"))&&this.isNameChanged(n)&&(this.isVariable(t)||this.shouldSyncVariable(t)||this.syncElementVariableChange(i))};isNameChanged(e){return"name"in e}isVariable(e){const t=function(e){return e.$parent}(e);return(0,s.is)(e,"dmn:InformationItem")&&t&&t.get("variable")===e}shouldSyncVariable(e){const t=(0,s.Cf)(e),n=t.get("variable");return n&&t.name===n.name}syncElementVariableChange(e){const t=e.get("name"),n=e.variable;this._modeling.updateProperties(n,{name:t})}}const Fe={__init__:["createConnectionBehavior","idChangeBehavior","nameChangeBehavior","layoutConnectionBehavior","replaceConnectionBehavior","replaceElementBehavior"],createConnectionBehavior:["type",Ae],idChangeBehavior:["type",Ie],nameChangeBehavior:["type",Te],layoutConnectionBehavior:["type",je],replaceConnectionBehavior:["type",Re],replaceElementBehavior:["type",Me]};var Pe=n(81734),Le=n(24049);function Ne(e){e.invoke(Le.A,this)}function $e(e,t){if(!e||Ue(e)||!t||Ue(t))return null;if(e===t)return!1;if((0,s.is)(e,"dmn:BusinessKnowledgeModel")&&(0,s.f7)(t,["dmn:BusinessKnowledgeModel","dmn:Decision"]))return{type:"dmn:KnowledgeRequirement"};if((0,s.is)(e,"dmn:Decision")){if((0,s.is)(t,"dmn:Decision"))return{type:"dmn:InformationRequirement"};if((0,s.is)(t,"dmn:KnowledgeSource"))return{type:"dmn:AuthorityRequirement"}}if((0,s.is)(e,"dmn:Definitions")||(0,s.is)(t,"dmn:Definitions"))return!1;if((0,s.is)(e,"dmn:InputData")){if((0,s.is)(t,"dmn:Decision"))return{type:"dmn:InformationRequirement"};if((0,s.is)(t,"dmn:KnowledgeSource"))return{type:"dmn:AuthorityRequirement"}}return(0,s.is)(e,"dmn:KnowledgeSource")&&(0,s.f7)(t,["dmn:BusinessKnowledgeModel","dmn:Decision","dmn:KnowledgeSource"])?{type:"dmn:AuthorityRequirement"}:!!((0,s.is)(e,"dmn:TextAnnotation")&&!(0,s.is)(t,"dmn:TextAnnotation")||!(0,s.is)(e,"dmn:TextAnnotation")&&(0,s.is)(t,"dmn:TextAnnotation"))&&{type:"dmn:Association"}}function Be(e,t){return(0,s.f7)(e,["dmn:BusinessKnowledgeModel","dmn:Decision","dmn:InputData","dmn:KnowledgeSource","dmn:TextAnnotation"])&&(0,s.is)(t,"dmn:Definitions")}function Ve(e,t){return(0,h.cy)(e)||(e=[e]),!t||!(!(0,h.Si)(e,(function(e){return(0,s.f7)(e,["dmn:BusinessKnowledgeModel","dmn:Decision","dmn:InputData","dmn:KnowledgeSource","dmn:TextAnnotation","dmn:InformationRequirement","dmn:AuthorityRequirement","dmn:KnowledgeRequirement","dmn:Association"])}))||!(0,s.is)(t,"dmn:Definitions"))}function Ue(e){return!!e.labelTarget}(0,a.A)(Ne,Le.A),Ne.$inject=["injector"],Ne.prototype.init=function(){this.addRule("connection.create",(function(e){return $e(e.source,e.target)})),this.addRule("connection.reconnect",(function(e){return e.connection,$e(e.source,e.target)})),this.addRule("connection.updateWaypoints",(function(e){const t=e.connection;return{type:t.type,businessObject:t.businessObject}})),this.addRule("elements.move",(function(e){var t=e.target,n=e.shapes;return e.position,Ve(n,t)})),this.addRule("shape.create",(function(e){return Be(e.shape,e.target)})),this.addRule("shape.resize",(function(e){var t=e.shape;return(0,s.is)(t,"dmn:TextAnnotation")}))},Ne.prototype.canConnect=$e,Ne.prototype.canCreate=Be,Ne.prototype.canMove=Ve;const ze={__depends__:[Pe.A],__init__:["drdRules"],drdRules:["type",Ne]};function Ke(e){this._model=e}Ke.$inject=["moddle"],Ke.prototype._needsId=function(e){return(0,s.f7)(e,["dmn:Artifact","dmn:DMNElement","dmn:DRGElement","dmndi:DMNDiagram","dmndi:DMNDiagramElement"])},Ke.prototype._ensureId=function(e){var t=(e.$type||"").replace(/^[^:]*:/g,"")+"_";!e.id&&this._needsId(e)&&(e.id=this._model.ids.nextPrefixed(t,e))},Ke.prototype.create=function(e,t){var n=this._model.create(e,t||{});return this._ensureId(n),n},Ke.prototype.createDiShape=function(e,t,n){return this.create("dmndi:DMNShape",(0,h.kp)({dmnElementRef:e,bounds:this.createDiBounds(t)},n))},Ke.prototype.createDiBounds=function(e){return this.create("dc:Bounds",e)},Ke.prototype.createDiEdge=function(e,t,n){return this.create("dmndi:DMNEdge",{dmnElementRef:e,waypoint:this.createDiWaypoints(t)},n)},Ke.prototype.createDiWaypoints=function(e){var t=this;return e.map((function(e){return t.createDiWaypoint(e)}))},Ke.prototype.createDiWaypoint=function(e){return this.create("dc:Point",(0,h.Up)(e,["x","y"]))},Ke.prototype.createExtensionElements=function(){return this.create("dmn:ExtensionElements",{values:[]})};var qe=n(93742);function We(e,t,n,i,o){o.invoke(Se.A,this),this._definitionPropertiesView=t,this._drdFactory=n,this._drdRules=i;var r=this;function a(e){var t=e.connection,n=e.parent,i=e.shape;t&&!(0,s.is)(t,"dmn:Association")&&(n=t.target),r.updateParent(i||t,n)}function l(e){var t=e.connection,n=e.shape,i=e.parent||e.newParent;t&&!(0,s.is)(t,"dmn:Association")&&(i=t.target),r.updateParent(n||t,i)}function c(e){var t=e.shape;((0,s.is)(t,"dmn:DRGElement")||(0,s.is)(t,"dmn:TextAnnotation"))&&r.updateBounds(t)}function u(e){r.updateConnectionWaypoints(e)}this.executed(["connection.create","connection.layout"],(function(t){var n=t.connection;t.cropped||(n.waypoints=e.getCroppedWaypoints(n),t.cropped=!0)}),!0),this.reverted(["connection.layout"],(function(e){delete e.cropped}),!0),this.executed(["connection.create","connection.delete","connection.move","shape.create","shape.delete"],a,!0),this.reverted(["connection.create","connection.delete","connection.move","shape.create","shape.delete"],l,!0),this.executed(["shape.create","shape.move","shape.resize"],c,!0),this.reverted(["shape.create","shape.move","shape.resize"],c,!0),this.executed(["connection.create","connection.layout","connection.move","connection.updateWaypoints"],u,!0),this.reverted(["connection.create","connection.layout","connection.move","connection.updateWaypoints"],u,!0),this.executed("connection.create",(function(e){var t=e.connection,n=t.businessObject,i=e.target.businessObject;(0,s.is)(t,"dmn:Association")?a(e):r.updateSemanticParent(n,i)}),!0),this.reverted("connection.create",(function(e){l(e)}),!0),this.executed("connection.reconnect",(function(e){var t=e.connection.businessObject,n=e.newTarget.businessObject;(0,s.is)(t,"dmn:Association")||r.updateSemanticParent(t,n)}),!0),this.reverted("connection.reconnect",(function(e){var t=e.connection.businessObject,n=e.oldTarget.businessObject;(0,s.is)(t,"dmn:Association")||r.updateSemanticParent(t,n)}),!0),this.executed("element.updateProperties",(function(e){t.update()}),!0),this.reverted("element.updateProperties",(function(e){t.update()}),!0)}(0,a.A)(We,Se.A),We.$inject=["connectionDocking","definitionPropertiesView","drdFactory","drdRules","injector"],We.prototype.updateBounds=function(e){var t=e.businessObject.di.bounds;(0,h.kp)(t,{x:e.x,y:e.y,width:e.width,height:e.height})},We.prototype.updateConnectionWaypoints=function(e){var t=this._drdFactory,n=e.connection,i=n.businessObject.di;i.waypoint=t.createDiWaypoints(n.waypoints).map((function(e){return e.$parent=i,e}))},We.prototype.updateParent=function(e,t){var n=e.parent;(0,s.is)(e,"dmn:DRGElement")||(0,s.is)(e,"dmn:Artifact")||(n=t);var i=e.businessObject,o=n&&n.businessObject;this.updateSemanticParent(i,o),this.updateDiParent(i.di,o&&o.di)},We.prototype.updateSemanticParent=function(e,t){var n,i;e.$parent!==t&&((0,s.is)(e,"dmn:DRGElement")?i="drgElement":(0,s.is)(e,"dmn:Artifact")?i="artifact":(0,s.is)(e,"dmn:InformationRequirement")?i="informationRequirement":(0,s.is)(e,"dmn:AuthorityRequirement")?i="authorityRequirement":(0,s.is)(e,"dmn:KnowledgeRequirement")&&(i="knowledgeRequirement"),e.$parent&&(n=e.$parent.get(i),(0,qe.TF)(n,e)),t?(n=t.get(i))&&(n.push(e),e.$parent=t):e.$parent=null)},We.prototype.updateDiParent=function(e,t){if(e.$parent!==t){if(!(0,s.f7)(e,["dmndi:DMNEdge","dmndi:DMNShape"]))throw new Error("unsupported");for(var n=t||e;!(0,s.is)(n,"dmndi:DMNDiagram");)n=n.$parent;var i=n.get("diagramElements");t?(e.$parent=n,(0,qe.WQ)(i,e)):(e.$parent=null,(0,qe.TF)(i,e))}};var Ge=n(77550);function He(e){this._moddle=e}function Xe(){function e(e,t){var n=e.label||e,i=e.labelTarget||e;return(0,Ce.j)(n,t,i!==n),[n,i]}this.execute=function(t){return t.oldLabel=(0,Ce.p)(t.element),e(t.element,t.newLabel)},this.revert=function(t){return e(t.element,t.oldLabel)}}He.$inject=["moddle"],He.prototype.execute=function(e){var t=this._moddle.ids,n=e.id,i=e.element;e.claiming?t.claim(n,i):t.unclaim(n)},He.prototype.revert=function(e){var t=this._moddle.ids,n=e.id,i=e.element;e.claiming?t.unclaim(n):t.claim(n,i)};const Je="id";function Ye(e,t){this._elementRegistry=e,this._moddle=t}function Ze(e,t){return Je in e&&e[Je]!==t[Je]}function Qe(e,t){(0,h.jJ)(t,(function(t,n){e.set(n,t)}))}function et(e){this._elementRegistry=e}function tt(e,t){(0,h.jJ)(t,(function(t,n){e.set(n,t)}))}function nt(e,t,n){this._canvas=e,this._drdRules=t,n.invoke(Ge.A,this)}Ye.$inject=["elementRegistry","moddle"],Ye.prototype.execute=function(e){const{element:t,properties:n}=e,i=[t];if(!t)throw new Error("element required");const o=this._elementRegistry,r=this._moddle.ids,a=(0,s.Cf)(t),l=e.oldProperties||function(e,t){return(0,h.TS)(t,(function(t,n){return t[n]=e.get(n),t}),{})}(a,(0,h.HP)(n));return Ze(n,a)&&(r.unclaim(a[Je]),o.updateId(t,n[Je]),r.claim(n[Je],a)),"name"in n&&t.label&&i.push(t.label),Qe(a,n),e.oldProperties=l,e.changed=i,i},Ye.prototype.revert=function(e){const{element:t,properties:n,oldProperties:i}=e,o=(0,s.Cf)(t),r=this._elementRegistry,a=this._moddle.ids;return Qe(o,i),Ze(n,o)&&(a.unclaim(n[Je]),r.updateId(t,i[Je]),a.claim(i[Je],o)),e.changed},et.$inject=["elementRegistry"],et.prototype.execute=function(e){var t=e.element,n=e.moddleElement,i=e.properties;if(!n)throw new Error("<moddleElement> required");var o=e.changed||[t],s=e.oldProperties||function(e,t){return(0,h.TS)(t,(function(t,n){return t[n]=e.get(n),t}),{})}(n,(0,h.HP)(i));return tt(n,i),e.oldProperties=s,e.changed=o,o},et.prototype.revert=function(e){var t=e.oldProperties,n=e.moddleElement,i=e.changed;return tt(n,t),i},(0,a.A)(nt,Ge.A),nt.$inject=["canvas","drdRules","injector"],nt.prototype.claimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t,claiming:!0})},nt.prototype.connect=function(e,t,n,i){var o=this._drdRules,s=this._canvas.getRootElement();return n||(n=o.canConnect(e,t)||{type:"dmn:Association"}),this.createConnection(e,t,n,s,i)},nt.prototype.getHandlers=function(){var e=Ge.A.prototype.getHandlers.call(this);return e["id.updateClaim"]=He,e["element.updateLabel"]=Xe,e["element.updateProperties"]=Ye,e["element.updateModdleProperties"]=et,e},nt.prototype.unclaimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t})},nt.prototype.updateModdleProperties=function(e,t,n){this._commandStack.execute("element.updateModdleProperties",{element:e,moddleElement:t,properties:n})},nt.prototype.updateProperties=function(e,t){this._commandStack.execute("element.updateProperties",{element:e,properties:t})},nt.prototype.updateLabel=function(e,t,n,i){this._commandStack.execute("element.updateLabel",{element:e,newLabel:t,newBounds:n,hints:i||{}})};var it=n(57905);function ot(e){this._connectionDocking=e}function st(e,t){return e?e.original||e:(0,p.pp)(t)}(0,a.A)(ot,it.A),ot.$inject=["connectionDocking"],ot.prototype.layoutConnection=function(e,t){var n=this._connectionDocking;t||(t={});var i=t.source||e.source,o=t.target||e.target,r=t.waypoints||e.waypoints||[],a=t.connectionStart,l=t.connectionEnd,c=(0,p.vc)(i,o);if(a||(a=st(r[0],i)),l||(l=st(r[r.length-1],o)),(0,s.is)(e,"dmn:InformationRequirement")){r=[a,l];var u=n.getCroppedWaypoints((0,h.kp)({},e,{waypoints:r}),i,o),d={x:(l=u.pop()).x,y:l.y};return c.includes("bottom")?d.y+=20:c.includes("top")?d.y-=20:c.includes("right")?d.x+=20:d.x-=20,u.concat([d,l])}return[a,l]};var rt=n(10270);const at={__init__:["modeling","drdUpdater"],__depends__:[Fe,ze,G.A,be.A,M.A,_e.A],drdFactory:["type",Ke],drdUpdater:["type",We],elementFactory:["type",b],modeling:["type",nt],layouter:["type",ot],connectionDocking:["type",rt.A]};var lt=n(16351),ct=n(46055),ut=n(60210);const dt={width:135,height:46},pt={width:100,height:63};function ht(e,t,n){return(0,ut.vt)("path",{d:e,strokeWidth:2,transform:`translate(${t.x}, ${t.y})`,...n})}function mt(e,t){this._styles=t,e.registerProvider(this)}function gt(e,t){var n;return"dmn:BusinessKnowledgeModel"===t?n=dt:"dmn:KnowledgeSource"===t&&(n=pt),e.width===n.width&&e.height===n.height}mt.$inject=["outline","styles"],mt.prototype.getOutline=function(e){const t=this._styles.cls("djs-outline",["no-fill"]);var n;return(0,s.is)(e,"dmn:InputData")?(n=(0,ut.vt)("rect"),(0,ut.CF)(n,(0,h.kp)({x:-5,y:-5,rx:27,width:e.width+10,height:e.height+10},t))):(0,s.is)(e,"dmn:BusinessKnowledgeModel")&&gt(e,"dmn:BusinessKnowledgeModel")?n=ht("\nM2.45221 16.0068L18.7175 1.74436L18.0615 0.996331L18.7175 1.74436C19.2646 1.26455 19.9676 \n1 20.6953 1H140.926C142.583 1 143.926 2.34295 143.926 3.99967L143.93 37.5457C143.93 \n38.3668 143.593 39.152 142.999 39.7183L143.689 40.4424L142.999 39.7183L127.299 \n54.6723C126.741 55.2036 126 55.5 125.23 55.5H4.53787C2.88599 55.5 1.54491 54.1646 1.5379 \n52.5127L1.43066 27.229L1.43065 27.2248L1.4301 18.2626C1.43005 \n17.3986 1.80255 16.5765 2.45221 16.0068Z\n",{x:-6,y:-6},t):(0,s.is)(e,"dmn:KnowledgeSource")&&gt(e,"dmn:KnowledgeSource")&&(n=ht("\nM1.79494 63.0032L1.2941 63.6423L1.79493 63.0032C1.71778 62.9427 1.6428 62.8741 1.57288 \n62.8L1.01736 63.3241L1.57288 62.8C1.20495 62.41 1 61.8941 1 61.3579V2.65067C1 1.74066 \n1.73867 1.00345 2.64868 1.00526L108.006 1.2145C109.66 1.21778 111 2.55996 111 \n4.21449V21.7015V61.6762C111 63.3188 109.679 64.656 108.037 64.676L107.06 64.6879C106.66 \n64.6927 106.26 64.6165 105.89 64.4652C105.04 64.1176 104.222 63.78 103.43 \n63.4531C93.4866 59.3517 87.6891 56.9603 76.3991 58.1057C71.7035 58.5821 66.8747 60.74 \n61.5721 63.1744C61.3243 63.2881 61.0753 63.4026 60.825 63.5177C55.6712 65.8868 49.9696 \n68.5077 43.2365 70.3468C31.101 73.6617 15.2135 73.5179 1.79494 63.0032Z\n",{x:-6,y:-1.5},t)),n},mt.prototype.updateOutline=function(e){return!!(0,s.f7)(e,["dmn:InputData","dmn:BusinessKnowledgeModel","dmn:KnowledgeSource"])};const ft={__depends__:[ct.A],__init__:["outlineProvider"],outlineProvider:["type",mt]};var yt=n(33266),vt=n(2159),bt=n(827);function _t(e,t,n,i,o,s){this._palette=e,this._create=t,this._elementFactory=n,this._handTool=i,this._lassoTool=o,this._translate=s,e.registerProvider(this)}_t.$inject=["palette","create","elementFactory","handTool","lassoTool","translate"],_t.prototype.getPaletteEntries=function(e){var t={},n=this._create,i=this._elementFactory,o=this._handTool,s=this._lassoTool,r=this._translate;function a(e,t,o,s,r){function a(t){var o=i.createShape((0,h.kp)({type:e},r));n.start(t,o)}return{group:t,className:o,title:s,action:{dragstart:a,click:a}}}return(0,h.kp)(t,{"hand-tool":{group:"tools",className:"dmn-icon-hand-tool",title:r("Activate hand tool"),action:{click:function(e){o.activateHand(e)}}},"lasso-tool":{group:"tools",className:"dmn-icon-lasso-tool",title:r("Activate lasso tool"),action:{click:function(e){s.activateSelection(e)}}},"tool-separator":{group:"tools",separator:!0},"create.decision":a("dmn:Decision","drd","dmn-icon-decision",r("Create decision")),"create.input-data":a("dmn:InputData","drd","dmn-icon-input-data",r("Create input data")),"create.knowledge-source":a("dmn:KnowledgeSource","drd","dmn-icon-knowledge-source",r("Create knowledge source")),"create.business-knowledge-model":a("dmn:BusinessKnowledgeModel","drd","dmn-icon-business-knowledge",r("Create knowledge model"))}),t};const xt={__depends__:[O.A,yt.A,I.A,vt.A,bt.A],__init__:["paletteProvider"],paletteProvider:["type",_t]};var Ct=n(60188);function Et(e){e.on(["bendpoint.move.move","bendpoint.move.end"],2e3,(function(e){var t=e.context,n=t.allowed,i=t.hover,o=t.source,r=t.target,a=t.type;if(t.hints||(t.hints={}),delete t.hints.connectionStart,delete t.hints.connectionEnd,(!n||"dmn:InformationRequirement"===n.type)&&i&&(0,s.f7)(i,["dmn:Decision","dmn:InputData"])&&o!==r){var l="reconnectStart"===a||"reconnectEnd"===a,c=(0,p.vc)(o,r);l&&i===o?(function(e,t){var n=wt(e.context.source,t),i=e.x-n.x,o=e.y-n.y;e.x-=i,e.y-=o,e.dx-=i,e.dy-=o}(e,c),t.hints.connectionEnd=Dt(r,c)):l&&i===r&&(t.hints.connectionStart=wt(o,c),function(e,t){var n=Dt(e.context.target,t),i=0,o=0;t.includes("top")||t.includes("bottom")?o=e.y-n.y:i=e.x-n.x,e.x-=i,e.y-=o,e.dx-=i,e.dy-=o}(e,c))}}))}function wt(e,t){var n=(0,p.Fy)(e),i=(0,p.pp)(e);return t.includes("bottom")?i.y=n.top:t.includes("top")?i.y=n.bottom:t.includes("right")?i.x=n.left:i.x=n.right,i}function Dt(e,t){var n=(0,p.Fy)(e),i=(0,p.pp)(e);return t.includes("bottom")?i.y=n.bottom:t.includes("top")?i.y=n.top:t.includes("right")?i.x=n.right:i.x=n.left,i}function St(e){e.on(["connect.hover","connect.move","connect.end"],250,(function(e){var t=e.context,n=t.canExecute,i=t.hover,o=t.source,s=t.target;if(n&&"dmn:InformationRequirement"===n.type){var r=(0,p.vc)(o,s);t.connectionStart=(0,p.pp)(o),t.connectionEnd=i===o?(0,p.pp)(s):{x:e.x,y:e.y},r.includes("bottom")?(t.connectionStart.y=(0,p.Fy)(o).top,t.connectionEnd.y=(0,p.Fy)(s).bottom):r.includes("top")?(t.connectionStart.y=(0,p.Fy)(o).bottom,t.connectionEnd.y=(0,p.Fy)(s).top):r.includes("right")?(t.connectionStart.x=(0,p.Fy)(o).left,t.connectionEnd.x=(0,p.Fy)(s).right):(t.connectionStart.x=(0,p.Fy)(o).right,t.connectionEnd.x=(0,p.Fy)(s).left)}else delete t.connectionStart,delete t.connectionEnd}))}Et.$inject=["eventBus"],St.$inject=["eventBus"];const At={__depends__:[n(56875).A],__init__:["bendpointSnapping","connectSnapping"],bendpointSnapping:["type",Et],connectSnapping:["type",St]};function jt(e){l.A.call(this,e)}function Ot(e,t){Pt(e,"dmn:Decision")?function(e,t){for(const n of e.get("informationRequirement"))Rt(n,t);for(const n of e.get("knowledgeRequirement"))kt(n,t)}(e,t):Pt(e,"dmn:BusinessKnowledgeModel")?function(e,t){for(const n of e.get("knowledgeRequirement"))kt(n,t)}(e,t):Pt(e,"dmn:Expression")&&function(e,t){Pt(e,"dmn:FunctionDefinition")&&function(e,t){const n=e.get("formalParameter");for(const e of n)It(e,t)}(e,t)}(e,t)}function Rt(e,t){const n=e.get("requiredInput");n&&function(e,t){const n=Ft(e,t.rootElement);if(!n)return;const i=n.get("name");i&&t.variables.push({name:i,origin:n})}(n,t);const i=e.get("requiredDecision");i&&function(e,t){const n=Ft(e,t.rootElement);if(!n)return;const i=n.get("name");if(!i)return;const o={name:i,origin:n},s=n.get("decisionLogic");s&&function(e,t){Pt(e,"dmn:DecisionTable")&&function(e,t){if(1===e.length){const n={...Mt(e[0]),name:t.name};return void Object.assign(t,n)}const n=e.map(Mt);t.entries=n.filter((e=>!!e.name))}(e.get("output"),t)}(s,o),t.variables.push(o)}(i,t)}function Mt(e){const t={name:e.name};return e.typeRef&&(t.detail=e.typeRef),t}function kt(e,t){const n=e.get("requiredKnowledge");n&&function(e,t){const n=Ft(e,t.rootElement);n&&Pt(n,"dmn:BusinessKnowledgeModel")&&function(e,t){const n=e.get("name");if(!n)return;const i={name:n,origin:e},o=e.get("encapsulatedLogic");o&&function(e,t){const n=e.get("formalParameter").map(((e,t)=>{const n={name:e.get("name")||`param ${t+1}`,type:e.get("typeRef")};return n.type||delete n.type,n}));Object.assign(t,{type:"function",params:n})}(o,i),t.variables.push(i)}(n,t)}(n,t)}function It(e,t){const n=e.get("name");if(!n)return;const i={name:n,origin:e};e.get("typeRef")&&(i.detail=e.get("typeRef")),t.variables.push(i)}function Tt(e){let t=e;for(;t.$parent;)t=t.$parent;return t}function Ft(e,t){const n=e.get("href");if(!n||!n.startsWith("#"))return;const i=n.slice(1);return t.get("drgElement").find((e=>e.get("id")===i))}function Pt(e,t){return e.$instanceOf(t)}(0,a.A)(jt,l.A),jt.prototype._modelingModules=[c.A,S,A.A,j.A,q,W.A,te,oe,le,de,pe.A,fe,ye.A,ve.A,De,at,lt.A,ft,xt,Ct.A,At],jt.prototype._modules=[].concat(jt.prototype._modules,jt.prototype._modelingModules);class Lt{constructor(e){e.registerProvider(this)}getVariables(e,t){return e.concat(function(e){const t={variables:[],rootElement:Tt(e)};for(let n=e;n;n=n.$parent)Ot(n,t);return t.variables}(t))}}Lt.$inject=["variableResolver"];const Nt={__init__:["dmnVariableProvider"],dmnVariableProvider:["type",Lt],variableResolver:["type",class{constructor(){this._providers=[]}registerProvider(e){this._providers.push(e)}getVariables(e){return this._providers.reduce(((t,n)=>n.getVariables(t,e)),[])}}]};var $t=n(11719);const Bt=Object.prototype.toString,Vt=Object.prototype.hasOwnProperty;function Ut(e){const t=Bt.call(e);return"[object Function]"===t||"[object AsyncFunction]"===t||"[object GeneratorFunction]"===t||"[object AsyncGeneratorFunction]"===t||"[object Proxy]"===t}function zt(e,t){return!(null==e)&&Vt.call(e,t)}function Kt(e,t){let n,i;if(void 0===e)return;const o=function(e){return"[object Array]"===Bt.call(e)}(e)?Wt:qt;for(let s in e)if(zt(e,s)&&(n=e[s],i=t(n,o(s)),!1===i))return n}function qt(e){return e}function Wt(e){return Number(e)}function Gt(e,...t){return Object.assign(e,...t)}class Ht{constructor(e){Gt(this,e),Qt(this,"businessObject",{writable:!0})}}class Xt extends Ht{constructor(e){super(e),Qt(this,"root",{writable:!0}),Qt(this,"cells",{enumerable:!0,value:this.cells||[]})}}class Jt extends Ht{constructor(e){super(e),Qt(this,"root",{writable:!0}),Qt(this,"cells",{enumerable:!0,value:this.cells||[]})}}class Yt extends Ht{constructor(e){super(e),Qt(this,"row",{writable:!0}),Qt(this,"col",{writable:!0})}}const Zt={root:class extends Ht{constructor(e){super(e),Qt(this,"rows",{enumerable:!0,value:this.rows||[]}),Qt(this,"cols",{enumerable:!0,value:this.cols||[]})}},row:Xt,col:Jt,cell:Yt};function Qt(e,t,n){Object.defineProperty(e,t,n)}class en{constructor(){this._uid=12}create(e,t={}){return t.id||(t.id=e+"_"+this._uid++),function(e,t){const n=Zt[e];if(!n)throw new Error("unknown type "+e);return new n(t)}(e,t)}createRoot(e){return this.create("root",e)}createRow(e){return this.create("row",e)}createCol(e){return this.create("col",e)}createCell(e){return this.create("cell",e)}}class tn{constructor(e){this._eventBus=e,this._elements={},e.on("table.clear",this.clear.bind(this))}add(e,t){const{id:n}=e;this._elements[n]=e}remove(e){const t=e.id||e;delete this._elements[t]}get(e){return this._elements[e]}getAll(){return nn(this._elements)}forEach(e){nn(this._elements).forEach((t=>e(t)))}filter(e){return nn(this._elements).filter((t=>e(t)))}clear(){this._elements={}}updateId(e,t){this._validateId(t),"string"==typeof e&&(e=this.get(e)),this._eventBus.fire("element.updateId",{element:e,newId:t}),this.remove(e),e.id=t,this.add(e)}_validateId(e){if(!e)throw new Error("element must have an id");if(this._elements[e])throw new Error("element with id "+e+" already added")}}function nn(e){return Object.keys(e).map((function(t){return e[t]}))}tn.$inject=["eventBus"];var on=n(54988);class sn{constructor(e){this._listeners={},e.on("elements.changed",(({elements:e})=>{this.elementsChanged(e)})),e.on("root.remove",(t=>{const n=t.root.id;this._listeners[n]&&e.once("root.add",(e=>{const t=e.root.id;this.updateId(n,t)}))})),e.on("element.updateId",(({element:e,newId:t})=>{this.updateId(e.id,t)}))}elementsChanged(e){const t={},n=e.length;for(let i=0;i<n;i++){const{id:n}=e[i];if(t[n])return;t[n]=!0;const o=this._listeners[n]&&this._listeners[n].length;if(o)for(let e=0;e<o;e++)this._listeners[n][e]&&this._listeners[n][e]()}}onElementsChanged(e,t){this._listeners[e]||(this._listeners[e]=[]),this._listeners[e][this._listeners[e].length]=t}offElementsChanged(e,t){if(this._listeners[e])if(t){const n=this._listeners[e].indexOf(t);-1!==n&&this._listeners[e].splice(n,1)}else this._listeners[e].length=0}updateId(e,t){this._listeners[e]&&(this._listeners[t]=this._listeners[e],delete this._listeners[e])}}sn.$inject=["eventBus"];var rn=n(75668);class an extends rn.uA{constructor(e){super(e);const t=this._injector=e.injector;this._sheet=t.get("sheet"),this._changeSupport=t.get("changeSupport"),this._components=t.get("components"),this._eventBus=t.get("eventBus");const n=t.get("throttle");this.onElementsChanged=this.onElementsChanged.bind(this),this.onScroll=n(this.onScroll.bind(this))}onElementsChanged(){this.forceUpdate()}onScroll(){this._eventBus.fire("sheet.scroll")}getChildContext(){return{changeSupport:this._changeSupport,components:this._components,injector:this._injector}}componentWillMount(){const{id:e}=this._sheet.getRoot();this._changeSupport.onElementsChanged(e,this.onElementsChanged)}componentWillUnmount(){const{id:e}=this._sheet.getRoot();this._changeSupport.offElementsChanged(e,this.onElementsChanged)}render(){const{rows:e,cols:t}=this._sheet.getRoot(),n=this._components.getComponents("table.before"),i=this._components.getComponents("table.after"),o=this._components.getComponent("table.head"),s=this._components.getComponent("table.body"),r=this._components.getComponent("table.foot");return(0,rn.bF)(1,"div","tjs-container",[n&&n.map(((e,t)=>(0,rn.sO)(2,e,null,t))),(0,rn.bF)(1,"div","tjs-table-container",(0,rn.bF)(1,"table","tjs-table",[o&&(0,rn.sO)(2,o,{rows:e,cols:t}),s&&(0,rn.sO)(2,s,{rows:e,cols:t}),r&&(0,rn.sO)(2,r,{rows:e,cols:t})],0),2,{onScroll:this.onScroll}),i&&i.map(((e,t)=>(0,rn.sO)(2,e,null,t)))],0)}}class ln{constructor(e,t,n,i,o){const{container:s}=n;this._container=s,i.on("root.added",(()=>{(0,rn.XX)((0,rn.sO)(2,an,{injector:o}),s)})),i.on("root.remove",(()=>{(0,rn.XX)(null,s)}))}getContainer(){return this._container}}ln.$inject=["changeSupport","components","config.renderer","eventBus","injector"];const cn={__init__:["changeSupport","components","renderer"],changeSupport:["type",sn],components:["type",class{constructor(){this._listeners={}}getComponent(e,t){const n=this._listeners[e];if(!n)return;let i;for(let e=0;e<n.length&&(i=n[e].callback(t),!i);e++);return i}getComponents(e,t){const n=this._listeners[e],i=[];if(!n)return i;for(let e=0;e<n.length;e++){const o=n[e].callback(t);o&&i.push(o)}return i.length,i}onGetComponent(e,t,n){if(Ut(t)&&(n=t,t=1e3),i=t,"[object Number]"!==Bt.call(i))throw new Error("priority must be a number");var i;const o=this._getListeners(e);let s,r;const a={priority:t,callback:n};for(r=0;s=o[r];r++)if(s.priority<t)return void o.splice(r,0,a);o.push(a)}offGetComponent(e,t){const n=this._getListeners(e);let i,o,s;if(t)for(s=n.length-1;i=n[s];s--)o=i.callback,o===t&&n.splice(s,1);else n.length=0}_getListeners(e){let t=this._listeners[e];return t||(this._listeners[e]=t=[]),t}}],renderer:["type",ln]};class un{constructor(e,t){this._elementRegistry=e,this._eventBus=t,this._root=null,t.on("table.clear",(()=>{this.setRoot(null)}))}setRoot(e){if(this._root){const e=this._root;this._eventBus.fire("root.remove",{root:e}),this._root=null,this._eventBus.fire("root.removed",{root:e})}e&&this._eventBus.fire("root.add",{root:e}),this._root=e,e&&this._eventBus.fire("root.added",{root:e})}getRoot(){return this._root||this.setRoot({id:"__implicitroot",rows:[],cols:[]}),this._root}addRow(e,t){const n=this.getRoot();if(n.cols.length!=e.cells.length)throw new Error("number of cells is not equal to number of cols");return void 0===t&&(t=n.rows.length),dn(t,n.rows,e),e.root=n,this._elementRegistry.add(e),e.cells.forEach(((i,o)=>{this._elementRegistry.add(i),i.row=e,i.col=n.cols[o],dn(t,n.cols[o].cells,i)})),this._eventBus.fire("row.add",{row:e}),e}removeRow(e){const t=this.getRoot();"string"==typeof e&&(e=this._elementRegistry.get(e));const n=t.rows.indexOf(e);-1!==n&&(pn(n,t.rows),e.root=void 0,this._elementRegistry.remove(e),e.cells.forEach(((e,i)=>{this._elementRegistry.remove(e),e.col=void 0,pn(n,t.cols[i].cells)})),this._eventBus.fire("row.remove",{row:e}))}addCol(e,t){const n=this.getRoot();if(this._elementRegistry.add(e),n.rows.length!=e.cells.length)throw new Error("number of cells is not equal to number of rows");return void 0===t&&(t=n.cols.length),dn(t,n.cols,e),e.root=n,e.cells.forEach(((i,o)=>{this._elementRegistry.add(i),i.col=e,i.row=n.rows[o],dn(t,n.rows[o].cells,i)})),this._eventBus.fire("col.add",{col:e}),e}removeCol(e){const t=this.getRoot();"string"==typeof e&&(e=this._elementRegistry.get(e));const n=t.cols.indexOf(e);-1!==n&&(pn(n,t.cols),e.root=void 0,this._elementRegistry.remove(e),e.cells.forEach(((e,i)=>{this._elementRegistry.remove(e),e.row=void 0,pn(n,t.rows[i].cells)})),this._eventBus.fire("col.remove",{col:e}))}resized(){this._eventBus.fire("sheet.resized")}}function dn(e,t,n){return t.splice(e,0,n)}function pn(e,t){return t.splice(e,1)}function hn(e=!0){const t="number"==typeof e?e:e?300:0;return t?e=>function(e,t){let n=!1;return function(...i){n||(e(...i),n=!0,setTimeout((()=>{n=!1}),t))}}(e,t):e=>e}un.$inject=["elementRegistry","eventBus"],hn.$inject=["config.throttle"];const mn={__depends__:[cn],__init__:["elementFactory","sheet"],elementFactory:["type",en],elementRegistry:["type",tn],eventBus:["type",on.A],sheet:["type",un],throttle:["factory",hn]},gn=class{constructor(e={}){let{injector:t}=e;if(!t){let{modules:n,config:i}=this._init(e);t=function(e,t){const n=[{config:["value",e]},mn].concat(t||[]),i=new $t.zZ(n);return i.init(),i}(i,n)}this.get=t.get,this.invoke=t.invoke,this.get("eventBus").fire("table.init"),this.get("eventBus").fire("diagram.init")}_init(e){let{modules:t,...n}=e;return{modules:t,config:n}}destroy(){const e=this.get("eventBus");e.fire("table.destroy"),e.fire("diagram.destroy")}clear(){const e=this.get("eventBus");e.fire("table.clear"),e.fire("diagram.clear")}},fn=Object.prototype.toString,yn=Object.prototype.hasOwnProperty;function vn(e){return"[object Array]"===fn.call(e)}function bn(e){return"[object String]"===fn.call(e)}function _n(e,t){return!(null==e)&&yn.call(e,t)}function xn(e,t){const n=function(e){return function(e){const t=fn.call(e);return"[object Function]"===t||"[object AsyncFunction]"===t||"[object GeneratorFunction]"===t||"[object AsyncGeneratorFunction]"===t||"[object Proxy]"===t}(e)?e:t=>t===e}(t);let i;return Cn(e,(function(e,t){if(n(e,t))return i=e,!1})),i}function Cn(e,t){let n,i;if(void 0===e)return;const o=vn(e)?An:Sn;for(let s in e)if(_n(e,s)&&(n=e[s],i=t(n,o(s)),!1===i))return n}function En(e,t,n){return Cn(e,(function(e,i){n=t(n,e,i)})),n}function wn(e,t){return!!En(e,(function(e,n,i){return e&&t(n,i)}),!0)}function Dn(e){return e&&Object.keys(e)||[]}function Sn(e){return e}function An(e){return Number(e)}function jn(e,...t){return Object.assign(e,...t)}function On(e){if(!e)return"<null>";const t=e.id?` id="${e.id}"`:"";return`<${e.$type}${t} />`}function Rn(e,t){function n(t,n,i){if(t.gfx)throw new Error(`already rendered ${On(t)}`);return e.element(t,n,i)}function i(e,t,i){Cn(e,(function(e){n(e,t,i)}))}function o(e,t,i){Cn(e,(function(e){n(e,t,i)}))}return{handleDecision:function(t){t.id||(t.id="decision");const s=t.decisionLogic;if(!s)throw new Error(`no table for ${On(t)}`);{if(!s.output)throw new Error(`missing output for ${On(s)}`);const t=(r=s,e.table(r));s.input&&i(s.input,t,s),i(s.output,t,s),function(e,t,i){Cn(e,(function(e){n(e,t,i),o(e.inputEntry,e),o(e.outputEntry,e)}))}(s.rule,t,s)}var r}}}function Mn(e,t){return t.forEach((function(t){t&&"string"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(n){if("default"!==n&&!(n in e)){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}}))})),Object.freeze(e)}Object.prototype.toString,Object.prototype.hasOwnProperty;const kn=Object.prototype.toString;function In(e){return new Tn(e)}function Tn(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}function Fn(e,t,n){var i=n?e:e.parentNode;return i&&"function"==typeof i.closest&&i.closest(t)||null}Tn.prototype.add=function(e){return this.list.add(e),this},Tn.prototype.remove=function(e){return"[object RegExp]"==kn.call(e)?this.removeMatching(e):(this.list.remove(e),this)},Tn.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},Tn.prototype.toggle=function(e,t){return void 0!==t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this},Tn.prototype.array=function(){return Array.from(this.list)},Tn.prototype.has=Tn.prototype.contains=function(e){return this.list.contains(e)};var Pn,Ln,Nn,$n={};function Bn(){Pn=window.addEventListener?"addEventListener":"attachEvent",Ln=window.removeEventListener?"removeEventListener":"detachEvent",Nn="addEventListener"!==Pn?"on":""}var Vn,Un=Mn({__proto__:null,bind:$n.bind=function(e,t,n,i){return Pn||Bn(),e[Pn](Nn+t,n,i||!1),n},unbind:$n.unbind=function(e,t,n,i){return Ln||Bn(),e[Ln](Nn+t,n,i||!1),n},default:$n},[$n]),zn=!1;"undefined"!=typeof document&&((Vn=document.createElement("div")).innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',zn=!Vn.getElementsByTagName("link").length,Vn=void 0);var Kn={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:zn?[1,"X<div>","</div>"]:[0,"",""]};Kn.td=Kn.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],Kn.option=Kn.optgroup=[1,'<select multiple="multiple">',"</select>"],Kn.thead=Kn.tbody=Kn.colgroup=Kn.caption=Kn.tfoot=[1,"<table>","</table>"],Kn.polyline=Kn.ellipse=Kn.polygon=Kn.circle=Kn.text=Kn.line=Kn.path=Kn.rect=Kn.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];var qn=function(e,t){if("string"!=typeof e)throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var i=n[1];if("body"==i)return(o=t.createElement("html")).innerHTML=e,o.removeChild(o.lastChild);var o,s=Object.prototype.hasOwnProperty.call(Kn,i)?Kn[i]:Kn._default,r=s[0],a=s[1],l=s[2];for((o=t.createElement("div")).innerHTML=a+e+l;r--;)o=o.lastChild;if(o.firstChild==o.lastChild)return o.removeChild(o.firstChild);for(var c=t.createDocumentFragment();o.firstChild;)c.appendChild(o.removeChild(o.firstChild));return c};function Wn(e,t){return e&&"function"==typeof e.matches&&e.matches(t)||!1}function Gn(e,t){return(t=t||document).querySelector(e)}function Hn(e,t){return(t=t||document).querySelectorAll(e)}function Xn(e){e.parentNode&&e.parentNode.removeChild(e)}function Jn(e){return Yn(e.constructor,e)}function Yn(e,t){const n=e.$inject;if(!n)return;const{injector:i}=t.context,o=[...n,function(...e){for(const i in e){const o=n[i],s=e[i];t[o]=s}}];i.invoke(o)}function Zn(e,t){Object.keys(t).forEach((function(n){if("$inject"===n||"__init"===n)return;const i=t[n];"constructor"===n&&i.call(e,e.props,e.context);const o=e[n];if(void 0!==o){if("function"!=typeof o)throw new Error(`failed to mixin <${n}>: cannot combine with non-fn component value`);e[n]=function(e,...t){return function(...n){let i;return t.forEach((function(t){if(i=t.call(e,...n),void 0!==i)return!1})),i}.bind(e)}(e,o,i)}else e[n]=i.bind(e)})),"$inject"in t&&Yn(t,e),"__init"in t&&t.__init.call(e,e.props,e.context)}const Qn={slotFill(e,t){const{type:n,context:i,...o}=e,s=this.components.getComponent(n,i)||t;return s?(0,rn._B)((0,rn.sO)(2,s,{...i,...o})):null},slotFills(e){const{type:t,context:n,...i}=e;return this.components.getComponents(t,n).map((e=>(0,rn._B)((0,rn.sO)(2,e,{...n,...i}))))}},ei=Qn;Qn.$inject=["components"];class ti extends rn.uA{constructor(e,t){super(e,t),Zn(this,ei),Jn(this)}componentDidMount(){this.changeSupport.onElementsChanged(this.getRoot(),this.onElementsChanged)}componentWillUnmount(){this.changeSupport.offElementsChanged(this.getRoot(),this.onElementsChanged)}onElementsChanged=()=>{this.forceUpdate()};getRoot(){return this.sheet.getRoot()}render(){const e=(this.getRoot().businessObject.get("annotationsWidth")||400)+"px";return(0,rn.bF)(1,"th","annotation header",[this.slotFills({type:"cell-inner",context:{cellType:"annotations",col:this.sheet.getRoot(),minWidth:400}}),this.translate("Annotations")],0,{style:{width:e}})}}function ni(e,t){const{elements:n,index:i}=e;return i[t]?e:{elements:[...n,t],index:{...i,[t]:!0}}}function ii(...e){let t={elements:[],index:{}};return e.forEach((function(e){const n=typeof e;"string"===n&&e.length>0?t=ni(t,e):"object"===n&&null!==e&&Object.keys(e).forEach((function(n){e[n]&&(t=ni(t,n))}))})),function(e){return e.elements.join(" ")}(t)}ti.$inject=["changeSupport","sheet","translate"];const oi={getSelectionClasses(){const{selected:e,selectedSecondary:t,focussed:n}=this.state;return ii({selected:e,"selected-secondary":t,focussed:n})},selectionChanged(e){this.setState(e)},componentWillUpdate(e){e.elementId!==this.props.elementId&&this.updateSelectionSubscription(!1)},componentDidUpdate(e){e.elementId!==this.props.elementId&&this.updateSelectionSubscription(!0)},componentDidMount(){this.updateSelectionSubscription(!0)},componentWillUnmount(){this.updateSelectionSubscription(!1)},updateSelectionSubscription(e){const{elementId:t}=this.props;t&&t&&this.eventBus[e?"on":"off"](`selection.${t}.changed`,this.selectionChanged)}},si=oi;oi.$inject=["eventBus"];class ri extends rn.uA{constructor(e,t){super(e,t),Zn(this,si),Jn(this)}getRenderProps(...e){const{className:t,elementId:n,coords:i,...o}=this.props,s={className:ii(...e,this.getSelectionClasses(),t)};return n&&(s["data-element-id"]=n),i&&(s["data-coords"]=i),{...s,...o}}}class ai extends ri{constructor(e,t){super(e,t),this.state={}}render(){const{children:e}=this.props,t=this.getRenderProps("cell");return(0,rn._B)((0,rn.bF)(1,"td",null,e,0,{...t}))}}function li(e){const{row:t}=e,{id:n,description:i}=t.businessObject;return(0,rn.sO)(2,ai,{className:"annotation",elementId:n,children:i||"-"})}function ci(e){e.onGetComponent("cell",(({cellType:e})=>"after-label-cells"===e?ti:"after-rule-cells"===e?li:void 0))}ci.$inject=["components"];const ui={__init__:["annotationsProvider"],annotationsProvider:["type",ci]};function di(e,t){return jn({id:e.id,type:e.$type,businessObject:e},t)}class pi{constructor(e,t,n){this._elementFactory=e,this._eventBus=t,this._sheet=n}add(e){let t;if((0,s.is)(e,"dmn:DecisionTable"))t=this._elementFactory.createRoot(di(e)),this._sheet.setRoot(t);else if((0,s.is)(e,"dmn:InputClause"))t=this._elementFactory.createCol(di(e)),this._sheet.addCol(t);else if((0,s.is)(e,"dmn:OutputClause"))t=this._elementFactory.createCol(di(e)),this._sheet.addCol(t);else if((0,s.is)(e,"dmn:DecisionRule")){e.inputEntry||(e.inputEntry=[]),e.outputEntry||(e.outputEntry=[]);const n=[...e.inputEntry,...e.outputEntry].map((e=>this._elementFactory.createCell(di(e))));t=this._elementFactory.createRow(jn(di(e),{cells:n})),this._sheet.addRow(t)}return this._eventBus.fire("dmnElement.added",{element:t}),t}}pi.$inject=["elementFactory","eventBus","sheet"];const hi={__depends__:[{__depends__:[O.A],tableImporter:["type",pi]},cn]};class mi extends rn.uA{constructor(e,t){super(e,t),Zn(this,ei),this._sheet=t.injector.get("sheet"),this._changeSupport=t.changeSupport}onElementsChanged=()=>{this.forceUpdate()};componentWillMount(){const e=this._sheet.getRoot();this._changeSupport.onElementsChanged(e.id,this.onElementsChanged)}componentWillUnmount(){const e=this._sheet.getRoot();this._changeSupport.offElementsChanged(e.id,this.onElementsChanged)}render(){const e=this._sheet.getRoot();if(!(0,s.is)(e,"dmn:DMNElement"))return null;const t=(0,s.Cf)(e),n=t.input,i=t.output;return(0,rn.bF)(1,"thead",null,(0,rn.bF)(1,"tr",null,[(0,rn.bF)(1,"th","index-column"),this.slotFills({type:"cell",context:{cellType:"before-label-cells"}}),n&&n.map(((e,t)=>{const i=e.width||"192px";return this.slotFill({type:"cell",context:{cellType:"input-header",input:e,index:t,inputsLength:n.length,width:i},key:e.id},gi)})),i.map(((e,t)=>this.slotFill({type:"cell",context:{cellType:"output-header",output:e,index:t,outputsLength:i.length},key:e.id},fi))),this.slotFills({type:"cell",context:{cellType:"after-label-cells"}})],0),2)}}function gi(e,t){const{input:n,className:i,index:o}=e,{label:s,inputExpression:r,inputValues:a}=n,l=t.injector.get("translate"),c=(i||"")+" input-cell";return(0,rn.bF)(1,"th",c,[(0,rn.bF)(1,"div","clause",l(0===o?"When":"And"),0),s?(0,rn.bF)(1,"div","input-label",s,0,{title:l("Input label: ")+s}):(0,rn.bF)(1,"div","input-expression",r.text,0,{title:l("Input expression: ")+r.text}),(0,rn.bF)(1,"div","input-variable",a&&a.text||r.typeRef,0,{title:a&&a.text?l("Input values"):l("Input type")})],0,{"data-col-id":n.id},n.id)}function fi(e,t){const{output:n,className:i,index:o}=e,{label:s,name:r,outputValues:a,typeRef:l}=n,c=t.injector.get("translate"),u=(i||"")+" output-cell";return(0,rn.bF)(1,"th",u,[(0,rn.bF)(1,"div","clause",c(0===o?"Then":"And"),0),s?(0,rn.bF)(1,"div","output-label",s,0,{title:c("Output label")}):(0,rn.bF)(1,"div","output-name",r,0,{title:c("Output name")}),(0,rn.bF)(1,"div","output-variable",a&&a.text||l,0,{title:a&&a.text?c("Output values"):c("Output type")})],0,null,n.id)}function yi(e){e.onGetComponent("table.head",(()=>mi))}yi.$inject=["components"];const vi={__init__:["decisionTableHeadProvider"],decisionTableHeadProvider:["type",yi]};class bi extends rn.uA{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),Jn(this)}render(){const e=this.sheet.getRoot();if(!(0,s.is)(e,"dmn:DMNElement"))return null;const{name:t}=e.businessObject.$parent,n=this.components.getComponent("hit-policy")||_i;return(0,rn.bF)(1,"div","decision-table-properties",[(0,rn.bF)(1,"div","decision-table-name",t,0,{title:this._translate("Decision name: ")+t}),(0,rn.bF)(1,"div","decision-table-header-separator"),(0,rn.sO)(2,n)],4)}}function _i(){return null}bi.$inject=["sheet","components"];class xi{constructor(e){e.onGetComponent("table.before",500,(()=>bi))}}xi.$inject=["components"];const Ci={__init__:["decisionTableProperties"],decisionTableProperties:["type",xi]};class Ei extends rn.uA{render(){const{row:e,rowIndex:t}=this.props,{components:n}=this.context,i=n.getComponents("cell-inner",{cellType:"rule-index",row:e,rowIndex:t});return(0,rn.bF)(1,"td","rule-index",[i&&i.map((n=>(0,rn.sO)(2,n,{row:e,rowIndex:t}))),t+1],0,{"data-element-id":e.id,"data-row-id":e.id})}}class wi{constructor(e){e.onGetComponent("cell",(({cellType:e})=>{if("before-rule-cells"===e)return Ei}))}}wi.$inject=["components"];const Di={__init__:["decisionRuleIndices"],decisionRuleIndices:["type",wi]},Si=[{label:"FEEL",value:"feel"}];class Ai{constructor(e){this._injector=e;const t=e.get("config.expressionLanguages")||{};this._config={options:Si,defaults:{editor:"feel"}},t.options&&(this._config.options=t.options);const n=this._getLegacyDefaults();(0,ke.kp)(this._config.defaults,n,t.defaults)}getDefault(e){const{defaults:t}=this._config,n=t[e]||t.editor;return this._getLanguageByValue(n)||this.getAll()[0]}getLabel(e){const t=this._getLanguageByValue(e);return t?t.label:e}getAll(){return this._config.options}_getLegacyDefaults(){const e={},t=this._injector,n=t.get("config.defaultInputExpressionLanguage"),i=t.get("config.defaultOutputExpressionLanguage");return n&&(e.inputCell=n),i&&(e.outputCell=i),e}_getLanguageByValue(e){return(0,ke.I6)(this.getAll(),(t=>e===t.value))}}Ai.$inject=["injector"];const ji={__init__:["expressionLanguages"],expressionLanguages:["type",Ai]};class Oi{constructor(e){this._feelLanguageContext=e}getConfig(){return this._feelLanguageContext}}Oi.$inject=["config.feelLanguageContext"];const Ri={__init__:["feelLanguageContext"],feelLanguageContext:["type",Oi]};class Mi extends rn.uA{render({rows:e,cols:t}){const{components:n}=this.context;return(0,rn.bF)(1,"tbody",null,e.map(((e,i)=>{const o=n.getComponent("row",{rowType:"rule"});return o&&(0,rn.sO)(2,o,{row:e,rowIndex:i,cols:t},e.id)})),0)}}class ki extends rn.uA{constructor(e,t){super(e,t),Zn(this,ei)}render(){const{row:e,rowIndex:t,cols:n}=this.props,{cells:i}=e;return(0,rn.bF)(1,"tr",null,[this.slotFills({type:"cell",context:{cellType:"before-rule-cells",row:e,rowIndex:t}}),i.map(((i,o)=>this.slotFill({type:"cell",context:{cellType:"rule",cell:i,rowIndex:t,colIndex:o},key:i.id,row:e,col:n[o]}))),this.slotFills({type:"cell",context:{cellType:"after-rule-cells",row:e,rowIndex:t}})],0)}}class Ii extends rn.uA{render(){const{cell:e,row:t,col:n}=this.props;return(0,s.is)(e,"dmn:UnaryTests")?(0,rn.sO)(2,ai,{className:"input-cell",elementId:e.id,"data-row-id":t.id,"data-col-id":n.id,children:e.businessObject.text}):(0,rn.sO)(2,ai,{className:"output-cell",elementId:e.id,"data-row-id":t.id,"data-col-id":n.id,children:e.businessObject.text})}}class Ti{constructor(e){e.onGetComponent("table.body",(()=>Mi)),e.onGetComponent("row",(({rowType:e})=>{if("rule"===e)return ki})),e.onGetComponent("cell",(({cellType:e})=>{if("rule"===e)return Ii}))}}Ti.$inject=["components"];const Fi={__depends__:[ji,Ri],__init__:["decisionRules"],decisionRules:["type",Ti]},Pi=[{label:"Unique",value:{hitPolicy:"UNIQUE",aggregation:void 0},explanation:"No overlap is possible and all rules are disjoint. Only a single rule can be matched"},{label:"First",value:{hitPolicy:"FIRST",aggregation:void 0},explanation:"Rules may overlap. The first matching rule will be chosen"},{label:"Priority",value:{hitPolicy:"PRIORITY",aggregation:void 0},explanation:"Rules may overlap. The one with the highest priority will be chosen"},{label:"Any",value:{hitPolicy:"ANY",aggregation:void 0},explanation:"Rules may overlap. Their output have to match"},{label:"Collect",value:{hitPolicy:"COLLECT",aggregation:void 0},explanation:"Collects the values of all matching rules"},{label:"Collect (Sum)",value:{hitPolicy:"COLLECT",aggregation:"SUM"},explanation:"Collects the values of all matching rules and sums up to a single value"},{label:"Collect (Min)",value:{hitPolicy:"COLLECT",aggregation:"MIN"},explanation:"Collects the values of all matching rules and uses the lowest value"},{label:"Collect (Max)",value:{hitPolicy:"COLLECT",aggregation:"MAX"},explanation:"Collects the values of all matching rules and uses the highest value"},{label:"Collect (Count)",value:{hitPolicy:"COLLECT",aggregation:"COUNT"},explanation:"Collects the values of all matching rules and counts the number of them"},{label:"Rule order",value:{hitPolicy:"RULE ORDER",aggregation:void 0},explanation:"Collects the values of all matching rules in rule order"},{label:"Output order",value:{hitPolicy:"OUTPUT ORDER",aggregation:void 0},explanation:"Collects the values of all matching rules in decreasing output priority order"}];class Li extends rn.uA{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),Jn(this)}getRoot(){return this.sheet.getRoot()}render(){const e=this.getRoot().businessObject,{aggregation:t,hitPolicy:n}=e,i=xn(Pi,(e=>{return i=e.value,o={aggregation:t,hitPolicy:n},i.hitPolicy===o.hitPolicy&&i.aggregation===o.aggregation;var i,o}));return(0,rn.bF)(1,"div","hit-policy header",[(0,rn.bF)(1,"label","dms-label",this._translate("Hit policy:"),0),(0,rn.bF)(1,"span","hit-policy-value",this._translate(i.label),0)],4,{title:this._translate(i.explanation)})}}function Ni(e){e.onGetComponent("hit-policy",(()=>Li))}Li.$inject=["sheet"],Ni.$inject=["components"];const $i={__init__:["hitPolicyProvider"],hitPolicyProvider:["type",Ni]};class Bi extends rn.uA{constructor(e,t){super(e,t);const{injector:n}=t;this._translate=n.get("translate"),this._eventBus=n.get("eventBus")}onClick=()=>{this._eventBus.fire("showDrd")};render(){return(0,rn.bF)(1,"div","view-drd",(0,rn.bF)(1,"button","view-drd-button",this._translate("View DRD"),0,{type:"button",onClick:this.onClick}),2,null,null,(e=>this.node=e))}}class Vi{constructor(e,t,n,i){this._injector=n,this._sheet=i,e.onGetComponent("table.before",(()=>{if(this.canViewDrd())return Bi})),t.on("showDrd",(()=>{const e=n.get("_parent",!1),t=Ui(i.getRoot());if(!t)return;const o=e.getView(t);e.open(o)}))}canViewDrd(){const e=this._injector.get("_parent",!1);if(!e)return!1;const t=Ui(this._sheet.getRoot());return!!e.getView(t)}}function Ui(e){const{businessObject:t}=e;if(t)return t.$parent.$parent}Vi.$inject=["components","eventBus","injector","sheet"];const zi={__init__:["viewDrd"],viewDrd:["type",Vi]};var Ki=n(94306);class qi{constructor(e){e.onGetComponent("table.before",(()=>Ki.v))}}qi.$inject=["components"];const Wi={__init__:["poweredBy"],poweredBy:["type",qi]};class Gi extends gn{constructor(e={}){const t=Gi._createContainer();super(jn(e,{renderer:{container:t}})),this._container=t}open(e){var t=this;return new Promise(((n,i)=>{var o;try{return t._decision&&t.clear(),t._decision=e,function(e,t){const o=e.get("tableImporter"),s=e.get("eventBus"),r=e.get("sheet");let a,l=e.get("modeling",!1),c=[];s.fire("import.render.start",{decision:t});try{!function(e){new Rn({create:(e,t,n,i)=>o.create(e,t,n,i),table:e=>o.add(e),element:(e,t,n)=>o.add(e,t,n),error(e,t){c.push({message:e,context:t})}},{canAddMissingEntries:l}).handleDecision(e)}(t)}catch(e){a=e}s.fire("import.render.complete",{error:a,warnings:c}),s.fire("elements.changed",{elements:[r.getRoot()]}),function(e,t){e?(e.warnings=t||[],i(e)):n({warnings:t||[]})}(a,c)}(t,e)}catch(e){o=e}o?(o.warnings=o.warnings||[],i(o)):n({warnings:[]})}))}_init(e){let{modules:t,additionalModules:n,...i}=e,o=t||this.getModules();return{modules:[Wi,...o,...n||[],{decisionTable:["value",this]}],config:i}}on(e,t,n,i){return this.get("eventBus").on(e,t,n,i)}off(e,t){this.get("eventBus").off(e,t)}_emit(e,t){return this.get("eventBus").fire(e,t)}attachTo(e){if(!e)throw new Error("parentNode required");this.detach();const t=this._container;e.appendChild(t),this._emit("attach",{})}detach(){const e=this._container;e.parentNode&&(this._emit("detach",{}),Xn(e))}destroy(){super.destroy(),this.detach()}getModules(){return Gi._getModules()}static _getModules(){return[ui,hi,O.A,vi,Ci,Di,Fi,$i,zi]}static _createContainer(){return qn('<div class="dmn-decision-table-container"></div>')}}class Hi extends rn.uA{constructor(e,t){super(e,t),Jn(this),this.addRule=this.addRule.bind(this)}componentWillMount(){this._eventBus=this.context.injector.get("eventBus")}handleClick=e=>{e.stopPropagation(),this.addRule(e.target.dataset.colIndex)};addRule(e){this._eventBus.fire("addRule",{colIndex:e})}render(){const{cols:e}=this.props,t=[(0,rn.bF)(1,"td","add-rule-add",(0,rn.bF)(1,"button","dmn-icon-plus action-icon",null,1,{title:this.translate("Add rule")}),2)],{businessObject:n}=this.sheet.getRoot();n.input&&n.input.length||t.push((0,rn.bF)(1,"td","input-cell",(0,rn.eW)("-"),2));for(let n=0;n<e.length+1;n++){let i="add-rule";const o=e[n]&&e[n].businessObject;let s="";o?(o.$instanceOf("dmn:InputClause")&&(i+=" input-cell",s="-"),o.$instanceOf("dmn:OutputClause")&&(i+=" output-cell")):i+=" annotation",t.push((0,rn.bF)(1,"td",i,s,0,{"data-col-index":n}))}return(0,rn.bF)(1,"tfoot","actionable add-rule",(0,rn.bF)(1,"tr",null,t,0),2,{onClick:this.handleClick})}}Hi.$inject=["sheet","translate"];class Xi{constructor(e,t,n,i){e.onGetComponent("table.foot",(()=>Hi)),n.on("addRule",((e,n)=>{const o=t.trigger("addRule"),s=n.colIndex;o.cells[s]?i.select(o.cells[s]):i.select(o.cells[0])}))}}Xi.$inject=["components","editorActions","eventBus","selection"];class Ji{constructor(e,t,n){this._elementRegistry=e,this._eventBus=t,this._renderer=n,this._selection=void 0,t.on("diagram.clear",(()=>{this._selection=void 0}))}select(e){var t;t=e,"[object String]"===Bt.call(t)&&(e=this._elementRegistry.get(e));const n=this._selection;n!==e&&(this._selection=e,this._eventBus.fire("selection.changed",{oldSelection:n,selection:e}))}deselect(){const e=this._selection;this._selection=void 0,this._eventBus.fire("selection.changed",{oldSelection:e,selection:this._selection})}get(){return this._selection}hasSelection(){return!!this._selection}}Ji.$inject=["elementRegistry","eventBus","renderer"];class Yi{constructor(e,t,n,i){this._elementRegistry=e,this._renderer=n,this._selection=i,t.on(["cell.click","cell.contextmenu"],(({id:t})=>{const n=e.get(t);n&&i.select(n)})),t.on("row.remove",(({row:e})=>{const t=i.get();t&&e===t.row&&i.deselect()})),t.on("col.remove",(({col:e})=>{const t=i.get();t&&e===t.col&&i.deselect()}))}}Yi.$inject=["elementRegistry","eventBus","renderer","selection"];const Zi={__init__:["selection","selectionBehavior"],selection:["type",Ji],selectionBehavior:["type",Yi]};function Qi(e,t){return t.forEach((function(t){t&&"string"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(n){if("default"!==n&&!(n in e)){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}}))})),Object.freeze(e)}Object.prototype.toString,Object.prototype.hasOwnProperty;const eo=Object.prototype.toString;function to(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}function no(e,t,n){var i=n?e:e.parentNode;return i&&"function"==typeof i.closest&&i.closest(t)||null}to.prototype.add=function(e){return this.list.add(e),this},to.prototype.remove=function(e){return"[object RegExp]"==eo.call(e)?this.removeMatching(e):(this.list.remove(e),this)},to.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},to.prototype.toggle=function(e,t){return void 0!==t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this},to.prototype.array=function(){return Array.from(this.list)},to.prototype.has=to.prototype.contains=function(e){return this.list.contains(e)};var io,oo,so,ro={};function ao(){io=window.addEventListener?"addEventListener":"attachEvent",oo=window.removeEventListener?"removeEventListener":"detachEvent",so="addEventListener"!==io?"on":""}var lo,co=Qi({__proto__:null,bind:ro.bind=function(e,t,n,i){return io||ao(),e[io](so+t,n,i||!1),n},unbind:ro.unbind=function(e,t,n,i){return oo||ao(),e[oo](so+t,n,i||!1),n},default:ro},[ro]),uo=!1;"undefined"!=typeof document&&((lo=document.createElement("div")).innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',uo=!lo.getElementsByTagName("link").length,lo=void 0);var po={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:uo?[1,"X<div>","</div>"]:[0,"",""]};po.td=po.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],po.option=po.optgroup=[1,'<select multiple="multiple">',"</select>"],po.thead=po.tbody=po.colgroup=po.caption=po.tfoot=[1,"<table>","</table>"],po.polyline=po.ellipse=po.polygon=po.circle=po.text=po.line=po.path=po.rect=po.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];const ho=["click","dblclick","contextmenu","mousedown","mouseup","mouseenter","mouseleave","mouseout","mouseover","mousemove","focusin","focusout","drag","dragstart","dragend","dragover","dragenter","dragleave","drop"];class mo{constructor(e,t){var n,i;i=e=>{const{target:t,type:n}=e,i=no(t,"[data-element-id]",!0);if(!i)return;const o=i.getAttribute("data-element-id");if(o){const t=this._eventBus.createEvent({id:o,event:e,node:i,target:i});this._eventBus.fire(`cell.${n}`,t),t.defaultPrevented&&e.preventDefault(),t.cancelBubble&&e.stopPropagation()}},(n="_handleEvent")in this?Object.defineProperty(this,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[n]=i,this._eventBus=t,this._container=e.container,t.on("table.init",(()=>{this._addEventListeners(ho)})),t.on("table.destroy",(()=>{this._removeEventListeners(ho)}))}_addEventListeners(e){const t=this._container;e.forEach((e=>{t.addEventListener(e,this._handleEvent)}))}_removeEventListeners(e){const t=this._container;e.forEach((e=>{t.removeEventListener(e,this._handleEvent)}))}}mo.$inject=["config.renderer","eventBus"];const go={__init__:["interactionEvents"],interactionEvents:["type",mo]};var fo=n(13337),yo=n.n(fo),vo=function(e,t){return e^t},bo=/\b(Array|Date|Object|Math|JSON)\b/g,_o=xo;function xo(e,t){if(!(this instanceof xo))return new xo(e,t);if(this.node=this.start=this.peeked=e,this.root=t,this.closingTag=!1,this._revisit=!0,this._selects=[],this._rejects=[],e&&this.higher(e))throw new Error("root must be a parent or ancestor to node")}function Co(e,t){var n="nextSibling"==e;return function(i,o,s){i=this.compile(i),o=o&&o>0?o:1;for(var r=this.node,a=this.closingTag,l=this._revisit;r;){if(vo(n,a)&&r[t])r=r[t],a=!n;else if(1==r.nodeType&&!r[t]&&vo(n,a)){if(a=n,!l)continue}else if(r[e])r=r[e],a=!n;else if(r=r.parentNode,a=n,!l)continue;if(!r||this.higher(r,this.root))break;if(i(r)&&this.selects(r,s)&&this.rejects(r,s)){if(--o)continue;return s||(this.node=r),this.closingTag=a,r}}return null}}xo.prototype.reset=function(e){return this.node=e||this.start,this},xo.prototype.revisit=function(e){return this._revisit=null==e||e,this},xo.prototype.opening=function(){return 1==this.node.nodeType&&(this.closingTag=!1),this},xo.prototype.atOpening=function(){return!this.closingTag},xo.prototype.closing=function(){return 1==this.node.nodeType&&(this.closingTag=!0),this},xo.prototype.atClosing=function(){return this.closingTag},xo.prototype.next=Co("nextSibling","firstChild"),xo.prototype.previous=xo.prototype.prev=Co("previousSibling","lastChild"),xo.prototype.select=function(e){return e=this.compile(e),this._selects.push(e),this},xo.prototype.selects=function(e,t){var n=this._selects,i=n.length;if(!i)return!0;for(var o=0;o<i;o++)if(n[o].call(this,e,t))return!0;return!1},xo.prototype.reject=function(e){return e=this.compile(e),this._rejects.push(e),this},xo.prototype.rejects=function(e,t){var n=this._rejects,i=n.length;if(!i)return!0;for(var o=0;o<i;o++)if(n[o].call(this,e,t))return!1;return!0},xo.prototype.higher=function(e){var t=this.root;if(!t)return!1;for(e=e.parentNode;e&&e!=t;)e=e.parentNode;return e!=t},xo.prototype.compile=function(e){switch(typeof e){case"number":return function(t){return e==t.nodeType};case"string":return new Function("node","return "+(n="node.",i=function(e){for(var t=[],n=0;n<e.length;n++)~t.indexOf(e[n])||t.push(e[n]);return t}(function(e){return e.replace(/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^/]+)\//g,"").replace(bo,"").match(/[a-zA-Z_]\w*/g)||[]}(t=e)),n&&"string"==typeof n&&(n=function(e){return function(t){return e+t}}(n)),n?function(e,t,n){return e.replace(/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^/]+)\/|[a-zA-Z_]\w*/g,(function(e){return"("==e[e.length-1]||~t.indexOf(e)?n(e):e}))}(t,i,n):i));case"function":return e;default:return function(){return!0}}var t,n,i},xo.prototype.peak=xo.prototype.peek=function(e,t){return 1==arguments.length&&(t=e,e=!0),(t=null==t?1:t)?t>0?this.next(e,t,!0):this.prev(e,Math.abs(t),!0):this.node},xo.prototype.use=function(e){return e(this),this};var Eo=window.getSelection();function wo(e){Eo.removeAllRanges(),Eo.addRange(e)}function Do(e){if(!function(e){if(!Eo.rangeCount)return null;var t=Eo.focusNode;return So(t)&&(t=t.parentNode),e==t||e.contains(t)}(e))return null;var t,n,i=Eo.getRangeAt(0),o=i.startContainer,s=i.endContainer,r=i.startOffset,a=i.endOffset,l=_o(e.firstChild,e),c=l.node,u=!1,d=0;function p(e,t){return 1===arguments.length&&(t=e),e.parentNode===s&&t==s.childNodes[a]}function h(e,t){return 1===arguments.length&&(t=e),e.parentNode===o&&t==o.childNodes[r]}for(;c&&(h(c)&&(n=d),!p(c));){if(u||(Ao(c)||t&&t.nextSibling==c&&(jo(c)||Oo(c)))&&d++,So(c)){if(o===c&&(n=d+r),s===c){d+=a;break}d+=c.textContent.length}if((So(c)||u)&&(h(c,c.nextSibling)&&(n=d),p(c,c.nextSibling)))break;t=c,c=l.next(),u=l.closingTag}return{start:void 0===n?d:n,end:d}}function So(e){return 3===e.nodeType}function Ao(e){return 1===e.nodeType&&"BR"===e.nodeName}function jo(e){return 1===e.nodeType&&"DIV"===e.nodeName}function Oo(e){return 1===e.nodeType&&"P"===e.nodeName}function Ro(e){return e.getAttribute("data-element-id")}function Mo(e,t){return Gn(`[data-element-id="${yo()(e)}"]`,t)}function ko(e){return Fn(e,"[data-element-id]",!0)}function Io(e){const t="[contenteditable]";return Wn(e,t)?e:Gn(t,e)}const To={above:!0,below:!0,right:!0,left:!0};function Fo(e,t,n,i,o){const{container:s}=e;let r=null;function a(e,n){t.fire("selection."+e+".changed",n),t.fire("cellSelection.changed",{elementId:e,selection:n})}function l(e,t=!0){r!==e&&a(r,{selected:!1,focussed:!1}),r=e,e&&a(e,{selected:!0,focussed:t}),e?i.select(e):i.deselect()}t.on("cell.click",500,(function(e){const t=e.target;if(Fn(t,".no-deselect",!0))return;const n=ko(t);l(n&&Ro(n),!e.defaultPrevented)})),t.on("cell.focusin",500,(function(e){const t=Ro(e.target),n=!e.defaultPrevented;return e.stopPropagation(),l(t,n)})),t.on("cell.focusout",500,(function(e){a(Ro(e.target),{focussed:!1})})),t.on("cellSelection.changed",(function(e){const{elementId:t,selection:n}=e,i=Mo(t,s);n.focussed&&i&&function(e){const t=Io(e);if(!t)return;if(!document.body.contains(t))return;if(document.activeElement===t)return;t.focus();const n=Do(t);n&&0!==n.end||window.getSelection().setPosition(t.firstChild,t.firstChild.length)}(i)})),t.on("selection.changed",(function(e){const{selection:t,oldSelection:n}=e;var i=t&&t.id,o=n&&n.id;i&&i!==r?l(t.id):o&&o===r&&l()})),this.isCellSelected=function(){return!!r},this.getCellSelection=function(){return r},this.selectCell=function(e){if(!r)return;if(!(e in To))throw new Error("direction must be any of { above, below, left, right }");const t=function(e){const t=e.getAttribute("data-coords");if(!t)return null;const[n,i]=t.split(":");return{row:n,col:i}}(Mo(r,s));if(!t)return!1;const n=function(e,t){const{row:n,col:i}=e;if("above"===t||"below"===t){const o=parseInt(n,10);return isNaN(o)?e:{col:i,row:"above"===t?o-1:o+1}}if("left"===t||"right"===t){const o=parseInt(i,10);return isNaN(o)?e:{row:n,col:"left"===t?o-1:o+1}}throw new Error("invalid direction <"+t+">")}(t,e),i=function(e,t){const n=`${e.row}:${e.col}`;return Gn(`[data-coords="${yo()(n)}"]`,t)}(n,s);if(!i)return!1;const o=Ro(i);return o&&l(o,{focussed:!0,selected:!0}),!0},t.on("contextMenu.close",(function(){if(r)return l(r)}))}Fo.$inject=["config.renderer","eventBus","sheet","selection","elementRegistry"];const Po={__depends__:[go,Zi],__init__:["cellSelection"],cellSelection:["type",Fo]};var Lo=n(48909);const No=2e3;class $o extends Le.A{constructor(e,t){super(e),this._sheet=t}init(){this.addRule("col.move",No,(({col:e,index:t})=>{const{businessObject:n}=this._sheet.getRoot(),{input:i}=n;return(0,s.Xy)(e)?t<i.length:t>=i.length})),this.addRule("col.remove",No,(({col:e})=>{const{cols:t}=this._sheet.getRoot();return!(0,s.Mz)(e)||t.filter((e=>(0,s.Mz)(e))).length>1})),this.addRule("paste",No,(({data:e,target:t})=>{if(!e||!t)return!1;const{root:n}=e;return t instanceof Xt?this.canPasteRows(n):t instanceof Jt&&this.canPasteCols(n,t)}))}canPasteRows(e){const{cols:t}=this._sheet.getRoot();return wn(e,(e=>"row"===e.type&&e.cells.length===t.length&&wn(e.cells,((e,n)=>(0,s.Xy)(t[n])?"dmn:UnaryTests"===e.businessObject.$type:"dmn:LiteralExpression"===e.businessObject.$type))))}canPasteCols(e,t){const{rows:n}=this._sheet.getRoot();return wn(e,(e=>"col"===e.type&&e.cells.length===n.length&&((0,s.Xy)(t)?"dmn:InputClause"===e.businessObject.$type:"dmn:OutputClause"===e.businessObject.$type)))}}$o.$inject=["eventBus","sheet"];const Bo={__depends__:[{__depends__:[Pe.A]}],__init__:["decisionTableModelingRules"],decisionTableModelingRules:["type",$o]};class Vo{constructor(e,t,n){this._clipboard=e,this._modeling=t,this._sheet=n}execute(e){let{data:t}=e;return e.oldData=this._clipboard.get(),this._clipboard.set(t),this._sheet.getRoot()}postExecute(e){let{elements:t}=e;t.forEach((e=>{e instanceof Xt?this._modeling.removeRow(e):e instanceof Jt&&this._modeling.removeCol(e)}))}revert(e){const{oldData:t}=e;return this._clipboard.set(t),this._sheet.getRoot()}}Vo.$inject=["clipboard","modeling","sheet"];const Uo=[function(e,t,n,i){var o=n,s={...t,type:Wo(e)};if(e instanceof Xt||e instanceof Jt){let t=i(e.cells,o);s.cells=t.root,o=t.descriptorCache}return{root:s,descriptorCache:o}},function(e,t,n){var i=e.businessObject;if(!i)return{root:t,descriptorCache:n};var o=Go(i,n);return{root:{...t,businessObject:o.root},descriptorCache:o.descriptorCache}}],zo=[function(e,t,n){var i=e.root.businessObject;if(!i)return{root:t,reviveCache:n};var o=Jo({root:i,descriptorCache:e.descriptorCache},n);return{root:{...t,businessObject:o.root},reviveCache:o.reviveCache}},function(e,t,n,i){var o=e.root,s=e.descriptorCache,r={...t};if(t.businessObject&&t.businessObject.id&&(r.id=t.businessObject.id),"row"===o.type||"col"===o.type){let e=i({root:o.cells,descriptorCache:s},n);r.cells=e.root,n=e.reviveCache}var a=new(function(e){switch(e.type){case"row":return Xt;case"cell":return Yt;case"col":return Jt;default:throw new Error("unknown element type: #"+e.type)}}(o))(r);return a instanceof Xt?a.cells.forEach((e=>{e.row=a})):a instanceof Jt&&a.cells.forEach((e=>{e.col=a})),{root:a,reviveCache:n}}];function Ko(e,t,n){return n=n||Uo,t=t||{},vn(e)?function(e,t,n){return En(e,((e,t)=>{var i=e.descriptorCache,o=e.root;let{root:s,descriptorCache:r}=qo(t,i,n);return{root:[...o,s],descriptorCache:{...i,...r}}}),{root:[],descriptorCache:t})}(e,t,n):qo(e,t,n)}function qo(e,t,n){var i=e.id,o={id:i},s=t.elements||{},r=s[i];if(r)return{root:r,descriptorCache:t};let a=function(e,t,n,i){function o(e,t){return Ko(e,t,n)}return En(n,(function(t,n){return n(e,t.root,t.descriptorCache,o)}),{root:t,descriptorCache:i})}(e,o,n,{...t,elements:s});return{root:a.root,descriptorCache:{...a.descriptorCache,elements:{...a.descriptorCache.elements,[i]:a.root}}}}function Wo(e){if(e instanceof Xt)return"row";if(e instanceof Jt)return"col";if(e instanceof Yt)return"cell";throw new Error("cannot deduce element type: #"+e.id)}function Go(e,t){var n,i,o=e.id;if(o&&(i=(n=t.boCache||{})[o]))return{root:i,descriptorCache:t};var s={$type:e.$type};return o&&(s.id=o,n={...n,[o]:s},t={...t,boCache:n}),e.$descriptor.properties.forEach((function(n){var i=e[n.name];if(i){if(vn(i)&&(i=i.map((e=>{var n=Go(e,t);return t=n.descriptorCache,n.root}))),i.$type){let e=Go(i,t);t=e.descriptorCache,i=e.root}s[n.name]=i}})),{root:s,descriptorCache:t}}function Ho(e,t,n){return n=n||zo,t=t||{},vn(e.root)?function(e,t,n){let i=e.root,o=e.descriptorCache;return En(i,((e,t)=>{var i=e.reviveCache,s=e.root;let{root:r,reviveCache:a}=Xo({root:t,descriptorCache:o},i,n);return{root:[...s,r],reviveCache:a}}),{root:[],reviveCache:t})}(e,t,n):Xo(e,t,n)}function Xo(e,t,n){var i=e.root.id,o=t.elements||{},s=o[i];if(s)return{root:s,reviveCache:t};let r=function(e,t,n,i){function o(e,t){return Ho(e,t,n)}return En(n,(function(t,n){return n(e,t.root,t.reviveCache,o)}),{root:t,reviveCache:i})}(e,{id:i},n,{...t,elements:o});return{root:r.root,reviveCache:{...r.reviveCache,elements:{...r.reviveCache.elements,[i]:r.root}}}}function Jo(e,t){var n=e.root,i=n.id;let o,s;if(i&&(o=t.boCache||{},s=o[i],s))return{root:s,reviveCache:t};var r={};Dn(n).forEach((e=>{let i,s;n[e].$type?(s=Jo({root:n[e]},t),i=s.root,t=s.reviveCache,o=t.boCache||{}):i=vn(n[e])?n[e].map((e=>(s=Jo({root:e},t),t=s.reviveCache,o=t.boCache||{},s.root))):n[e],r[e]=i}));const a=r.$type;delete r.$type,t._keepIds&&!t._model.ids.assigned(r.id)||delete r.id;var l=t._dmnFactory.create(a,r);return Cn(r,(e=>{e.$type&&(e.$parent=l),vn(e)&&e.forEach((e=>e.$parent=l))})),i&&(o={...o,[i]:l},t={...t,boCache:o}),{root:l,reviveCache:t}}class Yo{constructor(e,t,n,i,o,s,r,a){this._clipboard=e,this._dmnFactory=t,this._elementFactory=n,this._elementRegistry=i,this._eventBus=o,this._model=s,this._modeling=r,this._sheet=a}postExecute(e){let{element:t,after:n}=e;const i=this._clipboard.get();if(!i)throw new Error("missing clipboard data");const o=this._sheet.getRoot(),s=Ho(i.elements,{_dmnFactory:this._dmnFactory,_keepIds:i.keepIds,_model:this._model}).root;if(t instanceof Xt){let e=o.rows.indexOf(t);if(-1===e)return;s.forEach((t=>{n&&e++,this._modeling.addRow(t,e)}))}else if(t instanceof Jt){let e=o.cols.indexOf(t);if(-1===e)return;s.forEach((t=>{n&&e++,this._modeling.addCol(t,e)}))}return e.oldElements=this._clipboard.get(),this._sheet.getRoot()}revert(e){}}Yo.$inject=["clipboard","dmnFactory","elementFactory","elementRegistry","eventBus","moddle","modeling","sheet"];class Zo{constructor(e,t,n,i,o,s){this._clipboard=e,this._commandStack=t,this._eventBus=n,this._modeling=i,this._sheet=o,this._rules=s,t.registerHandler("cut",Vo),t.registerHandler("paste",Yo)}copy(e){vn(e)||(e=[e]);const t={elements:Ko(e)};this._eventBus.fire("copyCutPaste.copy",{data:t}),this._clipboard.set(t)}cut(e){vn(e)||(e=[e]);const t={elements:Ko(e),keepIds:!0},n={elements:e,data:t};this._eventBus.fire("copyCutPaste.cut",{data:t}),this._commandStack.execute("cut",n)}pasteBefore(e){return this._paste(e,{before:!0})}pasteAfter(e){return this._paste(e,{after:!0})}_paste(e,t){const n=this._clipboard.get();if(n)return!!this._rules.allowed("paste",{data:n.elements,target:e})&&(this._commandStack.execute("paste",{element:e,...t}),this._clipboard.clear(),!0)}pasteAt(e){}}Zo.$inject=["clipboard","commandStack","eventBus","modeling","sheet","rules"];const Qo={__depends__:[Lo.A,Bo],__init__:["copyCutPaste"],copyCutPaste:["type",Zo]};class es{constructor(e,t,n,i,o,r){const a={addRule:()=>n.addRow({type:"dmn:DecisionRule"}),addRuleAbove(e){let t=e&&e.rule;if(!t&&!i.hasSelection())return;t=t||i.get().row;const o=r.getRoot().rows.indexOf(t);return-1!==o?n.addRow({type:"dmn:DecisionRule"},o):void 0},addRuleBelow(e){let t=e&&e.rule;if(!t&&!i.hasSelection())return;t=t||i.get().row;const o=r.getRoot().rows.indexOf(t);return-1!==o?n.addRow({type:"dmn:DecisionRule"},o+1):void 0},removeRule(e){let t=e&&e.rule;(t||i.hasSelection())&&(t=t||i.get().row,n.removeRow(t))},addInput(){const e=r.getRoot().businessObject,{input:t}=e;return n.addCol({type:"dmn:InputClause"},t?t.length:0)},addInputLeft(e){let t=e&&e.input;if(!t&&!i.hasSelection())return;t=t||i.get().col;const o=r.getRoot().cols.indexOf(t);return-1!==o?n.addCol({type:"dmn:InputClause"},o):void 0},addInputRight(e){let t=e&&e.input;if(!t&&!i.hasSelection())return;t=t||i.get().col;const o=r.getRoot().cols.indexOf(t);return-1!==o?n.addCol({type:"dmn:InputClause"},o+1):void 0},removeInput(e){let t=e&&e.input;(t||i.hasSelection())&&(t=t||i.get().col,n.removeCol(t))},addOutput(){const e=r.getRoot().businessObject,t=e.get("input"),i=e.get("output");return n.addCol({type:"dmn:OutputClause"},t.length+i.length)},addOutputLeft(e){let t=e&&e.output;if(!t&&!i.hasSelection())return;t=t||i.get().col;const o=r.getRoot().cols.indexOf(t);return-1!==o?n.addCol({type:"dmn:OutputClause"},o):void 0},addOutputRight(e){let t=e&&e.output;if(!t&&!i.hasSelection())return;t=t||i.get().col;const o=r.getRoot().cols.indexOf(t);return-1!==o?n.addCol({type:"dmn:OutputClause"},o+1):void 0},removeOutput(e){let t=e&&e.output;(t||i.hasSelection())&&(t=t||i.get().col,n.removeCol(t))},addClause(){if(!i.hasSelection())return;const e=i.get().col;return(0,s.is)(e,"dmn:InputClause")?a.addInput({input:e}):(0,s.is)(e,"dmn:OutputClause")?a.addOutput({output:e}):void 0},addClauseLeft(){if(!i.hasSelection())return;const e=i.get().col;return(0,s.is)(e,"dmn:InputClause")?a.addInputLeft({input:e}):(0,s.is)(e,"dmn:OutputClause")?a.addOutputLeft({output:e}):void 0},addClauseRight(){if(!i.hasSelection())return;const e=i.get().col;return(0,s.is)(e,"dmn:InputClause")?a.addInputRight({input:e}):(0,s.is)(e,"dmn:OutputClause")?a.addOutputRight({output:e}):void 0},removeClause(){if(!i.hasSelection())return;const e=i.get().col;return(0,s.is)(e,"dmn:InputClause")?a.removeInput({input:e}):(0,s.is)(e,"dmn:OutputClause")?a.removeOutput({output:e}):void 0},selectCellAbove:()=>o.selectCell("above"),selectCellBelow:()=>o.selectCell("below"),copy({element:t}){e.copy(t)},cut({element:t}){e.cut(t)},pasteBefore:({element:t})=>e.pasteBefore(t),pasteAfter:({element:t})=>e.pasteAfter(t)};t.register(a)}}es.$inject=["copyCutPaste","editorActions","modeling","selection","cellSelection","sheet"];const ts="is not a registered action";class ns{constructor(e,t,n,i){this._actions={undo(){e.undo()},redo(){e.redo()},select({cell:e}){i.select(e)},deselect(){i.deselect()},addRow({attrs:e,index:t}){n.addRow(e,t)},removeRow({row:e}){n.removeRow(e)},moveRow({row:e,index:t}){n.moveRow(e,t)},addCol({attrs:e,index:t}){n.addCol(e,t)},removeCol({col:e}){n.removeCol(e)},moveCol({col:e,index:t}){n.moveCol(e,t)}}}trigger(e,t){if(!this._actions[e])throw is(e,ts);return this._actions[e](t)}register(e,t){if("string"==typeof e)return this._registerAction(e,t);Kt(e,((e,t)=>{this._registerAction(t,e)}))}_registerAction(e,t){if(this.isRegistered(e))throw is(e,"is already registered");this._actions[e]=t}unregister(e){if(!this.isRegistered(e))throw is(e,ts);this._actions[e]=void 0}isRegistered(e){return!!this._actions[e]}}function is(e,t){return new Error(e+" "+t)}ns.$inject=["commandStack","eventBus","modeling","selection"];const os={__depends__:[Zi],__init__:["editorActions"],editorActions:["type",ns]},ss={__depends__:[Po,Qo,os,Zi],__init__:["decisionTableEditorActions"],decisionTableEditorActions:["type",es]},rs={__depends__:[ss],__init__:["addRule"],addRule:["type",Xi]};var as=n(22696),ls=n.n(as),cs=n(90853),us=n.n(cs);class ds extends rn.uA{constructor(e,t){var n;super(e,t),this.state={},((n=window.navigator.userAgent).indexOf("MSIE ")>0||n.indexOf("Trident/")>0)&&(this.onInputIEPolyfill=e=>{var t=this.node.innerHTML;setTimeout((()=>{var n=this.node.innerHTML;t!==n&&this.onInput(e)}),0)})}componentWillUpdate(e,t){var n=this.node,i=t.focussed&&Do(n);this.selected=i&&{range:i,text:ps(n)}}componentDidUpdate(){var e=this.selected;if(!e)return;const t=e.range,n=e.text,i=this.node,o=ps(i);!function(e,t){var n=function(e,t){for(var n,i=t.start,o=t.end,s=document.createRange(),r=_o(e.firstChild,e),a=r.node,l=!1,c=0;a;){if(c===i&&(l?s.setStartAfter(a):s.setStartBefore(a)),c===o)return l?s.setEndAfter(a):s.setEndBefore(a),s;if(l||(Ao(a)||a.previousSibling&&(jo(a)||Oo(a)))&&c++,So(a)){if(n=a.textContent.length,c<=i&&c+n>i&&s.setStart(a,i-c),c+n>o)return s.setEnd(a,o-c),s;c+=n}a=r.next(),l=r.closingTag}return c<=i&&(e.lastChild?s.setStartAfter(e.lastChild):s.setStart(e,0)),e.lastChild?s.setEndAfter(e.lastChild):s.setEnd(e,0),s}(e,t);wo(n)}(i,o!==n?us()(t,n,o):t)}onFocus=e=>{var t=this.props.onFocus;this.setState({focussed:!0}),"function"==typeof t&&t(e)};onBlur=e=>{const{onBlur:t,onChange:n,value:i}=this.props;if(this.setState({focussed:!1}),"function"==typeof n&&this.node){const e=ps(this.node);e!==i&&n(e)}"function"==typeof t&&t(e)};onkeydown=e=>{if(13===e.which){if(e.preventDefault(),this.props.ctrlForNewline&&!function(e){return e.metaKey||e.ctrlKey}(e))return;if(this.props.singleLine)return;e.stopPropagation(),function(){var e=Eo.getRangeAt(0);if(e){var t=e.cloneRange(),n=document.createElement("br");t.deleteContents(),t.insertNode(n),t.setStartAfter(n),t.setEndAfter(n),wo(t)}}(),this.onInput(e)}};onInput=e=>{var t=this.props.onInput;"function"==typeof t&&t(ps(this.node))};onkeypress=e=>{this.onInputIEPolyfill&&this.onInputIEPolyfill(e)};onPaste=e=>{if(this.onInputIEPolyfill&&this.onInputIEPolyfill(e),this.props.singleLine){const t=(e.clipboardData||window.clipboardData).getData("text");document.execCommand("insertText",!1,t.replace(/\n/g," ")),e.preventDefault()}};getClassName(){const{className:e,placeholder:t,value:n}=this.props;return[e||"","content-editable",!n&&t?"placeholder":""].join(" ")}render(e){var{label:t,value:n,placeholder:i}=e;return n=ls()(n).replace(/\r?\n/g,"<br/>")+"<br/>",(0,rn.bF)(1,"div",this.getClassName(),null,1,{"aria-label":t,role:"textbox","aria-multiline":!this.props.singleLine,tabIndex:"0",contentEditable:"true",spellCheck:"false","data-placeholder":i||"",onInput:this.onInput,onkeypress:this.onkeypress,onPaste:this.onPaste,onFocus:this.onFocus,onBlur:this.onBlur,onkeydown:this.onkeydown,dangerouslySetInnerHTML:{__html:n}},null,(e=>this.node=e))}}function ps(e){return e.innerText.replace(/\n$/,"")}class hs extends rn.uA{constructor(e,t){super(e,t),this.state={changing:!1,focussed:!1};const{injector:n}=t,i=n.get("debounceInput");this.inputChanged=i((e=>{const{onChange:t}=this.props;"function"==typeof t&&t(e);const n=this.state.changing;this.setState({changing:n!==e&&n})})),this.onInput=e=>{var t=(this.props.validate||function(){})(e);this.setState({changing:e,invalid:t}),t||this.inputChanged(e)}}onFocus=e=>{this.setState({focussed:!0});var{onFocus:t}=this.props;"function"==typeof t&&t(e)};onBlur=e=>{this.setState({focussed:!1});const{invalid:t}=this.state;t&&this.setState({changing:!1,invalid:!1});const{onBlur:n}=this.props;"function"==typeof n&&n(e)};getClassName(){var{className:e,value:t}=this.props,{changing:n,focussed:i,invalid:o}=this.state;return e+=" editable",i&&(e+=" focussed"),o&&(e+=" invalid"),t||n||(e+=" empty"),e}getDisplayValue(){var{value:e,placeholder:t}=this.props,{focussed:n,changing:i}=this.state;return"string"==typeof i&&(e=i),e||(e=n?"":t||""),e}getEditor(e={}){return(0,rn.sO)(2,ds,{className:e.className,ctrlForNewline:this.props.ctrlForNewline,label:this.props.label,onFocus:this.onFocus,onBlur:this.onBlur,onInput:this.onInput,value:this.getDisplayValue()})}}class ms extends rn.uA{constructor(e,t){super(e,t),Jn(this)}componentWillMount(){const{row:e}=this.props;this.changeSupport.onElementsChanged(e.id,this.onElementsChanged)}componentWillUnmount(){const{row:e}=this.props;this.changeSupport.offElementsChanged(e.id,this.onElementsChanged)}onElementsChanged=()=>{this.forceUpdate()};setAnnotationValue=e=>{const{row:t}=this.props;this.modeling.editAnnotation(t.businessObject,e)};render(){const{row:e,rowIndex:t}=this.props,{description:n,id:i}=e.businessObject;return(0,rn.sO)(2,ai,{className:"annotation",onChange:this.setAnnotationValue,coords:`${t}:annotation`,value:n,elementId:i,"data-row-id":e.id,children:(0,rn.sO)(2,gs,{label:this.translate("Annotation"),ctrlForNewline:!0,className:"annotation-editor",onChange:this.setAnnotationValue,value:n})})}}ms.$inject=["changeSupport","modeling","translate"];class gs extends hs{render(){return(0,rn.bF)(1,"div",this.getClassName(),this.getEditor(),0)}}function fs(e){e.onGetComponent("cell",(({cellType:e})=>"after-label-cells"===e?ti:"after-rule-cells"===e?ms:void 0))}function ys(e){return function(t){if(!1!==e){var n=(0,ke.Et)(e)?e:300;return(0,ke.sg)(t,n)}return t}}fs.$inject=["components"],ys.$inject=["config.debounceInput"];const vs={debounceInput:["factory",ys]},bs={__depends__:[vs],__init__:["annotationsProvider"],annotationsProvider:["type",fs]};function _s(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var xs,Cs,Es,ws,Ds,Ss;var As=function(){if(Ss)return Ds;Ss=1;var e=Cs?xs:(Cs=1,xs=function(e,t){return e^t}),t=function(){if(ws)return Es;ws=1;var e=/\b(Array|Date|Object|Math|JSON)\b/g;return Es=function(t,n){var i=function(e){for(var t=[],n=0;n<e.length;n++)~t.indexOf(e[n])||t.push(e[n]);return t}(function(t){return t.replace(/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^/]+)\//g,"").replace(e,"").match(/[a-zA-Z_]\w*/g)||[]}(t));return n&&"string"==typeof n&&(n=function(e){return function(t){return e+t}}(n)),n?function(e,t,n){return e.replace(/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^/]+)\/|[a-zA-Z_]\w*/g,(function(e){return"("==e[e.length-1]||~t.indexOf(e)?n(e):e}))}(t,i,n):i}}();function n(e,t){if(!(this instanceof n))return new n(e,t);if(this.node=this.start=this.peeked=e,this.root=t,this.closingTag=!1,this._revisit=!0,this._selects=[],this._rejects=[],e&&this.higher(e))throw new Error("root must be a parent or ancestor to node")}function i(t,n){var i="nextSibling"==t;return function(o,s,r){o=this.compile(o),s=s&&s>0?s:1;for(var a=this.node,l=this.closingTag,c=this._revisit;a;){if(e(i,l)&&a[n])a=a[n],l=!i;else if(1==a.nodeType&&!a[n]&&e(i,l)){if(l=i,!c)continue}else if(a[t])a=a[t],l=!i;else if(a=a.parentNode,l=i,!c)continue;if(!a||this.higher(a,this.root))break;if(o(a)&&this.selects(a,r)&&this.rejects(a,r)){if(--s)continue;return r||(this.node=a),this.closingTag=l,a}}return null}}return Ds=n,n.prototype.reset=function(e){return this.node=e||this.start,this},n.prototype.revisit=function(e){return this._revisit=null==e||e,this},n.prototype.opening=function(){return 1==this.node.nodeType&&(this.closingTag=!1),this},n.prototype.atOpening=function(){return!this.closingTag},n.prototype.closing=function(){return 1==this.node.nodeType&&(this.closingTag=!0),this},n.prototype.atClosing=function(){return this.closingTag},n.prototype.next=i("nextSibling","firstChild"),n.prototype.previous=n.prototype.prev=i("previousSibling","lastChild"),n.prototype.select=function(e){return e=this.compile(e),this._selects.push(e),this},n.prototype.selects=function(e,t){var n=this._selects,i=n.length;if(!i)return!0;for(var o=0;o<i;o++)if(n[o].call(this,e,t))return!0;return!1},n.prototype.reject=function(e){return e=this.compile(e),this._rejects.push(e),this},n.prototype.rejects=function(e,t){var n=this._rejects,i=n.length;if(!i)return!0;for(var o=0;o<i;o++)if(n[o].call(this,e,t))return!1;return!0},n.prototype.higher=function(e){var t=this.root;if(!t)return!1;for(e=e.parentNode;e&&e!=t;)e=e.parentNode;return e!=t},n.prototype.compile=function(e){switch(typeof e){case"number":return function(t){return e==t.nodeType};case"string":return new Function("node","Object.freeze(node); return "+t(e,"node."));case"function":return e;default:return function(){return!0}}},n.prototype.peak=n.prototype.peek=function(e,t){return 1==arguments.length&&(t=e,e=!0),(t=null==t?1:t)?t>0?this.next(e,t,!0):this.prev(e,Math.abs(t),!0):this.node},n.prototype.use=function(e){return e(this),this},Ds}(),js=_s(As),Os=window.getSelection();function Rs(e){return 3===e.nodeType}function Ms(e){return 1===e.nodeType&&"DIV"===e.nodeName}function ks(e){return 1===e.nodeType&&"P"===e.nodeName}function Is(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ts={position:"absolute"};class Fs extends rn.uA{constructor(e,t){super(e,t),Is(this,"open",(({position:e,context:t})=>{this.close(),this.setState({isOpen:!0,position:e||{x:0,y:0},context:t||{}})})),Is(this,"close",(()=>{this.state.isOpen&&this.setState({context:void 0,isOpen:!1,position:{x:0,y:0}})})),Is(this,"triggerClose",(()=>{this.eventBus.fire("contextMenu.close")})),this.state={isOpen:!1,position:{x:0,y:0}},Jn(this)}componentDidMount(){this.eventBus.on("contextMenu.open",this.open),this.eventBus.on("contextMenu.close",this.close)}componentWillUnmount(){this.eventBus.off("contextMenu.open",this.open),this.eventBus.off("contextMenu.close",this.close)}render(){const{isOpen:e,context:t,position:n}=this.state;if(!e)return null;const i=this.components.getComponents("context-menu",t);return i.length?(0,rn.sO)(2,Ps,{className:"context-menu no-deselect",context:t,position:n,offset:t.offset||{x:0,y:0},autoFocus:!1!==t.autoFocus,autoClose:!1!==t.autoClose,components:i,onClose:this.triggerClose}):null}}Fs.$inject=["eventBus","components"];class Ps extends rn.uA{constructor(e,t){super(e,t),Is(this,"onGlobalMouseDown",(e=>{this.checkClose(e.target)})),Is(this,"onGlobalKey",(e=>{var t=e.which;13!==t&&27!==t||(e.stopPropagation(),e.preventDefault(),this.close())})),Is(this,"onFocusChanged",(e=>{this.checkClose(e.target)})),Is(this,"setNode",(e=>{this.node=e;const{autoFocus:t}=this.props;var n,i;e&&(this.updatePosition(),t&&(i=Ns,n=(e||document).querySelector(i))&&(n.focus(),n.selectionStart&&"text"===n.type?n.selectionStart=1e5:"contentEditable"in n&&function(e,t){var n=function(e,t){for(var n,i,o=t.start,s=t.end,r=document.createRange(),a=js(e.firstChild,e),l=a.node,c=!1,u=0;l;){if(u===o&&(c?r.setStartAfter(l):r.setStartBefore(l)),u===s)return c?r.setEndAfter(l):r.setEndBefore(l),r;if(c||(1===(i=l).nodeType&&"BR"===i.nodeName||l.previousSibling&&(Ms(l)||ks(l)))&&u++,Rs(l)){if(n=l.textContent.length,u<=o&&u+n>o&&r.setStart(l,o-u),u+n>s)return r.setEnd(l,s-u),r;u+=n}l=a.next(),c=a.closingTag}return u<=o&&(e.lastChild?r.setStartAfter(e.lastChild):r.setStart(e,0)),e.lastChild?r.setEndAfter(e.lastChild):r.setEnd(e,0),r}(e,t);!function(e){Os?.removeAllRanges(),Os?.addRange(e)}(n)}(n,{start:1e5,end:1e5})))})),Jn(this)}close(){const{onClose:e}=this.props;Ut(e)&&e()}checkClose(e){const{autoClose:t}=this.props;if(t){var n=this.node;n&&n!==e&&(n.contains(e)||this.close())}}componentDidMount(){document.addEventListener("focusin",this.onFocusChanged),document.addEventListener("keydown",this.onGlobalKey),document.addEventListener("mousedown",this.onGlobalMouseDown)}componentWillUnmount(){document.removeEventListener("focusin",this.onFocusChanged),document.removeEventListener("keydown",this.onGlobalKey),document.removeEventListener("mousedown",this.onGlobalMouseDown)}updatePosition(){const{position:e,offset:t}=this.props,{node:n}=this,i=n.getBoundingClientRect();e.width||(e.width=0),e.height||(e.height=0);const o=this.renderer.getContainer().getBoundingClientRect();o.width>o.height?(this.node.classList.add("horizontal"),this.node.classList.remove("vertical")):(this.node.classList.add("vertical"),this.node.classList.remove("horizontal"));const{scrollLeft:s,scrollTop:r}=function(e){const t=no(e,".tjs-container");if(!t)return{scrollTop:0,scrollLeft:0};const{scrollLeft:n,scrollTop:i}=t;return{scrollTop:i,scrollLeft:n}}(n),a={};let l,c,u;e.align&&(l=e.align.split("-")),"left"===(l&&l[1]||(e.x+e.width/2>o.width/2?"left":"right"))?(c=e.x-o.left-i.width+t.x+s,n.classList.remove("right"),n.classList.add("left")):(c=-o.left+e.x+e.width-t.x+s,n.classList.remove("left"),n.classList.add("right")),c=l?c:Ls(c,0+s,o.width-i.width+s),a.left=c+"px","top"===(l&&l[0]||(e.y+e.height/2>o.height/2?"top":"bottom"))?(u=e.y-o.top-i.height+t.y+r,n.classList.remove("bottom"),n.classList.add("top")):(u=-o.top+e.y-t.y+r,n.classList.remove("top"),n.classList.add("bottom")),u=l?u:Ls(u,0+r,o.height-i.height+r),a.top=u+"px",a.overflowY="auto",a.maxHeight=o.height-u+r+"px",Gt(this.node.style,Ts,a)}render(){const{context:e,components:t,className:n}=this.props;return(0,rn.bF)(1,"div",n,t.map(((t,n)=>(0,rn.sO)(2,t,{context:e},n))),0,{onContextMenu:e=>e.preventDefault()},null,this.setNode)}}function Ls(e,t,n){return Math.max(t,Math.min(n,e))}Ps.$inject=["renderer"];const Ns="\n  input[type=text],\n  input[type=number],\n  input[type=button],\n  input[type=submit],\n  [contenteditable],\n  [tabindex],\n  a[href],\n  textarea,\n  button\n";class $s{constructor(e,t,n){this._eventBus=t,e.onGetComponent("table.before",(()=>Fs))}open(e,t){this._eventBus.fire("contextMenu.open",{position:e,context:t})}close(){this._eventBus.fire("contextMenu.close")}}$s.$inject=["components","eventBus","renderer"];const Bs={__init__:["contextMenu"],contextMenu:["type",$s]};function Vs(e){return!e.altKey&&(e.ctrlKey||e.metaKey)}function Us(e){return e.shiftKey}class zs{constructor(e,t,n,i,o,s,r){this._clipboard=n,this._cellSelection=i,this._elementRegistry=o,this._editorActions=s,this._keyboard=e.get("keyboard",!1),this._renderer=r,this._keyboard&&(t.on("keyboard.init",this._registerBindings),t.on("keyboard.bind",(()=>{Un.bind(document,"copy",this._clearClipboard,!0),Un.bind(document,"cut",this._clearClipboard,!0)})),t.on("keyboard.unbind",(()=>{Un.unbind(document,"copy",this._clearClipboard,!0),Un.unbind(document,"cut",this._clearClipboard,!0)})))}_clearClipboard=()=>{this._clipboard.clear()};_getSelectedCell(){const e=this._cellSelection.getCellSelection();if(!e)return;const t=this._elementRegistry.get(e);if(!t)return;const n=Mo(e,this._renderer.getContainer()),i=Io(n);if(document.activeElement!==i)return;const o=Do(n);return o&&o.start!==o.end?void 0:t}_registerBindings=()=>{[(e,t)=>{if(Vs(t)&&67===e){const e=this._getSelectedCell();if(!e)return;return Us(t)?this._editorActions.trigger("copy",{element:e.col}):this._editorActions.trigger("copy",{element:e.row}),!0}},(e,t)=>{if(Vs(t)&&88===e){const e=this._getSelectedCell();if(!e)return;return Us(t)?this._editorActions.trigger("cut",{element:e.col}):this._editorActions.trigger("cut",{element:e.row}),!0}},(e,t)=>{let n;if(Vs(t)&&86===e){const e=this._getSelectedCell();if(!e)return;Us(t)?(n=this._editorActions.trigger("pasteAfter",{element:e.col}),n&&this._cellSelection.selectCell("right")):(n=this._editorActions.trigger("pasteAfter",{element:e.row}),n&&this._cellSelection.selectCell("below"))}return void 0!==n}].forEach((e=>{this._keyboard.addListener(e)}))}}zs.$inject=["injector","eventBus","clipboard","cellSelection","elementRegistry","editorActions","renderer"];const Ks={__depends__:[Lo.A,Po],__init__:["copyCutPasteKeyBindings"],copyCutPasteKeyBindings:["type",zs]};class qs extends rn.uA{constructor(e,t){super(e,t),Jn(this)}onClick=e=>{this.editorActions.trigger("addInput")};render(){return(0,rn.bF)(1,"th","input-cell create-inputs header actionable",[this.translate("Input"),(0,rn.eW)(" "),(0,rn.bF)(1,"button","add-input dmn-icon-plus action-icon",null,1,{title:this.translate("Add input")})],0,{onClick:this.onClick,title:this.translate("Add input")})}}qs.$inject=["editorActions","translate"];class Ws extends rn.uA{constructor(e,t){super(e,t),Jn(this)}onClick=e=>{this.editorActions.trigger("addInput")};render(){return(0,rn.bF)(1,"td","input-cell create-inputs",(0,rn.eW)("-"),2,{onClick:this.onClick,title:this.translate("Add input")})}}Ws.$inject=["editorActions","translate"];class Gs{constructor(e,t){e.onGetComponent("cell",500,(({cellType:e})=>{const{businessObject:n}=t.getRoot();if(!n.input||!n.input.length)return"before-label-cells"===e?qs:"before-rule-cells"===e?Ws:void 0}))}}Gs.$inject=["components","sheet"];const Hs={__depends__:[ss],__init__:["createInputsProvider"],createInputsProvider:["type",Gs]},Xs=["string","boolean","number","date","time","dateTime","dayTimeDuration","yearMonthDuration","Any"];class Js{constructor(e){this._dataTypes=e||Xs}getAll(){return this._dataTypes}}Js.$inject=["config.dataTypes"];const Ys={__init__:["dataTypes"],dataTypes:["type",Js]};class Zs{constructor(e,t,n,i,o,s,r,a,l,c,u){this._contextMenu=t,this._clipboard=n,this._editorActions=i,this._elementRegistry=s,this._eventBus=o,this._modeling=r,this._selection=a,this._sheet=l,this._rules=c,this._translate=u,this._getEntries=this._getEntries.bind(this),e.onGetComponent("context-menu",((t={})=>{if(t.contextMenuType&&"context-menu"===t.contextMenuType){const n=this._getEntries(t),i=this._elementRegistry.get(t.id)instanceof Yt&&e.getComponents("context-menu-cell-additional",t);if(i&&i.length){const e=(0,rn.bF)(1,"div","context-menu-group context-menu-group-cell",i,0,{role:"presentation"});n.push(e)}return()=>(0,rn.bF)(1,"div","context-menu-flex",n,0,{tabIndex:0,role:"menu","aria-label":"Decision table context menu"})}})),o.on("cell.contextmenu",(({event:e,id:n,node:i})=>{e.preventDefault(),t.open({x:e.pageX,y:e.pageY},{contextMenuType:"context-menu",event:e,id:n})}))}_getEntries(e){const t=t=>{const n=t.cells.map((e=>e.id)).indexOf(e.id),i=this._editorActions.trigger("addRuleAbove",{rule:t});i.cells[n]?this._selection.select(i.cells[n]):this._selection.select(i.cells[0]),this._contextMenu.close()},n=t=>{const n=t.cells.map((e=>e.id)).indexOf(e.id),i=this._editorActions.trigger("addRuleBelow",{rule:t});i.cells[n]?this._selection.select(i.cells[n]):this._selection.select(i.cells[0]),this._contextMenu.close()},i=e=>{this._editorActions.trigger("removeRule",{rule:e}),this._contextMenu.close()},o=e=>{this._editorActions.trigger("addInputLeft",{input:e}),this._contextMenu.close()},r=e=>{this._editorActions.trigger("addInputRight",{input:e}),this._contextMenu.close()},a=e=>{this._editorActions.trigger("removeInput",{input:e}),this._contextMenu.close()},l=e=>{this._editorActions.trigger("addOutputLeft",{output:e}),this._contextMenu.close()},c=e=>{this._editorActions.trigger("addOutputRight",{output:e}),this._contextMenu.close()},u=e=>{this._editorActions.trigger("removeOutput",{output:e}),this._contextMenu.close()},d=e=>{this._editorActions.trigger("copy",{element:e}),this._contextMenu.close()},p=e=>{this._editorActions.trigger("cut",{element:e}),this._contextMenu.close()},h=e=>{this._editorActions.trigger("pasteBefore",{element:e}),this._contextMenu.close()},m=e=>{this._editorActions.trigger("pasteAfter",{element:e}),this._contextMenu.close()},g=e&&e.id;if(!g)return null;const f=this._elementRegistry.get(g);if(!f)return null;const y=this._clipboard.get()||{},v=[],b=f.row||f;if((0,s.is)(b,"dmn:DecisionRule")){const e=this._rules.allowed("paste",{data:y.elements,target:b});v.push((0,rn.bF)(1,"div","context-menu-group",[(0,rn.bF)(1,"div","context-menu-group-entry context-menu-entry-copy-rule",this._translate("Copy rule"),0,{onClick:()=>d(b),tabIndex:"-1",role:"menuitem"}),(0,rn.bF)(1,"div","context-menu-group-entry context-menu-entry-cut-rule",this._translate("Cut rule"),0,{onClick:()=>p(b),tabIndex:"-1",role:"menuitem"}),(0,rn.bF)(1,"div",`context-menu-group-entry ${e?"":"disabled"} context-menu-entry-paste-rule-above`,this._translate("Paste rule above"),0,{onClick:()=>h(b),tabIndex:"-1",role:"menuitem","aria-disabled":!e}),(0,rn.bF)(1,"div",`context-menu-group-entry ${e?"":"disabled"} context-menu-entry-paste-rule-below`,this._translate("Paste rule below"),0,{onClick:()=>m(b),tabIndex:"-1",role:"menuitem","aria-disabled":!e})],4,{role:"presentation"}),(0,rn.bF)(1,"div","context-menu-group",[(0,rn.bF)(1,"div","context-menu-group-entry context-menu-entry-add-rule-above",this._translate("Add rule above"),0,{onClick:()=>t(b),tabIndex:"-1",role:"menuitem"}),(0,rn.bF)(1,"div","context-menu-group-entry context-menu-entry-add-rule-below",this._translate("Add rule below"),0,{onClick:()=>n(b),tabIndex:"-1",role:"menuitem"}),(0,rn.bF)(1,"div","context-menu-group-entry context-menu-entry-remove-rule",this._translate("Remove rule"),0,{onClick:()=>i(b),tabIndex:"-1",role:"menuitem"})],4,{role:"presentation"}))}else if((0,s.is)(f,"dmn:InputClause")){const e=(0,s.is)(f,"dmn:InputClause")?f:f.col,t=this._rules.allowed("col.remove",{col:f.col||f}),n=this._rules.allowed("paste",{data:y.elements,target:f.col||f});v.push((0,rn.bF)(1,"div","context-menu-group",[(0,rn.bF)(1,"div","context-menu-group-entry context-menu-entry-copy-input",this._translate("Copy input column"),0,{onClick:()=>d(e),tabIndex:"-1",role:"menuitem"}),(0,rn.bF)(1,"div",`context-menu-group-entry ${t?"":"disabled"} context-menu-entry-cut-input`,this._translate("Cut input column"),0,{onClick:()=>p(e),tabIndex:"-1",role:"menuitem","aria-disabled":!t}),(0,rn.bF)(1,"div",`context-menu-group-entry ${n?"":"disabled"} context-menu-entry-paste-input-left`,this._translate("Paste input column left"),0,{onClick:()=>h(e),tabIndex:"-1",role:"menuitem","aria-disabled":!n}),(0,rn.bF)(1,"div",`context-menu-group-entry ${n?"":"disabled"} context-menu-entry-paste-input-right`,this._translate("Paste input column right"),0,{onClick:()=>m(e),tabIndex:"-1",role:"menuitem","aria-disabled":!n})],4,{role:"presentation"}),(0,rn.bF)(1,"div","context-menu-group",[(0,rn.bF)(1,"div","context-menu-group-entry context-menu-entry-add-input-left",this._translate("Add input column left"),0,{onClick:()=>o(e),tabIndex:"-1",role:"menuitem"}),(0,rn.bF)(1,"div","context-menu-group-entry context-menu-entry-add-input-right",this._translate("Add input column right"),0,{onClick:()=>r(e),tabIndex:"-1",role:"menuitem"}),(0,rn.bF)(1,"div",`context-menu-group-entry ${t?"":"disabled"} context-menu-entry-remove-input`,this._translate("Remove input column"),0,{onClick:()=>a(e),tabIndex:"-1",role:"menuitem","aria-disabled":!t})],4,{role:"presentation"}))}else if((0,s.is)(f,"dmn:OutputClause")||(0,s.is)(f.col,"dmn:OutputClause")){const e=(0,s.is)(f,"dmn:OutputClause")?f:f.col,t=this._rules.allowed("col.remove",{col:f.col||f}),n=this._rules.allowed("paste",{data:y.elements,target:f.col||f});v.push((0,rn.bF)(1,"div","context-menu-group",[(0,rn.bF)(1,"div","context-menu-group-entry context-menu-entry-copy-output",this._translate("Copy output column"),0,{onClick:()=>d(e),tabIndex:"-1",role:"menuitem"}),(0,rn.bF)(1,"div",`context-menu-group-entry ${t?"":"disabled"} context-menu-entry-cut-output`,this._translate("Cut output column"),0,{onClick:()=>p(e),tabIndex:"-1",role:"menuitem","aria-disabled":!t}),(0,rn.bF)(1,"div",`context-menu-group-entry ${n?"":"disabled"} context-menu-entry-paste-output-left`,this._translate("Paste output column left"),0,{onClick:()=>h(e),tabIndex:"-1",role:"menuitem","aria-disabled":!n}),(0,rn.bF)(1,"div",`context-menu-group-entry ${n?"":"disabled"} context-menu-entry-paste-output-right`,this._translate("Paste output column right"),0,{onClick:()=>m(e),tabIndex:"-1",role:"menuitem","aria-disabled":!n})],4,{role:"presentation"}),(0,rn.bF)(1,"div","context-menu-group",[(0,rn.bF)(1,"div","context-menu-group-entry context-menu-entry-add-output-left",this._translate("Add output column left"),0,{onClick:()=>l(e),tabIndex:"-1",role:"menuitem"}),(0,rn.bF)(1,"div","context-menu-group-entry context-menu-entry-add-output-right",this._translate("Add output column right"),0,{onClick:()=>c(e),tabIndex:"-1",role:"menuitem"}),(0,rn.bF)(1,"div",`context-menu-group-entry ${t?"":"disabled"} context-menu-entry-remove-output`,this._translate("Remove output column"),0,{onClick:()=>u(e),tabIndex:"-1",role:"menuitem","aria-disabled":!t})],4,{role:"presentation"}))}return v}}Zs.$inject=["components","contextMenu","clipboard","editorActions","eventBus","elementRegistry","modeling","selection","sheet","rules","translate"];const Qs=["row.add","row.remove","col.add","col.remove"];class er{constructor(e,t){t.on("commandStack.executed",(({command:t})=>{-1!==Qs.indexOf(t)&&e.close()})),t.on("commandStack.reverted",(()=>{e.close()}))}}er.$inject=["contextMenu","eventBus"];class tr{constructor(e){e.on("contextMenu.open",(()=>this.addEventListeners())),e.on("contextMenu.close",(()=>this.removeEventListeners())),e.on("commandStack.executed",(()=>this.removeEventListeners()))}addEventListeners=()=>{document.addEventListener("keydown",this.handleKeyEvent),document.addEventListener("mouseover",this.handleMouseOver)};removeEventListeners=()=>{document.removeEventListener("keydown",this.handleKeyEvent),document.removeEventListener("mouseover",this.handleMouseOver)};handleKeyEvent=e=>{"ArrowUp"===e.key?(e.preventDefault(),this.move(e.target,-1)):"ArrowDown"===e.key?(e.preventDefault(),this.move(e.target,1)):"Enter"===e.key&&(e.preventDefault(),this.clickCurrentEntry())};handleMouseOver=()=>{this.getEntries().forEach((e=>{return(t=e).style.removeProperty("background-color"),void t.style.removeProperty("pointer-events");var t}));const{focused:e}=this.getActiveEntries(document);e&&In(e).remove("focused")};getEntries=()=>Array.from(Hn(".context-menu-group-entry")).filter((e=>!In(e).has("disabled")));getActiveEntries=e=>{const t=Gn(".context-menu-group-entry:hover",e),n=Gn(".context-menu-group-entry.focused",e);return{hover:t,focused:n,current:n||t}};move=(e,t)=>{const n=this.getEntries(),{current:i,hover:o}=this.getActiveEntries(e);if(!i)return void In(n[0]).add("focused");const s=n.indexOf(i)+t;let r=n[s];var a;s<0&&(r=n[n.length-1]),s>=n.length&&(r=n[0]),o&&((a=o).style.setProperty("pointer-events","none"),a.style.setProperty("background-color","transparent")),In(i).remove("focused"),In(r).add("focused"),r.style.removeProperty("background-color")};clickCurrentEntry=()=>{const{current:e}=this.getActiveEntries(document);e&&e.click()}}tr.$inject=["eventBus"];const nr={__depends__:[ss,Bs,Bo],__init__:["decisionTableContextMenu","contextMenuCloseBehavior","contextMenuKeyboard"],decisionTableContextMenu:["type",Zs],contextMenuCloseBehavior:["type",er],contextMenuKeyboard:["type",tr]};class ir extends rn.uA{constructor(e,t){super(e,t),Zn(this,ei),this._translate=t.injector.get("translate")}onClick=e=>{const{output:t}=this.props;this._eventBus.fire("output.edit",{event:e,output:t})};onContextmenu=e=>{const{id:t}=this.props.output;this._eventBus.fire("cell.contextmenu",{event:e,id:t})};onElementsChanged=()=>{this.forceUpdate()};componentWillMount(){const{injector:e}=this.context;this._changeSupport=this.context.changeSupport,this._eventBus=e.get("eventBus"),this._elementRegistry=e.get("elementRegistry");const{output:t}=this.props;this._changeSupport.onElementsChanged(t.id,this.onElementsChanged)}componentWillUnmount(){const{output:e}=this.props;this._changeSupport.offElementsChanged(e.id,this.onElementsChanged)}render(){const{output:e,index:t,outputsLength:n}=this.props,{label:i,name:o,outputValues:s,typeRef:r}=e,a=e.width?e.width+"px":"192px";return(0,rn.bF)(1,"th","output-cell output-editor",[this.slotFills({type:"cell-inner",context:{cellType:"output-cell",col:this._elementRegistry.get(e.id),index:t,outputsLength:n},col:e}),(0,rn.bF)(1,"div","clause",0===t?this._translate("Then"):this._translate("And"),0),i?(0,rn.bF)(1,"div","output-label",i,0,{title:this._translate("Output label: ")+i}):(0,rn.bF)(1,"div","output-name",o,0,{title:this._translate("Output name: ")+o}),(0,rn.bF)(1,"div","output-variable",s&&s.text||this._translate(r||""),0,{title:s&&s.text?this._translate("Output values"):this._translate("Output type")})],0,{"data-col-id":e.id,onDblClick:this.onClick,onContextMenu:this.onContextmenu,style:{width:a}})}}class or extends rn.uA{constructor(e,t){super(e,t),this.state={value:e.value}}onInput=e=>{const{onInput:t}=this.props,n=e.target.value;this.setState({value:n},(()=>{"function"==typeof t&&t(n)}))};onChange=e=>{const{onChange:t}=this.props;"function"==typeof t&&t(e.target.value)};onKeyDown=e=>{const{onKeyDown:t}=this.props;"function"==typeof t&&t(e)};onKeyUp=e=>{const{onKeyUp:t}=this.props;"function"==typeof t&&t(e)};componentDidUpdate(e){const{value:t}=this.props;t!==e.value&&t!==this.state.value&&this.setState({value:t})}render(){const{className:e,label:t,id:n,placeholder:i,type:o}=this.props,{value:s}=this.state;return(0,rn.bF)(64,"input",[e||"","dms-input"].join(" "),null,1,{"aria-label":t,placeholder:i||"",onChange:this.onChange,onInput:this.onInput,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,spellCheck:"false",type:o||"text",value:s,id:n})}}class sr extends rn.uA{constructor(e,t){super(e,t),this.translate=t.injector?t.injector.get("translate"):rr,this.setName=e=>{e=e||void 0,this.handleChange({name:e})},this.setLabel=e=>{e=e||void 0,this.handleChange({label:e})}}handleChange(e){var{onChange:t}=this.props;"function"==typeof t&&t(e)}render(){const{name:e,label:t}=this.props;return(0,rn.bF)(1,"div","context-menu-container ref-output-editor output-edit",[(0,rn.bF)(1,"div","dms-form-control",(0,rn.sO)(2,ds,{label:this.translate("Output label"),className:"dms-output-label",value:t||"",placeholder:this.translate("Output"),singleLine:!0,onInput:this.setLabel}),2),(0,rn.bF)(1,"div","dms-form-control",[(0,rn.bF)(1,"label","dms-label",this.translate("Output name"),0),(0,rn.sO)(2,or,{label:this.translate("Output name"),className:"ref-output-name",value:e||"",onInput:this.setName})],4)],4)}}function rr(e){return e}class ar extends rn.uA{constructor(e,t){super(e,t),this.state={},Jn(this),this.persistChanges=this.debounceInput(this.persistChanges)}persistChanges=()=>{const{output:e}=this.props.context,{unsaved:t}=this.state;t&&(this.modeling.updateProperties(e,t),this.setState({unsaved:!1}))};handleChange=e=>{this.setState({unsaved:{...this.state.unsaved,...e}},this.persistChanges)};getValue(e){const{output:t}=this.props.context,{unsaved:n}=this.state;return n&&e in n?n[e]:t.get(e)}render(){return(0,rn.sO)(2,sr,{name:this.getValue("name"),label:this.getValue("label"),onChange:this.handleChange})}}ar.$inject=["debounceInput","modeling"];class lr extends rn.uA{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._eventBus=t.injector.get("eventBus")}onClick=e=>{const{col:t}=this.props;this._eventBus.fire("output.edit",{event:e,output:t})};render(){return(0,rn.bF)(1,"button","edit-button dmn-icon-edit",null,1,{"aria-label":this._translate("Edit output"),type:"button",onClick:this.onClick})}}class cr{constructor(e,t,n,i){e.onGetComponent("cell",(({cellType:e})=>{if("output-header"===e)return ir})),e.onGetComponent("context-menu",((e={})=>{if("output-edit"===e.contextMenuType)return ar})),e.onGetComponent("cell-inner",((e={})=>{const{cellType:t}=e;if("output-cell"===t)return lr})),n.on("output.edit",(({event:e,output:n})=>{const{target:i}=e,o=Fn(i,"th",!0),{left:s,top:r}=o.getBoundingClientRect(),a=function(e){if(!Wn(e,".output-cell + .output-cell"))return{x:-1,y:0}}(o);t.open({x:s,y:r,align:"bottom-right"},{contextMenuType:"output-edit",output:n,offset:a})}))}}cr.$inject=["components","contextMenu","eventBus","renderer"];class ur extends rn.uA{constructor(e,t){super(e,t),Zn(this,ei),this._translate=t.injector.get("translate")}onClick=e=>{const{input:t}=this.props;this._eventBus.fire("input.edit",{event:e,input:t})};onContextmenu=e=>{const{id:t}=this.props.input;this._eventBus.fire("cell.contextmenu",{event:e,id:t})};onElementsChanged=()=>{this.forceUpdate()};componentWillMount(){const{injector:e}=this.context;this._changeSupport=this.context.changeSupport,this._sheet=e.get("sheet"),this._eventBus=e.get("eventBus"),this._elementRegistry=e.get("elementRegistry");const t=this._sheet.getRoot(),{input:n}=this.props;this._changeSupport.onElementsChanged(t.id,this.onElementsChanged),this._changeSupport.onElementsChanged(n.id,this.onElementsChanged)}componentWillUnmount(){const e=this._sheet.getRoot(),{input:t}=this.props;this._changeSupport.offElementsChanged(e.id,this.onElementsChanged),this._changeSupport.offElementsChanged(t.id,this.onElementsChanged)}render(){const{input:e,index:t,inputsLength:n}=this.props,{inputExpression:i,inputValues:o}=e,s=e.get("label"),r=e.width?e.width+"px":"192px";return(0,rn.bF)(1,"th","input-cell input-editor",[this.slotFills({type:"cell-inner",context:{cellType:"input-cell",col:this._elementRegistry.get(e.id),index:t,inputsLength:n},col:e}),(0,rn.bF)(1,"div","clause",0===t?this._translate("When"):this._translate("And"),0),s?(0,rn.bF)(1,"div","input-label",s,0,{title:this._translate("Input label: ")+s}):(0,rn.bF)(1,"div","input-expression",i.text,0,{title:this._translate("Input expression: ")+i.text}),(0,rn.bF)(1,"div","input-variable",o&&o.text||this._translate(i.typeRef||""),0,{title:o&&o.text?this._translate("Input values"):this._translate("Input type")})],0,{"data-col-id":e.id,onDblClick:this.onClick,onContextMenu:this.onContextmenu,style:{width:r}})}}var dr=n(70122),pr=n(15735);class hr extends rn.uA{constructor(e,t){super(e,t),this.node=null,this.editor=null,this.state={value:e.value},this._feelLanguageContext=t.injector?.get("feelLanguageContext",!1)}_getFeelLanguageContext(){return this._feelLanguageContext&&this._feelLanguageContext.getConfig()}componentDidMount(){const e=this._getFeelLanguageContext();this.editor=new dr.A({contentAttributes:{"aria-label":this.props.label},parserDialect:e?.parserDialect,builtins:e?.builtins,dialect:this.props.feelLanguageDialect,container:this.node,onChange:this.handleChange,value:this.state.value,variables:this.props.variables||[],extensions:[pr.Lz.lineWrapping]}),this.node.addEventListener("mousedown",this.handleMouseEvent),this.node.addEventListener("keydown",this.handleKeyDownCapture,!0),this.node.addEventListener("keydown",this.handleKeyDown),this.props.autoFocus&&this.editor.focus(this.state.value.length)}componentDidUpdate(e){const{value:t}=this.props;var n,i;e.value!==t&&t!==this.state.value&&this.setState({value:t},(()=>{this.editor.setValue(t)})),n=e.variables,i=this.props.variables,JSON.stringify(n)!==JSON.stringify(i)&&this.editor.setVariables(this.props.variables)}componentWillUnmount(){this.node.removeEventListener("mousedown",this.handleMouseEvent),this.node.removeEventListener("keydown",this.handleKeyDownCapture,!0),this.node.removeEventListener("keydown",this.handleKeyDown)}handleMouseEvent=e=>{e.stopPropagation()};handleKeyDownCapture=e=>{if("Enter"===e.key){if(this.node.querySelector(".cm-tooltip-autocomplete"))return void(e.triggeredFromAutocomplete=!0);this.props.ctrlForNewline&&!function(e){return e.metaKey||e.ctrlKey}(e)&&e.preventDefault(),this.props.singleLine&&e.preventDefault()}};handleKeyDown=e=>{["Enter","Escape"].includes(e.key)&&e.triggeredFromAutocomplete&&e.stopPropagation()};handleChange=e=>{const{onInput:t}=this.props;this.setState({value:e}),t&&t(e)};handleBlur=()=>{const{onBlur:e,onChange:t}=this.props;t&&this.state.value!==this.props.value&&t(this.state.value),e&&e()};setNode=e=>{this.node=e};render(){return(0,rn.bF)(1,"div",["literal-expression",this.props.className||""].join(" "),null,1,{onClick:this.handleMouseEvent,onFocusIn:this.props.onFocus,onFocusOut:this.handleBlur},null,this.setNode)}}class mr extends rn.uA{constructor(e,t){super(e,t),this.translate=t.injector.get("translate"),this.expressionLanguages=t.injector.get("expressionLanguages",!1),this.variableResolver=t.injector.get("variableResolver",!1),this.handleValue=e=>{let t={text:e};this.handleChange(t)},this.handleLabelChange=e=>{var t=e||void 0;this.handleChange({label:t})}}handleChange(e){var{onChange:t}=this.props;"function"==typeof t&&t(e)}getExpressionEditorComponent(){return this.expressionLanguages&&"feel"!==this.expressionLanguages.getDefault("inputCell").value?ds:hr}handleKeyDown=e=>{"Enter"===e.key&&e.stopPropagation()};_getVariables(){return this.variableResolver&&this.variableResolver.getVariables(this.props.element)}render(){const{label:e,text:t}=this.props,n=this.getExpressionEditorComponent(),i=this._getVariables();return(0,rn.bF)(1,"div","context-menu-container ref-input-editor input-edit",[(0,rn.bF)(1,"div","dms-form-control",(0,rn.sO)(2,ds,{label:this.translate("Input label"),className:"dms-input-label",value:e||"",placeholder:this.translate("Input"),singleLine:!0,onInput:this.handleLabelChange}),2),(0,rn.bF)(1,"div","dms-form-control",[(0,rn.bF)(1,"label","dms-label",this.translate("Expression"),0),(0,rn.sO)(2,n,{label:this.translate("Input expression"),placeholder:this.translate("Enter expression"),className:["ref-text","dms-input"].join(" "),onInput:this.handleValue,value:t||"",variables:i})],4)],4,{onKeyDown:this.handleKeyDown})}}class gr extends rn.uA{constructor(e,t){super(e,t),this.state={},Jn(this),this.persistChanges=this.debounceInput(this.persistChanges)}persistChanges=()=>{const{input:e}=this.props.context,{unsaved:t}=this.state;if(!t)return;const{label:n,...i}=t;var o,s={};"label"in t&&(s.label=n),o=i,Object.keys(o).length&&(s.inputExpression=i),this.modeling.updateProperties(e,s),this.setState({unsaved:!1})};handleChange=e=>{this.setState({unsaved:{...this.state.unsaved,...e}},this.persistChanges)};getValue(e){let{input:t}=this.props.context;const{unsaved:n}=this.state;let i=t;return"text"===e&&(i=i.inputExpression),n&&e in n?n[e]:i.get(e)}render(){return(0,rn.sO)(2,mr,{label:this.getValue("label"),text:this.getValue("text"),element:this.props.context.input,onChange:this.handleChange})}}gr.$inject=["debounceInput","modeling","injector"];class fr extends rn.uA{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._eventBus=t.injector.get("eventBus")}onClick=e=>{const{col:t}=this.props;this._eventBus.fire("input.edit",{event:e,input:t})};render(){return(0,rn.bF)(1,"button","edit-button dmn-icon-edit",null,1,{"aria-label":this._translate("Edit input"),type:"button",onClick:this.onClick})}}class yr{constructor(e,t,n,i){e.onGetComponent("cell",(({cellType:e})=>{if("input-header"===e)return ur})),e.onGetComponent("context-menu",((e={})=>{if("input-edit"===e.contextMenuType)return gr})),e.onGetComponent("cell-inner",((e={})=>{const{cellType:t}=e;if("input-cell"===t)return fr})),n.on("input.edit",(({event:e,input:n})=>{const{target:i}=e,o=Fn(i,"th",!0),{left:s,top:r}=o.getBoundingClientRect();t.open({x:s,y:r,align:"bottom-right"},{contextMenuType:"input-edit",input:n})}))}}yr.$inject=["components","contextMenu","eventBus","renderer"];var vr=n(39569);class br extends rn.uA{constructor(e,t){super(e,t),Jn(this);const{value:n}=e;this.state={value:n,optionsVisible:!1},this._portalEl=null}componentDidMount(){document.addEventListener("mousedown",this.onGlobalClick),document.addEventListener("focusin",this.onFocusChanged),this.keyboard.addListener(this.onKeyboard)}componentWillUnmount(){document.removeEventListener("focusin",this.onFocusChanged),document.removeEventListener("mousedown",this.onGlobalClick),this.keyboard.removeListener(this.onKeyboard),this.removePortalEl()}componentWillReceiveProps(e){const{value:t}=e;this.setState({value:t})}componentWillUpdate(e,t){const{optionsVisible:n}=t;n?this._portalEl||this.addPortalEl():this._portalEl&&this.removePortalEl()}componentDidUpdate(){const{optionsVisible:e}=this.state;if(!e||!this.inputNode)return;const t=this.getOptionsBounds();(0,ke.kp)(this._portalEl.style,t)}getOptionsBounds(){const e=this.renderer.getContainer(),{top:t,left:n,bottom:i}=e.getBoundingClientRect(),{top:o,left:s,width:r,height:a,bottom:l}=this.inputNode.getBoundingClientRect(),c=o+a-t+e.scrollTop,u={top:`${c}px`,left:`${s-n+e.scrollLeft}px`,width:`${r}px`,"max-height":`calc(100% - ${c}px)`};if(i-l<a){const e=i-o;u.bottom=`${e}px`,u["max-height"]=`calc(100% - ${e})`,delete u.top}return u}addPortalEl(){this._portalEl=(0,vr.zm)('<div class="dms-select-options"></div>'),this.renderer.getContainer().appendChild(this._portalEl),this._portalEl.addEventListener("mousedown",_r)}removePortalEl(){this._portalEl&&(this._portalEl.removeEventListener("mousedown",_r),(0,vr.TF)(this._portalEl),this._portalEl=null)}onChange=e=>{this.setState({value:e});const{onChange:t}=this.props;"function"==typeof t&&t(e)};onInputClick=e=>{e.preventDefault(),e.stopPropagation(),this.setOptionsVisible(!this.state.optionsVisible),this.focusInput()};onInput=e=>{const{value:t}=e.target;this.onChange(t)};onOptionClick=(e,t)=>{t.preventDefault(),t.stopPropagation(),this.setOptionsVisible(!1),this.onChange(e),this.focusInput()};focusInput(){const e=this.inputNode;e.focus(),"selectionStart"in e&&(e.selectionStart=1e5)}checkClose(e){!this._portalEl||this._portalEl.contains(e)||this.parentNode.contains(e)||this.setOptionsVisible(!1)}onFocusChanged=e=>{this.checkClose(e.target)};onGlobalClick=e=>{this.checkClose(e.target)};select(e){const{options:t}=this.props,{value:n}=this.state;if(!t)return;const i=t.filter((e=>e.value===n))[0],o=i?t.indexOf(i):-1,s=-1===o?1===e?0:t.length-1:(o+e)%t.length,r=t[s<0?t.length+s:s];this.onChange(r.value)}setOptionsVisible(e){this.setState({optionsVisible:e})}onKeyDown=e=>{const{optionsVisible:t}=this.state;var n=e.which;40!==n&&38!==n||(e.stopPropagation(),e.preventDefault(),t?this.select(40===n?1:-1):this.setOptionsVisible(!0)),t&&(13!==n&&27!==n||(e.stopPropagation(),e.preventDefault(),this.setOptionsVisible(!1)))};onKeyboard=e=>{const{optionsVisible:t}=this.state;if(t)return 27===e?(this.setOptionsVisible(!1),!0):void 0};renderOptions(e,t){return(0,rn.bF)(1,"div","options",e.map((e=>(0,rn.bF)(1,"div",["option",t===e?"active":""].join(" "),e.label,0,{"data-value":e.value,onClick:t=>this.onOptionClick(e.value,t)}))),0)}render(){const{className:e,label:t,id:n,options:i,noInput:o,title:s}=this.props,{optionsVisible:r,value:a}=this.state,l=!!i&&i.filter((e=>e.value===a))[0],c=l?l.label:a;return(0,rn.bF)(1,"div",[e||"","dms-input-select"].join(" "),[o?(0,rn.bF)(1,"div","dms-input",c,0,{"aria-label":t,tabIndex:"0",onKeyDown:this.onKeyDown},null,(e=>this.inputNode=e)):(0,rn.bF)(64,"input","dms-input",null,1,{"aria-label":t,onInput:this.onInput,onKeyDown:this.onKeyDown,spellCheck:"false",type:"text",value:a,id:n},null,(e=>this.inputNode=e)),(0,rn.bF)(1,"span",["dms-input-select-icon",r?"dmn-icon-up":"dmn-icon-down"].join(" ")),r&&(0,rn.d5)(this.renderOptions(i,l),this._portalEl)],0,{title:s,onClick:this.onInputClick},null,(e=>this.parentNode=e))}}function _r(e){e.stopPropagation()}br.$inject=["keyboard","renderer"];class xr extends rn.uA{constructor(e,t){super(e),this._translate=t.injector.get("translate"),this._modeling=t.injector.get("modeling"),this._dataTypes=t.injector.get("dataTypes")}onTypeChange=e=>{const t=this.getElement(),n=(0,s.is)(t,"dmn:LiteralExpression")?t.$parent:t;let i;(0,s.Xy)(n)?i={inputExpression:{typeRef:e}}:(0,s.Mz)(n)&&(i={typeRef:e}),this._modeling.updateProperties(n,i)};getElement(){return this.props.context.input||this.props.context.output}render(){const e=this.getElement(),t=((0,s.is)(e,"dmn:InputClause")?e.inputExpression:e).typeRef,n=this._dataTypes.getAll().map((e=>({label:this._translate(e),value:e}))),i=this._translate("Type");return(0,rn.bF)(1,"div","type-ref-edit context-menu-container",(0,rn.bF)(1,"div","dms-form-control",[(0,rn.bF)(1,"label","dms-label",[i,(0,rn.eW)(":")],0),(0,rn.sO)(2,br,{className:"type-ref-edit-select",label:i,onChange:this.onTypeChange,options:n,value:t})],4),2)}}class Cr{constructor(e){e.onGetComponent("context-menu",750,((e={})=>{const{contextMenuType:t}=e;if("input-edit"===t||"output-edit"===t)return xr}))}}Cr.$inject=["components"];const Er={__depends__:[Bs,Ys],__init__:["typeRefEditingProvider"],typeRefEditingProvider:["type",Cr]};class wr extends Se.A{constructor(e,t){super(e),this.postExecuted("element.updateProperties",(e=>{const{element:n,properties:i}=e.context,o=(0,s.Xy)(n)?i.inputExpression:i;if(o&&o.typeRef&&"string"!==o.typeRef){const e=(0,s.is)(n,"dmn:LiteralExpression")?n.$parent:n;t.editAllowedValues(e,null)}}))}}wr.$inject=["eventBus","modeling"];class Dr extends rn.uA{constructor(e,t){super(e,t);const{items:n}=e;this.state={items:n}}componentWillReceiveProps(e){const{items:t}=e;this.setState({items:t})}getRemoveClickHandler=e=>t=>{t.stopPropagation(),this.removeItem(e)};getToggleClickHandler=e=>t=>{t.stopPropagation(),this.toggleItem(e)};removeItem=e=>{const{onChange:t}=this.props,n=this.state.items.filter((t=>t!==e));this.setState({items:n}),t&&t(n)};toggleItem=e=>{const{onChange:t,type:n}=this.props,i=this.state.items.map((t=>(t===e?t.isChecked=!t.isChecked:"radio"===n&&(t.isChecked=!1),t)));this.setState({items:i}),t&&t(i)};render(){const{className:e,items:t,type:n,labelComponent:i}=this.props,o=["dms-list-component"];e&&o.push(e);const s=function(e){const t=[];for(let n in e)t.push([n,e[n]]);return t}((0,ke.$z)(t,"group"));return(0,rn.bF)(1,"div",o.join(" "),s.map((e=>{const t=e[0],o=e[1];return(0,rn.bF)(1,"div","group",[i&&i(t)||(0,rn.bF)(1,"h4","dms-heading",t,0),(0,rn.bF)(1,"ul","items no-wrap",o.map((e=>(0,rn.bF)(1,"li","item",[n&&(0,rn.bF)(64,"input","item-toggle",null,1,{type:n,checked:e.isChecked,onClick:this.getToggleClickHandler(e)}),(0,rn.eW)("Â "),e.value,e.isRemovable&&(0,rn.bF)(1,"span","remove dmn-icon-clear",null,1,{title:"Remove item",onClick:this.getRemoveClickHandler(e)})],0))),0)],0)})),0)}}class Sr extends rn.uA{constructor(e,t){super(e,t);const{validate:n,value:i}=e,o=n?n(i||""):void 0;this.state={validationWarning:o,value:i},this.onInput=this.onInput.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onKeyUp=this.onKeyUp.bind(this)}componentWillReceiveProps(e){const{validate:t,value:n}=e,i=t?t(n||""):void 0;this.setState({validationWarning:i,value:n})}onInput(e){const{onInput:t,validate:n}=this.props,i=n?n(e):void 0;this.setState({validationWarning:i,value:e}),"function"==typeof t&&t&&t({isValid:!i,value:e})}onKeyDown(e){const{target:t}=e,{value:n}=t,{onKeyDown:i,validate:o}=this.props,s=o?o(n):void 0;"function"==typeof i&&i({isValid:!s,value:n,event:e})}onKeyUp(e){const{target:t}=e,{value:n}=t,{onKeyUp:i,validate:o}=this.props,s=o?o(n):void 0;"function"==typeof i&&i({isValid:!s,value:n,event:e})}render(){const{placeholder:e,type:t,className:n,label:i}=this.props,{validationWarning:o,value:s}=this.state,r=["dms-validated-input",n].join(" "),a=[];return o&&a.push("invalid"),(0,rn.bF)(1,"div",r,[(0,rn.sO)(2,or,{className:a,label:i,onInput:this.onInput,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,placeholder:e||"",type:t,value:s||""}),o&&(0,rn.bF)(1,"p","dms-hint dms-validation-warning",o,0)],0)}}function Ar(e){if(!e||function(e){return""===e}(e.trim()))return{values:[]};let t=e.split(",");const n={values:[]};let i="";return t.forEach((e=>{i+=e,/^"[^"]*"$/.test(i.trim())?(n.values.push(i.trim()),i=""):i+=","})),i?void 0:n}class jr extends rn.uA{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._modeling=t.injector.get("modeling"),this._changeSupport=t.changeSupport;const n=this.getAllowedValuesTarget(),i=Ar(n.inputValues&&n.inputValues.text||n.outputValues&&n.outputValues.text||"");this.state=i?{values:i.values.map((e=>({value:e,isCheckable:!1,isRemovable:!0,group:this._translate("Predefined values")}))),inputValue:""}:{values:null,inputValue:""}}onElementsChanged=()=>{this.forceUpdate()};componentWillMount(){const e=this.getAllowedValuesTarget();this._changeSupport.onElementsChanged(e.id,this.onElementsChanged)}componentWillUnmount(){const e=this.getAllowedValuesTarget();this._changeSupport.offElementsChanged(e.id,this.onElementsChanged)}setPredefinedValues=e=>{const t=this.getAllowedValuesTarget();this.setState({values:e}),this._modeling.editAllowedValues(t,e&&function(e){return e.map((e=>e.value))}(e))};onListChange=e=>{this.setPredefinedValues(e)};getAllowedValuesTarget(){const e=this.getElement();return(0,s.is)(e,"dmn:LiteralExpression")?e.$parent:e}onInput=({isValid:e,value:t})=>{this.setState({inputValue:t})};onKeyDown=({isValid:e,event:t})=>{if(13===t.keyCode&&(t.stopPropagation(),t.preventDefault(),e)){const{inputValue:e,values:t}=this.state,n=Ar(e);this.onListChange((t||[]).concat(n.values.map((e=>({value:e,isCheckable:!1,isRemovable:!0,group:this._translate("Predefined values")}))))),this.setState({inputValue:""})}};handleRemovePredifinedValuesClick=e=>{e.stopPropagation(),this.removePredefinedValues()};removePredefinedValues=()=>{this.setPredefinedValues(null)};getElement(){return this.props.context.output||this.props.context.input.inputExpression}render(){const e=this.getElement(),{inputValue:t,values:n}=this.state;return"string"===e.typeRef?(0,rn.bF)(1,"div","context-menu-container allowed-values-edit",(0,rn.bF)(1,"div","dms-form-control",[!Rr(n)&&n.length>0&&(0,rn.sO)(2,Dr,{labelComponent:Or,items:n,onChange:this.onListChange}),!Rr(n)&&!n.length&&(0,rn.bF)(1,"div",null,[(0,rn.bF)(1,"label","dms-label",this._translate("Predefined values"),0),(0,rn.bF)(1,"span","placeholder",this._translate("No values"),0)],4),!Rr(n)&&(0,rn.bF)(1,"p","dms-hint",(0,rn.bF)(1,"button","del-values",this._translate("Clear predefined values"),0,{type:"button",onClick:this.handleRemovePredifinedValuesClick}),2),(0,rn.bF)(1,"label","dms-label",this._translate("Add predefined values"),0),(0,rn.sO)(2,Sr,{onInput:this.onInput,onKeyDown:this.onKeyDown,placeholder:this._translate('"value", "value", ...'),type:"text",validate:e=>{if(!Ar(e))return this._translate("Strings must be in double quotes")},value:t})],0),2):null}}function Or(e){return(0,rn.bF)(1,"label","dms-label",e,0)}function Rr(e){return null===e}class Mr{constructor(e){e.onGetComponent("context-menu",500,((e={})=>{const{contextMenuType:t}=e;if("input-edit"===t||"output-edit"===t)return jr}))}}Mr.$inject=["components"];const kr={__init__:["allowedValuesUpdateBehavior","allowedValuesEditingProvider"],allowedValuesUpdateBehavior:["type",wr],allowedValuesEditingProvider:["type",Mr]};class Ir extends rn.uA{constructor(e,t){super(e,t),this._sheet=t.injector.get("sheet"),this._eventBus=t.injector.get("eventBus"),this._changeSupport=t.changeSupport,this._translate=t.injector.get("translate")}onElementsChanged=()=>{this.forceUpdate()};componentWillMount(){const e=this.getRoot();this._changeSupport.onElementsChanged(e.id,this.onElementsChanged)}componentWillUnmount(){const e=this.getRoot();this._changeSupport.offElementsChanged(e.id,this.onElementsChanged)}getRoot(){return this._sheet.getRoot()}handleClick=e=>{e.stopPropagation(),this.add()};add=()=>{this._eventBus.fire("addInput")};render(){return(0,rn.bF)(1,"div","add-input actionable",(0,rn.bF)(1,"button","dmn-icon-plus action-icon",null,1,{title:this._translate("Add input")}),2,{onClick:this.handleClick})}}class Tr extends rn.uA{constructor(e,t){super(e,t),this._sheet=t.injector.get("sheet"),this._eventBus=t.injector.get("eventBus"),this._changeSupport=t.changeSupport,this._translate=t.injector.get("translate")}onElementsChanged=()=>{this.forceUpdate()};componentWillMount(){const e=this.getRoot();this._changeSupport.onElementsChanged(e.id,this.onElementsChanged)}componentWillUnmount(){const e=this.getRoot();this._changeSupport.offElementsChanged(e.id,this.onElementsChanged)}getRoot(){return this._sheet.getRoot()}handleClick=e=>{e.stopPropagation(),this.add()};add=()=>{this._eventBus.fire("addOutput")};render(){return(0,rn.bF)(1,"div","add-output actionable",(0,rn.bF)(1,"button","dmn-icon-plus action-icon",null,1,{title:this._translate("Add output")}),2,{onClick:this.handleClick})}}function Fr(e,t,n){e.onGetComponent("cell-inner",((e={})=>{const{cellType:t,index:n,inputsLength:i,outputsLength:o}=e;return"input-cell"===t&&n===i-1?Ir:"output-cell"===t&&n===o-1?Tr:void 0})),n.on("addInput",(()=>{t.trigger("addInput")})),n.on("addOutput",(()=>{t.trigger("addOutput")}))}Fr.$inject=["components","editorActions","eventBus"];const Pr={__depends__:[ss],__init__:["addInputOutputProvider"],addInputOutputProvider:["type",Fr]};var Lr="Keyboard binding is now implicit; explicit binding to an element got removed. For more information, see https://github.com/bpmn-io/diagram-js/pull/662";class Nr{constructor(e,t,n,i,o){this._config=e||{},this._editorActions=n,this._eventBus=t,this._cellSelection=i,this._listeners=[],t.on("table.destroy",this._destroy),t.on("table.init",this._init),t.on("attach",(()=>{this._config.bindTo&&console.error("unsupported configuration <keyboard.bindTo>",new Error(Lr)),this._target=o.getContainer(),this._config&&!1!==this._config.bind&&this.bind()})),t.on("detach",this.unbind)}_init=()=>{this._registerDefaultBindings(),this._fire("init")};_destroy=()=>{this._fire("destroy"),this.unbind(),this._listeners=null};_keyHandler=e=>{var t,n,i=this._listeners,o=e.keyCode||e.charCode||-1;for(t=0;n=i[t];t++)if(n(o,e))return e.preventDefault(),void e.stopPropagation()};bind(e){e&&console.error("unsupported argument <node>",new Error(Lr)),this.unbind(),e=this._node=this._target,Un.bind(e,"keydown",this._keyHandler),this._fire("bind")}getBinding(){return this._node}unbind=()=>{var e=this._node;e&&(this._fire("unbind"),Un.unbind(e,"keydown",this._keyHandler)),this._node=null};_fire(e){this._eventBus.fire("keyboard."+e,{node:this._node,listeners:this._listeners})}_registerDefaultBindings(){var e=this._listeners,t=this._editorActions,n=this._cellSelection;e.push((function(e,n){if(Vs(n)&&!Us(n)&&90===e)return t.trigger("undo"),!0})),e.push((function(e,n){if(Vs(n)&&(89===e||90===e&&Us(n)))return t.trigger("redo"),!0})),e.push((function(e,n){if(13===e&&!Vs(n)&&Us(n)&&ko(n.target))return t.trigger("selectCellAbove"),!0})),e.push((function(e,i){if(13!==e||Vs(i)||Us(i))return;if(!ko(i.target))return;const o=t.trigger("selectCellBelow"),s=n.getCellSelection();if(!o&&s&&"__decisionProperties_name"!==s){const e=t.trigger("addRule");return t.trigger("selectCellBelow"),e}return!0}))}addListener(e){this._listeners.unshift(e)}removeListener(e){this._listeners=this._listeners.filter((t=>t!==e))}}Nr.$inject=["config.keyboard","eventBus","editorActions","cellSelection","renderer"];const $r={__depends__:[ss],__init__:["keyboard"],keyboard:["type",Nr]},Br={__depends__:[Pr,kr,Bs,vs,ji,Ri,$r,Er],__init__:["inputEditingProvider","outputEditingProvider"],inputEditingProvider:["type",yr],outputEditingProvider:["type",cr]};function Vr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Ur{constructor(e,t,n,i){Vr(this,"handleDragOver",(e=>{zr(e);const t=no(e.target,".dmn-decision-table-container td,\n   .dmn-decision-table-container th",!0);let n=!!t;const{hoverEl:i}=this._dragContext;i&&i!==t&&(this._emit("dragAndDrop.dragLeave",e),this._dragContext.targetEl=null,this._dragContext.hoverEl=null),t&&(t!==i&&(this._dragContext.hoverEl=t,n=this._emit("dragAndDrop.dragEnter",e),!1!==n&&(this._dragContext.targetEl=t)),n=this._emit("dragAndDrop.dragOver",e)),e.dataTransfer.dropEffect=!1!==n?"move":"none"})),Vr(this,"handleDrop",(e=>{zr(e);const t=this._emit("dragAndDrop.drop",e);if(t){const{draggedElement:e}=this._dragContext;if(e instanceof Xt){const{rows:n}=this._sheet.getRoot();let i=n.indexOf(t);this._modeling.moveRow(e,i)}else if(e instanceof Jt){const{cols:n}=this._sheet.getRoot();let i=n.indexOf(t);this._modeling.moveCol(e,i)}}this.handleDragEnd(e)})),Vr(this,"handleDragEnd",(e=>{zr(e),this._unbindListeners(),this._emit("dragAndDrop.dragEnd",e),this._dragContext=null})),this._eventBus=e,this._renderer=t,this._modeling=n,this._sheet=i,this._dragContext=null,e.on("table.destroy",(()=>{this._unbindListeners()}))}_bindListeners(){co.bind(document,"dragover",this.handleDragOver),co.bind(document,"drop",this.handleDrop),co.bind(document,"dragend",this.handleDragEnd)}_unbindListeners(){co.unbind(document,"dragover",this.handleDragOver),co.unbind(document,"drop",this.handleDrop),co.unbind(document,"dragend",this.handleDragEnd)}_emit(e,t){return this._eventBus.fire(e,{dragContext:this._dragContext,originalEvent:t})}startDrag(e,t){zr(t,!0),t.dataTransfer.effectAllowed="move",t.dataTransfer.setData&&t.dataTransfer.setData("text","__DUMMY"),this._dragContext={draggedElement:e},this._bindListeners(),this._emit("dragAndDrop.dragStart",t)}}function zr(e,t){e.stopPropagation(),!0!==t&&e.preventDefault()}Ur.$inject=["eventBus","renderer","modeling","sheet"];const Kr={__init__:["dragAndDrop"],dragAndDrop:["type",Ur]},qr="top",Wr="left";class Gr{constructor(e,t,n,i,o,r,a,l){this._elementRegistry=t,this._dragAndDrop=i,this._renderer=o,this._rules=r,this._sheet=a,this._translate=l,e.onGetComponent("cell-inner",(({cellType:e,col:t,row:n})=>{if("rule-index"===e)return()=>(0,rn.bF)(1,"span","dmn-icon-drag vertical",(0,rn.eW)("Â "),2,{draggable:"true",onDragStart:e=>this.startDrag(n,e),title:this._translate("Move rule")});if("input-cell"===e||"output-cell"===e){let e="Move "+((0,s.Xy)(t)?"Input":"Output");return()=>(0,rn.bF)(1,"span","dmn-icon-drag horizontal",null,1,{draggable:"true",onDragStart:e=>this.startDrag(t,e),title:e})}})),n.on("dragAndDrop.dragEnter",(e=>{const{dragContext:t}=e,{draggedElement:n,hoverEl:i}=t;if(n instanceof Xt)return!0;if(n instanceof Jt){const e=function(e,t,n){const i=t.get(e.dataset.colId);if(!i)return-1;const{cols:o}=n.getRoot();return o.indexOf(i)}(i,this._elementRegistry,this._sheet);return-1!==e&&this._rules.allowed("col.move",{col:n,index:e})}return!1})),n.on("dragAndDrop.dragLeave",(e=>{const{dragContext:t}=e,{targetEl:n}=t;n&&Hr(this._renderer.getContainer())})),n.on("dragAndDrop.dragOver",(e=>{const{dragContext:t,originalEvent:n}=e,{draggedElement:i,lastPosition:o,targetEl:s}=t,r=this._renderer.getContainer();if(!s)return!1;let a;return i instanceof Xt&&(a=Jr(n,s)),i instanceof Jt&&(a=Xr(n,s)),o===a||(Hr(r),i instanceof Xt&&function(e,t,n){const i=e.dataset.rowId;if(!i)return;Cn(Hn(`[data-row-id=${i}]`,t),(e=>{Yr(e)&&(In(e).add("dragover"),In(e).add(n))}))}(s,r,a===qr?"top":"bottom"),i instanceof Jt&&function(e,t,n){const i=e.dataset.colId;if(!i)return;Cn(Hn(`[data-col-id=${i}]`,t),(e=>{Yr(e)&&(In(e).add("dragover"),In(e).add(n))}))}(s,r,a===Wr?"left":"right"),t.lastPosition=a),!0})),n.on("dragAndDrop.drop",(e=>{const{dragContext:t,originalEvent:n}=e,{draggedElement:i,targetEl:o}=t;if(!o)return!1;if(i instanceof Xt){const e=Jr(n,o),t=o.dataset.rowId,s=this._elementRegistry.get(t);if(!s||s===i)return;const r=function(e,t,n,i){return i.indexOf(e)>i.indexOf(t)&&(t=function(e,t){const n=t.indexOf(e);return t[Math.min(t.length-1,n+1)]}(t,i)),n===qr?function(e,t){const n=t.indexOf(e);return t[Math.max(0,n-1)]}(t,i):t}(i,s,e,this._sheet.getRoot().rows);if(r===i)return;return r}if(i instanceof Jt){const e=Xr(n,o),t=o.dataset.colId,r=this._elementRegistry.get(t);if(!r||r===i)return;const a=function(e,t,n,i){return i.indexOf(e)>i.indexOf(t)&&(t=function(e,t){const n=t.indexOf(e);if((0,s.Xy)(e)){const e=t.filter((e=>(0,s.Xy)(e))),i=e[e.length-1],o=t.indexOf(i);return t[Math.min(o,n+1)]}return t[Math.min(t.length-1,n+1)]}(t,i)),n===Wr?function(e,t){const n=t.indexOf(e);if((0,s.Mz)(e)){const e=t.filter((e=>(0,s.Mz)(e)))[0],i=t.indexOf(e);return t[Math.max(i,n-1)]}return t[Math.max(0,n-1)]}(t,i):t}(i,r,e,this._sheet.getRoot().cols);if(a===i)return;return a}})),n.on("dragAndDrop.dragEnd",this._cleanup)}startDrag(e,t){const n=this._renderer.getContainer();this._dragImage=qn('<span style="\n          visibility: hidden;\n          position: fixed;\n          top: -10000px\n      "></span>'),document.body.appendChild(this._dragImage),t.dataTransfer.setDragImage&&t.dataTransfer.setDragImage(this._dragImage,0,0),e instanceof Xt?function(e,t){Cn(Hn(`[data-row-id=${e.id}]`,t),(e=>{Yr(e)&&In(e).add("dragged")}))}(e,n):e instanceof Jt&&function(e,t){Cn(Hn(`[data-col-id=${e.id}]`,t),(e=>{Yr(e)&&In(e).add("dragged")}))}(e,n),this._dragAndDrop.startDrag(e,t)}_cleanup=()=>{const e=this._renderer.getContainer();Hr(e),function(e){Cn(Hn(".dragged",e),(e=>{Yr(e)&&In(e).remove("dragged")}))}(e),this._dragImage&&(Xn(this._dragImage),this._dragImage=null)}}function Hr(e){Cn(Hn(".dragover",e),(e=>{Yr(e)&&(In(e).remove("dragover"),In(e).remove("top"),In(e).remove("right"),In(e).remove("bottom"),In(e).remove("left"))}))}function Xr(e,t){const n=t.getBoundingClientRect();return e.clientX<n.left+n.width/2?Wr:"right"}function Jr(e,t){const n=t.getBoundingClientRect();return e.clientY<n.top+n.height/2?qr:"bottom"}function Yr(e){return e&&(1===e.nodeType||11==e.nodeType)}Gr.$inject=["components","elementRegistry","eventBus","dragAndDrop","renderer","rules","sheet","translate"];const Zr={__depends__:[Kr,Bo],__init__:["dmnDragAndDrop"],dmnDragAndDrop:["type",Gr]};class Qr extends rn.uA{constructor(e,t){super(e,t),this._elementRegistry=t.injector.get("elementRegistry"),this._modeling=t.injector.get("modeling"),this._changeSupport=this.context.changeSupport;const{id:n}=this.props.context;this._element=this._elementRegistry.get(n)}onElementsChanged=()=>{this.forceUpdate()};componentWillMount(){this._element&&this._changeSupport.onElementsChanged(this._element.id,this.onElementsChanged)}componentDidMount(){const{autoFocus:e}=this.props.context;e&&this.node&&Gn(".content-editable",this.node).focus()}componentWillUnmount(){if(this._element){this._changeSupport.offElementsChanged(this._element.id,this.onElementsChanged);const{businessObject:e}=this._element,{description:t}=e;bn(t)&&!t.length&&this.changeDescription(null)}}changeDescription=e=>{this._modeling.updateProperties(this._element,{description:e})};render(){if(!this._element)return;const{businessObject:e}=this._element,{description:t}=e;return bn(t)?(0,rn.bF)(1,"div","context-menu-container description-editor",(0,rn.sO)(2,ea,{className:"dms-input",onChange:this.changeDescription,value:t}),2,null,null,(e=>this.node=e)):void 0}}class ea extends hs{render(){return(0,rn.bF)(1,"div",this.getClassName(),this.getEditor(),0)}}class ta{constructor(e,t,n,i,o,r,a){this._contextMenu=t,this._modeling=o,this._renderer=r,this._translate=a,i.on("cell.click",750,(e=>{if(e.defaultPrevented)return;const{target:i,id:o}=e,a=n.get(o);if(!(0,s.f7)(a,["dmn:UnaryTests","dmn:LiteralExpression"]))return;ia(a)||e.preventDefault();const l=na(r.getContainer(),i.getBoundingClientRect());t.open(l,{contextMenuType:"cell-description",autoFocus:!1,id:o,offset:{x:4,y:4}})})),e.onGetComponent("context-menu",((e={})=>{if(e.contextMenuType&&"cell-description"===e.contextMenuType&&bn(ia(n.get(e.id))))return Qr})),e.onGetComponent("context-menu-cell-additional",500,((e={})=>{if(e.contextMenuType&&"context-menu"===e.contextMenuType){const{id:t}=e;if(!t)return;const i=n.get(t);if(!i)return;const{businessObject:o}=i,{description:s}=o,r=bn(s),a=r?"remove-description":"add-description",l=r?()=>this.removeDescription(i):()=>this.addDescription(i);return(0,rn.bF)(1,"div",`context-menu-group-entry ${a}`,bn(s)?this._translate("Remove cell description"):this._translate("Add cell description"),0,{onClick:l})}}))}addDescription=e=>{this._modeling.updateProperties(e,{description:""});const t=this._renderer.getContainer(),n=na(t,Mo(e.id,t).getBoundingClientRect());this._contextMenu.open(n,{contextMenuType:"cell-description",id:e.id,autoFocus:!0,offset:{x:4,y:4}})};removeDescription=e=>{this._modeling.updateProperties(e,{description:null}),this._contextMenu.close()}}function na(e,t){const{top:n,left:i,width:o,height:s}=t;return{x:i+e.parentNode.scrollLeft-26,y:n+e.parentNode.scrollTop,width:o+52,height:s}}function ia(e){return e&&e.businessObject&&e.businessObject.description}ta.$inject=["components","contextMenu","elementRegistry","eventBus","modeling","renderer","translate"];const oa={__depends__:[Bs,go],__init__:["description"],description:["type",ta]};class sa{constructor(e,t,n,i,o,s){this._modeling=n,this._translate=o,this._expressionLanguages=i,e.onGetComponent("context-menu-cell-additional",((e={})=>{if(e.contextMenuType&&"context-menu"===e.contextMenuType){const{event:n,id:i}=e;if(!i)return;const o=t.get(i);if(!o)return;if(!this._shouldDisplayContextMenuEntry(o))return;const r=e=>{s.open({x:(n||e).pageX,y:(n||e).pageY},{contextMenuType:"expression-language",id:i})};return(0,rn.bF)(1,"div","context-menu-group-entry",this._translate("Change cell expression language"),0,{onClick:r})}})),e.onGetComponent("context-menu",((e={})=>{if(e.contextMenuType&&"expression-language"===e.contextMenuType){const{id:n}=e;if(!n)return;const o=t.get(n);if(!o)return;const s=this._getElementExpressionLanguage(o),r=i.getAll(),a="context-menu-group-entry context-menu-entry-set-expression-language",l=this._translate("Expression language");return()=>(0,rn.bF)(1,"div","context-menu-flex",(0,rn.bF)(1,"div","context-menu-group",(0,rn.bF)(1,"div",a,[(0,rn.bF)(1,"div",null,l,0),(0,rn.sO)(2,br,{label:l,className:"expression-language",onChange:e=>this.onChange(o,e),options:r,value:s})],4),2),2)}})),e.onGetComponent("context-menu",((e={})=>{if("input-edit"===e.contextMenuType)return()=>{const{inputExpression:t}=e.input;if(!this._shouldDisplayContextMenuEntry(t))return;const n=this._getElementExpressionLanguage(t),o=i.getAll(),s=this._translate("Expression language");return(0,rn.bF)(1,"div","context-menu-container ref-language",(0,rn.bF)(1,"div","dms-form-control",[(0,rn.bF)(1,"label","dms-label",s,0),(0,rn.sO)(2,br,{label:s,className:"ref-language",value:n||"",onChange:e=>this.onChange(t,e),options:o})],4),2)}}))}onChange(e,t){this._modeling.editExpressionLanguage(e,t)}_shouldDisplayContextMenuEntry(e){return this._expressionLanguages.getAll().length>1||this._getElementExpressionLanguage(e)!==this._getDefaultElementExpressionLanguage(e)}_getElementExpressionLanguage(e){return(0,s.Cf)(e).expressionLanguage||this._getDefaultElementExpressionLanguage(e)}_getDefaultElementExpressionLanguage(e){return this._expressionLanguages.getDefault((0,s.Xy)(e.col)?"inputCell":"outputCell").value}}sa.$inject=["components","elementRegistry","modeling","expressionLanguages","translate","contextMenu"];const ra={__depends__:[ji],__init__:["expressionLanguage"],expressionLanguage:["type",sa]};class aa extends rn.uA{constructor(e,t){super(e,t),Jn(this)}componentWillMount(){this.setupChangeListeners({bind:this.getBusinessObject().id})}componentWillUnmount(){this.setupChangeListeners({unbind:this.getBusinessObject().id})}setupChangeListeners({bind:e,unbind:t}){"string"==typeof t&&this.changeSupport.offElementsChanged(t,this.onElementsChanged),"string"==typeof e&&this.changeSupport.onElementsChanged(e,this.onElementsChanged)}getBusinessObject(){return this.sheet.getRoot().businessObject.$parent}onElementsChanged=()=>{this.forceUpdate()};setDecisionTableName=e=>{this.modeling.editDecisionTableName(e)};render(){const e=this.getBusinessObject(),{name:t}=e,n=this.components.getComponent("hit-policy")||ca;return(0,rn.bF)(1,"div","decision-table-properties",[(0,rn.sO)(2,la,{label:this.translate("Decision name"),className:"decision-table-name",value:t,ctrlForNewline:!0,onBlur:ua,onChange:this.setDecisionTableName,elementId:"__decisionProperties_name",coords:"0:__decisionProperties"}),(0,rn.bF)(1,"div","decision-table-header-separator"),(0,rn.sO)(2,n)],4)}}aa.$inject=["sheet","modeling","changeSupport","components","translate"];class la extends hs{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),Zn(this,si)}render(){const e=this.props.value,t=ii(this.getSelectionClasses(),this.getClassName());return(0,rn.bF)(1,"div",t,this.getEditor(),0,{"data-element-id":this.props.elementId,"data-coords":this.props.coords,title:this._translate("Decision name: ")+e})}}function ca(){return null}function ua(e){e.target.scroll(0,0)}class da{constructor(e){e.onGetComponent("table.before",500,(()=>aa))}}da.$inject=["components"];const pa={__depends__:[vs],__init__:["decisionTableProperties"],decisionTableProperties:["type",da]};class ha extends rn.uA{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),Jn(this)}onChange=({aggregation:e,hitPolicy:t})=>{this.modeling.editHitPolicy(t,e)};onElementsChanged=()=>{this.forceUpdate()};componentDidMount(){this.changeSupport.onElementsChanged(this.getRoot().id,this.onElementsChanged)}componentWillUnmount(){this.changeSupport.offElementsChanged(this.getRoot().id,this.onElementsChanged)}getRoot(){return this.sheet.getRoot()}render(){const e=this.getRoot().businessObject,{aggregation:t,hitPolicy:n}=e,i=xn(Pi,(e=>{return i=e.value,o={aggregation:t,hitPolicy:n},i.hitPolicy===o.hitPolicy&&i.aggregation===o.aggregation;var i,o}));return(0,rn.bF)(1,"div","hit-policy",[(0,rn.bF)(1,"label","dms-label",this._translate("Hit policy:"),0),(0,rn.sO)(2,br,{className:"hit-policy-edit-policy-select",label:this._translate("Hit policy"),onChange:this.onChange,options:Pi.map((e=>({...e,label:this._translate(e.label)}))),value:i.value,"data-hit-policy":"true",noInput:!0})],4,{title:this._translate(i.explanation)})}}function ma(e){e.onGetComponent("hit-policy",(()=>ha))}ha.$inject=["changeSupport","sheet","modeling"],ma.$inject=["components"];const ga={__depends__:[Bs],__init__:["hitPolicyProvider"],hitPolicyProvider:["type",ma]};class fa extends Se.A{constructor(e,t){super(e),this.executed(["row.add","row.remove","col.add","col.remove"],ya((e=>{var t=e.context,n=t.row||t.col;this.updateRoot(n,t.oldRoot)}))),this.reverted(["row.add","row.remove","col.add","col.remove"],ya((e=>{var t=e.context,n=t.row||t.col;this.updateRoot(n,t.newRoot)})))}updateRoot(e,t){var n=e.root,i=e.businessObject;if((0,s.is)(e,"dmn:DecisionRule")){if(t){let e=t.businessObject.get("rule"),n=e.indexOf(i);e.splice(n,1),i.$parent=null}if(n){let t=n.businessObject,o=n.rows.indexOf(e);t.get("rule").splice(o,0,i),i.$parent=t,e.cells.forEach(((t,n)=>{this.wireCell(t,e,n)}))}}if((0,s.is)(e,"dmn:InputClause")||(0,s.is)(e,"dmn:OutputClause")){let o,r;if(t){let n=t.businessObject,a=n.get("input"),l=n.get("output");if((0,s.is)(e,"dmn:InputClause")&&(o=a,r=a.indexOf(i)),(0,s.is)(e,"dmn:OutputClause")&&(o=l,r=l.indexOf(i)),-1===r)throw new Error("inconsistent model: clause not in table");o.splice(r,1),i.$parent=null,e.cells.forEach(((e,n)=>{this.unwireCell(e,t.rows[n])}))}if(n){let t,o,r=n.businessObject,a=r.get("input"),l=r.get("output"),c=n.cols.indexOf(e);(0,s.is)(e,"dmn:InputClause")&&(o=a,t=c),(0,s.is)(e,"dmn:OutputClause")&&(o=l,t=c-a.length),o.splice(t,0,i),i.$parent=r,e.cells.forEach(((e,t)=>{this.wireCell(e,n.rows[t],c)}))}}}unwireCell(e,t){var n=e.businessObject;let i,o,r=t.businessObject,a=r.get("inputEntry"),l=r.get("outputEntry");if((0,s.is)(e,"dmn:UnaryTests")&&(i=a),(0,s.is)(e,"dmn:LiteralExpression")&&(i=l),o=i.indexOf(n),-1===o)throw new Error("cell not in row");i.splice(o,1),n.$parent=null}wireCell(e,t,n){var i=e.businessObject;let o,r,a=t.businessObject,l=a.get("inputEntry"),c=a.get("outputEntry");i.$parent!==a&&((0,s.is)(e,"dmn:UnaryTests")&&(o=l,r=n),(0,s.is)(e,"dmn:LiteralExpression")&&(o=c,r=n-l.length),o.splice(r,0,i),i.$parent=a)}}function ya(e){return function(t){var n=t.context,i=n.row||n.col;(0,s.is)(i,"dmn:DMNElement")&&e(t)}}fa.$inject=["eventBus","sheet"];class va{constructor(e){this._model=e}create(e,t={}){var n=this._model.create(e,t||{});return(0,s.is)(n,"dmn:InputClause")&&(t.inputExpression?n.inputExpression=t.inputExpression:(n.inputExpression=this.create("dmn:LiteralExpression",{typeRef:"string"}),n.inputExpression.$parent=n)),(0,s.is)(n,"dmn:OutputClause")&&(n.typeRef=t.typeRef||"string"),((0,s.is)(n,"dmn:UnaryTests")||(0,s.is)(n,"dmn:LiteralExpression"))&&(n.text=t.text||""),this._ensureId(n),n}_needsId(e){return(0,s.is)(e,"dmn:DMNElement")}_ensureId(e){var t=(e.$type||"").replace(/^[^:]*:/g,"")+"_";!e.id&&this._needsId(e)&&(e.id=this._model.ids.nextPrefixed(t,e))}}va.$inject=["moddle"];class ba extends en{constructor(e){super(),this._dmnFactory=e}create(e,t){const n=this._dmnFactory;let{businessObject:i,type:o,...r}=t;if(!i){if(!o){if("root"===e)o="dmn:DecisionTable";else if("cell"===e){let{col:e}=r;(0,s.is)(e,"dmn:OutputClause")&&(o="dmn:LiteralExpression"),(0,s.is)(e,"dmn:InputClause")&&(o="dmn:UnaryTests")}if(!o)throw new Error("cannot guess <type>")}i=n.create(o)}return super.create(e,{businessObject:i,id:i.id,...r})}}ba.$inject=["dmnFactory"];class _a{constructor(e,t){this._sheet=e,this._elementFactory=t}execute(e){const t=this._sheet,n=this._elementFactory,i=t.getRoot();let{row:o,index:s}=e;return void 0===s&&(s=e.index=i.rows.length),e.newRoot=i,o.cells.length||i.cols.forEach(((e,t)=>{const i=n.create("cell",{row:o,col:e});o.cells[t]=i})),t.addRow(o,s),t.getRoot()}revert(e){const{row:t}=e,n=this._sheet;return n.removeRow(t),n.getRoot()}}_a.$inject=["sheet","elementFactory"];class xa{constructor(e){this._sheet=e}execute(e){const t=this._sheet,n=t.getRoot();let{row:i}=e;const o=e.oldIndex=n.rows.indexOf(i);if(e.oldRoot=i.root,-1===o)throw new Error(`row#${i.id} not in sheet`);return t.removeRow(i),t.getRoot()}revert(e){const{row:t,oldIndex:n}=e,i=this._sheet;return i.addRow(t,n),i.getRoot()}}xa.$inject=["sheet"];class Ca{constructor(e){this._modeling=e}preExecute(e){let{row:t}=e;this._modeling.removeRow(t)}postExecute(e){let{row:t,index:n}=e;this._modeling.addRow(t,n)}}Ca.$inject=["modeling"];class Ea{constructor(e,t){this._sheet=e,this._elementFactory=t}execute(e){const t=this._sheet,n=this._elementFactory,i=t.getRoot();let{col:o,index:s}=e;return void 0===s&&(s=e.index=i.cols.length),e.newRoot=i,o.cells.length||i.rows.forEach(((e,t)=>{const i=n.create("cell",{row:e,col:o});o.cells[t]=i})),t.addCol(o,s),t.getRoot()}revert(e){const{col:t}=e,n=this._sheet;return n.removeCol(t),n.getRoot()}}Ea.$inject=["sheet","elementFactory"];class wa{constructor(e,t){this._sheet=e,this._elementFactory=t}execute(e){const t=this._sheet;let{col:n}=e;const i=e.oldRoot=n.root;if(-1===(e.oldIndex=i.cols.indexOf(n)))throw new Error(`col#${n.id} not in sheet`);return t.removeCol(n),t.getRoot()}revert(e){const{col:t,oldIndex:n}=e,i=this._sheet;return i.addCol(t,n),i.getRoot()}}wa.$inject=["sheet","elementFactory"];class Da{constructor(e){this._modeling=e}preExecute(e){let{col:t}=e;this._modeling.removeCol(t)}postExecute(e){let{col:t,index:n}=e;this._modeling.addCol(t,n)}}Da.$inject=["modeling"];class Sa{execute(e){let{cell:t}=e;return t}revert(e){const{cell:t}=e;return t}}class Aa{constructor(e,t,n){this._eventBus=e,this._elementFactory=t,this._commandStack=n,e.on("table.init",(()=>{!function(e,t){Kt(e,(function(e,n){t.registerHandler(n,e)}))}(this.getHandlers(),n)}))}getHandlers(){return Aa._getHandlers()}static _getHandlers(){return{"row.add":_a,"row.remove":xa,"row.move":Ca,"col.add":Ea,"col.remove":wa,"col.move":Da,"cell.edit":Sa}}_create(e,t){return t instanceof Ht?t:this._elementFactory.create(e,t)}addRow(e,t){const n=this._create("row",e),i={row:n,index:t};return this._commandStack.execute("row.add",i),n}removeRow(e){this._commandStack.execute("row.remove",{row:e})}moveRow(e,t){const n={row:e,index:t};this._commandStack.execute("row.move",n)}addCol(e,t){const n=this._create("col",e),i={col:n,index:t};return this._commandStack.execute("col.add",i),n}removeCol(e){this._commandStack.execute("col.remove",{col:e})}moveCol(e,t){const n={col:e,index:t};this._commandStack.execute("col.move",n)}editCell(e,t){const n={cell:e,...t};this._commandStack.execute("cell.edit",n)}}Aa.$inject=["eventBus","elementFactory","commandStack"];class ja{constructor(e,t,n){this._dmnFactory=e,this._moddle=t,this._modeling=n}execute(e){const{element:t,allowedValues:n}=e;return(0,s.is)(t,"dmn:InputClause")?(t.inputValues?e.oldAllowedValues=t.inputValues.text:Oa(n)||(t.inputValues=this._dmnFactory.create("dmn:UnaryTests",{text:""})),Oa(n)?t.inputValues&&delete t.inputValues:t.inputValues.text=n.join(",")):(t.outputValues&&t?e.oldAllowedValues=t.outputValues.text:Oa(n)||(t.outputValues=this._dmnFactory.create("dmn:UnaryTests",{text:""})),Oa(n)?t.outputValues&&delete t.outputValues:t.outputValues.text=n.join(",")),t}revert(e){const{element:t,oldAllowedValues:n}=e;return(0,s.is)(t,"dmn:InputClause")?n?(t.inputValues||(t.inputValues=this._dmnFactory.create("dmn:UnaryTests",{text:""})),t.inputValues.text=n):delete t.inputValues:n?(t.outputValues||(t.outputValues=this._dmnFactory.create("dmn:UnaryTests",{text:""})),t.outputValues.text=n):delete t.outputValues,t}}function Oa(e){return null===e}ja.$inject=["dmnFactory","moddle","modeling"];const Ra="id";class Ma{constructor(e,t){this._elementRegistry=e,this._moddle=t}execute(e){const{element:t,properties:n}=e,i=(0,s.Cf)(t),{changed:o,oldProperties:r}=this.updateProperties(i,n);return e.oldProperties=r,[...o,t]}revert(e){const{element:t,oldProperties:n}=e;var i=(0,s.Cf)(t),{changed:o}=this.updateProperties(i,n);return[...o,t]}updateProperties(e,t){const n=this._moddle.ids;return(0,ke.TS)(t,((t,i,o)=>{const s=e.get(o);if(ka(i)){if(!ka(s))throw new Error(`non-existing property <${o}>: cannot update values`);let{changed:e,oldProperties:n}=this.updateProperties(s,i);return{changed:[...t.changed,...e,s],oldProperties:{...t.oldProperties,[o]:n}}}var r;return o===Ra&&(r=i,e[Ra]!==r)&&(n.unclaim(e[Ra]),this._elementRegistry.updateId(e,i),n.claim(i,e)),e.set(o,i),{changed:t.changed,oldProperties:{...t.oldProperties,[o]:s}}}),{changed:[],oldProperties:{}})}}function ka(e){return(0,ke.O9)(e)&&(0,ke.Gv)(e)}Ma.$inject=["elementRegistry","moddle"];class Ia{constructor(e){this._moddle=e}execute(e){const t=this._moddle.ids,n=e.id,i=e.element;e.claiming?t.claim(n,i):t.unclaim(n)}revert(e){const t=this._moddle.ids,n=e.id,i=e.element;e.claiming?t.unclaim(n):t.claim(n,i)}}Ia.$inject=["moddle"];class Ta extends Aa{constructor(e,t,n,i){super(e,t,n),this._eventBus=e,this._elementFactory=t,this._commandStack=n,this._sheet=i}getHandlers(){return Ta._getHandlers()}static _getHandlers(){return jn({},super._getHandlers(),{editAllowedValues:ja,"element.updateProperties":Ma,"id.updateClaim":Ia})}editDecisionTableName(e){const t={element:this._sheet.getRoot().businessObject.$parent,properties:{name:e}};this._commandStack.execute("element.updateProperties",t)}editDecisionTableId(e){const t={element:this._sheet.getRoot().businessObject.$parent,properties:{id:e}};this._commandStack.execute("element.updateProperties",t)}editHitPolicy(e,t){const n={element:this._sheet.getRoot().businessObject,properties:{hitPolicy:e,aggregation:t}};this._commandStack.execute("element.updateProperties",n)}updateProperties(e,t){const n={element:e,properties:t};this._commandStack.execute("element.updateProperties",n)}editInputExpression(e,t){const n={element:e,properties:t};this._commandStack.execute("element.updateProperties",n)}editOutputName(e,t){const n={element:e,properties:{name:t}};this._commandStack.execute("element.updateProperties",n)}editInputExpressionTypeRef(e,t){const n={element:e,properties:{typeRef:t}};this._commandStack.execute("element.updateProperties",n)}editOutputTypeRef(e,t){const n={element:e,properties:{typeRef:t}};this._commandStack.execute("element.updateProperties",n)}editCell(e,t){const n={element:e,properties:{text:t}};this._commandStack.execute("element.updateProperties",n)}editAnnotation(e,t){const n={element:e,properties:{description:t}};this._commandStack.execute("element.updateProperties",n)}editAllowedValues(e,t){const n={element:e,allowedValues:t};this._commandStack.execute("editAllowedValues",n)}editExpressionLanguage(e,t){const n={element:e,properties:{expressionLanguage:t}};this._commandStack.execute("element.updateProperties",n)}claimId(e,t){const n={id:e,element:t,claiming:!0};this._commandStack.execute("id.updateClaim",n)}unclaimId(e,t){const n={id:e,element:t};this._commandStack.execute("id.updateClaim",n)}}Ta.$inject=["eventBus","elementFactory","commandStack","sheet"];class Fa extends Se.A{constructor(e,t,n){super(e),this._ids=t.ids,this._modeling=n,this.preExecute(["row.add","col.add"],(e=>{const t=e.context,n=t.row||t.col;this.claimId(n.businessObject),n.cells&&n.cells.forEach((e=>this.claimId(e.businessObject)))}))}claimId(e){e.id&&!this._ids.assigned(e.id)&&this._modeling.claimId(e.id,e),e.$descriptor.properties.forEach((t=>{const n=e[t.name];n&&(vn(n)&&n.forEach((e=>this.claimId(e))),n.$type&&this.claimId(n))}))}}Fa.$inject=["eventBus","moddle","modeling"];class Pa extends Se.A{constructor(e,t){super(e),this._modeling=t,this.preExecute(["row.remove","col.remove"],(e=>{const t=e.context,n=t.row||t.col;this.unclaimId(n.businessObject),n.cells&&n.cells.forEach((e=>this.unclaimId(e.businessObject)))}))}unclaimId(e){e.id&&this._modeling.unclaimId(e.id,e),e.$descriptor.properties.forEach((t=>{const n=e[t.name];n&&(vn(n)&&n.forEach((e=>this.unclaimId(e))),n.$type&&this.unclaimId(n))}))}}Pa.$inject=["eventBus","modeling"];const La={__init__:["dmnUpdater","idChangeBehavior","nameChangeBehavior","modeling"],__depends__:[{__init__:["idClaimBehavior","idUnclaimBehavior"],idClaimBehavior:["type",Fa],idUnclaimBehavior:["type",Pa]},be.A],dmnUpdater:["type",fa],dmnFactory:["type",va],elementFactory:["type",ba],idChangeBehavior:["type",Ie],nameChangeBehavior:["type",Te],modeling:["type",Ta]};class Na extends rn.uA{constructor(e,t){super(e,t),this.changeCellValue=this.changeCellValue.bind(this),this.onElementsChanged=this.onElementsChanged.bind(this)}onElementsChanged(){this.forceUpdate()}componentWillMount(){const{injector:e}=this.context,{cell:t}=this.props,n=this._changeSupport=this.context.changeSupport;this._modeling=e.get("modeling"),n.onElementsChanged(t.id,this.onElementsChanged)}componentWillUnmount(){const{cell:e}=this.props;this._changeSupport.offElementsChanged(e.id,this.onElementsChanged)}changeCellValue(e){const{cell:t}=this.props;this._modeling.editCell(t.businessObject,e)}render(){const{cell:e,rowIndex:t,row:n,col:i,colIndex:o}=this.props,r=(0,s.is)(e,"dmn:UnaryTests"),a=e.businessObject;return(0,rn.sO)(2,ai,{className:r?"input-cell":"output-cell",elementId:e.id,coords:`${t}:${o}`,"data-row-id":n.id,"data-col-id":i.id,children:(0,rn.sO)(2,Ba,{placeholder:r?"-":"",onChange:this.changeCellValue,value:a.text,businessObject:a})})}}class $a extends rn.uA{constructor(e,t){super(e,t),this.state={focussed:!1},this.onFocus=this.onFocus.bind(this),this.onBlur=this.onBlur.bind(this)}onFocus(){this.setState({focussed:!0})}onBlur(){this.setState({focussed:!1})}render(){const{focussed:e}=this.state,t="feel-editor"+(e?" focussed":"");return(0,rn.bF)(1,"div",t,[e&&(0,rn._B)((0,rn.sO)(2,hr,{...this.props,autoFocus:!0,onBlur:this.onBlur})),(0,rn._B)((0,rn.sO)(2,ds,{...this.props,onInput:()=>{},onFocus:this.onFocus}))],0,{onClick:this.onFocus})}}class Ba extends rn.uA{constructor(e,t){super(e,t),this._expressionLanguages=t.injector.get("expressionLanguages"),this._translate=t.injector.get("translate"),this._variableResolver=t.injector.get("variableResolver",!1)}isDefaultExpressionLanguage(e){const{expressionLanguage:t}=e,n=this.getDefaultExpressionLanguage().value;return!t||t===n}getDescription(e){return e.description}getExpressionLanguageLabel(e){const{expressionLanguage:t}=e,n=this.getDefaultExpressionLanguage();return this._expressionLanguages.getLabel(t)||n.label}isScript(){const{businessObject:e}=this.props,t=this.getDefaultExpressionLanguage();return!!this._isInputCell()&&(-1!==e.text.indexOf("\n")||e.expressionLanguage&&e.expressionLanguage!==t)}_isInputCell(){return(0,s.is)(this.props.businessObject,"dmn:UnaryTests")}getDefaultExpressionLanguage(){const e=this._isInputCell()?"inputCell":"outputCell";return this._expressionLanguages.getDefault(e)}getEditor(){return this.isFEEL()?$a:ds}isFEEL(){return"feel"===this.getExpressionLanguage()}getExpressionLanguage(){const{businessObject:e}=this.props;return e.expressionLanguage||this.getDefaultExpressionLanguage().value}_getVariables(){const{businessObject:e}=this.props;return this._variableResolver&&this._variableResolver.getVariables(e)}_getLabel(){return this._isInputCell()?this._translate("Input"):this._translate("Output")}render(){const{businessObject:e,placeholder:t,value:n,onChange:i}=this.props,o=this.getDescription(e),s=this.isDefaultExpressionLanguage(e),r=this.getExpressionLanguageLabel(e),a=this.isScript(),l=this.getEditor(),c=this._getVariables();return(0,rn.bF)(1,"div","cell-editor",[bn(o)&&(0,rn.bF)(1,"div","description-indicator"),(0,rn.sO)(2,l,{label:this._getLabel(),className:a?"script-editor":"",ctrlForNewline:!0,onInput:i,value:n,placeholder:t,variables:c,feelLanguageDialect:"unaryTests"}),!s&&(0,rn.bF)(1,"span","dms-badge dmn-expression-language",[(0,rn.bF)(1,"span","dms-badge-icon dmn-icon-file-code"),(0,rn.bF)(1,"span","dms-badge-label",r,0)],4,{title:this._translate("Expression language: {expressionLanguageLabel}",{expressionLanguageLabel:r})})],0)}}class Va{constructor(e){e.onGetComponent("cell",1500,(({cellType:e})=>{if("rule"===e)return Na}))}}Va.$inject=["components"];const Ua={__depends__:[vs,Fi],__init__:["decisionRulesEditor"],decisionRulesEditor:["type",Va]};class za extends rn.uA{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this.state={top:0,left:0,isVisible:!1,isDisabled:!1,selection:null},Jn(this);const{debounceInput:n}=this;this.onClick=this.onClick.bind(this),this.handleSelectionChanged=this.handleSelectionChanged.bind(this),this.hideAndShowDebounced=this.hideAndShowDebounced.bind(this),this.showDebounced=n(this.showDebounced.bind(this)),this.updatePosition=this.updatePosition.bind(this)}componentDidMount(){const{eventBus:e}=this;e.on("cellSelection.changed",this.handleSelectionChanged),e.on("commandStack.changed",this.updatePosition),e.on("sheet.scroll",this.hideAndShowDebounced)}componentWillUnmount(){const{eventBus:e}=this;e.off("cellSelection.changed",this.handleSelectionChanged),e.off("commandStack.changed",this.updatePosition),e.off("sheet.scroll",this.hideAndShowDebounced)}hideAndShowDebounced(){this.state.isVisible&&(this.hide(),this.showDebounced())}showDebounced(){this.show()}hide(e={}){this.setState({...e,isVisible:!1})}show(e={}){this.setState({...e,isVisible:!0}),this.updatePosition()}handleSelectionChanged({elementId:e}){const{elementRegistry:t,expressionLanguages:n,simpleMode:i}=this,o=t.get(e);if(!o||!i.canSimpleEdit(o))return void this.hide({isDisabled:!1,selection:null});const r=!function(e,t,n){return!t||t===function(e,t){return(0,s.Xy)(e.col)?t.getDefault("inputCell").value:(0,s.Mz)(e.col)?t.getDefault("outputCell").value:void 0}(e,n)}(o,o.businessObject.expressionLanguage,n);this.show({isDisabled:r,selection:o})}updatePosition(){const{selection:e}=this.state,{node:t}=this;if(!e||!t)return;const{renderer:n}=this,i=n.getContainer(),o=i.getBoundingClientRect(),s=Mo(e.id,i).getBoundingClientRect(),r=this.node.getBoundingClientRect(),{scrollLeft:a,scrollTop:l}=function(e){const t=Fn(e,".tjs-table-container");if(!t)return{scrollTop:0,scrollLeft:0};const{scrollLeft:n,scrollTop:i}=t;return{scrollTop:i,scrollLeft:n}}(t),c={};s.left+s.width/2>o.width/2?c.left=-o.left+s.left-r.width+4+a+"px":c.left=-o.left+s.left+s.width-4+a+"px",s.top+s.height/2>o.height/2?c.top=-o.top+s.top-r.height+4+l+"px":c.top=-o.top+s.top-4+l+"px",jn(this.node.style,c)}onClick(){const{eventBus:e}=this,{isDisabled:t}=this.state;if(t)return;const{selection:n}=this,i=n.get();i&&(e.fire("simpleMode.open",{element:i,node:Mo(i.id,this._container)}),this.hide())}render(){const{isDisabled:e,isVisible:t,top:n,left:i}=this.state,o=["simple-mode-button","no-deselect"];return e&&o.push("disabled"),t?(0,rn.bF)(1,"div",o.join(" "),(0,rn.bF)(1,"span","dmn-icon-edit"),2,{onClick:this.onClick,style:{top:n,left:i},title:e?this._translate("Editing not supported for set expression language"):this._translate("Edit")},null,(e=>this.node=e)):null}}za.$inject=["debounceInput","elementRegistry","eventBus","expressionLanguages","renderer","selection","simpleMode"];class Ka{constructor(e,t,n,i,o){this._providers=[],e.onGetComponent("table.before",(()=>za)),i.on("simpleMode.open",(({element:e,node:n})=>{const{left:i,top:s,width:r,height:a}=n.getBoundingClientRect(),l=o.getContainer();t.open({x:i+l.parentNode.scrollLeft,y:s+l.parentNode.scrollTop,width:r,height:a},{contextMenuType:"simple-mode-edit",element:e,offset:{x:4,y:4}})})),i.on("cell.click",(e=>{const{event:t,node:o,id:s}=e;if(function(e){return!e.altKey&&(e.ctrlKey||e.metaKey)}(t)){const t=n.get(s);t&&i.fire("simpleMode.open",{node:o,element:t}),e.preventDefault()}}))}registerProvider(e){this._providers.push(e)}canSimpleEdit(e){return this._providers.reduce(((t,n)=>t||n(e)),!1)}}Ka.$inject=["components","contextMenu","elementRegistry","eventBus","renderer"];const qa={__depends__:[Bs,Po,ji],__init__:["simpleMode"],simpleMode:["type",Ka]},Wa="none";class Ga extends rn.uA{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._modeling=t.injector.get("modeling");const{element:n}=this.props.context,i=!(o=n.businessObject.text)||function(e){return""===e}(o)?"none":"true"===o.trim()?"true":"false"===o.trim()?"false":void 0;var o;this.state={value:i||Wa},this.editCell=this.editCell.bind(this),this.onChange=this.onChange.bind(this)}editCell(e,t){this._modeling.editCell(e,t)}onChange(e){const{element:t}=this.props.context;this.editCell(t.businessObject,e===Wa?"":e),this.setState({value:e})}render(){const{value:e}=this.state,t=[{label:"-",value:Wa},{label:this._translate("Yes"),value:"true"},{label:this._translate("No"),value:"false"}];return(0,rn.bF)(1,"div","simple-boolean-edit context-menu-container",[(0,rn.bF)(1,"h3","dms-heading",this._translate("Edit boolean"),0),(0,rn.bF)(1,"h4","dms-heading",this._translate("Set value"),0),(0,rn.sO)(2,br,{label:this._translate("Boolean value"),noInput:!0,className:"dms-block",onChange:this.onChange,options:t,value:e})],4)}}class Ha{constructor(e,t){t.registerProvider((e=>((0,s.Xy)(e.col)||(0,s.Mz)(e.col))&&"boolean"===Xa(e))),e.onGetComponent("context-menu",((e={})=>{if(e.contextMenuType&&"simple-mode-edit"===e.contextMenuType){if(!e.element)return;if("boolean"===Xa(e.element))return Ga}}))}}function Xa(e){return(0,s.Xy)(e.col)?e.col&&e.col.businessObject.inputExpression.typeRef:e.col&&e.col.businessObject.typeRef}Ha.$inject=["components","simpleMode"];const Ja={__depends__:[$r,qa],__init__:["simpleBooleanEdit"],simpleBooleanEdit:["type",Ha]},Ya=/^\d{4}(?:-\d\d){2}$/,Za=/^\[date\("([^"]*)"\)..date\("([^"]*)"\)\]$/,Qa=/^(<|>)\s*date\("([^"]*)"\)$/,el=/^date\("([^"]*)"\)$/;function tl(e){if(!Ya.test(e.trim()))return"Date must match pattern yyyy-MM-dd"}function nl(e,t){return"exact"===e?`date("${t[0]}")`:"before"===e?`< date("${t[0]}")`:"after"===e?`> date("${t[0]}")`:"between"===e?`[date("${t[0]}")..date("${t[1]}")]`:void 0}function il(){const e=new Date;return e.setUTCHours(0,0,0,0),e.toISOString().slice(0,10)}function ol(e){if(!e||""===e.trim())return{type:"exact",date:""};let t=e.match(Za);return t?{type:"between",dates:[t[1],t[2]]}:(t=e.match(Qa),t?{type:"<"===t[1]?"before":"after",date:t[2]}:(t=e.match(el),t?{type:"exact",date:t[1]}:void 0))}const sl="exact",rl="between";class al extends rn.uA{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._modeling=t.injector.get("modeling");const{element:n}=this.props.context,i=ol(n.businessObject.text);if(i){let e;e=i.date?[i.date,""]:i.dates?i.dates:["",""],this.state={type:i.type,dates:e}}else this.state={type:sl,dates:["",""]};const o=t.injector.get("debounceInput");this.debouncedEditCell=o(this.editCell.bind(this)),this.editCell=this.editCell.bind(this),this.onTypeChange=this.onTypeChange.bind(this),this.onSetStartDateTodayClick=this.onSetStartDateTodayClick.bind(this),this.onSetEndDateTodayClick=this.onSetEndDateTodayClick.bind(this),this.onStartDateInput=this.onStartDateInput.bind(this),this.onEndDateInput=this.onEndDateInput.bind(this)}editCell(e,t){this._modeling.editCell(e,t)}onTypeChange(e){const{element:t}=this.props.context,{dates:n}=this.state;this.setState({type:e}),ol(nl(e,n))&&this.editCell(t.businessObject,nl(e,n))}onSetStartDateTodayClick(){const{element:e}=this.props.context,{dates:t,type:n}=this.state,i=il();this.setState({dates:[i,t[1]]}),ol(nl(n,[i,t[1]]))&&this.editCell(e.businessObject,nl(n,[i,t[1]]))}onSetEndDateTodayClick(){const{element:e}=this.props.context,{dates:t,type:n}=this.state,i=il();this.setState({dates:[t[0],i]}),ol(nl(n,[t[0],i]))&&this.editCell(e.businessObject,nl(n,[t[0],i]))}onStartDateInput({value:e}){const{element:t}=this.props.context,{dates:n,type:i}=this.state;this.setState({dates:[e,n[1]]}),this.debouncedEditCell(t.businessObject,nl(i,[e,n[1]]))}onEndDateInput({value:e}){const{element:t}=this.props.context,{dates:n,type:i}=this.state;this.setState({dates:[n[0],e]}),this.debouncedEditCell(t.businessObject,nl(i,[n[0],e]))}render(){const{dates:e,type:t}=this.state,n=[{label:this._translate("Exactly"),value:sl},{label:this._translate("Before"),value:"before"},{label:this._translate("After"),value:"after"},{label:this._translate("Between"),value:rl}];return(0,rn.bF)(1,"div","context-menu-container simple-date-edit",[(0,rn.bF)(1,"h3","dms-heading",this._translate("Edit date"),0),(0,rn.bF)(1,"div","dms-fill-row",(0,rn.sO)(2,br,{label:this._translate("Test type"),noInput:!0,onChange:this.onTypeChange,options:n,value:t}),2),(0,rn.bF)(1,"h4","dms-heading",t===rl?this._translate("Edit start date"):this._translate("Set date"),0),(0,rn.bF)(1,"div",null,[(0,rn.sO)(2,Sr,{label:t===rl?this._translate("Start date"):this._translate("Date"),className:"start-date-input dms-block",onInput:this.onStartDateInput,placeholder:this._translate("e.g. { sample }",{sample:il()}),validate:e=>tl(e)&&this._translate(tl(e)),value:e[0]}),(0,rn.bF)(1,"p","dms-hint",[(0,rn.bF)(1,"button","use-today",this._translate("Use today"),0,{type:"button",onClick:this.onSetStartDateTodayClick}),(0,rn.eW)(".")],4)],4),t===rl&&(0,rn.bF)(1,"h4","dms-heading",this._translate("Edit end date"),0),t===rl&&(0,rn.bF)(1,"div",null,[(0,rn.sO)(2,Sr,{label:this._translate("End date"),className:"end-date-input dms-block",onInput:this.onEndDateInput,placeholder:this._translate("e.g. { sample }",{sample:il()}),validate:e=>tl(e)&&this._translate(tl(e)),value:e[1]}),(0,rn.bF)(1,"p","dms-hint",[(0,rn.bF)(1,"button","use-today",this._translate("Use today"),0,{type:"button",onClick:this.onSetEndDateTodayClick}),(0,rn.eW)(".")],4)],4)],0)}}class ll extends rn.uA{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._modeling=t.injector.get("modeling");const{element:n}=this.props.context,i=ol(n.businessObject.text);this.state={date:i?i.date:""};const o=t.injector.get("debounceInput");this.debouncedEditCell=o(this.editCell.bind(this)),this.editCell=this.editCell.bind(this),this.onClick=this.onClick.bind(this),this.onInput=this.onInput.bind(this)}editCell(e,t){this._modeling.editCell(e,t)}onClick(){const{element:e}=this.props.context,t=il();this.setState({date:t}),this.editCell(e.businessObject,`date("${t}")`)}onInput({value:e}){const{element:t}=this.props.context;this.setState({date:e}),this.debouncedEditCell(t.businessObject,`date("${e}")`)}render(){const{date:e}=this.state;return(0,rn.bF)(1,"div","context-menu-container simple-date-edit",[(0,rn.bF)(1,"h3","dms-heading",this._translate("Edit date"),0),(0,rn.bF)(1,"h4","dms-heading",this._translate("Set date"),0),(0,rn.bF)(1,"div",null,[(0,rn.sO)(2,Sr,{label:this._translate("Date value"),onInput:this.onInput,placeholder:this._translate("e.g. { example } ",{example:il()}),validate:e=>tl(e)&&this._translate(tl(e)),value:e,className:"dms-block"}),(0,rn.bF)(1,"p","dms-hint",(0,rn.bF)(1,"button","use-today",this._translate("Use today"),0,{type:"button",onClick:this.onClick}),2)],4)],4)}}class cl{constructor(e,t){t.registerProvider((e=>{const t=ul(e);return((0,s.Xy)(e.col)||(0,s.Mz)(e.col))&&dl(t)})),e.onGetComponent("context-menu",((e={})=>{if(e.contextMenuType&&"simple-mode-edit"===e.contextMenuType){if(!e.element)return;if(dl(ul(e.element))){if((0,s.Xy)(e.element.col))return al;if((0,s.Mz)(e.element.col))return ll}}}))}}function ul(e){return(0,s.Xy)(e.col)?e.col&&e.col.businessObject.inputExpression.typeRef:e.col&&e.col.businessObject.typeRef}function dl(e){return"date"===e}cl.$inject=["components","simpleMode"];const pl={__depends__:[$r,qa],__init__:["simpleDateEdit"],simpleDateEdit:["type",cl]},hl=/^\d{4}(?:-\d\d){2}T(?:\d\d:){2}\d\d(?:Z|(?:[@+-][^")]+))?$/,ml=/^\[date and time\("([^"]*)"\)..date and time\("([^"]*)"\)\]$/,gl=/^(<|>)\s*date and time\("([^"]*)"\)$/,fl=/^date and time\("([^"]*)"\)$/;function yl(e){if(!hl.test(e.trim()))return"Date and time must match pattern yyyy-MM-ddTHH:mm:ss[time zone]"}function vl(e,t){return"exact"===e?`date and time("${t[0]}")`:"before"===e?`< date and time("${t[0]}")`:"after"===e?`> date and time("${t[0]}")`:"between"===e?`[date and time("${t[0]}")..date and time("${t[1]}")]`:void 0}function bl(){const e=new Date;return e.setUTCHours(0,0,0,0),e.toISOString().replace(".000Z","Z")}function _l(e){if(!e||""===e.trim())return{type:"exact",date:""};let t=e.match(ml);return t?{type:"between",dates:[t[1],t[2]]}:(t=e.match(gl),t?{type:"<"===t[1]?"before":"after",date:t[2]}:(t=e.match(fl),t?{type:"exact",date:t[1]}:void 0))}const xl="exact",Cl="between";class El extends rn.uA{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._modeling=t.injector.get("modeling");const{element:n}=this.props.context,i=_l(n.businessObject.text);if(i){let e;e=i.date?[i.date,""]:i.dates?i.dates:["",""],this.state={type:i.type,dates:e}}else this.state={type:xl,dates:["",""]};const o=t.injector.get("debounceInput");this.debouncedEditCell=o(this.editCell.bind(this)),this.editCell=this.editCell.bind(this),this.onTypeChange=this.onTypeChange.bind(this),this.onSetStartDateTodayClick=this.onSetStartDateTodayClick.bind(this),this.onSetEndDateTodayClick=this.onSetEndDateTodayClick.bind(this),this.onStartDateInput=this.onStartDateInput.bind(this),this.onEndDateInput=this.onEndDateInput.bind(this)}editCell(e,t){this._modeling.editCell(e,t)}onTypeChange(e){const{element:t}=this.props.context,{dates:n}=this.state;this.setState({type:e}),_l(vl(e,n))&&this.editCell(t.businessObject,vl(e,n))}onSetStartDateTodayClick(){const{element:e}=this.props.context,{dates:t,type:n}=this.state,i=bl();this.setState({dates:[i,t[1]]}),_l(vl(n,[i,t[1]]))&&this.editCell(e.businessObject,vl(n,[i,t[1]]))}onSetEndDateTodayClick(){const{element:e}=this.props.context,{dates:t,type:n}=this.state,i=bl();this.setState({dates:[t[0],i]}),_l(vl(n,[t[0],i]))&&this.editCell(e.businessObject,vl(n,[t[0],i]))}onStartDateInput({value:e}){const{element:t}=this.props.context,{dates:n,type:i}=this.state;this.setState({dates:[e,n[1]]}),this.debouncedEditCell(t.businessObject,vl(i,[e,n[1]]))}onEndDateInput({value:e}){const{element:t}=this.props.context,{dates:n,type:i}=this.state;this.setState({dates:[n[0],e]}),this.debouncedEditCell(t.businessObject,vl(i,[n[0],e]))}render(){const{dates:e,type:t}=this.state,n=[{label:this._translate("Exactly"),value:xl},{label:this._translate("Before"),value:"before"},{label:this._translate("After"),value:"after"},{label:this._translate("Between"),value:Cl}];return(0,rn.bF)(1,"div","context-menu-container simple-date-edit",[(0,rn.bF)(1,"h3","dms-heading",this._translate("Edit date and time"),0),(0,rn.bF)(1,"div","dms-fill-row",(0,rn.sO)(2,br,{label:this._translate("Test type"),noInput:!0,onChange:this.onTypeChange,options:n,value:t}),2),(0,rn.bF)(1,"h4","dms-heading",t===Cl?this._translate("Edit start date and time"):this._translate("Set date and time"),0),(0,rn.bF)(1,"div",null,[(0,rn.sO)(2,Sr,{label:t===Cl?this._translate("Start date and time"):this._translate("Date and time"),className:"start-date-input dms-block",onInput:this.onStartDateInput,placeholder:this._translate("e.g. { sample }",{sample:bl()}),validate:e=>yl(e)&&this._translate(yl(e)),value:e[0]}),(0,rn.bF)(1,"p","dms-hint",(0,rn.bF)(1,"button","use-today",this._translate("Use today"),0,{type:"button",onClick:this.onSetStartDateTodayClick}),2)],4),t===Cl&&(0,rn.bF)(1,"h4","dms-heading",this._translate("Edit end date and time"),0),t===Cl&&(0,rn.bF)(1,"div",null,[(0,rn.sO)(2,Sr,{label:this._translate("End date and time"),className:"end-date-input dms-block",onInput:this.onEndDateInput,placeholder:this._translate("e.g. { sample }",{sample:bl()}),validate:e=>yl(e)&&this._translate(yl(e)),value:e[1]}),(0,rn.bF)(1,"p","dms-hint",(0,rn.bF)(1,"button","use-today",this._translate("Use today"),0,{type:"button",onClick:this.onSetEndDateTodayClick}),2)],4)],0)}}class wl extends rn.uA{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._modeling=t.injector.get("modeling");const{element:n}=this.props.context,i=_l(n.businessObject.text);this.state={date:i?i.date:""};const o=t.injector.get("debounceInput");this.debouncedEditCell=o(this.editCell.bind(this)),this.editCell=this.editCell.bind(this),this.onClick=this.onClick.bind(this),this.onInput=this.onInput.bind(this)}editCell(e,t){this._modeling.editCell(e,t)}onClick(){const{element:e}=this.props.context,t=bl();this.setState({date:t}),this.editCell(e.businessObject,`date and time("${t}")`)}onInput({value:e}){const{element:t}=this.props.context;this.setState({date:e}),this.debouncedEditCell(t.businessObject,`date and time("${e}")`)}render(){const{date:e}=this.state;return(0,rn.bF)(1,"div","context-menu-container simple-date-edit",[(0,rn.bF)(1,"h3","dms-heading",this._translate("Edit date and time"),0),(0,rn.bF)(1,"h4","dms-heading",this._translate("Set date and time"),0),(0,rn.bF)(1,"div",null,[(0,rn.sO)(2,Sr,{label:this._translate("Date and time value"),onInput:this.onInput,placeholder:this._translate("e.g. { sample }",{sample:bl()}),validate:e=>yl(e)&&this._translate(yl(e)),value:e,className:"dms-block"}),(0,rn.bF)(1,"p","dms-hint",(0,rn.bF)(1,"button","use-today",this._translate("Use today"),0,{type:"button",onClick:this.onClick}),2)],4)],4)}}class Dl{constructor(e,t){t.registerProvider((e=>{const t=Sl(e);return((0,s.Xy)(e.col)||(0,s.Mz)(e.col))&&Al(t)})),e.onGetComponent("context-menu",((e={})=>{if(e.contextMenuType&&"simple-mode-edit"===e.contextMenuType){if(!e.element)return;if(Al(Sl(e.element))){if((0,s.Xy)(e.element.col))return El;if((0,s.Mz)(e.element.col))return wl}}}))}}function Sl(e){return(0,s.Xy)(e.col)?e.col&&e.col.businessObject.inputExpression.typeRef:e.col&&e.col.businessObject.typeRef}function Al(e){return"dateTime"===e}Dl.$inject=["components","simpleMode"];const jl={__depends__:[$r,qa],__init__:["simpleDateTimeEdit"],simpleDateTimeEdit:["type",Dl]},Ol={equals:"=",less:"<",lessEquals:"<=",greater:">",greaterEquals:">="};function Rl(e,t){return"equals"===e?`duration("${t}")`:`${Ol[e]} duration("${t}")`}function Ml(e,t,n,i){return`${"exclude"===n?"]":"["}duration("${e}")..duration("${t}")${"exclude"===i?"[":"]"}`}function kl(e){const t=/^duration\("([^"]*)"\)$/.exec(e);return t&&t[1]}function Il(e,t){const{groups:n}=e.exec(t)||{groups:{}};return n}const Tl={yearMonthDuration:"Must match PnYnM",dayTimeDuration:"Must match PnDTnH"};class Fl extends rn.uA{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._type=e.type,this.onInput=this.onInput.bind(this),this.validate=this.validate.bind(this),this.state={value:e.value}}onInput({value:e}){this.setState({value:e}),this.props.onInput(e)}validate(e){if(!function(e,t){return"yearMonthDuration"===e?function(e){return/^P(\d+Y\d+M|\d+Y|\d+M)$/.test(e)}(t):"dayTimeDuration"===e?function(e){return/^P(\d+DT\d+H|\d+D|T\d+H)$/.test(e)}(t):void 0}(this._type,e))return this._translate(Tl[this._type])}_getPlaceholder(){if("yearMonthDuration"===this._type)return this._translate("e.g. { sample }",{sample:"P1Y2M"});"dayTimeDuration"===this._type&&this._translate("e.g. { sample }",{sample:"P1DT2H"})}render(){return(0,rn.sO)(2,Sr,{label:this.props.label,type:"text",onInput:this.onInput,placeholder:this._getPlaceholder(),validate:this.validate,value:this.state.value,className:this.props.className})}}const Pl="comparison",Ll="range";class Nl extends rn.uA{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._modeling=t.injector.get("modeling");const{element:n}=this.props.context;this._type=function(e){return e.col.businessObject.inputExpression.typeRef}(n);const i=function(e){if(!e||""===e.trim())return{type:"comparison",values:[]};const t=function(e){const t=kl(e);if(t)return{type:"comparison",operator:"equals",values:[t]};const{operator:n,value:i}=Il(/^(?<operator>=|(:?<|>)=?)\s*duration\("(?<value>[^"]*)"\)$/,e);return n&&i?{type:"comparison",values:[i],operator:(o=n,Dn(Ol).filter((e=>o===Ol[e]))[0])}:void 0;var o}(e);if(t)return t;return function(e){const{start:t,end:n,firstValue:i,secondValue:o}=Il(/^(?<start>[[\]])duration\("(?<firstValue>[^"]*)"\)\.\.duration\("(?<secondValue>[^"]*)"\)(?<end>[[\]])$/,e);if(t&&n)return{type:"range",values:[i,o],start:"]"===t?"exclude":"include",end:"["===n?"exclude":"include"}}(e)||void 0}(n.businessObject.text,this._type);this.state=i?{type:i.type,comparisonOperator:i.operator||"equals",startValue:i.values[0]||"",endValue:i.values[1]||"",rangeStartType:i.start||"include",rangeEndType:i.end||"include"}:{type:Pl,comparisonOperator:"equals",startValue:"",endValue:"",rangeStartType:"include",rangeEndType:"include"};const o=t.injector.get("debounceInput");this.debouncedEditCell=o(this.editCell.bind(this)),this.editCell=this.editCell.bind(this),this.onComparisonOperatorChange=this.onComparisonOperatorChange.bind(this),this.onComparisonValueChange=this.onComparisonValueChange.bind(this),this.onTypeChange=this.onTypeChange.bind(this),this.onRangeStartTypeChange=this.onRangeStartTypeChange.bind(this),this.onRangeStartValueChange=this.onRangeStartValueChange.bind(this),this.onRangeEndTypeChange=this.onRangeEndTypeChange.bind(this),this.onRangeEndValueChange=this.onRangeEndValueChange.bind(this)}editCell(e,t){this._modeling.editCell(e,t)}onTypeChange(e){const{element:t}=this.props.context,{comparisonOperator:n,startValue:i,endValue:o,rangeStartType:s,rangeEndType:r}=this.state;e===Pl?this.editCell(t.businessObject,Rl(n,i)):this.editCell(t.businessObject,Ml(i,o,s,r)),this.setState({type:e})}onComparisonOperatorChange(e){const{element:t}=this.props.context,{type:n,startValue:i}=this.state;n===Pl&&(this.editCell(t.businessObject,Rl(e,i)),this.setState({comparisonOperator:e}))}onComparisonValueChange(e){const{element:t}=this.props.context,{type:n,comparisonOperator:i}=this.state;n===Pl&&(this.debouncedEditCell(t.businessObject,Rl(i,e)),this.setState({startValue:e}))}onRangeStartTypeChange(e){const{element:t}=this.props.context,{type:n,startValue:i,endValue:o,rangeEndType:s}=this.state;n===Ll&&(this.editCell(t.businessObject,Ml(i,o,e,s)),this.setState({rangeStartType:e}))}onRangeStartValueChange(e){const{element:t}=this.props.context,{type:n,endValue:i,rangeStartType:o,rangeEndType:s}=this.state;n===Ll&&(this.editCell(t.businessObject,Ml(e,i,o,s)),this.setState({startValue:e}))}onRangeEndTypeChange(e){const{element:t}=this.props.context,{type:n,startValue:i,endValue:o,rangeStartType:s}=this.state;n===Ll&&(this.editCell(t.businessObject,Ml(i,o,s,e)),this.setState({rangeEndType:e}))}onRangeEndValueChange(e){const{element:t}=this.props.context,{type:n,startValue:i,rangeStartType:o,rangeEndType:s}=this.state;n===Ll&&(this.editCell(t.businessObject,Ml(i,e,o,s)),this.setState({endValue:e}))}renderComparison(e,t){const n=[{label:this._translate("Equals"),value:"equals"},{label:this._translate("Less"),value:"less"},{label:this._translate("Less or equals"),value:"lessEquals"},{label:this._translate("Greater"),value:"greater"},{label:this._translate("Greater or equals"),value:"greaterEquals"}];return(0,rn.bF)(1,"div","comparison",[(0,rn.bF)(1,"h4","dms-heading",(0,rn.eW)("Value"),2),(0,rn.bF)(1,"div","dms-fill-row dms-input-duration-edit-row",[(0,rn.sO)(2,br,{label:this._translate("Comparison operator"),noInput:!0,onChange:this.onComparisonOperatorChange,options:n,value:e}),(0,rn.eW)("Â "),(0,rn.sO)(2,Fl,{label:this._translate("Duration value"),type:this._type,className:"comparison-duration-input",onInput:this.onComparisonValueChange,value:t})],4)],4)}renderRange(e,t,n,i){const o=[{label:this._translate("Include"),value:"include"},{label:this._translate("Exclude"),value:"exclude"}];return(0,rn.bF)(1,"div","range",[(0,rn.bF)(1,"h4","dms-heading",this._translate("Start value"),0),(0,rn.bF)(1,"div","dms-fill-row dms-input-duration-edit-row",[(0,rn.sO)(2,br,{label:this._translate("Range start operator"),noInput:!0,onChange:this.onRangeStartTypeChange,options:o,value:n}),(0,rn.eW)("Â "),(0,rn.sO)(2,Fl,{label:this._translate("Range start value"),type:this._type,className:"range-start-duration-input",onInput:this.onRangeStartValueChange,value:e})],4),(0,rn.bF)(1,"h4","dms-heading",this._translate("End value"),0),(0,rn.bF)(1,"div","dms-fill-row dms-input-duration-edit-row",[(0,rn.sO)(2,br,{label:this._translate("Range end operator"),noInput:!0,onChange:this.onRangeEndTypeChange,options:o,value:i}),(0,rn.eW)("Â "),(0,rn.sO)(2,Fl,{label:this._translate("Range end value"),type:this._type,className:"range-end-duration-input",onInput:this.onRangeEndValueChange,value:t})],4)],4)}render(){const{type:e,comparisonOperator:t,startValue:n,endValue:i,rangeStartType:o,rangeEndType:s}=this.state,r=[{label:this._translate("Comparison"),value:Pl},{label:this._translate("Range"),value:Ll}];return(0,rn.bF)(1,"div","context-menu-container simple-duration-edit",[(0,rn.bF)(1,"h3","dms-heading",this._translate("Edit duration"),0),(0,rn.bF)(1,"div","dms-fill-row",(0,rn.sO)(2,br,{label:this._translate("Test type"),noInput:!0,onChange:this.onTypeChange,options:r,value:e}),2),e===Pl&&this.renderComparison(t,n),e===Ll&&this.renderRange(n,i,o,s)],0)}}class $l extends rn.uA{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._modeling=t.injector.get("modeling");const{element:n}=this.props.context;this._type=function(e){return e.col.businessObject.typeRef}(n);const i=t.injector.get("debounceInput");this.debouncedEditCell=i(this.editCell.bind(this)),this.editCell=this.editCell.bind(this),this.onInput=this.onInput.bind(this)}editCell(e,t){this._modeling.editCell(e,t)}onInput(e){const{element:t}=this.props.context;this.debouncedEditCell(t.businessObject,`duration("${e}")`)}render(){const e=kl(this.props.context.element.businessObject.text,this._type);return(0,rn.bF)(1,"div","context-menu-container simple-duration-edit",[(0,rn.bF)(1,"h3","dms-heading",this._translate("Edit duration"),0),(0,rn.bF)(1,"h4","dms-heading",this._translate("Set duration"),0),(0,rn.sO)(2,Fl,{label:this._translate("Duration value"),onInput:this.onInput,value:e,type:this._type,className:"dms-block"})],4)}}class Bl{constructor(e,t){t.registerProvider((e=>{const t=Vl(e);return((0,s.Xy)(e.col)||(0,s.Mz)(e.col))&&zl(t)})),e.onGetComponent("context-menu",((e={})=>{if(e.contextMenuType&&"simple-mode-edit"===e.contextMenuType){if(!e.element)return;if(zl(Vl(e.element))){if((0,s.Xy)(e.element.col))return Nl;if((0,s.Mz)(e.element.col))return $l}}}))}}function Vl(e){return(0,s.Xy)(e.col)?e.col&&e.col.businessObject.inputExpression.typeRef:e.col&&e.col.businessObject.typeRef}Bl.$inject=["components","simpleMode"];const Ul=["yearMonthDuration","dayTimeDuration"];function zl(e){return Ul.includes(e)}const Kl={__depends__:[$r,qa],__init__:["simpleDurationEdit"],simpleDurationEdit:["type",Bl]},ql=/^(-?(?:[0-9]|\.[0-9])+)$|^((?:<|>|=){0,2})\s*(-?(?:[0-9]|\.[0-9])+)$/,Wl=/^(\[|\]){1}(-?(?:[0-9]|\.[0-9])+){1,}\.\.(-?(?:[0-9]|\.[0-9])+){1,}(\[|\]){1}$/,Gl={equals:"=",less:"<",lessEquals:"<=",greater:">",greaterEquals:">="};function Hl(e){return Dn(Gl).filter((t=>e===Gl[t]))[0]}function Xl(e){if(!e||function(e){return""===e}(e.trim()))return{type:"comparison"};const t=e.match(ql),n=e.match(Wl);if(t){if(function(e){return e[0]&&e[1]&&!e[2]&&!e[3]}(t))return{type:"comparison",value:parseFloat(t[1]),operator:"equals"};if(function(e){return e[0]&&!e[1]&&e[2]&&e[3]}(t))return{type:"comparison",value:parseFloat(t[3]),operator:Hl(t[2])}}else if(n)return{type:"range",values:[n[2],n[3]].map((e=>parseFloat(e))),start:"]"===n[1]?"exclude":"include",end:"["===n[4]?"exclude":"include"}}function Jl(e,t){return"equals"===e?`${t}`:`${Gl[e]} ${t}`}function Yl(e,t,n,i){return`${"exclude"===n?"]":"["}${e}..${t}${"exclude"===i?"[":"]"}`}const Zl="comparison",Ql="range";class ec extends rn.uA{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._modeling=t.injector.get("modeling");const{element:n}=this.props.context,i=Xl(n.businessObject.text);this.state=i?{type:i.type,comparisonOperator:i.operator||"equals",comparisonValue:i.value||0,rangeStartValue:i.values?i.values[0]:0,rangeEndValue:i.values?i.values[1]:0,rangeStartType:i.start||"include",rangeEndType:i.end||"include"}:{type:Zl,comparisonOperator:"equals",comparisonValue:0,rangeStartValue:0,rangeEndValue:0,rangeStartType:"include",rangeEndType:"include"};const o=t.injector.get("debounceInput");this.debouncedEditCell=o(this.editCell.bind(this)),this.editCell=this.editCell.bind(this),this.onComparisonOperatorChange=this.onComparisonOperatorChange.bind(this),this.onComparisonValueChange=this.onComparisonValueChange.bind(this),this.onTypeChange=this.onTypeChange.bind(this),this.onRangeStartTypeChange=this.onRangeStartTypeChange.bind(this),this.onRangeStartValueChange=this.onRangeStartValueChange.bind(this),this.onRangeEndTypeChange=this.onRangeEndTypeChange.bind(this),this.onRangeEndValueChange=this.onRangeEndValueChange.bind(this)}editCell(e,t){this._modeling.editCell(e,t)}onTypeChange(e){const{element:t}=this.props.context,{comparisonOperator:n,comparisonValue:i,rangeStartValue:o,rangeEndValue:s,rangeStartType:r,rangeEndType:a}=this.state;e===Zl?this.editCell(t.businessObject,Jl(n,i)):this.editCell(t.businessObject,Yl(o,s,r,a)),this.setState({type:e})}onComparisonOperatorChange(e){const{element:t}=this.props.context,{type:n,comparisonValue:i}=this.state;n===Zl&&(this.editCell(t.businessObject,Jl(e,i)),this.setState({comparisonOperator:e}))}onComparisonValueChange(e){const{element:t}=this.props.context,{type:n,comparisonOperator:i}=this.state;n===Zl&&(this.debouncedEditCell(t.businessObject,Jl(i,e)),this.setState({comparisonValue:e}))}onRangeStartTypeChange(e){const{element:t}=this.props.context,{type:n,rangeStartValue:i,rangeEndValue:o,rangeEndType:s}=this.state;n===Ql&&(this.editCell(t.businessObject,Yl(i,o,e,s)),this.setState({rangeStartType:e}))}onRangeStartValueChange(e){const{element:t}=this.props.context,{type:n,rangeEndValue:i,rangeStartType:o,rangeEndType:s}=this.state;n===Ql&&(this.editCell(t.businessObject,Yl(e,i,o,s)),this.setState({rangeStartValue:e}))}onRangeEndTypeChange(e){const{element:t}=this.props.context,{type:n,rangeStartValue:i,rangeEndValue:o,rangeStartType:s}=this.state;n===Ql&&(this.editCell(t.businessObject,Yl(i,o,s,e)),this.setState({rangeEndType:e}))}onRangeEndValueChange(e){const{element:t}=this.props.context,{type:n,rangeStartValue:i,rangeStartType:o,rangeEndType:s}=this.state;n===Ql&&(this.editCell(t.businessObject,Yl(i,e,o,s)),this.setState({rangeEndValue:e}))}renderComparison(e,t){const n=[{label:this._translate("Equals"),value:"equals"},{label:this._translate("Less"),value:"less"},{label:this._translate("Less or equals"),value:"lessEquals"},{label:this._translate("Greater"),value:"greater"},{label:this._translate("Greater or equals"),value:"greaterEquals"}];return(0,rn.bF)(1,"div","comparison",[(0,rn.bF)(1,"h4","dms-heading",this._translate("Value"),0),(0,rn.bF)(1,"div","dms-fill-row",[(0,rn.sO)(2,br,{label:this._translate("Comparison operator"),noInput:!0,onChange:this.onComparisonOperatorChange,options:n,value:e}),(0,rn.eW)("Â "),(0,rn.sO)(2,or,{label:this._translate("Value"),className:"comparison-number-input",onInput:this.onComparisonValueChange,type:"number",value:t})],4)],4)}renderRange(e,t,n,i){const o=[{label:this._translate("Include"),value:"include"},{label:this._translate("Exclude"),value:"exclude"}];return(0,rn.bF)(1,"div","range",[(0,rn.bF)(1,"h4","dms-heading",this._translate("Start value"),0),(0,rn.bF)(1,"div","dms-fill-row",[(0,rn.sO)(2,br,{label:this._translate("Start value"),noInput:!0,onChange:this.onRangeStartTypeChange,options:o,value:n}),(0,rn.eW)("Â "),(0,rn.sO)(2,or,{className:"range-start-number-input",onInput:this.onRangeStartValueChange,type:"number",value:e})],4),(0,rn.bF)(1,"h4","dms-heading",this._translate("End value"),0),(0,rn.bF)(1,"div","dms-fill-row",[(0,rn.sO)(2,br,{label:this._translate("End value"),noInput:!0,onChange:this.onRangeEndTypeChange,options:o,value:i}),(0,rn.eW)("Â "),(0,rn.sO)(2,or,{className:"range-end-number-input",onInput:this.onRangeEndValueChange,type:"number",value:t})],4)],4)}render(){const{type:e,comparisonOperator:t,comparisonValue:n,rangeStartValue:i,rangeEndValue:o,rangeStartType:s,rangeEndType:r}=this.state,a=[{label:this._translate("Comparison"),value:Zl},{label:this._translate("Range"),value:Ql}];return(0,rn.bF)(1,"div","context-menu-container simple-number-edit",[(0,rn.bF)(1,"h3","dms-heading",this._translate("Edit number"),0),(0,rn.bF)(1,"div","dms-fill-row",(0,rn.sO)(2,br,{label:this._translate("Test type"),noInput:!0,onChange:this.onTypeChange,options:a,value:e}),2),e===Zl&&this.renderComparison(t,n),e===Ql&&this.renderRange(i,o,s,r)],0)}}class tc extends rn.uA{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._modeling=t.injector.get("modeling");const{element:n}=this.props.context,i=Xl(n.businessObject.text);this.state=i?{value:i.value}:{value:""};const o=t.injector.get("debounceInput");this.debouncedEditCell=o(this.editCell.bind(this)),this.editCell=this.editCell.bind(this),this.onInput=this.onInput.bind(this)}editCell(e,t){this._modeling.editCell(e,t)}onInput(e){const{element:t}=this.props.context;this.debouncedEditCell(t.businessObject,e),this.setState({value:e})}render(){const{value:e}=this.state;return(0,rn.bF)(1,"div","context-menu-container simple-number-edit",[(0,rn.bF)(1,"h3","dms-heading",this._translate("Edit number"),0),(0,rn.bF)(1,"h4","dms-heading",this._translate("Set value"),0),(0,rn.sO)(2,or,{onInput:this.onInput,type:"number",value:e})],4)}}class nc{constructor(e,t){t.registerProvider((e=>{const t=ic(e);return((0,s.Xy)(e.col)||(0,s.Mz)(e.col))&&sc(t)})),e.onGetComponent("context-menu",((e={})=>{if(e.contextMenuType&&"simple-mode-edit"===e.contextMenuType){if(!e.element)return;if(sc(ic(e.element))){if((0,s.Xy)(e.element.col))return ec;if((0,s.Mz)(e.element.col))return tc}}}))}}function ic(e){return(0,s.Xy)(e.col)?e.col&&e.col.businessObject.inputExpression.typeRef:e.col&&e.col.businessObject.typeRef}nc.$inject=["components","simpleMode"];const oc=["number","integer","long","double"];function sc(e){return oc.includes(e)}const rc={__depends__:[$r,qa],__init__:["simpleNumberEdit"],simpleNumberEdit:["type",nc]};function ac(e){if(!e||lc(e.trim()))return{type:"disjunction",values:[]};let t=e.split(",");const n={type:"disjunction",values:[]};let i="";if(t.forEach((e=>{i+=e,/^"[^"]*"$/.test(i.trim())?(n.values.push(i.trim()),i=""):i+=","})),!i)return n;n.type="negation",n.values=[],i="";const o=e.match(/^\s*not\((.*)\)\s*$/);return o&&(t=o[1].split(","),t.forEach((e=>{i+=e,/^"[^"]*"$/.test(i.trim())?(n.values.push(i.trim()),i=""):i+=","})),!i)?n:void 0}function lc(e){return""===e}const cc="disjunction",uc="negation";class dc extends rn.uA{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._modeling=t.injector.get("modeling");let n=ac(e.context.element.businessObject.text);n||(n={values:[],type:cc});const i=function(e){const t=(0,s.Xy)(e)?e.inputValues:e.outputValues;return!t||lc(t.text)?[]:t.text.split(",").map((e=>e.trim()))}(e.context.element.col.businessObject),o=n.values.filter((e=>!hc(i,e))),r=(0,s.Xy)(e.context.element.col);let a=i.map((e=>({value:e,isChecked:hc(n.values,e),isRemovable:!1,group:this._translate("Predefined values")})));r&&(a=a.concat(o.map((e=>({value:e,isChecked:!0,isRemovable:!0,group:this._translate("Custom values")})))));let l="";r||!n.values.length||hc(i,n.values[0])||(l=n.values[0]),this.state={items:a,unaryTestsType:n.type,inputValue:l,isOutputValueInputChecked:""!==l};const c=t.injector.get("debounceInput");this.debouncedEditCell=c(this.editCell.bind(this)),this.editCell=this.editCell.bind(this),this.addUnaryTestsListItem=this.addUnaryTestsListItem.bind(this),this.onInput=this.onInput.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onOutputValueInputClick=this.onOutputValueInputClick.bind(this),this.onUnaryTestsListChanged=this.onUnaryTestsListChanged.bind(this),this.onUnaryTestsTypeChange=this.onUnaryTestsTypeChange.bind(this)}editCell(e,t){this._modeling.editCell(e,t)}onUnaryTestsTypeChange(e){const{items:t}=this.state,n=pc(t),{element:i}=this.props.context;e===cc?(this.editCell(i.businessObject,n.join(",")),this.setState({unaryTestsType:cc})):(this.editCell(i.businessObject,`not(${n.join(",")})`),this.setState({unaryTestsType:uc}))}onUnaryTestsListChanged(e){const t=pc(e),{element:n}=this.props.context,{unaryTestsType:i}=this.state;i===cc?this.editCell(n.businessObject,t.join(",")):this.editCell(n.businessObject,`not(${t.join(",")})`),this.setState({items:e,isOutputValueInputChecked:!1})}onOutputValueInputClick(){const{element:e}=this.props.context,{inputValue:t,items:n}=this.state,i=ac(t);!i||i.values.length>1||(this.editCell(e.businessObject,`${i.values.join("")}`),this.setState({items:n.map((e=>(e.isChecked=!1,e))),isOutputValueInputChecked:!0}))}onInput({isValid:e,value:t}){const{isOutputValueInputChecked:n}=this.state;this.setState({inputValue:t});const{element:i}=this.props.context;!(0,s.Xy)(i)&&e&&n&&this.debouncedEditCell(i.businessObject,t)}onKeyDown({isValid:e,event:t}){if(13!==t.keyCode)return;const{element:n}=this.props.context,i=(0,s.Xy)(n.col);!i&&e||(t.stopPropagation(),t.preventDefault()),e&&(i?this.addUnaryTestsListItem():this.onOutputValueInputClick())}addUnaryTestsListItem(){const{inputValue:e,items:t,unaryTestsType:n}=this.state,i=ac(e);if(!i)return;const{element:o}=this.props.context,s=pc(t),r=[].concat(s,i.values);n===cc?this.editCell(o.businessObject,r.join(",")):this.editCell(o.businessObject,`not(${r.join(",")})`);const a=t.concat(i.values.map((e=>({value:e,isChecked:!0,isRemovable:!0,group:this._translate("Custom values")}))));this.setState({items:a,inputValue:""})}render(){const{element:e}=this.props.context,{inputValue:t,isOutputValueInputChecked:n,items:i,unaryTestsType:o}=this.state,r=[{label:this._translate("Match one"),value:cc},{label:this._translate("Match none"),value:uc}],a=(0,s.Xy)(e.col),l=o===uc,c=!a&&i.length>0;return(0,rn.bF)(1,"div","simple-string-edit context-menu-container",[(0,rn.bF)(1,"h3","dms-heading",this._translate("Edit string"),0),a&&(0,rn.bF)(1,"p",null,(0,rn.sO)(2,br,{label:this._translate("String value"),noInput:!0,onChange:this.onUnaryTestsTypeChange,options:r,value:l?uc:cc},null,(e=>this.selectNode=e)),2),(0,rn.sO)(2,Dr,{onChange:this.onUnaryTestsListChanged,items:i,type:a?"checkbox":"radio"}),a?(0,rn.bF)(1,"h4","dms-heading",this._translate("Add values"),0):(0,rn.bF)(1,"h4","dms-heading",this._translate("Set value"),0),(0,rn.bF)(1,"div","dms-fill-row",[c&&(0,rn.bF)(64,"input","cursor-pointer",null,1,{checked:n,onClick:this.onOutputValueInputClick,type:"radio",style:{marginRight:"8px"}}),(0,rn.sO)(2,Sr,{label:a?this._translate("Values"):this._translate("Value"),className:"dms-block",onKeyDown:this.onKeyDown,onInput:this.onInput,placeholder:a?this._translate('"value", "value", ...'):this._translate('"value"'),type:"text",validate:e=>{if(!ac(e))return this._translate("Strings must be in double quotes")},value:t})],0)],0)}}function pc(e){return e.filter((e=>e.isChecked)).map((e=>e.value))}function hc(e,t){return-1!==e.indexOf(t)}class mc{constructor(e,t){t.registerProvider((e=>((0,s.Xy)(e.col)||(0,s.Mz)(e.col))&&"string"===gc(e))),e.onGetComponent("context-menu",((e={})=>{if(e.contextMenuType&&"simple-mode-edit"===e.contextMenuType){if(!e.element)return;if("string"===gc(e.element))return dc}}))}}function gc(e){return(0,s.Xy)(e.col)?e.col&&e.col.businessObject.inputExpression.typeRef:e.col&&e.col.businessObject.typeRef}mc.$inject=["components","simpleMode"];const fc={__depends__:[$r,qa],__init__:["simpleStringEdit"],simpleStringEdit:["type",mc]},yc=/^(?:\d\d:){2}\d\d(?:Z|(?:[@+-][^")]+))?$/,vc=/^\[time\("([^"]*)"\)..time\("([^"]*)"\)\]$/,bc=/^(<|>)\s*time\("([^"]*)"\)$/,_c=/^time\("([^"]*)"\)$/;function xc(e){if(!yc.test(e.trim()))return"Time must match pattern hh:mm:ss[time zone]"}function Cc(e,t){return"exact"===e?`time("${t[0]}")`:"before"===e?`< time("${t[0]}")`:"after"===e?`> time("${t[0]}")`:"between"===e?`[time("${t[0]}")..time("${t[1]}")]`:void 0}function Ec(){return(new Date).toISOString().slice(11,-5)+"Z"}function wc(e){if(!e||""===e.trim())return{type:"exact",time:""};let t=e.match(vc);return t?{type:"between",times:[t[1],t[2]]}:(t=e.match(bc),t?{type:"<"===t[1]?"before":"after",time:t[2]}:(t=e.match(_c),t?{type:"exact",time:t[1]}:void 0))}const Dc="exact",Sc="between";class Ac extends rn.uA{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._modeling=t.injector.get("modeling");const{element:n}=this.props.context,i=wc(n.businessObject.text);if(i){let e;e=i.time?[i.time,""]:i.times?i.times:["",""],this.state={type:i.type,times:e}}else this.state={type:Dc,times:["",""]};const o=t.injector.get("debounceInput");this.debouncedEditCell=o(this.editCell.bind(this)),this.editCell=this.editCell.bind(this),this.onTypeChange=this.onTypeChange.bind(this),this.onSetStartTimeNowClick=this.onSetStartTimeNowClick.bind(this),this.onSetEndTimeNowClick=this.onSetEndTimeNowClick.bind(this),this.onStartTimeInput=this.onStartTimeInput.bind(this),this.onEndTimeInput=this.onEndTimeInput.bind(this)}editCell(e,t){this._modeling.editCell(e,t)}onTypeChange(e){const{element:t}=this.props.context,{times:n}=this.state;this.setState({type:e}),wc(Cc(e,n))&&this.editCell(t.businessObject,Cc(e,n))}onSetStartTimeNowClick(){const{element:e}=this.props.context,{times:t,type:n}=this.state,i=Ec();this.setState({times:[i,t[1]]}),wc(Cc(n,[i,t[1]]))&&this.editCell(e.businessObject,Cc(n,[i,t[1]]))}onSetEndTimeNowClick(){const{element:e}=this.props.context,{times:t,type:n}=this.state,i=Ec();this.setState({times:[t[0],i]}),wc(Cc(n,[t[0],i]))&&this.editCell(e.businessObject,Cc(n,[t[0],i]))}onStartTimeInput({value:e}){const{element:t}=this.props.context,{times:n,type:i}=this.state;this.setState({times:[e,n[1]]}),this.debouncedEditCell(t.businessObject,Cc(i,[e,n[1]]))}onEndTimeInput({value:e}){const{element:t}=this.props.context,{times:n,type:i}=this.state;this.setState({times:[n[0],e]}),this.debouncedEditCell(t.businessObject,Cc(i,[n[0],e]))}render(){const{times:e,type:t}=this.state,n=[{label:this._translate("Exactly"),value:Dc},{label:this._translate("Before"),value:"before"},{label:this._translate("After"),value:"after"},{label:this._translate("Between"),value:Sc}];return(0,rn.bF)(1,"div","context-menu-container simple-time-edit",[(0,rn.bF)(1,"h3","dms-heading",this._translate("Edit time"),0),(0,rn.bF)(1,"div","dms-fill-row",(0,rn.sO)(2,br,{label:this._translate("Time"),noInput:!0,onChange:this.onTypeChange,options:n,value:t}),2),(0,rn.bF)(1,"h4","dms-heading",t===Sc?this._translate("Edit start time"):this._translate("Set time"),0),(0,rn.bF)(1,"div",null,[(0,rn.sO)(2,Sr,{label:this._translate("Start time"),className:"start-time-input dms-block",onInput:this.onStartTimeInput,placeholder:this._translate("e.g. { example } ",{example:il()}),validate:e=>xc(e)&&this._translate(xc(e)),value:e[0]}),(0,rn.bF)(1,"p","dms-hint",[(0,rn.bF)(1,"button","use-now",this._translate("Use now"),0,{type:"button",onClick:this.onSetStartTimeNowClick}),(0,rn.eW)(".")],4)],4),t===Sc&&(0,rn.bF)(1,"h4","dms-heading",this._translate("Edit end time"),0),t===Sc&&(0,rn.bF)(1,"div",null,[(0,rn.sO)(2,Sr,{label:this._translate("End time"),className:"end-time-input dms-block",onInput:this.onEndTimeInput,placeholder:this._translate("e.g. { example } ",{example:il()}),validate:e=>xc(e)&&this._translate(xc(e)),value:e[1]}),(0,rn.bF)(1,"p","dms-hint",[(0,rn.bF)(1,"button","use-now",this._translate("Use now"),0,{type:"button",onClick:this.onSetEndTimeNowClick}),(0,rn.eW)(".")],4)],4)],0)}}class jc extends rn.uA{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._modeling=t.injector.get("modeling");const{element:n}=this.props.context,i=wc(n.businessObject.text);this.state={date:i?i.date:""};const o=t.injector.get("debounceInput");this.debouncedEditCell=o(this.editCell.bind(this)),this.editCell=this.editCell.bind(this),this.onClick=this.onClick.bind(this),this.onInput=this.onInput.bind(this)}editCell(e,t){this._modeling.editCell(e,t)}onClick(){const{element:e}=this.props.context,t=Ec();this.setState({date:t}),this.editCell(e.businessObject,`time("${t}")`)}onInput({value:e}){const{element:t}=this.props.context;this.setState({date:e}),this.debouncedEditCell(t.businessObject,`time("${e}")`)}render(){const{date:e}=this.state;return(0,rn.bF)(1,"div","context-menu-container simple-time-edit",[(0,rn.bF)(1,"h3","dms-heading",this._translate("Edit time"),0),(0,rn.bF)(1,"h4","dms-heading",this._translate("Set time"),0),(0,rn.bF)(1,"div",null,[(0,rn.sO)(2,Sr,{label:this._translate("Time value"),onInput:this.onInput,placeholder:this._translate("e.g. { example } ",{example:il()}),validate:e=>xc(e)&&this._translate(xc(e)),value:e,className:"dms-block"}),(0,rn.bF)(1,"p","dms-hint",[(0,rn.bF)(1,"button","use-now",this._translate("Use now"),0,{type:"button",onClick:this.onClick}),(0,rn.eW)(".")],4)],4)],4)}}class Oc{constructor(e,t){t.registerProvider((e=>{const t=Rc(e);return((0,s.Xy)(e.col)||(0,s.Mz)(e.col))&&Mc(t)})),e.onGetComponent("context-menu",((e={})=>{if(e.contextMenuType&&"simple-mode-edit"===e.contextMenuType){if(!e.element)return;if(Mc(Rc(e.element))){if((0,s.Xy)(e.element.col))return Ac;if((0,s.Mz)(e.element.col))return jc}}}))}}function Rc(e){return(0,s.Xy)(e.col)?e.col&&e.col.businessObject.inputExpression.typeRef:e.col&&e.col.businessObject.typeRef}function Mc(e){return"time"===e}Oc.$inject=["components","simpleMode"];const kc={__depends__:[$r,qa],__init__:["simpleTimeEdit"],simpleTimeEdit:["type",Oc]};class Ic extends rn.uA{constructor(e,t){super(e,t),Jn(this)}componentDidMount(){const e=this.getRoot();this.changeSupport.onElementsChanged(e,this.onElementsChanged)}componentWillUnmount(){const e=this.getRoot();this.changeSupport.offElementsChanged(e,this.onElementsChanged)}getRoot(){return this.sheet.getRoot()}onElementsChanged=()=>{this.forceUpdate()};handleMouseDown=e=>{!function({node:e,event:t,minWidth:n,onEnd:i=Tc}){t.preventDefault();const o=e.getBoundingClientRect().width,s=t.clientX;let r;function a(t){t.preventDefault();const n=l(t.clientX);r&&cancelAnimationFrame(r),r=requestAnimationFrame((()=>{e.style.width=n+"px"}))}function l(e){const t=e-s;return Math.max(o+t,n)}document.addEventListener("mousemove",a),document.addEventListener("mouseup",(function e(t){t.preventDefault(),document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",e);const n=l(t.clientX);i(n)}))}({node:Fn(e.target,"th",!1),event:e,minWidth:this.props.minWidth||150,onEnd:this.saveWidth})};saveWidth=e=>{const{col:t}=this.props,n={};(0,s.is)(t,"dmn:DecisionTable")?n.annotationsWidth=e:n.width=e,this.modeling.updateProperties(t,n)};isLastInputOrOutput(){const{col:e}=this.props,t=this.getRoot(),n=(0,s.Cf)(t);if((0,s.is)(e,"dmn:InputClause")){const t=n.get("input");return t.indexOf(e)===t.length-1}if((0,s.is)(e,"dmn:OutputClause")){const t=n.get("output");return t.indexOf(e)===t.length-1}}render(){const e=this.isLastInputOrOutput()?{right:"-7px",width:"27px"}:null;return(0,rn.bF)(1,"div","resize-column-handle",null,1,{onMouseDown:this.handleMouseDown,title:this.translate("Resize"),style:e})}}function Tc(){}function Fc(e){e.onGetComponent("cell-inner",((e={})=>{const{cellType:t}=e;if("input-cell"===t||"output-cell"===t||"annotations"===t)return Ic}))}Ic.$inject=["sheet","changeSupport","translate","modeling"],Fc.$inject=["components"];const Pc={__init__:["columnResizeProvider"],columnResizeProvider:["type",Fc]};class Lc extends Gi{getModules(){return[...Gi._getModules(),...Lc._getModules()]}static _getModules(){return[rs,bs,Po,Bs,Qo,Ks,Hs,Ys,nr,ss,Br,Pc,Zr,oa,ra,ji,Ri,$r,pa,os,ga,go,La,Ua,Zi,qa,Ja,pl,jl,Kl,rc,fc,kc,Nt]}}class Nc{constructor(e){this._listeners={},e.on("elements.changed",(({elements:e})=>{this.elementsChanged(e)})),e.on("element.updateId",(({element:e,newId:t})=>{this.updateId(e.id,t)}))}elementsChanged(e){const t={},n=e.length;for(let i=0;i<n;i++){const{id:n}=e[i];if(t[n])return;t[n]=!0;const o=this._listeners[n]&&this._listeners[n].length;if(o)for(let e=0;e<o;e++)this._listeners[n][e]&&this._listeners[n][e]()}}onElementsChanged(e,t){this._listeners[e]||(this._listeners[e]=[]),this._listeners[e][this._listeners[e].length]=t}offElementsChanged(e,t){if(this._listeners[e])if(t){const n=this._listeners[e].indexOf(t);-1!==n&&this._listeners[e].splice(n,1)}else this._listeners[e].length=0}updateId(e,t){this._listeners[e]&&(this._listeners[t]=this._listeners[e],delete this._listeners[e])}}Nc.$inject=["eventBus"];class $c extends rn.uA{constructor(e){super(e);const t=this._injector=e.injector;this._changeSupport=t.get("changeSupport"),this._components=t.get("components"),this._renderer=t.get("renderer")}getChildContext(){return{changeSupport:this._changeSupport,components:this._components,renderer:this._renderer,injector:this._injector}}render(){const e=this._components.getComponents("viewer");return(0,rn.bF)(1,"div","viewer-container",e&&e.map(((e,t)=>(0,rn.sO)(2,e,null,t))),0)}}class Bc{constructor(e,t,n,i,o){const{container:s}=n;this._container=s,i.on("renderer.mount",(()=>{(0,rn.XX)((0,rn.sO)(2,$c,{injector:o}),s)})),i.on("renderer.unmount",(()=>{(0,rn.XX)(null,s)}))}getContainer(){return this._container}}Bc.$inject=["changeSupport","components","config.renderer","eventBus","injector"];const Vc={__init__:["changeSupport","components","renderer"],changeSupport:["type",Nc],components:["type",class{constructor(){this._listeners={}}getComponent(e,t){const n=this._listeners[e];if(!n)return;let i;for(let e=0;e<n.length&&(i=n[e].callback(t),!i);e++);return i}getComponents(e,t){const n=this._listeners[e];if(!n)return;const i=[];for(let e=0;e<n.length;e++){const o=n[e].callback(t);o&&i.push(o)}return i.length?i:void 0}onGetComponent(e,t,n){if((0,ke.Tn)(t)&&(n=t,t=1e3),!(0,ke.Et)(t))throw new Error("priority must be a number");const i=this._getListeners(e);let o,s;const r={priority:t,callback:n};for(s=0;o=i[s];s++)if(o.priority<t)return void i.splice(s,0,r);i.push(r)}offGetComponent(e,t){const n=this._getListeners(e);let i,o,s;if(t)for(s=n.length-1;i=n[s];s--)o=i.callback,o===t&&n.splice(s,1);else n.length=0}_getListeners(e){let t=this._listeners[e];return t||(this._listeners[e]=t=[]),t}}],eventBus:["type",on.A],renderer:["type",Bc]};class Uc{constructor(e={}){let{injector:t}=e;if(!t){let{modules:n,config:i}=this._init(e);t=function(e,t){const n=[{config:["value",e]},Vc].concat(t||[]),i=new $t.zZ(n);return i.init(),i}(i,n)}this.get=t.get,this.invoke=t.invoke,this.get("eventBus").fire("viewer.init")}_init(e){let{modules:t,...n}=e;return{modules:t,config:n}}destroy(){this.get("eventBus").fire("viewer.destroy")}clear(){this.get("eventBus").fire("viewer.clear")}}const zc=Object.prototype.toString,Kc=Object.prototype.hasOwnProperty;function qc(e,t){return!(null==e)&&Kc.call(e,t)}function Wc(e,t){let n,i;if(void 0===e)return;const o=function(e){return"[object Array]"===zc.call(e)}(e)?Hc:Gc;for(let s in e)if(qc(e,s)&&(n=e[s],i=t(n,o(s)),!1===i))return n}function Gc(e){return e}function Hc(e){return Number(e)}function Xc(e,t){return t.forEach((function(t){t&&"string"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(n){if("default"!==n&&!(n in e)){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}}))})),Object.freeze(e)}Object.prototype.toString,Object.prototype.hasOwnProperty;const Jc=Object.prototype.toString;function Yc(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}Yc.prototype.add=function(e){return this.list.add(e),this},Yc.prototype.remove=function(e){return"[object RegExp]"==Jc.call(e)?this.removeMatching(e):(this.list.remove(e),this)},Yc.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},Yc.prototype.toggle=function(e,t){return void 0!==t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this},Yc.prototype.array=function(){return Array.from(this.list)},Yc.prototype.has=Yc.prototype.contains=function(e){return this.list.contains(e)};var Zc,Qc,eu,tu={};function nu(){Zc=window.addEventListener?"addEventListener":"attachEvent",Qc=window.removeEventListener?"removeEventListener":"detachEvent",eu="addEventListener"!==Zc?"on":""}var iu,ou=Xc({__proto__:null,bind:tu.bind=function(e,t,n,i){return Zc||nu(),e[Zc](eu+t,n,i||!1),n},unbind:tu.unbind=function(e,t,n,i){return Qc||nu(),e[Qc](eu+t,n,i||!1),n},default:tu},[tu]),su=!1;"undefined"!=typeof document&&((iu=document.createElement("div")).innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',su=!iu.getElementsByTagName("link").length,iu=void 0);var ru={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:su?[1,"X<div>","</div>"]:[0,"",""]};ru.td=ru.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],ru.option=ru.optgroup=[1,'<select multiple="multiple">',"</select>"],ru.thead=ru.tbody=ru.colgroup=ru.caption=ru.tfoot=[1,"<table>","</table>"],ru.polyline=ru.ellipse=ru.polygon=ru.circle=ru.text=ru.line=ru.path=ru.rect=ru.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];var au=function(e,t){if("string"!=typeof e)throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var i=n[1];if("body"==i)return(o=t.createElement("html")).innerHTML=e,o.removeChild(o.lastChild);var o,s=Object.prototype.hasOwnProperty.call(ru,i)?ru[i]:ru._default,r=s[0],a=s[1],l=s[2];for((o=t.createElement("div")).innerHTML=a+e+l;r--;)o=o.lastChild;if(o.firstChild==o.lastChild)return o.removeChild(o.firstChild);for(var c=t.createDocumentFragment();o.firstChild;)c.appendChild(o.removeChild(o.firstChild));return c};class lu{constructor(e,t){this._eventBus=t,this._viewer=e}getDecision(){return this._viewer.getDecision()}updateId(e,t){if(e!==this.getDecision())throw new Error("element !== decision");this._eventBus.fire("element.updateId",{element:e,newId:t}),e.id=t}}lu.$inject=["viewer","eventBus"];const cu={__init__:["elementRegistry"],elementRegistry:["type",lu]};class uu extends rn.uA{constructor(e,t){super(e,t),this._viewer=t.injector.get("viewer")}render(){const{name:e}=this._viewer.getDecision();return(0,rn.bF)(1,"div","decision-properties",(0,rn.bF)(1,"h3","decision-name",e,0),2)}}class du{constructor(e){e.onGetComponent("viewer",1500,(()=>uu))}}du.$inject=["components"];const pu={__init__:["decisionProperties"],decisionProperties:["type",du]};class hu extends rn.uA{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._viewer=t.injector.get("viewer")}render(){const{decisionLogic:e,variable:t}=this._viewer.getDecision();return(0,rn.bF)(1,"div","literal-expression-properties",(0,rn.bF)(1,"table",null,[(0,rn.bF)(1,"tr",null,[(0,rn.bF)(1,"td",null,this._translate("Variable name:"),0),(0,rn.bF)(1,"td",null,(0,rn.bF)(1,"span",null,t.name||"-",0),2)],4),(0,rn.bF)(1,"tr",null,[(0,rn.bF)(1,"td",null,this._translate("Variable type:"),0),(0,rn.bF)(1,"td",null,(0,rn.bF)(1,"span",null,this._translate(t.typeRef||"")||"-",0),2)],4),(0,rn.bF)(1,"tr",null,[(0,rn.bF)(1,"td",null,this._translate("Expression language:"),0),(0,rn.bF)(1,"td",null,(0,rn.bF)(1,"span",null,e.expressionLanguage||"-",0),2)],4)],4),2)}}class mu{constructor(e){e.onGetComponent("viewer",500,(()=>hu))}}mu.$inject=["components"];const gu={__depends__:[],__init__:["literalExpressionProperties"],literalExpressionProperties:["type",mu]};class fu{constructor(e){e.onGetComponent("viewer",2e3,(()=>Ki.v))}}fu.$inject=["components"];const yu={__init__:["poweredBy"],poweredBy:["type",fu]};class vu extends rn.uA{constructor(e,t){super(e,t),this._viewer=t.injector.get("viewer")}render(){const{text:e}=this._viewer.getDecision().decisionLogic;return(0,rn.bF)(1,"div","textarea",(0,rn.bF)(1,"div","content",e,0),2)}}class bu{constructor(e){e.onGetComponent("viewer",(()=>vu))}}bu.$inject=["components"];const _u={__init__:["textarea"],textarea:["type",bu]};class xu extends rn.uA{constructor(e,t){super(e,t);const{injector:n}=t;this._translate=n.get("translate"),this._eventBus=n.get("eventBus")}onClick=()=>{this._eventBus.fire("showDrd")};render(){return(0,rn.bF)(1,"div","view-drd",(0,rn.bF)(1,"button","view-drd-button",this._translate("View DRD"),0,{type:"button",onClick:this.onClick}),2,null,null,(e=>this.node=e))}}xu.$inject=["translate"];class Cu{constructor(e,t,n,i){this._injector=i,this._viewer=t,e.onGetComponent("viewer",2e3,(()=>{if(this.canViewDrd())return xu})),n.on("showDrd",(()=>{const e=i.get("_parent",!1),t=this.getDefinitions(),n=e.getView(t);e.open(n)}))}canViewDrd(){const e=this._injector.get("_parent",!1);if(!e)return;const t=this.getDefinitions();return!!e.getView(t)}getDefinitions(){return this._viewer.getDecision().$parent}}Cu.$inject=["components","viewer","eventBus","injector"];const Eu={__init__:["viewDrd"],viewDrd:["type",Cu]};class wu extends Uc{constructor(e={}){const t=wu._createContainer();super(function(e,...t){return Object.assign(e,...t)}(e,{renderer:{container:t}})),this._container=t}open(e){var t=this;return new Promise((function(n,i){var o;try{t._decision&&(t.clear(),t.get("eventBus").fire("renderer.unmount")),t._decision=e,t.get("eventBus").fire("import",e),t.get("eventBus").fire("renderer.mount")}catch(e){o=e}o?(o.warnings=o.warnings||[],i(o)):n({warnings:[]})}))}_init(e){let{modules:t,additionalModules:n,...i}=e;return{modules:[...t||this.getModules(),...n||[],{viewer:["value",this]}],config:i}}on(e,t,n,i){return this.get("eventBus").on(e,t,n,i)}off(e,t){this.get("eventBus").off(e,t)}_emit(e,t){return this.get("eventBus").fire(e,t)}getDecision(){return this._decision}attachTo(e){if(!e)throw new Error("parentNode required");this.detach(),e.appendChild(this._container),this._emit("attach",{})}detach(){const e=this._container;var t;e.parentNode&&(this._emit("detach",{}),(t=e).parentNode&&t.parentNode.removeChild(t))}destroy(){super.destroy(),this.detach()}getModules(){return wu._getModules()}static _getModules(){return[cu,O.A,pu,gu,yu,_u,Eu]}static _createContainer(){return au('<div class="dmn-literal-expression-container"></div>')}}class Du extends rn.uA{constructor(e,t){super(e,t),this._viewer=t.injector.get("viewer"),this._modeling=t.injector.get("modeling"),this._translate=t.injector.get("translate"),this.setupChangeListeners({bind:this.getDecision().id})}componentWillUnmount(){this.setupChangeListeners({unbind:this.getDecision().id})}getDecision(){return this._viewer.getDecision()}onElementsChanged=()=>{this.forceUpdate()};setupChangeListeners({bind:e,unbind:t}){const{changeSupport:n}=this.context;"string"==typeof t&&n.offElementsChanged(t,this.onElementsChanged),"string"==typeof e&&n.onElementsChanged(e,this.onElementsChanged)}setDecisionName=e=>{this._modeling.editDecisionName(e)};render(){const{name:e}=this.getDecision();return(0,rn.bF)(1,"header","decision-properties",(0,rn.sO)(2,Su,{label:this._translate("Decision name"),className:"decision-name editor",value:e,onBlur:Au,onChange:this.setDecisionName}),2)}}class Su extends hs{render(){return(0,rn.bF)(1,"h3",this.getClassName(),this.getEditor(),0)}}function Au(e){e.target.scroll(0,0)}class ju{constructor(e){e.onGetComponent("viewer",1500,(()=>Du))}}ju.$inject=["components"];const Ou={__depends__:[vs,O.A],__init__:["decisionProperties"],decisionProperties:["type",ju]},Ru="is not a registered action";class Mu{constructor(e,t){this._actions={undo(){e.undo()},redo(){e.redo()}}}trigger(e,t){if(!this._actions[e])throw ku(e,Ru);return this._actions[e](t)}register(e,t){if("string"==typeof e)return this._registerAction(e,t);Wc(e,((e,t)=>{this._registerAction(t,e)}))}_registerAction(e,t){if(this.isRegistered(e))throw ku(e,"is already registered");this._actions[e]=t}unregister(e){if(!this.isRegistered(e))throw ku(e,Ru);this._actions[e]=void 0}isRegistered(e){return!!this._actions[e]}}function ku(e,t){return new Error(e+" "+t)}Mu.$inject=["commandStack","eventBus"];const Iu={__init__:["editorActions"],editorActions:["type",Mu]};function Tu(e){return!e.altKey&&(e.ctrlKey||e.metaKey)}function Fu(e){return e.shiftKey}var Pu="Keyboard binding is now implicit; explicit binding to an element got removed. For more information, see https://github.com/bpmn-io/diagram-js/pull/662";class Lu{constructor(e,t,n,i){this._config=e||{},this._eventBus=t,this._editorActions=n,this._listeners=[],t.on("viewer.destroy",this._destroy),t.on("viewer.init",this._init),t.on("attach",(()=>{this._config.bindTo&&console.error("unsupported configuration <keyboard.bindTo>",new Error(Pu)),this._target=i.getContainer(),this._config&&!1!==this._config.bind&&this.bind()})),t.on("detach",this.unbind)}_init=()=>{this._registerDefaultBindings(),this._fire("init")};_destroy=()=>{this._fire("destroy"),this.unbind(),this._listeners=null};_keyHandler=e=>{var t,n,i=this._listeners,o=e.keyCode||e.charCode||-1;for(t=0;n=i[t];t++)if(n(o,e))return e.preventDefault(),void e.stopPropagation()};bind(e){e&&console.error("unsupported argument <node>",new Error(Pu)),this.unbind(),e=this._node=this._target,ou.bind(e,"keydown",this._keyHandler,!0),this._fire("bind")}getBinding(){return this._node}unbind=()=>{var e=this._node;e&&(this._fire("unbind"),ou.unbind(e,"keydown",this._keyHandler,!0)),this._node=null};_fire(e){this._eventBus.fire("keyboard."+e,{node:this._node,listeners:this._listeners})}_registerDefaultBindings(){var e=this._listeners,t=this._editorActions;e.push((function(e,n){if(Tu(n)&&!Fu(n)&&90===e)return t.trigger("undo"),!0})),e.push((function(e,n){if(Tu(n)&&(89===e||90===e&&Fu(n)))return t.trigger("redo"),!0}))}addListener(e){this._listeners.unshift(e)}removeListener(e){this._listeners=this._listeners.filter((t=>t!==e))}}Lu.$inject=["config.keyboard","eventBus","editorActions","renderer"];const Nu={__depends__:[Iu],__init__:["keyboard"],keyboard:["type",Lu]};class $u extends rn.uA{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._viewer=t.injector.get("viewer"),this._modeling=t.injector.get("modeling"),this._dataTypes=t.injector.get("dataTypes"),this._eventBus=t.injector.get("eventBus");const n=this._viewer.getDecision();this.state={name:n.variable.name,typeRef:n.variable.typeRef},this.setVariableName=this.setVariableName.bind(this),this.setVariableType=this.setVariableType.bind(this)}setVariableName(e){this._modeling.editVariableName(e),this.setState({name:e})}componentWillMount(){this._eventBus.on("elements.changed",this.onChange)}componentWillUnmount(){this._eventBus.off("elements.changed",this.onChange)}onChange=()=>{const e=this._viewer.getDecision();e.variable&&this.setState({name:e.variable.name})};setVariableType(e){""===e?(this._modeling.editVariableType(void 0),this.setState({typeRef:void 0})):(this._modeling.editVariableType(e),this.setState({typeRef:e}))}render(){const{name:e,typeRef:t}=this.state,n=this._dataTypes.getAll().map((e=>({label:this._translate(e),value:e})));return(0,rn.bF)(1,"div","literal-expression-properties",(0,rn.bF)(1,"table","variables-table",[(0,rn.bF)(1,"tr",null,[(0,rn.bF)(1,"td",null,this._translate("Variable name:"),0),(0,rn.bF)(1,"td",null,(0,rn.sO)(2,or,{label:this._translate("Variable name"),className:"variable-name-input",onInput:this.setVariableName,placeholder:this._translate("name"),value:e||""}),2)],4),(0,rn.bF)(1,"tr",null,[(0,rn.bF)(1,"td",null,this._translate("Variable type:"),0),(0,rn.bF)(1,"td",null,(0,rn.bF)(1,"div","dms-fill-row",(0,rn.sO)(2,br,{label:this._translate("Variable type"),onChange:this.setVariableType,options:n,value:t,className:"variable-type-select dms-block"}),2),2)],4),(0,rn.sO)(2,Bu)],4),2)}}class Bu extends rn.uA{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._viewer=t.injector.get("viewer"),this._modeling=t.injector.get("modeling"),this._expressionLanguages=t.injector.get("expressionLanguages"),this.setExpressionLanguage=this.setExpressionLanguage.bind(this)}setExpressionLanguage(e){""===e?this._modeling.editExpressionLanguage(void 0):this._modeling.editExpressionLanguage(e)}_getExpressionLanguage(){const e=this._viewer.getDecision().decisionLogic;return e&&e.expressionLanguage?e.expressionLanguage.toLowerCase():this._getDefaultExpressionLanguage()}_getDefaultExpressionLanguage(){return this._expressionLanguages.getDefault().value}_shouldRender(){return this._expressionLanguages.getAll().length>1||this._getExpressionLanguage()!==this._getDefaultExpressionLanguage()}render(){if(!this._shouldRender())return null;const e=this._getExpressionLanguage(),t=this._expressionLanguages.getAll();return(0,rn.bF)(1,"tr",null,[(0,rn.bF)(1,"td",null,this._translate("Expression language:"),0),(0,rn.bF)(1,"td",null,(0,rn.bF)(1,"div","dms-fill-row",(0,rn.sO)(2,br,{label:this._translate("Expression language"),onChange:this.setExpressionLanguage,options:t,value:e,className:"expression-language-select dms-block"}),2),2)],4)}}class Vu{constructor(e){e.onGetComponent("viewer",500,(()=>$u))}}Vu.$inject=["components"];const Uu={__depends__:[vs,Nu,ji,Ri,Ys],__init__:["literalExpressionProperties"],literalExpressionProperties:["type",Vu]};var zu=n(95917);class Ku{constructor(e,t,n){this._commandStack=e,this._viewer=t,this._eventBus=n,n.on("viewer.init",(()=>{!function(e,t){Wc(e,(function(e,n){t.registerHandler(n,e)}))}(this.getHandlers(),e)}))}getHandlers(){return Ku._getHandlers()}static _getHandlers(){return{"element.updateProperties":Ma}}getDecision(){return this._viewer.getDecision()}editDecisionName(e){const t={element:this.getDecision(),properties:{name:e}};this._commandStack.execute("element.updateProperties",t)}editDecisionId(e){const t={element:this.getDecision(),properties:{id:e}};this._commandStack.execute("element.updateProperties",t)}editLiteralExpressionText(e){const t={element:this.getDecision().decisionLogic,properties:{text:e}};this._commandStack.execute("element.updateProperties",t)}editExpressionLanguage(e){const t={element:this.getDecision().decisionLogic,properties:{expressionLanguage:e}};this._commandStack.execute("element.updateProperties",t)}editVariableName(e){const t={element:this.getDecision().variable,properties:{name:e}};this._commandStack.execute("element.updateProperties",t)}editVariableType(e){const t={element:this.getDecision().variable,properties:{typeRef:e}};this._commandStack.execute("element.updateProperties",t)}updateProperties(e,t){const n={element:e,properties:t};this._commandStack.execute("element.updateProperties",n)}}Ku.$inject=["commandStack","viewer","eventBus"];const qu={__init__:["idChangeBehavior","nameChangeBehavior","modeling"],commandStack:["type",zu.A],idChangeBehavior:["type",Ie],nameChangeBehavior:["type",Te],modeling:["type",Ku]};class Wu extends rn.uA{constructor(e,t){super(e,t),this._modeling=t.injector.get("modeling"),this._viewer=t.injector.get("viewer"),this._expressionLanguages=t.injector.get("expressionLanguages"),this._variableResolver=t.injector.get("variableResolver",!1),this._translate=t.injector.get("translate"),this.editLiteralExpressionText=this.editLiteralExpressionText.bind(this),this.onElementsChanged=this.onElementsChanged.bind(this);const{id:n}=this.getLiteralExpression();t.changeSupport.onElementsChanged(n,this.onElementsChanged)}getLiteralExpression(){return this._viewer.getDecision().decisionLogic}onElementsChanged(){this.forceUpdate()}editLiteralExpressionText(e){this._modeling.editLiteralExpressionText(e)}getEditor(){return this.isFeel()?Gu:Hu}isFeel(){return"feel"===this.getExpressionLanguage()}getExpressionLanguage(){return this.getLiteralExpression().expressionLanguage||this._expressionLanguages.getDefault().value}_getVariables(){const e=this.getLiteralExpression();return this._variableResolver&&this._variableResolver.getVariables(e)}render(){const{text:e}=this.getLiteralExpression(),t=this.getEditor(),n=this._getVariables();return(0,rn.sO)(2,t,{label:this._translate("Literal expression editor"),className:"textarea editor",value:e,onChange:this.editLiteralExpressionText,variables:n})}}class Gu extends rn.uA{render(){return(0,rn.sO)(2,hr,{label:this.props.label,className:this.props.className,value:this.props.value,onInput:this.props.onChange,variables:this.props.variables})}}class Hu extends hs{render(){return(0,rn.bF)(1,"div",this.getClassName(),this.getEditor(),0)}}class Xu{constructor(e){e.onGetComponent("viewer",(()=>Wu))}}Xu.$inject=["components"];const Ju={__depends__:[vs,O.A],__init__:["textarea"],textarea:["type",Xu]};class Yu extends wu{getModules(){return[...wu._getModules(),...Yu._getModules()]}static _getModules(){return[Ou,Nu,Uu,qu,ji,Ri,Ys,Ju,Nt]}}const Zu=Object.prototype.toString,Qu=Object.prototype.hasOwnProperty;function ed(e,t){return!(null==e)&&Qu.call(e,t)}function td(e,t){let n,i;if(void 0===e)return;const o=function(e){return"[object Array]"===Zu.call(e)}(e)?id:nd;for(let s in e)if(ed(e,s)&&(n=e[s],i=t(n,o(s)),!1===i))return n}function nd(e){return e}function id(e){return Number(e)}Object.prototype.toString,Object.prototype.hasOwnProperty;const od=Object.prototype.toString;function sd(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}sd.prototype.add=function(e){return this.list.add(e),this},sd.prototype.remove=function(e){return"[object RegExp]"==od.call(e)?this.removeMatching(e):(this.list.remove(e),this)},sd.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},sd.prototype.toggle=function(e,t){return void 0!==t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this},sd.prototype.array=function(){return Array.from(this.list)},sd.prototype.has=sd.prototype.contains=function(e){return this.list.contains(e)};var rd,ad,ld,cd={};function ud(){rd=window.addEventListener?"addEventListener":"attachEvent",ad=window.removeEventListener?"removeEventListener":"detachEvent",ld="addEventListener"!==rd?"on":""}cd.bind=function(e,t,n,i){return rd||ud(),e[rd](ld+t,n,i||!1),n},cd.unbind=function(e,t,n,i){return ad||ud(),e[ad](ld+t,n,i||!1),n};var dd,pd=!1;"undefined"!=typeof document&&((dd=document.createElement("div")).innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',pd=!dd.getElementsByTagName("link").length,dd=void 0);var hd={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:pd?[1,"X<div>","</div>"]:[0,"",""]};hd.td=hd.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],hd.option=hd.optgroup=[1,'<select multiple="multiple">',"</select>"],hd.thead=hd.tbody=hd.colgroup=hd.caption=hd.tfoot=[1,"<table>","</table>"],hd.polyline=hd.ellipse=hd.polygon=hd.circle=hd.text=hd.line=hd.path=hd.rect=hd.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];var md=function(e,t){if("string"!=typeof e)throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var i=n[1];if("body"==i)return(o=t.createElement("html")).innerHTML=e,o.removeChild(o.lastChild);var o,s=Object.prototype.hasOwnProperty.call(hd,i)?hd[i]:hd._default,r=s[0],a=s[1],l=s[2];for((o=t.createElement("div")).innerHTML=a+e+l;r--;)o=o.lastChild;if(o.firstChild==o.lastChild)return o.removeChild(o.firstChild);for(var c=t.createDocumentFragment();o.firstChild;)c.appendChild(o.removeChild(o.firstChild));return c};function gd(e,{injector:t}){const n=t.get("components").getComponents("header");return(0,rn.bF)(1,"div","dmn-boxed-expression-section dmn-boxed-expression-header",n&&n.map(((e,t)=>(0,rn.sO)(2,e,null,t))),0)}function fd(e,{injector:t}){const n=t.get("components").getComponents("body");return(0,rn.bF)(1,"div","dmn-boxed-expression-section dmn-boxed-expression-body",n&&n.map(((e,t)=>(0,rn.sO)(2,e,null,t))),0)}function yd(e,{injector:t}){const n=t.get("components").getComponents("footer");return(0,rn.bF)(1,"div","dmn-boxed-expression-section dmn-boxed-expression-footer",n&&n.map(((e,t)=>(0,rn.sO)(2,e,null,t))),0)}const vd={__init__:["viewRenderer","tableJsSupport"],viewRenderer:["type",class{static $inject=["components"];constructor(e){e.onGetComponent("viewer",(()=>gd)),e.onGetComponent("viewer",(()=>fd)),e.onGetComponent("viewer",(()=>yd))}}],tableJsSupport:["type",class{static $inject=["components"];constructor(e){e.onGetComponent("viewer",(()=>{const t=e.getComponents("table.before")||[];return()=>(0,rn.bF)(1,"div",null,t.map(((e,t)=>(0,rn.sO)(2,e,null,t))),0)}))}}]};class bd{constructor(e){e.onGetComponent("viewer",2e3,(()=>Ki.v))}}bd.$inject=["components"];const _d={__init__:["poweredBy"],poweredBy:["type",bd]};function xd({expression:e},t){const n=t.injector.get("literalExpression").getText(e);return(0,rn.bF)(1,"div","textarea",(0,rn.bF)(1,"div","content",n,0),2)}class Cd{getText(e){return e.get("text")}}const Ed={__init__:["literalExpressionComponent"],literalExpressionComponent:["type",class{static $inject=["components"];constructor(e){e.onGetComponent("expression",(({expression:e})=>{if((0,s.is)(e,"dmn:LiteralExpression"))return xd}))}}],literalExpression:["type",Cd]};class wd{getParameters(e){return e.get("formalParameter")}getBody(e){return e.get("body")}getKind(e){return e.get("kind")||"FEEL"}}function Dd({expression:e},t){const n=t.injector.get("functionDefinition"),i=n.getKind(e),o=n.getParameters(e),s=n.getBody(e);return(0,rn.bF)(1,"div","function-definition",[(0,rn.sO)(2,Ad,{kind:i}),(0,rn.sO)(2,jd,{parameters:o}),(0,rn.sO)(2,Rd,{expression:s})],4)}const Sd={FEEL:"F",Java:"J",PMML:"P"};function Ad({kind:e},t){const n=t.injector.get("translate");return(0,rn.bF)(1,"div","function-definition-kind",Sd[e],0,{title:n("Function kind: {kind}",{kind:e})})}function jd({parameters:e}){return(0,rn.bF)(1,"div","function-definition-parameters",(0,rn.bF)(1,"div",null,[(0,rn.eW)("("),e.reduce(((e,t)=>e.concat((0,rn.sO)(2,Od,{parameter:t}),", ")),[]).slice(0,-1),(0,rn.eW)(")")],0),2)}function Od({parameter:e}){const{name:t,typeRef:n}=e,i=t||"<unnamed>";return(0,rn.bF)(1,"span",null,n?`${i}: ${n}`:i,0)}function Rd({expression:e},t){const n=t.components.getComponent("expression",{expression:e});return(0,rn.bF)(1,"div","function-definition-body",(0,rn.sO)(2,n,{expression:e}),2)}const Md={__init__:["functionDefinitionComponent"],functionDefinition:["type",wd],functionDefinitionComponent:["type",class{static $inject=["components"];constructor(e){e.onGetComponent("expression",(({expression:e})=>{if((0,s.is)(e,"dmn:FunctionDefinition"))return Dd}))}}]};class kd extends rn.uA{constructor(e,t){super(e,t);const{injector:n}=t;this._translate=n.get("translate"),this._eventBus=n.get("eventBus")}onClick=()=>{this._eventBus.fire("showDrd")};render(){return(0,rn.bF)(1,"div","view-drd",(0,rn.bF)(1,"button","view-drd-button",this._translate("View DRD"),0,{type:"button",onClick:this.onClick}),2,null,null,(e=>this.node=e))}}kd.$inject=["translate"];class Id{constructor(e,t,n){this._injector=n,e.onGetComponent("viewer",2e3,(()=>{if(this.canViewDrd())return kd})),t.on("showDrd",(()=>{const e=n.get("_parent",!1),t=e.getDefinitions(),i=e.getView(t);e.open(i)}))}canViewDrd(){const e=this._injector.get("_parent",!1);if(!e)return;const t=e.getDefinitions();return!!e.getView(t)}}Id.$inject=["components","eventBus","injector"];const Td={__init__:["viewDrd"],viewDrd:["type",Id]};function Fd(e,t){const n=t.injector.get("viewer"),{name:i}=n.getRootElement();return(0,rn.bF)(1,"div","element-properties",(0,rn.bF)(1,"h2","element-name",i,0),2)}class Pd{constructor(e){e.onGetComponent("header",(()=>Fd))}}Pd.$inject=["components"];const Ld={__init__:["elementProperties"],elementProperties:["type",Pd]};function Nd(e,{injector:t}){const n=t.get("components"),i=(r=t.get("viewer").getRootElement(),(0,s.is)(r,"dmn:Decision")?r.get("decisionLogic"):(0,s.is)(r,"dmn:BusinessKnowledgeModel")?r.get("encapsulatedLogic"):void 0),o=n.getComponent("expression",{expression:i});var r;return(0,rn.sO)(2,o,{expression:i})}function $d({expression:e}){return(0,rn.bF)(1,"div",null,(0,rn.bF)(1,"span",null,[(0,rn.eW)("Expression of type "),e.$type,(0,rn.eW)(" is not supported.")],0,{style:"color:red;"}),2)}const Bd={__init__:["elementLogic"],elementLogic:["type",class{static $inject=["components"];constructor(e){e.onGetComponent("body",(()=>Nd)),e.onGetComponent("expression",100,(()=>$d))}}]};class Vd{static $inject=["viewer"];constructor(e){this._viewer=e}getName(){const e=this.getVariable(),t=this._getElement();return(e?e.get("name"):null)||t.get("name")}getType(){const e=this.getVariable();return e?e.get("typeRef"):"Any"}_getElement(){return this._viewer.getRootElement()}getVariable(){return this._getElement().get("variable")}}function Ud(e,t){const n=t.injector.get("elementVariable"),i=t.injector.get("translate"),o=n.getName(),s=n.getType();return(0,rn.bF)(1,"div","element-variable",[(0,rn.bF)(1,"h2",null,(0,rn.eW)("Result"),2),(0,rn.bF)(1,"div","element-variable-name",[(0,rn.bF)(1,"span","element-variable-name-label",i("Variable name"),0),(0,rn.bF)(1,"span",null,o,0)],4),(0,rn.bF)(1,"div","element-variable-type",[(0,rn.bF)(1,"span","element-variable-type-label",i("Variable type"),0),(0,rn.bF)(1,"span",null,s,0)],4)],4)}const zd={__init__:["elementVariableComponent"],elementVariable:["type",Vd],elementVariableComponent:["type",class{static $inject=["components"];constructor(e){e.onGetComponent("footer",(()=>Ud))}}]};class Kd extends Uc{constructor(e={}){const t=Kd._createContainer();super(function(e,...t){return Object.assign(e,...t)}(e,{renderer:{container:t}})),this._container=t}open(e){const t=this.get("eventBus");return new Promise(((n,i)=>{let o;try{this.getRootElement()&&(this.clear(),t.fire("renderer.unmount")),this._setRootElement(e),t.fire("import",e),t.fire("renderer.mount")}catch(e){o=e}o?(o.warnings=o.warnings||[],i(o)):n({warnings:[]})}))}_init(e){let{modules:t,additionalModules:n,...i}=e;return{modules:[...t||this.getModules(),...n||[],{viewer:["value",this]}],config:i}}on(e,t,n,i){return this.get("eventBus").on(e,t,n,i)}off(e,t){this.get("eventBus").off(e,t)}_emit(e,t){return this.get("eventBus").fire(e,t)}getRootElement(){return this._root}_setRootElement(e){this._root=e}attachTo(e){if(!e)throw new Error("parentNode required");this.detach(),e.appendChild(this._container),this._emit("attach",{})}detach(){const e=this._container;var t;e.parentNode&&(this._emit("detach",{}),(t=e).parentNode&&t.parentNode.removeChild(t))}destroy(){super.destroy(),this.detach()}getModules(){return[vd,O.A,_d,Td,Ld,Bd,Md,Ed,zd]}static _createContainer(){return md('<div class="dmn-boxed-expression-container"></div>')}}var qd=n(56287);const Wd={__depends__:[he.A],__init__:["keyboardBindings"],keyboardBindings:["type",class{static $inject=["editorActions","keyboard"];constructor(e,t){this.registerBindings(t,e)}registerBindings(e,t){function n(n,i){t.isRegistered(n)&&e.addListener(i)}n("undo",(function(e){const n=e.keyEvent;if((0,qd.DG)(n))return t.trigger("undo"),!0})),n("redo",(function(e){const n=e.keyEvent;if((0,qd.hM)(n))return t.trigger("redo"),!0}))}}]};class Gd extends Se.A{static $inject=["eventBus","modeling"];constructor(e,t){super(e),this._modeling=t,this.postExecuted("element.updateProperties",this.updateName)}updateName=({context:e})=>{const{element:t,properties:n}=e;this.isNameChanged(n)&&(this.isVariable(t)?this.handleVariableNameChange(t):this.isVariableContainer(t)&&this.handleVariableContainerNameChange(t))};isNameChanged(e){return"name"in e}isVariable(e){const t=Hd(e);return(0,s.is)(e,"dmn:InformationItem")&&t&&t.get("variable")===e}isVariableContainer(e){const t=e.get("variable");return t&&(0,s.is)(t,"dmn:InformationItem")}handleVariableNameChange(e){const t=Hd(e),n=e.get("name");n!==t.get("name")&&this._modeling.updateProperties(t,{name:n})}handleVariableContainerNameChange(e){const t=e.get("variable"),n=e.get("name");t&&n!==t.get("name")&&this._modeling.updateProperties(t,{name:n})}}function Hd(e){return e.$parent}class Xd{constructor(e,t,n){this._commandStack=e,this._viewer=t,this._eventBus=n,function(e,t){td(e,(function(e,n){t.registerHandler(n,e)}))}(this._getHandlers(),e)}_getHandlers(){return{"element.updateProperties":Ma}}updateProperties(e,t){const n={element:e,properties:t};this._commandStack.execute("element.updateProperties",n)}}Xd.$inject=["commandStack","viewer","eventBus"];const Jd={__init__:["idChangeBehavior","modeling","nameChangeBehavior"],commandStack:["type",zu.A],idChangeBehavior:["type",Ie],modeling:["type",Xd],nameChangeBehavior:["type",Gd]};function Yd(e,t){return function(n){return(0,rn._B)((0,rn.sO)(2,Zd,{...n,_component:e,_selectDependencies:t}))}}class Zd extends rn.uA{constructor(e,t){super(e,t),this._eventBus=t.injector.get("eventBus")}componentDidMount(){this._subscribe()}componentWillUnmount(){this._unsubscribe()}_subscribe(){this._eventBus.on("elements.changed",this.onChange)}_unsubscribe(){this._eventBus.off("elements.changed",this.onChange)}onChange=({elements:e})=>{this.props._selectDependencies(this.props).some((t=>e.includes(t)))&&this.forceUpdate()};render(){const e=this.props._component;return(0,rn._B)((0,rn.sO)(2,e,{...this.props}))}}class Qd extends rn.uA{constructor(e,t){super(e,t),this._literalExpression=t.injector.get("literalExpression"),this._translate=t.injector.get("translate"),this._expressionLanguages=t.injector.get("expressionLanguages"),this._variableResolver=t.injector.get("variableResolver",!1)}getLiteralExpression(){return this.props.expression}editLiteralExpressionText=e=>{const t=this.getLiteralExpression();this._literalExpression.setText(t,e)};getEditor(){return this.isFeel()?ep:tp}isFeel(){const e=this.getLiteralExpression();return(0,s.Fm)(e)}_getVariables(){const e=this.getLiteralExpression();return this._variableResolver&&this._variableResolver.getVariables(e)}render(){const{text:e}=this.getLiteralExpression(),t=this.getEditor(),n=this._getVariables(),i=this._translate("Literal expression");return(0,rn.sO)(2,t,{label:i,className:"textarea editor",value:e,onChange:this.editLiteralExpressionText,variables:n})}}function ep(e){return(0,rn._B)((0,rn.sO)(2,hr,{...e,onChange:e.onChange}))}class tp extends hs{render(){return(0,rn.bF)(1,"div",this.getClassName(),this.getEditor(),0)}}const np=Yd(Qd,(e=>[e.expression]));class ip extends Cd{constructor(e){super(),this._modeling=e}setText(e,t){this._modeling.updateProperties(e,{text:t})}}ip.$inject=["modeling"];const op={__init__:["literalExpressionComponent"],literalExpressionComponent:["type",class{static $inject=["components"];constructor(e){e.onGetComponent("expression",(({expression:e})=>{if((0,s.is)(e,"dmn:LiteralExpression"))return np}))}}],literalExpression:["type",ip]};function sp({label:e,onClick:t}){return(0,rn.bF)(1,"button","edit-button dmn-icon-edit",null,1,{"aria-label":e,type:"button",onClick:t})}const rp=Yd((function({expression:e},t){const n=t.injector.get("functionDefinition"),i=t.injector.get("contextMenu"),o=n.getKind(e),s=n.getParameters(e),r=n.getBody(e);return(0,rn.bF)(1,"div","function-definition",[(0,rn.sO)(2,lp,{kind:o,openEditor:t=>{const n=pp(t);i.open(n,{contextMenuType:"kind-editor",expression:e})}}),(0,rn.sO)(2,cp,{parameters:s,openEditor:t=>{const n=pp(t);i.open(n,{contextMenuType:"formal-parameters-editor",expression:e})}}),(0,rn.sO)(2,dp,{expression:r,parameters:s})],4)}),(e=>[e.expression])),ap={FEEL:"F",Java:"J",PMML:"P"};function lp({kind:e,openEditor:t},n){const i=n.injector.get("translate");return(0,rn.bF)(1,"div","function-definition-kind",[ap[e],(0,rn.sO)(2,sp,{label:i("Edit function kind"),onClick:t})],0)}function cp({openEditor:e,parameters:t},n){const i=n.injector.get("translate");return(0,rn.bF)(1,"div","function-definition-parameters",[(0,rn.bF)(1,"div",null,[(0,rn.eW)("("),t.reduce(((e,t)=>e.concat((0,rn.sO)(2,up,{parameter:t}),", ")),[]).slice(0,-1),(0,rn.eW)(")")],0),(0,rn.sO)(2,sp,{label:i("Edit formal parameters"),onClick:e})],4)}const up=Yd((function({parameter:e}){const{name:t,typeRef:n}=e,i=t||"<unnamed>";return(0,rn.bF)(1,"span",null,n?`${i}: ${n}`:i,0)}),(e=>[e.parameter])),dp=Yd((function({expression:e,parameters:t},n){const i=n.components.getComponent("expression",{expression:e});return(0,rn.bF)(1,"div","function-definition-body",(0,rn.sO)(2,i,{expression:e,parameters:t}),2)}),(e=>e.parameters));function pp(e){const t=e.target.parentElement.getBoundingClientRect();return{x:t.x,y:t.y}}const hp=[{value:"FEEL",label:"FEEL"},{value:"Java",label:"Java"},{value:"PMML",label:"PMML"}];function mp({context:{expression:e}},t){const n=t.injector.get("functionDefinition"),i=t.injector.get("translate"),o=n.getKind(e);return(0,rn.bF)(1,"div","context-menu-container",[(0,rn.bF)(1,"h3",null,i("Edit function kind"),0),(0,rn.sO)(2,br,{label:i("Kind"),options:hp,value:o,onChange:t=>{n.setKind(e,t)},noInput:!0})],4)}const gp=Yd((function({context:{expression:e}},t){const n=t.injector.get("functionDefinition"),i=t.injector.get("translate"),o=n.getParameters(e);return(0,rn.bF)(1,"div","context-menu-container formal-parameters",[(0,rn.bF)(1,"h3",null,i("Edit formal parameters"),0),o.length?(0,rn.bF)(1,"table",null,[(0,rn.bF)(1,"thead",null,(0,rn.bF)(1,"tr",null,[(0,rn.bF)(1,"th",null,(0,rn.eW)("Name"),2),(0,rn.bF)(1,"th",null,(0,rn.eW)("Type"),2)],4),2),(0,rn.bF)(1,"tbody",null,o.map(((t,i)=>(0,rn.sO)(2,fp,{parameter:t,remove:()=>(t=>{n.removeParameter(e,t)})(t)},i))),0)],4):null,(0,rn.bF)(1,"button","add-parameter",i("Add parameter"),0,{type:"button",onClick:()=>{n.addParameter(e)}})],0)}),(e=>[e.context.expression])),fp=Yd((function({parameter:e,remove:t},n){const i=n.injector.get("dataTypes"),o=n.injector.get("translate"),s=n.injector.get("functionDefinition"),{name:r,typeRef:a}=e,l=i.getAll().map((e=>({label:o(e),value:e})));return(0,rn.bF)(1,"tr","function-definition-parameter",[(0,rn.bF)(1,"td",null,(0,rn.sO)(2,or,{onChange:t=>{s.updateParameter(e,{name:t})},value:r}),2),(0,rn.bF)(1,"td",null,(0,rn.sO)(2,br,{onChange:t=>{s.updateParameter(e,{typeRef:t})},value:a,options:l}),2),(0,rn.bF)(1,"td",null,(0,rn.bF)(1,"button","dmn-icon-trash",null,1,{type:"button",onClick:t,"aria-label":o("Remove parameter")}),2)],4)}),(e=>[e.parameter])),yp={__init__:["formalParametersEditorComponent","functionDefinitionComponent","kindEditorComponent"],__depends__:[Bs],formalParametersEditorComponent:["type",class{static $inject=["components"];constructor(e){e.onGetComponent("context-menu",((e={})=>{if(e.contextMenuType&&"formal-parameters-editor"===e.contextMenuType)return gp}))}}],functionDefinition:["type",class extends wd{static $inject=["modeling","dmnFactory"];constructor(e,t){super(),this._modeling=e,this._dmnFactory=t}addParameter(e){this._modeling.updateProperties(e,{formalParameter:[...this.getParameters(e),this._dmnFactory.create("dmn:InformationItem",{name:"",typeRef:""})]})}removeParameter(e,t){this._modeling.updateProperties(e,{formalParameter:this.getParameters(e).filter((e=>e!==t))})}updateParameter(e,t){this._modeling.updateProperties(e,t)}setKind(e,t){this._modeling.updateProperties(e,{kind:t})}}],functionDefinitionComponent:["type",class{static $inject=["components"];constructor(e){e.onGetComponent("expression",(({expression:e})=>{if((0,s.is)(e,"dmn:FunctionDefinition"))return rp}))}}],kindEditorComponent:["type",class{static $inject=["components"];constructor(e){e.onGetComponent("context-menu",((e={})=>{if(e.contextMenuType&&"kind-editor"===e.contextMenuType)return mp}))}}]},vp=Yd((function(e,t){const{element:n}=e,i=t.injector.get("modeling"),o=t.injector.get("translate"),s=n.get("name");return(0,rn.sO)(2,or,{label:o("Element name"),className:"element-name editor",value:s,onChange:e=>{i.updateProperties(n,{name:e})}})}),(e=>[e.element]));function bp(e,t){const n=t.injector.get("viewer").getRootElement();return(0,rn.bF)(1,"div","element-properties",(0,rn.sO)(2,vp,{element:n}),2)}class _p{constructor(e){e.onGetComponent("header",(()=>bp))}}_p.$inject=["components"];const xp={__depends__:[vs],__init__:["elementProperties"],elementProperties:["type",_p]};class Cp{constructor(e,t){this._eventBus=t,this._viewer=e}updateId(e,t){if(e!==this._viewer.getRootElement())throw new Error("element !== rootElement");this._eventBus.fire("element.updateId",{element:e,newId:t}),e.id=t}}Cp.$inject=["viewer","eventBus"];const Ep={__init__:["elementRegistry"],elementRegistry:["type",Cp],dmnFactory:["type",class{static $inject=["moddle"];constructor(e){this._moddle=e}create(e,t={}){return this._moddle.create(e,t)}}]},wp="dmn-boxed-expression-variable-type";function Dp(e,t){const n=t.injector.get("elementVariable"),i=t.injector.get("translate"),o=n.getName();return(0,rn.bF)(1,"div","element-variable",[(0,rn.bF)(1,"h2",null,(0,rn.eW)("Result"),2),(0,rn.bF)(1,"div","element-variable-name",[(0,rn.bF)(1,"span","element-variable-name-label",i("Variable name"),0),(0,rn.bF)(1,"span",null,o,0)],4),(0,rn.bF)(1,"div","element-variable-type",[(0,rn.bF)(1,"label","element-variable-type-label",(0,rn.eW)("Result type"),2,{for:wp}),(0,rn.sO)(2,Sp)],4)],4)}function Sp(e,t){const n=t.injector.get("elementVariable"),i=t.injector.get("dataTypes"),o=t.injector.get("translate"),s=n.getType(),r=i.getAll().map((e=>({label:o(e),value:e})));return(0,rn.sO)(2,br,{value:s,onChange:e=>n.setType(e),options:r,id:wp})}const Ap={__init__:["elementVariableComponent"],elementVariable:["type",class extends Vd{static $inject=["viewer","modeling","dmnFactory"];constructor(e,t,n){super(e),this._modeling=t,this._dmnFactory=n}setType(e){const t=this.getVariable();if(t)this._modeling.updateProperties(t,{typeRef:e});else{const t=this._getElement();this._modeling.updateProperties(t,{variable:this._dmnFactory.create("dmn:InformationItem",{name:t.get("name"),typeRef:e})})}}}],elementVariableComponent:["type",class{static $inject=["components","elementVariable"];constructor(e,t){const n=Yd(Dp,(()=>[t.getVariable()]));e.onGetComponent("footer",(()=>n))}}]},jp="is not a registered action";class Op{constructor(e,t){this._actions={undo(){e.undo()},redo(){e.redo()}}}trigger(e,t){if(!this._actions[e])throw Rp(e,jp);return this._actions[e](t)}register(e,t){if("string"==typeof e)return this._registerAction(e,t);td(e,((e,t)=>{this._registerAction(t,e)}))}_registerAction(e,t){if(this.isRegistered(e))throw Rp(e,"is already registered");this._actions[e]=t}unregister(e){if(!this.isRegistered(e))throw Rp(e,jp);this._actions[e]=void 0}isRegistered(e){return!!this._actions[e]}}function Rp(e,t){return new Error(e+" "+t)}Op.$inject=["commandStack","eventBus"];const Mp={__init__:["editorActions"],editorActions:["type",Op]};class kp extends Kd{getModules(){return[...super.getModules(),Ep,Jd,Mp,xp,yp,ji,Ri,op,Wd,Ys,Ap,Nt]}}var Ip=n(57094);class Tp extends r{_getViewProviders(){return[{id:"drd",constructor:jt,opens:"dmn:Definitions"},{id:"decisionTable",constructor:Lc,opens:e=>(0,s.is)(e,"dmn:Decision")&&(0,s.is)(e.decisionLogic,"dmn:DecisionTable")},{id:"literalExpression",constructor:Yu,opens:e=>(0,s.is)(e,"dmn:Decision")&&(0,s.is)(e.decisionLogic,"dmn:LiteralExpression")},{id:"boxedExpression",constructor:kp,opens:e=>(0,s.is)(e,"dmn:BusinessKnowledgeModel")&&(0,s.TO)(e)}]}_getInitialView(e,...t){let n=super._getInitialView(e,...t);if(!n)return;const i=n.element;return(0,s.is)(i,"dmn:Definitions")&&!(0,ce.$)(i)&&(n=(0,Ip.I6)(e,(e=>!(0,s.is)(e.element,"dmn:Definitions")))||n),n}}var Fp=n(72969),Pp=n(49486),Lp=n(99186),Np=n(50755);Object.prototype.toString,Object.prototype.hasOwnProperty;const $p=JSON.parse('{"name":"Camunda","uri":"http://camunda.org/schema/1.0/dmn","prefix":"camunda","xml":{"tagAlias":"lowerCase"},"associations":[],"types":[{"name":"Definitions","isAbstract":true,"extends":["dmn:Definitions"],"properties":[{"name":"diagramRelationId","isAttr":true,"type":"String"}]},{"name":"Decision","isAbstract":true,"extends":["dmn:Decision"],"properties":[{"name":"versionTag","isAttr":true,"type":"String"},{"name":"historyTimeToLive","isAttr":true,"type":"String"}]},{"name":"InputClause","extends":["dmn:InputClause"],"properties":[{"name":"inputVariable","isAttr":true,"type":"String"}]}],"emumerations":[]}'),Bp=JSON.parse('{"name":"zeebe","prefix":"zeebe","uri":"http://camunda.org/schema/zeebe/1.0","xml":{"tagAlias":"lowerCase"},"associations":[],"types":[{"name":"VersionTag","superClass":["Element"],"meta":{"allowedIn":["dmn:Decision"]},"properties":[{"name":"value","type":"String","isAttr":true}]}]}');function Vp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function Up(e,t,n){return t=Wp(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Hp()?Reflect.construct(t,n||[],Wp(e).constructor):t.apply(e,n))}function zp(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kp(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,Qp(i.key),i)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function qp(e,t,n){return(t=Qp(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wp(e){return Wp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Wp(e)}function Gp(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yp(e,t)}function Hp(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Hp=function(){return!!e})()}function Xp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Jp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xp(Object(n),!0).forEach((function(t){qp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Yp(e,t){return Yp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Yp(e,t)}function Zp(e){return function(e){if(Array.isArray(e))return Vp(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Vp(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vp(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qp(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}function eh(e,t){var n=function(e){return e&&e.businessObject||e}(e);return n&&"function"==typeof n.$instanceOf&&n.$instanceOf(t)}function th(e){return eh(e,"dmn:InputClause")}function nh(e){return eh(e,"dmn:OutputClause")}var ih=function(){return Kp((function e(t){zp(this,e),t.registerProvider(this)}),[{key:"getVariables",value:function(e,t){return e.map((function(e){return Jp(Jp({},e),{},{name:oh(e)})}))}}])}();function oh(e){var t=e.origin;return t&&eh(t,"dmn:Decision")?t.get("id"):e.name}ih.$inject=["variableResolver"];var sh={__init__:["camundaVariableProvider"],camundaVariableProvider:["type",ih]},rh=["boxedExpression","common","decisionTable","drd","literalExpression"],ah=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};zp(this,t);var n=e.boxedExpression,i=void 0===n?{}:n,o=e.common,s=void 0===o?{}:o,r=e.decisionTable,a=void 0===r?{}:r,l=e.drd,c=void 0===l?{}:l,u=e.literalExpression,d=void 0===u?{}:u,p=function(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.includes(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,rh),h=c.disableAdjustOrigin||s.disableAdjustOrigin,m=c.disableGrid||s.disableGrid;return Up(this,t,[Jp(Jp({},p),{},{common:Jp(Jp({},s),{},{feelLanguageContext:Jp({parserDialect:"camunda"},null==s?void 0:s.feelLanguageContext)}),boxedExpression:lh(i,[sh]),decisionTable:lh(a,[sh]),drd:lh(c,[h?Fp.A:Lp.A,m?{}:Pp.A,Np.DmnPropertiesPanelModule,Np.DmnPropertiesProviderModule]),literalExpression:lh(d,[sh])})])}return Gp(t,e),Kp(t)}(Tp);function lh(e,t){var n=e.additionalModules||[];return Jp(Jp({},e),{},{additionalModules:[].concat(Zp(t),Zp(n))})}class ch extends rn.uA{constructor(e,t){super(e,t),this.state={value:e.value}}onInput=e=>{const{onInput:t}=this.props,n=e.target.value;this.setState({value:n},(()=>{"function"==typeof t&&t(n)}))};onChange=e=>{const{onChange:t}=this.props;"function"==typeof t&&t(e.target.value)};onKeyDown=e=>{const{onKeyDown:t}=this.props;"function"==typeof t&&t(e)};onKeyUp=e=>{const{onKeyUp:t}=this.props;"function"==typeof t&&t(e)};componentDidUpdate(e){const{value:t}=this.props;t!==e.value&&t!==this.state.value&&this.setState({value:t})}render(){const{className:e,label:t,id:n,placeholder:i,type:o}=this.props,{value:s}=this.state;return(0,rn.bF)(64,"input",[e||"","dms-input"].join(" "),null,1,{"aria-label":t,placeholder:i||"",onChange:this.onChange,onInput:this.onInput,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,spellCheck:"false",type:o||"text",value:s,id:n})}}var uh=function(e){function t(e,n){var i;zp(this,t),(i=Up(this,t,[e,n]))._translate=n.injector.get("translate"),i._modeling=n.injector.get("modeling");var o=n.injector.get("debounceInput");return i.state={inputVariable:i.props.context.input.get("camunda:inputVariable")||""},i.handleInputVariableChange=i.handleInputVariableChange.bind(i),i._setInputVariable=o(i._setInputVariable),i}return Gp(t,e),Kp(t,[{key:"handleInputVariableChange",value:function(e){var t=this;this.setState({inputVariable:e||void 0},(function(){return t._setInputVariable(e)}))}},{key:"_setInputVariable",value:function(e){return this._modeling.updateProperties(this.props.context.input,{"camunda:inputVariable":e||void 0})}},{key:"render",value:function(){var e=this.state.inputVariable;return(0,rn.bF)(1,"div","context-menu-container",(0,rn.bF)(1,"div","dms-form-control",[(0,rn.bF)(1,"label","dms-label",this._translate("Input Variable"),0),(0,rn.sO)(2,ch,{className:"ref-input-variable",value:e||"",onInput:this.handleInputVariableChange,placeholder:this._translate("cellInput")})],4),2)}}])}(rn.uA),dh=Kp((function e(t){zp(this,e),t.onGetComponent("context-menu",(function(){if("input-edit"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).contextMenuType)return uh}))}));dh.$inject=["components"];var ph={__init__:["camundaPlatformInputVariable"],camundaPlatformInputVariable:["type",dh]};class hh extends rn.uA{constructor(e,t){super(e,t);const{validate:n,value:i}=e,o=n?n(i||""):void 0;this.state={validationWarning:o,value:i},this.onInput=this.onInput.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onKeyUp=this.onKeyUp.bind(this)}componentWillReceiveProps(e){const{validate:t,value:n}=e,i=t?t(n||""):void 0;this.setState({validationWarning:i,value:n})}onInput(e){const{onInput:t,validate:n}=this.props,i=n?n(e):void 0;this.setState({validationWarning:i,value:e}),"function"==typeof t&&t&&t({isValid:!i,value:e})}onKeyDown(e){const{target:t}=e,{value:n}=t,{onKeyDown:i,validate:o}=this.props,s=o?o(n):void 0;"function"==typeof i&&i({isValid:!s,value:n,event:e})}onKeyUp(e){const{target:t}=e,{value:n}=t,{onKeyUp:i,validate:o}=this.props,s=o?o(n):void 0;"function"==typeof i&&i({isValid:!s,value:n,event:e})}render(){const{placeholder:e,type:t,className:n,label:i}=this.props,{validationWarning:o,value:s}=this.state,r=["dms-validated-input",n].join(" "),a=[];return o&&a.push("invalid"),(0,rn.bF)(1,"div",r,[(0,rn.sO)(2,ch,{className:a,label:i,onInput:this.onInput,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,placeholder:e||"",type:t,value:s||""}),o&&(0,rn.bF)(1,"p","dms-hint dms-validation-warning",o,0)],0)}}var mh,gh=!1;"undefined"!=typeof document&&((mh=document.createElement("div")).innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',gh=!mh.getElementsByTagName("link").length,mh=void 0);var fh={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:gh?[1,"X<div>","</div>"]:[0,"",""]};fh.td=fh.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],fh.option=fh.optgroup=[1,'<select multiple="multiple">',"</select>"],fh.thead=fh.tbody=fh.colgroup=fh.caption=fh.tfoot=[1,"<table>","</table>"],fh.polyline=fh.ellipse=fh.polygon=fh.circle=fh.text=fh.line=fh.path=fh.rect=fh.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];var yh=function(e,t){if("string"!=typeof e)throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var i=n[1];if("body"==i)return(o=t.createElement("html")).innerHTML=e,o.removeChild(o.lastChild);var o,s=Object.prototype.hasOwnProperty.call(fh,i)?fh[i]:fh._default,r=s[0],a=s[1],l=s[2];for((o=t.createElement("div")).innerHTML=a+e+l;r--;)o=o.lastChild;if(o.firstChild==o.lastChild)return o.removeChild(o.firstChild);for(var c=t.createDocumentFragment();o.firstChild;)c.appendChild(o.removeChild(o.firstChild));return c};class vh extends rn.uA{constructor(e,t){super(e,t),function(e,t){const n=e.$inject;if(!n)return;const{injector:i}=t.context,o=[...n,function(...e){for(const i in e){const o=n[i],s=e[i];t[o]=s}}];i.invoke(o)}(this.constructor,this);const{value:n}=e;this.state={value:n,optionsVisible:!1},this._portalEl=null}componentDidMount(){document.addEventListener("mousedown",this.onGlobalClick),document.addEventListener("focusin",this.onFocusChanged),this.keyboard.addListener(this.onKeyboard)}componentWillUnmount(){document.removeEventListener("focusin",this.onFocusChanged),document.removeEventListener("mousedown",this.onGlobalClick),this.keyboard.removeListener(this.onKeyboard),this.removePortalEl()}componentWillReceiveProps(e){const{value:t}=e;this.setState({value:t})}componentWillUpdate(e,t){const{optionsVisible:n}=t;n?this._portalEl||this.addPortalEl():this._portalEl&&this.removePortalEl()}componentDidUpdate(){const{optionsVisible:e}=this.state;if(!e||!this.inputNode)return;const t=this.getOptionsBounds();!function(e,...t){Object.assign(e,...t)}(this._portalEl.style,t)}getOptionsBounds(){const e=this.renderer.getContainer(),{top:t,left:n,bottom:i}=e.getBoundingClientRect(),{top:o,left:s,width:r,height:a,bottom:l}=this.inputNode.getBoundingClientRect(),c=o+a-t+e.scrollTop,u={top:`${c}px`,left:`${s-n+e.scrollLeft}px`,width:`${r}px`,"max-height":`calc(100% - ${c}px)`};if(i-l<a){const e=i-o;u.bottom=`${e}px`,u["max-height"]=`calc(100% - ${e})`,delete u.top}return u}addPortalEl(){this._portalEl=yh('<div class="dms-select-options"></div>'),this.renderer.getContainer().appendChild(this._portalEl),this._portalEl.addEventListener("mousedown",bh)}removePortalEl(){var e;this._portalEl&&(this._portalEl.removeEventListener("mousedown",bh),(e=this._portalEl).parentNode&&e.parentNode.removeChild(e),this._portalEl=null)}onChange=e=>{this.setState({value:e});const{onChange:t}=this.props;"function"==typeof t&&t(e)};onInputClick=e=>{e.preventDefault(),e.stopPropagation(),this.setOptionsVisible(!this.state.optionsVisible),this.focusInput()};onInput=e=>{const{value:t}=e.target;this.onChange(t)};onOptionClick=(e,t)=>{t.preventDefault(),t.stopPropagation(),this.setOptionsVisible(!1),this.onChange(e),this.focusInput()};focusInput(){const e=this.inputNode;e.focus(),"selectionStart"in e&&(e.selectionStart=1e5)}checkClose(e){!this._portalEl||this._portalEl.contains(e)||this.parentNode.contains(e)||this.setOptionsVisible(!1)}onFocusChanged=e=>{this.checkClose(e.target)};onGlobalClick=e=>{this.checkClose(e.target)};select(e){const{options:t}=this.props,{value:n}=this.state;if(!t)return;const i=t.filter((e=>e.value===n))[0],o=i?t.indexOf(i):-1,s=-1===o?1===e?0:t.length-1:(o+e)%t.length,r=t[s<0?t.length+s:s];this.onChange(r.value)}setOptionsVisible(e){this.setState({optionsVisible:e})}onKeyDown=e=>{const{optionsVisible:t}=this.state;var n=e.which;40!==n&&38!==n||(e.stopPropagation(),e.preventDefault(),t?this.select(40===n?1:-1):this.setOptionsVisible(!0)),t&&(13!==n&&27!==n||(e.stopPropagation(),e.preventDefault(),this.setOptionsVisible(!1)))};onKeyboard=e=>{const{optionsVisible:t}=this.state;if(t)return 27===e?(this.setOptionsVisible(!1),!0):void 0};renderOptions(e,t){return(0,rn.bF)(1,"div","options",e.map((e=>(0,rn.bF)(1,"div",["option",t===e?"active":""].join(" "),e.label,0,{"data-value":e.value,onClick:t=>this.onOptionClick(e.value,t)}))),0)}render(){const{className:e,label:t,id:n,options:i,noInput:o,title:s}=this.props,{optionsVisible:r,value:a}=this.state,l=!!i&&i.filter((e=>e.value===a))[0],c=l?l.label:a;return(0,rn.bF)(1,"div",[e||"","dms-input-select"].join(" "),[o?(0,rn.bF)(1,"div","dms-input",c,0,{"aria-label":t,tabIndex:"0",onKeyDown:this.onKeyDown},null,(e=>this.inputNode=e)):(0,rn.bF)(64,"input","dms-input",null,1,{"aria-label":t,onInput:this.onInput,onKeyDown:this.onKeyDown,spellCheck:"false",type:"text",value:a,id:n},null,(e=>this.inputNode=e)),(0,rn.bF)(1,"span",["dms-input-select-icon",r?"dmn-icon-up":"dmn-icon-down"].join(" ")),r&&(0,rn.d5)(this.renderOptions(i,l),this._portalEl)],0,{title:s,onClick:this.onInputClick},null,(e=>this.parentNode=e))}}function bh(e){e.stopPropagation()}vh.$inject=["keyboard","renderer"];var _h=/^\d{4}(?:-\d\d){2}T(?:\d\d:){2}\d\d$/,xh=/^\[date and time\("(\d{4}(?:-\d\d){2}T(?:\d\d:){2}\d\d)"\)..date and time\("(\d{4}(?:-\d\d){2}T(?:\d\d:){2}\d\d)"/,Ch=/^(<|>)\s*date and time\("(\d{4}(?:-\d\d){2}T(?:\d\d:){2}\d\d)"\)/,Eh=/^date and time\("(\d{4}(?:-\d\d){2}T(?:\d\d:){2}\d\d)"\)$/;function wh(e){if(!_h.test(e.trim()))return"Date must match pattern yyyy-MM-ddTHH:mm:ss."}function Dh(e,t){return"exact"===e?'date and time("'.concat(t[0],'")'):"before"===e?'< date and time("'.concat(t[0],'")'):"after"===e?'> date and time("'.concat(t[0],'")'):"between"===e?'[date and time("'.concat(t[0],'")..date and time("').concat(t[1],'")]'):void 0}function Sh(){var e=new Date;return e.setUTCHours(0,0,0,0),e.toISOString().slice(0,-5)}function Ah(e){if(!e||""===e.trim())return{type:"exact",date:""};var t=e.match(xh);return t?{type:"between",dates:[t[1],t[2]]}:(t=e.match(Ch))?{type:"<"===t[1]?"before":"after",date:t[2]}:(t=e.match(Eh))?{type:"exact",date:t[1]}:void 0}var jh="exact",Oh="between",Rh=function(e){function t(e,n){var i;zp(this,t),(i=Up(this,t,[e,n]))._modeling=n.injector.get("modeling");var o,s=Ah(i.props.context.element.businessObject.text);s?(o=s.date?[s.date,""]:s.dates?s.dates:["",""],i.state={type:s.type,dates:o}):i.state={type:jh,dates:["",""]};var r=n.injector.get("debounceInput");return i.debouncedEditCell=r(i.editCell.bind(i)),i.editCell=i.editCell.bind(i),i.onTypeChange=i.onTypeChange.bind(i),i.onSetStartDateTodayClick=i.onSetStartDateTodayClick.bind(i),i.onSetEndDateTodayClick=i.onSetEndDateTodayClick.bind(i),i.onStartDateInput=i.onStartDateInput.bind(i),i.onEndDateInput=i.onEndDateInput.bind(i),i}return Gp(t,e),Kp(t,[{key:"editCell",value:function(e,t){this._modeling.editCell(e,t)}},{key:"onTypeChange",value:function(e){var t=this.props.context.element,n=this.state.dates;this.setState({type:e}),Ah(Dh(e,n))&&this.editCell(t.businessObject,Dh(e,n))}},{key:"onSetStartDateTodayClick",value:function(){var e=this.props.context.element,t=this.state,n=t.dates,i=t.type,o=Sh();this.setState({dates:[o,n[1]]}),Ah(Dh(i,[o,n[1]]))&&this.editCell(e.businessObject,Dh(i,[o,n[1]]))}},{key:"onSetEndDateTodayClick",value:function(){var e=this.props.context.element,t=this.state,n=t.dates,i=t.type,o=Sh();this.setState({dates:[n[0],o]}),Ah(Dh(i,[n[0],o]))&&this.editCell(e.businessObject,Dh(i,[n[0],o]))}},{key:"onStartDateInput",value:function(e){var t=e.isValid,n=e.value;if(t){var i=this.props.context.element,o=this.state,s=o.dates,r=o.type;this.setState({dates:[n,s[1]]}),this.debouncedEditCell(i.businessObject,Dh(r,[n,s[1]]))}}},{key:"onEndDateInput",value:function(e){var t=e.isValid,n=e.value;if(t){var i=this.props.context.element,o=this.state,s=o.dates,r=o.type;this.setState({dates:[s[0],n]}),this.debouncedEditCell(i.businessObject,Dh(r,[s[0],n]))}}},{key:"render",value:function(){var e=this.state,t=e.dates,n=e.type,i=[{label:"Exactly",value:jh},{label:"Before",value:"before"},{label:"After",value:"after"},{label:"Between",value:Oh}];return(0,rn.bF)(1,"div","context-menu-container simple-date-edit",[(0,rn.bF)(1,"h3","dms-heading",(0,rn.eW)("Edit Date"),2),(0,rn.bF)(1,"div","dms-fill-row",(0,rn.sO)(2,vh,{noInput:!0,onChange:this.onTypeChange,options:i,value:n}),2),(0,rn.bF)(1,"h4","dms-heading",n===Oh?"Edit Start Date":"Set Date",0),(0,rn.bF)(1,"div",null,[(0,rn.sO)(2,hh,{className:"start-date-input dms-block",onInput:this.onStartDateInput,placeholder:"e.g. ".concat(Sh()),validate:wh,value:t[0]}),(0,rn.bF)(1,"p","dms-hint",[(0,rn.bF)(1,"button","use-today",(0,rn.eW)("Use today"),2,{type:"button",onClick:this.onSetStartDateTodayClick}),(0,rn.eW)(".")],4)],4),n===Oh&&(0,rn.bF)(1,"h4","dms-heading",(0,rn.eW)("Edit End Date"),2),n===Oh&&(0,rn.bF)(1,"div",null,[(0,rn.sO)(2,hh,{className:"end-date-input dms-block",onInput:this.onEndDateInput,placeholder:"e.g. ".concat(Sh()),validate:wh,value:t[1]}),(0,rn.bF)(1,"p","dms-hint",[(0,rn.bF)(1,"button","use-today",(0,rn.eW)("Use today"),2,{type:"button",onClick:this.onSetEndDateTodayClick}),(0,rn.eW)(".")],4)],4)],0)}}])}(rn.uA),Mh=function(e){function t(e,n){var i;zp(this,t),(i=Up(this,t,[e,n]))._modeling=n.injector.get("modeling");var o=Ah(i.props.context.element.businessObject.text);i.state={date:o?o.date:""};var s=n.injector.get("debounceInput");return i.debouncedEditCell=s(i.editCell.bind(i)),i.editCell=i.editCell.bind(i),i.onClick=i.onClick.bind(i),i.onInput=i.onInput.bind(i),i}return Gp(t,e),Kp(t,[{key:"editCell",value:function(e,t){this._modeling.editCell(e,t)}},{key:"onClick",value:function(){var e=this.props.context.element,t=Sh();this.setState({date:t}),this.editCell(e.businessObject,'date and time("'.concat(t,'")'))}},{key:"onInput",value:function(e){var t=e.isValid,n=e.value;if(t){var i=this.props.context.element;this.setState({date:n}),this.debouncedEditCell(i.businessObject,'date and time("'.concat(n,'")'))}}},{key:"render",value:function(){var e=this.state.date;return(0,rn.bF)(1,"div","context-menu-container simple-date-edit",[(0,rn.bF)(1,"h3","dms-heading",(0,rn.eW)("Edit Date"),2),(0,rn.bF)(1,"h4","dms-heading",(0,rn.eW)("Set Date"),2),(0,rn.bF)(1,"div",null,[(0,rn.sO)(2,hh,{onInput:this.onInput,placeholder:"e.g. ".concat(Sh()),validate:wh,value:e,className:"dms-block"}),(0,rn.bF)(1,"p","dms-hint",[(0,rn.eW)("Set date "),(0,rn.bF)(1,"button","use-today",(0,rn.eW)("to today"),2,{type:"button",onClick:this.onClick}),(0,rn.eW)(".")],4)],4)],4)}}])}(rn.uA),kh=Kp((function e(t,n){zp(this,e),n.registerProvider((function(e){var t=Ih(e);return(th(e.col)||nh(e.col))&&Th(t)})),t.onGetComponent("context-menu",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.contextMenuType&&"simple-mode-edit"===e.contextMenuType){if(!e.element)return;if(Th(Ih(e.element))){if(th(e.element.col))return Rh;if(nh(e.element.col))return Mh}}}))}));function Ih(e){return th(e.col)?e.col&&e.col.businessObject.inputExpression.typeRef:e.col&&e.col.businessObject.typeRef}function Th(e){return"date"===e}kh.$inject=["components","simpleMode"];var Fh={__init__:["simpleDateEdit"],simpleDateEdit:["type",kh]},Ph={simpleDurationEdit:["type",Lh],simpleDateTimeEdit:["type",Lh],simpleTimeEdit:["type",Lh]};function Lh(){}var Nh=[{label:"FEEL",value:"feel"},{label:"JUEL",value:"juel"},{label:"JavaScript",value:"javascript"},{label:"Groovy",value:"groovy"},{label:"Python",value:"python"},{label:"JRuby",value:"jruby"}],$h=["string","boolean","integer","long","double","date"],Bh=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};zp(this,t);var n=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).expressionLanguages||{};return{options:e.options||Nh,default:e.default||{editor:"feel"}}}(e.common),i=e.decisionTable||{},o=e.drd||{},s=e.boxedExpression||{};return Up(this,t,[Jp(Jp({},e),{},{boxedExpression:s,common:Jp(Jp({dataTypes:$h},e.common),{},{expressionLanguages:n}),decisionTable:Vh(i,[ph,Fh,Ph]),drd:Vh(o,[Np.CamundaPropertiesProviderModule]),moddleExtensions:Jp({camunda:$p},e.moddleExtensions)})])}return Gp(t,e),Kp(t)}(ah);function Vh(e,t){var n=e.additionalModules||[];return Jp(Jp({},e),{},{additionalModules:[].concat(Zp(t),Zp(n))})}var Uh={zeebe:Bp},zh=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};zp(this,t);var n,i,o,s=e.common,r=void 0===s?{}:s,a=e.drd,l=void 0===a?{}:a,c=e.moddleExtensions,u=void 0===c?{}:c,d=r.propertiesPanel,p=void 0===d?{}:d;return Up(this,t,[Jp(Jp({},e),{},{common:Jp(Jp({},r),{},{propertiesPanel:Jp(Jp({},p),{},{tooltip:Np.ZeebeTooltipProvider})}),drd:(n=l,i=[Np.ZeebePropertiesProviderModule],o=n.additionalModules||[],Jp(Jp({},n),{},{additionalModules:[].concat(Zp(i),Zp(o))})),moddleExtensions:Jp(Jp({},Uh),u)})])}return Gp(t,e),Kp(t)}(ah)},72692:(e,t,n)=>{"use strict";n.d(t,{V:()=>C});const i=Object.prototype.toString,o=Object.prototype.hasOwnProperty;function s(e){return"[object Array]"===i.call(e)}function r(e){const t=i.call(e);return"[object Function]"===t||"[object AsyncFunction]"===t||"[object GeneratorFunction]"===t||"[object AsyncGeneratorFunction]"===t||"[object Proxy]"===t}function a(e){return"[object String]"===i.call(e)}function l(e,t){return o.call(e,t)}function c(e,t){return!!function(e,t){const n=function(e){return r(e)?e:t=>t===e}(t);let i;return function(e,t){let n,i;if(void 0===e)return;const o=s(e)?d:u;for(let s in e)if(l(e,s)&&(n=e[s],i=t(n,o(s)),!1===i))return n}(e,(function(e,t){if(n(e,t))return i=e,!1})),i}(e,t)}function u(e){return e}function d(e){return Number(e)}function p(e,...t){return Object.assign(e,...t)}var h=n(58886),m=n(53112);function g(e,t){h.ij.call(this,e,t)}g.prototype=Object.create(h.ij.prototype),g.prototype.fromXML=function(e,t,n){a(t)||(n=t,t="dmn:Definitions");var i=new m.m(p({model:this,lax:!0},n)),o=i.handler(t);return i.fromXML(e,o)},g.prototype.toXML=function(e,t){var n=new m.A(t);return new Promise((function(t,i){try{return t({xml:n.toXML(e)})}catch(e){return i(e)}}))};var f={dc:{name:"DC",prefix:"dc",uri:"http://www.omg.org/spec/DMN/20180521/DC/",types:[{name:"Dimension",properties:[{name:"width",isAttr:!0,type:"Real"},{name:"height",isAttr:!0,type:"Real"}]},{name:"Bounds",properties:[{name:"height",isAttr:!0,type:"Real"},{name:"width",isAttr:!0,type:"Real"},{name:"x",isAttr:!0,type:"Real"},{name:"y",isAttr:!0,type:"Real"}]},{name:"Point",properties:[{name:"x",isAttr:!0,type:"Real"},{name:"y",isAttr:!0,type:"Real"}]},{name:"Color",properties:[{name:"red",type:"UML_Standard_Profile.mdzip:eee_1045467100323_917313_65"},{name:"green",type:"UML_Standard_Profile.mdzip:eee_1045467100323_917313_65"},{name:"blue",type:"UML_Standard_Profile.mdzip:eee_1045467100323_917313_65"}]}],associations:[],enumerations:[{name:"AlignmentKind",literalValues:[{name:"start"},{name:"center"},{name:"end"}]}]},di:{name:"DI",prefix:"di",uri:"http://www.omg.org/spec/DMN/20180521/DI/",types:[{name:"DiagramElement",isAbstract:!0,properties:[{name:"extension",type:"Extension"},{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"style",isReference:!0,type:"Style",xml:{serialize:"property"}},{name:"sharedStyle",isReference:!0,isVirtual:!0,type:"Style"}]},{name:"Diagram",superClass:["DiagramElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,type:"Real"}]},{name:"Shape",isAbstract:!0,properties:[{name:"bounds",type:"dc:Bounds"}],superClass:["DiagramElement"]},{name:"Edge",isAbstract:!0,properties:[{name:"waypoint",type:"dc:Point",isMany:!0,xml:{serialize:"property"}}],superClass:["DiagramElement"]},{name:"Style",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"}]},{name:"Extension",properties:[{name:"values",isMany:!0,type:"Element"}]}],associations:[],enumerations:[],xml:{tagAlias:"lowerCase"}},dmn:{name:"DMN",prefix:"dmn",uri:"https://www.omg.org/spec/DMN/20191111/MODEL/",types:[{name:"AuthorityRequirement",superClass:["DMNElement"],properties:[{name:"requiredAuthority",type:"DMNElementReference",xml:{serialize:"property"}},{name:"requiredDecision",type:"DMNElementReference",xml:{serialize:"property"}},{name:"requiredInput",type:"DMNElementReference",xml:{serialize:"property"}}]},{name:"ItemDefinition",superClass:["NamedElement"],properties:[{name:"typeRef",type:"String"},{name:"allowedValues",type:"UnaryTests",xml:{serialize:"property"}},{name:"typeLanguage",type:"String",isAttr:!0},{name:"itemComponent",type:"ItemDefinition",isMany:!0,xml:{serialize:"property"}},{name:"functionItem",type:"FunctionItem"},{name:"isCollection",isAttr:!0,type:"Boolean"}]},{name:"Definitions",superClass:["NamedElement"],properties:[{name:"import",type:"Import",isMany:!0},{name:"itemDefinition",type:"ItemDefinition",isMany:!0},{name:"drgElement",type:"DRGElement",isMany:!0},{name:"artifact",type:"Artifact",isMany:!0},{name:"elementCollection",type:"ElementCollection",isMany:!0},{name:"businessContextElement",type:"BusinessContextElement",isMany:!0},{name:"namespace",type:"String",isAttr:!0},{name:"expressionLanguage",type:"String",isAttr:!0},{name:"typeLanguage",type:"String",isAttr:!0},{name:"exporter",isAttr:!0,type:"String"},{name:"exporterVersion",isAttr:!0,type:"String"},{name:"dmnDI",type:"dmndi:DMNDI"}]},{name:"KnowledgeSource",superClass:["DRGElement"],properties:[{name:"authorityRequirement",type:"AuthorityRequirement",isMany:!0},{name:"type",type:"String"},{name:"owner",type:"DMNElementReference",xml:{serialize:"property"}},{name:"locationURI",type:"String",isAttr:!0}]},{name:"DecisionRule",superClass:["DMNElement"],properties:[{name:"inputEntry",type:"UnaryTests",isMany:!0,xml:{serialize:"property"}},{name:"outputEntry",type:"LiteralExpression",isMany:!0,xml:{serialize:"property"}},{name:"annotationEntry",type:"RuleAnnotation",isMany:!0,xml:{serialize:"property"}}]},{name:"Expression",isAbstract:!0,superClass:["DMNElement"],properties:[{name:"typeRef",isAttr:!0,type:"String"}]},{name:"InformationItem",superClass:["NamedElement"],properties:[{name:"typeRef",isAttr:!0,type:"String"}]},{name:"Decision",superClass:["DRGElement"],properties:[{name:"question",type:"String",xml:{serialize:"property"}},{name:"allowedAnswers",type:"String",xml:{serialize:"property"}},{name:"variable",type:"InformationItem",xml:{serialize:"property"}},{name:"informationRequirement",type:"InformationRequirement",isMany:!0},{name:"knowledgeRequirement",type:"KnowledgeRequirement",isMany:!0},{name:"authorityRequirement",type:"AuthorityRequirement",isMany:!0},{name:"supportedObjective",isMany:!0,type:"DMNElementReference",xml:{serialize:"property"}},{name:"impactedPerformanceIndicator",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}},{name:"decisionMaker",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}},{name:"decisionOwner",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}},{name:"usingProcess",isMany:!0,type:"DMNElementReference",xml:{serialize:"property"}},{name:"usingTask",isMany:!0,type:"DMNElementReference",xml:{serialize:"property"}},{name:"decisionLogic",type:"Expression"}]},{name:"Invocation",superClass:["Expression"],properties:[{name:"calledFunction",type:"Expression"},{name:"binding",type:"Binding",isMany:!0}]},{name:"OrganisationalUnit",superClass:["BusinessContextElement"],properties:[{name:"decisionMade",type:"Decision",isReference:!0,isMany:!0},{name:"decisionOwned",type:"Decision",isReference:!0,isMany:!0}]},{name:"Import",superClass:["NamedElement"],properties:[{name:"importType",type:"String",isAttr:!0},{name:"locationURI",type:"String",isAttr:!0},{name:"namespace",type:"String",isAttr:!0}]},{name:"InformationRequirement",superClass:["DMNElement"],properties:[{name:"requiredDecision",type:"DMNElementReference",xml:{serialize:"property"}},{name:"requiredInput",type:"DMNElementReference",xml:{serialize:"property"}}]},{name:"ElementCollection",superClass:["NamedElement"],properties:[{name:"drgElement",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}}]},{name:"DRGElement",isAbstract:!0,superClass:["NamedElement"],properties:[]},{name:"InputData",superClass:["DRGElement"],properties:[{name:"variable",type:"InformationItem",xml:{serialize:"property"}}]},{name:"DMNElement",isAbstract:!0,properties:[{name:"description",type:"String"},{name:"extensionElements",type:"ExtensionElements"},{name:"id",type:"String",isAttr:!0,isId:!0},{name:"extensionAttribute",type:"ExtensionAttribute",isMany:!0},{name:"label",isAttr:!0,type:"String"}]},{name:"InputClause",superClass:["DMNElement"],properties:[{name:"inputExpression",type:"LiteralExpression",xml:{serialize:"property"}},{name:"inputValues",type:"UnaryTests",xml:{serialize:"property"}}]},{name:"DecisionTable",superClass:["Expression"],properties:[{name:"input",type:"InputClause",isMany:!0,xml:{serialize:"property"}},{name:"output",type:"OutputClause",isMany:!0,xml:{serialize:"property"}},{name:"annotation",type:"RuleAnnotationClause",isMany:!0,xml:{serialize:"property"}},{name:"rule",type:"DecisionRule",isMany:!0,xml:{serialize:"property"}},{name:"hitPolicy",type:"HitPolicy",isAttr:!0,default:"UNIQUE"},{name:"aggregation",type:"BuiltinAggregator",isAttr:!0},{name:"preferredOrientation",type:"DecisionTableOrientation",isAttr:!0},{name:"outputLabel",isAttr:!0,type:"String"}]},{name:"LiteralExpression",superClass:["Expression"],properties:[{name:"expressionLanguage",type:"String",isAttr:!0},{name:"text",type:"String"},{name:"importedValues",type:"ImportedValues"}]},{name:"Binding",properties:[{name:"parameter",type:"InformationItem",xml:{serialize:"property"}},{name:"bindingFormula",type:"Expression"}]},{name:"KnowledgeRequirement",superClass:["DMNElement"],properties:[{name:"requiredKnowledge",type:"DMNElementReference",xml:{serialize:"property"}}]},{name:"BusinessKnowledgeModel",superClass:["Invocable"],properties:[{name:"encapsulatedLogic",type:"FunctionDefinition",xml:{serialize:"property"}},{name:"knowledgeRequirement",type:"KnowledgeRequirement",isMany:!0},{name:"authorityRequirement",type:"AuthorityRequirement",isMany:!0}]},{name:"BusinessContextElement",isAbstract:!0,superClass:["NamedElement"],properties:[{name:"URI",type:"String",isAttr:!0}]},{name:"PerformanceIndicator",superClass:["BusinessContextElement"],properties:[{name:"impactingDecision",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}}]},{name:"FunctionDefinition",superClass:["Expression"],properties:[{name:"formalParameter",type:"InformationItem",isMany:!0,xml:{serialize:"property"}},{name:"body",type:"Expression"},{name:"kind",type:"FunctionKind",isAttr:!0}]},{name:"Context",superClass:["Expression"],properties:[{name:"contextEntry",type:"ContextEntry",isMany:!0}]},{name:"ContextEntry",superClass:["DMNElement"],properties:[{name:"variable",type:"InformationItem",xml:{serialize:"property"}},{name:"value",type:"Expression"}]},{name:"List",superClass:["Expression"],properties:[{name:"elements",isMany:!0,type:"Expression"}]},{name:"Relation",superClass:["Expression"],properties:[{name:"column",type:"InformationItem",isMany:!0,xml:{serialize:"property"}},{name:"row",type:"List",isMany:!0,xml:{serialize:"property"}}]},{name:"OutputClause",superClass:["DMNElement"],properties:[{name:"outputValues",type:"UnaryTests",xml:{serialize:"property"}},{name:"defaultOutputEntry",type:"LiteralExpression",xml:{serialize:"property"}},{name:"name",isAttr:!0,type:"String"},{name:"typeRef",isAttr:!0,type:"String"}]},{name:"UnaryTests",superClass:["Expression"],properties:[{name:"text",type:"String"},{name:"expressionLanguage",type:"String",isAttr:!0}]},{name:"NamedElement",isAbstract:!0,superClass:["DMNElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"ImportedValues",superClass:["Import"],properties:[{name:"importedElement",type:"String"},{name:"expressionLanguage",type:"String",isAttr:!0}]},{name:"DecisionService",superClass:["Invocable"],properties:[{name:"outputDecision",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}},{name:"encapsulatedDecision",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}},{name:"inputDecision",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}},{name:"inputData",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}}]},{name:"ExtensionElements",properties:[{name:"values",type:"Element",isMany:!0}]},{name:"ExtensionAttribute",properties:[{name:"value",type:"Element"},{name:"valueRef",type:"Element",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Element",isAbstract:!0,properties:[{name:"extensionAttribute",type:"ExtensionAttribute",isAttr:!0,isReference:!0},{name:"elements",type:"ExtensionElements",isAttr:!0,isReference:!0}]},{name:"Artifact",isAbstract:!0,superClass:["DMNElement"],properties:[]},{name:"Association",superClass:["Artifact"],properties:[{name:"sourceRef",type:"DMNElementReference",xml:{serialize:"property"}},{name:"targetRef",type:"DMNElementReference",xml:{serialize:"property"}},{name:"associationDirection",type:"AssociationDirection",isAttr:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat",isAttr:!0,type:"String",default:"text/plain"}]},{name:"RuleAnnotationClause",properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"RuleAnnotation",properties:[{name:"text",type:"String"}]},{name:"Invocable",isAbstract:!0,superClass:["DRGElement"],properties:[{name:"variable",type:"InformationItem",xml:{serialize:"property"}}]},{name:"Group",superClass:["Artifact"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"FunctionItem",superClass:["DMNElement"],properties:[{name:"parameters",isMany:!0,type:"InformationItem",xml:{serialize:"property"}},{name:"outputTypeRef",isAttr:!0,type:"String"}]},{name:"DMNElementReference",properties:[{isAttr:!0,name:"href",type:"String"}]}],enumerations:[{name:"HitPolicy",literalValues:[{name:"UNIQUE"},{name:"FIRST"},{name:"PRIORITY"},{name:"ANY"},{name:"COLLECT"},{name:"RULE ORDER"},{name:"OUTPUT ORDER"}]},{name:"BuiltinAggregator",literalValues:[{name:"SUM"},{name:"COUNT"},{name:"MIN"},{name:"MAX"}]},{name:"DecisionTableOrientation",literalValues:[{name:"Rule-as-Row"},{name:"Rule-as-Column"},{name:"CrossTable"}]},{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"FunctionKind",literalValues:[{name:"FEEL"},{name:"Java"},{name:"PMML"}]}],associations:[],xml:{tagAlias:"lowerCase"}},dmndi:{name:"DMNDI",prefix:"dmndi",uri:"https://www.omg.org/spec/DMN/20191111/DMNDI/",types:[{name:"DMNDI",properties:[{name:"diagrams",type:"DMNDiagram",isMany:!0},{name:"styles",type:"DMNStyle",isMany:!0}]},{name:"DMNStyle",superClass:["di:Style"],properties:[{name:"fillColor",type:"dc:Color",isAttr:!0},{name:"strokeColor",type:"dc:Color",isAttr:!0},{name:"fontColor",type:"dc:Color",isAttr:!0},{name:"fontSize",isAttr:!0,type:"Real"},{name:"fontFamily",isAttr:!0,type:"String"},{name:"fontItalic",isAttr:!0,type:"Boolean"},{name:"fontBold",isAttr:!0,type:"Boolean"},{name:"fontUnderline",isAttr:!0,type:"Boolean"},{name:"fontStrikeThrough",isAttr:!0,type:"Boolean"},{name:"labelHorizontalAlignment",type:"dc:AlignmentKind",isAttr:!0},{name:"labelVerticalAlignment",type:"dc:AlignmentKind",isAttr:!0}]},{name:"DMNDiagram",superClass:["di:Diagram"],properties:[{name:"dmnElementRef",type:"dmn:DMNElement",isAttr:!0,isReference:!0},{name:"size",type:"Size"},{name:"localStyle",type:"DMNStyle",isVirtual:!0},{name:"sharedStyle",type:"DMNStyle",isVirtual:!0,isReference:!0,redefines:"di:DiagramElement#sharedStyle"},{name:"diagramElements",type:"DMNDiagramElement",isMany:!0}]},{name:"DMNDiagramElement",isAbstract:!0,superClass:["di:DiagramElement"],properties:[{name:"dmnElementRef",type:"dmn:DMNElement",isAttr:!0,isReference:!0},{name:"sharedStyle",type:"DMNStyle",isVirtual:!0,isReference:!0,redefines:"di:DiagramElement#sharedStyle"},{name:"localStyle",type:"DMNStyle",isVirtual:!0},{name:"label",type:"DMNLabel"}]},{name:"DMNLabel",superClass:["di:Shape"],properties:[{name:"text",type:"Text"}]},{name:"DMNShape",superClass:["di:Shape","DMNDiagramElement"],properties:[{name:"isListedInputData",isAttr:!0,type:"Boolean"},{name:"decisionServiceDividerLine",type:"DMNDecisionServiceDividerLine"},{name:"isCollapsed",isAttr:!0,type:"Boolean"}]},{name:"DMNEdge",superClass:["di:Edge","DMNDiagramElement"],properties:[{name:"sourceElement",type:"DMNDiagramElement",isAttr:!0,isReference:!0},{name:"targetElement",type:"DMNDiagramElement",isAttr:!0,isReference:!0}]},{name:"DMNDecisionServiceDividerLine",superClass:["di:Edge"]},{name:"Text",properties:[{name:"text",isBody:!0,type:"String"}]},{name:"Size",superClass:["dc:Dimension"]}],associations:[],enumerations:[]},biodi:{name:"bpmn.io DI for DMN",uri:"http://bpmn.io/schema/dmn/biodi/2.0",prefix:"biodi",xml:{tagAlias:"lowerCase"},types:[{name:"DecisionTable",isAbstract:!0,extends:["dmn:DecisionTable"],properties:[{name:"annotationsWidth",isAttr:!0,type:"Integer"}]},{name:"OutputClause",isAbstract:!0,extends:["dmn:OutputClause"],properties:[{name:"width",isAttr:!0,type:"Integer"}]},{name:"InputClause",isAbstract:!0,extends:["dmn:InputClause"],properties:[{name:"width",isAttr:!0,type:"Integer"}]}]}};const y=new(n(64847).A)([32,36,1]),v=new function(e){return new g(p({},f,e),void 0)}({biodi:{name:"bpmn.io DI for DMN",uri:"http://bpmn.io/schema/dmn/biodi/1.0",prefix:"biodi",xml:{tagAlias:"lowerCase"},types:[{name:"Bounds",superClass:["dc:Bounds","Element"]},{name:"Edge",superClass:["Element"],properties:[{name:"source",type:"String",isAttr:!0},{name:"waypoints",type:"Waypoint",isMany:!0,xml:{serialize:"property"}}]},{name:"Waypoint",superClass:["dc:Point"]}]}}),b='"http://www.omg.org/spec/DMN/20151101/dmn.xsd"',_='"http://www.omg.org/spec/DMN/20180521/MODEL/"',x='"https://www.omg.org/spec/DMN/20191111/MODEL/"';async function C(e){return a(e)?E(b,e)?async function(e){const t=e.replace(b,x),[n,i]=await async function(e){return v.fromXML(e,"dmn:Definitions").then((e=>[e.rootElement,null]),(e=>[null,e]))}(t);if(i)return e;D(n),A(n),function(e,t){const n=[];if([].concat(e.get("drgElement"),e.get("artifact")).forEach((e=>{const i=e.get("extensionElements");i&&(i.get("values").forEach((i=>{if(j(i,"biodi:Bounds")){const o=t.create("dc:Bounds",{height:i.get("height"),width:i.get("width"),x:i.get("x"),y:i.get("y")}),s=t.create("dmndi:DMNShape",{bounds:o,dmnElementRef:e});o.$parent=s,w(s),n.push(s),s.$parent=n}if(j(i,"biodi:Edge")){const a=(o=e,r=i.get("source"),j(o,"dmn:Association")?o:Object.values(o).reduce(((e,t)=>s(t)?e||t.find((e=>{if(j(e,"dmn:DMNElement"))return Object.values(e).find((e=>{if(j(e,"dmn:DMNElementReference")){const{href:t}=e;return t.replace("#","").includes(r)}}))})):e),null));if(!a)return;const l=i.get("waypoints").map((e=>t.create("dc:Point",{x:e.get("x"),y:e.get("y")}))),c=t.create("dmndi:DMNEdge",{dmnElementRef:a,waypoint:l});a.$parent=c,w(c),l.forEach((e=>e.$parent=c)),n.push(c),c.$parent=n}var o,r})),i.set("values",i.get("values").filter((e=>!O(e,["biodi:Bounds","biodi:Edge"])))),i.get("values").length||e.set("extensionElements",void 0))})),n.length){const i=function(e){const t=e.create("dmndi:DMNDiagram",{diagramElements:[]});w(t);const n=e.create("dmndi:DMNDI",{diagrams:[t]});return t.$parent=n,n}(t);e.set("dmnDI",i),i.$parent=e;const o=i.get("diagrams")[0];o.set("diagramElements",n),n.forEach((e=>e.$parent=o))}}(n,v);const{xml:o}=await v.toXML(n,{format:!0});return o}(e):E(_,e)?async function(e){return e.replace(_,x).replace('"http://www.omg.org/spec/DMN/20180521/DMNDI/"','"https://www.omg.org/spec/DMN/20191111/DMNDI/"')}(e):(E(x,e),e):e}function E(e,t){return t.includes(e)}function w(e){e.id||O(e,["dmn:DMNElement","dmndi:DMNDiagram","dmndi:DMNDiagramElement"])&&(e.id=y.nextPrefixed(e.$type.split(":")[1]+"_",e))}function D(e){w(e),Object.values(e).forEach((e=>{e.$type&&(w(e),D(e)),s(e)&&e.forEach(D)}))}function S(e){j(e,"dmn:NamedElement")&&!e.name&&(e.name=e.id)}function A(e){S(e),Object.values(e).forEach((e=>{e.$type&&(S(e),A(e)),s(e)&&e.forEach(A)}))}function j(e,t){return r(e.$instanceOf)&&e.$instanceOf(t)}function O(e,t){return c(t,(t=>j(e,t)))}},75668:(e,t,n)=>{"use strict";n.d(t,{uA:()=>Me,sO:()=>v,d5:()=>Se,eW:()=>b,bF:()=>y,_B:()=>_,XX:()=>De});var i="$NO_OP",o="a runtime error occured! Use Inferno in development environment to find the error.",s=Array.isArray;function r(e){var t=typeof e;return"string"===t||"number"===t}function a(e){return h(e)||p(e)}function l(e){return p(e)||!1===e||function(e){return!0===e}(e)||h(e)}function c(e){return"function"==typeof e}function u(e){return"string"==typeof e}function d(e){return"number"==typeof e}function p(e){return null===e}function h(e){return void 0===e}function m(e,t){var n={};if(e)for(var i in e)n[i]=e[i];if(t)for(var o in t)n[o]=t[o];return n}var g="$";function f(e,t,n,i,o,s,r,a){return{childFlags:e,children:t,className:n,dom:null,flags:i,key:void 0===o?null:o,parentVNode:null,props:void 0===s?null:s,ref:void 0===r?null:r,type:a}}function y(e,t,n,i,o,s,r,a){var l=void 0===o?1:o,c=f(l,i,n,e,r,s,a,t),u=D.createVNode;return"function"==typeof u&&u(c),0===l&&w(c,c.children),c}function v(e,t,n,i,o){(2&e)>0&&(e=t.prototype&&c(t.prototype.render)?4:8);var s=t.defaultProps;if(!a(s))for(var r in n||(n={}),s)h(n[r])&&(n[r]=s[r]);if((8&e)>0){var l=t.defaultHooks;if(!a(l))if(o)for(var u in l)h(o[u])&&(o[u]=l[u]);else o=l}var d=f(1,null,null,e,i,n,o,t),p=D.createVNode;return c(p)&&p(d),d}function b(e,t){return f(1,a(e)?"":e,null,16,t,null,null,null)}function _(e){var t=e.props;if(t){var n=e.flags;481&n&&(void 0!==t.children&&a(e.children)&&w(e,t.children),void 0!==t.className&&(e.className=t.className||null,t.className=void 0)),void 0!==t.key&&(e.key=t.key,t.key=void 0),void 0!==t.ref&&(e.ref=8&n?m(e.ref,t.ref):t.ref,t.ref=void 0)}return e}function x(e){var t,n=e.flags;if(14&n){var i,o=e.props;if(!p(o))for(var s in i={},o)i[s]=o[s];t=v(n,e.type,i,e.key,e.ref)}else 481&n?t=y(n,e.type,e.className,e.children,e.childFlags,e.props,e.key,e.ref):16&n?t=b(e.children,e.key):1024&n&&(t=e);return t}function C(){return b("",null)}function E(e,t,n,i){for(var o=e.length;n<o;n++){var a=e[n];if(!l(a)){var c=i+g+n;if(s(a))E(a,t,0,c);else{if(r(a))a=b(a,c);else{var d=a.key,h=u(d)&&d[0]===g;p(a.dom)&&!h||(a=x(a)),p(d)||h?a.key=c:a.key=i+d}t.push(a)}}}}function w(e,t){var n,i=1;if(l(t))n=t;else if(u(t))i=2,n=b(t);else if(d(t))i=2,n=b(t+"");else if(s(t)){var o=t.length;if(0===o)n=null,i=1;else{(Object.isFrozen(t)||!0===t.$)&&(t=t.slice()),i=8;for(var a=0;a<o;a++){var c=t[a];if(l(c)||s(c)){n=n||t.slice(0,a),E(t,n,a,"");break}if(r(c))(n=n||t.slice(0,a)).push(b(c,g+a));else{var h=c.key,m=p(c.dom),f=p(h),y=!f&&u(h)&&h[0]===g;!m||f||y?(n=n||t.slice(0,a),m&&!y||(c=x(c)),(f||y)&&(c.key=g+a),n.push(c)):n&&n.push(c)}}(n=n||t).$=!0}}else n=t,p(t.dom)||(n=x(t)),i=2;return e.children=n,e.childFlags=i,e}var D={afterRender:null,beforeRender:null,createVNode:null,renderComplete:null},S="http://www.w3.org/1999/xlink",A="http://www.w3.org/XML/1998/namespace",j="http://www.w3.org/2000/svg",O={"xlink:actuate":S,"xlink:arcrole":S,"xlink:href":S,"xlink:role":S,"xlink:show":S,"xlink:title":S,"xlink:type":S,"xml:base":A,"xml:lang":A,"xml:space":A},R={},M=[];function k(e,t){e.appendChild(t)}function I(e,t,n){a(n)?k(e,t):e.insertBefore(t,n)}function T(e,t,n){e.replaceChild(t,n)}function F(e){for(var t;void 0!==(t=e.shift());)t()}var P={},L={};function N(e,t,n){var i=P[e],o=n.$EV;t?(i||(L[e]=function(e){var t=function(t){var n=t.type,i="click"===n||"dblclick"===n;if(i&&0!==t.button)return t.stopPropagation(),!1;t.stopPropagation=B;var o={dom:document};Object.defineProperty(t,"currentTarget",{configurable:!0,get:function(){return o.dom}}),function(e,t,n,i){for(var o=function(e){return c(e.composedPath)?e.composedPath()[0]:e.target}(e);!p(o);){if(t&&o.disabled)return;var s=o.$EV;if(s){var r=s[n];if(r&&(i.dom=o,r.event?r.event(r.data,e):r(e),e.cancelBubble))return}o=o.parentNode}}(t,i,e,o)};return document.addEventListener($(e),t),t}(e),P[e]=0),o||(o=n.$EV={}),o[e]||P[e]++,o[e]=t):o&&o[e]&&(P[e]--,1===i&&(document.removeEventListener($(e),L[e]),L[e]=null),o[e]=t)}function $(e){return e.substr(2).toLowerCase()}function B(){this.cancelBubble=!0,this.immediatePropagationStopped||this.stopImmediatePropagation()}function V(e,t){var n=document.createElement("i");return n.innerHTML=t,n.innerHTML===e.innerHTML}function U(e,t,n){if(e[t]){var i=e[t];i.event?i.event(i.data,n):i(n)}else{var o=t.toLowerCase();e[o]&&e[o](n)}}function z(e,t){var n=function(n){n.stopPropagation();var i=this.$V;if(i){var o=i.props||R,s=i.dom;if(u(e))U(o,e,n);else for(var r=0;r<e.length;r++)U(o,e[r],n);if(c(t)){var a=this.$V,l=a.props||R;t(l,s,!1,a)}}};return Object.defineProperty(n,"wrapped",{configurable:!1,enumerable:!1,value:!0,writable:!1}),n}function K(e){return"checkbox"===e||"radio"===e}var q=z("onInput",H),W=z(["onClick","onChange"],H);function G(e){e.stopPropagation()}function H(e,t){var n=e.type,i=e.value,o=e.checked,s=e.multiple,r=e.defaultValue,l=!a(i);n&&n!==t.type&&t.setAttribute("type",n),a(s)||s===t.multiple||(t.multiple=s),a(r)||l||(t.defaultValue=r+""),K(n)?(l&&(t.value=i),a(o)||(t.checked=o)):l&&t.value!==i?(t.defaultValue=i,t.value=i):a(o)||(t.checked=o)}function X(e,t){if("optgroup"===e.type){var n=e.children,i=e.childFlags;if(12&i)for(var o=0,s=n.length;o<s;o++)J(n[o],t);else 2===i&&J(n,t)}else J(e,t)}function J(e,t){var n=e.props||R,i=e.dom;i.value=n.value,s(t)&&-1!==t.indexOf(n.value)||n.value===t?i.selected=!0:a(t)&&a(n.selected)||(i.selected=n.selected||!1)}G.wrapped=!0;var Y=z("onChange",Z);function Z(e,t,n,i){var o=Boolean(e.multiple);a(e.multiple)||o===t.multiple||(t.multiple=o);var s=i.childFlags;if(!(1&s)){var r=i.children,l=e.value;if(n&&a(l)&&(l=e.defaultValue),12&s)for(var c=0,u=r.length;c<u;c++)X(r[c],l);else 2===s&&X(r,l)}}var Q=z("onInput",te),ee=z("onChange");function te(e,t,n){var i=e.value,o=t.value;if(a(i)){if(n){var s=e.defaultValue;a(s)||s===o||(t.defaultValue=s,t.value=s)}}else o!==i&&(t.defaultValue=i,t.value=i)}function ne(e,t,n,i,o,s){64&e?H(i,n):256&e?Z(i,n,o,t):128&e&&te(i,n,o),s&&(n.$V=t)}function ie(e){return e.type&&K(e.type)?!a(e.checked):!a(e.value)}function oe(e,t){se(e),t&&e.dom&&(function(e,t){e.removeChild(t)}(t,e.dom),e.dom=null)}function se(e){var t=e.flags;if(481&t){var n=e.ref,i=e.props;c(n)&&n(null);var o=e.children,s=e.childFlags;if(12&s?re(o):2===s&&se(o),!p(i))for(var r in i)switch(r){case"onClick":case"onDblClick":case"onFocusIn":case"onFocusOut":case"onKeyDown":case"onKeyPress":case"onKeyUp":case"onMouseDown":case"onMouseMove":case"onMouseUp":case"onSubmit":case"onTouchEnd":case"onTouchMove":case"onTouchStart":N(r,null,e.dom)}}else{var l=e.children;if(l)if(14&t){var u=e.ref;4&t?(c(l.componentWillUnmount)&&l.componentWillUnmount(),c(u)&&u(null),l.$UN=!0,l.$LI&&se(l.$LI)):(!a(u)&&c(u.onComponentWillUnmount)&&u.onComponentWillUnmount(e.dom,e.props||R),se(l))}else 1024&t&&oe(l,e.type)}}function re(e){for(var t=0,n=e.length;t<n;t++)se(e[t])}function ae(e,t){re(t),e.textContent=""}function le(e,t){switch(e){case"animationIterationCount":case"borderImageOutset":case"borderImageSlice":case"borderImageWidth":case"boxFlex":case"boxFlexGroup":case"boxOrdinalGroup":case"columnCount":case"fillOpacity":case"flex":case"flexGrow":case"flexNegative":case"flexOrder":case"flexPositive":case"flexShrink":case"floodOpacity":case"fontWeight":case"gridColumn":case"gridRow":case"lineClamp":case"lineHeight":case"opacity":case"order":case"orphans":case"stopOpacity":case"strokeDasharray":case"strokeDashoffset":case"strokeMiterlimit":case"strokeOpacity":case"strokeWidth":case"tabSize":case"widows":case"zIndex":case"zoom":return t;default:return t+"px"}}function ce(e,t,n,i,o,s,r){switch(e){case"onClick":case"onDblClick":case"onFocusIn":case"onFocusOut":case"onKeyDown":case"onKeyPress":case"onKeyUp":case"onMouseDown":case"onMouseMove":case"onMouseUp":case"onSubmit":case"onTouchEnd":case"onTouchMove":case"onTouchStart":N(e,n,i);break;case"children":case"childrenType":case"className":case"defaultValue":case"key":case"multiple":case"ref":break;case"autoFocus":i.autofocus=!!n;break;case"allowfullscreen":case"autoplay":case"capture":case"checked":case"controls":case"default":case"disabled":case"hidden":case"indeterminate":case"loop":case"muted":case"novalidate":case"open":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"selected":i[e]=!!n;break;case"defaultChecked":case"value":case"volume":if(s&&"value"===e)return;var l=a(n)?"":n;i[e]!==l&&(i[e]=l);break;case"dangerouslySetInnerHTML":var h=t&&t.__html||"",m=n&&n.__html||"";h!==m&&(a(m)||V(i,m)||(p(r)||(12&r.childFlags?re(r.children):2===r.childFlags&&se(r.children),r.children=null,r.childFlags=1),i.innerHTML=m));break;default:"o"===e[0]&&"n"===e[1]?function(e,t,n){var i=e.toLowerCase();if(c(t)||a(t)){var o=n[i];o&&o.wrapped||(n[i]=t)}else{var s=t.event;s&&c(s)&&(n[i]=function(e,t){return function(n){e(t.data,n)}}(s,t))}}(e,n,i):a(n)?i.removeAttribute(e):"style"===e?function(e,t,n){var i,o,s=n.style;if(u(t))s.cssText=t;else if(a(e)||u(e))for(i in t)o=t[i],s[i]=d(o)?le(i,o):o;else{for(i in t)(o=t[i])!==e[i]&&(s[i]=d(o)?le(i,o):o);for(i in e)a(t[i])&&(s[i]="")}}(t,n,i):o&&O[e]?i.setAttributeNS(O[e],e,n):i.setAttribute(e,n)}}function ue(e,t,n,i,o){var s=!1,r=(448&t)>0;for(var a in r&&(s=ie(n))&&function(e,t,n){64&e?function(e,t){K(t.type)?(e.onchange=W,e.onclick=G):e.oninput=q}(t,n):256&e?function(e){e.onchange=Y}(t):128&e&&function(e,t){e.oninput=Q,t.onChange&&(e.onchange=ee)}(t,n)}(t,i,n),n)ce(a,null,n[a],i,o,s,null);r&&ne(t,e,i,n,!0,s)}function de(e,t,n,i){var o=new t(n,i);if(e.children=o,o.$V=e,o.$BS=!1,o.context=i,o.props===R&&(o.props=n),o.$UN=!1,c(o.componentWillMount)){if(o.$BR=!0,o.componentWillMount(),o.$PSS){var s=o.state,r=o.$PS;if(p(s))o.state=r;else for(var l in r)s[l]=r[l];o.$PSS=!1,o.$PS=null}o.$BR=!1}c(D.beforeRender)&&D.beforeRender(o);var u,d=pe(o.render(n,o.state,i),e);return c(o.getChildContext)&&(u=o.getChildContext()),a(u)?o.$CX=i:o.$CX=m(i,u),c(D.afterRender)&&D.afterRender(o),o.$LI=d,o}function pe(e,t){return l(e)?e=C():r(e)?e=b(e,null):(e.dom&&(e=x(e)),14&e.flags&&(e.parentVNode=t)),e}function he(e,t,n,i){var o=e.flags;return 481&o?ge(e,t,n,i):14&o?function(e,t,n,i,o){var s,r=e.type,a=e.props||R,l=e.ref;if(o){var c=de(e,r,a,n);e.dom=s=he(c.$LI,null,c.$CX,i),ye(0,l,c),c.$UPD=!1}else{var u=pe(r(a,n),e);e.children=u,e.dom=s=he(u,null,n,i),ve(a,l,s)}return p(t)||k(t,s),s}(e,t,n,i,(4&o)>0):512&o||16&o?me(e,t):1024&o?(he(e.children,e.type,n,!1),e.dom=me(C(),t)):void 0}function me(e,t){var n=e.dom=document.createTextNode(e.children);return p(t)||k(t,n),n}function ge(e,t,n,i){var o=e.flags,s=e.children,r=e.props,l=e.className,u=e.ref,d=e.childFlags;i=i||(32&o)>0;var h=function(e,t){return t?document.createElementNS(j,e):document.createElement(e)}(e.type,i);if(e.dom=h,a(l)||""===l||(i?h.setAttribute("class",l):h.className=l),p(t)||k(t,h),!(1&d)){var m=!0===i&&"foreignObject"!==e.type;2===d?he(s,h,n,m):12&d&&fe(s,h,n,m)}return p(r)||ue(e,o,r,h,i),c(u)&&be(h,u),h}function fe(e,t,n,i){for(var o=0,s=e.length;o<s;o++){var r=e[o];p(r.dom)||(e[o]=r=x(r)),he(r,t,n,i)}}function ye(e,t,n){c(t)&&t(n),c(n.componentDidMount)&&M.push(function(e){return function(){e.$UPD=!0,e.componentDidMount(),e.$UPD=!1}}(n))}function ve(e,t,n){a(t)||(c(t.onComponentWillMount)&&t.onComponentWillMount(e),c(t.onComponentDidMount)&&M.push(function(e,t,n){return function(){return e.onComponentDidMount(t,n)}}(t,n,e)))}function be(e,t){M.push((function(){return t(e)}))}function _e(e,t,n,i){var s=e.flags;14&s?function(e,t,n,i,o){var s=e.type,r=e.ref,a=e.props||R;if(o){var l=de(e,s,a,n),c=l.$LI;_e(c,t,l.$CX,i),e.dom=c.dom,ye(0,r,l),l.$UPD=!1}else{var u=pe(s(a,n),e);_e(u,t,n,i),e.children=u,e.dom=u.dom,ve(a,r,t)}}(e,t,n,i,(4&s)>0):481&s?function(e,t,n,i){var o=e.children,s=e.props,r=e.className,l=e.flags,u=e.ref;if(i=i||(32&l)>0,1!==t.nodeType||t.tagName.toLowerCase()!==e.type){var d=ge(e,null,n,i);e.dom=d,T(t.parentNode,d,t)}else{e.dom=t;var h=t.firstChild,m=e.childFlags;if(1&m)p(t.firstChild)||function(e,t){return Boolean(t&&t.dangerouslySetInnerHTML&&t.dangerouslySetInnerHTML.__html&&V(e,t.dangerouslySetInnerHTML.__html))}(t,s)||(t.textContent="",448&l&&(t.defaultValue=""));else{for(var g=null;h;)g=h.nextSibling,8===h.nodeType&&("!"===h.data?t.replaceChild(document.createTextNode(""),h):t.removeChild(h)),h=g;if(h=t.firstChild,2===m)p(h)?he(o,t,n,i):(g=h.nextSibling,_e(o,h,n,i),h=g);else if(12&m)for(var f=0,y=o.length;f<y;f++){var v=o[f];p(h)?he(v,t,n,i):(g=h.nextSibling,_e(v,h,n,i),h=g)}for(;h;)g=h.nextSibling,t.removeChild(h),h=g}p(s)||ue(e,l,s,t,i),a(r)?""!==t.className&&t.removeAttribute("class"):i?t.setAttribute("class",r):t.className=r,c(u)&&be(t,u)}}(e,t,n,i):16&s?function(e,t){if(3!==t.nodeType){var n=me(e,null);e.dom=n,T(t.parentNode,n,t)}else{var i=e.children;t.nodeValue!==i&&(t.nodeValue=i),e.dom=t}}(e,t):512&s?e.dom=t:function(e){throw e||(e=o),new Error("Inferno Error: "+e)}()}function xe(e,t,n,i,o){se(e),T(n,he(t,null,i,o),e.dom)}function Ce(e,t,n,o,s){var r=0|t.flags;e.flags!==r||2048&r?xe(e,t,n,o,s):481&r?function(e,t,n,i,o,s){var r=t.type;if(e.type!==r)xe(e,t,n,i,o);else{var l,u=e.dom,d=e.props,p=t.props,h=!1,m=!1;if(t.dom=u,o=o||(32&s)>0,d!==p){var g=d||R;if((l=p||R)!==R)for(var f in(h=(448&s)>0)&&(m=ie(l)),l){var y=g[f],v=l[f];y!==v&&ce(f,y,v,u,o,m,e)}if(g!==R)for(var b in g)l.hasOwnProperty(b)||a(g[b])||ce(b,g[b],null,u,o,m,e)}var _=e.children,x=t.children,C=t.ref,E=e.className,w=t.className;4096&s?function(e,t){e.textContent!==t.children&&(e.textContent=t.children)}(u,x):Ee(e.childFlags,t.childFlags,_,x,u,i,o&&"foreignObject"!==r),h&&ne(s,t,u,l,!1,m),E!==w&&(a(w)?u.removeAttribute("class"):o?u.setAttribute("class",w):u.className=w),c(C)&&e.ref!==C&&be(u,C)}}(e,t,n,o,s,r):14&r?function(e,t,n,o,s,r){var l=t.type,u=e.key,d=t.key;if(e.type!==l||u!==d)xe(e,t,n,o,s);else{var p=t.props||R;if(r){var h=e.children;h.$UPD=!0,h.$V=t,we(h,h.state,t,p,n,o,s,!1,!1),h.$UPD=!1}else{var m=!0,g=e.props,f=t.ref,y=!a(f),v=e.children;if(t.dom=e.dom,t.children=v,y&&c(f.onComponentShouldUpdate)&&(m=f.onComponentShouldUpdate(g,p)),!1!==m){y&&c(f.onComponentWillUpdate)&&f.onComponentWillUpdate(g,p);var b=l(p,o);b!==i&&(Ce(v,b=pe(b,t),n,o,s),t.children=b,t.dom=b.dom,y&&c(f.onComponentDidUpdate)&&f.onComponentDidUpdate(g,p))}else 14&v.flags&&(v.parentVNode=t)}}}(e,t,n,o,s,(4&r)>0):16&r?function(e,t){var n=t.children,i=e.dom;n!==e.children&&(i.nodeValue=n),t.dom=i}(e,t):512&r?t.dom=e.dom:function(e,t,n){var i=e.type,o=t.type,s=t.children;if(Ee(e.childFlags,t.childFlags,e.children,s,i,n,!1),t.dom=e.dom,i!==o&&!l(s)){var r=s.dom;i.removeChild(r),o.appendChild(r)}}(e,t,o)}function Ee(e,t,n,i,o,s,r){switch(e){case 2:switch(t){case 2:Ce(n,i,o,s,r);break;case 1:oe(n,o);break;default:oe(n,o),fe(i,o,s,r)}break;case 1:switch(t){case 2:he(i,o,s,r);break;case 1:break;default:fe(i,o,s,r)}break;default:if(12&t){var a=n.length,l=i.length;0===a?l>0&&fe(i,o,s,r):0===l?ae(o,n):8===t&&8===e?function(e,t,n,i,o,s,r){var a,l,c=s-1,u=r-1,d=0,p=e[d],h=t[d];e:{for(;p.key===h.key;){if(h.dom&&(t[d]=h=x(h)),Ce(p,h,n,i,o),e[d]=h,++d>c||d>u)break e;p=e[d],h=t[d]}for(p=e[c],h=t[u];p.key===h.key;){if(h.dom&&(t[u]=h=x(h)),Ce(p,h,n,i,o),e[c]=h,u--,d>--c||d>u)break e;p=e[c],h=t[u]}}if(d>c){if(d<=u)for(var m=(l=u+1)<r?t[l].dom:null;d<=u;)(h=t[d]).dom&&(t[d]=h=x(h)),d++,I(n,he(h,null,i,o),m)}else if(d>u)for(;d<=c;)oe(e[d++],n);else{var g=d,f=d,y=c-d+1,v=u-d+1,b=[];for(a=0;a<v;a++)b.push(0);var _=y===s,C=!1,E=0,w=0;if(r<4||(y|v)<32)for(a=g;a<=c;a++)if(p=e[a],w<v){for(d=f;d<=u;d++)if(h=t[d],p.key===h.key){if(b[d-f]=a+1,_)for(_=!1;a>g;)oe(e[g++],n);E>d?C=!0:E=d,h.dom&&(t[d]=h=x(h)),Ce(p,h,n,i,o),w++;break}!_&&d>u&&oe(p,n)}else _||oe(p,n);else{var D={};for(a=f;a<=u;a++)D[t[a].key]=a;for(a=g;a<=c;a++)if(p=e[a],w<v)if(void 0!==(d=D[p.key])){if(_)for(_=!1;a>g;)oe(e[g++],n);h=t[d],b[d-f]=a+1,E>d?C=!0:E=d,h.dom&&(t[d]=h=x(h)),Ce(p,h,n,i,o),w++}else _||oe(p,n);else _||oe(p,n)}if(_)ae(n,e),fe(t,n,i,o);else if(C){var S=function(e){var t,n,i,o,s,r=e.slice(),a=[0],l=e.length;for(t=0;t<l;t++){var c=e[t];if(0!==c){if(e[n=a[a.length-1]]<c){r[t]=n,a.push(t);continue}for(i=0,o=a.length-1;i<o;)e[a[s=(i+o)/2|0]]<c?i=s+1:o=s;c<e[a[i]]&&(i>0&&(r[t]=a[i-1]),a[i]=t)}}for(o=a[(i=a.length)-1];i-- >0;)a[i]=o,o=r[o];return a}(b);for(d=S.length-1,a=v-1;a>=0;a--)0===b[a]?((h=t[E=a+f]).dom&&(t[E]=h=x(h)),l=E+1,I(n,he(h,null,i,o),l<r?t[l].dom:null)):d<0||a!==S[d]?(l=(E=a+f)+1,I(n,(h=t[E]).dom,l<r?t[l].dom:null)):d--}else if(w!==v)for(a=v-1;a>=0;a--)0===b[a]&&((h=t[E=a+f]).dom&&(t[E]=h=x(h)),l=E+1,I(n,he(h,null,i,o),l<r?t[l].dom:null))}}(n,i,o,s,r,a,l):function(e,t,n,i,o,s,r){for(var a,l,c=s>r?r:s,u=0;u<c;u++)a=t[u],l=e[u],a.dom&&(a=t[u]=x(a)),Ce(l,a,n,i,o),e[u]=a;if(s<r)for(u=c;u<r;u++)(a=t[u]).dom&&(a=t[u]=x(a)),he(a,n,i,o);else if(s>r)for(u=c;u<s;u++)oe(e[u],n)}(n,i,o,s,r,a,l)}else 1===t?ae(o,n):2===t&&(ae(o,n),he(i,o,s,r))}}function we(e,t,n,o,s,r,l,u,d){var p,h=e.state,g=e.props;if(n.children=e,!e.$UN){if(g!==o||o===R){if(!d&&c(e.componentWillReceiveProps)){if(e.$BR=!0,e.componentWillReceiveProps(o,r),e.$UN)return;e.$BR=!1}e.$PSS&&(t=m(t,e.$PS),e.$PSS=!1,e.$PS=null)}var f=Boolean(e.shouldComponentUpdate);if(u||!f||f&&e.shouldComponentUpdate(o,t,r)){c(e.componentWillUpdate)&&(e.$BS=!0,e.componentWillUpdate(o,t,r),e.$BS=!1),e.props=o,e.state=t,e.context=r,c(D.beforeRender)&&D.beforeRender(e),p=e.render(o,t,r),c(D.afterRender)&&D.afterRender(e);var y,v=p!==i;if(c(e.getChildContext)&&(y=e.getChildContext()),y=a(y)?r:m(r,y),e.$CX=y,v){var b=e.$LI,_=pe(p,n);Ce(b,_,s,y,l),e.$LI=_,c(e.componentDidUpdate)&&e.componentDidUpdate(g,h)}}else e.props=o,e.state=t,e.context=r;n.dom=e.$LI.dom}}function De(e,t,n){if(e!==i){var o=t.$V;return a(o)?l(e)||(e.dom&&(e=x(e)),p(t.firstChild)?(he(e,t,R,!1),t.$V=e):function(e,t,n){var i=t.firstChild;if(!p(i))for(l(e)||_e(e,i,R,!1),i=t.firstChild;i=i.nextSibling;)t.removeChild(i);M.length>0&&F(M),t.$V=e,c(n)&&n()}(e,t),o=e):a(e)?(oe(o,t),t.$V=null):(e.dom&&(e=x(e)),Ce(o,e,t,R,!1),o=t.$V=e),M.length>0&&F(M),c(n)&&n(),c(D.renderComplete)&&D.renderComplete(o),o&&14&o.flags?o.children:void 0}}function Se(e,t){return y(1024,t,null,e,0,null,l(e)?null:e.key,null)}var Ae="undefined"==typeof Promise?null:Promise.resolve(),je="undefined"==typeof requestAnimationFrame?setTimeout:requestAnimationFrame.bind(window);function Oe(e,t,n,i){c(t)&&(t=t(e.state,e.props,e.context));var o,s=e.$PS;if(a(s))e.$PS=t;else for(var r in t)s[r]=t[r];if(e.$PSS||e.$BR)e.$PSS=!0,e.$BR&&c(n)&&M.push(n.bind(e));else if(e.$UPD){var l=e.$QU;p(l)&&(l=e.$QU=[],o=function(e,t){return function(){e.$QU=null,e.$UPD=!0,Re(e,!1,(function(){for(var n=0,i=t.length;n<i;n++)t[n].call(e)})),e.$UPD=!1}}(e,l),Ae?Ae.then(o):je(o)),c(n)&&l.push(n)}else e.$PSS=!0,e.$UPD=!0,Re(e,i,n),e.$UPD=!1}function Re(e,t,n){if(!e.$UN){if(t||!e.$BR){e.$PSS=!1;var i=e.$PS,o=m(e.state,i),s=e.props,r=e.context;e.$PS=null;var a=e.$V,l=e.$LI;if(we(e,o,a,s,l.dom&&l.dom.parentNode,r,(32&a.flags)>0,t,!0),e.$UN)return;if(!(1024&e.$LI.flags))for(var u=e.$LI.dom;!p(a=a.parentVNode);)(14&a.flags)>0&&(a.dom=u);M.length>0&&F(M)}else e.state=e.$PS,e.$PS=null;c(n)&&n.call(e)}}var Me=function(){function e(e,t){this.state=null,this.props=void 0,this.context=void 0,this.refs=void 0,this.$BR=!1,this.$BS=!0,this.$PSS=!1,this.$PS=null,this.$LI=null,this.$V=null,this.$UN=!1,this.$CX=null,this.$UPD=!0,this.$QU=null,this.props=e||R,this.context=t||R}var t=e.prototype;return t.forceUpdate=function(e){this.$UN||Oe(this,{},e,!0)},t.setState=function(e,t){this.$UN||this.$BS||Oe(this,e,t,!1)},t.render=function(e,t,n){},e}();Me.defaultProps=void 0},83587:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i="modeler:executionPlatform",o="modeler:executionPlatformVersion";function s(e,t,n){if(this._modeler=t.get("bpmnjs",!1)||t.get("_parent"),this._commandStack=n,e){var s=e.name,r=e.version;if(!s||!r)throw new Error("config.executionPlatform = { name, version } missing required props");var a=this._modeler;t.get("bpmnjs",!1)&&(a=t.get("eventBus")),a.on("saveXML.start",(function(e){var t=e.definitions;t.set(i,s),t.set(o,r)}))}}s.$inject=["config.executionPlatform","injector","commandStack","eventBus"],s.prototype.getExecutionPlatform=function(){var e=this._modeler.getDefinitions(),t=e.get(i);return t?{name:t,version:e.get(o)}:null},s.prototype.setExecutionPlatform=function(e){this._commandStack.execute("executionPlatform.update",{executionPlatform:e})};const r="modeler:executionPlatform",a="modeler:executionPlatformVersion";function l(e){e.registerHandler("executionPlatform.update",c)}function c(e){this._modeler=e.get("bpmnjs",!1)||e.get("_parent")}function u(e,t){e.set(r,t.name),e.set(a,t.version)}l.$inject=["commandStack"],c.prototype.execute=function(e){const t=e.executionPlatform,n=e.definitions=this._modeler.getDefinitions();return e.oldExecutionPlatform=function(e){return{name:e.get(r),version:e.get(a)}}(n),u(n,t),[]},c.prototype.revert=function(e){const t=e.oldExecutionPlatform;return u(e.definitions,t),[]},c.$inject=["injector"];const d={__init__:["executionPlatform","updateExecutionPlatformCommand"],executionPlatform:["type",s],updateExecutionPlatformCommand:["type",l]}},84464:(e,t,n)=>{"use strict";function i(e){return e.dmnDI&&e.dmnDI.diagrams&&e.dmnDI.diagrams[0]}n.d(t,{$:()=>i})},90853:e=>{"use strict";function t(e,t){return{start:e,end:void 0===t?e:t}}e.exports=function(e,n,i){var o=e.start,s=o,r=(i.length,n.length),a=(i.length,n.length,n.substring(o));return i.lastIndexOf(a)===i.length-a.length&&(n=n.substring(0,n.length-a.length),i=i.substring(0,i.length-a.length)),(r=function(e,t){var n,i,o,s=0,r=0;for(t.length>e.length?(i=t,o=e):(i=e,o=t);s<i.length;)i.charAt(s)!==o.charAt(r)?(n||(n={l_start:s,s_start:r}),s++):(n&&!n.complete&&(n.l_end=s,n.s_end=r,n.complete=!0),r++,s++);if(n&&!n.complete&&(n.complete=!0,n.s_end=o.length,n.l_end=i.length),n)return t.length>e.length?{newStart:n.l_start,newEnd:n.l_end,type:"add"}:{newStart:n.s_start,newEnd:n.s_end,type:t.length<e.length?"remove":"replace"}}(n,i))&&(s="remove"===r.type?r.newStart:r.newEnd),t(s)},e.exports.range=t},94306:(e,t,n)=>{"use strict";n.d(t,{g:()=>r,v:()=>a});var i=n(75668),o=n(39569),s='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.02 5.57" width="53" height="21" style="vertical-align:middle"><path fill="#000000" d="M1.88.92v.14c0 .41-.13.68-.4.8.33.14.46.44.46.86v.33c0 .61-.33.95-.95.95H0V0h.95c.65 0 .93.3.93.92zM.63.57v1.06h.24c.24 0 .38-.1.38-.43V.98c0-.28-.1-.4-.32-.4zm0 1.63v1.22h.36c.2 0 .32-.1.32-.39v-.35c0-.37-.12-.48-.4-.48H.63zM4.18.99v.52c0 .64-.31.98-.94.98h-.3V4h-.62V0h.92c.63 0 .94.35.94.99zM2.94.57v1.35h.3c.2 0 .3-.09.3-.37v-.6c0-.29-.1-.38-.3-.38h-.3zm2.89 2.27L6.25 0h.88v4h-.6V1.12L6.1 3.99h-.6l-.46-2.82v2.82h-.55V0h.87zM8.14 1.1V4h-.56V0h.79L9 2.4V0h.56v4h-.64zm2.49 2.29v.6h-.6v-.6zM12.12 1c0-.63.33-1 .95-1 .61 0 .95.37.95 1v2.04c0 .64-.34 1-.95 1-.62 0-.95-.37-.95-1zm.62 2.08c0 .28.13.39.33.39s.32-.1.32-.4V.98c0-.29-.12-.4-.32-.4s-.33.11-.33.4z"/><path fill="#000000" d="M0 4.53h14.02v1.04H0zM11.08 0h.63v.62h-.63zm.63 4V1h-.63v2.98z"/></svg>';function r(e){var t='<a href="http://bpmn.io" target="_blank" class="bjs-powered-by" title="Powered by bpmn.io" style="position: absolute; bottom: 15px; right: 15px; z-index: 100;">'+s+"</a>",n=(0,o.zm)(t);e.appendChild(n),o.f0.bind(n,"click",(function(e){c||(c=(0,o.zm)(u),o.Mm.bind(c,".backdrop","click",(function(e){document.body.removeChild(c)}))),document.body.appendChild(c),e.preventDefault()}))}class a extends i.uA{constructor(e,t){super(e,t),this.node=null}componentDidMount(){r(this.node)}render(){return(0,i.bF)(1,"div",null,null,1,null,null,(e=>this.node=e))}}function l(e){return e.join(";")}var c,u='<div class="bjs-powered-by-lightbox" style="'+l(["z-index: 1001","position: fixed","top: 0","left: 0","right: 0","bottom: 0"])+'"><div class="backdrop" style="'+l(["width: 100%","height: 100%","background: rgba(40,40,40,0.2)"])+'"></div><div class="notice" style="'+l(["position: absolute","left: 50%","top: 40%","transform: translate(-50%)","width: 260px","padding: 10px","background: white","box-shadow: 0 1px 4px rgba(0,0,0,0.3)","font-family: Helvetica, Arial, sans-serif","font-size: 14px","display: flex","line-height: 1.3"])+'"><a href="https://bpmn.io" target="_blank" rel="noopener" style="margin: 15px 20px 15px 10px; align-self: center;">'+s+'</a><span>Web-based tooling for BPMN, DMN and CMMN diagrams powered by <a href="https://bpmn.io" target="_blank" rel="noopener">bpmn.io</a>.</span></div></div>'},98364:(e,t,n)=>{"use strict";n.d(t,{A:()=>J});var i=n(7475),o=n(58120),s=n(96222),r=n(19365),a=n(17715),l=n(23906),c=new a.d({name:"dmnElementRef",enumerable:!0},{name:"di",configurable:!0});function u(e,t){var n=[];function i(t){try{var n=t.di&&function(t){if(t.gfx)throw new Error("already rendered "+t.id);return e.element(t)}(t);return n}catch(e){a(e.message,{element:t,error:e})}}function o(e){var t,n;(n=(t=e).dmnElementRef)?n.di?a("multiple DI elements defined for element",{element:n}):(c.bind(n,"di"),n.di=t):a("no DMN element referenced in element",{element:t})}function s(e){n.push(e)}function a(t,n){e.error(t,n)}return{handleDefinitions:function(t,a){var c=t.dmnDI;if(!c)throw new Error("no dmndi:DMNDI");var u,d,p=c.diagrams||[];if(a&&-1===p.indexOf(a))throw new Error("diagram not part of dmndi:DMNDI");if(!a&&p&&p.length&&(a=p[0]),!a)throw new Error("no diagram to display");t.di=a,function(e){(0,r.jJ)(e.diagramElements,o)}(a),u=t,e.root(u),d=t.get("drgElement"),(0,r.jJ)(d,(function(e){i(e),function(e){(0,r.jJ)(["informationRequirement","knowledgeRequirement","authorityRequirement"],(function(t){(0,r.jJ)(e[t],(function(e){s((function(){i(e)}))}))}))}(e)})),function(e){(0,r.jJ)(e,(function(e){(0,l.is)(e,"dmn:Association")?function(e){s((function(){i(e)}))}(e):i(e)}))}(t.get("artifact")),(0,r.jJ)(n,(function(e){e()}))}}}var d=n(60210),p=n(35326),h=n(94306),m=n(64847),g=n(1591),f=n(24107),y=new m.A,v="hsl(225, 10%, 15%)";function b(e,t,n,i,s,a){g.A.call(this,t);var c=y.next(),u=i.computeStyle,p={},h=e&&e.defaultFillColor||"white",m=e&&e.defaultStrokeColor||v,b=e&&e.defaultLabelColor;function D(e,t,n){var i=e+"-"+x(t)+"-"+x(n)+"-"+c;return p[i]||function(e,t,n,i){if("association-start"===t){var o=(0,d.vt)("path");(0,d.CF)(o,{d:"M 11 5 L 1 10 L 11 15"}),S(e,{element:o,attrs:{fill:"none",stroke:i,strokeWidth:1.5},ref:{x:1,y:10},scale:.5})}else if("association-end"===t){var s=(0,d.vt)("path");(0,d.CF)(s,{d:"M 1 5 L 11 10 L 1 15"}),S(e,{element:s,attrs:{fill:"none",stroke:i,strokeWidth:1.5},ref:{x:12,y:10},scale:.5})}else if("information-requirement-end"===t){var r=(0,d.vt)("path");(0,d.CF)(r,{d:"M 1 5 L 11 10 L 1 15 Z"}),S(e,{element:r,attrs:{fill:i,stroke:"none"},ref:{x:11,y:10},scale:1})}else if("knowledge-requirement-end"===t){var a=(0,d.vt)("path");(0,d.CF)(a,{d:"M 1 3 L 11 10 L 1 17"}),S(e,{element:a,attrs:{fill:"none",stroke:i,strokeWidth:2},ref:{x:11,y:10},scale:.8})}else if("authority-requirement-end"===t){var l=(0,d.vt)("circle");(0,d.CF)(l,{cx:3,cy:3,r:3}),S(e,{element:l,attrs:{fill:i,stroke:"none"},ref:{x:3,y:3},scale:.9})}}(i,e,0,n),"url(#"+i+")"}function S(e,t){var n=(0,r.kp)({strokeWidth:1,strokeLinecap:"round",strokeDasharray:"none"},t.attrs),i=t.ref||{x:0,y:0},s=t.scale||1;"none"===n.strokeDasharray&&(n.strokeDasharray=[1e4,1]);var l=(0,d.vt)("marker");(0,d.CF)(t.element,n),(0,d.BC)(l,t.element),(0,d.CF)(l,{id:e,viewBox:"0 0 20 20",refX:i.x,refY:i.y,markerWidth:20*s,markerHeight:20*s,orient:"auto"});var c=(0,o.P)("defs",a._svg);c||(c=(0,d.vt)("defs"),(0,d.BC)(a._svg,c)),(0,d.BC)(c,l),p[e]=l}function A(e,t,n,i,o,s){(0,r.Gv)(o)&&(s=o,o=0),o=o||0,s=u(s,{stroke:v,strokeWidth:2,fill:"white"});var a=(0,d.vt)("rect");return(0,d.CF)(a,{x:o,y:o,width:t-2*o,height:n-2*o,rx:i,ry:i}),(0,d.CF)(a,s),(0,d.BC)(e,a),a}function j(e,t,n){var i=s.createText(t||"",n);return(0,o.CF)(i,"class","djs-label"),(0,d.BC)(e,i),i}function O(e,t,n,i){return j(e,(0,l.mG)(t),i=(0,r.kp)({box:t,align:n,padding:5,style:{fill:w(0,b,m)}},i))}function R(e,t,n){n=u(n,["no-fill"],{strokeWidth:2,stroke:v});var i=(0,d.vt)("path");return(0,d.CF)(i,{d:t}),(0,d.CF)(i,n),(0,d.BC)(e,i),i}var M={"dmn:Decision":function(e,t){var n=A(e,t.width,t.height,0,{stroke:C(0,m),fill:E(0,h)});return O(e,t,"center-middle"),n},"dmn:KnowledgeSource":function(e,t){var i=R(e,n.getScaledPath("KNOWLEDGE_SOURCE",{xScaleFactor:1.021,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:0,my:.075}}),{strokeWidth:2,fill:E(0,h),stroke:C(0,m)});return O(e,t,"center-middle"),i},"dmn:BusinessKnowledgeModel":function(e,t){var i=R(e,n.getScaledPath("BUSINESS_KNOWLEDGE_MODEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:0,my:.3}}),{strokeWidth:2,fill:E(0,h),stroke:C(0,m)});return O(e,t,"center-middle"),i},"dmn:InputData":function(e,t){var n=A(e,t.width,t.height,22,{stroke:C(0,m),fill:E(0,h)});return O(e,t,"center-middle"),n},"dmn:TextAnnotation":function(e,t){var i=A(e,t.width,t.height,0,0,{fill:"none",stroke:"none"});return R(e,n.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:0,my:0}}),{stroke:C(0,m)}),j(e,_(t).text||"",{style:{fill:w(0,b,m)},box:t,align:"left-top",padding:5}),i},"dmn:Association":function(e,t){var n=_(t),i=E(0,h),o=C(0,m),s={stroke:o,strokeDasharray:"0.5, 5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"};return"One"!==n.associationDirection&&"Both"!==n.associationDirection||(s.markerEnd=D("association-end",i,o)),"Both"===n.associationDirection&&(s.markerStart=D("association-start",i,o)),k(e,t.waypoints,s)},"dmn:InformationRequirement":function(e,t){var n=E(0,h),i=C(0,m),o={stroke:i,strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",markerEnd:D("information-requirement-end",n,i)};return k(e,t.waypoints,o)},"dmn:KnowledgeRequirement":function(e,t){var n=E(0,h),i=C(0,m),o={stroke:i,strokeWidth:1,strokeDasharray:5,strokeLinecap:"round",strokeLinejoin:"round",markerEnd:D("knowledge-requirement-end",n,i)};return k(e,t.waypoints,o)},"dmn:AuthorityRequirement":function(e,t){var n=E(0,h),i=C(0,m),o={stroke:i,strokeWidth:1.5,strokeDasharray:5,strokeLinecap:"round",strokeLinejoin:"round",markerEnd:D("authority-requirement-end",n,i)};return k(e,t.waypoints,o)}};function k(e,t,n){n=u(n,["no-fill"],{stroke:v,strokeWidth:2,fill:"none"});var i=(0,f.RJ)(t,n);return(0,d.BC)(e,i),i}this.canRender=function(e){return(0,l.is)(e,"dmn:DMNElement")||(0,l.is)(e,"dmn:InformationRequirement")||(0,l.is)(e,"dmn:KnowledgeRequirement")||(0,l.is)(e,"dmn:AuthorityRequirement")},this.drawShape=function(e,t){var n=M[t.type];return n?n(e,t):g.A.prototype.drawShape.apply(this,[e,t])},this.drawConnection=function(e,t){var n=t.type,i=M[n];return i?i(e,t):g.A.prototype.drawConnection.apply(this,[e,t])}}function _(e){return e.businessObject}function x(e){return e.replace(/[^0-9a-zA-z]+/g,"_")}function C(e,t){return t}function E(e,t){return t}function w(e,t,n){return t||C(0,n)}(0,i.A)(b,g.A),b.$inject=["config.drdRenderer","eventBus","pathMap","styles","textRenderer","canvas"];var D=n(4156);function S(e){var t=(0,r.kp)({fontFamily:"Arial, sans-serif",fontSize:12,fontWeight:"normal",lineHeight:1.2},e&&e.defaultStyle||{}),n=parseInt(t.fontSize,10)-1,i=(0,r.kp)({},t,{fontSize:n},e&&e.externalStyle||{}),o=new D.A({style:t});this.getExternalLabelBounds=function(e,t){var n=o.getDimensions(t,{box:{width:90,height:30,x:e.width/2+e.x,y:e.height/2+e.y},style:i});return{x:Math.round(e.x+e.width/2-n.width/2),y:Math.round(e.y),width:Math.ceil(n.width),height:Math.ceil(n.height)}},this.getTextAnnotationBounds=function(e,n){var i=o.getDimensions(n,{box:e,style:t,align:"left-top",padding:5});return{x:e.x,y:e.y,width:e.width,height:Math.max(30,Math.round(i.height))}},this.createText=function(e,t){return o.createText(e,t||{})},this.getDefaultStyle=function(){return t},this.getExternalStyle=function(){return i}}S.$inject=["config.textRenderer"];var A=/\{([^{}]+)\}/g,j=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g;const O={__init__:["drdRenderer"],drdRenderer:["type",b],textRenderer:["type",S],pathMap:["type",function(){this.pathMap={KNOWLEDGE_SOURCE:{d:"m {mx},{my} l 0,{e.y0} c {e.x0},{e.y1} {e.x1},-{e.y2} {e.x2},-{e.y3} c {e.x3},-{e.y4} {e.x4},{e.y5} {e.x5},{e.y6} l 0,-{e.y7}z",width:100,height:65,widthElements:[29.8,48.4,67.2,12.2,19.8,30.8],heightElements:[55.3,19.7,4.2,6.7,2.3,1.6,6.2,54.6]},BUSINESS_KNOWLEDGE_MODEL:{d:"m {mx},{my} l {e.x0},-{e.y0} l {e.x1},0 l 0,{e.y1} l -{e.x2},{e.y2} l -{e.x3},0z",width:125,height:45,widthElements:[13.8,109.2,13.8,109.1],heightElements:[13.2,29.8,13.2]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",width:10,height:30,widthElements:[10],heightElements:[30]}},this.getRawPath=function(e){return this.pathMap[e].d},this.getScaledPath=function(e,t){var n,i,o=this.pathMap[e];t.abspos?(n=t.abspos.x,i=t.abspos.y):(n=t.containerWidth*t.position.mx,i=t.containerHeight*t.position.my);var s,r,a={};if(t.position){for(var l=t.containerHeight/o.height*t.yScaleFactor,c=t.containerWidth/o.width*t.xScaleFactor,u=0;u<o.heightElements.length;u++)a["y"+u]=o.heightElements[u]*l;for(var d=0;d<o.widthElements.length;d++)a["x"+d]=o.widthElements[d]*c}return s=o.d,r={mx:n,my:i,e:a},String(s).replace(A,(function(e,t){return function(e,t,n){var i=n;return t.replace(j,(function(e,t,n,o,s){t=t||o,i&&(t in i&&(i=i[t]),"function"==typeof i&&s&&(i=i()))})),i=(null==i||i==n?e:i)+""}(e,t,r)}))}}]};function R(e,t,n,i){this._eventBus=e,this._canvas=t,this._elementRegistry=i,this._elementFactory=n}function M(e,t){return(0,r.kp)({id:e.id,type:e.$type,businessObject:e},t)}function k(e){return e.split("#").pop()}R.$inject=["eventBus","canvas","elementFactory","elementRegistry"],R.prototype.root=function(e){var t=this._elementFactory.createRoot(M(e));return this._canvas.setRootElement(t),t},R.prototype.add=function(e){var t,n,i,o,s,a,l=this._elementFactory,c=this._canvas,u=this._eventBus,d=e.di;if(d.$instanceOf("dmndi:DMNShape"))a=d.bounds,s=M(e,{x:Math.round(a.x),y:Math.round(a.y),width:Math.round(a.width),height:Math.round(a.height)}),t=l.createShape(s),c.addShape(t),u.fire("drdElement.added",{element:t,di:d});else{if(!d.$instanceOf("dmndi:DMNEdge"))throw new Error("unknown di for element "+e.id);n=function(e){var t=e.waypoint;if(t)return(0,r.Tj)(t,(function(e){var t={x:e.x,y:e.y};return(0,r.kp)({original:t},t)}))}(d),i=this._getSource(e),o=this._getTarget(e),i&&o&&(s=M(e,{hidden:!1,source:i,target:o,waypoints:n}),t=l.createConnection(s),c.addConnection(t),u.fire("drdElement.added",{element:t,di:d}))}return t},R.prototype._getSource=function(e){var t,n;if((0,l.is)(e,"dmn:Association")?n=e.sourceRef:(0,l.is)(e,"dmn:InformationRequirement")?n=e.requiredDecision||e.requiredInput:(0,l.is)(e,"dmn:KnowledgeRequirement")?n=e.requiredKnowledge:(0,l.is)(e,"dmn:AuthorityRequirement")&&(n=e.requiredDecision||e.requiredInput||e.requiredAuthority),n&&(t=n.href),t)return this._getShape(k(t))},R.prototype._getTarget=function(e){return(0,l.is)(e,"dmn:Association")?e.targetRef&&this._getShape(k(e.targetRef.href)):this._getShape(e.$parent.id)},R.prototype._getShape=function(e){return this._elementRegistry.get(e)};const I={__depends__:[O,{drdImporter:["type",R]}]};var T=n(31323),F=n(86104),P=n(4912),L=n(486),N=[{className:"dmn-icon-decision-table",matches:function(e){var t=(0,l.Cf)(e);return(0,l.is)(t,"dmn:Decision")&&(0,l.is)(t.decisionLogic,"dmn:DecisionTable")},title:"Open decision table"},{className:"dmn-icon-literal-expression",matches:function(e){var t=(0,l.TO)(e);return(0,l.is)(t,"dmn:LiteralExpression")},title:"Open literal expression"}];class ${constructor(e,t,n,i,o){this._injector=e,this._eventBus=t,this._overlays=n,this._translate=o,this._config=i||{enabled:!0},t.on(["shape.added"],(({element:e})=>{for(let t=0;t<N.length;t++){const{matches:n,className:i,title:o}=N[t];n&&n(e)&&this.addOverlay(e,i,o)}}))}addOverlay(e,t,n){const i=!1!==this._config.enabled,s=this._getOverlayNode(t,n,i),r=this._overlays.add(e,{position:{top:2,left:2},html:s});i&&((0,o.Ly)(s).add("interactive"),this.bindEventListener(e,s,r))}_getOverlayNode(e,t,n){const i=document.createElement("div");if(i.className="drill-down-overlay",!n){const t=document.createElement("span");return t.className=e,i.appendChild(t),i}const o=document.createElement("button");return o.type="button",o.className=e,o.title=this._translate(t),i.appendChild(o),i}bindEventListener(e,t,n){const i=this._overlays,s=this._eventBus,r=i._overlayRoot;o.Mm.bind(r,'[data-overlay-id="'+n+'"]',"click",(()=>{!1!==s.fire("drillDown.click",{element:e})&&this.drillDown(e)}))}drillDown(e){const t=this._injector.get("_parent",!1);if(!t)return!1;const n=t.getView(e.businessObject);return!!n&&(t.open(n),!0)}}$.$inject=["injector","eventBus","overlays","config.drillDown","translate"];const B={__depends__:[P.A,T.A],__init__:["drillDown"],drillDown:["type",$]};function V(e){this._container=this._createContainer(),(0,h.g)(this._container),this._init(this._container,e)}(0,i.A)(V,s.A),V.prototype.saveSVG=(0,p.O)((function(e){var t=this;return new Promise((function(e){var n=t.get("canvas"),i=n.getActiveLayer(),s=(0,o.P)("defs",n._svg),r=(0,d.LI)(i),a=s&&s.outerHTML||"",l=i.getBBox();e({svg:'<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- created with dmn-js / http://bpmn.io --\x3e\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+l.width+'" height="'+l.height+'" viewBox="'+l.x+" "+l.y+" "+l.width+" "+l.height+'" version="1.1">'+a+r+"</svg>"})}))})),V.prototype.getModules=function(){return this._modules},V.prototype.destroy=function(){s.A.prototype.destroy.call(this),(0,o.TF)(this._container)},V.prototype.on=function(e,t,n,i){return this.get("eventBus").on(e,t,n,i)},V.prototype.off=function(e,t){this.get("eventBus").off(e,t)},V.prototype._init=function(e,t){var{additionalModules:n,canvas:i,...o}=t,r={...o,canvas:{...i,container:e},modules:[{drd:["value",this]},...t.modules||this.getModules(),...n||[]]};s.A.call(this,r),t&&t.container&&this.attachTo(t.container)},V.prototype._emit=function(e,t){return this.get("eventBus").fire(e,t)},V.prototype._createContainer=function(){return(0,o.zm)('<div class="dmn-drd-container"></div>')},V.prototype.open=function(e){var t=this;return new Promise(((n,i)=>{var o;try{return t._definitions&&t.clear(),t._definitions=e,function(e,t){var o,s=e.get("drdImporter"),r=e.get("eventBus"),a=[];r.fire("import.start",{definitions:t});try{!function(e){new u({root:function(e){return s.root(e)},element:function(e,t){return s.add(e,t)},error:function(e,t){a.push({message:e,context:t})}}).handleDefinitions(e)}(t)}catch(e){o=e}r.fire("import.done",{error:o,warnings:a}),function(e,t){e?(e.warnings=t||[],i(e)):n({warnings:t||[]})}(o,a)}(t,e)}catch(e){o=e}o?(o.warnings=o.warnings||[],i(o)):n({warnings:[]})}))},V.prototype.attachTo=function(e){if(!e)throw new Error("parentNode required");this.detach();var t=this._container;e.appendChild(t),this._emit("attach",{}),this.get("canvas").resized()},V.prototype.detach=function(){var e=this._container,t=e.parentNode;t&&(this._emit("detach",{}),t.removeChild(e))},V.prototype._modules=[I,T.A,F.A,P.A,L.A,B];var U=n(3834),z=n(84361),K=n(35506),q=n(46389);function W(e,t,n){this._elementRegistry=e,this._canvas=n,t.registerProvider(this)}function G(e){return(0,r.pb)(e,(function(e){return!!e.matched})).length>0}function H(e,t){const n=[],i=e;if(!e)return n;e=e.toLowerCase(),t=t.toLowerCase();const o=e.indexOf(t);return o>-1?(0!==o&&n.push({normal:i.substr(0,o)}),n.push({matched:i.substr(o,t.length)}),t.length+o<e.length&&n.push({normal:i.substr(t.length+o,e.length)})):n.push({normal:i}),n}W.$inject=["elementRegistry","searchPad","canvas"],W.prototype.find=function(e){const t=this._canvas.getRootElement();let n=this._elementRegistry.filter((function(e){return!e.labelTarget}));return n=(0,r.pb)(n,(function(e){return e!==t})),n=(0,r.Tj)(n,(function(t){return{primaryTokens:H((0,q.p)(t),e),secondaryTokens:H(t.id,e),element:t}})),n=(0,r.pb)(n,(function(e){return G(e.primaryTokens)||G(e.secondaryTokens)})),n=(0,r.Ul)(n,(function(e){return(0,q.p)(e.element)+e.element.id})),n};const X={__depends__:[K.A],__init__:["dmnSearch"],dmnSearch:["type",W]};function J(e){V.call(this,e)}(0,i.A)(J,V),J.prototype._navigationModules=[U.A,z.A,X],J.prototype._modules=[].concat(J.prototype._modules,J.prototype._navigationModules)}}]);
//# sourceMappingURL=7578.js.map