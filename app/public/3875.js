/*! For license information please see 3875.js.LICENSE.txt */
(self.webpackChunkcamunda_modeler_client=self.webpackChunkcamunda_modeler_client||[]).push([[3875],{83587(e,t,n){"use strict";n.d(t,{A:()=>d});var i="modeler:executionPlatform",s="modeler:executionPlatformVersion";function o(e,t,n){if(this._modeler=t.get("bpmnjs",!1)||t.get("_parent"),this._commandStack=n,e){var o=e.name,r=e.version;if(!o||!r)throw new Error("config.executionPlatform = { name, version } missing required props");var a=this._modeler;t.get("bpmnjs",!1)&&(a=t.get("eventBus")),a.on("saveXML.start",function(e){var t=e.definitions;t.set(i,o),t.set(s,r)})}}o.$inject=["config.executionPlatform","injector","commandStack","eventBus"],o.prototype.getExecutionPlatform=function(){var e=this._modeler.getDefinitions(),t=e.get(i);return t?{name:t,version:e.get(s)}:null},o.prototype.setExecutionPlatform=function(e){this._commandStack.execute("executionPlatform.update",{executionPlatform:e})};const r="modeler:executionPlatform",a="modeler:executionPlatformVersion";function l(e){e.registerHandler("executionPlatform.update",c)}function c(e){this._modeler=e.get("bpmnjs",!1)||e.get("_parent")}function u(e,t){e.set(r,t.name),e.set(a,t.version)}l.$inject=["commandStack"],c.prototype.execute=function(e){const t=e.executionPlatform,n=e.definitions=this._modeler.getDefinitions();return e.oldExecutionPlatform=function(e){return{name:e.get(r),version:e.get(a)}}(n),u(n,t),[]},c.prototype.revert=function(e){const t=e.oldExecutionPlatform;return u(e.definitions,t),[]},c.$inject=["injector"];const d={__init__:["executionPlatform","updateExecutionPlatformCommand"],executionPlatform:["type",o],updateExecutionPlatformCommand:["type",l]}},45953(e,t,n){"use strict";n.d(t,{$v:()=>np,f8:()=>Qd});var i=n(33470);function s(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var o,r={exports:{}},a=function(){if(o)return r.exports;o=1;var e=r.exports=function(t,n){if(n||(n=16),void 0===t&&(t=128),t<=0)return"0";for(var i=Math.log(Math.pow(2,t))/Math.log(n),s=2;i===1/0;s*=2)i=Math.log(Math.pow(2,t/s))/Math.log(n)*s;var o=i-Math.floor(i),r="";for(s=0;s<Math.floor(i);s++)r=Math.floor(Math.random()*n).toString(n)+r;if(o){var a=Math.pow(n,o);r=Math.floor(Math.random()*a).toString(n)+r}var l=parseInt(r,n);return l!==1/0&&l>=Math.pow(2,t)?e(t,n):r};return e.rack=function(t,n,i){var s=function(s){var r=0;do{if(r++>10){if(!i)throw new Error("too many ID collisions, use more bits");t+=i}var a=e(t,n)}while(Object.hasOwnProperty.call(o,a));return o[a]=s,a},o=s.hats={};return s.get=function(e){return s.hats[e]},s.set=function(e,t){return s.hats[e]=t,s},s.bits=t||128,s.base=n||16,s},r.exports}(),l=s(a);function c(e){if(!(this instanceof c))return new c(e);e=e||[128,36,1],this._seed=e.length?l.rack(e[0],e[1],e[2]):e}c.prototype.next=function(e){return this._seed(e||!0)},c.prototype.nextPrefixed=function(e,t){var n;do{n=e+this.next(!0)}while(this.assigned(n));return this.claim(n,t),n},c.prototype.claim=function(e,t){this._seed.set(e,t||!0)},c.prototype.assigned=function(e){return this._seed.get(e)||!1},c.prototype.unclaim=function(e){delete this._seed.hats[e]},c.prototype.clear=function(){var e,t=this._seed.hats;for(e in t)this.unclaim(e)};var u=n(23906);class d extends i.A{_init(e){super._init(e),this.on("import.parse.complete",e=>{e.error||this._collectIds(e.definitions,e.elementsById)}),this.on("destroy",()=>{this._moddle.ids.clear()}),this.on("viewer.created",({viewer:e})=>{e.on("elements.changed",({elements:e})=>{e.some(function(e){return(0,u.f7)(e,["dmn:Decision","dmn:Definitions","dmn:BusinessKnowledgeModel"])})&&this._updateViews()})})}_collectIds(e,t){var n,i=e.$model.ids;for(n in i.clear(),t)i.claim(n,t[n])}_createModdle(e){var t=super._createModdle(e);return t.ids=new c([32,36,1]),t}}var p=n(7475),h=n(98364),m=n(30566),g=n(89768),f=n(27714),y=n(67319),v=n(57094),b=n(87496),_={width:135,height:46},x={width:180,height:80},C={width:125,height:45},w={width:100,height:63};function E(e){b.A.call(this),this._drdFactory=e}(0,p.A)(E,b.A),E.$inject=["drdFactory"],E.prototype.baseCreate=b.A.prototype.create,E.prototype.create=function(e,t){return this.createDrdElement(e,t)},E.prototype.createDrdElement=function(e,t){var n,i=this._drdFactory,s=(t=t||{}).businessObject;if(!s){if(!t.type)throw new Error("no shape type specified");s=i.create(t.type)}return s.di||("connection"===e?s.di=i.createDiEdge(s,[]):"shape"===e&&(s.di=i.createDiShape(s,{}))),n=this._getDefaultSize(s),t=(0,v.assign)({businessObject:s,id:s.id},n,t),this.baseCreate(e,t)},E.prototype._getDefaultSize=function(e){return(0,u.is)(e,"dmn:BusinessKnowledgeModel")?_:(0,u.is)(e,"dmn:Decision")?x:(0,u.is)(e,"dmn:InputData")?C:(0,u.is)(e,"dmn:KnowledgeSource")?w:{width:100,height:80}};var D="left",S="right",A=x.width;function R(e){return!(0,u.is)(e,"dmn:Association")}function M(e,t){return Math.abs(t.x-e.x)}function I(e){e.on("autoPlace",function(e){var t,n,i=e.shape;return t=e.source,n=i,(0,u.is)(n,"dmn:TextAnnotation")?function(e,t){var n=(0,y.Fy)(e),i={x:n.right+t.width/2,y:n.top-50-t.height/2};return(0,f.D6)(e,t,i,(0,f.u6)({y:{margin:-30,minDistance:20}}))}(t,n):(0,u.is)(n,"dmn:DRGElement")?function(e,t){var n=(0,y.Fy)(e),i=(0,y.pp)(e),s=(0,f.dq)(e,{defaultDistance:180,direction:"s",getWeight:function(t){return t.target===e?1:-1},filter:R,reference:"center"}),o={x:i.x,y:n.bottom+s};return(0,f.D6)(e,t,o,function(e){var t,n,i=(0,y.pp)(e);return function(e,s,o){var r;return t?(s.x<i.x?t=o:n=o,r=M(i,(0,y.pp)(t))<M(i,(0,y.pp)(n))?D:S):(t=o,n=o,r=(0,y.pp)(o).x-i.x>0?D:S),r===D?{x:Math.min((0,y.pp)(t).x-A-60,(0,y.Fy)(t).left-60-e.width/2),y:s.y}:{x:Math.max((0,y.pp)(n).x+A+60,(0,y.Fy)(n).right+60+e.width/2),y:s.y}}}(e))}(t,n):void 0})}I.$inject=["eventBus"];const j={__depends__:[g.A],__init__:["dmnAutoPlace"],dmnAutoPlace:["type",I]};var O=n(15167),k=n(86816),P=n(31323),F=n(80598),T=n(86104),N=n(25359),$=n(84322),L=n(96412),B=n(78303);function V(e,t,n,i){this.replaceElement=function(n,i,s){s=s||{};var o=i.type,r=n.businessObject,a=e.create(o),l={type:o,businessObject:a};if(l.width=n.width,l.height=n.height,a.name=r.name,i.table){var c=e.create("dmn:DecisionTable");c.$parent=a;var u=e.create("dmn:OutputClause");u.typeRef="string",u.$parent=c,c.output=[u];var d=e.create("dmn:InputClause");d.$parent=c;var p=e.create("dmn:LiteralExpression",{typeRef:"string"});d.inputExpression=p,p.$parent=d,c.input=[d],U(a,c,e)}if(i.expression){var h=e.create("dmn:LiteralExpression"),m=e.create("dmn:InformationItem",{name:r.name});U(a,h,e,m)}return t.replaceElement(n,l,s)}}function U(e,t,n,i){if((0,u.is)(e,"dmn:Decision"))e.decisionLogic=t,t.$parent=e;else if((0,u.is)(e,"dmn:BusinessKnowledgeModel")){var s=n.create("dmn:FunctionDefinition",{body:t});e.encapsulatedLogic=s,s.$parent=e,t.$parent=s}i&&(e.variable=i,i.$parent=e)}V.$inject=["drdFactory","replace","selection","modeling"];const z={__depends__:[B.A,T.A],drdReplace:["type",V]},K=[{label:"Empty",actionName:"replace-with-empty-decision",className:"dmn-icon-clear",target:{type:"dmn:Decision",table:!1,expression:!1}},{label:"Decision table",actionName:"replace-with-decision-table",className:"dmn-icon-decision-table",target:{type:"dmn:Decision",table:!0,expression:!1}},{label:"Literal expression",actionName:"replace-with-literal-expression",className:"dmn-icon-literal-expression",target:{type:"dmn:Decision",table:!1,expression:!0}}],W=[{label:"Empty",actionName:"replace-with-empty",className:"dmn-icon-clear",target:{type:"dmn:BusinessKnowledgeModel",table:!1,expression:!1}},{label:"Literal Expression",actionName:"replace-with-literal-expression",className:"dmn-icon-literal-expression",target:{type:"dmn:BusinessKnowledgeModel",table:!1,expression:!0}}];function q(e,t,n,i,s,o){this._popupMenu=e,this._modeling=t,this._moddle=n,this._drdReplace=i,this._rules=s,this._translate=o,this.register()}q.$inject=["popupMenu","modeling","moddle","drdReplace","rules","translate"],q.prototype.register=function(){this._popupMenu.registerProvider("dmn-replace",this)},q.prototype.getEntries=function(e){var t,n,i=e.businessObject;return this._rules.allowed("shape.replace",{element:e})?(0,u.is)(i,"dmn:Decision")?(n=(0,u.TO)(i),t=(0,v.filter)(K,function(e){var t="replace-with-empty-decision"===e.actionName&&n,i="replace-with-decision-table"===e.actionName&&!(0,u.is)(n,"dmn:DecisionTable"),s="replace-with-literal-expression"===e.actionName&&!(0,u.is)(n,"dmn:LiteralExpression");return t||i||s}),this._createEntries(e,t)):(0,u.is)(i,"dmn:BusinessKnowledgeModel")?(n=(0,u.TO)(i),t=(0,v.filter)(W,function(e){var t="replace-with-empty"===e.actionName&&n,i="replace-with-decision-table"===e.actionName&&!(0,u.is)(n,"dmn:DecisionTable"),s="replace-with-literal-expression"===e.actionName&&!(0,u.is)(n,"dmn:LiteralExpression");return t||i||s}),this._createEntries(e,t)):[]:[]},q.prototype._createEntries=function(e,t){var n=[],i=this;return(0,v.forEach)(t,function(t){var s=i._createMenuEntry(t,e);n.push(s)}),n},q.prototype._createMenuEntry=function(e,t,n){var i=this._drdReplace.replaceElement;return n=n||function(){return i(t,e.target)},{label:(0,this._translate)(e.label),className:e.className,id:e.actionName,action:n}},q.prototype.getHeaderEntries=function(e){return[]};const G={__depends__:[P.A,L.A,z],__init__:["replaceMenuProvider"],replaceMenuProvider:["type",q]};var H=n(72120);function X(e,t,n,i,s,o,r,a,l,c,u,d){u=u||{},t.registerProvider(this),this._contextPad=t,this._modeling=n,this._elementFactory=i,this._connect=s,this._create=o,this._rules=r,this._popupMenu=a,this._canvas=l,this._translate=c,!1!==u.autoPlace&&(this._autoPlace=d.get("autoPlace",!1)),e.on("create.end",250,function(e){var n=e.context.shape;if((0,H.Io)(e)){var i=t.getEntries(n);i.replace&&i.replace.action.click(e,n)}})}X.$inject=["eventBus","contextPad","modeling","elementFactory","connect","create","rules","popupMenu","canvas","translate","config.contextPad","injector"],X.prototype.getContextPadEntries=function(e){var t=this._modeling,n=this._elementFactory,i=this._connect,s=this._create,o=this._popupMenu,r=this._contextPad,a=this._rules,l=this._translate,c=this._autoPlace,d={};if("label"===e.type)return d;var p=e.businessObject;function h(e,t,n){i.start(e,t,n)}function m(e,t,i,o){function r(t,i){var r=n.createShape((0,v.assign)({type:e},o));s.start(t,r,{source:i,hints:{connectionTarget:i}})}var a=c?function(t,i){var s=n.createShape((0,v.assign)({type:e},o));c.append(i,s,{connectionTarget:i})}:r;return{group:"model",className:t,title:i,action:{dragstart:r,click:a}}}(0,u.is)(p,"dmn:Decision")&&(0,v.assign)(d,{"append.decision":m("dmn:Decision","dmn-icon-decision",l("Append decision"))}),(0,u.f7)(p,["dmn:BusinessKnowledgeModel","dmn:Decision","dmn:KnowledgeSource"])&&(0,v.assign)(d,{"append.knowledge-source":m("dmn:KnowledgeSource","dmn-icon-knowledge-source",l("Append knowledge source"))}),(0,u.f7)(p,["dmn:BusinessKnowledgeModel","dmn:Decision"])&&(0,v.assign)(d,{"append.business-knowledge-model":m("dmn:BusinessKnowledgeModel","dmn-icon-business-knowledge",l("Append business knowledge model"))}),(0,u.f7)(p,["dmn:Decision","dmn:KnowledgeSource"])&&(0,v.assign)(d,{"append.input-data":m("dmn:InputData","dmn-icon-input-data",l("Append input data"))}),(0,u.is)(p,"dmn:DRGElement")&&(0,v.assign)(d,{"append.text-annotation":m("dmn:TextAnnotation","dmn-icon-text-annotation",l("Add text annotation")),connect:{group:"connect",className:"dmn-icon-connection-multi",title:l("Connect to other element"),action:{click:h,dragstart:h}}}),(0,u.is)(p,"dmn:TextAnnotation")&&(0,v.assign)(d,{connect:{group:"connect",className:"dmn-icon-connection-multi",title:l("Connect to other element"),action:{click:h,dragstart:h}}}),o.isEmpty(e,"dmn-replace")||(0,v.assign)(d,{replace:{group:"edit",className:"dmn-icon-screw-wrench",title:l("Change type"),action:{click:function(e,t){var n=(0,v.assign)(function(e){var t=r.getPad(e).html.getBoundingClientRect();return{x:t.left,y:t.bottom+5}}(t),{cursor:{x:e.x,y:e.y}});o.open(t,"dmn-replace",n)}}}});var g=a.allowed("elements.delete",{elements:[e]});return(0,v.isArray)(g)&&(g=g[0]===e),g&&(0,v.assign)(d,{delete:{group:"edit",className:"dmn-icon-trash",title:l("Delete"),action:{click:function(n){t.removeElements([e])}}}}),d},X.prototype.getMultiElementContextPadEntries=function(e){var t=this._modeling,n=this._translate,i={};return this._isDeleteAllowed(e)&&(0,v.assign)(i,{delete:{group:"edit",className:"dmn-icon-trash",title:n("Delete"),action:{click:(e,n)=>t.removeElements(n.slice())}}}),i},X.prototype._isDeleteAllowed=function(e){var t=this._rules.allowed("elements.delete",{elements:e});return(0,v.isArray)(t)?(0,v.every)(e,e=>t.includes(e)):t};const Y={__depends__:[P.A,F.A,T.A,N.A,$.A,G],__init__:["contextPadProvider"],contextPadProvider:["type",X]};var J=n(48461),Z=n(486),Q=n(81340),ee=n(93083),te=n.n(ee);const ne=/\s/,ie=/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i,se=/^[a-z_][\w-.]*$/i,oe=/\$\{([^}]*)\}/g;function re(e,t,n,i,s){this._eventBus=e,this._modeling=t,this._canvas=n,this._definitionPropertiesView=i,this._translate=s,e.on("definitionIdView.create",function(e){this._container=e.html;var t=(0,Q.P)(".dmn-definitions-name",this._container),n=(0,Q.P)(".dmn-definitions-id",this._container);this._setup(t,"name"),this._setup(n,"id")},this)}re.$inject=["eventBus","modeling","canvas","definitionPropertiesView","translate"],re.prototype.update=function(e,t){var n=this._canvas.getRootElement(),i={};if(i[e]=t,"id"===e){var s=function(e,t){const n=e.$model.ids.assigned(t);return t?n&&n!==e?"Element must have unique ID.":function(e){return t=e=function(e){return e.replace(oe,"$1")}(e),ne.test(t)?"Id must not contain spaces.":se.test(e)?void 0:ie.test(e)?"Id must not contain prefix.":"Id must be a valid QName.";var t}(t):"Element must have ID."}((0,u.Cf)(n),t);if(s)return void this._addErrorMessage(s);this._clearErrorMessage()}this._modeling.updateProperties(n,i)},re.prototype._setup=function(e,t){var n=this;e.setAttribute("contenteditable",!0),e.addEventListener("input",(0,v.debounce)(function(e){var i=e.target.value||e.target.textContent;n.update(t,i.trim())},300)),e.addEventListener("keydown",function(t){13===t.keyCode&&(e.blur(),window.getSelection().removeAllRanges())}),e.addEventListener("blur",function(){n._clearErrorMessage(),n._definitionPropertiesView.update()})},re.prototype._addErrorMessage=function(e){const t='<span class="dmn-definitions-error-message">'+this._translate(e)+"</span>";var n=(0,Q.P)(".dmn-definitions-id",this._container);this._clearErrorMessage(),(0,Q.Ly)(n).add("dmn-definitions-error"),n.parentElement.appendChild(te()(t))},re.prototype._clearErrorMessage=function(){var e=(0,Q.P)(".dmn-definitions-id",this._container);if((0,Q.Ly)(e).has("dmn-definitions-error")){(0,Q.Ly)(e).remove("dmn-definitions-error");const t=(0,Q.P)(".dmn-definitions-error-message",this._container);e.parentNode.removeChild(t)}};var ae=n(11847);const le={__depends__:[Z.A],__init__:["definitionPropertiesEdit","definitionPropertiesPaletteAdapter"],definitionPropertiesEdit:["type",re],definitionPropertiesPaletteAdapter:["type",ae.A]};var ce=n(27855);function ue(e){e.registerFilter(function(e){return(0,v.filter)(e,function(e){var t=(0,u.f7)(e,["dmn:AuthorityRequirement","dmn:InformationRequirement","dmn:KnowledgeRequirement","dmn:Association","dmn:TextAnnotation"]);return!(e.labelTarget||t)})})}ue.$inject=["distributeElements"];const de={__depends__:[ce.A],__init__:["drdDistributeElements"],drdDistributeElements:["type",ue]};var pe=n(88354),he=n(46622);function me(e){e.invoke(he.A,this)}(0,p.A)(me,he.A),me.$inject=["injector"],me.prototype._registerDefaultActions=function(e){he.A.prototype._registerDefaultActions.call(this,e);const t=e.get("canvas",!1),n=e.get("elementRegistry",!1),i=e.get("selection",!1),s=e.get("lassoTool",!1),o=e.get("handTool",!1),r=e.get("directEditing",!1),a=e.get("distributeElements",!1),l=e.get("alignElements",!1),c=e.get("searchPad",!1);t&&n&&i&&this._registerAction("selectElements",function(){var e=t.getRootElement(),s=n.filter(function(t){return t!==e});return i.select(s),s}),i&&a&&this._registerAction("distributeElements",function(e){var t=i.get(),n=e.type;t.length>2&&a.trigger(t,n)}),i&&l&&this._registerAction("alignElements",function(e){var t=i.get(),n=e.type;t.length>1&&l.trigger(t,n)}),s&&this._registerAction("lassoTool",function(){s.toggle()}),o&&this._registerAction("handTool",function(){o.toggle()}),i&&r&&this._registerAction("directEditing",function(){var e=i.get();e.length&&r.activate(e[0])}),i&&c&&this._registerAction("find",function(){c.toggle()})};const ge={__depends__:[pe.A],editorActions:["type",me]};var fe=n(84464);function ye(e,t,n,i){n.on("import.start",({definitions:n})=>{(0,fe.$)(n)||function(n){var s=n.dmnDI;s||(s=e.create("dmndi:DMNDI"),n.set("dmnDI",s));var o=e.create("dmndi:DMNDiagram");s.set("diagrams",[o]);var r=0;(0,v.forEach)(n.get("drgElement"),function(n){if((0,u.is)(n,"dmn:Decision")){var s=t._getDefaultSize(n),a=e.createDiShape(n,{x:150+30*r,y:150+30*r,width:s.width,height:s.height});i.updateDiParent(a,o),r++}})}(n)})}ye.$inject=["drdFactory","elementFactory","eventBus","drdUpdater"];const ve={__init__:["diGenerator"],diGenerator:["type",ye]};var be=n(54964),_e=n(76137),xe=n(29725);function Ce(e){e.invoke(xe.Ay,this)}(0,p.A)(Ce,xe.Ay),Ce.$inject=["injector"],Ce.prototype.registerBindings=function(e,t){function n(n,i){t.isRegistered(n)&&e.addListener(i)}xe.Ay.prototype.registerBindings.call(this,e,t),n("selectElements",function(n){var i=n.keyEvent;if(e.isKey(["a","A"],i)&&e.isCmd(i))return t.trigger("selectElements"),!0}),n("lassoTool",function(n){var i=n.keyEvent;if(!e.hasModifier(i))return e.isKey(["l","L"],i)?(t.trigger("lassoTool"),!0):void 0}),n("handTool",function(n){var i=n.keyEvent;if(!e.hasModifier(i))return e.isKey(["h","H"],i)?(t.trigger("handTool"),!0):void 0}),n("directEditing",function(n){var i=n.keyEvent;if(!e.hasModifier(i))return e.isKey(["e","E"],i)?(t.trigger("directEditing"),!0):void 0}),n("find",function(n){var i=n.keyEvent;if(e.isKey(["f","F"],i)&&e.isCmd(i))return t.trigger("find"),!0})};const we={__depends__:[_e.A],__init__:["keyboardBindings"],keyboardBindings:["type",Ce]};var Ee=n(56373),De=n(6188),Se=n(19112),Ae=n(17987),Re=n(75560),Me=n(46389),Ie="djs-label-hidden";function je(e,t,n,i,s){this._canvas=e,this._modeling=i,this._textRenderer=s,this._eventBus=n,t.registerProvider(this),n.on("element.dblclick",function(e){t.activate(e.element)}),n.on(["autoPlace.start","canvas.viewbox.changing","drag.init","drillDown.click","element.mousedown","popupMenu.open","selection.changed"],function(){t.complete()}),n.on(["commandStack.changed"],function(){t.cancel()}),n.on("create.end",500,function(e){var n=e.shape;((0,u.is)(n,"dmn:Decision")||(0,u.is)(n,"dmn:InputData")||(0,u.is)(n,"dmn:BusinessKnowledgeModel")||(0,u.is)(n,"dmn:KnowledgeSource")||(0,u.is)(n,"dmn:TextAnnotation"))&&t.activate(n)}),n.on("autoPlace.end",500,function(e){t.activate(e.shape)}),this._eventBus.on(["directEditing.complete","directEditing.cancel"],function(t){var n=t.active;if(n){var i=n.element.label||n.element;e.removeMarker(i,Ie)}})}je.$inject=["canvas","directEditing","eventBus","modeling","textRenderer"],je.prototype.activate=function(e){var t=(0,Me.p)(e);if((0,v.isDefined)(t)){var n={text:t},i=this.getEditingBBox(e);(0,v.assign)(n,i);var s={},o=n.style||{};return(0,u.is)(e,"dmn:DRGElement")&&((0,v.assign)(s,{centerVertically:!0}),(0,v.assign)(o,{backgroundColor:null,border:null})),(0,u.is)(e,"dmn:TextAnnotation")&&(0,v.assign)(s,{resizable:!0}),(0,v.assign)(n,{options:s,style:o}),this._canvas.addMarker(e,Ie),n}},je.prototype.getEditingBBox=function(e){var t=this._canvas,n=e.label||e,i=t.getAbsoluteBBox(n),s={x:i.x,y:i.y},o=t.zoom(),r=this._textRenderer.getDefaultStyle(),a=r.fontSize*o,l=r.lineHeight,c={fontFamily:this._textRenderer.getDefaultStyle().fontFamily,fontWeight:this._textRenderer.getDefaultStyle().fontWeight};return(0,u.is)(e,"dmn:DRGElement")&&((0,v.assign)(s,{width:i.width,height:i.height}),(0,v.assign)(c,{fontSize:a+"px",lineHeight:l,paddingTop:7*o+"px",paddingBottom:7*o+"px",paddingLeft:5*o+"px",paddingRight:5*o+"px"})),(0,u.is)(e,"dmn:TextAnnotation")&&((0,v.assign)(s,{width:i.width,height:i.height,minWidth:30*o,minHeight:10*o}),(0,v.assign)(c,{textAlign:"left",paddingTop:5*o+"px",paddingBottom:7*o+"px",paddingLeft:7*o+"px",paddingRight:5*o+"px",fontSize:a+"px",lineHeight:l})),{bounds:s,style:c}},je.prototype.update=function(e,t,n,i){var s,o,r;(0,u.is)(e,"dmn:TextAnnotation")&&(o=this._canvas.getAbsoluteBBox(e),s={x:e.x,y:e.y,width:e.width/o.width*i.width,height:e.height/o.height*i.height}),(r=t)&&r.trim()||(t=null),this._modeling.updateLabel(e,t,s)};const Oe={__depends__:[Se.A,Ae.A,Re.A],__init__:["labelEditingProvider"],labelEditingProvider:["type",je]};var ke=n(98142);function Pe(e,t){t.invoke(ke.A,this),this.preExecute("connection.create",function(t){var n=t.connection,i=n.businessObject,s=t.source,o=t.target;(0,u.is)(n,"dmn:Association")?((i.sourceRef=e.create("dmn:DMNElementReference",{href:"#"+s.id})).$parent=i,(i.targetRef=e.create("dmn:DMNElementReference",{href:"#"+o.id})).$parent=i):(i["required"+function(e){return(0,u.is)(e,"dmn:BusinessKnowledgeModel")?"Knowledge":(0,u.is)(e,"dmn:Decision")?"Decision":(0,u.is)(e,"dmn:InputData")?"Input":(0,u.is)(e,"dmn:KnowledgeSource")?"Authority":void 0}(s)]=e.create("dmn:DMNElementReference",{href:"#"+s.id})).$parent=i},!0)}function Fe(e,t,n,i){function s(e,i,s){i||(i=e.incoming.filter(function(e){return(0,u.is)(e,"dmn:InformationRequirement")}));var o={};s?o[s]=i:o=function(e,t){var n={};return t.forEach(function(t){var i=(0,y.vc)(t.source,e).split("-").shift();n[i]||(n[i]=[]),n[i].push(t)}),n}(e,i),(0,v.forEach)(o,function(i,s){i=function(e,t){var n;return n=t.includes("top")||t.includes("bottom")?"x":"y",e.sort(function(e,t){return(0,y.pp)(e.source)[n]-(0,y.pp)(t.source)[n]})}(i,s);var o=function(e,t,n){return e.map(function(i,s){var o=i.source,r=(0,y.pp)(o),a=(0,y.Fy)(o),l=(0,y.Fy)(t),c=e.length;return n.includes("bottom")?{start:{x:r.x,y:a.top},end:{x:l.left+t.width/(c+1)*(s+1),y:l.bottom}}:n.includes("top")?{start:{x:r.x,y:a.bottom},end:{x:l.left+t.width/(c+1)*(s+1),y:l.top}}:n.includes("right")?{start:{x:a.left,y:r.y},end:{x:l.right,y:l.top+t.height/(c+1)*(s+1)}}:{start:{x:a.right,y:r.y},end:{x:l.left,y:l.top+t.height/(c+1)*(s+1)}}})}(i,e,s);i.forEach((e,i)=>{var s=o[i].start,r=o[i].end,a=t.layoutConnection(e,{connectionStart:s,connectionEnd:r});n.updateWaypoints(e,a)})})}e.invoke(ke.A,this),this.preExecute(["connection.create","connection.reconnect"],function(e){var t=e.connection,n=e.newSource||e.source,s=e.newTarget||e.target;if((!(0,u.is)(t,"dmn:InformationRequirement")||i.allowed("connection.connect",{connection:t,source:n,target:s}))&&(0,u.is)(t,"dmn:InformationRequirement")){var o=(0,y.vc)(n,s);e.hints||(e.hints={}),(0,v.assign)(e.hints,function(e,t,n){var i=(0,y.pp)(e),s=(0,y.pp)(t);return n.includes("bottom")?(i.y=e.y,s.y=t.y+t.height):n.includes("top")?(i.y=e.y+e.height,s.y=t.y):n.includes("right")?(i.x=e.x,s.x=t.x+t.width):(i.x=e.x+e.width,s.x=t.x),{connectionStart:i,connectionEnd:s}}(n,s,o))}},!0),this.postExecuted(["connection.create","connection.delete","connection.reconnect"],function(e){var t=e.connection,n=t.source||e.source,i=t.target||e.target;if((0,u.is)(t,"dmn:InformationRequirement")){var o=(0,y.vc)(n,i),r=i.incoming.filter(e=>{var t=(0,y.vc)(e.source,e.target);return(0,u.is)(e,"dmn:InformationRequirement")&&Te(t,o)});r.length&&s(i,r,o)}},!0),this.preExecute("connection.reconnect",function(e){var t=e.connection,n=t.source,i=t.target;if((0,u.is)(t,"dmn:InformationRequirement")){var o=(0,y.vc)(n,i),r=i.incoming.filter(e=>{var n=(0,y.vc)(e.source,e.target);return e!==t&&(0,u.is)(e,"dmn:InformationRequirement")&&Te(n,o)});r.length&&s(i,r,o)}},!0),this.postExecuted("elements.move",500,function(e){var t=e.shapes,n=e.closure.enclosedConnections;t.forEach(function(e){if((0,u.f7)(e,["dmn:Decision","dmn:InputData"])){var t=e.incoming.filter(function(e){return(0,u.is)(e,"dmn:InformationRequirement")&&!n[e.id]});t.length&&s(e,t),e.outgoing.forEach(function(e){(0,u.is)(e,"dmn:InformationRequirement")&&!n[e.id]&&s(e.target)})}})},!0)}function Te(e,t){return e&&t&&e.split("-").shift()===t.split("-").shift()}function Ne(e,t,n){e.invoke(ke.A,this),this.preExecute("connection.reconnect",function(e){var i=e.connection,s=e.newSource||i.source,o=e.newTarget||i.target,r=i.waypoints.slice(),a=n.allowed("connection.reconnect",{connection:i,source:s,target:o});a&&a.type!==i.type&&(e.connection=t.connect(s,o,{type:a.type,waypoints:r}),t.removeConnection(i))},!0)}function $e(e,t,n){ke.A.call(this,e),this._modeling=t,this.postExecuted(["shape.replace"],1500,function(e){var i=e.context,s=i.oldShape,o=i.newShape;t.unclaimId(s.businessObject.id,s.businessObject),t.updateProperties(o,{id:s.id}),n.select(o)})}Pe.$inject=["drdFactory","injector"],(0,p.A)(Pe,ke.A),Fe.$inject=["injector","layouter","modeling","rules"],(0,p.A)(Fe,ke.A),(0,p.A)(Ne,ke.A),Ne.$inject=["injector","modeling","rules"],(0,p.A)($e,ke.A),$e.$inject=["eventBus","modeling","selection"];class Le extends ke.A{constructor(e){super(e),this.executed("element.updateProperties",this.updateIds.bind(this))}updateIds({context:e}){const{element:t,oldProperties:n,properties:i}=e,s=(0,u.Cf)(t);if(this.shouldSkipUpdate(s,n,i))return;const o=function(e){let t=e;for(;!(0,u.is)(t,"dmn:Definitions");)t=t.$parent;return t}(s);o.get("drgElement").forEach(e=>{!function(e,t,n){const i={authorityRequirement:()=>{e.authorityRequirement.forEach(e=>{const{requiredAuthority:i,requiredDecision:s,requiredInput:o}=e;i&&i.href===`#${t}`&&(i.href=`#${n}`),s&&s.href===`#${t}`&&(s.href=`#${n}`),o&&o.href===`#${t}`&&(o.href=`#${n}`)})},informationRequirement:()=>{e.informationRequirement.forEach(e=>{const{requiredDecision:i,requiredInput:s}=e;i&&i.href===`#${t}`&&(i.href=`#${n}`),s&&s.href===`#${t}`&&(s.href=`#${n}`)})},knowledgeRequirement:()=>{e.knowledgeRequirement.forEach(e=>{const{requiredKnowledge:i}=e;i&&i.href===`#${t}`&&(i.href=`#${n}`)})}};(0,v.forEach)(i,(t,n)=>{e[n]&&t()})}(e,n.id,i.id)}),o.get("artifact").forEach(e=>{!function(e,t,n){const i={sourceRef:()=>{const{sourceRef:i}=e;i.href===`#${t}`&&(i.href=`#${n}`)},targetRef:()=>{const{targetRef:i}=e;i.href===`#${t}`&&(i.href=`#${n}`)}};(0,v.forEach)(i,(t,n)=>{e[n]&&t()})}(e,n.id,i.id)})}shouldSkipUpdate(e,t,n){return!function(e,t){return"id"in e&&"id"in t}(t,n)||!(0,u.is)(e,"dmn:DRGElement")&&!(0,u.is)(e,"dmn:TextAnnotation")}}Le.$inject=["eventBus"];class Be extends ke.A{static $inject=["eventBus","modeling"];constructor(e,t){super(e),this._modeling=t,this.postExecuted("element.updateProperties",this.updateVariableFromElement),this.postExecuted("element.updateLabel",this.updateVariableFromLabel)}updateVariableFromLabel=({context:e})=>{const{element:t,newLabel:n}=e,i=(0,u.Cf)(t).variable;i&&this._modeling.updateProperties(i,{name:n})};updateVariableFromElement=({context:e})=>{const{element:t,properties:n}=e,i=(0,u.Cf)(t);i.variable&&((0,u.is)(t,"dmn:Decision")||(0,u.is)(t,"dmn:BusinessKnowledgeModel"))&&this.isNameChanged(n)&&(this.isVariable(t)||this.shouldSyncVariable(t)||this.syncElementVariableChange(i))};isNameChanged(e){return"name"in e}isVariable(e){const t=function(e){return e.$parent}(e);return(0,u.is)(e,"dmn:InformationItem")&&t&&t.get("variable")===e}shouldSyncVariable(e){const t=(0,u.Cf)(e),n=t.get("variable");return n&&t.name===n.name}syncElementVariableChange(e){const t=e.get("name"),n=e.variable;this._modeling.updateProperties(n,{name:t})}}const Ve={__init__:["createConnectionBehavior","idChangeBehavior","nameChangeBehavior","layoutConnectionBehavior","replaceConnectionBehavior","replaceElementBehavior"],createConnectionBehavior:["type",Pe],idChangeBehavior:["type",Le],nameChangeBehavior:["type",Be],layoutConnectionBehavior:["type",Fe],replaceConnectionBehavior:["type",Ne],replaceElementBehavior:["type",$e]};var Ue=n(81734),ze=n(24049);function Ke(e){e.invoke(ze.A,this)}function We(e,t){if(!e||He(e)||!t||He(t))return null;if(e===t)return!1;if((0,u.is)(e,"dmn:BusinessKnowledgeModel")&&(0,u.f7)(t,["dmn:BusinessKnowledgeModel","dmn:Decision"]))return{type:"dmn:KnowledgeRequirement"};if((0,u.is)(e,"dmn:Decision")){if((0,u.is)(t,"dmn:Decision"))return{type:"dmn:InformationRequirement"};if((0,u.is)(t,"dmn:KnowledgeSource"))return{type:"dmn:AuthorityRequirement"}}if((0,u.is)(e,"dmn:Definitions")||(0,u.is)(t,"dmn:Definitions"))return!1;if((0,u.is)(e,"dmn:InputData")){if((0,u.is)(t,"dmn:Decision"))return{type:"dmn:InformationRequirement"};if((0,u.is)(t,"dmn:KnowledgeSource"))return{type:"dmn:AuthorityRequirement"}}return(0,u.is)(e,"dmn:KnowledgeSource")&&(0,u.f7)(t,["dmn:BusinessKnowledgeModel","dmn:Decision","dmn:KnowledgeSource"])?{type:"dmn:AuthorityRequirement"}:!!((0,u.is)(e,"dmn:TextAnnotation")&&!(0,u.is)(t,"dmn:TextAnnotation")||!(0,u.is)(e,"dmn:TextAnnotation")&&(0,u.is)(t,"dmn:TextAnnotation"))&&{type:"dmn:Association"}}function qe(e,t){return(0,u.f7)(e,["dmn:BusinessKnowledgeModel","dmn:Decision","dmn:InputData","dmn:KnowledgeSource","dmn:TextAnnotation"])&&(0,u.is)(t,"dmn:Definitions")}function Ge(e,t){return(0,v.isArray)(e)||(e=[e]),!t||!(!(0,v.every)(e,function(e){return(0,u.f7)(e,["dmn:BusinessKnowledgeModel","dmn:Decision","dmn:InputData","dmn:KnowledgeSource","dmn:TextAnnotation","dmn:InformationRequirement","dmn:AuthorityRequirement","dmn:KnowledgeRequirement","dmn:Association"])})||!(0,u.is)(t,"dmn:Definitions"))}function He(e){return!!e.labelTarget}(0,p.A)(Ke,ze.A),Ke.$inject=["injector"],Ke.prototype.init=function(){this.addRule("connection.create",function(e){return We(e.source,e.target)}),this.addRule("connection.reconnect",function(e){return e.connection,We(e.source,e.target)}),this.addRule("connection.updateWaypoints",function(e){const t=e.connection;return{type:t.type,businessObject:t.businessObject}}),this.addRule("elements.move",function(e){var t=e.target,n=e.shapes;return e.position,Ge(n,t)}),this.addRule("shape.create",function(e){return qe(e.shape,e.target)}),this.addRule("shape.resize",function(e){var t=e.shape;return(0,u.is)(t,"dmn:TextAnnotation")})},Ke.prototype.canConnect=We,Ke.prototype.canCreate=qe,Ke.prototype.canMove=Ge;const Xe={__depends__:[Ue.A],__init__:["drdRules"],drdRules:["type",Ke]};function Ye(e){this._model=e}Ye.$inject=["moddle"],Ye.prototype._needsId=function(e){return(0,u.f7)(e,["dmn:Artifact","dmn:DMNElement","dmn:DRGElement","dmndi:DMNDiagram","dmndi:DMNDiagramElement"])},Ye.prototype._ensureId=function(e){var t=(e.$type||"").replace(/^[^:]*:/g,"")+"_";!e.id&&this._needsId(e)&&(e.id=this._model.ids.nextPrefixed(t,e))},Ye.prototype.create=function(e,t){var n=this._model.create(e,t||{});return this._ensureId(n),n},Ye.prototype.createDiShape=function(e,t,n){return this.create("dmndi:DMNShape",(0,v.assign)({dmnElementRef:e,bounds:this.createDiBounds(t)},n))},Ye.prototype.createDiBounds=function(e){return this.create("dc:Bounds",e)},Ye.prototype.createDiEdge=function(e,t,n){return this.create("dmndi:DMNEdge",{dmnElementRef:e,waypoint:this.createDiWaypoints(t)},n)},Ye.prototype.createDiWaypoints=function(e){var t=this;return e.map(function(e){return t.createDiWaypoint(e)})},Ye.prototype.createDiWaypoint=function(e){return this.create("dc:Point",(0,v.pick)(e,["x","y"]))},Ye.prototype.createExtensionElements=function(){return this.create("dmn:ExtensionElements",{values:[]})};var Je=n(93742);function Ze(e,t,n,i,s){s.invoke(ke.A,this),this._definitionPropertiesView=t,this._drdFactory=n,this._drdRules=i;var o=this;function r(e){var t=e.connection,n=e.parent,i=e.shape;t&&!(0,u.is)(t,"dmn:Association")&&(n=t.target),o.updateParent(i||t,n)}function a(e){var t=e.connection,n=e.shape,i=e.parent||e.newParent;t&&!(0,u.is)(t,"dmn:Association")&&(i=t.target),o.updateParent(n||t,i)}function l(e){var t=e.shape;((0,u.is)(t,"dmn:DRGElement")||(0,u.is)(t,"dmn:TextAnnotation"))&&o.updateBounds(t)}function c(e){o.updateConnectionWaypoints(e)}this.executed(["connection.create","connection.layout"],function(t){var n=t.connection;t.cropped||(n.waypoints=e.getCroppedWaypoints(n),t.cropped=!0)},!0),this.reverted(["connection.layout"],function(e){delete e.cropped},!0),this.executed(["connection.create","connection.delete","connection.move","shape.create","shape.delete"],r,!0),this.reverted(["connection.create","connection.delete","connection.move","shape.create","shape.delete"],a,!0),this.executed(["shape.create","shape.move","shape.resize"],l,!0),this.reverted(["shape.create","shape.move","shape.resize"],l,!0),this.executed(["connection.create","connection.layout","connection.move","connection.updateWaypoints"],c,!0),this.reverted(["connection.create","connection.layout","connection.move","connection.updateWaypoints"],c,!0),this.executed("connection.create",function(e){var t=e.connection,n=t.businessObject,i=e.target.businessObject;(0,u.is)(t,"dmn:Association")?r(e):o.updateSemanticParent(n,i)},!0),this.reverted("connection.create",function(e){a(e)},!0),this.executed("connection.reconnect",function(e){var t=e.connection.businessObject,n=e.newTarget.businessObject;(0,u.is)(t,"dmn:Association")||o.updateSemanticParent(t,n)},!0),this.reverted("connection.reconnect",function(e){var t=e.connection.businessObject,n=e.oldTarget.businessObject;(0,u.is)(t,"dmn:Association")||o.updateSemanticParent(t,n)},!0),this.executed("element.updateProperties",function(e){t.update()},!0),this.reverted("element.updateProperties",function(e){t.update()},!0)}(0,p.A)(Ze,ke.A),Ze.$inject=["connectionDocking","definitionPropertiesView","drdFactory","drdRules","injector"],Ze.prototype.updateBounds=function(e){var t=e.businessObject.di.bounds;(0,v.assign)(t,{x:e.x,y:e.y,width:e.width,height:e.height})},Ze.prototype.updateConnectionWaypoints=function(e){var t=this._drdFactory,n=e.connection,i=n.businessObject.di;i.waypoint=t.createDiWaypoints(n.waypoints).map(function(e){return e.$parent=i,e})},Ze.prototype.updateParent=function(e,t){var n=e.parent;(0,u.is)(e,"dmn:DRGElement")||(0,u.is)(e,"dmn:Artifact")||(n=t);var i=e.businessObject,s=n&&n.businessObject;this.updateSemanticParent(i,s),this.updateDiParent(i.di,s&&s.di)},Ze.prototype.updateSemanticParent=function(e,t){var n,i;e.$parent!==t&&((0,u.is)(e,"dmn:DRGElement")?i="drgElement":(0,u.is)(e,"dmn:Artifact")?i="artifact":(0,u.is)(e,"dmn:InformationRequirement")?i="informationRequirement":(0,u.is)(e,"dmn:AuthorityRequirement")?i="authorityRequirement":(0,u.is)(e,"dmn:KnowledgeRequirement")&&(i="knowledgeRequirement"),e.$parent&&(n=e.$parent.get(i),(0,Je.TF)(n,e)),t?(n=t.get(i))&&(n.push(e),e.$parent=t):e.$parent=null)},Ze.prototype.updateDiParent=function(e,t){if(e.$parent!==t){if(!(0,u.f7)(e,["dmndi:DMNEdge","dmndi:DMNShape"]))throw new Error("unsupported");for(var n=t||e;!(0,u.is)(n,"dmndi:DMNDiagram");)n=n.$parent;var i=n.get("diagramElements");t?(e.$parent=n,(0,Je.WQ)(i,e)):(e.$parent=null,(0,Je.TF)(i,e))}};var Qe=n(77550);function et(e){this._moddle=e}function tt(){function e(e,t){var n=e.label||e,i=e.labelTarget||e;return(0,Me.j)(n,t,i!==n),[n,i]}this.execute=function(t){return t.oldLabel=(0,Me.p)(t.element),e(t.element,t.newLabel)},this.revert=function(t){return e(t.element,t.oldLabel)}}et.$inject=["moddle"],et.prototype.execute=function(e){var t=this._moddle.ids,n=e.id,i=e.element;e.claiming?t.claim(n,i):t.unclaim(n)},et.prototype.revert=function(e){var t=this._moddle.ids,n=e.id,i=e.element;e.claiming?t.unclaim(n):t.claim(n,i)};const nt="id";function it(e,t){this._elementRegistry=e,this._moddle=t}function st(e,t){return nt in e&&e[nt]!==t[nt]}function ot(e,t){(0,v.forEach)(t,function(t,n){e.set(n,t)})}function rt(e){this._elementRegistry=e}function at(e,t){(0,v.forEach)(t,function(t,n){e.set(n,t)})}function lt(e,t,n){this._canvas=e,this._drdRules=t,n.invoke(Qe.A,this)}it.$inject=["elementRegistry","moddle"],it.prototype.execute=function(e){const{element:t,properties:n}=e,i=[t];if(!t)throw new Error("element required");const s=this._elementRegistry,o=this._moddle.ids,r=(0,u.Cf)(t),a=e.oldProperties||function(e,t){return(0,v.reduce)(t,function(t,n){return t[n]=e.get(n),t},{})}(r,(0,v.keys)(n));return st(n,r)&&(o.unclaim(r[nt]),s.updateId(t,n[nt]),o.claim(n[nt],r)),"name"in n&&t.label&&i.push(t.label),ot(r,n),e.oldProperties=a,e.changed=i,i},it.prototype.revert=function(e){const{element:t,properties:n,oldProperties:i}=e,s=(0,u.Cf)(t),o=this._elementRegistry,r=this._moddle.ids;return ot(s,i),st(n,s)&&(r.unclaim(n[nt]),o.updateId(t,i[nt]),r.claim(i[nt],s)),e.changed},rt.$inject=["elementRegistry"],rt.prototype.execute=function(e){var t=e.element,n=e.moddleElement,i=e.properties;if(!n)throw new Error("<moddleElement> required");var s=e.changed||[t],o=e.oldProperties||function(e,t){return(0,v.reduce)(t,function(t,n){return t[n]=e.get(n),t},{})}(n,(0,v.keys)(i));return at(n,i),e.oldProperties=o,e.changed=s,s},rt.prototype.revert=function(e){var t=e.oldProperties,n=e.moddleElement,i=e.changed;return at(n,t),i},(0,p.A)(lt,Qe.A),lt.$inject=["canvas","drdRules","injector"],lt.prototype.claimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t,claiming:!0})},lt.prototype.connect=function(e,t,n,i){var s=this._drdRules,o=this._canvas.getRootElement();return n||(n=s.canConnect(e,t)||{type:"dmn:Association"}),this.createConnection(e,t,n,o,i)},lt.prototype.getHandlers=function(){var e=Qe.A.prototype.getHandlers.call(this);return e["id.updateClaim"]=et,e["element.updateLabel"]=tt,e["element.updateProperties"]=it,e["element.updateModdleProperties"]=rt,e},lt.prototype.unclaimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t})},lt.prototype.updateModdleProperties=function(e,t,n){this._commandStack.execute("element.updateModdleProperties",{element:e,moddleElement:t,properties:n})},lt.prototype.updateProperties=function(e,t){this._commandStack.execute("element.updateProperties",{element:e,properties:t})},lt.prototype.updateLabel=function(e,t,n,i){this._commandStack.execute("element.updateLabel",{element:e,newLabel:t,newBounds:n,hints:i||{}})};var ct=n(57905);function ut(e){this._connectionDocking=e}function dt(e,t){return e?e.original||e:(0,y.pp)(t)}(0,p.A)(ut,ct.A),ut.$inject=["connectionDocking"],ut.prototype.layoutConnection=function(e,t){var n=this._connectionDocking;t||(t={});var i=t.source||e.source,s=t.target||e.target,o=t.waypoints||e.waypoints||[],r=t.connectionStart,a=t.connectionEnd,l=(0,y.vc)(i,s);if(r||(r=dt(o[0],i)),a||(a=dt(o[o.length-1],s)),(0,u.is)(e,"dmn:InformationRequirement")){o=[r,a];var c=n.getCroppedWaypoints((0,v.assign)({},e,{waypoints:o}),i,s),d={x:(a=c.pop()).x,y:a.y};return l.includes("bottom")?d.y+=20:l.includes("top")?d.y-=20:l.includes("right")?d.x+=20:d.x-=20,c.concat([d,a])}return[r,a]};var pt=n(10270);const ht={__init__:["modeling","drdUpdater"],__depends__:[Ve,Xe,Z.A,Se.A,T.A,Ae.A],drdFactory:["type",Ye],drdUpdater:["type",Ze],elementFactory:["type",E],modeling:["type",lt],layouter:["type",ut],connectionDocking:["type",pt.A]};var mt=n(16351),gt=n(46055),ft=n(27828);const yt={width:135,height:46},vt={width:100,height:63};function bt(e,t,n){return(0,ft.vt)("path",{d:e,strokeWidth:2,transform:`translate(${t.x}, ${t.y})`,...n})}function _t(e,t){this._styles=t,e.registerProvider(this)}function xt(e,t){var n;return"dmn:BusinessKnowledgeModel"===t?n=yt:"dmn:KnowledgeSource"===t&&(n=vt),e.width===n.width&&e.height===n.height}_t.$inject=["outline","styles"],_t.prototype.getOutline=function(e){const t=this._styles.cls("djs-outline",["no-fill"]);var n;return(0,u.is)(e,"dmn:InputData")?(n=(0,ft.vt)("rect"),(0,ft.CF)(n,(0,v.assign)({x:-5,y:-5,rx:27,width:e.width+10,height:e.height+10},t))):(0,u.is)(e,"dmn:BusinessKnowledgeModel")&&xt(e,"dmn:BusinessKnowledgeModel")?n=bt("\nM2.45221 16.0068L18.7175 1.74436L18.0615 0.996331L18.7175 1.74436C19.2646 1.26455 19.9676 \n1 20.6953 1H140.926C142.583 1 143.926 2.34295 143.926 3.99967L143.93 37.5457C143.93 \n38.3668 143.593 39.152 142.999 39.7183L143.689 40.4424L142.999 39.7183L127.299 \n54.6723C126.741 55.2036 126 55.5 125.23 55.5H4.53787C2.88599 55.5 1.54491 54.1646 1.5379 \n52.5127L1.43066 27.229L1.43065 27.2248L1.4301 18.2626C1.43005 \n17.3986 1.80255 16.5765 2.45221 16.0068Z\n",{x:-6,y:-6},t):(0,u.is)(e,"dmn:KnowledgeSource")&&xt(e,"dmn:KnowledgeSource")&&(n=bt("\nM1.79494 63.0032L1.2941 63.6423L1.79493 63.0032C1.71778 62.9427 1.6428 62.8741 1.57288 \n62.8L1.01736 63.3241L1.57288 62.8C1.20495 62.41 1 61.8941 1 61.3579V2.65067C1 1.74066 \n1.73867 1.00345 2.64868 1.00526L108.006 1.2145C109.66 1.21778 111 2.55996 111 \n4.21449V21.7015V61.6762C111 63.3188 109.679 64.656 108.037 64.676L107.06 64.6879C106.66 \n64.6927 106.26 64.6165 105.89 64.4652C105.04 64.1176 104.222 63.78 103.43 \n63.4531C93.4866 59.3517 87.6891 56.9603 76.3991 58.1057C71.7035 58.5821 66.8747 60.74 \n61.5721 63.1744C61.3243 63.2881 61.0753 63.4026 60.825 63.5177C55.6712 65.8868 49.9696 \n68.5077 43.2365 70.3468C31.101 73.6617 15.2135 73.5179 1.79494 63.0032Z\n",{x:-6,y:-1.5},t)),n},_t.prototype.updateOutline=function(e){return!!(0,u.f7)(e,["dmn:InputData","dmn:BusinessKnowledgeModel","dmn:KnowledgeSource"])};const Ct={__depends__:[gt.A],__init__:["outlineProvider"],outlineProvider:["type",_t]};var wt=n(33266),Et=n(2159),Dt=n(827);function St(e,t,n,i,s,o){this._palette=e,this._create=t,this._elementFactory=n,this._handTool=i,this._lassoTool=s,this._translate=o,e.registerProvider(this)}St.$inject=["palette","create","elementFactory","handTool","lassoTool","translate"],St.prototype.getPaletteEntries=function(e){var t={},n=this._create,i=this._elementFactory,s=this._handTool,o=this._lassoTool,r=this._translate;function a(e,t,s,o,r){function a(t){var s=i.createShape((0,v.assign)({type:e},r));n.start(t,s)}return{group:t,className:s,title:o,action:{dragstart:a,click:a}}}return(0,v.assign)(t,{"hand-tool":{group:"tools",className:"dmn-icon-hand-tool",title:r("Activate hand tool"),action:{click:function(e){s.activateHand(e)}}},"lasso-tool":{group:"tools",className:"dmn-icon-lasso-tool",title:r("Activate lasso tool"),action:{click:function(e){o.activateSelection(e)}}},"tool-separator":{group:"tools",separator:!0},"create.decision":a("dmn:Decision","drd","dmn-icon-decision",r("Create decision")),"create.input-data":a("dmn:InputData","drd","dmn-icon-input-data",r("Create input data")),"create.knowledge-source":a("dmn:KnowledgeSource","drd","dmn-icon-knowledge-source",r("Create knowledge source")),"create.business-knowledge-model":a("dmn:BusinessKnowledgeModel","drd","dmn-icon-business-knowledge",r("Create knowledge model"))}),t};const At={__depends__:[P.A,wt.A,$.A,Et.A,Dt.A],__init__:["paletteProvider"],paletteProvider:["type",St]};var Rt=n(60188);function Mt(e){e.on(["bendpoint.move.move","bendpoint.move.end"],2e3,function(e){var t=e.context,n=t.allowed,i=t.hover,s=t.source,o=t.target,r=t.type;if(t.hints||(t.hints={}),delete t.hints.connectionStart,delete t.hints.connectionEnd,(!n||"dmn:InformationRequirement"===n.type)&&i&&(0,u.f7)(i,["dmn:Decision","dmn:InputData"])&&s!==o){var a="reconnectStart"===r||"reconnectEnd"===r,l=(0,y.vc)(s,o);a&&i===s?(function(e,t){var n=It(e.context.source,t),i=e.x-n.x,s=e.y-n.y;e.x-=i,e.y-=s,e.dx-=i,e.dy-=s}(e,l),t.hints.connectionEnd=jt(o,l)):a&&i===o&&(t.hints.connectionStart=It(s,l),function(e,t){var n=jt(e.context.target,t),i=0,s=0;t.includes("top")||t.includes("bottom")?s=e.y-n.y:i=e.x-n.x,e.x-=i,e.y-=s,e.dx-=i,e.dy-=s}(e,l))}})}function It(e,t){var n=(0,y.Fy)(e),i=(0,y.pp)(e);return t.includes("bottom")?i.y=n.top:t.includes("top")?i.y=n.bottom:t.includes("right")?i.x=n.left:i.x=n.right,i}function jt(e,t){var n=(0,y.Fy)(e),i=(0,y.pp)(e);return t.includes("bottom")?i.y=n.bottom:t.includes("top")?i.y=n.top:t.includes("right")?i.x=n.right:i.x=n.left,i}function Ot(e){e.on(["connect.hover","connect.move","connect.end"],250,function(e){var t=e.context,n=t.canExecute,i=t.hover,s=t.source,o=t.target;if(n&&"dmn:InformationRequirement"===n.type){var r=(0,y.vc)(s,o);t.connectionStart=(0,y.pp)(s),t.connectionEnd=i===s?(0,y.pp)(o):{x:e.x,y:e.y},r.includes("bottom")?(t.connectionStart.y=(0,y.Fy)(s).top,t.connectionEnd.y=(0,y.Fy)(o).bottom):r.includes("top")?(t.connectionStart.y=(0,y.Fy)(s).bottom,t.connectionEnd.y=(0,y.Fy)(o).top):r.includes("right")?(t.connectionStart.x=(0,y.Fy)(s).left,t.connectionEnd.x=(0,y.Fy)(o).right):(t.connectionStart.x=(0,y.Fy)(s).right,t.connectionEnd.x=(0,y.Fy)(o).left)}else delete t.connectionStart,delete t.connectionEnd})}Mt.$inject=["eventBus"],Ot.$inject=["eventBus"];const kt={__depends__:[n(56875).A],__init__:["bendpointSnapping","connectSnapping"],bendpointSnapping:["type",Mt],connectSnapping:["type",Ot]};function Pt(e){h.A.call(this,e)}function Ft(e,t){Ut(e,"dmn:Decision")?function(e,t){for(const n of e.get("informationRequirement"))Tt(n,t);for(const n of e.get("knowledgeRequirement"))$t(n,t)}(e,t):Ut(e,"dmn:BusinessKnowledgeModel")?function(e,t){for(const n of e.get("knowledgeRequirement"))$t(n,t)}(e,t):Ut(e,"dmn:Expression")&&function(e,t){Ut(e,"dmn:FunctionDefinition")&&function(e,t){const n=e.get("formalParameter");for(const e of n)Lt(e,t)}(e,t)}(e,t)}function Tt(e,t){const n=e.get("requiredInput");n&&function(e,t){const n=Vt(e,t.rootElement);if(!n)return;const i=n.get("name");i&&t.variables.push({name:i,origin:n})}(n,t);const i=e.get("requiredDecision");i&&function(e,t){const n=Vt(e,t.rootElement);if(!n)return;const i=n.get("name");if(!i)return;const s={name:i,origin:n},o=n.get("decisionLogic");o&&function(e,t){Ut(e,"dmn:DecisionTable")&&function(e,t){if(1===e.length){const n={...Nt(e[0]),name:t.name};return void Object.assign(t,n)}const n=e.map(Nt);t.entries=n.filter(e=>!!e.name)}(e.get("output"),t)}(o,s),t.variables.push(s)}(i,t)}function Nt(e){const t={name:e.name};return e.typeRef&&(t.detail=e.typeRef),t}function $t(e,t){const n=e.get("requiredKnowledge");n&&function(e,t){const n=Vt(e,t.rootElement);n&&Ut(n,"dmn:BusinessKnowledgeModel")&&function(e,t){const n=e.get("name");if(!n)return;const i={name:n,origin:e},s=e.get("encapsulatedLogic");s&&function(e,t){const n=e.get("formalParameter").map((e,t)=>{const n={name:e.get("name")||`param ${t+1}`,type:e.get("typeRef")};return n.type||delete n.type,n});Object.assign(t,{type:"function",params:n})}(s,i),t.variables.push(i)}(n,t)}(n,t)}function Lt(e,t){const n=e.get("name");if(!n)return;const i={name:n,origin:e};e.get("typeRef")&&(i.detail=e.get("typeRef")),t.variables.push(i)}function Bt(e){let t=e;for(;t.$parent;)t=t.$parent;return t}function Vt(e,t){const n=e.get("href");if(!n||!n.startsWith("#"))return;const i=n.slice(1);return t.get("drgElement").find(e=>e.get("id")===i)}function Ut(e,t){return e.$instanceOf(t)}(0,p.A)(Pt,h.A),Pt.prototype._modelingModules=[m.A,j,O.A,k.A,Y,J.A,le,de,ge,ve,be.A,we,Ee.A,De.A,Oe,ht,mt.A,Ct,At,Rt.A,kt],Pt.prototype._modules=[].concat(Pt.prototype._modules,Pt.prototype._modelingModules);class zt{constructor(e){e.registerProvider(this)}getVariables(e,t){return e.concat(function(e){const t={variables:[],rootElement:Bt(e)};for(let n=e;n;n=n.$parent)Ft(n,t);return t.variables}(t))}}zt.$inject=["variableResolver"];const Kt={__init__:["dmnVariableProvider"],dmnVariableProvider:["type",zt],variableResolver:["type",class{constructor(){this._providers=[]}registerProvider(e){this._providers.push(e)}getVariables(e){return this._providers.reduce((t,n)=>n.getVariables(t,e),[])}}]};var Wt=n(11719);class qt{constructor(e){(0,v.assign)(this,e),Jt(this,"businessObject",{writable:!0})}}class Gt extends qt{constructor(e){super(e),Jt(this,"root",{writable:!0}),Jt(this,"cells",{enumerable:!0,value:this.cells||[]})}}class Ht extends qt{constructor(e){super(e),Jt(this,"root",{writable:!0}),Jt(this,"cells",{enumerable:!0,value:this.cells||[]})}}class Xt extends qt{constructor(e){super(e),Jt(this,"row",{writable:!0}),Jt(this,"col",{writable:!0})}}const Yt={root:class extends qt{constructor(e){super(e),Jt(this,"rows",{enumerable:!0,value:this.rows||[]}),Jt(this,"cols",{enumerable:!0,value:this.cols||[]})}},row:Gt,col:Ht,cell:Xt};function Jt(e,t,n){Object.defineProperty(e,t,n)}class Zt{constructor(){this._uid=12}create(e,t={}){return t.id||(t.id=e+"_"+this._uid++),function(e,t){const n=Yt[e];if(!n)throw new Error("unknown type "+e);return new n(t)}(e,t)}createRoot(e){return this.create("root",e)}createRow(e){return this.create("row",e)}createCol(e){return this.create("col",e)}createCell(e){return this.create("cell",e)}}class Qt{constructor(e){this._eventBus=e,this._elements={},e.on("table.clear",this.clear.bind(this))}add(e,t){const{id:n}=e;this._elements[n]=e}remove(e){const t=e.id||e;delete this._elements[t]}get(e){return this._elements[e]}getAll(){return en(this._elements)}forEach(e){en(this._elements).forEach(t=>e(t))}filter(e){return en(this._elements).filter(t=>e(t))}clear(){this._elements={}}updateId(e,t){this._validateId(t),"string"==typeof e&&(e=this.get(e)),this._eventBus.fire("element.updateId",{element:e,newId:t}),this.remove(e),e.id=t,this.add(e)}_validateId(e){if(!e)throw new Error("element must have an id");if(this._elements[e])throw new Error("element with id "+e+" already added")}}function en(e){return Object.keys(e).map(function(t){return e[t]})}Qt.$inject=["eventBus"];var tn=n(54988);class nn{constructor(e){this._listeners={},e.on("elements.changed",({elements:e})=>{this.elementsChanged(e)}),e.on("root.remove",t=>{const n=t.root.id;this._listeners[n]&&e.once("root.add",e=>{const t=e.root.id;this.updateId(n,t)})}),e.on("element.updateId",({element:e,newId:t})=>{this.updateId(e.id,t)})}elementsChanged(e){const t={},n=e.length;for(let i=0;i<n;i++){const{id:n}=e[i];if(t[n])return;t[n]=!0;const s=this._listeners[n]&&this._listeners[n].length;if(s)for(let e=0;e<s;e++)this._listeners[n][e]&&this._listeners[n][e]()}}onElementsChanged(e,t){this._listeners[e]||(this._listeners[e]=[]),this._listeners[e][this._listeners[e].length]=t}offElementsChanged(e,t){if(this._listeners[e])if(t){const n=this._listeners[e].indexOf(t);-1!==n&&this._listeners[e].splice(n,1)}else this._listeners[e].length=0}updateId(e,t){this._listeners[e]&&(this._listeners[t]=this._listeners[e],delete this._listeners[e])}}nn.$inject=["eventBus"];var sn=n(75668);class on extends sn.uA{constructor(e){super(e);const t=this._injector=e.injector;this._sheet=t.get("sheet"),this._changeSupport=t.get("changeSupport"),this._components=t.get("components"),this._eventBus=t.get("eventBus");const n=t.get("throttle");this.onElementsChanged=this.onElementsChanged.bind(this),this.onScroll=n(this.onScroll.bind(this))}onElementsChanged(){this.forceUpdate()}onScroll(){this._eventBus.fire("sheet.scroll")}getChildContext(){return{changeSupport:this._changeSupport,components:this._components,injector:this._injector}}componentWillMount(){const{id:e}=this._sheet.getRoot();this._changeSupport.onElementsChanged(e,this.onElementsChanged)}componentWillUnmount(){const{id:e}=this._sheet.getRoot();this._changeSupport.offElementsChanged(e,this.onElementsChanged)}render(){const{rows:e,cols:t}=this._sheet.getRoot(),n=this._components.getComponents("table.before"),i=this._components.getComponents("table.after"),s=this._components.getComponent("table.head"),o=this._components.getComponent("table.body"),r=this._components.getComponent("table.foot");return(0,sn.bF)(1,"div","tjs-container",[n&&n.map((e,t)=>(0,sn.sO)(2,e,null,t)),(0,sn.bF)(1,"div","tjs-table-container",(0,sn.bF)(1,"table","tjs-table",[s&&(0,sn.sO)(2,s,{rows:e,cols:t}),o&&(0,sn.sO)(2,o,{rows:e,cols:t}),r&&(0,sn.sO)(2,r,{rows:e,cols:t})],0),2,{onScroll:this.onScroll}),i&&i.map((e,t)=>(0,sn.sO)(2,e,null,t))],0)}}class rn{constructor(e,t,n,i,s){const{container:o}=n;this._container=o,i.on("root.added",()=>{(0,sn.XX)((0,sn.sO)(2,on,{injector:s}),o)}),i.on("root.remove",()=>{(0,sn.XX)(null,o)})}getContainer(){return this._container}}rn.$inject=["changeSupport","components","config.renderer","eventBus","injector"];const an={__init__:["changeSupport","components","renderer"],changeSupport:["type",nn],components:["type",class{constructor(){this._listeners={}}getComponent(e,t){const n=this._listeners[e];if(!n)return;let i;for(let e=0;e<n.length&&(i=n[e].callback(t),!i);e++);return i}getComponents(e,t){const n=this._listeners[e],i=[];if(!n)return i;for(let e=0;e<n.length;e++){const s=n[e].callback(t);s&&i.push(s)}return i.length,i}onGetComponent(e,t,n){if((0,v.isFunction)(t)&&(n=t,t=1e3),!(0,v.isNumber)(t))throw new Error("priority must be a number");const i=this._getListeners(e);let s,o;const r={priority:t,callback:n};for(o=0;s=i[o];o++)if(s.priority<t)return void i.splice(o,0,r);i.push(r)}offGetComponent(e,t){const n=this._getListeners(e);let i,s,o;if(t)for(o=n.length-1;i=n[o];o--)s=i.callback,s===t&&n.splice(o,1);else n.length=0}_getListeners(e){let t=this._listeners[e];return t||(this._listeners[e]=t=[]),t}}],renderer:["type",rn]};class ln{constructor(e,t){this._elementRegistry=e,this._eventBus=t,this._root=null,t.on("table.clear",()=>{this.setRoot(null)})}setRoot(e){if(this._root){const e=this._root;this._eventBus.fire("root.remove",{root:e}),this._root=null,this._eventBus.fire("root.removed",{root:e})}e&&this._eventBus.fire("root.add",{root:e}),this._root=e,e&&this._eventBus.fire("root.added",{root:e})}getRoot(){return this._root||this.setRoot({id:"__implicitroot",rows:[],cols:[]}),this._root}addRow(e,t){const n=this.getRoot();if(n.cols.length!=e.cells.length)throw new Error("number of cells is not equal to number of cols");return void 0===t&&(t=n.rows.length),cn(t,n.rows,e),e.root=n,this._elementRegistry.add(e),e.cells.forEach((i,s)=>{this._elementRegistry.add(i),i.row=e,i.col=n.cols[s],cn(t,n.cols[s].cells,i)}),this._eventBus.fire("row.add",{row:e}),e}removeRow(e){const t=this.getRoot();"string"==typeof e&&(e=this._elementRegistry.get(e));const n=t.rows.indexOf(e);-1!==n&&(un(n,t.rows),e.root=void 0,this._elementRegistry.remove(e),e.cells.forEach((e,i)=>{this._elementRegistry.remove(e),e.col=void 0,un(n,t.cols[i].cells)}),this._eventBus.fire("row.remove",{row:e}))}addCol(e,t){const n=this.getRoot();if(this._elementRegistry.add(e),n.rows.length!=e.cells.length)throw new Error("number of cells is not equal to number of rows");return void 0===t&&(t=n.cols.length),cn(t,n.cols,e),e.root=n,e.cells.forEach((i,s)=>{this._elementRegistry.add(i),i.col=e,i.row=n.rows[s],cn(t,n.rows[s].cells,i)}),this._eventBus.fire("col.add",{col:e}),e}removeCol(e){const t=this.getRoot();"string"==typeof e&&(e=this._elementRegistry.get(e));const n=t.cols.indexOf(e);-1!==n&&(un(n,t.cols),e.root=void 0,this._elementRegistry.remove(e),e.cells.forEach((e,i)=>{this._elementRegistry.remove(e),e.row=void 0,un(n,t.rows[i].cells)}),this._eventBus.fire("col.remove",{col:e}))}resized(){this._eventBus.fire("sheet.resized")}}function cn(e,t,n){return t.splice(e,0,n)}function un(e,t){return t.splice(e,1)}function dn(e=!0){const t="number"==typeof e?e:e?300:0;return t?e=>(0,v.throttle)(e,t):e=>e}ln.$inject=["elementRegistry","eventBus"],dn.$inject=["config.throttle"];const pn={__depends__:[an],__init__:["elementFactory","sheet"],elementFactory:["type",Zt],elementRegistry:["type",Qt],eventBus:["type",tn.A],sheet:["type",ln],throttle:["factory",dn]},hn=class{constructor(e={}){let{injector:t}=e;if(!t){let{modules:n,config:i}=this._init(e);t=function(e,t){const n=[{config:["value",e]},pn].concat(t||[]),i=new Wt.zZ(n);return i.init(),i}(i,n)}this.get=t.get,this.invoke=t.invoke,this.get("eventBus").fire("table.init"),this.get("eventBus").fire("diagram.init")}_init(e){let{modules:t,...n}=e;return{modules:t,config:n}}destroy(){const e=this.get("eventBus");e.fire("table.destroy"),e.fire("diagram.destroy")}clear(){const e=this.get("eventBus");e.fire("table.clear"),e.fire("diagram.clear")}};function mn(e){if(!e)return"<null>";const t=e.id?` id="${e.id}"`:"";return`<${e.$type}${t} />`}function gn(e,t){function n(t,n,i){if(t.gfx)throw new Error(`already rendered ${mn(t)}`);return e.element(t,n,i)}function i(e,t,i){(0,v.forEach)(e,function(e){n(e,t,i)})}function s(e,t,i){(0,v.forEach)(e,function(e){n(e,t,i)})}return{handleDecision:function(t){t.id||(t.id="decision");const o=t.decisionLogic;if(!o)throw new Error(`no table for ${mn(t)}`);{if(!o.output)throw new Error(`missing output for ${mn(o)}`);const t=(r=o,e.table(r));o.input&&i(o.input,t,o),i(o.output,t,o),function(e,t,i){(0,v.forEach)(e,function(e){n(e,t,i),s(e.inputEntry,e),s(e.outputEntry,e)})}(o.rule,t,o)}var r}}}function fn(e){return yn(e.constructor,e)}function yn(e,t){const n=e.$inject;if(!n)return;const{injector:i}=t.context,s=[...n,function(...e){for(const i in e){const s=n[i],o=e[i];t[s]=o}}];i.invoke(s)}function vn(e,t){Object.keys(t).forEach(function(n){if("$inject"===n||"__init"===n)return;const i=t[n];"constructor"===n&&i.call(e,e.props,e.context);const s=e[n];if(void 0!==s){if("function"!=typeof s)throw new Error(`failed to mixin <${n}>: cannot combine with non-fn component value`);e[n]=function(e,...t){return function(...n){let i;return t.forEach(function(t){if(i=t.call(e,...n),void 0!==i)return!1}),i}.bind(e)}(e,s,i)}else e[n]=i.bind(e)}),"$inject"in t&&yn(t,e),"__init"in t&&t.__init.call(e,e.props,e.context)}const bn={slotFill(e,t){const{type:n,context:i,...s}=e,o=this.components.getComponent(n,i)||t;return o?(0,sn._B)((0,sn.sO)(2,o,{...i,...s})):null},slotFills(e){const{type:t,context:n,...i}=e;return this.components.getComponents(t,n).map(e=>(0,sn._B)((0,sn.sO)(2,e,{...n,...i})))}},_n=bn;bn.$inject=["components"];class xn extends sn.uA{constructor(e,t){super(e,t),vn(this,_n),fn(this)}componentDidMount(){this.changeSupport.onElementsChanged(this.getRoot(),this.onElementsChanged)}componentWillUnmount(){this.changeSupport.offElementsChanged(this.getRoot(),this.onElementsChanged)}onElementsChanged=()=>{this.forceUpdate()};getRoot(){return this.sheet.getRoot()}render(){const e=(this.getRoot().businessObject.get("annotationsWidth")||400)+"px";return(0,sn.bF)(1,"th","annotation header",[this.slotFills({type:"cell-inner",context:{cellType:"annotations",col:this.sheet.getRoot(),minWidth:400}}),this.translate("Annotations")],0,{style:{width:e}})}}function Cn(e,t){const{elements:n,index:i}=e;return i[t]?e:{elements:[...n,t],index:{...i,[t]:!0}}}function wn(...e){let t={elements:[],index:{}};return e.forEach(function(e){const n=typeof e;"string"===n&&e.length>0?t=Cn(t,e):"object"===n&&null!==e&&Object.keys(e).forEach(function(n){e[n]&&(t=Cn(t,n))})}),function(e){return e.elements.join(" ")}(t)}xn.$inject=["changeSupport","sheet","translate"];const En={getSelectionClasses(){const{selected:e,selectedSecondary:t,focussed:n}=this.state;return wn({selected:e,"selected-secondary":t,focussed:n})},selectionChanged(e){this.setState(e)},componentWillUpdate(e){e.elementId!==this.props.elementId&&this.updateSelectionSubscription(!1)},componentDidUpdate(e){e.elementId!==this.props.elementId&&this.updateSelectionSubscription(!0)},componentDidMount(){this.updateSelectionSubscription(!0)},componentWillUnmount(){this.updateSelectionSubscription(!1)},updateSelectionSubscription(e){const{elementId:t}=this.props;t&&t&&this.eventBus[e?"on":"off"](`selection.${t}.changed`,this.selectionChanged)}},Dn=En;En.$inject=["eventBus"];class Sn extends sn.uA{constructor(e,t){super(e,t),vn(this,Dn),fn(this)}getRenderProps(...e){const{className:t,elementId:n,coords:i,...s}=this.props,o={className:wn(...e,this.getSelectionClasses(),t)};return n&&(o["data-element-id"]=n),i&&(o["data-coords"]=i),{...o,...s}}}class An extends Sn{constructor(e,t){super(e,t),this.state={}}render(){const{children:e}=this.props,t=this.getRenderProps("cell");return(0,sn._B)((0,sn.bF)(1,"td",null,e,0,{...t}))}}function Rn(e){const{row:t}=e,{id:n,description:i}=t.businessObject;return(0,sn.sO)(2,An,{className:"annotation",elementId:n,children:i||"-"})}function Mn(e){e.onGetComponent("cell",({cellType:e})=>"after-label-cells"===e?xn:"after-rule-cells"===e?Rn:void 0)}Mn.$inject=["components"];const In={__init__:["annotationsProvider"],annotationsProvider:["type",Mn]};function jn(e,t){return(0,v.assign)({id:e.id,type:e.$type,businessObject:e},t)}class On{constructor(e,t,n){this._elementFactory=e,this._eventBus=t,this._sheet=n}add(e){let t;if((0,u.is)(e,"dmn:DecisionTable"))t=this._elementFactory.createRoot(jn(e)),this._sheet.setRoot(t);else if((0,u.is)(e,"dmn:InputClause"))t=this._elementFactory.createCol(jn(e)),this._sheet.addCol(t);else if((0,u.is)(e,"dmn:OutputClause"))t=this._elementFactory.createCol(jn(e)),this._sheet.addCol(t);else if((0,u.is)(e,"dmn:DecisionRule")){e.inputEntry||(e.inputEntry=[]),e.outputEntry||(e.outputEntry=[]);const n=[...e.inputEntry,...e.outputEntry].map(e=>this._elementFactory.createCell(jn(e)));t=this._elementFactory.createRow((0,v.assign)(jn(e),{cells:n})),this._sheet.addRow(t)}return this._eventBus.fire("dmnElement.added",{element:t}),t}}On.$inject=["elementFactory","eventBus","sheet"];const kn={__depends__:[{__depends__:[P.A],tableImporter:["type",On]},an]};class Pn extends sn.uA{constructor(e,t){super(e,t),vn(this,_n),this._sheet=t.injector.get("sheet"),this._changeSupport=t.changeSupport}onElementsChanged=()=>{this.forceUpdate()};componentWillMount(){const e=this._sheet.getRoot();this._changeSupport.onElementsChanged(e.id,this.onElementsChanged)}componentWillUnmount(){const e=this._sheet.getRoot();this._changeSupport.offElementsChanged(e.id,this.onElementsChanged)}render(){const e=this._sheet.getRoot();if(!(0,u.is)(e,"dmn:DMNElement"))return null;const t=(0,u.Cf)(e),n=t.input,i=t.output;return(0,sn.bF)(1,"thead",null,(0,sn.bF)(1,"tr",null,[(0,sn.bF)(1,"th","index-column"),this.slotFills({type:"cell",context:{cellType:"before-label-cells"}}),n&&n.map((e,t)=>{const i=e.width||"192px";return this.slotFill({type:"cell",context:{cellType:"input-header",input:e,index:t,inputsLength:n.length,width:i},key:e.id},Fn)}),i.map((e,t)=>this.slotFill({type:"cell",context:{cellType:"output-header",output:e,index:t,outputsLength:i.length},key:e.id},Tn)),this.slotFills({type:"cell",context:{cellType:"after-label-cells"}})],0),2)}}function Fn(e,t){const{input:n,className:i,index:s}=e,{label:o,inputExpression:r,inputValues:a}=n,l=t.injector.get("translate"),c=(i||"")+" input-cell";return(0,sn.bF)(1,"th",c,[(0,sn.bF)(1,"div","clause",l(0===s?"When":"And"),0),o?(0,sn.bF)(1,"div","input-label",o,0,{title:l("Input label: ")+o}):(0,sn.bF)(1,"div","input-expression",r.text,0,{title:l("Input expression: ")+r.text}),(0,sn.bF)(1,"div","input-variable",a&&a.text||r.typeRef,0,{title:a&&a.text?l("Input values"):l("Input type")})],0,{"data-col-id":n.id},n.id)}function Tn(e,t){const{output:n,className:i,index:s}=e,{label:o,name:r,outputValues:a,typeRef:l}=n,c=t.injector.get("translate"),u=(i||"")+" output-cell";return(0,sn.bF)(1,"th",u,[(0,sn.bF)(1,"div","clause",c(0===s?"Then":"And"),0),o?(0,sn.bF)(1,"div","output-label",o,0,{title:c("Output label")}):(0,sn.bF)(1,"div","output-name",r,0,{title:c("Output name")}),(0,sn.bF)(1,"div","output-variable",a&&a.text||l,0,{title:a&&a.text?c("Output values"):c("Output type")})],0,null,n.id)}function Nn(e){e.onGetComponent("table.head",()=>Pn)}Nn.$inject=["components"];const $n={__init__:["decisionTableHeadProvider"],decisionTableHeadProvider:["type",Nn]};class Ln extends sn.uA{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),fn(this)}render(){const e=this.sheet.getRoot();if(!(0,u.is)(e,"dmn:DMNElement"))return null;const{name:t}=e.businessObject.$parent,n=this.components.getComponent("hit-policy")||Bn;return(0,sn.bF)(1,"div","decision-table-properties",[(0,sn.bF)(1,"div","decision-table-name",t,0,{title:this._translate("Decision name: ")+t}),(0,sn.bF)(1,"div","decision-table-header-separator"),(0,sn.sO)(2,n)],4)}}function Bn(){return null}Ln.$inject=["sheet","components"];class Vn{constructor(e){e.onGetComponent("table.before",500,()=>Ln)}}Vn.$inject=["components"];const Un={__init__:["decisionTableProperties"],decisionTableProperties:["type",Vn]};class zn extends sn.uA{render(){const{row:e,rowIndex:t}=this.props,{components:n}=this.context,i=n.getComponents("cell-inner",{cellType:"rule-index",row:e,rowIndex:t});return(0,sn.bF)(1,"td","rule-index",[i&&i.map(n=>(0,sn.sO)(2,n,{row:e,rowIndex:t})),t+1],0,{"data-element-id":e.id,"data-row-id":e.id})}}class Kn{constructor(e){e.onGetComponent("cell",({cellType:e})=>{if("before-rule-cells"===e)return zn})}}Kn.$inject=["components"];const Wn={__init__:["decisionRuleIndices"],decisionRuleIndices:["type",Kn]},qn=[{label:"FEEL",value:"feel"}];class Gn{constructor(e){this._injector=e;const t=e.get("config.expressionLanguages")||{};this._config={options:qn,defaults:{editor:"feel"}},t.options&&(this._config.options=t.options);const n=this._getLegacyDefaults();(0,v.assign)(this._config.defaults,n,t.defaults)}getDefault(e){const{defaults:t}=this._config,n=t[e]||t.editor;return this._getLanguageByValue(n)||this.getAll()[0]}getLabel(e){const t=this._getLanguageByValue(e);return t?t.label:e}getAll(){return this._config.options}_getLegacyDefaults(){const e={},t=this._injector,n=t.get("config.defaultInputExpressionLanguage"),i=t.get("config.defaultOutputExpressionLanguage");return n&&(e.inputCell=n),i&&(e.outputCell=i),e}_getLanguageByValue(e){return(0,v.find)(this.getAll(),t=>e===t.value)}}Gn.$inject=["injector"];const Hn={__init__:["expressionLanguages"],expressionLanguages:["type",Gn]};class Xn{constructor(e){this._feelLanguageContext=e}getConfig(){return this._feelLanguageContext}}Xn.$inject=["config.feelLanguageContext"];const Yn={__init__:["feelLanguageContext"],feelLanguageContext:["type",Xn]};class Jn extends sn.uA{render({rows:e,cols:t}){const{components:n}=this.context;return(0,sn.bF)(1,"tbody",null,e.map((e,i)=>{const s=n.getComponent("row",{rowType:"rule"});return s&&(0,sn.sO)(2,s,{row:e,rowIndex:i,cols:t},e.id)}),0)}}class Zn extends sn.uA{constructor(e,t){super(e,t),vn(this,_n)}render(){const{row:e,rowIndex:t,cols:n}=this.props,{cells:i}=e;return(0,sn.bF)(1,"tr",null,[this.slotFills({type:"cell",context:{cellType:"before-rule-cells",row:e,rowIndex:t}}),i.map((i,s)=>this.slotFill({type:"cell",context:{cellType:"rule",cell:i,rowIndex:t,colIndex:s},key:i.id,row:e,col:n[s]})),this.slotFills({type:"cell",context:{cellType:"after-rule-cells",row:e,rowIndex:t}})],0)}}class Qn extends sn.uA{render(){const{cell:e,row:t,col:n}=this.props;return(0,u.is)(e,"dmn:UnaryTests")?(0,sn.sO)(2,An,{className:"input-cell",elementId:e.id,"data-row-id":t.id,"data-col-id":n.id,children:e.businessObject.text}):(0,sn.sO)(2,An,{className:"output-cell",elementId:e.id,"data-row-id":t.id,"data-col-id":n.id,children:e.businessObject.text})}}class ei{constructor(e){e.onGetComponent("table.body",()=>Jn),e.onGetComponent("row",({rowType:e})=>{if("rule"===e)return Zn}),e.onGetComponent("cell",({cellType:e})=>{if("rule"===e)return Qn})}}ei.$inject=["components"];const ti={__depends__:[Hn,Yn],__init__:["decisionRules"],decisionRules:["type",ei]},ni=[{label:"Unique",value:{hitPolicy:"UNIQUE",aggregation:void 0},explanation:"No overlap is possible and all rules are disjoint. Only a single rule can be matched"},{label:"First",value:{hitPolicy:"FIRST",aggregation:void 0},explanation:"Rules may overlap. The first matching rule will be chosen"},{label:"Priority",value:{hitPolicy:"PRIORITY",aggregation:void 0},explanation:"Rules may overlap. The one with the highest priority will be chosen"},{label:"Any",value:{hitPolicy:"ANY",aggregation:void 0},explanation:"Rules may overlap. Their output have to match"},{label:"Collect",value:{hitPolicy:"COLLECT",aggregation:void 0},explanation:"Collects the values of all matching rules"},{label:"Collect (Sum)",value:{hitPolicy:"COLLECT",aggregation:"SUM"},explanation:"Collects the values of all matching rules and sums up to a single value"},{label:"Collect (Min)",value:{hitPolicy:"COLLECT",aggregation:"MIN"},explanation:"Collects the values of all matching rules and uses the lowest value"},{label:"Collect (Max)",value:{hitPolicy:"COLLECT",aggregation:"MAX"},explanation:"Collects the values of all matching rules and uses the highest value"},{label:"Collect (Count)",value:{hitPolicy:"COLLECT",aggregation:"COUNT"},explanation:"Collects the values of all matching rules and counts the number of them"},{label:"Rule order",value:{hitPolicy:"RULE ORDER",aggregation:void 0},explanation:"Collects the values of all matching rules in rule order"},{label:"Output order",value:{hitPolicy:"OUTPUT ORDER",aggregation:void 0},explanation:"Collects the values of all matching rules in decreasing output priority order"}];class ii extends sn.uA{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),fn(this)}getRoot(){return this.sheet.getRoot()}render(){const e=this.getRoot().businessObject,{aggregation:t,hitPolicy:n}=e,i=(0,v.find)(ni,e=>{return i=e.value,s={aggregation:t,hitPolicy:n},i.hitPolicy===s.hitPolicy&&i.aggregation===s.aggregation;var i,s});return(0,sn.bF)(1,"div","hit-policy header",[(0,sn.bF)(1,"label","dms-label",this._translate("Hit policy:"),0),(0,sn.bF)(1,"span","hit-policy-value",this._translate(i.label),0)],4,{title:this._translate(i.explanation)})}}function si(e){e.onGetComponent("hit-policy",()=>ii)}ii.$inject=["sheet"],si.$inject=["components"];const oi={__init__:["hitPolicyProvider"],hitPolicyProvider:["type",si]};class ri extends sn.uA{constructor(e,t){super(e,t);const{injector:n}=t;this._translate=n.get("translate"),this._eventBus=n.get("eventBus")}onClick=()=>{this._eventBus.fire("showDrd")};render(){return(0,sn.bF)(1,"div","view-drd",(0,sn.bF)(1,"button","view-drd-button",this._translate("View DRD"),0,{type:"button",onClick:this.onClick}),2,null,null,e=>this.node=e)}}class ai{constructor(e,t,n,i){this._injector=n,this._sheet=i,e.onGetComponent("table.before",()=>{if(this.canViewDrd())return ri}),t.on("showDrd",()=>{const e=n.get("_parent",!1),t=li(i.getRoot());if(!t)return;const s=e.getView(t);e.open(s)})}canViewDrd(){const e=this._injector.get("_parent",!1);if(!e)return!1;const t=li(this._sheet.getRoot());return!!e.getView(t)}}function li(e){const{businessObject:t}=e;if(t)return t.$parent.$parent}ai.$inject=["components","eventBus","injector","sheet"];const ci={__init__:["viewDrd"],viewDrd:["type",ai]};var ui=n(94306);class di{constructor(e){e.onGetComponent("table.before",()=>ui.v)}}di.$inject=["components"];const pi={__init__:["poweredBy"],poweredBy:["type",di]};class hi extends hn{constructor(e={}){const t=hi._createContainer();super((0,v.assign)(e,{renderer:{container:t}})),this._container=t}open(e){var t=this;return new Promise((n,i)=>{var s;try{return t._decision&&t.clear(),t._decision=e,function(e,t){const s=e.get("tableImporter"),o=e.get("eventBus"),r=e.get("sheet");let a,l=e.get("modeling",!1),c=[];o.fire("import.render.start",{decision:t});try{!function(e){new gn({create:(e,t,n,i)=>s.create(e,t,n,i),table:e=>s.add(e),element:(e,t,n)=>s.add(e,t,n),error(e,t){c.push({message:e,context:t})}},{canAddMissingEntries:l}).handleDecision(e)}(t)}catch(e){a=e}o.fire("import.render.complete",{error:a,warnings:c}),o.fire("elements.changed",{elements:[r.getRoot()]}),function(e,t){e?(e.warnings=t||[],i(e)):n({warnings:t||[]})}(a,c)}(t,e)}catch(e){s=e}s?(s.warnings=s.warnings||[],i(s)):n({warnings:[]})})}_init(e){let{modules:t,additionalModules:n,...i}=e,s=t||this.getModules();return{modules:[pi,...s,...n||[],{decisionTable:["value",this]}],config:i}}on(e,t,n,i){return this.get("eventBus").on(e,t,n,i)}off(e,t){this.get("eventBus").off(e,t)}_emit(e,t){return this.get("eventBus").fire(e,t)}attachTo(e){if(!e)throw new Error("parentNode required");this.detach();const t=this._container;e.appendChild(t),this._emit("attach",{})}detach(){const e=this._container;e.parentNode&&(this._emit("detach",{}),(0,Q.TF)(e))}destroy(){super.destroy(),this.detach()}getModules(){return hi._getModules()}static _getModules(){return[In,kn,P.A,$n,Un,Wn,ti,oi,ci]}static _createContainer(){return te()('<div class="dmn-decision-table-container"></div>')}}class mi extends sn.uA{constructor(e,t){super(e,t),fn(this),this.addRule=this.addRule.bind(this)}componentWillMount(){this._eventBus=this.context.injector.get("eventBus")}handleClick=e=>{e.stopPropagation(),this.addRule(e.target.dataset.colIndex)};addRule(e){this._eventBus.fire("addRule",{colIndex:e})}render(){const{cols:e}=this.props,t=[(0,sn.bF)(1,"td","add-rule-add",(0,sn.bF)(1,"button","dmn-icon-plus action-icon",null,1,{title:this.translate("Add rule")}),2)],{businessObject:n}=this.sheet.getRoot();n.input&&n.input.length||t.push((0,sn.bF)(1,"td","input-cell",(0,sn.eW)("-"),2));for(let n=0;n<e.length+1;n++){let i="add-rule";const s=e[n]&&e[n].businessObject;let o="";s?(s.$instanceOf("dmn:InputClause")&&(i+=" input-cell",o="-"),s.$instanceOf("dmn:OutputClause")&&(i+=" output-cell")):i+=" annotation",t.push((0,sn.bF)(1,"td",i,o,0,{"data-col-index":n}))}return(0,sn.bF)(1,"tfoot","actionable add-rule",(0,sn.bF)(1,"tr",null,t,0),2,{onClick:this.handleClick})}}mi.$inject=["sheet","translate"];class gi{constructor(e,t,n,i){e.onGetComponent("table.foot",()=>mi),n.on("addRule",(e,n)=>{const s=t.trigger("addRule"),o=n.colIndex;s.cells[o]?i.select(s.cells[o]):i.select(s.cells[0])})}}gi.$inject=["components","editorActions","eventBus","selection"];class fi{constructor(e,t,n){this._elementRegistry=e,this._eventBus=t,this._renderer=n,this._selection=void 0,t.on("diagram.clear",()=>{this._selection=void 0})}select(e){(0,v.isString)(e)&&(e=this._elementRegistry.get(e));const t=this._selection;t!==e&&(this._selection=e,this._eventBus.fire("selection.changed",{oldSelection:t,selection:e}))}deselect(){const e=this._selection;this._selection=void 0,this._eventBus.fire("selection.changed",{oldSelection:e,selection:this._selection})}get(){return this._selection}hasSelection(){return!!this._selection}}fi.$inject=["elementRegistry","eventBus","renderer"];class yi{constructor(e,t,n,i){this._elementRegistry=e,this._renderer=n,this._selection=i,t.on(["cell.click","cell.contextmenu"],({id:t})=>{const n=e.get(t);n&&i.select(n)}),t.on("row.remove",({row:e})=>{const t=i.get();t&&e===t.row&&i.deselect()}),t.on("col.remove",({col:e})=>{const t=i.get();t&&e===t.col&&i.deselect()})}}yi.$inject=["elementRegistry","eventBus","renderer","selection"];const vi={__init__:["selection","selectionBehavior"],selection:["type",fi],selectionBehavior:["type",yi]};const bi=["click","dblclick","contextmenu","mousedown","mouseup","mouseenter","mouseleave","mouseout","mouseover","mousemove","focusin","focusout","drag","dragstart","dragend","dragover","dragenter","dragleave","drop"];class _i{constructor(e,t){var n,i,s;n=this,s=e=>{const{target:t,type:n}=e,i=(s=t,(0,Q.kp)(s,"[data-element-id]",!0));var s;if(!i)return;const o=i.getAttribute("data-element-id");if(o){const t=this._eventBus.createEvent({id:o,event:e,node:i,target:i});this._eventBus.fire(`cell.${n}`,t),t.defaultPrevented&&e.preventDefault(),t.cancelBubble&&e.stopPropagation()}},(i=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(i="_handleEvent"))in n?Object.defineProperty(n,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[i]=s,this._eventBus=t,this._container=e.container,t.on("table.init",()=>{this._addEventListeners(bi)}),t.on("table.destroy",()=>{this._removeEventListeners(bi)})}_addEventListeners(e){const t=this._container;e.forEach(e=>{t.addEventListener(e,this._handleEvent)})}_removeEventListeners(e){const t=this._container;e.forEach(e=>{t.removeEventListener(e,this._handleEvent)})}}_i.$inject=["config.renderer","eventBus"];const xi={__init__:["interactionEvents"],interactionEvents:["type",_i]};var Ci,wi,Ei,Di,Si,Ai,Ri=n(13337),Mi=n.n(Ri);function Ii(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ji=function(){if(Ai)return Si;Ai=1;var e=wi?Ci:(wi=1,Ci=function(e,t){return e^t}),t=function(){if(Di)return Ei;Di=1;var e=/\b(Array|Date|Object|Math|JSON)\b/g;return Ei=function(t,n){var i=function(e){for(var t=[],n=0;n<e.length;n++)~t.indexOf(e[n])||t.push(e[n]);return t}(function(t){return t.replace(/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^/]+)\//g,"").replace(e,"").match(/[a-zA-Z_]\w*/g)||[]}(t));return n&&"string"==typeof n&&(n=function(e){return function(t){return e+t}}(n)),n?function(e,t,n){return e.replace(/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^/]+)\/|[a-zA-Z_]\w*/g,function(e){return"("==e[e.length-1]||~t.indexOf(e)?n(e):e})}(t,i,n):i}}();function n(e,t){if(!(this instanceof n))return new n(e,t);if(this.node=this.start=this.peeked=e,this.root=t,this.closingTag=!1,this._revisit=!0,this._selects=[],this._rejects=[],e&&this.higher(e))throw new Error("root must be a parent or ancestor to node")}function i(t,n){var i="nextSibling"==t;return function(s,o,r){s=this.compile(s),o=o&&o>0?o:1;for(var a=this.node,l=this.closingTag,c=this._revisit;a;){if(e(i,l)&&a[n])a=a[n],l=!i;else if(1==a.nodeType&&!a[n]&&e(i,l)){if(l=i,!c)continue}else if(a[t])a=a[t],l=!i;else if(a=a.parentNode,l=i,!c)continue;if(!a||this.higher(a,this.root))break;if(s(a)&&this.selects(a,r)&&this.rejects(a,r)){if(--o)continue;return r||(this.node=a),this.closingTag=l,a}}return null}}return Si=n,n.prototype.reset=function(e){return this.node=e||this.start,this},n.prototype.revisit=function(e){return this._revisit=null==e||e,this},n.prototype.opening=function(){return 1==this.node.nodeType&&(this.closingTag=!1),this},n.prototype.atOpening=function(){return!this.closingTag},n.prototype.closing=function(){return 1==this.node.nodeType&&(this.closingTag=!0),this},n.prototype.atClosing=function(){return this.closingTag},n.prototype.next=i("nextSibling","firstChild"),n.prototype.previous=n.prototype.prev=i("previousSibling","lastChild"),n.prototype.select=function(e){return e=this.compile(e),this._selects.push(e),this},n.prototype.selects=function(e,t){var n=this._selects,i=n.length;if(!i)return!0;for(var s=0;s<i;s++)if(n[s].call(this,e,t))return!0;return!1},n.prototype.reject=function(e){return e=this.compile(e),this._rejects.push(e),this},n.prototype.rejects=function(e,t){var n=this._rejects,i=n.length;if(!i)return!0;for(var s=0;s<i;s++)if(n[s].call(this,e,t))return!1;return!0},n.prototype.higher=function(e){var t=this.root;if(!t)return!1;for(e=e.parentNode;e&&e!=t;)e=e.parentNode;return e!=t},n.prototype.compile=function(e){switch(typeof e){case"number":return function(t){return e==t.nodeType};case"string":return new Function("node","Object.freeze(node); return "+t(e,"node."));case"function":return e;default:return function(){return!0}}},n.prototype.peak=n.prototype.peek=function(e,t){return 1==arguments.length&&(t=e,e=!0),(t=null==t?1:t)?t>0?this.next(e,t,!0):this.prev(e,Math.abs(t),!0):this.node},n.prototype.use=function(e){return e(this),this},Si}(),Oi=Ii(ji),ki=window.getSelection();function Pi(e){ki?.removeAllRanges(),ki?.addRange(e)}function Fi(e,t){var n=function(e,t){for(var n,i=t.start,s=t.end,o=document.createRange(),r=Oi(e.firstChild,e),a=r.node,l=!1,c=0;a;){if(c===i&&(l?o.setStartAfter(a):o.setStartBefore(a)),c===s)return l?o.setEndAfter(a):o.setEndBefore(a),o;if(l||($i(a)||a.previousSibling&&(Li(a)||Bi(a)))&&c++,Ni(a)){if(n=a.textContent.length,c<=i&&c+n>i&&o.setStart(a,i-c),c+n>s)return o.setEnd(a,s-c),o;c+=n}a=r.next(),l=r.closingTag}return c<=i&&(e.lastChild?o.setStartAfter(e.lastChild):o.setStart(e,0)),e.lastChild?o.setEndAfter(e.lastChild):o.setEnd(e,0),o}(e,t);Pi(n)}function Ti(e){if(!function(e){if(!ki?.rangeCount)return null;var t=ki.focusNode;return Ni(t)&&(t=t.parentNode),e==t||e.contains(t)}(e))return null;var t,n,i=ki.getRangeAt(0),s=i.startContainer,o=i.endContainer,r=i.startOffset,a=i.endOffset,l=Oi(e.firstChild,e),c=l.node,u=!1,d=0;function p(e,t){return 1===arguments.length&&(t=e),e.parentNode===o&&t==o.childNodes[a]}function h(e,t){return 1===arguments.length&&(t=e),e.parentNode===s&&t==s.childNodes[r]}for(;c&&(h(c)&&!u&&(n=d),!p(c))&&(!$i(c)||o!==c);){if(u||($i(c)||t&&t.nextSibling==c&&(Li(c)||Bi(c)))&&d++,Ni(c)){if(s===c&&(n=d+r),o===c){d+=a;break}d+=c.textContent.length}if((Ni(c)||u)&&(h(c,c.nextSibling)&&(n=d),p(c,c.nextSibling)))break;t=c,c=l.next(),u=l.closingTag}return{start:void 0===n?d:n,end:d}}function Ni(e){return 3===e.nodeType}function $i(e){return 1===e.nodeType&&"BR"===e.nodeName}function Li(e){return 1===e.nodeType&&"DIV"===e.nodeName}function Bi(e){return 1===e.nodeType&&"P"===e.nodeName}function Vi(e){return e.getAttribute("data-element-id")}function Ui(e,t){return(0,Q.P)(`[data-element-id="${Mi()(e)}"]`,t)}function zi(e){return(0,Q.kp)(e,"[data-element-id]",!0)}function Ki(e){const t="[contenteditable]";return(0,Q.cK)(e,t)?e:(0,Q.P)(t,e)}const Wi={above:!0,below:!0,right:!0,left:!0};function qi(e,t,n,i,s){const{container:o}=e;let r=null;function a(e,n){t.fire("selection."+e+".changed",n),t.fire("cellSelection.changed",{elementId:e,selection:n})}function l(e,t=!0){r!==e&&a(r,{selected:!1,focussed:!1}),r=e,e&&a(e,{selected:!0,focussed:t}),e?i.select(e):i.deselect()}t.on("cell.click",500,function(e){const t=e.target;if(n=t,(0,Q.kp)(n,".no-deselect",!0))return;var n;const i=zi(t);l(i&&Vi(i),!e.defaultPrevented)}),t.on("cell.focusin",500,function(e){const t=Vi(e.target),n=!e.defaultPrevented;return e.stopPropagation(),l(t,n)}),t.on("cell.focusout",500,function(e){a(Vi(e.target),{focussed:!1})}),t.on("cellSelection.changed",function(e){const{elementId:t,selection:n}=e,i=Ui(t,o);n.focussed&&i&&function(e){const t=Ki(e);if(!t)return;if(!document.body.contains(t))return;if(document.activeElement===t)return;t.focus();const n=Ti(t);n&&0!==n.end||window.getSelection().setPosition(t.firstChild,t.firstChild.length)}(i)}),t.on("selection.changed",function(e){const{selection:t,oldSelection:n}=e;var i=t&&t.id,s=n&&n.id;i&&i!==r?l(t.id):s&&s===r&&l()}),this.isCellSelected=function(){return!!r},this.getCellSelection=function(){return r},this.selectCell=function(e){if(!r)return;if(!(e in Wi))throw new Error("direction must be any of { above, below, left, right }");const t=function(e){const t=e.getAttribute("data-coords");if(!t)return null;const[n,i]=t.split(":");return{row:n,col:i}}(Ui(r,o));if(!t)return!1;const n=function(e,t){const{row:n,col:i}=e;if("above"===t||"below"===t){const s=parseInt(n,10);return isNaN(s)?e:{col:i,row:"above"===t?s-1:s+1}}if("left"===t||"right"===t){const s=parseInt(i,10);return isNaN(s)?e:{row:n,col:"left"===t?s-1:s+1}}throw new Error("invalid direction <"+t+">")}(t,e),i=function(e,t){const n=`${e.row}:${e.col}`;return(0,Q.P)(`[data-coords="${Mi()(n)}"]`,t)}(n,o);if(!i)return!1;const s=Vi(i);return s&&l(s,{focussed:!0,selected:!0}),!0},t.on("contextMenu.close",function(){if(r)return l(r)})}qi.$inject=["config.renderer","eventBus","sheet","selection","elementRegistry"];const Gi={__depends__:[xi,vi],__init__:["cellSelection"],cellSelection:["type",qi]};var Hi=n(48909);const Xi=2e3;class Yi extends ze.A{constructor(e,t){super(e),this._sheet=t}init(){this.addRule("col.move",Xi,({col:e,index:t})=>{const{businessObject:n}=this._sheet.getRoot(),{input:i}=n;return(0,u.Xy)(e)?t<i.length:t>=i.length}),this.addRule("col.remove",Xi,({col:e})=>{const{cols:t}=this._sheet.getRoot();return!(0,u.Mz)(e)||t.filter(e=>(0,u.Mz)(e)).length>1}),this.addRule("paste",Xi,({data:e,target:t})=>{if(!e||!t)return!1;const{root:n}=e;return t instanceof Gt?this.canPasteRows(n):t instanceof Ht&&this.canPasteCols(n,t)})}canPasteRows(e){const{cols:t}=this._sheet.getRoot();return(0,v.every)(e,e=>"row"===e.type&&e.cells.length===t.length&&(0,v.every)(e.cells,(e,n)=>(0,u.Xy)(t[n])?"dmn:UnaryTests"===e.businessObject.$type:"dmn:LiteralExpression"===e.businessObject.$type))}canPasteCols(e,t){const{rows:n}=this._sheet.getRoot();return(0,v.every)(e,e=>"col"===e.type&&e.cells.length===n.length&&((0,u.Xy)(t)?"dmn:InputClause"===e.businessObject.$type:"dmn:OutputClause"===e.businessObject.$type))}}Yi.$inject=["eventBus","sheet"];const Ji={__depends__:[{__depends__:[Ue.A]}],__init__:["decisionTableModelingRules"],decisionTableModelingRules:["type",Yi]};class Zi{constructor(e,t,n){this._clipboard=e,this._modeling=t,this._sheet=n}execute(e){let{data:t}=e;return e.oldData=this._clipboard.get(),this._clipboard.set(t),this._sheet.getRoot()}postExecute(e){let{elements:t}=e;t.forEach(e=>{e instanceof Gt?this._modeling.removeRow(e):e instanceof Ht&&this._modeling.removeCol(e)})}revert(e){const{oldData:t}=e;return this._clipboard.set(t),this._sheet.getRoot()}}Zi.$inject=["clipboard","modeling","sheet"];const Qi=[function(e,t,n,i){var s=n,o={...t,type:is(e)};if(e instanceof Gt||e instanceof Ht){let t=i(e.cells,s);o.cells=t.root,s=t.descriptorCache}return{root:o,descriptorCache:s}},function(e,t,n){var i=e.businessObject;if(!i)return{root:t,descriptorCache:n};var s=ss(i,n);return{root:{...t,businessObject:s.root},descriptorCache:s.descriptorCache}}],es=[function(e,t,n){var i=e.root.businessObject;if(!i)return{root:t,reviveCache:n};var s=as({root:i,descriptorCache:e.descriptorCache},n);return{root:{...t,businessObject:s.root},reviveCache:s.reviveCache}},function(e,t,n,i){var s=e.root,o=e.descriptorCache,r={...t};if(t.businessObject&&t.businessObject.id&&(r.id=t.businessObject.id),"row"===s.type||"col"===s.type){let e=i({root:s.cells,descriptorCache:o},n);r.cells=e.root,n=e.reviveCache}var a=new(function(e){switch(e.type){case"row":return Gt;case"cell":return Xt;case"col":return Ht;default:throw new Error("unknown element type: #"+e.type)}}(s))(r);return a instanceof Gt?a.cells.forEach(e=>{e.row=a}):a instanceof Ht&&a.cells.forEach(e=>{e.col=a}),{root:a,reviveCache:n}}];function ts(e,t,n){return n=n||Qi,t=t||{},(0,v.isArray)(e)?function(e,t,n){return(0,v.reduce)(e,(e,t)=>{var i=e.descriptorCache,s=e.root;let{root:o,descriptorCache:r}=ns(t,i,n);return{root:[...s,o],descriptorCache:{...i,...r}}},{root:[],descriptorCache:t})}(e,t,n):ns(e,t,n)}function ns(e,t,n){var i=e.id,s={id:i},o=t.elements||{},r=o[i];if(r)return{root:r,descriptorCache:t};let a=function(e,t,n,i){function s(e,t){return ts(e,t,n)}return(0,v.reduce)(n,function(t,n){return n(e,t.root,t.descriptorCache,s)},{root:t,descriptorCache:i})}(e,s,n,{...t,elements:o});return{root:a.root,descriptorCache:{...a.descriptorCache,elements:{...a.descriptorCache.elements,[i]:a.root}}}}function is(e){if(e instanceof Gt)return"row";if(e instanceof Ht)return"col";if(e instanceof Xt)return"cell";throw new Error("cannot deduce element type: #"+e.id)}function ss(e,t){var n,i,s=e.id;if(s&&(i=(n=t.boCache||{})[s]))return{root:i,descriptorCache:t};var o={$type:e.$type};return s&&(o.id=s,n={...n,[s]:o},t={...t,boCache:n}),e.$descriptor.properties.forEach(function(n){var i=e[n.name];if(i){if((0,v.isArray)(i)&&(i=i.map(e=>{var n=ss(e,t);return t=n.descriptorCache,n.root})),i.$type){let e=ss(i,t);t=e.descriptorCache,i=e.root}o[n.name]=i}}),{root:o,descriptorCache:t}}function os(e,t,n){return n=n||es,t=t||{},(0,v.isArray)(e.root)?function(e,t,n){let i=e.root,s=e.descriptorCache;return(0,v.reduce)(i,(e,t)=>{var i=e.reviveCache,o=e.root;let{root:r,reviveCache:a}=rs({root:t,descriptorCache:s},i,n);return{root:[...o,r],reviveCache:a}},{root:[],reviveCache:t})}(e,t,n):rs(e,t,n)}function rs(e,t,n){var i=e.root.id,s=t.elements||{},o=s[i];if(o)return{root:o,reviveCache:t};let r=function(e,t,n,i){function s(e,t){return os(e,t,n)}return(0,v.reduce)(n,function(t,n){return n(e,t.root,t.reviveCache,s)},{root:t,reviveCache:i})}(e,{id:i},n,{...t,elements:s});return{root:r.root,reviveCache:{...r.reviveCache,elements:{...r.reviveCache.elements,[i]:r.root}}}}function as(e,t){var n=e.root,i=n.id;let s,o;if(i&&(s=t.boCache||{},o=s[i],o))return{root:o,reviveCache:t};var r={};(0,v.keys)(n).forEach(e=>{let i,o;n[e].$type?(o=as({root:n[e]},t),i=o.root,t=o.reviveCache,s=t.boCache||{}):i=(0,v.isArray)(n[e])?n[e].map(e=>(o=as({root:e},t),t=o.reviveCache,s=t.boCache||{},o.root)):n[e],r[e]=i});const a=r.$type;delete r.$type,t._keepIds&&!t._model.ids.assigned(r.id)||delete r.id;var l=t._dmnFactory.create(a,r);return(0,v.forEach)(r,e=>{e.$type&&(e.$parent=l),(0,v.isArray)(e)&&e.forEach(e=>e.$parent=l)}),i&&(s={...s,[i]:l},t={...t,boCache:s}),{root:l,reviveCache:t}}class ls{constructor(e,t,n,i,s,o,r,a){this._clipboard=e,this._dmnFactory=t,this._elementFactory=n,this._elementRegistry=i,this._eventBus=s,this._model=o,this._modeling=r,this._sheet=a}postExecute(e){let{element:t,after:n}=e;const i=this._clipboard.get();if(!i)throw new Error("missing clipboard data");const s=this._sheet.getRoot(),o=os(i.elements,{_dmnFactory:this._dmnFactory,_keepIds:i.keepIds,_model:this._model}).root;if(t instanceof Gt){let e=s.rows.indexOf(t);if(-1===e)return;o.forEach(t=>{n&&e++,this._modeling.addRow(t,e)})}else if(t instanceof Ht){let e=s.cols.indexOf(t);if(-1===e)return;o.forEach(t=>{n&&e++,this._modeling.addCol(t,e)})}return e.oldElements=this._clipboard.get(),this._sheet.getRoot()}revert(e){}}ls.$inject=["clipboard","dmnFactory","elementFactory","elementRegistry","eventBus","moddle","modeling","sheet"];class cs{constructor(e,t,n,i,s,o){this._clipboard=e,this._commandStack=t,this._eventBus=n,this._modeling=i,this._sheet=s,this._rules=o,t.registerHandler("cut",Zi),t.registerHandler("paste",ls)}copy(e){(0,v.isArray)(e)||(e=[e]);const t={elements:ts(e)};this._eventBus.fire("copyCutPaste.copy",{data:t}),this._clipboard.set(t)}cut(e){(0,v.isArray)(e)||(e=[e]);const t={elements:ts(e),keepIds:!0},n={elements:e,data:t};this._eventBus.fire("copyCutPaste.cut",{data:t}),this._commandStack.execute("cut",n)}pasteBefore(e){return this._paste(e,{before:!0})}pasteAfter(e){return this._paste(e,{after:!0})}_paste(e,t){const n=this._clipboard.get();if(n)return!!this._rules.allowed("paste",{data:n.elements,target:e})&&(this._commandStack.execute("paste",{element:e,...t}),this._clipboard.clear(),!0)}pasteAt(e){}}cs.$inject=["clipboard","commandStack","eventBus","modeling","sheet","rules"];const us={__depends__:[Hi.A,Ji],__init__:["copyCutPaste"],copyCutPaste:["type",cs]};class ds{constructor(e,t,n,i,s,o){const r={addRule:()=>n.addRow({type:"dmn:DecisionRule"}),addRuleAbove(e){let t=e&&e.rule;if(!t&&!i.hasSelection())return;t=t||i.get().row;const s=o.getRoot().rows.indexOf(t);return-1!==s?n.addRow({type:"dmn:DecisionRule"},s):void 0},addRuleBelow(e){let t=e&&e.rule;if(!t&&!i.hasSelection())return;t=t||i.get().row;const s=o.getRoot().rows.indexOf(t);return-1!==s?n.addRow({type:"dmn:DecisionRule"},s+1):void 0},removeRule(e){let t=e&&e.rule;(t||i.hasSelection())&&(t=t||i.get().row,n.removeRow(t))},addInput(){const e=o.getRoot().businessObject,{input:t}=e;return n.addCol({type:"dmn:InputClause"},t?t.length:0)},addInputLeft(e){let t=e&&e.input;if(!t&&!i.hasSelection())return;t=t||i.get().col;const s=o.getRoot().cols.indexOf(t);return-1!==s?n.addCol({type:"dmn:InputClause"},s):void 0},addInputRight(e){let t=e&&e.input;if(!t&&!i.hasSelection())return;t=t||i.get().col;const s=o.getRoot().cols.indexOf(t);return-1!==s?n.addCol({type:"dmn:InputClause"},s+1):void 0},removeInput(e){let t=e&&e.input;(t||i.hasSelection())&&(t=t||i.get().col,n.removeCol(t))},addOutput(){const e=o.getRoot().businessObject,t=e.get("input"),i=e.get("output");return n.addCol({type:"dmn:OutputClause"},t.length+i.length)},addOutputLeft(e){let t=e&&e.output;if(!t&&!i.hasSelection())return;t=t||i.get().col;const s=o.getRoot().cols.indexOf(t);return-1!==s?n.addCol({type:"dmn:OutputClause"},s):void 0},addOutputRight(e){let t=e&&e.output;if(!t&&!i.hasSelection())return;t=t||i.get().col;const s=o.getRoot().cols.indexOf(t);return-1!==s?n.addCol({type:"dmn:OutputClause"},s+1):void 0},removeOutput(e){let t=e&&e.output;(t||i.hasSelection())&&(t=t||i.get().col,n.removeCol(t))},addClause(){if(!i.hasSelection())return;const e=i.get().col;return(0,u.is)(e,"dmn:InputClause")?r.addInput({input:e}):(0,u.is)(e,"dmn:OutputClause")?r.addOutput({output:e}):void 0},addClauseLeft(){if(!i.hasSelection())return;const e=i.get().col;return(0,u.is)(e,"dmn:InputClause")?r.addInputLeft({input:e}):(0,u.is)(e,"dmn:OutputClause")?r.addOutputLeft({output:e}):void 0},addClauseRight(){if(!i.hasSelection())return;const e=i.get().col;return(0,u.is)(e,"dmn:InputClause")?r.addInputRight({input:e}):(0,u.is)(e,"dmn:OutputClause")?r.addOutputRight({output:e}):void 0},removeClause(){if(!i.hasSelection())return;const e=i.get().col;return(0,u.is)(e,"dmn:InputClause")?r.removeInput({input:e}):(0,u.is)(e,"dmn:OutputClause")?r.removeOutput({output:e}):void 0},selectCellAbove:()=>s.selectCell("above"),selectCellBelow:()=>s.selectCell("below"),copy({element:t}){e.copy(t)},cut({element:t}){e.cut(t)},pasteBefore:({element:t})=>e.pasteBefore(t),pasteAfter:({element:t})=>e.pasteAfter(t)};t.register(r)}}ds.$inject=["copyCutPaste","editorActions","modeling","selection","cellSelection","sheet"];const ps="is not a registered action";class hs{constructor(e,t,n,i){this._actions={undo(){e.undo()},redo(){e.redo()},select({cell:e}){i.select(e)},deselect(){i.deselect()},addRow({attrs:e,index:t}){n.addRow(e,t)},removeRow({row:e}){n.removeRow(e)},moveRow({row:e,index:t}){n.moveRow(e,t)},addCol({attrs:e,index:t}){n.addCol(e,t)},removeCol({col:e}){n.removeCol(e)},moveCol({col:e,index:t}){n.moveCol(e,t)}}}trigger(e,t){if(!this._actions[e])throw ms(e,ps);return this._actions[e](t)}register(e,t){if("string"==typeof e)return this._registerAction(e,t);(0,v.forEach)(e,(e,t)=>{this._registerAction(t,e)},this)}_registerAction(e,t){if(this.isRegistered(e))throw ms(e,"is already registered");this._actions[e]=t}unregister(e){if(!this.isRegistered(e))throw ms(e,ps);this._actions[e]=void 0}isRegistered(e){return!!this._actions[e]}}function ms(e,t){return new Error(e+" "+t)}hs.$inject=["commandStack","eventBus","modeling","selection"];const gs={__depends__:[vi],__init__:["editorActions"],editorActions:["type",hs]},fs={__depends__:[Gi,us,gs,vi],__init__:["decisionTableEditorActions"],decisionTableEditorActions:["type",ds]},ys={__depends__:[fs],__init__:["addRule"],addRule:["type",gi]};var vs=n(22696),bs=n.n(vs);class _s extends sn.uA{constructor(e,t){super(e,t),this.state={}}componentWillUpdate(e,t){var n=this.node,i=t.focussed&&Ti(n);this.selected=i&&{range:i,text:xs(n)}}componentDidUpdate(){var e=this.selected;if(!e)return;const t=e.range,n=e.text,i=this.node,s=xs(i);Fi(i,s!==n?function(e,t,n){var i=e.start,s=i,o=t.substring(i);n.lastIndexOf(o)===n.length-o.length&&(t=t.substring(0,t.length-o.length),n=n.substring(0,n.length-o.length));var r,a=function(e,t){var n,i,s,o=0,r=0;for(t.length>e.length?(i=t,s=e):(i=e,s=t);o<i.length;)i.charAt(o)!==s.charAt(r)?(n||(n={l_start:o,s_start:r}),o++):(n&&!n.complete&&(n.l_end=o,n.s_end=r,n.complete=!0),r++,o++);if(n&&!n.complete&&(n.complete=!0,n.s_end=s.length,n.l_end=i.length),n)return t.length>e.length?{newStart:n.l_start,newEnd:n.l_end,type:"add"}:{newStart:n.s_start,newEnd:n.s_end,type:t.length<e.length?"remove":"replace"}}(t,n);return a&&(s="remove"===a.type?a.newStart:a.newEnd),{start:r=s,end:r}}(t,n,s):t)}onFocus=e=>{var t=this.props.onFocus;this.setState({focussed:!0}),"function"==typeof t&&t(e)};onBlur=e=>{const{onBlur:t,onChange:n,value:i}=this.props;if(this.setState({focussed:!1}),"function"==typeof n&&this.node){const e=xs(this.node);e!==i&&n(e)}"function"==typeof t&&t(e)};onkeydown=e=>{if(13===e.which){if(e.preventDefault(),this.props.ctrlForNewline&&!function(e){return e.metaKey||e.ctrlKey}(e))return;if(this.props.singleLine)return;e.stopPropagation(),function(){var e=ki.getRangeAt(0);if(e){var t=e.cloneRange(),n=document.createElement("br");t.deleteContents(),t.insertNode(n),t.setStartAfter(n),t.setEndAfter(n),Pi(t)}}(),this.onInput(e)}};onInput=e=>{var t=this.props.onInput;"function"==typeof t&&t(xs(this.node))};onPaste=e=>{if(this.props.singleLine){const t=(e.clipboardData||window.clipboardData).getData("text");document.execCommand("insertText",!1,t.replace(/\n/g," ")),e.preventDefault()}};getClassName(){const{className:e,placeholder:t,value:n}=this.props;return[e||"","content-editable",!n&&t?"placeholder":""].join(" ")}render(e){var{label:t,value:n,placeholder:i}=e;return n=bs()(n).replace(/\r?\n/g,"<br/>")+"<br/>",(0,sn.bF)(1,"div",this.getClassName(),null,1,{"aria-label":t,role:"textbox","aria-multiline":!this.props.singleLine,tabIndex:"0",contentEditable:"true",spellCheck:"false","data-placeholder":i||"",onInput:this.onInput,onkeypress:this.onkeypress,onPaste:this.onPaste,onFocus:this.onFocus,onBlur:this.onBlur,onkeydown:this.onkeydown,dangerouslySetInnerHTML:{__html:n}},null,e=>this.node=e)}}function xs(e){return e.innerText.replace(/\n$/,"")}class Cs extends sn.uA{constructor(e,t){super(e,t),this.state={changing:!1,focussed:!1};const{injector:n}=t,i=n.get("debounceInput");this.inputChanged=i(e=>{const{onChange:t}=this.props;"function"==typeof t&&t(e);const n=this.state.changing;this.setState({changing:n!==e&&n})}),this.onInput=e=>{var t=(this.props.validate||function(){})(e);this.setState({changing:e,invalid:t}),t||this.inputChanged(e)}}onFocus=e=>{this.setState({focussed:!0});var{onFocus:t}=this.props;"function"==typeof t&&t(e)};onBlur=e=>{this.setState({focussed:!1});const{invalid:t}=this.state;t&&this.setState({changing:!1,invalid:!1});const{onBlur:n}=this.props;"function"==typeof n&&n(e)};getClassName(){var{className:e,value:t}=this.props,{changing:n,focussed:i,invalid:s}=this.state;return e+=" editable",i&&(e+=" focussed"),s&&(e+=" invalid"),t||n||(e+=" empty"),e}getDisplayValue(){var{value:e,placeholder:t}=this.props,{focussed:n,changing:i}=this.state;return"string"==typeof i&&(e=i),e||(e=n?"":t||""),e}getEditor(e={}){return(0,sn.sO)(2,_s,{className:e.className,ctrlForNewline:this.props.ctrlForNewline,label:this.props.label,onFocus:this.onFocus,onBlur:this.onBlur,onInput:this.onInput,value:this.getDisplayValue()})}}class ws extends sn.uA{constructor(e,t){super(e,t),fn(this)}componentWillMount(){const{row:e}=this.props;this.changeSupport.onElementsChanged(e.id,this.onElementsChanged)}componentWillUnmount(){const{row:e}=this.props;this.changeSupport.offElementsChanged(e.id,this.onElementsChanged)}onElementsChanged=()=>{this.forceUpdate()};setAnnotationValue=e=>{const{row:t}=this.props;this.modeling.editAnnotation(t.businessObject,e)};render(){const{row:e,rowIndex:t}=this.props,{description:n,id:i}=e.businessObject;return(0,sn.sO)(2,An,{className:"annotation",onChange:this.setAnnotationValue,coords:`${t}:annotation`,value:n,elementId:i,"data-row-id":e.id,children:(0,sn.sO)(2,Es,{label:this.translate("Annotation"),ctrlForNewline:!0,className:"annotation-editor",onChange:this.setAnnotationValue,value:n})})}}ws.$inject=["changeSupport","modeling","translate"];class Es extends Cs{render(){return(0,sn.bF)(1,"div",this.getClassName(),this.getEditor(),0)}}function Ds(e){e.onGetComponent("cell",({cellType:e})=>"after-label-cells"===e?xn:"after-rule-cells"===e?ws:void 0)}function Ss(e){return function(t){if(!1!==e){var n=(0,v.isNumber)(e)?e:300;return(0,v.debounce)(t,n)}return t}}Ds.$inject=["components"],Ss.$inject=["config.debounceInput"];const As={debounceInput:["factory",Ss]},Rs={__depends__:[As],__init__:["annotationsProvider"],annotationsProvider:["type",Ds]};function Ms(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Is={position:"absolute"};class js extends sn.uA{constructor(e,t){super(e,t),Ms(this,"open",({position:e,context:t})=>{this.close(),this.setState({isOpen:!0,position:e||{x:0,y:0},context:t||{}})}),Ms(this,"close",()=>{this.state.isOpen&&this.setState({context:void 0,isOpen:!1,position:{x:0,y:0}})}),Ms(this,"triggerClose",()=>{this.eventBus.fire("contextMenu.close")}),this.state={isOpen:!1,position:{x:0,y:0}},fn(this)}componentDidMount(){this.eventBus.on("contextMenu.open",this.open),this.eventBus.on("contextMenu.close",this.close)}componentWillUnmount(){this.eventBus.off("contextMenu.open",this.open),this.eventBus.off("contextMenu.close",this.close)}render(){const{isOpen:e,context:t,position:n}=this.state;if(!e)return null;const i=this.components.getComponents("context-menu",t);return i.length?(0,sn.sO)(2,Os,{className:"context-menu no-deselect",context:t,position:n,offset:t.offset||{x:0,y:0},autoFocus:!1!==t.autoFocus,autoClose:!1!==t.autoClose,components:i,onClose:this.triggerClose}):null}}js.$inject=["eventBus","components"];class Os extends sn.uA{constructor(e,t){super(e,t),Ms(this,"onGlobalMouseDown",e=>{this.checkClose(e.target)}),Ms(this,"onGlobalKey",e=>{var t=e.which;13!==t&&27!==t||(e.stopPropagation(),e.preventDefault(),this.close())}),Ms(this,"onFocusChanged",e=>{this.checkClose(e.target)}),Ms(this,"setNode",e=>{this.node=e;const{autoFocus:t}=this.props;var n,i;e&&(this.updatePosition(),t&&(n=e,(i=(0,Q.P)(Ps,n))&&(i.focus(),i.selectionStart&&"text"===i.type?i.selectionStart=1e5:"contentEditable"in i&&Fi(i,{start:1e5,end:1e5}))))}),fn(this)}close(){const{onClose:e}=this.props;(0,v.isFunction)(e)&&e()}checkClose(e){const{autoClose:t}=this.props;if(t){var n=this.node;n&&n!==e&&(n.contains(e)||this.close())}}componentDidMount(){document.addEventListener("focusin",this.onFocusChanged),document.addEventListener("keydown",this.onGlobalKey),document.addEventListener("mousedown",this.onGlobalMouseDown)}componentWillUnmount(){document.removeEventListener("focusin",this.onFocusChanged),document.removeEventListener("keydown",this.onGlobalKey),document.removeEventListener("mousedown",this.onGlobalMouseDown)}updatePosition(){const{position:e,offset:t}=this.props,{node:n}=this,i=n.getBoundingClientRect();e.width||(e.width=0),e.height||(e.height=0);const s=this.renderer.getContainer().getBoundingClientRect();s.width>s.height?(this.node.classList.add("horizontal"),this.node.classList.remove("vertical")):(this.node.classList.add("vertical"),this.node.classList.remove("horizontal"));const{scrollLeft:o,scrollTop:r}=function(e){const t=(0,Q.kp)(e,".tjs-container");if(!t)return{scrollTop:0,scrollLeft:0};const{scrollLeft:n,scrollTop:i}=t;return{scrollTop:i,scrollLeft:n}}(n),a={};let l,c,u;e.align&&(l=e.align.split("-")),"left"===(l&&l[1]||(e.x+e.width/2>s.width/2?"left":"right"))?(c=e.x-s.left-i.width+t.x+o,n.classList.remove("right"),n.classList.add("left")):(c=-s.left+e.x+e.width-t.x+o,n.classList.remove("left"),n.classList.add("right")),c=l?c:ks(c,0+o,s.width-i.width+o),a.left=c+"px","top"===(l&&l[0]||(e.y+e.height/2>s.height/2?"top":"bottom"))?(u=e.y-s.top-i.height+t.y+r,n.classList.remove("bottom"),n.classList.add("top")):(u=-s.top+e.y-t.y+r,n.classList.remove("top"),n.classList.add("bottom")),u=l?u:ks(u,0+r,s.height-i.height+r),a.top=u+"px",a.overflowY="auto",a.maxHeight=s.height-u+r+"px",(0,v.assign)(this.node.style,Is,a)}render(){const{context:e,components:t,className:n}=this.props;return(0,sn.bF)(1,"div",n,t.map((t,n)=>(0,sn.sO)(2,t,{context:e},n)),0,{onContextMenu:e=>e.preventDefault()},null,this.setNode)}}function ks(e,t,n){return Math.max(t,Math.min(n,e))}Os.$inject=["renderer"];const Ps="\n  input[type=text],\n  input[type=number],\n  input[type=button],\n  input[type=submit],\n  [contenteditable],\n  [tabindex],\n  a[href],\n  textarea,\n  button\n";class Fs{constructor(e,t,n){this._eventBus=t,e.onGetComponent("table.before",()=>js)}open(e,t){this._eventBus.fire("contextMenu.open",{position:e,context:t})}close(){this._eventBus.fire("contextMenu.close")}}Fs.$inject=["components","eventBus","renderer"];const Ts={__init__:["contextMenu"],contextMenu:["type",Fs]};function Ns(e){return!e.altKey&&(e.ctrlKey||e.metaKey)}function $s(e){return e.shiftKey}class Ls{constructor(e,t,n,i,s,o,r){this._clipboard=n,this._cellSelection=i,this._elementRegistry=s,this._editorActions=o,this._keyboard=e.get("keyboard",!1),this._renderer=r,this._keyboard&&(t.on("keyboard.init",this._registerBindings),t.on("keyboard.bind",()=>{Q.f0.bind(document,"copy",this._clearClipboard,!0),Q.f0.bind(document,"cut",this._clearClipboard,!0)}),t.on("keyboard.unbind",()=>{Q.f0.unbind(document,"copy",this._clearClipboard,!0),Q.f0.unbind(document,"cut",this._clearClipboard,!0)}))}_clearClipboard=()=>{this._clipboard.clear()};_getSelectedCell(){const e=this._cellSelection.getCellSelection();if(!e)return;const t=this._elementRegistry.get(e);if(!t)return;const n=Ui(e,this._renderer.getContainer()),i=Ki(n);if(document.activeElement!==i)return;const s=Ti(n);return s&&s.start!==s.end?void 0:t}_registerBindings=()=>{[(e,t)=>{if(Ns(t)&&67===e){const e=this._getSelectedCell();if(!e)return;return $s(t)?this._editorActions.trigger("copy",{element:e.col}):this._editorActions.trigger("copy",{element:e.row}),!0}},(e,t)=>{if(Ns(t)&&88===e){const e=this._getSelectedCell();if(!e)return;return $s(t)?this._editorActions.trigger("cut",{element:e.col}):this._editorActions.trigger("cut",{element:e.row}),!0}},(e,t)=>{let n;if(Ns(t)&&86===e){const e=this._getSelectedCell();if(!e)return;$s(t)?(n=this._editorActions.trigger("pasteAfter",{element:e.col}),n&&this._cellSelection.selectCell("right")):(n=this._editorActions.trigger("pasteAfter",{element:e.row}),n&&this._cellSelection.selectCell("below"))}return void 0!==n}].forEach(e=>{this._keyboard.addListener(e)})}}Ls.$inject=["injector","eventBus","clipboard","cellSelection","elementRegistry","editorActions","renderer"];const Bs={__depends__:[Hi.A,Gi],__init__:["copyCutPasteKeyBindings"],copyCutPasteKeyBindings:["type",Ls]};class Vs extends sn.uA{constructor(e,t){super(e,t),fn(this)}onClick=e=>{this.editorActions.trigger("addInput")};render(){return(0,sn.bF)(1,"th","input-cell create-inputs header actionable",[this.translate("Input"),(0,sn.eW)(" "),(0,sn.bF)(1,"button","add-input dmn-icon-plus action-icon",null,1,{title:this.translate("Add input")})],0,{onClick:this.onClick,title:this.translate("Add input")})}}Vs.$inject=["editorActions","translate"];class Us extends sn.uA{constructor(e,t){super(e,t),fn(this)}onClick=e=>{this.editorActions.trigger("addInput")};render(){return(0,sn.bF)(1,"td","input-cell create-inputs",(0,sn.eW)("-"),2,{onClick:this.onClick,title:this.translate("Add input")})}}Us.$inject=["editorActions","translate"];class zs{constructor(e,t){e.onGetComponent("cell",500,({cellType:e})=>{const{businessObject:n}=t.getRoot();if(!n.input||!n.input.length)return"before-label-cells"===e?Vs:"before-rule-cells"===e?Us:void 0})}}zs.$inject=["components","sheet"];const Ks={__depends__:[fs],__init__:["createInputsProvider"],createInputsProvider:["type",zs]},Ws=["string","boolean","number","date","time","dateTime","dayTimeDuration","yearMonthDuration","Any"];class qs{constructor(e){this._dataTypes=e||Ws}getAll(){return this._dataTypes}}qs.$inject=["config.dataTypes"];const Gs={__init__:["dataTypes"],dataTypes:["type",qs]};class Hs{constructor(e,t,n,i,s,o,r,a,l,c,u){this._contextMenu=t,this._clipboard=n,this._editorActions=i,this._elementRegistry=o,this._eventBus=s,this._modeling=r,this._selection=a,this._sheet=l,this._rules=c,this._translate=u,this._getEntries=this._getEntries.bind(this),e.onGetComponent("context-menu",(t={})=>{if(t.contextMenuType&&"context-menu"===t.contextMenuType){const n=this._getEntries(t),i=this._elementRegistry.get(t.id)instanceof Xt&&e.getComponents("context-menu-cell-additional",t);if(i&&i.length){const e=(0,sn.bF)(1,"div","context-menu-group context-menu-group-cell",i,0,{role:"presentation"});n.push(e)}return()=>(0,sn.bF)(1,"div","context-menu-flex",n,0,{tabIndex:0,role:"menu","aria-label":"Decision table context menu"})}}),s.on("cell.contextmenu",({event:e,id:n,node:i})=>{e.preventDefault(),t.open({x:e.pageX,y:e.pageY},{contextMenuType:"context-menu",event:e,id:n})})}_getEntries(e){const t=t=>{const n=t.cells.map(e=>e.id).indexOf(e.id),i=this._editorActions.trigger("addRuleAbove",{rule:t});i.cells[n]?this._selection.select(i.cells[n]):this._selection.select(i.cells[0]),this._contextMenu.close()},n=t=>{const n=t.cells.map(e=>e.id).indexOf(e.id),i=this._editorActions.trigger("addRuleBelow",{rule:t});i.cells[n]?this._selection.select(i.cells[n]):this._selection.select(i.cells[0]),this._contextMenu.close()},i=e=>{this._editorActions.trigger("removeRule",{rule:e}),this._contextMenu.close()},s=e=>{this._editorActions.trigger("addInputLeft",{input:e}),this._contextMenu.close()},o=e=>{this._editorActions.trigger("addInputRight",{input:e}),this._contextMenu.close()},r=e=>{this._editorActions.trigger("removeInput",{input:e}),this._contextMenu.close()},a=e=>{this._editorActions.trigger("addOutputLeft",{output:e}),this._contextMenu.close()},l=e=>{this._editorActions.trigger("addOutputRight",{output:e}),this._contextMenu.close()},c=e=>{this._editorActions.trigger("removeOutput",{output:e}),this._contextMenu.close()},d=e=>{this._editorActions.trigger("copy",{element:e}),this._contextMenu.close()},p=e=>{this._editorActions.trigger("cut",{element:e}),this._contextMenu.close()},h=e=>{this._editorActions.trigger("pasteBefore",{element:e}),this._contextMenu.close()},m=e=>{this._editorActions.trigger("pasteAfter",{element:e}),this._contextMenu.close()},g=e&&e.id;if(!g)return null;const f=this._elementRegistry.get(g);if(!f)return null;const y=this._clipboard.get()||{},v=[],b=f.row||f;if((0,u.is)(b,"dmn:DecisionRule")){const e=this._rules.allowed("paste",{data:y.elements,target:b});v.push((0,sn.bF)(1,"div","context-menu-group",[(0,sn.bF)(1,"div","context-menu-group-entry context-menu-entry-copy-rule",this._translate("Copy rule"),0,{onClick:()=>d(b),tabIndex:"-1",role:"menuitem"}),(0,sn.bF)(1,"div","context-menu-group-entry context-menu-entry-cut-rule",this._translate("Cut rule"),0,{onClick:()=>p(b),tabIndex:"-1",role:"menuitem"}),(0,sn.bF)(1,"div",`context-menu-group-entry ${e?"":"disabled"} context-menu-entry-paste-rule-above`,this._translate("Paste rule above"),0,{onClick:()=>h(b),tabIndex:"-1",role:"menuitem","aria-disabled":!e}),(0,sn.bF)(1,"div",`context-menu-group-entry ${e?"":"disabled"} context-menu-entry-paste-rule-below`,this._translate("Paste rule below"),0,{onClick:()=>m(b),tabIndex:"-1",role:"menuitem","aria-disabled":!e})],4,{role:"presentation"}),(0,sn.bF)(1,"div","context-menu-group",[(0,sn.bF)(1,"div","context-menu-group-entry context-menu-entry-add-rule-above",this._translate("Add rule above"),0,{onClick:()=>t(b),tabIndex:"-1",role:"menuitem"}),(0,sn.bF)(1,"div","context-menu-group-entry context-menu-entry-add-rule-below",this._translate("Add rule below"),0,{onClick:()=>n(b),tabIndex:"-1",role:"menuitem"}),(0,sn.bF)(1,"div","context-menu-group-entry context-menu-entry-remove-rule",this._translate("Remove rule"),0,{onClick:()=>i(b),tabIndex:"-1",role:"menuitem"})],4,{role:"presentation"}))}else if((0,u.is)(f,"dmn:InputClause")){const e=(0,u.is)(f,"dmn:InputClause")?f:f.col,t=this._rules.allowed("col.remove",{col:f.col||f}),n=this._rules.allowed("paste",{data:y.elements,target:f.col||f});v.push((0,sn.bF)(1,"div","context-menu-group",[(0,sn.bF)(1,"div","context-menu-group-entry context-menu-entry-copy-input",this._translate("Copy input column"),0,{onClick:()=>d(e),tabIndex:"-1",role:"menuitem"}),(0,sn.bF)(1,"div",`context-menu-group-entry ${t?"":"disabled"} context-menu-entry-cut-input`,this._translate("Cut input column"),0,{onClick:()=>p(e),tabIndex:"-1",role:"menuitem","aria-disabled":!t}),(0,sn.bF)(1,"div",`context-menu-group-entry ${n?"":"disabled"} context-menu-entry-paste-input-left`,this._translate("Paste input column left"),0,{onClick:()=>h(e),tabIndex:"-1",role:"menuitem","aria-disabled":!n}),(0,sn.bF)(1,"div",`context-menu-group-entry ${n?"":"disabled"} context-menu-entry-paste-input-right`,this._translate("Paste input column right"),0,{onClick:()=>m(e),tabIndex:"-1",role:"menuitem","aria-disabled":!n})],4,{role:"presentation"}),(0,sn.bF)(1,"div","context-menu-group",[(0,sn.bF)(1,"div","context-menu-group-entry context-menu-entry-add-input-left",this._translate("Add input column left"),0,{onClick:()=>s(e),tabIndex:"-1",role:"menuitem"}),(0,sn.bF)(1,"div","context-menu-group-entry context-menu-entry-add-input-right",this._translate("Add input column right"),0,{onClick:()=>o(e),tabIndex:"-1",role:"menuitem"}),(0,sn.bF)(1,"div",`context-menu-group-entry ${t?"":"disabled"} context-menu-entry-remove-input`,this._translate("Remove input column"),0,{onClick:()=>r(e),tabIndex:"-1",role:"menuitem","aria-disabled":!t})],4,{role:"presentation"}))}else if((0,u.is)(f,"dmn:OutputClause")||(0,u.is)(f.col,"dmn:OutputClause")){const e=(0,u.is)(f,"dmn:OutputClause")?f:f.col,t=this._rules.allowed("col.remove",{col:f.col||f}),n=this._rules.allowed("paste",{data:y.elements,target:f.col||f});v.push((0,sn.bF)(1,"div","context-menu-group",[(0,sn.bF)(1,"div","context-menu-group-entry context-menu-entry-copy-output",this._translate("Copy output column"),0,{onClick:()=>d(e),tabIndex:"-1",role:"menuitem"}),(0,sn.bF)(1,"div",`context-menu-group-entry ${t?"":"disabled"} context-menu-entry-cut-output`,this._translate("Cut output column"),0,{onClick:()=>p(e),tabIndex:"-1",role:"menuitem","aria-disabled":!t}),(0,sn.bF)(1,"div",`context-menu-group-entry ${n?"":"disabled"} context-menu-entry-paste-output-left`,this._translate("Paste output column left"),0,{onClick:()=>h(e),tabIndex:"-1",role:"menuitem","aria-disabled":!n}),(0,sn.bF)(1,"div",`context-menu-group-entry ${n?"":"disabled"} context-menu-entry-paste-output-right`,this._translate("Paste output column right"),0,{onClick:()=>m(e),tabIndex:"-1",role:"menuitem","aria-disabled":!n})],4,{role:"presentation"}),(0,sn.bF)(1,"div","context-menu-group",[(0,sn.bF)(1,"div","context-menu-group-entry context-menu-entry-add-output-left",this._translate("Add output column left"),0,{onClick:()=>a(e),tabIndex:"-1",role:"menuitem"}),(0,sn.bF)(1,"div","context-menu-group-entry context-menu-entry-add-output-right",this._translate("Add output column right"),0,{onClick:()=>l(e),tabIndex:"-1",role:"menuitem"}),(0,sn.bF)(1,"div",`context-menu-group-entry ${t?"":"disabled"} context-menu-entry-remove-output`,this._translate("Remove output column"),0,{onClick:()=>c(e),tabIndex:"-1",role:"menuitem","aria-disabled":!t})],4,{role:"presentation"}))}return v}}Hs.$inject=["components","contextMenu","clipboard","editorActions","eventBus","elementRegistry","modeling","selection","sheet","rules","translate"];const Xs=["row.add","row.remove","col.add","col.remove"];class Ys{constructor(e,t){t.on("commandStack.executed",({command:t})=>{-1!==Xs.indexOf(t)&&e.close()}),t.on("commandStack.reverted",()=>{e.close()})}}Ys.$inject=["contextMenu","eventBus"];class Js{constructor(e){e.on("contextMenu.open",()=>this.addEventListeners()),e.on("contextMenu.close",()=>this.removeEventListeners()),e.on("commandStack.executed",()=>this.removeEventListeners())}addEventListeners=()=>{document.addEventListener("keydown",this.handleKeyEvent),document.addEventListener("mouseover",this.handleMouseOver)};removeEventListeners=()=>{document.removeEventListener("keydown",this.handleKeyEvent),document.removeEventListener("mouseover",this.handleMouseOver)};handleKeyEvent=e=>{"ArrowUp"===e.key?(e.preventDefault(),this.move(e.target,-1)):"ArrowDown"===e.key?(e.preventDefault(),this.move(e.target,1)):"Enter"===e.key&&(e.preventDefault(),this.clickCurrentEntry())};handleMouseOver=()=>{this.getEntries().forEach(e=>{return(t=e).style.removeProperty("background-color"),void t.style.removeProperty("pointer-events");var t});const{focused:e}=this.getActiveEntries(document);e&&(0,Q.Ly)(e).remove("focused")};getEntries=()=>Array.from((0,Q.YG)(".context-menu-group-entry")).filter(e=>!(0,Q.Ly)(e).has("disabled"));getActiveEntries=e=>{const t=(0,Q.P)(".context-menu-group-entry:hover",e),n=(0,Q.P)(".context-menu-group-entry.focused",e);return{hover:t,focused:n,current:n||t}};move=(e,t)=>{const n=this.getEntries(),{current:i,hover:s}=this.getActiveEntries(e);if(!i){const e=n[0];return void(0,Q.Ly)(e).add("focused")}const o=n.indexOf(i)+t;let r=n[o];var a;o<0&&(r=n[n.length-1]),o>=n.length&&(r=n[0]),s&&((a=s).style.setProperty("pointer-events","none"),a.style.setProperty("background-color","transparent")),(0,Q.Ly)(i).remove("focused"),(0,Q.Ly)(r).add("focused"),r.style.removeProperty("background-color")};clickCurrentEntry=()=>{const{current:e}=this.getActiveEntries(document);e&&e.click()}}Js.$inject=["eventBus"];const Zs={__depends__:[fs,Ts,Ji],__init__:["decisionTableContextMenu","contextMenuCloseBehavior","contextMenuKeyboard"],decisionTableContextMenu:["type",Hs],contextMenuCloseBehavior:["type",Ys],contextMenuKeyboard:["type",Js]};class Qs extends sn.uA{constructor(e,t){super(e,t),vn(this,_n),this._translate=t.injector.get("translate")}onClick=e=>{const{output:t}=this.props;this._eventBus.fire("output.edit",{event:e,output:t})};onContextmenu=e=>{const{id:t}=this.props.output;this._eventBus.fire("cell.contextmenu",{event:e,id:t})};onElementsChanged=()=>{this.forceUpdate()};componentWillMount(){const{injector:e}=this.context;this._changeSupport=this.context.changeSupport,this._eventBus=e.get("eventBus"),this._elementRegistry=e.get("elementRegistry");const{output:t}=this.props;this._changeSupport.onElementsChanged(t.id,this.onElementsChanged)}componentWillUnmount(){const{output:e}=this.props;this._changeSupport.offElementsChanged(e.id,this.onElementsChanged)}render(){const{output:e,index:t,outputsLength:n}=this.props,{label:i,name:s,outputValues:o,typeRef:r}=e,a=e.width?e.width+"px":"192px";return(0,sn.bF)(1,"th","output-cell output-editor",[this.slotFills({type:"cell-inner",context:{cellType:"output-cell",col:this._elementRegistry.get(e.id),index:t,outputsLength:n},col:e}),(0,sn.bF)(1,"div","clause",0===t?this._translate("Then"):this._translate("And"),0),i?(0,sn.bF)(1,"div","output-label",i,0,{title:this._translate("Output label: ")+i}):(0,sn.bF)(1,"div","output-name",s,0,{title:this._translate("Output name: ")+s}),(0,sn.bF)(1,"div","output-variable",o&&o.text||this._translate(r||""),0,{title:o&&o.text?this._translate("Output values"):this._translate("Output type")})],0,{"data-col-id":e.id,onDblClick:this.onClick,onContextMenu:this.onContextmenu,style:{width:a}})}}class eo extends sn.uA{constructor(e,t){super(e,t),this.state={value:e.value}}onInput=e=>{const{onInput:t}=this.props,n=e.target.value;this.setState({value:n},()=>{"function"==typeof t&&t(n)})};onChange=e=>{const{onChange:t}=this.props;"function"==typeof t&&t(e.target.value)};onKeyDown=e=>{const{onKeyDown:t}=this.props;"function"==typeof t&&t(e)};onKeyUp=e=>{const{onKeyUp:t}=this.props;"function"==typeof t&&t(e)};componentDidUpdate(e){const{value:t}=this.props;t!==e.value&&t!==this.state.value&&this.setState({value:t})}render(){const{className:e,label:t,id:n,placeholder:i,type:s}=this.props,{value:o}=this.state;return(0,sn.bF)(64,"input",[e||"","dms-input"].join(" "),null,1,{"aria-label":t,placeholder:i||"",onChange:this.onChange,onInput:this.onInput,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,spellCheck:"false",type:s||"text",value:o,id:n})}}class to extends sn.uA{constructor(e,t){super(e,t),this.translate=t.injector?t.injector.get("translate"):no,this.setName=e=>{e=e||void 0,this.handleChange({name:e})},this.setLabel=e=>{e=e||void 0,this.handleChange({label:e})}}handleChange(e){var{onChange:t}=this.props;"function"==typeof t&&t(e)}render(){const{name:e,label:t}=this.props;return(0,sn.bF)(1,"div","context-menu-container ref-output-editor output-edit",[(0,sn.bF)(1,"div","dms-form-control",(0,sn.sO)(2,_s,{label:this.translate("Output label"),className:"dms-output-label",value:t||"",placeholder:this.translate("Output"),singleLine:!0,onInput:this.setLabel}),2),(0,sn.bF)(1,"div","dms-form-control",[(0,sn.bF)(1,"label","dms-label",this.translate("Output name"),0),(0,sn.sO)(2,eo,{label:this.translate("Output name"),className:"ref-output-name",value:e||"",onInput:this.setName})],4)],4)}}function no(e){return e}class io extends sn.uA{constructor(e,t){super(e,t),this.state={},fn(this),this.persistChanges=this.debounceInput(this.persistChanges)}persistChanges=()=>{const{output:e}=this.props.context,{unsaved:t}=this.state;t&&(this.modeling.updateProperties(e,t),this.setState({unsaved:!1}))};handleChange=e=>{this.setState({unsaved:{...this.state.unsaved,...e}},this.persistChanges)};getValue(e){const{output:t}=this.props.context,{unsaved:n}=this.state;return n&&e in n?n[e]:t.get(e)}render(){return(0,sn.sO)(2,to,{name:this.getValue("name"),label:this.getValue("label"),onChange:this.handleChange})}}io.$inject=["debounceInput","modeling"];class so extends sn.uA{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._eventBus=t.injector.get("eventBus")}onClick=e=>{const{col:t}=this.props;this._eventBus.fire("output.edit",{event:e,output:t})};render(){return(0,sn.bF)(1,"button","edit-button dmn-icon-edit",null,1,{"aria-label":this._translate("Edit output"),type:"button",onClick:this.onClick})}}class oo{constructor(e,t,n,i){e.onGetComponent("cell",({cellType:e})=>{if("output-header"===e)return Qs}),e.onGetComponent("context-menu",(e={})=>{if("output-edit"===e.contextMenuType)return io}),e.onGetComponent("cell-inner",(e={})=>{const{cellType:t}=e;if("output-cell"===t)return so}),n.on("output.edit",({event:e,output:n})=>{const{target:i}=e,s=(0,Q.kp)(i,"th",!0),{left:o,top:r}=s.getBoundingClientRect(),a=function(e){if(!(0,Q.cK)(e,".output-cell + .output-cell"))return{x:-1,y:0}}(s);t.open({x:o,y:r,align:"bottom-right"},{contextMenuType:"output-edit",output:n,offset:a})})}}oo.$inject=["components","contextMenu","eventBus","renderer"];class ro extends sn.uA{constructor(e,t){super(e,t),vn(this,_n),this._translate=t.injector.get("translate")}onClick=e=>{const{input:t}=this.props;this._eventBus.fire("input.edit",{event:e,input:t})};onContextmenu=e=>{const{id:t}=this.props.input;this._eventBus.fire("cell.contextmenu",{event:e,id:t})};onElementsChanged=()=>{this.forceUpdate()};componentWillMount(){const{injector:e}=this.context;this._changeSupport=this.context.changeSupport,this._sheet=e.get("sheet"),this._eventBus=e.get("eventBus"),this._elementRegistry=e.get("elementRegistry");const t=this._sheet.getRoot(),{input:n}=this.props;this._changeSupport.onElementsChanged(t.id,this.onElementsChanged),this._changeSupport.onElementsChanged(n.id,this.onElementsChanged)}componentWillUnmount(){const e=this._sheet.getRoot(),{input:t}=this.props;this._changeSupport.offElementsChanged(e.id,this.onElementsChanged),this._changeSupport.offElementsChanged(t.id,this.onElementsChanged)}render(){const{input:e,index:t,inputsLength:n}=this.props,{inputExpression:i,inputValues:s}=e,o=e.get("label"),r=e.width?e.width+"px":"192px";return(0,sn.bF)(1,"th","input-cell input-editor",[this.slotFills({type:"cell-inner",context:{cellType:"input-cell",col:this._elementRegistry.get(e.id),index:t,inputsLength:n},col:e}),(0,sn.bF)(1,"div","clause",0===t?this._translate("When"):this._translate("And"),0),o?(0,sn.bF)(1,"div","input-label",o,0,{title:this._translate("Input label: ")+o}):(0,sn.bF)(1,"div","input-expression",i.text,0,{title:this._translate("Input expression: ")+i.text}),(0,sn.bF)(1,"div","input-variable",s&&s.text||this._translate(i.typeRef||""),0,{title:s&&s.text?this._translate("Input values"):this._translate("Input type")})],0,{"data-col-id":e.id,onDblClick:this.onClick,onContextMenu:this.onContextmenu,style:{width:r}})}}var ao=n(66504),lo=n(68944);class co extends sn.uA{constructor(e,t){super(e,t),this.node=null,this.editor=null,this.state={value:e.value},this._feelLanguageContext=t.injector?.get("feelLanguageContext",!1)}_getFeelLanguageContext(){return this._feelLanguageContext&&this._feelLanguageContext.getConfig()}componentDidMount(){const e=this._getFeelLanguageContext();this.editor=new ao.A({contentAttributes:{"aria-label":this.props.label},parserDialect:e?.parserDialect,builtins:e?.builtins,dialect:this.props.feelLanguageDialect,container:this.node,onChange:this.handleChange,value:this.state.value,variables:this.props.variables||[],extensions:[lo.Lz.lineWrapping]}),this.node.addEventListener("mousedown",this.handleMouseEvent),this.node.addEventListener("keydown",this.handleKeyDownCapture,!0),this.node.addEventListener("keydown",this.handleKeyDown),this.props.autoFocus&&this.editor.focus(this.state.value.length)}componentDidUpdate(e){const{value:t}=this.props;var n,i;e.value!==t&&t!==this.state.value&&this.setState({value:t},()=>{this.editor.setValue(t)}),n=e.variables,i=this.props.variables,JSON.stringify(n)!==JSON.stringify(i)&&this.editor.setVariables(this.props.variables)}componentWillUnmount(){this.node.removeEventListener("mousedown",this.handleMouseEvent),this.node.removeEventListener("keydown",this.handleKeyDownCapture,!0),this.node.removeEventListener("keydown",this.handleKeyDown)}handleMouseEvent=e=>{e.stopPropagation()};handleKeyDownCapture=e=>{if("Enter"===e.key){if(this.node.querySelector(".cm-tooltip-autocomplete"))return void(e.triggeredFromAutocomplete=!0);this.props.ctrlForNewline&&!function(e){return e.metaKey||e.ctrlKey}(e)&&e.preventDefault(),this.props.singleLine&&e.preventDefault()}};handleKeyDown=e=>{["Enter","Escape"].includes(e.key)&&e.triggeredFromAutocomplete&&e.stopPropagation()};handleChange=e=>{const{onInput:t}=this.props;this.setState({value:e}),t&&t(e)};handleBlur=()=>{const{onBlur:e,onChange:t}=this.props;t&&this.state.value!==this.props.value&&t(this.state.value),e&&e()};setNode=e=>{this.node=e};render(){return(0,sn.bF)(1,"div",["literal-expression",this.props.className||""].join(" "),null,1,{onClick:this.handleMouseEvent,onFocusIn:this.props.onFocus,onFocusOut:this.handleBlur},null,this.setNode)}}class uo extends sn.uA{constructor(e,t){super(e,t),this.translate=t.injector.get("translate"),this.expressionLanguages=t.injector.get("expressionLanguages",!1),this.variableResolver=t.injector.get("variableResolver",!1),this.handleValue=e=>{let t={text:e};this.handleChange(t)},this.handleLabelChange=e=>{var t=e||void 0;this.handleChange({label:t})}}handleChange(e){var{onChange:t}=this.props;"function"==typeof t&&t(e)}getExpressionEditorComponent(){return this.expressionLanguages&&"feel"!==this.expressionLanguages.getDefault("inputCell").value?_s:co}handleKeyDown=e=>{"Enter"===e.key&&e.stopPropagation()};_getVariables(){return this.variableResolver&&this.variableResolver.getVariables(this.props.element)}render(){const{label:e,text:t}=this.props,n=this.getExpressionEditorComponent(),i=this._getVariables();return(0,sn.bF)(1,"div","context-menu-container ref-input-editor input-edit",[(0,sn.bF)(1,"div","dms-form-control",(0,sn.sO)(2,_s,{label:this.translate("Input label"),className:"dms-input-label",value:e||"",placeholder:this.translate("Input"),singleLine:!0,onInput:this.handleLabelChange}),2),(0,sn.bF)(1,"div","dms-form-control",[(0,sn.bF)(1,"label","dms-label",this.translate("Expression"),0),(0,sn.sO)(2,n,{label:this.translate("Input expression"),placeholder:this.translate("Enter expression"),className:["ref-text","dms-input"].join(" "),onInput:this.handleValue,value:t||"",variables:i})],4)],4,{onKeyDown:this.handleKeyDown})}}class po extends sn.uA{constructor(e,t){super(e,t),this.state={},fn(this),this.persistChanges=this.debounceInput(this.persistChanges)}persistChanges=()=>{const{input:e}=this.props.context,{unsaved:t}=this.state;if(!t)return;const{label:n,...i}=t;var s,o={};"label"in t&&(o.label=n),s=i,Object.keys(s).length&&(o.inputExpression=i),this.modeling.updateProperties(e,o),this.setState({unsaved:!1})};handleChange=e=>{this.setState({unsaved:{...this.state.unsaved,...e}},this.persistChanges)};getValue(e){let{input:t}=this.props.context;const{unsaved:n}=this.state;let i=t;return"text"===e&&(i=i.inputExpression),n&&e in n?n[e]:i.get(e)}render(){return(0,sn.sO)(2,uo,{label:this.getValue("label"),text:this.getValue("text"),element:this.props.context.input,onChange:this.handleChange})}}po.$inject=["debounceInput","modeling","injector"];class ho extends sn.uA{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._eventBus=t.injector.get("eventBus")}onClick=e=>{const{col:t}=this.props;this._eventBus.fire("input.edit",{event:e,input:t})};render(){return(0,sn.bF)(1,"button","edit-button dmn-icon-edit",null,1,{"aria-label":this._translate("Edit input"),type:"button",onClick:this.onClick})}}class mo{constructor(e,t,n,i){e.onGetComponent("cell",({cellType:e})=>{if("input-header"===e)return ro}),e.onGetComponent("context-menu",(e={})=>{if("input-edit"===e.contextMenuType)return po}),e.onGetComponent("cell-inner",(e={})=>{const{cellType:t}=e;if("input-cell"===t)return ho}),n.on("input.edit",({event:e,input:n})=>{const{target:i}=e,s=(0,Q.kp)(i,"th",!0),{left:o,top:r}=s.getBoundingClientRect();t.open({x:o,y:r,align:"bottom-right"},{contextMenuType:"input-edit",input:n})})}}mo.$inject=["components","contextMenu","eventBus","renderer"];class go extends sn.uA{constructor(e,t){super(e,t),fn(this);const{value:n}=e;this.state={value:n,optionsVisible:!1},this._portalEl=null}componentDidMount(){document.addEventListener("mousedown",this.onGlobalClick),document.addEventListener("focusin",this.onFocusChanged),this.keyboard.addListener(this.onKeyboard)}componentWillUnmount(){document.removeEventListener("focusin",this.onFocusChanged),document.removeEventListener("mousedown",this.onGlobalClick),this.keyboard.removeListener(this.onKeyboard),this.removePortalEl()}componentWillReceiveProps(e){const{value:t}=e;this.setState({value:t})}componentWillUpdate(e,t){const{optionsVisible:n}=t;n?this._portalEl||this.addPortalEl():this._portalEl&&this.removePortalEl()}componentDidUpdate(){const{optionsVisible:e}=this.state;if(!e||!this.inputNode)return;const t=this.getOptionsBounds();(0,v.assign)(this._portalEl.style,t)}getOptionsBounds(){const e=this.renderer.getContainer(),{top:t,left:n,bottom:i}=e.getBoundingClientRect(),{top:s,left:o,width:r,height:a,bottom:l}=this.inputNode.getBoundingClientRect(),c=s+a-t+e.scrollTop,u={top:`${c}px`,left:`${o-n+e.scrollLeft}px`,width:`${r}px`,"max-height":`calc(100% - ${c}px)`};if(i-l<a){const e=i-s;u.bottom=`${e}px`,u["max-height"]=`calc(100% - ${e})`,delete u.top}return u}addPortalEl(){this._portalEl=te()('<div class="dms-select-options"></div>'),this.renderer.getContainer().appendChild(this._portalEl),this._portalEl.addEventListener("mousedown",fo)}removePortalEl(){this._portalEl&&(this._portalEl.removeEventListener("mousedown",fo),(0,Q.TF)(this._portalEl),this._portalEl=null)}onChange=e=>{this.setState({value:e});const{onChange:t}=this.props;"function"==typeof t&&t(e)};onInputClick=e=>{e.preventDefault(),e.stopPropagation(),this.setOptionsVisible(!this.state.optionsVisible),this.focusInput()};onInput=e=>{const{value:t}=e.target;this.onChange(t)};onOptionClick=(e,t)=>{t.preventDefault(),t.stopPropagation(),this.setOptionsVisible(!1),this.onChange(e),this.focusInput()};focusInput(){const e=this.inputNode;e.focus(),"selectionStart"in e&&(e.selectionStart=1e5)}checkClose(e){!this._portalEl||this._portalEl.contains(e)||this.parentNode.contains(e)||this.setOptionsVisible(!1)}onFocusChanged=e=>{this.checkClose(e.target)};onGlobalClick=e=>{this.checkClose(e.target)};select(e){const{options:t}=this.props,{value:n}=this.state;if(!t)return;const i=t.filter(e=>e.value===n)[0],s=i?t.indexOf(i):-1,o=-1===s?1===e?0:t.length-1:(s+e)%t.length,r=t[o<0?t.length+o:o];this.onChange(r.value)}setOptionsVisible(e){this.setState({optionsVisible:e})}onKeyDown=e=>{const{optionsVisible:t}=this.state;var n=e.which;40!==n&&38!==n||(e.stopPropagation(),e.preventDefault(),t?this.select(40===n?1:-1):this.setOptionsVisible(!0)),t&&(13!==n&&27!==n||(e.stopPropagation(),e.preventDefault(),this.setOptionsVisible(!1)))};onKeyboard=e=>{const{optionsVisible:t}=this.state;if(t)return 27===e?(this.setOptionsVisible(!1),!0):void 0};renderOptions(e,t){return(0,sn.bF)(1,"div","options",e.map(e=>(0,sn.bF)(1,"div",["option",t===e?"active":""].join(" "),e.label,0,{"data-value":e.value,onClick:t=>this.onOptionClick(e.value,t)})),0)}render(){const{className:e,label:t,id:n,options:i,noInput:s,title:o}=this.props,{optionsVisible:r,value:a}=this.state,l=!!i&&i.filter(e=>e.value===a)[0],c=l?l.label:a;return(0,sn.bF)(1,"div",[e||"","dms-input-select"].join(" "),[s?(0,sn.bF)(1,"div","dms-input",c,0,{"aria-label":t,tabIndex:"0",onKeyDown:this.onKeyDown},null,e=>this.inputNode=e):(0,sn.bF)(64,"input","dms-input",null,1,{"aria-label":t,onInput:this.onInput,onKeyDown:this.onKeyDown,spellCheck:"false",type:"text",value:a,id:n},null,e=>this.inputNode=e),(0,sn.bF)(1,"span",["dms-input-select-icon",r?"dmn-icon-up":"dmn-icon-down"].join(" ")),r&&(0,sn.d5)(this.renderOptions(i,l),this._portalEl)],0,{title:o,onClick:this.onInputClick},null,e=>this.parentNode=e)}}function fo(e){e.stopPropagation()}go.$inject=["keyboard","renderer"];class yo extends sn.uA{constructor(e,t){super(e),this._translate=t.injector.get("translate"),this._modeling=t.injector.get("modeling"),this._dataTypes=t.injector.get("dataTypes")}onTypeChange=e=>{const t=this.getElement(),n=(0,u.is)(t,"dmn:LiteralExpression")?t.$parent:t;let i;(0,u.Xy)(n)?i={inputExpression:{typeRef:e}}:(0,u.Mz)(n)&&(i={typeRef:e}),this._modeling.updateProperties(n,i)};getElement(){return this.props.context.input||this.props.context.output}render(){const e=this.getElement(),t=((0,u.is)(e,"dmn:InputClause")?e.inputExpression:e).typeRef,n=this._dataTypes.getAll().map(e=>({label:this._translate(e),value:e})),i=this._translate("Type");return(0,sn.bF)(1,"div","type-ref-edit context-menu-container",(0,sn.bF)(1,"div","dms-form-control",[(0,sn.bF)(1,"label","dms-label",[i,(0,sn.eW)(":")],0),(0,sn.sO)(2,go,{className:"type-ref-edit-select",label:i,onChange:this.onTypeChange,options:n,value:t})],4),2)}}class vo{constructor(e){e.onGetComponent("context-menu",750,(e={})=>{const{contextMenuType:t}=e;if("input-edit"===t||"output-edit"===t)return yo})}}vo.$inject=["components"];const bo={__depends__:[Ts,Gs],__init__:["typeRefEditingProvider"],typeRefEditingProvider:["type",vo]};class _o extends ke.A{constructor(e,t){super(e),this.postExecuted("element.updateProperties",e=>{const{element:n,properties:i}=e.context,s=(0,u.Xy)(n)?i.inputExpression:i;if(s&&s.typeRef&&"string"!==s.typeRef){const e=(0,u.is)(n,"dmn:LiteralExpression")?n.$parent:n;t.editAllowedValues(e,null)}})}}_o.$inject=["eventBus","modeling"];class xo extends sn.uA{constructor(e,t){super(e,t);const{items:n}=e;this.state={items:n}}componentWillReceiveProps(e){const{items:t}=e;this.setState({items:t})}getRemoveClickHandler=e=>t=>{t.stopPropagation(),this.removeItem(e)};getToggleClickHandler=e=>t=>{t.stopPropagation(),this.toggleItem(e)};removeItem=e=>{const{onChange:t}=this.props,n=this.state.items.filter(t=>t!==e);this.setState({items:n}),t&&t(n)};toggleItem=e=>{const{onChange:t,type:n}=this.props,i=this.state.items.map(t=>(t===e?t.isChecked=!t.isChecked:"radio"===n&&(t.isChecked=!1),t));this.setState({items:i}),t&&t(i)};render(){const{className:e,items:t,type:n,labelComponent:i}=this.props,s=["dms-list-component"];e&&s.push(e);const o=function(e){const t=[];for(let n in e)t.push([n,e[n]]);return t}((0,v.groupBy)(t,"group"));return(0,sn.bF)(1,"div",s.join(" "),o.map(e=>{const t=e[0],s=e[1];return(0,sn.bF)(1,"div","group",[i&&i(t)||(0,sn.bF)(1,"h4","dms-heading",t,0),(0,sn.bF)(1,"ul","items no-wrap",s.map(e=>(0,sn.bF)(1,"li","item",[n&&(0,sn.bF)(64,"input","item-toggle",null,1,{type:n,checked:e.isChecked,onClick:this.getToggleClickHandler(e)}),(0,sn.eW)(""),e.value,e.isRemovable&&(0,sn.bF)(1,"span","remove dmn-icon-clear",null,1,{title:"Remove item",onClick:this.getRemoveClickHandler(e)})],0)),0)],0)}),0)}}class Co extends sn.uA{constructor(e,t){super(e,t);const{validate:n,value:i}=e,s=n?n(i||""):void 0;this.state={validationWarning:s,value:i},this.onInput=this.onInput.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onKeyUp=this.onKeyUp.bind(this)}componentWillReceiveProps(e){const{validate:t,value:n}=e,i=t?t(n||""):void 0;this.setState({validationWarning:i,value:n})}onInput(e){const{onInput:t,validate:n}=this.props,i=n?n(e):void 0;this.setState({validationWarning:i,value:e}),"function"==typeof t&&t&&t({isValid:!i,value:e})}onKeyDown(e){const{target:t}=e,{value:n}=t,{onKeyDown:i,validate:s}=this.props,o=s?s(n):void 0;"function"==typeof i&&i({isValid:!o,value:n,event:e})}onKeyUp(e){const{target:t}=e,{value:n}=t,{onKeyUp:i,validate:s}=this.props,o=s?s(n):void 0;"function"==typeof i&&i({isValid:!o,value:n,event:e})}render(){const{placeholder:e,type:t,className:n,label:i}=this.props,{validationWarning:s,value:o}=this.state,r=["dms-validated-input",n].join(" "),a=[];return s&&a.push("invalid"),(0,sn.bF)(1,"div",r,[(0,sn.sO)(2,eo,{className:a,label:i,onInput:this.onInput,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,placeholder:e||"",type:t,value:o||""}),s&&(0,sn.bF)(1,"p","dms-hint dms-validation-warning",s,0)],0)}}function wo(e){if(!e||function(e){return""===e}(e.trim()))return{values:[]};let t=e.split(",");const n={values:[]};let i="";return t.forEach(e=>{i+=e,/^"[^"]*"$/.test(i.trim())?(n.values.push(i.trim()),i=""):i+=","}),i?void 0:n}class Eo extends sn.uA{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._modeling=t.injector.get("modeling"),this._changeSupport=t.changeSupport;const n=this.getAllowedValuesTarget(),i=wo(n.inputValues&&n.inputValues.text||n.outputValues&&n.outputValues.text||"");this.state=i?{values:i.values.map(e=>({value:e,isCheckable:!1,isRemovable:!0,group:this._translate("Predefined values")})),inputValue:""}:{values:null,inputValue:""}}onElementsChanged=()=>{this.forceUpdate()};componentWillMount(){const e=this.getAllowedValuesTarget();this._changeSupport.onElementsChanged(e.id,this.onElementsChanged)}componentWillUnmount(){const e=this.getAllowedValuesTarget();this._changeSupport.offElementsChanged(e.id,this.onElementsChanged)}setPredefinedValues=e=>{const t=this.getAllowedValuesTarget();this.setState({values:e}),this._modeling.editAllowedValues(t,e&&function(e){return e.map(e=>e.value)}(e))};onListChange=e=>{this.setPredefinedValues(e)};getAllowedValuesTarget(){const e=this.getElement();return(0,u.is)(e,"dmn:LiteralExpression")?e.$parent:e}onInput=({isValid:e,value:t})=>{this.setState({inputValue:t})};onKeyDown=({isValid:e,event:t})=>{if(13===t.keyCode&&(t.stopPropagation(),t.preventDefault(),e)){const{inputValue:e,values:t}=this.state,n=wo(e);this.onListChange((t||[]).concat(n.values.map(e=>({value:e,isCheckable:!1,isRemovable:!0,group:this._translate("Predefined values")})))),this.setState({inputValue:""})}};handleRemovePredifinedValuesClick=e=>{e.stopPropagation(),this.removePredefinedValues()};removePredefinedValues=()=>{this.setPredefinedValues(null)};getElement(){return this.props.context.output||this.props.context.input.inputExpression}render(){const e=this.getElement(),{inputValue:t,values:n}=this.state;return"string"===e.typeRef?(0,sn.bF)(1,"div","context-menu-container allowed-values-edit",(0,sn.bF)(1,"div","dms-form-control",[!So(n)&&n.length>0&&(0,sn.sO)(2,xo,{labelComponent:Do,items:n,onChange:this.onListChange}),!So(n)&&!n.length&&(0,sn.bF)(1,"div",null,[(0,sn.bF)(1,"label","dms-label",this._translate("Predefined values"),0),(0,sn.bF)(1,"span","placeholder",this._translate("No values"),0)],4),!So(n)&&(0,sn.bF)(1,"p","dms-hint",(0,sn.bF)(1,"button","del-values",this._translate("Clear predefined values"),0,{type:"button",onClick:this.handleRemovePredifinedValuesClick}),2),(0,sn.bF)(1,"label","dms-label",this._translate("Add predefined values"),0),(0,sn.sO)(2,Co,{onInput:this.onInput,onKeyDown:this.onKeyDown,placeholder:this._translate('"value", "value", ...'),type:"text",validate:e=>{if(!wo(e))return this._translate("Strings must be in double quotes")},value:t})],0),2):null}}function Do(e){return(0,sn.bF)(1,"label","dms-label",e,0)}function So(e){return null===e}class Ao{constructor(e){e.onGetComponent("context-menu",500,(e={})=>{const{contextMenuType:t}=e;if("input-edit"===t||"output-edit"===t)return Eo})}}Ao.$inject=["components"];const Ro={__init__:["allowedValuesUpdateBehavior","allowedValuesEditingProvider"],allowedValuesUpdateBehavior:["type",_o],allowedValuesEditingProvider:["type",Ao]};class Mo extends sn.uA{constructor(e,t){super(e,t),this._sheet=t.injector.get("sheet"),this._eventBus=t.injector.get("eventBus"),this._changeSupport=t.changeSupport,this._translate=t.injector.get("translate")}onElementsChanged=()=>{this.forceUpdate()};componentWillMount(){const e=this.getRoot();this._changeSupport.onElementsChanged(e.id,this.onElementsChanged)}componentWillUnmount(){const e=this.getRoot();this._changeSupport.offElementsChanged(e.id,this.onElementsChanged)}getRoot(){return this._sheet.getRoot()}handleClick=e=>{e.stopPropagation(),this.add()};add=()=>{this._eventBus.fire("addInput")};render(){return(0,sn.bF)(1,"div","add-input actionable",(0,sn.bF)(1,"button","dmn-icon-plus action-icon",null,1,{title:this._translate("Add input")}),2,{onClick:this.handleClick})}}class Io extends sn.uA{constructor(e,t){super(e,t),this._sheet=t.injector.get("sheet"),this._eventBus=t.injector.get("eventBus"),this._changeSupport=t.changeSupport,this._translate=t.injector.get("translate")}onElementsChanged=()=>{this.forceUpdate()};componentWillMount(){const e=this.getRoot();this._changeSupport.onElementsChanged(e.id,this.onElementsChanged)}componentWillUnmount(){const e=this.getRoot();this._changeSupport.offElementsChanged(e.id,this.onElementsChanged)}getRoot(){return this._sheet.getRoot()}handleClick=e=>{e.stopPropagation(),this.add()};add=()=>{this._eventBus.fire("addOutput")};render(){return(0,sn.bF)(1,"div","add-output actionable",(0,sn.bF)(1,"button","dmn-icon-plus action-icon",null,1,{title:this._translate("Add output")}),2,{onClick:this.handleClick})}}function jo(e,t,n){e.onGetComponent("cell-inner",(e={})=>{const{cellType:t,index:n,inputsLength:i,outputsLength:s}=e;return"input-cell"===t&&n===i-1?Mo:"output-cell"===t&&n===s-1?Io:void 0}),n.on("addInput",()=>{t.trigger("addInput")}),n.on("addOutput",()=>{t.trigger("addOutput")})}jo.$inject=["components","editorActions","eventBus"];const Oo={__depends__:[fs],__init__:["addInputOutputProvider"],addInputOutputProvider:["type",jo]};var ko="Keyboard binding is now implicit; explicit binding to an element got removed. For more information, see https://github.com/bpmn-io/diagram-js/pull/662";class Po{constructor(e,t,n,i,s){this._config=e||{},this._editorActions=n,this._eventBus=t,this._cellSelection=i,this._listeners=[],t.on("table.destroy",this._destroy),t.on("table.init",this._init),t.on("attach",()=>{this._config.bindTo&&console.error("unsupported configuration <keyboard.bindTo>",new Error(ko)),this._target=s.getContainer(),this._config&&!1!==this._config.bind&&this.bind()}),t.on("detach",this.unbind)}_init=()=>{this._registerDefaultBindings(),this._fire("init")};_destroy=()=>{this._fire("destroy"),this.unbind(),this._listeners=null};_keyHandler=e=>{var t,n,i=this._listeners,s=e.keyCode||e.charCode||-1;for(t=0;n=i[t];t++)if(n(s,e))return e.preventDefault(),void e.stopPropagation()};bind(e){e&&console.error("unsupported argument <node>",new Error(ko)),this.unbind(),e=this._node=this._target,Q.f0.bind(e,"keydown",this._keyHandler),this._fire("bind")}getBinding(){return this._node}unbind=()=>{var e=this._node;e&&(this._fire("unbind"),Q.f0.unbind(e,"keydown",this._keyHandler)),this._node=null};_fire(e){this._eventBus.fire("keyboard."+e,{node:this._node,listeners:this._listeners})}_registerDefaultBindings(){var e=this._listeners,t=this._editorActions,n=this._cellSelection;e.push(function(e,n){if(Ns(n)&&!$s(n)&&90===e)return t.trigger("undo"),!0}),e.push(function(e,n){if(Ns(n)&&(89===e||90===e&&$s(n)))return t.trigger("redo"),!0}),e.push(function(e,n){if(13===e&&!Ns(n)&&$s(n)&&zi(n.target))return t.trigger("selectCellAbove"),!0}),e.push(function(e,i){if(13!==e||Ns(i)||$s(i))return;if(!zi(i.target))return;const s=t.trigger("selectCellBelow"),o=n.getCellSelection();if(!s&&o&&"__decisionProperties_name"!==o){const e=t.trigger("addRule");return t.trigger("selectCellBelow"),e}return!0})}addListener(e){this._listeners.unshift(e)}removeListener(e){this._listeners=this._listeners.filter(t=>t!==e)}}Po.$inject=["config.keyboard","eventBus","editorActions","cellSelection","renderer"];const Fo={__depends__:[fs],__init__:["keyboard"],keyboard:["type",Po]},To={__depends__:[Oo,Ro,Ts,As,Hn,Yn,Fo,bo],__init__:["inputEditingProvider","outputEditingProvider"],inputEditingProvider:["type",mo],outputEditingProvider:["type",oo]};function No(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class $o{constructor(e,t,n,i){No(this,"handleDragOver",e=>{Lo(e);const t=e.target,n=(0,Q.kp)(t,".dmn-decision-table-container td,\n   .dmn-decision-table-container th",!0);let i=!!n;const{hoverEl:s}=this._dragContext;s&&s!==n&&(this._emit("dragAndDrop.dragLeave",e),this._dragContext.targetEl=null,this._dragContext.hoverEl=null),n&&(n!==s&&(this._dragContext.hoverEl=n,i=this._emit("dragAndDrop.dragEnter",e),!1!==i&&(this._dragContext.targetEl=n)),i=this._emit("dragAndDrop.dragOver",e)),e.dataTransfer.dropEffect=!1!==i?"move":"none"}),No(this,"handleDrop",e=>{Lo(e);const t=this._emit("dragAndDrop.drop",e);if(t){const{draggedElement:e}=this._dragContext;if(e instanceof Gt){const{rows:n}=this._sheet.getRoot();let i=n.indexOf(t);this._modeling.moveRow(e,i)}else if(e instanceof Ht){const{cols:n}=this._sheet.getRoot();let i=n.indexOf(t);this._modeling.moveCol(e,i)}}this.handleDragEnd(e)}),No(this,"handleDragEnd",e=>{Lo(e),this._unbindListeners(),this._emit("dragAndDrop.dragEnd",e),this._dragContext=null}),this._eventBus=e,this._renderer=t,this._modeling=n,this._sheet=i,this._dragContext=null,e.on("table.destroy",()=>{this._unbindListeners()})}_bindListeners(){Q.f0.bind(document,"dragover",this.handleDragOver),Q.f0.bind(document,"drop",this.handleDrop),Q.f0.bind(document,"dragend",this.handleDragEnd)}_unbindListeners(){Q.f0.unbind(document,"dragover",this.handleDragOver),Q.f0.unbind(document,"drop",this.handleDrop),Q.f0.unbind(document,"dragend",this.handleDragEnd)}_emit(e,t){return this._eventBus.fire(e,{dragContext:this._dragContext,originalEvent:t})}startDrag(e,t){Lo(t,!0),t.dataTransfer.effectAllowed="move",t.dataTransfer.setData&&t.dataTransfer.setData("text","__DUMMY"),this._dragContext={draggedElement:e},this._bindListeners(),this._emit("dragAndDrop.dragStart",t)}}function Lo(e,t){e.stopPropagation(),!0!==t&&e.preventDefault()}$o.$inject=["eventBus","renderer","modeling","sheet"];const Bo={__init__:["dragAndDrop"],dragAndDrop:["type",$o]},Vo="top",Uo="left";class zo{constructor(e,t,n,i,s,o,r,a){this._elementRegistry=t,this._dragAndDrop=i,this._renderer=s,this._rules=o,this._sheet=r,this._translate=a,e.onGetComponent("cell-inner",({cellType:e,col:t,row:n})=>{if("rule-index"===e)return()=>(0,sn.bF)(1,"span","dmn-icon-drag vertical",(0,sn.eW)(""),2,{draggable:"true",onDragStart:e=>this.startDrag(n,e),title:this._translate("Move rule")});if("input-cell"===e||"output-cell"===e){let e="Move "+((0,u.Xy)(t)?"Input":"Output");return()=>(0,sn.bF)(1,"span","dmn-icon-drag horizontal",null,1,{draggable:"true",onDragStart:e=>this.startDrag(t,e),title:e})}}),n.on("dragAndDrop.dragEnter",e=>{const{dragContext:t}=e,{draggedElement:n,hoverEl:i}=t;if(n instanceof Gt)return!0;if(n instanceof Ht){const e=function(e,t,n){const i=t.get(e.dataset.colId);if(!i)return-1;const{cols:s}=n.getRoot();return s.indexOf(i)}(i,this._elementRegistry,this._sheet);return-1!==e&&this._rules.allowed("col.move",{col:n,index:e})}return!1}),n.on("dragAndDrop.dragLeave",e=>{const{dragContext:t}=e,{targetEl:n}=t;n&&Ko(this._renderer.getContainer())}),n.on("dragAndDrop.dragOver",e=>{const{dragContext:t,originalEvent:n}=e,{draggedElement:i,lastPosition:s,targetEl:o}=t,r=this._renderer.getContainer();if(!o)return!1;let a;return i instanceof Gt&&(a=qo(n,o)),i instanceof Ht&&(a=Wo(n,o)),s===a||(Ko(r),i instanceof Gt&&function(e,t,n){const i=e.dataset.rowId;if(!i)return;const s=(0,Q.YG)(`[data-row-id=${i}]`,t);(0,v.forEach)(s,e=>{Go(e)&&((0,Q.Ly)(e).add("dragover"),(0,Q.Ly)(e).add(n))})}(o,r,a===Vo?"top":"bottom"),i instanceof Ht&&function(e,t,n){const i=e.dataset.colId;if(!i)return;const s=(0,Q.YG)(`[data-col-id=${i}]`,t);(0,v.forEach)(s,e=>{Go(e)&&((0,Q.Ly)(e).add("dragover"),(0,Q.Ly)(e).add(n))})}(o,r,a===Uo?"left":"right"),t.lastPosition=a),!0}),n.on("dragAndDrop.drop",e=>{const{dragContext:t,originalEvent:n}=e,{draggedElement:i,targetEl:s}=t;if(!s)return!1;if(i instanceof Gt){const e=qo(n,s),t=s.dataset.rowId,o=this._elementRegistry.get(t);if(!o||o===i)return;const r=function(e,t,n,i){return i.indexOf(e)>i.indexOf(t)&&(t=function(e,t){const n=t.indexOf(e);return t[Math.min(t.length-1,n+1)]}(t,i)),n===Vo?function(e,t){const n=t.indexOf(e);return t[Math.max(0,n-1)]}(t,i):t}(i,o,e,this._sheet.getRoot().rows);if(r===i)return;return r}if(i instanceof Ht){const e=Wo(n,s),t=s.dataset.colId,o=this._elementRegistry.get(t);if(!o||o===i)return;const r=function(e,t,n,i){return i.indexOf(e)>i.indexOf(t)&&(t=function(e,t){const n=t.indexOf(e);if((0,u.Xy)(e)){const e=t.filter(e=>(0,u.Xy)(e)),i=e[e.length-1],s=t.indexOf(i);return t[Math.min(s,n+1)]}return t[Math.min(t.length-1,n+1)]}(t,i)),n===Uo?function(e,t){const n=t.indexOf(e);if((0,u.Mz)(e)){const e=t.filter(e=>(0,u.Mz)(e))[0],i=t.indexOf(e);return t[Math.max(i,n-1)]}return t[Math.max(0,n-1)]}(t,i):t}(i,o,e,this._sheet.getRoot().cols);if(r===i)return;return r}}),n.on("dragAndDrop.dragEnd",this._cleanup)}startDrag(e,t){const n=this._renderer.getContainer();this._dragImage=te()('<span style="\n          visibility: hidden;\n          position: fixed;\n          top: -10000px\n      "></span>'),document.body.appendChild(this._dragImage),t.dataTransfer.setDragImage&&t.dataTransfer.setDragImage(this._dragImage,0,0),e instanceof Gt?function(e,t){const n=(0,Q.YG)(`[data-row-id=${e.id}]`,t);(0,v.forEach)(n,e=>{Go(e)&&(0,Q.Ly)(e).add("dragged")})}(e,n):e instanceof Ht&&function(e,t){const n=(0,Q.YG)(`[data-col-id=${e.id}]`,t);(0,v.forEach)(n,e=>{Go(e)&&(0,Q.Ly)(e).add("dragged")})}(e,n),this._dragAndDrop.startDrag(e,t)}_cleanup=()=>{const e=this._renderer.getContainer();Ko(e),function(e){const t=(0,Q.YG)(".dragged",e);(0,v.forEach)(t,e=>{Go(e)&&(0,Q.Ly)(e).remove("dragged")})}(e),this._dragImage&&((0,Q.TF)(this._dragImage),this._dragImage=null)}}function Ko(e){const t=(0,Q.YG)(".dragover",e);(0,v.forEach)(t,e=>{Go(e)&&((0,Q.Ly)(e).remove("dragover"),(0,Q.Ly)(e).remove("top"),(0,Q.Ly)(e).remove("right"),(0,Q.Ly)(e).remove("bottom"),(0,Q.Ly)(e).remove("left"))})}function Wo(e,t){const n=t.getBoundingClientRect();return e.clientX<n.left+n.width/2?Uo:"right"}function qo(e,t){const n=t.getBoundingClientRect();return e.clientY<n.top+n.height/2?Vo:"bottom"}function Go(e){return e&&(1===e.nodeType||11==e.nodeType)}zo.$inject=["components","elementRegistry","eventBus","dragAndDrop","renderer","rules","sheet","translate"];const Ho={__depends__:[Bo,Ji],__init__:["dmnDragAndDrop"],dmnDragAndDrop:["type",zo]};class Xo extends sn.uA{constructor(e,t){super(e,t),this._elementRegistry=t.injector.get("elementRegistry"),this._modeling=t.injector.get("modeling"),this._changeSupport=this.context.changeSupport;const{id:n}=this.props.context;this._element=this._elementRegistry.get(n)}onElementsChanged=()=>{this.forceUpdate()};componentWillMount(){this._element&&this._changeSupport.onElementsChanged(this._element.id,this.onElementsChanged)}componentDidMount(){const{autoFocus:e}=this.props.context;var t;e&&this.node&&(t=this.node,(0,Q.P)(".content-editable",t)).focus()}componentWillUnmount(){if(this._element){this._changeSupport.offElementsChanged(this._element.id,this.onElementsChanged);const{businessObject:e}=this._element,{description:t}=e;(0,v.isString)(t)&&!t.length&&this.changeDescription(null)}}changeDescription=e=>{this._modeling.updateProperties(this._element,{description:e})};render(){if(!this._element)return;const{businessObject:e}=this._element,{description:t}=e;return(0,v.isString)(t)?(0,sn.bF)(1,"div","context-menu-container description-editor",(0,sn.sO)(2,Yo,{className:"dms-input",onChange:this.changeDescription,value:t}),2,null,null,e=>this.node=e):void 0}}class Yo extends Cs{render(){return(0,sn.bF)(1,"div",this.getClassName(),this.getEditor(),0)}}class Jo{constructor(e,t,n,i,s,o,r){this._contextMenu=t,this._modeling=s,this._renderer=o,this._translate=r,i.on("cell.click",750,e=>{if(e.defaultPrevented)return;const{target:i,id:s}=e,r=n.get(s);if(!(0,u.f7)(r,["dmn:UnaryTests","dmn:LiteralExpression"]))return;Qo(r)||e.preventDefault();const a=Zo(o.getContainer(),i.getBoundingClientRect());t.open(a,{contextMenuType:"cell-description",autoFocus:!1,id:s,offset:{x:4,y:4}})}),e.onGetComponent("context-menu",(e={})=>{if(e.contextMenuType&&"cell-description"===e.contextMenuType){const t=Qo(n.get(e.id));if((0,v.isString)(t))return Xo}}),e.onGetComponent("context-menu-cell-additional",500,(e={})=>{if(e.contextMenuType&&"context-menu"===e.contextMenuType){const{id:t}=e;if(!t)return;const i=n.get(t);if(!i)return;const{businessObject:s}=i,{description:o}=s,r=(0,v.isString)(o),a=r?"remove-description":"add-description",l=r?()=>this.removeDescription(i):()=>this.addDescription(i);return(0,sn.bF)(1,"div",`context-menu-group-entry ${a}`,(0,v.isString)(o)?this._translate("Remove cell description"):this._translate("Add cell description"),0,{onClick:l})}})}addDescription=e=>{this._modeling.updateProperties(e,{description:""});const t=this._renderer.getContainer(),n=Zo(t,Ui(e.id,t).getBoundingClientRect());this._contextMenu.open(n,{contextMenuType:"cell-description",id:e.id,autoFocus:!0,offset:{x:4,y:4}})};removeDescription=e=>{this._modeling.updateProperties(e,{description:null}),this._contextMenu.close()}}function Zo(e,t){const{top:n,left:i,width:s,height:o}=t;return{x:i+e.parentNode.scrollLeft-26,y:n+e.parentNode.scrollTop,width:s+52,height:o}}function Qo(e){return e&&e.businessObject&&e.businessObject.description}Jo.$inject=["components","contextMenu","elementRegistry","eventBus","modeling","renderer","translate"];const er={__depends__:[Ts,xi],__init__:["description"],description:["type",Jo]};class tr{constructor(e,t,n,i,s,o){this._modeling=n,this._translate=s,this._expressionLanguages=i,e.onGetComponent("context-menu-cell-additional",(e={})=>{if(e.contextMenuType&&"context-menu"===e.contextMenuType){const{event:n,id:i}=e;if(!i)return;const s=t.get(i);if(!s)return;if(!this._shouldDisplayContextMenuEntry(s))return;const r=e=>{o.open({x:(n||e).pageX,y:(n||e).pageY},{contextMenuType:"expression-language",id:i})};return(0,sn.bF)(1,"div","context-menu-group-entry",this._translate("Change cell expression language"),0,{onClick:r})}}),e.onGetComponent("context-menu",(e={})=>{if(e.contextMenuType&&"expression-language"===e.contextMenuType){const{id:n}=e;if(!n)return;const s=t.get(n);if(!s)return;const o=this._getElementExpressionLanguage(s),r=i.getAll(),a="context-menu-group-entry context-menu-entry-set-expression-language",l=this._translate("Expression language");return()=>(0,sn.bF)(1,"div","context-menu-flex",(0,sn.bF)(1,"div","context-menu-group",(0,sn.bF)(1,"div",a,[(0,sn.bF)(1,"div",null,l,0),(0,sn.sO)(2,go,{label:l,className:"expression-language",onChange:e=>this.onChange(s,e),options:r,value:o})],4),2),2)}}),e.onGetComponent("context-menu",(e={})=>{if("input-edit"===e.contextMenuType)return()=>{const{inputExpression:t}=e.input;if(!this._shouldDisplayContextMenuEntry(t))return;const n=this._getElementExpressionLanguage(t),s=i.getAll(),o=this._translate("Expression language");return(0,sn.bF)(1,"div","context-menu-container ref-language",(0,sn.bF)(1,"div","dms-form-control",[(0,sn.bF)(1,"label","dms-label",o,0),(0,sn.sO)(2,go,{label:o,className:"ref-language",value:n||"",onChange:e=>this.onChange(t,e),options:s})],4),2)}})}onChange(e,t){this._modeling.editExpressionLanguage(e,t)}_shouldDisplayContextMenuEntry(e){return this._expressionLanguages.getAll().length>1||this._getElementExpressionLanguage(e)!==this._getDefaultElementExpressionLanguage(e)}_getElementExpressionLanguage(e){return(0,u.Cf)(e).expressionLanguage||this._getDefaultElementExpressionLanguage(e)}_getDefaultElementExpressionLanguage(e){return this._expressionLanguages.getDefault((0,u.Xy)(e.col)?"inputCell":"outputCell").value}}tr.$inject=["components","elementRegistry","modeling","expressionLanguages","translate","contextMenu"];const nr={__depends__:[Hn],__init__:["expressionLanguage"],expressionLanguage:["type",tr]};class ir extends sn.uA{constructor(e,t){super(e,t),fn(this)}componentWillMount(){this.setupChangeListeners({bind:this.getBusinessObject().id})}componentWillUnmount(){this.setupChangeListeners({unbind:this.getBusinessObject().id})}setupChangeListeners({bind:e,unbind:t}){"string"==typeof t&&this.changeSupport.offElementsChanged(t,this.onElementsChanged),"string"==typeof e&&this.changeSupport.onElementsChanged(e,this.onElementsChanged)}getBusinessObject(){return this.sheet.getRoot().businessObject.$parent}onElementsChanged=()=>{this.forceUpdate()};setDecisionTableName=e=>{this.modeling.editDecisionTableName(e)};render(){const e=this.getBusinessObject(),{name:t}=e,n=this.components.getComponent("hit-policy")||or;return(0,sn.bF)(1,"div","decision-table-properties",[(0,sn.sO)(2,sr,{label:this.translate("Decision name"),className:"decision-table-name",value:t,ctrlForNewline:!0,onBlur:rr,onChange:this.setDecisionTableName,elementId:"__decisionProperties_name",coords:"0:__decisionProperties"}),(0,sn.bF)(1,"div","decision-table-header-separator"),(0,sn.sO)(2,n)],4)}}ir.$inject=["sheet","modeling","changeSupport","components","translate"];class sr extends Cs{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),vn(this,Dn)}render(){const e=this.props.value,t=wn(this.getSelectionClasses(),this.getClassName());return(0,sn.bF)(1,"div",t,this.getEditor(),0,{"data-element-id":this.props.elementId,"data-coords":this.props.coords,title:this._translate("Decision name: ")+e})}}function or(){return null}function rr(e){e.target.scroll(0,0)}class ar{constructor(e){e.onGetComponent("table.before",500,()=>ir)}}ar.$inject=["components"];const lr={__depends__:[As],__init__:["decisionTableProperties"],decisionTableProperties:["type",ar]};class cr extends sn.uA{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),fn(this)}onChange=({aggregation:e,hitPolicy:t})=>{this.modeling.editHitPolicy(t,e)};onElementsChanged=()=>{this.forceUpdate()};componentDidMount(){this.changeSupport.onElementsChanged(this.getRoot().id,this.onElementsChanged)}componentWillUnmount(){this.changeSupport.offElementsChanged(this.getRoot().id,this.onElementsChanged)}getRoot(){return this.sheet.getRoot()}render(){const e=this.getRoot().businessObject,{aggregation:t,hitPolicy:n}=e,i=(0,v.find)(ni,e=>{return i=e.value,s={aggregation:t,hitPolicy:n},i.hitPolicy===s.hitPolicy&&i.aggregation===s.aggregation;var i,s});return(0,sn.bF)(1,"div","hit-policy",[(0,sn.bF)(1,"label","dms-label",this._translate("Hit policy:"),0),(0,sn.sO)(2,go,{className:"hit-policy-edit-policy-select",label:this._translate("Hit policy"),onChange:this.onChange,options:ni.map(e=>({...e,label:this._translate(e.label)})),value:i.value,"data-hit-policy":"true",noInput:!0})],4,{title:this._translate(i.explanation)})}}function ur(e){e.onGetComponent("hit-policy",()=>cr)}cr.$inject=["changeSupport","sheet","modeling"],ur.$inject=["components"];const dr={__depends__:[Ts],__init__:["hitPolicyProvider"],hitPolicyProvider:["type",ur]};class pr extends ke.A{constructor(e,t){super(e),this.executed(["row.add","row.remove","col.add","col.remove"],hr(e=>{var t=e.context,n=t.row||t.col;this.updateRoot(n,t.oldRoot)})),this.reverted(["row.add","row.remove","col.add","col.remove"],hr(e=>{var t=e.context,n=t.row||t.col;this.updateRoot(n,t.newRoot)}))}updateRoot(e,t){var n=e.root,i=e.businessObject;if((0,u.is)(e,"dmn:DecisionRule")){if(t){let e=t.businessObject.get("rule"),n=e.indexOf(i);e.splice(n,1),i.$parent=null}if(n){let t=n.businessObject,s=n.rows.indexOf(e);t.get("rule").splice(s,0,i),i.$parent=t,e.cells.forEach((t,n)=>{this.wireCell(t,e,n)})}}if((0,u.is)(e,"dmn:InputClause")||(0,u.is)(e,"dmn:OutputClause")){let s,o;if(t){let n=t.businessObject,r=n.get("input"),a=n.get("output");if((0,u.is)(e,"dmn:InputClause")&&(s=r,o=r.indexOf(i)),(0,u.is)(e,"dmn:OutputClause")&&(s=a,o=a.indexOf(i)),-1===o)throw new Error("inconsistent model: clause not in table");s.splice(o,1),i.$parent=null,e.cells.forEach((e,n)=>{this.unwireCell(e,t.rows[n])})}if(n){let t,s,o=n.businessObject,r=o.get("input"),a=o.get("output"),l=n.cols.indexOf(e);(0,u.is)(e,"dmn:InputClause")&&(s=r,t=l),(0,u.is)(e,"dmn:OutputClause")&&(s=a,t=l-r.length),s.splice(t,0,i),i.$parent=o,e.cells.forEach((e,t)=>{this.wireCell(e,n.rows[t],l)})}}}unwireCell(e,t){var n=e.businessObject;let i,s,o=t.businessObject,r=o.get("inputEntry"),a=o.get("outputEntry");if((0,u.is)(e,"dmn:UnaryTests")&&(i=r),(0,u.is)(e,"dmn:LiteralExpression")&&(i=a),s=i.indexOf(n),-1===s)throw new Error("cell not in row");i.splice(s,1),n.$parent=null}wireCell(e,t,n){var i=e.businessObject;let s,o,r=t.businessObject,a=r.get("inputEntry"),l=r.get("outputEntry");i.$parent!==r&&((0,u.is)(e,"dmn:UnaryTests")&&(s=a,o=n),(0,u.is)(e,"dmn:LiteralExpression")&&(s=l,o=n-a.length),s.splice(o,0,i),i.$parent=r)}}function hr(e){return function(t){var n=t.context,i=n.row||n.col;(0,u.is)(i,"dmn:DMNElement")&&e(t)}}pr.$inject=["eventBus","sheet"];class mr{constructor(e){this._model=e}create(e,t={}){var n=this._model.create(e,t||{});return(0,u.is)(n,"dmn:InputClause")&&(t.inputExpression?n.inputExpression=t.inputExpression:(n.inputExpression=this.create("dmn:LiteralExpression",{typeRef:"string"}),n.inputExpression.$parent=n)),(0,u.is)(n,"dmn:OutputClause")&&(n.typeRef=t.typeRef||"string"),((0,u.is)(n,"dmn:UnaryTests")||(0,u.is)(n,"dmn:LiteralExpression"))&&(n.text=t.text||""),this._ensureId(n),n}_needsId(e){return(0,u.is)(e,"dmn:DMNElement")}_ensureId(e){var t=(e.$type||"").replace(/^[^:]*:/g,"")+"_";!e.id&&this._needsId(e)&&(e.id=this._model.ids.nextPrefixed(t,e))}}mr.$inject=["moddle"];class gr extends Zt{constructor(e){super(),this._dmnFactory=e}create(e,t){const n=this._dmnFactory;let{businessObject:i,type:s,...o}=t;if(!i){if(!s){if("root"===e)s="dmn:DecisionTable";else if("cell"===e){let{col:e}=o;(0,u.is)(e,"dmn:OutputClause")&&(s="dmn:LiteralExpression"),(0,u.is)(e,"dmn:InputClause")&&(s="dmn:UnaryTests")}if(!s)throw new Error("cannot guess <type>")}i=n.create(s)}return super.create(e,{businessObject:i,id:i.id,...o})}}gr.$inject=["dmnFactory"];class fr{constructor(e,t){this._sheet=e,this._elementFactory=t}execute(e){const t=this._sheet,n=this._elementFactory,i=t.getRoot();let{row:s,index:o}=e;return void 0===o&&(o=e.index=i.rows.length),e.newRoot=i,s.cells.length||i.cols.forEach((e,t)=>{const i=n.create("cell",{row:s,col:e});s.cells[t]=i}),t.addRow(s,o),t.getRoot()}revert(e){const{row:t}=e,n=this._sheet;return n.removeRow(t),n.getRoot()}}fr.$inject=["sheet","elementFactory"];class yr{constructor(e){this._sheet=e}execute(e){const t=this._sheet,n=t.getRoot();let{row:i}=e;const s=e.oldIndex=n.rows.indexOf(i);if(e.oldRoot=i.root,-1===s)throw new Error(`row#${i.id} not in sheet`);return t.removeRow(i),t.getRoot()}revert(e){const{row:t,oldIndex:n}=e,i=this._sheet;return i.addRow(t,n),i.getRoot()}}yr.$inject=["sheet"];class vr{constructor(e){this._modeling=e}preExecute(e){let{row:t}=e;this._modeling.removeRow(t)}postExecute(e){let{row:t,index:n}=e;this._modeling.addRow(t,n)}}vr.$inject=["modeling"];class br{constructor(e,t){this._sheet=e,this._elementFactory=t}execute(e){const t=this._sheet,n=this._elementFactory,i=t.getRoot();let{col:s,index:o}=e;return void 0===o&&(o=e.index=i.cols.length),e.newRoot=i,s.cells.length||i.rows.forEach((e,t)=>{const i=n.create("cell",{row:e,col:s});s.cells[t]=i}),t.addCol(s,o),t.getRoot()}revert(e){const{col:t}=e,n=this._sheet;return n.removeCol(t),n.getRoot()}}br.$inject=["sheet","elementFactory"];class _r{constructor(e,t){this._sheet=e,this._elementFactory=t}execute(e){const t=this._sheet;let{col:n}=e;const i=e.oldRoot=n.root;if(-1===(e.oldIndex=i.cols.indexOf(n)))throw new Error(`col#${n.id} not in sheet`);return t.removeCol(n),t.getRoot()}revert(e){const{col:t,oldIndex:n}=e,i=this._sheet;return i.addCol(t,n),i.getRoot()}}_r.$inject=["sheet","elementFactory"];class xr{constructor(e){this._modeling=e}preExecute(e){let{col:t}=e;this._modeling.removeCol(t)}postExecute(e){let{col:t,index:n}=e;this._modeling.addCol(t,n)}}xr.$inject=["modeling"];class Cr{execute(e){let{cell:t}=e;return t}revert(e){const{cell:t}=e;return t}}class wr{constructor(e,t,n){this._eventBus=e,this._elementFactory=t,this._commandStack=n,e.on("table.init",()=>{!function(e,t){(0,v.forEach)(e,function(e,n){t.registerHandler(n,e)})}(this.getHandlers(),n)})}getHandlers(){return wr._getHandlers()}static _getHandlers(){return{"row.add":fr,"row.remove":yr,"row.move":vr,"col.add":br,"col.remove":_r,"col.move":xr,"cell.edit":Cr}}_create(e,t){return t instanceof qt?t:this._elementFactory.create(e,t)}addRow(e,t){const n=this._create("row",e),i={row:n,index:t};return this._commandStack.execute("row.add",i),n}removeRow(e){this._commandStack.execute("row.remove",{row:e})}moveRow(e,t){const n={row:e,index:t};this._commandStack.execute("row.move",n)}addCol(e,t){const n=this._create("col",e),i={col:n,index:t};return this._commandStack.execute("col.add",i),n}removeCol(e){this._commandStack.execute("col.remove",{col:e})}moveCol(e,t){const n={col:e,index:t};this._commandStack.execute("col.move",n)}editCell(e,t){const n={cell:e,...t};this._commandStack.execute("cell.edit",n)}}wr.$inject=["eventBus","elementFactory","commandStack"];class Er{constructor(e,t,n){this._dmnFactory=e,this._moddle=t,this._modeling=n}execute(e){const{element:t,allowedValues:n}=e;return(0,u.is)(t,"dmn:InputClause")?(t.inputValues?e.oldAllowedValues=t.inputValues.text:Dr(n)||(t.inputValues=this._dmnFactory.create("dmn:UnaryTests",{text:""})),Dr(n)?t.inputValues&&delete t.inputValues:t.inputValues.text=n.join(",")):(t.outputValues&&t?e.oldAllowedValues=t.outputValues.text:Dr(n)||(t.outputValues=this._dmnFactory.create("dmn:UnaryTests",{text:""})),Dr(n)?t.outputValues&&delete t.outputValues:t.outputValues.text=n.join(",")),t}revert(e){const{element:t,oldAllowedValues:n}=e;return(0,u.is)(t,"dmn:InputClause")?n?(t.inputValues||(t.inputValues=this._dmnFactory.create("dmn:UnaryTests",{text:""})),t.inputValues.text=n):delete t.inputValues:n?(t.outputValues||(t.outputValues=this._dmnFactory.create("dmn:UnaryTests",{text:""})),t.outputValues.text=n):delete t.outputValues,t}}function Dr(e){return null===e}Er.$inject=["dmnFactory","moddle","modeling"];const Sr="id";class Ar{constructor(e,t){this._elementRegistry=e,this._moddle=t}execute(e){const{element:t,properties:n}=e,i=(0,u.Cf)(t),{changed:s,oldProperties:o}=this.updateProperties(i,n);return e.oldProperties=o,[...s,t]}revert(e){const{element:t,oldProperties:n}=e;var i=(0,u.Cf)(t),{changed:s}=this.updateProperties(i,n);return[...s,t]}updateProperties(e,t){const n=this._moddle.ids;return(0,v.reduce)(t,(t,i,s)=>{const o=e.get(s);if(Rr(i)){if(!Rr(o))throw new Error(`non-existing property <${s}>: cannot update values`);let{changed:e,oldProperties:n}=this.updateProperties(o,i);return{changed:[...t.changed,...e,o],oldProperties:{...t.oldProperties,[s]:n}}}var r;return s===Sr&&(r=i,e[Sr]!==r)&&(n.unclaim(e[Sr]),this._elementRegistry.updateId(e,i),n.claim(i,e)),e.set(s,i),{changed:t.changed,oldProperties:{...t.oldProperties,[s]:o}}},{changed:[],oldProperties:{}})}}function Rr(e){return(0,v.isDefined)(e)&&(0,v.isObject)(e)}Ar.$inject=["elementRegistry","moddle"];class Mr{constructor(e){this._moddle=e}execute(e){const t=this._moddle.ids,n=e.id,i=e.element;e.claiming?t.claim(n,i):t.unclaim(n)}revert(e){const t=this._moddle.ids,n=e.id,i=e.element;e.claiming?t.unclaim(n):t.claim(n,i)}}Mr.$inject=["moddle"];class Ir extends wr{constructor(e,t,n,i){super(e,t,n),this._eventBus=e,this._elementFactory=t,this._commandStack=n,this._sheet=i}getHandlers(){return Ir._getHandlers()}static _getHandlers(){return(0,v.assign)({},super._getHandlers(),{editAllowedValues:Er,"element.updateProperties":Ar,"id.updateClaim":Mr})}editDecisionTableName(e){const t={element:this._sheet.getRoot().businessObject.$parent,properties:{name:e}};this._commandStack.execute("element.updateProperties",t)}editDecisionTableId(e){const t={element:this._sheet.getRoot().businessObject.$parent,properties:{id:e}};this._commandStack.execute("element.updateProperties",t)}editHitPolicy(e,t){const n={element:this._sheet.getRoot().businessObject,properties:{hitPolicy:e,aggregation:t}};this._commandStack.execute("element.updateProperties",n)}updateProperties(e,t){const n={element:e,properties:t};this._commandStack.execute("element.updateProperties",n)}editInputExpression(e,t){const n={element:e,properties:t};this._commandStack.execute("element.updateProperties",n)}editOutputName(e,t){const n={element:e,properties:{name:t}};this._commandStack.execute("element.updateProperties",n)}editInputExpressionTypeRef(e,t){const n={element:e,properties:{typeRef:t}};this._commandStack.execute("element.updateProperties",n)}editOutputTypeRef(e,t){const n={element:e,properties:{typeRef:t}};this._commandStack.execute("element.updateProperties",n)}editCell(e,t){const n={element:e,properties:{text:t}};this._commandStack.execute("element.updateProperties",n)}editAnnotation(e,t){const n={element:e,properties:{description:t}};this._commandStack.execute("element.updateProperties",n)}editAllowedValues(e,t){const n={element:e,allowedValues:t};this._commandStack.execute("editAllowedValues",n)}editExpressionLanguage(e,t){const n={element:e,properties:{expressionLanguage:t}};this._commandStack.execute("element.updateProperties",n)}claimId(e,t){const n={id:e,element:t,claiming:!0};this._commandStack.execute("id.updateClaim",n)}unclaimId(e,t){const n={id:e,element:t};this._commandStack.execute("id.updateClaim",n)}}Ir.$inject=["eventBus","elementFactory","commandStack","sheet"];class jr extends ke.A{constructor(e,t,n){super(e),this._ids=t.ids,this._modeling=n,this.preExecute(["row.add","col.add"],e=>{const t=e.context,n=t.row||t.col;this.claimId(n.businessObject),n.cells&&n.cells.forEach(e=>this.claimId(e.businessObject))})}claimId(e){e.id&&!this._ids.assigned(e.id)&&this._modeling.claimId(e.id,e),e.$descriptor.properties.forEach(t=>{const n=e[t.name];n&&((0,v.isArray)(n)&&n.forEach(e=>this.claimId(e)),n.$type&&this.claimId(n))})}}jr.$inject=["eventBus","moddle","modeling"];class Or extends ke.A{constructor(e,t){super(e),this._modeling=t,this.preExecute(["row.remove","col.remove"],e=>{const t=e.context,n=t.row||t.col;this.unclaimId(n.businessObject),n.cells&&n.cells.forEach(e=>this.unclaimId(e.businessObject))})}unclaimId(e){e.id&&this._modeling.unclaimId(e.id,e),e.$descriptor.properties.forEach(t=>{const n=e[t.name];n&&((0,v.isArray)(n)&&n.forEach(e=>this.unclaimId(e)),n.$type&&this.unclaimId(n))})}}Or.$inject=["eventBus","modeling"];const kr={__init__:["dmnUpdater","idChangeBehavior","nameChangeBehavior","modeling"],__depends__:[{__init__:["idClaimBehavior","idUnclaimBehavior"],idClaimBehavior:["type",jr],idUnclaimBehavior:["type",Or]},Se.A],dmnUpdater:["type",pr],dmnFactory:["type",mr],elementFactory:["type",gr],idChangeBehavior:["type",Le],nameChangeBehavior:["type",Be],modeling:["type",Ir]};class Pr extends sn.uA{constructor(e,t){super(e,t),this.changeCellValue=this.changeCellValue.bind(this),this.onElementsChanged=this.onElementsChanged.bind(this)}onElementsChanged(){this.forceUpdate()}componentWillMount(){const{injector:e}=this.context,{cell:t}=this.props,n=this._changeSupport=this.context.changeSupport;this._modeling=e.get("modeling"),n.onElementsChanged(t.id,this.onElementsChanged)}componentWillUnmount(){const{cell:e}=this.props;this._changeSupport.offElementsChanged(e.id,this.onElementsChanged)}changeCellValue(e){const{cell:t}=this.props;this._modeling.editCell(t.businessObject,e)}render(){const{cell:e,rowIndex:t,row:n,col:i,colIndex:s}=this.props,o=(0,u.is)(e,"dmn:UnaryTests"),r=e.businessObject;return(0,sn.sO)(2,An,{className:o?"input-cell":"output-cell",elementId:e.id,coords:`${t}:${s}`,"data-row-id":n.id,"data-col-id":i.id,children:(0,sn.sO)(2,Tr,{placeholder:o?"-":"",onChange:this.changeCellValue,value:r.text,businessObject:r})})}}class Fr extends sn.uA{constructor(e,t){super(e,t),this.state={focussed:!1},this.onFocus=this.onFocus.bind(this),this.onBlur=this.onBlur.bind(this)}onFocus(){this.setState({focussed:!0})}onBlur(){this.setState({focussed:!1})}render(){const{focussed:e}=this.state,t="feel-editor"+(e?" focussed":"");return(0,sn.bF)(1,"div",t,[e&&(0,sn._B)((0,sn.sO)(2,co,{...this.props,autoFocus:!0,onBlur:this.onBlur})),(0,sn._B)((0,sn.sO)(2,_s,{...this.props,onInput:()=>{},onFocus:this.onFocus}))],0,{onClick:this.onFocus})}}class Tr extends sn.uA{constructor(e,t){super(e,t),this._expressionLanguages=t.injector.get("expressionLanguages"),this._translate=t.injector.get("translate"),this._variableResolver=t.injector.get("variableResolver",!1)}isDefaultExpressionLanguage(e){const{expressionLanguage:t}=e,n=this.getDefaultExpressionLanguage().value;return!t||t===n}getDescription(e){return e.description}getExpressionLanguageLabel(e){const{expressionLanguage:t}=e,n=this.getDefaultExpressionLanguage();return this._expressionLanguages.getLabel(t)||n.label}isScript(){const{businessObject:e}=this.props,t=this.getDefaultExpressionLanguage();return!!this._isInputCell()&&(-1!==e.text.indexOf("\n")||e.expressionLanguage&&e.expressionLanguage!==t)}_isInputCell(){return(0,u.is)(this.props.businessObject,"dmn:UnaryTests")}getDefaultExpressionLanguage(){const e=this._isInputCell()?"inputCell":"outputCell";return this._expressionLanguages.getDefault(e)}getEditor(){return this.isFEEL()?Fr:_s}isFEEL(){return"feel"===this.getExpressionLanguage()}getExpressionLanguage(){const{businessObject:e}=this.props;return e.expressionLanguage||this.getDefaultExpressionLanguage().value}_getVariables(){const{businessObject:e}=this.props;return this._variableResolver&&this._variableResolver.getVariables(e)}_getLabel(){return this._isInputCell()?this._translate("Input"):this._translate("Output")}render(){const{businessObject:e,placeholder:t,value:n,onChange:i}=this.props,s=this.getDescription(e),o=this.isDefaultExpressionLanguage(e),r=this.getExpressionLanguageLabel(e),a=this.isScript(),l=this.getEditor(),c=this._getVariables();return(0,sn.bF)(1,"div","cell-editor",[(0,v.isString)(s)&&(0,sn.bF)(1,"div","description-indicator"),(0,sn.sO)(2,l,{label:this._getLabel(),className:a?"script-editor":"",ctrlForNewline:!0,onInput:i,value:n,placeholder:t,variables:c,feelLanguageDialect:"unaryTests"}),!o&&(0,sn.bF)(1,"span","dms-badge dmn-expression-language",[(0,sn.bF)(1,"span","dms-badge-icon dmn-icon-file-code"),(0,sn.bF)(1,"span","dms-badge-label",r,0)],4,{title:this._translate("Expression language: {expressionLanguageLabel}",{expressionLanguageLabel:r})})],0)}}class Nr{constructor(e){e.onGetComponent("cell",1500,({cellType:e})=>{if("rule"===e)return Pr})}}Nr.$inject=["components"];const $r={__depends__:[As,ti],__init__:["decisionRulesEditor"],decisionRulesEditor:["type",Nr]};class Lr extends sn.uA{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this.state={top:0,left:0,isVisible:!1,isDisabled:!1,selection:null},fn(this);const{debounceInput:n}=this;this.onClick=this.onClick.bind(this),this.handleSelectionChanged=this.handleSelectionChanged.bind(this),this.hideAndShowDebounced=this.hideAndShowDebounced.bind(this),this.showDebounced=n(this.showDebounced.bind(this)),this.updatePosition=this.updatePosition.bind(this)}componentDidMount(){const{eventBus:e}=this;e.on("cellSelection.changed",this.handleSelectionChanged),e.on("commandStack.changed",this.updatePosition),e.on("sheet.scroll",this.hideAndShowDebounced)}componentWillUnmount(){const{eventBus:e}=this;e.off("cellSelection.changed",this.handleSelectionChanged),e.off("commandStack.changed",this.updatePosition),e.off("sheet.scroll",this.hideAndShowDebounced)}hideAndShowDebounced(){this.state.isVisible&&(this.hide(),this.showDebounced())}showDebounced(){this.show()}hide(e={}){this.setState({...e,isVisible:!1})}show(e={}){this.setState({...e,isVisible:!0}),this.updatePosition()}handleSelectionChanged({elementId:e}){const{elementRegistry:t,expressionLanguages:n,simpleMode:i}=this,s=t.get(e);if(!s||!i.canSimpleEdit(s))return void this.hide({isDisabled:!1,selection:null});const o=!function(e,t,n){return!t||t===function(e,t){return(0,u.Xy)(e.col)?t.getDefault("inputCell").value:(0,u.Mz)(e.col)?t.getDefault("outputCell").value:void 0}(e,n)}(s,s.businessObject.expressionLanguage,n);this.show({isDisabled:o,selection:s})}updatePosition(){const{selection:e}=this.state,{node:t}=this;if(!e||!t)return;const{renderer:n}=this,i=n.getContainer(),s=i.getBoundingClientRect(),o=Ui(e.id,i).getBoundingClientRect(),r=this.node.getBoundingClientRect(),{scrollLeft:a,scrollTop:l}=function(e){const t=(0,Q.kp)(e,".tjs-table-container");if(!t)return{scrollTop:0,scrollLeft:0};const{scrollLeft:n,scrollTop:i}=t;return{scrollTop:i,scrollLeft:n}}(t),c={};o.left+o.width/2>s.width/2?c.left=-s.left+o.left-r.width+4+a+"px":c.left=-s.left+o.left+o.width-4+a+"px",o.top+o.height/2>s.height/2?c.top=-s.top+o.top-r.height+4+l+"px":c.top=-s.top+o.top-4+l+"px",(0,v.assign)(this.node.style,c)}onClick(){const{eventBus:e}=this,{isDisabled:t}=this.state;if(t)return;const{selection:n}=this,i=n.get();i&&(e.fire("simpleMode.open",{element:i,node:Ui(i.id,this._container)}),this.hide())}render(){const{isDisabled:e,isVisible:t,top:n,left:i}=this.state,s=["simple-mode-button","no-deselect"];return e&&s.push("disabled"),t?(0,sn.bF)(1,"div",s.join(" "),(0,sn.bF)(1,"span","dmn-icon-edit"),2,{onClick:this.onClick,style:{top:n,left:i},title:e?this._translate("Editing not supported for set expression language"):this._translate("Edit")},null,e=>this.node=e):null}}Lr.$inject=["debounceInput","elementRegistry","eventBus","expressionLanguages","renderer","selection","simpleMode"];class Br{constructor(e,t,n,i,s){this._providers=[],e.onGetComponent("table.before",()=>Lr),i.on("simpleMode.open",({element:e,node:n})=>{const{left:i,top:o,width:r,height:a}=n.getBoundingClientRect(),l=s.getContainer();t.open({x:i+l.parentNode.scrollLeft,y:o+l.parentNode.scrollTop,width:r,height:a},{contextMenuType:"simple-mode-edit",element:e,offset:{x:4,y:4}})}),i.on("cell.click",e=>{const{event:t,node:s,id:o}=e;if(function(e){return!e.altKey&&(e.ctrlKey||e.metaKey)}(t)){const t=n.get(o);t&&i.fire("simpleMode.open",{node:s,element:t}),e.preventDefault()}})}registerProvider(e){this._providers.push(e)}canSimpleEdit(e){return this._providers.reduce((t,n)=>t||n(e),!1)}}Br.$inject=["components","contextMenu","elementRegistry","eventBus","renderer"];const Vr={__depends__:[Ts,Gi,Hn],__init__:["simpleMode"],simpleMode:["type",Br]},Ur="none";class zr extends sn.uA{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._modeling=t.injector.get("modeling");const{element:n}=this.props.context,i=!(s=n.businessObject.text)||function(e){return""===e}(s)?"none":"true"===s.trim()?"true":"false"===s.trim()?"false":void 0;var s;this.state={value:i||Ur},this.editCell=this.editCell.bind(this),this.onChange=this.onChange.bind(this)}editCell(e,t){this._modeling.editCell(e,t)}onChange(e){const{element:t}=this.props.context;this.editCell(t.businessObject,e===Ur?"":e),this.setState({value:e})}render(){const{value:e}=this.state,t=[{label:"-",value:Ur},{label:this._translate("Yes"),value:"true"},{label:this._translate("No"),value:"false"}];return(0,sn.bF)(1,"div","simple-boolean-edit context-menu-container",[(0,sn.bF)(1,"h3","dms-heading",this._translate("Edit boolean"),0),(0,sn.bF)(1,"h4","dms-heading",this._translate("Set value"),0),(0,sn.sO)(2,go,{label:this._translate("Boolean value"),noInput:!0,className:"dms-block",onChange:this.onChange,options:t,value:e})],4)}}class Kr{constructor(e,t){t.registerProvider(e=>((0,u.Xy)(e.col)||(0,u.Mz)(e.col))&&"boolean"===Wr(e)),e.onGetComponent("context-menu",(e={})=>{if(e.contextMenuType&&"simple-mode-edit"===e.contextMenuType){if(!e.element)return;if("boolean"===Wr(e.element))return zr}})}}function Wr(e){return(0,u.Xy)(e.col)?e.col&&e.col.businessObject.inputExpression.typeRef:e.col&&e.col.businessObject.typeRef}Kr.$inject=["components","simpleMode"];const qr={__depends__:[Fo,Vr],__init__:["simpleBooleanEdit"],simpleBooleanEdit:["type",Kr]},Gr=/^\d{4}(?:-\d\d){2}$/,Hr=/^\[date\("([^"]*)"\)..date\("([^"]*)"\)\]$/,Xr=/^(<|>)\s*date\("([^"]*)"\)$/,Yr=/^date\("([^"]*)"\)$/;function Jr(e){if(!Gr.test(e.trim()))return"Date must match pattern yyyy-MM-dd"}function Zr(e,t){return"exact"===e?`date("${t[0]}")`:"before"===e?`< date("${t[0]}")`:"after"===e?`> date("${t[0]}")`:"between"===e?`[date("${t[0]}")..date("${t[1]}")]`:void 0}function Qr(){const e=new Date;return e.setUTCHours(0,0,0,0),e.toISOString().slice(0,10)}function ea(e){if(!e||""===e.trim())return{type:"exact",date:""};let t=e.match(Hr);return t?{type:"between",dates:[t[1],t[2]]}:(t=e.match(Xr),t?{type:"<"===t[1]?"before":"after",date:t[2]}:(t=e.match(Yr),t?{type:"exact",date:t[1]}:void 0))}const ta="exact",na="between";class ia extends sn.uA{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._modeling=t.injector.get("modeling");const{element:n}=this.props.context,i=ea(n.businessObject.text);if(i){let e;e=i.date?[i.date,""]:i.dates?i.dates:["",""],this.state={type:i.type,dates:e}}else this.state={type:ta,dates:["",""]};const s=t.injector.get("debounceInput");this.debouncedEditCell=s(this.editCell.bind(this)),this.editCell=this.editCell.bind(this),this.onTypeChange=this.onTypeChange.bind(this),this.onSetStartDateTodayClick=this.onSetStartDateTodayClick.bind(this),this.onSetEndDateTodayClick=this.onSetEndDateTodayClick.bind(this),this.onStartDateInput=this.onStartDateInput.bind(this),this.onEndDateInput=this.onEndDateInput.bind(this)}editCell(e,t){this._modeling.editCell(e,t)}onTypeChange(e){const{element:t}=this.props.context,{dates:n}=this.state;this.setState({type:e}),ea(Zr(e,n))&&this.editCell(t.businessObject,Zr(e,n))}onSetStartDateTodayClick(){const{element:e}=this.props.context,{dates:t,type:n}=this.state,i=Qr();this.setState({dates:[i,t[1]]}),ea(Zr(n,[i,t[1]]))&&this.editCell(e.businessObject,Zr(n,[i,t[1]]))}onSetEndDateTodayClick(){const{element:e}=this.props.context,{dates:t,type:n}=this.state,i=Qr();this.setState({dates:[t[0],i]}),ea(Zr(n,[t[0],i]))&&this.editCell(e.businessObject,Zr(n,[t[0],i]))}onStartDateInput({value:e}){const{element:t}=this.props.context,{dates:n,type:i}=this.state;this.setState({dates:[e,n[1]]}),this.debouncedEditCell(t.businessObject,Zr(i,[e,n[1]]))}onEndDateInput({value:e}){const{element:t}=this.props.context,{dates:n,type:i}=this.state;this.setState({dates:[n[0],e]}),this.debouncedEditCell(t.businessObject,Zr(i,[n[0],e]))}render(){const{dates:e,type:t}=this.state,n=[{label:this._translate("Exactly"),value:ta},{label:this._translate("Before"),value:"before"},{label:this._translate("After"),value:"after"},{label:this._translate("Between"),value:na}];return(0,sn.bF)(1,"div","context-menu-container simple-date-edit",[(0,sn.bF)(1,"h3","dms-heading",this._translate("Edit date"),0),(0,sn.bF)(1,"div","dms-fill-row",(0,sn.sO)(2,go,{label:this._translate("Test type"),noInput:!0,onChange:this.onTypeChange,options:n,value:t}),2),(0,sn.bF)(1,"h4","dms-heading",t===na?this._translate("Edit start date"):this._translate("Set date"),0),(0,sn.bF)(1,"div",null,[(0,sn.sO)(2,Co,{label:t===na?this._translate("Start date"):this._translate("Date"),className:"start-date-input dms-block",onInput:this.onStartDateInput,placeholder:this._translate("e.g. { sample }",{sample:Qr()}),validate:e=>Jr(e)&&this._translate(Jr(e)),value:e[0]}),(0,sn.bF)(1,"p","dms-hint",[(0,sn.bF)(1,"button","use-today",this._translate("Use today"),0,{type:"button",onClick:this.onSetStartDateTodayClick}),(0,sn.eW)(".")],4)],4),t===na&&(0,sn.bF)(1,"h4","dms-heading",this._translate("Edit end date"),0),t===na&&(0,sn.bF)(1,"div",null,[(0,sn.sO)(2,Co,{label:this._translate("End date"),className:"end-date-input dms-block",onInput:this.onEndDateInput,placeholder:this._translate("e.g. { sample }",{sample:Qr()}),validate:e=>Jr(e)&&this._translate(Jr(e)),value:e[1]}),(0,sn.bF)(1,"p","dms-hint",[(0,sn.bF)(1,"button","use-today",this._translate("Use today"),0,{type:"button",onClick:this.onSetEndDateTodayClick}),(0,sn.eW)(".")],4)],4)],0)}}class sa extends sn.uA{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._modeling=t.injector.get("modeling");const{element:n}=this.props.context,i=ea(n.businessObject.text);this.state={date:i?i.date:""};const s=t.injector.get("debounceInput");this.debouncedEditCell=s(this.editCell.bind(this)),this.editCell=this.editCell.bind(this),this.onClick=this.onClick.bind(this),this.onInput=this.onInput.bind(this)}editCell(e,t){this._modeling.editCell(e,t)}onClick(){const{element:e}=this.props.context,t=Qr();this.setState({date:t}),this.editCell(e.businessObject,`date("${t}")`)}onInput({value:e}){const{element:t}=this.props.context;this.setState({date:e}),this.debouncedEditCell(t.businessObject,`date("${e}")`)}render(){const{date:e}=this.state;return(0,sn.bF)(1,"div","context-menu-container simple-date-edit",[(0,sn.bF)(1,"h3","dms-heading",this._translate("Edit date"),0),(0,sn.bF)(1,"h4","dms-heading",this._translate("Set date"),0),(0,sn.bF)(1,"div",null,[(0,sn.sO)(2,Co,{label:this._translate("Date value"),onInput:this.onInput,placeholder:this._translate("e.g. { example } ",{example:Qr()}),validate:e=>Jr(e)&&this._translate(Jr(e)),value:e,className:"dms-block"}),(0,sn.bF)(1,"p","dms-hint",(0,sn.bF)(1,"button","use-today",this._translate("Use today"),0,{type:"button",onClick:this.onClick}),2)],4)],4)}}class oa{constructor(e,t){t.registerProvider(e=>{const t=ra(e);return((0,u.Xy)(e.col)||(0,u.Mz)(e.col))&&aa(t)}),e.onGetComponent("context-menu",(e={})=>{if(e.contextMenuType&&"simple-mode-edit"===e.contextMenuType){if(!e.element)return;if(aa(ra(e.element))){if((0,u.Xy)(e.element.col))return ia;if((0,u.Mz)(e.element.col))return sa}}})}}function ra(e){return(0,u.Xy)(e.col)?e.col&&e.col.businessObject.inputExpression.typeRef:e.col&&e.col.businessObject.typeRef}function aa(e){return"date"===e}oa.$inject=["components","simpleMode"];const la={__depends__:[Fo,Vr],__init__:["simpleDateEdit"],simpleDateEdit:["type",oa]},ca=/^\d{4}(?:-\d\d){2}T(?:\d\d:){2}\d\d(?:Z|(?:[@+-][^")]+))?$/,ua=/^\[date and time\("([^"]*)"\)..date and time\("([^"]*)"\)\]$/,da=/^(<|>)\s*date and time\("([^"]*)"\)$/,pa=/^date and time\("([^"]*)"\)$/;function ha(e){if(!ca.test(e.trim()))return"Date and time must match pattern yyyy-MM-ddTHH:mm:ss[time zone]"}function ma(e,t){return"exact"===e?`date and time("${t[0]}")`:"before"===e?`< date and time("${t[0]}")`:"after"===e?`> date and time("${t[0]}")`:"between"===e?`[date and time("${t[0]}")..date and time("${t[1]}")]`:void 0}function ga(){const e=new Date;return e.setUTCHours(0,0,0,0),e.toISOString().replace(".000Z","Z")}function fa(e){if(!e||""===e.trim())return{type:"exact",date:""};let t=e.match(ua);return t?{type:"between",dates:[t[1],t[2]]}:(t=e.match(da),t?{type:"<"===t[1]?"before":"after",date:t[2]}:(t=e.match(pa),t?{type:"exact",date:t[1]}:void 0))}const ya="exact",va="between";class ba extends sn.uA{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._modeling=t.injector.get("modeling");const{element:n}=this.props.context,i=fa(n.businessObject.text);if(i){let e;e=i.date?[i.date,""]:i.dates?i.dates:["",""],this.state={type:i.type,dates:e}}else this.state={type:ya,dates:["",""]};const s=t.injector.get("debounceInput");this.debouncedEditCell=s(this.editCell.bind(this)),this.editCell=this.editCell.bind(this),this.onTypeChange=this.onTypeChange.bind(this),this.onSetStartDateTodayClick=this.onSetStartDateTodayClick.bind(this),this.onSetEndDateTodayClick=this.onSetEndDateTodayClick.bind(this),this.onStartDateInput=this.onStartDateInput.bind(this),this.onEndDateInput=this.onEndDateInput.bind(this)}editCell(e,t){this._modeling.editCell(e,t)}onTypeChange(e){const{element:t}=this.props.context,{dates:n}=this.state;this.setState({type:e}),fa(ma(e,n))&&this.editCell(t.businessObject,ma(e,n))}onSetStartDateTodayClick(){const{element:e}=this.props.context,{dates:t,type:n}=this.state,i=ga();this.setState({dates:[i,t[1]]}),fa(ma(n,[i,t[1]]))&&this.editCell(e.businessObject,ma(n,[i,t[1]]))}onSetEndDateTodayClick(){const{element:e}=this.props.context,{dates:t,type:n}=this.state,i=ga();this.setState({dates:[t[0],i]}),fa(ma(n,[t[0],i]))&&this.editCell(e.businessObject,ma(n,[t[0],i]))}onStartDateInput({value:e}){const{element:t}=this.props.context,{dates:n,type:i}=this.state;this.setState({dates:[e,n[1]]}),this.debouncedEditCell(t.businessObject,ma(i,[e,n[1]]))}onEndDateInput({value:e}){const{element:t}=this.props.context,{dates:n,type:i}=this.state;this.setState({dates:[n[0],e]}),this.debouncedEditCell(t.businessObject,ma(i,[n[0],e]))}render(){const{dates:e,type:t}=this.state,n=[{label:this._translate("Exactly"),value:ya},{label:this._translate("Before"),value:"before"},{label:this._translate("After"),value:"after"},{label:this._translate("Between"),value:va}];return(0,sn.bF)(1,"div","context-menu-container simple-date-edit",[(0,sn.bF)(1,"h3","dms-heading",this._translate("Edit date and time"),0),(0,sn.bF)(1,"div","dms-fill-row",(0,sn.sO)(2,go,{label:this._translate("Test type"),noInput:!0,onChange:this.onTypeChange,options:n,value:t}),2),(0,sn.bF)(1,"h4","dms-heading",t===va?this._translate("Edit start date and time"):this._translate("Set date and time"),0),(0,sn.bF)(1,"div",null,[(0,sn.sO)(2,Co,{label:t===va?this._translate("Start date and time"):this._translate("Date and time"),className:"start-date-input dms-block",onInput:this.onStartDateInput,placeholder:this._translate("e.g. { sample }",{sample:ga()}),validate:e=>ha(e)&&this._translate(ha(e)),value:e[0]}),(0,sn.bF)(1,"p","dms-hint",(0,sn.bF)(1,"button","use-today",this._translate("Use today"),0,{type:"button",onClick:this.onSetStartDateTodayClick}),2)],4),t===va&&(0,sn.bF)(1,"h4","dms-heading",this._translate("Edit end date and time"),0),t===va&&(0,sn.bF)(1,"div",null,[(0,sn.sO)(2,Co,{label:this._translate("End date and time"),className:"end-date-input dms-block",onInput:this.onEndDateInput,placeholder:this._translate("e.g. { sample }",{sample:ga()}),validate:e=>ha(e)&&this._translate(ha(e)),value:e[1]}),(0,sn.bF)(1,"p","dms-hint",(0,sn.bF)(1,"button","use-today",this._translate("Use today"),0,{type:"button",onClick:this.onSetEndDateTodayClick}),2)],4)],0)}}class _a extends sn.uA{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._modeling=t.injector.get("modeling");const{element:n}=this.props.context,i=fa(n.businessObject.text);this.state={date:i?i.date:""};const s=t.injector.get("debounceInput");this.debouncedEditCell=s(this.editCell.bind(this)),this.editCell=this.editCell.bind(this),this.onClick=this.onClick.bind(this),this.onInput=this.onInput.bind(this)}editCell(e,t){this._modeling.editCell(e,t)}onClick(){const{element:e}=this.props.context,t=ga();this.setState({date:t}),this.editCell(e.businessObject,`date and time("${t}")`)}onInput({value:e}){const{element:t}=this.props.context;this.setState({date:e}),this.debouncedEditCell(t.businessObject,`date and time("${e}")`)}render(){const{date:e}=this.state;return(0,sn.bF)(1,"div","context-menu-container simple-date-edit",[(0,sn.bF)(1,"h3","dms-heading",this._translate("Edit date and time"),0),(0,sn.bF)(1,"h4","dms-heading",this._translate("Set date and time"),0),(0,sn.bF)(1,"div",null,[(0,sn.sO)(2,Co,{label:this._translate("Date and time value"),onInput:this.onInput,placeholder:this._translate("e.g. { sample }",{sample:ga()}),validate:e=>ha(e)&&this._translate(ha(e)),value:e,className:"dms-block"}),(0,sn.bF)(1,"p","dms-hint",(0,sn.bF)(1,"button","use-today",this._translate("Use today"),0,{type:"button",onClick:this.onClick}),2)],4)],4)}}class xa{constructor(e,t){t.registerProvider(e=>{const t=Ca(e);return((0,u.Xy)(e.col)||(0,u.Mz)(e.col))&&wa(t)}),e.onGetComponent("context-menu",(e={})=>{if(e.contextMenuType&&"simple-mode-edit"===e.contextMenuType){if(!e.element)return;if(wa(Ca(e.element))){if((0,u.Xy)(e.element.col))return ba;if((0,u.Mz)(e.element.col))return _a}}})}}function Ca(e){return(0,u.Xy)(e.col)?e.col&&e.col.businessObject.inputExpression.typeRef:e.col&&e.col.businessObject.typeRef}function wa(e){return"dateTime"===e}xa.$inject=["components","simpleMode"];const Ea={__depends__:[Fo,Vr],__init__:["simpleDateTimeEdit"],simpleDateTimeEdit:["type",xa]},Da={equals:"=",less:"<",lessEquals:"<=",greater:">",greaterEquals:">="};function Sa(e,t){return"equals"===e?`duration("${t}")`:`${Da[e]} duration("${t}")`}function Aa(e,t,n,i){return`${"exclude"===n?"]":"["}duration("${e}")..duration("${t}")${"exclude"===i?"[":"]"}`}function Ra(e){const t=/^duration\("([^"]*)"\)$/.exec(e);return t&&t[1]}function Ma(e,t){const{groups:n}=e.exec(t)||{groups:{}};return n}const Ia={yearMonthDuration:"Must match PnYnM",dayTimeDuration:"Must match PnDTnH"};class ja extends sn.uA{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._type=e.type,this.onInput=this.onInput.bind(this),this.validate=this.validate.bind(this),this.state={value:e.value}}onInput({value:e}){this.setState({value:e}),this.props.onInput(e)}validate(e){if(!function(e,t){return"yearMonthDuration"===e?function(e){return/^P(\d+Y\d+M|\d+Y|\d+M)$/.test(e)}(t):"dayTimeDuration"===e?function(e){return/^P(\d+DT\d+H|\d+D|T\d+H)$/.test(e)}(t):void 0}(this._type,e))return this._translate(Ia[this._type])}_getPlaceholder(){if("yearMonthDuration"===this._type)return this._translate("e.g. { sample }",{sample:"P1Y2M"});"dayTimeDuration"===this._type&&this._translate("e.g. { sample }",{sample:"P1DT2H"})}render(){return(0,sn.sO)(2,Co,{label:this.props.label,type:"text",onInput:this.onInput,placeholder:this._getPlaceholder(),validate:this.validate,value:this.state.value,className:this.props.className})}}const Oa="comparison",ka="range";class Pa extends sn.uA{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._modeling=t.injector.get("modeling");const{element:n}=this.props.context;this._type=function(e){return e.col.businessObject.inputExpression.typeRef}(n);const i=function(e){if(!e||""===e.trim())return{type:"comparison",values:[]};const t=function(e){const t=Ra(e);if(t)return{type:"comparison",operator:"equals",values:[t]};const{operator:n,value:i}=Ma(/^(?<operator>=|(:?<|>)=?)\s*duration\("(?<value>[^"]*)"\)$/,e);return n&&i?{type:"comparison",values:[i],operator:(s=n,(0,v.keys)(Da).filter(e=>s===Da[e])[0])}:void 0;var s}(e);if(t)return t;return function(e){const{start:t,end:n,firstValue:i,secondValue:s}=Ma(/^(?<start>[[\]])duration\("(?<firstValue>[^"]*)"\)\.\.duration\("(?<secondValue>[^"]*)"\)(?<end>[[\]])$/,e);if(t&&n)return{type:"range",values:[i,s],start:"]"===t?"exclude":"include",end:"["===n?"exclude":"include"}}(e)||void 0}(n.businessObject.text,this._type);this.state=i?{type:i.type,comparisonOperator:i.operator||"equals",startValue:i.values[0]||"",endValue:i.values[1]||"",rangeStartType:i.start||"include",rangeEndType:i.end||"include"}:{type:Oa,comparisonOperator:"equals",startValue:"",endValue:"",rangeStartType:"include",rangeEndType:"include"};const s=t.injector.get("debounceInput");this.debouncedEditCell=s(this.editCell.bind(this)),this.editCell=this.editCell.bind(this),this.onComparisonOperatorChange=this.onComparisonOperatorChange.bind(this),this.onComparisonValueChange=this.onComparisonValueChange.bind(this),this.onTypeChange=this.onTypeChange.bind(this),this.onRangeStartTypeChange=this.onRangeStartTypeChange.bind(this),this.onRangeStartValueChange=this.onRangeStartValueChange.bind(this),this.onRangeEndTypeChange=this.onRangeEndTypeChange.bind(this),this.onRangeEndValueChange=this.onRangeEndValueChange.bind(this)}editCell(e,t){this._modeling.editCell(e,t)}onTypeChange(e){const{element:t}=this.props.context,{comparisonOperator:n,startValue:i,endValue:s,rangeStartType:o,rangeEndType:r}=this.state;e===Oa?this.editCell(t.businessObject,Sa(n,i)):this.editCell(t.businessObject,Aa(i,s,o,r)),this.setState({type:e})}onComparisonOperatorChange(e){const{element:t}=this.props.context,{type:n,startValue:i}=this.state;n===Oa&&(this.editCell(t.businessObject,Sa(e,i)),this.setState({comparisonOperator:e}))}onComparisonValueChange(e){const{element:t}=this.props.context,{type:n,comparisonOperator:i}=this.state;n===Oa&&(this.debouncedEditCell(t.businessObject,Sa(i,e)),this.setState({startValue:e}))}onRangeStartTypeChange(e){const{element:t}=this.props.context,{type:n,startValue:i,endValue:s,rangeEndType:o}=this.state;n===ka&&(this.editCell(t.businessObject,Aa(i,s,e,o)),this.setState({rangeStartType:e}))}onRangeStartValueChange(e){const{element:t}=this.props.context,{type:n,endValue:i,rangeStartType:s,rangeEndType:o}=this.state;n===ka&&(this.editCell(t.businessObject,Aa(e,i,s,o)),this.setState({startValue:e}))}onRangeEndTypeChange(e){const{element:t}=this.props.context,{type:n,startValue:i,endValue:s,rangeStartType:o}=this.state;n===ka&&(this.editCell(t.businessObject,Aa(i,s,o,e)),this.setState({rangeEndType:e}))}onRangeEndValueChange(e){const{element:t}=this.props.context,{type:n,startValue:i,rangeStartType:s,rangeEndType:o}=this.state;n===ka&&(this.editCell(t.businessObject,Aa(i,e,s,o)),this.setState({endValue:e}))}renderComparison(e,t){const n=[{label:this._translate("Equals"),value:"equals"},{label:this._translate("Less"),value:"less"},{label:this._translate("Less or equals"),value:"lessEquals"},{label:this._translate("Greater"),value:"greater"},{label:this._translate("Greater or equals"),value:"greaterEquals"}];return(0,sn.bF)(1,"div","comparison",[(0,sn.bF)(1,"h4","dms-heading",(0,sn.eW)("Value"),2),(0,sn.bF)(1,"div","dms-fill-row dms-input-duration-edit-row",[(0,sn.sO)(2,go,{label:this._translate("Comparison operator"),noInput:!0,onChange:this.onComparisonOperatorChange,options:n,value:e}),(0,sn.eW)(""),(0,sn.sO)(2,ja,{label:this._translate("Duration value"),type:this._type,className:"comparison-duration-input",onInput:this.onComparisonValueChange,value:t})],4)],4)}renderRange(e,t,n,i){const s=[{label:this._translate("Include"),value:"include"},{label:this._translate("Exclude"),value:"exclude"}];return(0,sn.bF)(1,"div","range",[(0,sn.bF)(1,"h4","dms-heading",this._translate("Start value"),0),(0,sn.bF)(1,"div","dms-fill-row dms-input-duration-edit-row",[(0,sn.sO)(2,go,{label:this._translate("Range start operator"),noInput:!0,onChange:this.onRangeStartTypeChange,options:s,value:n}),(0,sn.eW)(""),(0,sn.sO)(2,ja,{label:this._translate("Range start value"),type:this._type,className:"range-start-duration-input",onInput:this.onRangeStartValueChange,value:e})],4),(0,sn.bF)(1,"h4","dms-heading",this._translate("End value"),0),(0,sn.bF)(1,"div","dms-fill-row dms-input-duration-edit-row",[(0,sn.sO)(2,go,{label:this._translate("Range end operator"),noInput:!0,onChange:this.onRangeEndTypeChange,options:s,value:i}),(0,sn.eW)(""),(0,sn.sO)(2,ja,{label:this._translate("Range end value"),type:this._type,className:"range-end-duration-input",onInput:this.onRangeEndValueChange,value:t})],4)],4)}render(){const{type:e,comparisonOperator:t,startValue:n,endValue:i,rangeStartType:s,rangeEndType:o}=this.state,r=[{label:this._translate("Comparison"),value:Oa},{label:this._translate("Range"),value:ka}];return(0,sn.bF)(1,"div","context-menu-container simple-duration-edit",[(0,sn.bF)(1,"h3","dms-heading",this._translate("Edit duration"),0),(0,sn.bF)(1,"div","dms-fill-row",(0,sn.sO)(2,go,{label:this._translate("Test type"),noInput:!0,onChange:this.onTypeChange,options:r,value:e}),2),e===Oa&&this.renderComparison(t,n),e===ka&&this.renderRange(n,i,s,o)],0)}}class Fa extends sn.uA{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._modeling=t.injector.get("modeling");const{element:n}=this.props.context;this._type=function(e){return e.col.businessObject.typeRef}(n);const i=t.injector.get("debounceInput");this.debouncedEditCell=i(this.editCell.bind(this)),this.editCell=this.editCell.bind(this),this.onInput=this.onInput.bind(this)}editCell(e,t){this._modeling.editCell(e,t)}onInput(e){const{element:t}=this.props.context;this.debouncedEditCell(t.businessObject,`duration("${e}")`)}render(){const e=Ra(this.props.context.element.businessObject.text,this._type);return(0,sn.bF)(1,"div","context-menu-container simple-duration-edit",[(0,sn.bF)(1,"h3","dms-heading",this._translate("Edit duration"),0),(0,sn.bF)(1,"h4","dms-heading",this._translate("Set duration"),0),(0,sn.sO)(2,ja,{label:this._translate("Duration value"),onInput:this.onInput,value:e,type:this._type,className:"dms-block"})],4)}}class Ta{constructor(e,t){t.registerProvider(e=>{const t=Na(e);return((0,u.Xy)(e.col)||(0,u.Mz)(e.col))&&La(t)}),e.onGetComponent("context-menu",(e={})=>{if(e.contextMenuType&&"simple-mode-edit"===e.contextMenuType){if(!e.element)return;if(La(Na(e.element))){if((0,u.Xy)(e.element.col))return Pa;if((0,u.Mz)(e.element.col))return Fa}}})}}function Na(e){return(0,u.Xy)(e.col)?e.col&&e.col.businessObject.inputExpression.typeRef:e.col&&e.col.businessObject.typeRef}Ta.$inject=["components","simpleMode"];const $a=["yearMonthDuration","dayTimeDuration"];function La(e){return $a.includes(e)}const Ba={__depends__:[Fo,Vr],__init__:["simpleDurationEdit"],simpleDurationEdit:["type",Ta]},Va=/^(-?(?:[0-9]|\.[0-9])+)$|^((?:<|>|=){0,2})\s*(-?(?:[0-9]|\.[0-9])+)$/,Ua=/^(\[|\]){1}(-?(?:[0-9]|\.[0-9])+){1,}\.\.(-?(?:[0-9]|\.[0-9])+){1,}(\[|\]){1}$/,za={equals:"=",less:"<",lessEquals:"<=",greater:">",greaterEquals:">="};function Ka(e){return(0,v.keys)(za).filter(t=>e===za[t])[0]}function Wa(e){if(!e||function(e){return""===e}(e.trim()))return{type:"comparison"};const t=e.match(Va),n=e.match(Ua);if(t){if((i=t)[0]&&i[1]&&!i[2]&&!i[3])return{type:"comparison",value:parseFloat(t[1]),operator:"equals"};if(function(e){return e[0]&&!e[1]&&e[2]&&e[3]}(t))return{type:"comparison",value:parseFloat(t[3]),operator:Ka(t[2])}}else if(n)return{type:"range",values:[n[2],n[3]].map(e=>parseFloat(e)),start:"]"===n[1]?"exclude":"include",end:"["===n[4]?"exclude":"include"};var i}function qa(e,t){return"equals"===e?`${t}`:`${za[e]} ${t}`}function Ga(e,t,n,i){return`${"exclude"===n?"]":"["}${e}..${t}${"exclude"===i?"[":"]"}`}const Ha="comparison",Xa="range";class Ya extends sn.uA{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._modeling=t.injector.get("modeling");const{element:n}=this.props.context,i=Wa(n.businessObject.text);this.state=i?{type:i.type,comparisonOperator:i.operator||"equals",comparisonValue:i.value||0,rangeStartValue:i.values?i.values[0]:0,rangeEndValue:i.values?i.values[1]:0,rangeStartType:i.start||"include",rangeEndType:i.end||"include"}:{type:Ha,comparisonOperator:"equals",comparisonValue:0,rangeStartValue:0,rangeEndValue:0,rangeStartType:"include",rangeEndType:"include"};const s=t.injector.get("debounceInput");this.debouncedEditCell=s(this.editCell.bind(this)),this.editCell=this.editCell.bind(this),this.onComparisonOperatorChange=this.onComparisonOperatorChange.bind(this),this.onComparisonValueChange=this.onComparisonValueChange.bind(this),this.onTypeChange=this.onTypeChange.bind(this),this.onRangeStartTypeChange=this.onRangeStartTypeChange.bind(this),this.onRangeStartValueChange=this.onRangeStartValueChange.bind(this),this.onRangeEndTypeChange=this.onRangeEndTypeChange.bind(this),this.onRangeEndValueChange=this.onRangeEndValueChange.bind(this)}editCell(e,t){this._modeling.editCell(e,t)}onTypeChange(e){const{element:t}=this.props.context,{comparisonOperator:n,comparisonValue:i,rangeStartValue:s,rangeEndValue:o,rangeStartType:r,rangeEndType:a}=this.state;e===Ha?this.editCell(t.businessObject,qa(n,i)):this.editCell(t.businessObject,Ga(s,o,r,a)),this.setState({type:e})}onComparisonOperatorChange(e){const{element:t}=this.props.context,{type:n,comparisonValue:i}=this.state;n===Ha&&(this.editCell(t.businessObject,qa(e,i)),this.setState({comparisonOperator:e}))}onComparisonValueChange(e){const{element:t}=this.props.context,{type:n,comparisonOperator:i}=this.state;n===Ha&&(this.debouncedEditCell(t.businessObject,qa(i,e)),this.setState({comparisonValue:e}))}onRangeStartTypeChange(e){const{element:t}=this.props.context,{type:n,rangeStartValue:i,rangeEndValue:s,rangeEndType:o}=this.state;n===Xa&&(this.editCell(t.businessObject,Ga(i,s,e,o)),this.setState({rangeStartType:e}))}onRangeStartValueChange(e){const{element:t}=this.props.context,{type:n,rangeEndValue:i,rangeStartType:s,rangeEndType:o}=this.state;n===Xa&&(this.editCell(t.businessObject,Ga(e,i,s,o)),this.setState({rangeStartValue:e}))}onRangeEndTypeChange(e){const{element:t}=this.props.context,{type:n,rangeStartValue:i,rangeEndValue:s,rangeStartType:o}=this.state;n===Xa&&(this.editCell(t.businessObject,Ga(i,s,o,e)),this.setState({rangeEndType:e}))}onRangeEndValueChange(e){const{element:t}=this.props.context,{type:n,rangeStartValue:i,rangeStartType:s,rangeEndType:o}=this.state;n===Xa&&(this.editCell(t.businessObject,Ga(i,e,s,o)),this.setState({rangeEndValue:e}))}renderComparison(e,t){const n=[{label:this._translate("Equals"),value:"equals"},{label:this._translate("Less"),value:"less"},{label:this._translate("Less or equals"),value:"lessEquals"},{label:this._translate("Greater"),value:"greater"},{label:this._translate("Greater or equals"),value:"greaterEquals"}];return(0,sn.bF)(1,"div","comparison",[(0,sn.bF)(1,"h4","dms-heading",this._translate("Value"),0),(0,sn.bF)(1,"div","dms-fill-row",[(0,sn.sO)(2,go,{label:this._translate("Comparison operator"),noInput:!0,onChange:this.onComparisonOperatorChange,options:n,value:e}),(0,sn.eW)(""),(0,sn.sO)(2,eo,{label:this._translate("Value"),className:"comparison-number-input",onInput:this.onComparisonValueChange,type:"number",value:t})],4)],4)}renderRange(e,t,n,i){const s=[{label:this._translate("Include"),value:"include"},{label:this._translate("Exclude"),value:"exclude"}];return(0,sn.bF)(1,"div","range",[(0,sn.bF)(1,"h4","dms-heading",this._translate("Start value"),0),(0,sn.bF)(1,"div","dms-fill-row",[(0,sn.sO)(2,go,{label:this._translate("Start value"),noInput:!0,onChange:this.onRangeStartTypeChange,options:s,value:n}),(0,sn.eW)(""),(0,sn.sO)(2,eo,{className:"range-start-number-input",onInput:this.onRangeStartValueChange,type:"number",value:e})],4),(0,sn.bF)(1,"h4","dms-heading",this._translate("End value"),0),(0,sn.bF)(1,"div","dms-fill-row",[(0,sn.sO)(2,go,{label:this._translate("End value"),noInput:!0,onChange:this.onRangeEndTypeChange,options:s,value:i}),(0,sn.eW)(""),(0,sn.sO)(2,eo,{className:"range-end-number-input",onInput:this.onRangeEndValueChange,type:"number",value:t})],4)],4)}render(){const{type:e,comparisonOperator:t,comparisonValue:n,rangeStartValue:i,rangeEndValue:s,rangeStartType:o,rangeEndType:r}=this.state,a=[{label:this._translate("Comparison"),value:Ha},{label:this._translate("Range"),value:Xa}];return(0,sn.bF)(1,"div","context-menu-container simple-number-edit",[(0,sn.bF)(1,"h3","dms-heading",this._translate("Edit number"),0),(0,sn.bF)(1,"div","dms-fill-row",(0,sn.sO)(2,go,{label:this._translate("Test type"),noInput:!0,onChange:this.onTypeChange,options:a,value:e}),2),e===Ha&&this.renderComparison(t,n),e===Xa&&this.renderRange(i,s,o,r)],0)}}class Ja extends sn.uA{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._modeling=t.injector.get("modeling");const{element:n}=this.props.context,i=Wa(n.businessObject.text);this.state=i?{value:i.value}:{value:""};const s=t.injector.get("debounceInput");this.debouncedEditCell=s(this.editCell.bind(this)),this.editCell=this.editCell.bind(this),this.onInput=this.onInput.bind(this)}editCell(e,t){this._modeling.editCell(e,t)}onInput(e){const{element:t}=this.props.context;this.debouncedEditCell(t.businessObject,e),this.setState({value:e})}render(){const{value:e}=this.state;return(0,sn.bF)(1,"div","context-menu-container simple-number-edit",[(0,sn.bF)(1,"h3","dms-heading",this._translate("Edit number"),0),(0,sn.bF)(1,"h4","dms-heading",this._translate("Set value"),0),(0,sn.sO)(2,eo,{onInput:this.onInput,type:"number",value:e})],4)}}class Za{constructor(e,t){t.registerProvider(e=>{const t=Qa(e);return((0,u.Xy)(e.col)||(0,u.Mz)(e.col))&&tl(t)}),e.onGetComponent("context-menu",(e={})=>{if(e.contextMenuType&&"simple-mode-edit"===e.contextMenuType){if(!e.element)return;if(tl(Qa(e.element))){if((0,u.Xy)(e.element.col))return Ya;if((0,u.Mz)(e.element.col))return Ja}}})}}function Qa(e){return(0,u.Xy)(e.col)?e.col&&e.col.businessObject.inputExpression.typeRef:e.col&&e.col.businessObject.typeRef}Za.$inject=["components","simpleMode"];const el=["number","integer","long","double"];function tl(e){return el.includes(e)}const nl={__depends__:[Fo,Vr],__init__:["simpleNumberEdit"],simpleNumberEdit:["type",Za]};function il(e){if(!e||sl(e.trim()))return{type:"disjunction",values:[]};let t=e.split(",");const n={type:"disjunction",values:[]};let i="";if(t.forEach(e=>{i+=e,/^"[^"]*"$/.test(i.trim())?(n.values.push(i.trim()),i=""):i+=","}),!i)return n;n.type="negation",n.values=[],i="";const s=e.match(/^\s*not\((.*)\)\s*$/);return s&&(t=s[1].split(","),t.forEach(e=>{i+=e,/^"[^"]*"$/.test(i.trim())?(n.values.push(i.trim()),i=""):i+=","}),!i)?n:void 0}function sl(e){return""===e}const ol="disjunction",rl="negation";class al extends sn.uA{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._modeling=t.injector.get("modeling");let n=il(e.context.element.businessObject.text);n||(n={values:[],type:ol});const i=function(e){const t=(0,u.Xy)(e)?e.inputValues:e.outputValues;return!t||sl(t.text)?[]:t.text.split(",").map(e=>e.trim())}(e.context.element.col.businessObject),s=n.values.filter(e=>!cl(i,e)),o=(0,u.Xy)(e.context.element.col);let r=i.map(e=>({value:e,isChecked:cl(n.values,e),isRemovable:!1,group:this._translate("Predefined values")}));o&&(r=r.concat(s.map(e=>({value:e,isChecked:!0,isRemovable:!0,group:this._translate("Custom values")}))));let a="";o||!n.values.length||cl(i,n.values[0])||(a=n.values[0]),this.state={items:r,unaryTestsType:n.type,inputValue:a,isOutputValueInputChecked:""!==a};const l=t.injector.get("debounceInput");this.debouncedEditCell=l(this.editCell.bind(this)),this.editCell=this.editCell.bind(this),this.addUnaryTestsListItem=this.addUnaryTestsListItem.bind(this),this.onInput=this.onInput.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onOutputValueInputClick=this.onOutputValueInputClick.bind(this),this.onUnaryTestsListChanged=this.onUnaryTestsListChanged.bind(this),this.onUnaryTestsTypeChange=this.onUnaryTestsTypeChange.bind(this)}editCell(e,t){this._modeling.editCell(e,t)}onUnaryTestsTypeChange(e){const{items:t}=this.state,n=ll(t),{element:i}=this.props.context;e===ol?(this.editCell(i.businessObject,n.join(",")),this.setState({unaryTestsType:ol})):(this.editCell(i.businessObject,`not(${n.join(",")})`),this.setState({unaryTestsType:rl}))}onUnaryTestsListChanged(e){const t=ll(e),{element:n}=this.props.context,{unaryTestsType:i}=this.state;i===ol?this.editCell(n.businessObject,t.join(",")):this.editCell(n.businessObject,`not(${t.join(",")})`),this.setState({items:e,isOutputValueInputChecked:!1})}onOutputValueInputClick(){const{element:e}=this.props.context,{inputValue:t,items:n}=this.state,i=il(t);!i||i.values.length>1||(this.editCell(e.businessObject,`${i.values.join("")}`),this.setState({items:n.map(e=>(e.isChecked=!1,e)),isOutputValueInputChecked:!0}))}onInput({isValid:e,value:t}){const{isOutputValueInputChecked:n}=this.state;this.setState({inputValue:t});const{element:i}=this.props.context;!(0,u.Xy)(i)&&e&&n&&this.debouncedEditCell(i.businessObject,t)}onKeyDown({isValid:e,event:t}){if(13!==t.keyCode)return;const{element:n}=this.props.context,i=(0,u.Xy)(n.col);!i&&e||(t.stopPropagation(),t.preventDefault()),e&&(i?this.addUnaryTestsListItem():this.onOutputValueInputClick())}addUnaryTestsListItem(){const{inputValue:e,items:t,unaryTestsType:n}=this.state,i=il(e);if(!i)return;const{element:s}=this.props.context,o=ll(t),r=[].concat(o,i.values);n===ol?this.editCell(s.businessObject,r.join(",")):this.editCell(s.businessObject,`not(${r.join(",")})`);const a=t.concat(i.values.map(e=>({value:e,isChecked:!0,isRemovable:!0,group:this._translate("Custom values")})));this.setState({items:a,inputValue:""})}render(){const{element:e}=this.props.context,{inputValue:t,isOutputValueInputChecked:n,items:i,unaryTestsType:s}=this.state,o=[{label:this._translate("Match one"),value:ol},{label:this._translate("Match none"),value:rl}],r=(0,u.Xy)(e.col),a=s===rl,l=!r&&i.length>0;return(0,sn.bF)(1,"div","simple-string-edit context-menu-container",[(0,sn.bF)(1,"h3","dms-heading",this._translate("Edit string"),0),r&&(0,sn.bF)(1,"p",null,(0,sn.sO)(2,go,{label:this._translate("String value"),noInput:!0,onChange:this.onUnaryTestsTypeChange,options:o,value:a?rl:ol},null,e=>this.selectNode=e),2),(0,sn.sO)(2,xo,{onChange:this.onUnaryTestsListChanged,items:i,type:r?"checkbox":"radio"}),r?(0,sn.bF)(1,"h4","dms-heading",this._translate("Add values"),0):(0,sn.bF)(1,"h4","dms-heading",this._translate("Set value"),0),(0,sn.bF)(1,"div","dms-fill-row",[l&&(0,sn.bF)(64,"input","cursor-pointer",null,1,{checked:n,onClick:this.onOutputValueInputClick,type:"radio",style:{marginRight:"8px"}}),(0,sn.sO)(2,Co,{label:r?this._translate("Values"):this._translate("Value"),className:"dms-block",onKeyDown:this.onKeyDown,onInput:this.onInput,placeholder:r?this._translate('"value", "value", ...'):this._translate('"value"'),type:"text",validate:e=>{if(!il(e))return this._translate("Strings must be in double quotes")},value:t})],0)],0)}}function ll(e){return e.filter(e=>e.isChecked).map(e=>e.value)}function cl(e,t){return-1!==e.indexOf(t)}class ul{constructor(e,t){t.registerProvider(e=>((0,u.Xy)(e.col)||(0,u.Mz)(e.col))&&"string"===dl(e)),e.onGetComponent("context-menu",(e={})=>{if(e.contextMenuType&&"simple-mode-edit"===e.contextMenuType){if(!e.element)return;if("string"===dl(e.element))return al}})}}function dl(e){return(0,u.Xy)(e.col)?e.col&&e.col.businessObject.inputExpression.typeRef:e.col&&e.col.businessObject.typeRef}ul.$inject=["components","simpleMode"];const pl={__depends__:[Fo,Vr],__init__:["simpleStringEdit"],simpleStringEdit:["type",ul]},hl=/^(?:\d\d:){2}\d\d(?:Z|(?:[@+-][^")]+))?$/,ml=/^\[time\("([^"]*)"\)..time\("([^"]*)"\)\]$/,gl=/^(<|>)\s*time\("([^"]*)"\)$/,fl=/^time\("([^"]*)"\)$/;function yl(e){if(!hl.test(e.trim()))return"Time must match pattern hh:mm:ss[time zone]"}function vl(e,t){return"exact"===e?`time("${t[0]}")`:"before"===e?`< time("${t[0]}")`:"after"===e?`> time("${t[0]}")`:"between"===e?`[time("${t[0]}")..time("${t[1]}")]`:void 0}function bl(){return(new Date).toISOString().slice(11,-5)+"Z"}function _l(e){if(!e||""===e.trim())return{type:"exact",time:""};let t=e.match(ml);return t?{type:"between",times:[t[1],t[2]]}:(t=e.match(gl),t?{type:"<"===t[1]?"before":"after",time:t[2]}:(t=e.match(fl),t?{type:"exact",time:t[1]}:void 0))}const xl="exact",Cl="between";class wl extends sn.uA{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._modeling=t.injector.get("modeling");const{element:n}=this.props.context,i=_l(n.businessObject.text);if(i){let e;e=i.time?[i.time,""]:i.times?i.times:["",""],this.state={type:i.type,times:e}}else this.state={type:xl,times:["",""]};const s=t.injector.get("debounceInput");this.debouncedEditCell=s(this.editCell.bind(this)),this.editCell=this.editCell.bind(this),this.onTypeChange=this.onTypeChange.bind(this),this.onSetStartTimeNowClick=this.onSetStartTimeNowClick.bind(this),this.onSetEndTimeNowClick=this.onSetEndTimeNowClick.bind(this),this.onStartTimeInput=this.onStartTimeInput.bind(this),this.onEndTimeInput=this.onEndTimeInput.bind(this)}editCell(e,t){this._modeling.editCell(e,t)}onTypeChange(e){const{element:t}=this.props.context,{times:n}=this.state;this.setState({type:e}),_l(vl(e,n))&&this.editCell(t.businessObject,vl(e,n))}onSetStartTimeNowClick(){const{element:e}=this.props.context,{times:t,type:n}=this.state,i=bl();this.setState({times:[i,t[1]]}),_l(vl(n,[i,t[1]]))&&this.editCell(e.businessObject,vl(n,[i,t[1]]))}onSetEndTimeNowClick(){const{element:e}=this.props.context,{times:t,type:n}=this.state,i=bl();this.setState({times:[t[0],i]}),_l(vl(n,[t[0],i]))&&this.editCell(e.businessObject,vl(n,[t[0],i]))}onStartTimeInput({value:e}){const{element:t}=this.props.context,{times:n,type:i}=this.state;this.setState({times:[e,n[1]]}),this.debouncedEditCell(t.businessObject,vl(i,[e,n[1]]))}onEndTimeInput({value:e}){const{element:t}=this.props.context,{times:n,type:i}=this.state;this.setState({times:[n[0],e]}),this.debouncedEditCell(t.businessObject,vl(i,[n[0],e]))}render(){const{times:e,type:t}=this.state,n=[{label:this._translate("Exactly"),value:xl},{label:this._translate("Before"),value:"before"},{label:this._translate("After"),value:"after"},{label:this._translate("Between"),value:Cl}];return(0,sn.bF)(1,"div","context-menu-container simple-time-edit",[(0,sn.bF)(1,"h3","dms-heading",this._translate("Edit time"),0),(0,sn.bF)(1,"div","dms-fill-row",(0,sn.sO)(2,go,{label:this._translate("Time"),noInput:!0,onChange:this.onTypeChange,options:n,value:t}),2),(0,sn.bF)(1,"h4","dms-heading",t===Cl?this._translate("Edit start time"):this._translate("Set time"),0),(0,sn.bF)(1,"div",null,[(0,sn.sO)(2,Co,{label:this._translate("Start time"),className:"start-time-input dms-block",onInput:this.onStartTimeInput,placeholder:this._translate("e.g. { example } ",{example:Qr()}),validate:e=>yl(e)&&this._translate(yl(e)),value:e[0]}),(0,sn.bF)(1,"p","dms-hint",[(0,sn.bF)(1,"button","use-now",this._translate("Use now"),0,{type:"button",onClick:this.onSetStartTimeNowClick}),(0,sn.eW)(".")],4)],4),t===Cl&&(0,sn.bF)(1,"h4","dms-heading",this._translate("Edit end time"),0),t===Cl&&(0,sn.bF)(1,"div",null,[(0,sn.sO)(2,Co,{label:this._translate("End time"),className:"end-time-input dms-block",onInput:this.onEndTimeInput,placeholder:this._translate("e.g. { example } ",{example:Qr()}),validate:e=>yl(e)&&this._translate(yl(e)),value:e[1]}),(0,sn.bF)(1,"p","dms-hint",[(0,sn.bF)(1,"button","use-now",this._translate("Use now"),0,{type:"button",onClick:this.onSetEndTimeNowClick}),(0,sn.eW)(".")],4)],4)],0)}}class El extends sn.uA{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._modeling=t.injector.get("modeling");const{element:n}=this.props.context,i=_l(n.businessObject.text);this.state={date:i?i.date:""};const s=t.injector.get("debounceInput");this.debouncedEditCell=s(this.editCell.bind(this)),this.editCell=this.editCell.bind(this),this.onClick=this.onClick.bind(this),this.onInput=this.onInput.bind(this)}editCell(e,t){this._modeling.editCell(e,t)}onClick(){const{element:e}=this.props.context,t=bl();this.setState({date:t}),this.editCell(e.businessObject,`time("${t}")`)}onInput({value:e}){const{element:t}=this.props.context;this.setState({date:e}),this.debouncedEditCell(t.businessObject,`time("${e}")`)}render(){const{date:e}=this.state;return(0,sn.bF)(1,"div","context-menu-container simple-time-edit",[(0,sn.bF)(1,"h3","dms-heading",this._translate("Edit time"),0),(0,sn.bF)(1,"h4","dms-heading",this._translate("Set time"),0),(0,sn.bF)(1,"div",null,[(0,sn.sO)(2,Co,{label:this._translate("Time value"),onInput:this.onInput,placeholder:this._translate("e.g. { example } ",{example:Qr()}),validate:e=>yl(e)&&this._translate(yl(e)),value:e,className:"dms-block"}),(0,sn.bF)(1,"p","dms-hint",[(0,sn.bF)(1,"button","use-now",this._translate("Use now"),0,{type:"button",onClick:this.onClick}),(0,sn.eW)(".")],4)],4)],4)}}class Dl{constructor(e,t){t.registerProvider(e=>{const t=Sl(e);return((0,u.Xy)(e.col)||(0,u.Mz)(e.col))&&Al(t)}),e.onGetComponent("context-menu",(e={})=>{if(e.contextMenuType&&"simple-mode-edit"===e.contextMenuType){if(!e.element)return;if(Al(Sl(e.element))){if((0,u.Xy)(e.element.col))return wl;if((0,u.Mz)(e.element.col))return El}}})}}function Sl(e){return(0,u.Xy)(e.col)?e.col&&e.col.businessObject.inputExpression.typeRef:e.col&&e.col.businessObject.typeRef}function Al(e){return"time"===e}Dl.$inject=["components","simpleMode"];const Rl={__depends__:[Fo,Vr],__init__:["simpleTimeEdit"],simpleTimeEdit:["type",Dl]};class Ml extends sn.uA{constructor(e,t){super(e,t),fn(this)}componentDidMount(){const e=this.getRoot();this.changeSupport.onElementsChanged(e,this.onElementsChanged)}componentWillUnmount(){const e=this.getRoot();this.changeSupport.offElementsChanged(e,this.onElementsChanged)}getRoot(){return this.sheet.getRoot()}onElementsChanged=()=>{this.forceUpdate()};handleMouseDown=e=>{!function({node:e,event:t,minWidth:n,onEnd:i=Il}){t.preventDefault();const s=e.getBoundingClientRect().width,o=t.clientX;let r;function a(t){t.preventDefault();const n=l(t.clientX);r&&cancelAnimationFrame(r),r=requestAnimationFrame(()=>{e.style.width=n+"px"})}function l(e){const t=e-o;return Math.max(s+t,n)}document.addEventListener("mousemove",a),document.addEventListener("mouseup",function e(t){t.preventDefault(),document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",e);const n=l(t.clientX);i(n)})}({node:(0,Q.kp)(e.target,"th",!1),event:e,minWidth:this.props.minWidth||150,onEnd:this.saveWidth})};saveWidth=e=>{const{col:t}=this.props,n={};(0,u.is)(t,"dmn:DecisionTable")?n.annotationsWidth=e:n.width=e,this.modeling.updateProperties(t,n)};isLastInputOrOutput(){const{col:e}=this.props,t=this.getRoot(),n=(0,u.Cf)(t);if((0,u.is)(e,"dmn:InputClause")){const t=n.get("input");return t.indexOf(e)===t.length-1}if((0,u.is)(e,"dmn:OutputClause")){const t=n.get("output");return t.indexOf(e)===t.length-1}}render(){const e=this.isLastInputOrOutput()?{right:"-7px",width:"27px"}:null;return(0,sn.bF)(1,"div","resize-column-handle",null,1,{onMouseDown:this.handleMouseDown,title:this.translate("Resize"),style:e})}}function Il(){}function jl(e){e.onGetComponent("cell-inner",(e={})=>{const{cellType:t}=e;if("input-cell"===t||"output-cell"===t||"annotations"===t)return Ml})}Ml.$inject=["sheet","changeSupport","translate","modeling"],jl.$inject=["components"];const Ol={__init__:["columnResizeProvider"],columnResizeProvider:["type",jl]};class kl extends hi{getModules(){return[...hi._getModules(),...kl._getModules()]}static _getModules(){return[ys,Rs,Gi,Ts,us,Bs,Ks,Gs,Zs,fs,To,Ol,Ho,er,nr,Hn,Yn,Fo,lr,gs,dr,xi,kr,$r,vi,Vr,qr,la,Ea,Ba,nl,pl,Rl,Kt]}}class Pl{constructor(e){this._listeners={},e.on("elements.changed",({elements:e})=>{this.elementsChanged(e)}),e.on("element.updateId",({element:e,newId:t})=>{this.updateId(e.id,t)})}elementsChanged(e){const t={},n=e.length;for(let i=0;i<n;i++){const{id:n}=e[i];if(t[n])return;t[n]=!0;const s=this._listeners[n]&&this._listeners[n].length;if(s)for(let e=0;e<s;e++)this._listeners[n][e]&&this._listeners[n][e]()}}onElementsChanged(e,t){this._listeners[e]||(this._listeners[e]=[]),this._listeners[e][this._listeners[e].length]=t}offElementsChanged(e,t){if(this._listeners[e])if(t){const n=this._listeners[e].indexOf(t);-1!==n&&this._listeners[e].splice(n,1)}else this._listeners[e].length=0}updateId(e,t){this._listeners[e]&&(this._listeners[t]=this._listeners[e],delete this._listeners[e])}}Pl.$inject=["eventBus"];class Fl extends sn.uA{constructor(e){super(e);const t=this._injector=e.injector;this._changeSupport=t.get("changeSupport"),this._components=t.get("components"),this._renderer=t.get("renderer")}getChildContext(){return{changeSupport:this._changeSupport,components:this._components,renderer:this._renderer,injector:this._injector}}render(){const e=this._components.getComponents("viewer");return(0,sn.bF)(1,"div","viewer-container",e&&e.map((e,t)=>(0,sn.sO)(2,e,null,t)),0)}}class Tl{constructor(e,t,n,i,s){const{container:o}=n;this._container=o,i.on("renderer.mount",()=>{(0,sn.XX)((0,sn.sO)(2,Fl,{injector:s}),o)}),i.on("renderer.unmount",()=>{(0,sn.XX)(null,o)})}getContainer(){return this._container}}Tl.$inject=["changeSupport","components","config.renderer","eventBus","injector"];const Nl={__init__:["changeSupport","components","renderer"],changeSupport:["type",Pl],components:["type",class{constructor(){this._listeners={}}getComponent(e,t){const n=this._listeners[e];if(!n)return;let i;for(let e=0;e<n.length&&(i=n[e].callback(t),!i);e++);return i}getComponents(e,t){const n=this._listeners[e];if(!n)return;const i=[];for(let e=0;e<n.length;e++){const s=n[e].callback(t);s&&i.push(s)}return i.length?i:void 0}onGetComponent(e,t,n){if((0,v.isFunction)(t)&&(n=t,t=1e3),!(0,v.isNumber)(t))throw new Error("priority must be a number");const i=this._getListeners(e);let s,o;const r={priority:t,callback:n};for(o=0;s=i[o];o++)if(s.priority<t)return void i.splice(o,0,r);i.push(r)}offGetComponent(e,t){const n=this._getListeners(e);let i,s,o;if(t)for(o=n.length-1;i=n[o];o--)s=i.callback,s===t&&n.splice(o,1);else n.length=0}_getListeners(e){let t=this._listeners[e];return t||(this._listeners[e]=t=[]),t}}],eventBus:["type",tn.A],renderer:["type",Tl]};class $l{constructor(e={}){let{injector:t}=e;if(!t){let{modules:n,config:i}=this._init(e);t=function(e,t){const n=[{config:["value",e]},Nl].concat(t||[]),i=new Wt.zZ(n);return i.init(),i}(i,n)}this.get=t.get,this.invoke=t.invoke,this.get("eventBus").fire("viewer.init")}_init(e){let{modules:t,...n}=e;return{modules:t,config:n}}destroy(){this.get("eventBus").fire("viewer.destroy")}clear(){this.get("eventBus").fire("viewer.clear")}}class Ll{constructor(e,t){this._eventBus=t,this._viewer=e}getDecision(){return this._viewer.getDecision()}updateId(e,t){if(e!==this.getDecision())throw new Error("element !== decision");this._eventBus.fire("element.updateId",{element:e,newId:t}),e.id=t}}Ll.$inject=["viewer","eventBus"];const Bl={__init__:["elementRegistry"],elementRegistry:["type",Ll]};class Vl extends sn.uA{constructor(e,t){super(e,t),this._viewer=t.injector.get("viewer")}render(){const{name:e}=this._viewer.getDecision();return(0,sn.bF)(1,"div","decision-properties",(0,sn.bF)(1,"h3","decision-name",e,0),2)}}class Ul{constructor(e){e.onGetComponent("viewer",1500,()=>Vl)}}Ul.$inject=["components"];const zl={__init__:["decisionProperties"],decisionProperties:["type",Ul]};class Kl extends sn.uA{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._viewer=t.injector.get("viewer")}render(){const{decisionLogic:e,variable:t}=this._viewer.getDecision();return(0,sn.bF)(1,"div","literal-expression-properties",(0,sn.bF)(1,"table",null,[(0,sn.bF)(1,"tr",null,[(0,sn.bF)(1,"td",null,this._translate("Variable name:"),0),(0,sn.bF)(1,"td",null,(0,sn.bF)(1,"span",null,t.name||"-",0),2)],4),(0,sn.bF)(1,"tr",null,[(0,sn.bF)(1,"td",null,this._translate("Variable type:"),0),(0,sn.bF)(1,"td",null,(0,sn.bF)(1,"span",null,this._translate(t.typeRef||"")||"-",0),2)],4),(0,sn.bF)(1,"tr",null,[(0,sn.bF)(1,"td",null,this._translate("Expression language:"),0),(0,sn.bF)(1,"td",null,(0,sn.bF)(1,"span",null,e.expressionLanguage||"-",0),2)],4)],4),2)}}class Wl{constructor(e){e.onGetComponent("viewer",500,()=>Kl)}}Wl.$inject=["components"];const ql={__depends__:[],__init__:["literalExpressionProperties"],literalExpressionProperties:["type",Wl]};class Gl{constructor(e){e.onGetComponent("viewer",2e3,()=>ui.v)}}Gl.$inject=["components"];const Hl={__init__:["poweredBy"],poweredBy:["type",Gl]};class Xl extends sn.uA{constructor(e,t){super(e,t),this._viewer=t.injector.get("viewer")}render(){const{text:e}=this._viewer.getDecision().decisionLogic;return(0,sn.bF)(1,"div","textarea",(0,sn.bF)(1,"div","content",e,0),2)}}class Yl{constructor(e){e.onGetComponent("viewer",()=>Xl)}}Yl.$inject=["components"];const Jl={__init__:["textarea"],textarea:["type",Yl]};class Zl extends sn.uA{constructor(e,t){super(e,t);const{injector:n}=t;this._translate=n.get("translate"),this._eventBus=n.get("eventBus")}onClick=()=>{this._eventBus.fire("showDrd")};render(){return(0,sn.bF)(1,"div","view-drd",(0,sn.bF)(1,"button","view-drd-button",this._translate("View DRD"),0,{type:"button",onClick:this.onClick}),2,null,null,e=>this.node=e)}}Zl.$inject=["translate"];class Ql{constructor(e,t,n,i){this._injector=i,this._viewer=t,e.onGetComponent("viewer",2e3,()=>{if(this.canViewDrd())return Zl}),n.on("showDrd",()=>{const e=i.get("_parent",!1),t=this.getDefinitions(),n=e.getView(t);e.open(n)})}canViewDrd(){const e=this._injector.get("_parent",!1);if(!e)return;const t=this.getDefinitions();return!!e.getView(t)}getDefinitions(){return this._viewer.getDecision().$parent}}Ql.$inject=["components","viewer","eventBus","injector"];const ec={__init__:["viewDrd"],viewDrd:["type",Ql]};class tc extends $l{constructor(e={}){const t=tc._createContainer();super((0,v.assign)(e,{renderer:{container:t}})),this._container=t}open(e){var t=this;return new Promise(function(n,i){var s;try{t._decision&&(t.clear(),t.get("eventBus").fire("renderer.unmount")),t._decision=e,t.get("eventBus").fire("import",e),t.get("eventBus").fire("renderer.mount")}catch(e){s=e}s?(s.warnings=s.warnings||[],i(s)):n({warnings:[]})})}_init(e){let{modules:t,additionalModules:n,...i}=e;return{modules:[...t||this.getModules(),...n||[],{viewer:["value",this]}],config:i}}on(e,t,n,i){return this.get("eventBus").on(e,t,n,i)}off(e,t){this.get("eventBus").off(e,t)}_emit(e,t){return this.get("eventBus").fire(e,t)}getDecision(){return this._decision}attachTo(e){if(!e)throw new Error("parentNode required");this.detach(),e.appendChild(this._container),this._emit("attach",{})}detach(){const e=this._container;e.parentNode&&(this._emit("detach",{}),(0,Q.TF)(e))}destroy(){super.destroy(),this.detach()}getModules(){return tc._getModules()}static _getModules(){return[Bl,P.A,zl,ql,Hl,Jl,ec]}static _createContainer(){return te()('<div class="dmn-literal-expression-container"></div>')}}class nc extends sn.uA{constructor(e,t){super(e,t),this._viewer=t.injector.get("viewer"),this._modeling=t.injector.get("modeling"),this._translate=t.injector.get("translate"),this.setupChangeListeners({bind:this.getDecision().id})}componentWillUnmount(){this.setupChangeListeners({unbind:this.getDecision().id})}getDecision(){return this._viewer.getDecision()}onElementsChanged=()=>{this.forceUpdate()};setupChangeListeners({bind:e,unbind:t}){const{changeSupport:n}=this.context;"string"==typeof t&&n.offElementsChanged(t,this.onElementsChanged),"string"==typeof e&&n.onElementsChanged(e,this.onElementsChanged)}setDecisionName=e=>{this._modeling.editDecisionName(e)};render(){const{name:e}=this.getDecision();return(0,sn.bF)(1,"header","decision-properties",(0,sn.sO)(2,ic,{label:this._translate("Decision name"),className:"decision-name editor",value:e,onBlur:sc,onChange:this.setDecisionName}),2)}}class ic extends Cs{render(){return(0,sn.bF)(1,"h3",this.getClassName(),this.getEditor(),0)}}function sc(e){e.target.scroll(0,0)}class oc{constructor(e){e.onGetComponent("viewer",1500,()=>nc)}}oc.$inject=["components"];const rc={__depends__:[As,P.A],__init__:["decisionProperties"],decisionProperties:["type",oc]},ac="is not a registered action";class lc{constructor(e,t){this._actions={undo(){e.undo()},redo(){e.redo()}}}trigger(e,t){if(!this._actions[e])throw cc(e,ac);return this._actions[e](t)}register(e,t){if("string"==typeof e)return this._registerAction(e,t);(0,v.forEach)(e,(e,t)=>{this._registerAction(t,e)},this)}_registerAction(e,t){if(this.isRegistered(e))throw cc(e,"is already registered");this._actions[e]=t}unregister(e){if(!this.isRegistered(e))throw cc(e,ac);this._actions[e]=void 0}isRegistered(e){return!!this._actions[e]}}function cc(e,t){return new Error(e+" "+t)}lc.$inject=["commandStack","eventBus"];const uc={__init__:["editorActions"],editorActions:["type",lc]};function dc(e){return!e.altKey&&(e.ctrlKey||e.metaKey)}function pc(e){return e.shiftKey}var hc="Keyboard binding is now implicit; explicit binding to an element got removed. For more information, see https://github.com/bpmn-io/diagram-js/pull/662";class mc{constructor(e,t,n,i){this._config=e||{},this._eventBus=t,this._editorActions=n,this._listeners=[],t.on("viewer.destroy",this._destroy),t.on("viewer.init",this._init),t.on("attach",()=>{this._config.bindTo&&console.error("unsupported configuration <keyboard.bindTo>",new Error(hc)),this._target=i.getContainer(),this._config&&!1!==this._config.bind&&this.bind()}),t.on("detach",this.unbind)}_init=()=>{this._registerDefaultBindings(),this._fire("init")};_destroy=()=>{this._fire("destroy"),this.unbind(),this._listeners=null};_keyHandler=e=>{var t,n,i=this._listeners,s=e.keyCode||e.charCode||-1;for(t=0;n=i[t];t++)if(n(s,e))return e.preventDefault(),void e.stopPropagation()};bind(e){e&&console.error("unsupported argument <node>",new Error(hc)),this.unbind(),e=this._node=this._target,Q.f0.bind(e,"keydown",this._keyHandler,!0),this._fire("bind")}getBinding(){return this._node}unbind=()=>{var e=this._node;e&&(this._fire("unbind"),Q.f0.unbind(e,"keydown",this._keyHandler,!0)),this._node=null};_fire(e){this._eventBus.fire("keyboard."+e,{node:this._node,listeners:this._listeners})}_registerDefaultBindings(){var e=this._listeners,t=this._editorActions;e.push(function(e,n){if(dc(n)&&!pc(n)&&90===e)return t.trigger("undo"),!0}),e.push(function(e,n){if(dc(n)&&(89===e||90===e&&pc(n)))return t.trigger("redo"),!0})}addListener(e){this._listeners.unshift(e)}removeListener(e){this._listeners=this._listeners.filter(t=>t!==e)}}mc.$inject=["config.keyboard","eventBus","editorActions","renderer"];const gc={__depends__:[uc],__init__:["keyboard"],keyboard:["type",mc]};class fc extends sn.uA{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._viewer=t.injector.get("viewer"),this._modeling=t.injector.get("modeling"),this._dataTypes=t.injector.get("dataTypes"),this._eventBus=t.injector.get("eventBus");const n=this._viewer.getDecision();this.state={name:n.variable.name,typeRef:n.variable.typeRef},this.setVariableName=this.setVariableName.bind(this),this.setVariableType=this.setVariableType.bind(this)}setVariableName(e){this._modeling.editVariableName(e),this.setState({name:e})}componentWillMount(){this._eventBus.on("elements.changed",this.onChange)}componentWillUnmount(){this._eventBus.off("elements.changed",this.onChange)}onChange=()=>{const e=this._viewer.getDecision();e.variable&&this.setState({name:e.variable.name})};setVariableType(e){""===e?(this._modeling.editVariableType(void 0),this.setState({typeRef:void 0})):(this._modeling.editVariableType(e),this.setState({typeRef:e}))}render(){const{name:e,typeRef:t}=this.state,n=this._dataTypes.getAll().map(e=>({label:this._translate(e),value:e}));return(0,sn.bF)(1,"div","literal-expression-properties",(0,sn.bF)(1,"table","variables-table",[(0,sn.bF)(1,"tr",null,[(0,sn.bF)(1,"td",null,this._translate("Variable name:"),0),(0,sn.bF)(1,"td",null,(0,sn.sO)(2,eo,{label:this._translate("Variable name"),className:"variable-name-input",onInput:this.setVariableName,placeholder:this._translate("name"),value:e||""}),2)],4),(0,sn.bF)(1,"tr",null,[(0,sn.bF)(1,"td",null,this._translate("Variable type:"),0),(0,sn.bF)(1,"td",null,(0,sn.bF)(1,"div","dms-fill-row",(0,sn.sO)(2,go,{label:this._translate("Variable type"),onChange:this.setVariableType,options:n,value:t,className:"variable-type-select dms-block"}),2),2)],4),(0,sn.sO)(2,yc)],4),2)}}class yc extends sn.uA{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._viewer=t.injector.get("viewer"),this._modeling=t.injector.get("modeling"),this._expressionLanguages=t.injector.get("expressionLanguages"),this.setExpressionLanguage=this.setExpressionLanguage.bind(this)}setExpressionLanguage(e){""===e?this._modeling.editExpressionLanguage(void 0):this._modeling.editExpressionLanguage(e)}_getExpressionLanguage(){const e=this._viewer.getDecision().decisionLogic;return e&&e.expressionLanguage?e.expressionLanguage.toLowerCase():this._getDefaultExpressionLanguage()}_getDefaultExpressionLanguage(){return this._expressionLanguages.getDefault().value}_shouldRender(){return this._expressionLanguages.getAll().length>1||this._getExpressionLanguage()!==this._getDefaultExpressionLanguage()}render(){if(!this._shouldRender())return null;const e=this._getExpressionLanguage(),t=this._expressionLanguages.getAll();return(0,sn.bF)(1,"tr",null,[(0,sn.bF)(1,"td",null,this._translate("Expression language:"),0),(0,sn.bF)(1,"td",null,(0,sn.bF)(1,"div","dms-fill-row",(0,sn.sO)(2,go,{label:this._translate("Expression language"),onChange:this.setExpressionLanguage,options:t,value:e,className:"expression-language-select dms-block"}),2),2)],4)}}class vc{constructor(e){e.onGetComponent("viewer",500,()=>fc)}}vc.$inject=["components"];const bc={__depends__:[As,gc,Hn,Yn,Gs],__init__:["literalExpressionProperties"],literalExpressionProperties:["type",vc]};var _c=n(95917);class xc{constructor(e,t,n){this._commandStack=e,this._viewer=t,this._eventBus=n,n.on("viewer.init",()=>{!function(e,t){(0,v.forEach)(e,function(e,n){t.registerHandler(n,e)})}(this.getHandlers(),e)})}getHandlers(){return xc._getHandlers()}static _getHandlers(){return{"element.updateProperties":Ar}}getDecision(){return this._viewer.getDecision()}editDecisionName(e){const t={element:this.getDecision(),properties:{name:e}};this._commandStack.execute("element.updateProperties",t)}editDecisionId(e){const t={element:this.getDecision(),properties:{id:e}};this._commandStack.execute("element.updateProperties",t)}editLiteralExpressionText(e){const t={element:this.getDecision().decisionLogic,properties:{text:e}};this._commandStack.execute("element.updateProperties",t)}editExpressionLanguage(e){const t={element:this.getDecision().decisionLogic,properties:{expressionLanguage:e}};this._commandStack.execute("element.updateProperties",t)}editVariableName(e){const t={element:this.getDecision().variable,properties:{name:e}};this._commandStack.execute("element.updateProperties",t)}editVariableType(e){const t={element:this.getDecision().variable,properties:{typeRef:e}};this._commandStack.execute("element.updateProperties",t)}updateProperties(e,t){const n={element:e,properties:t};this._commandStack.execute("element.updateProperties",n)}}xc.$inject=["commandStack","viewer","eventBus"];const Cc={__init__:["idChangeBehavior","nameChangeBehavior","modeling"],commandStack:["type",_c.A],idChangeBehavior:["type",Le],nameChangeBehavior:["type",Be],modeling:["type",xc]};class wc extends sn.uA{constructor(e,t){super(e,t),this._modeling=t.injector.get("modeling"),this._viewer=t.injector.get("viewer"),this._expressionLanguages=t.injector.get("expressionLanguages"),this._variableResolver=t.injector.get("variableResolver",!1),this._translate=t.injector.get("translate"),this.editLiteralExpressionText=this.editLiteralExpressionText.bind(this),this.onElementsChanged=this.onElementsChanged.bind(this);const{id:n}=this.getLiteralExpression();t.changeSupport.onElementsChanged(n,this.onElementsChanged)}getLiteralExpression(){return this._viewer.getDecision().decisionLogic}onElementsChanged(){this.forceUpdate()}editLiteralExpressionText(e){this._modeling.editLiteralExpressionText(e)}getEditor(){return this.isFeel()?Ec:Dc}isFeel(){return"feel"===this.getExpressionLanguage()}getExpressionLanguage(){return this.getLiteralExpression().expressionLanguage||this._expressionLanguages.getDefault().value}_getVariables(){const e=this.getLiteralExpression();return this._variableResolver&&this._variableResolver.getVariables(e)}render(){const{text:e}=this.getLiteralExpression(),t=this.getEditor(),n=this._getVariables();return(0,sn.sO)(2,t,{label:this._translate("Literal expression editor"),className:"textarea editor",value:e,onChange:this.editLiteralExpressionText,variables:n})}}class Ec extends sn.uA{render(){return(0,sn.sO)(2,co,{label:this.props.label,className:this.props.className,value:this.props.value,onInput:this.props.onChange,variables:this.props.variables})}}class Dc extends Cs{render(){return(0,sn.bF)(1,"div",this.getClassName(),this.getEditor(),0)}}class Sc{constructor(e){e.onGetComponent("viewer",()=>wc)}}Sc.$inject=["components"];const Ac={__depends__:[As,P.A],__init__:["textarea"],textarea:["type",Sc]};class Rc extends tc{getModules(){return[...tc._getModules(),...Rc._getModules()]}static _getModules(){return[rc,gc,bc,Cc,Hn,Yn,Gs,Ac,Kt]}}function Mc(e,{injector:t}){const n=t.get("components").getComponents("header");return(0,sn.bF)(1,"div","dmn-boxed-expression-section dmn-boxed-expression-header",n&&n.map((e,t)=>(0,sn.sO)(2,e,null,t)),0)}function Ic(e,{injector:t}){const n=t.get("components").getComponents("body");return(0,sn.bF)(1,"div","dmn-boxed-expression-section dmn-boxed-expression-body",n&&n.map((e,t)=>(0,sn.sO)(2,e,null,t)),0)}function jc(e,{injector:t}){const n=t.get("components").getComponents("footer");return(0,sn.bF)(1,"div","dmn-boxed-expression-section dmn-boxed-expression-footer",n&&n.map((e,t)=>(0,sn.sO)(2,e,null,t)),0)}const Oc={__init__:["viewRenderer","tableJsSupport"],viewRenderer:["type",class{static $inject=["components"];constructor(e){e.onGetComponent("viewer",()=>Mc),e.onGetComponent("viewer",()=>Ic),e.onGetComponent("viewer",()=>jc)}}],tableJsSupport:["type",class{static $inject=["components"];constructor(e){e.onGetComponent("viewer",()=>{const t=e.getComponents("table.before")||[];return()=>(0,sn.bF)(1,"div",null,t.map((e,t)=>(0,sn.sO)(2,e,null,t)),0)})}}]};class kc{constructor(e){e.onGetComponent("viewer",2e3,()=>ui.v)}}kc.$inject=["components"];const Pc={__init__:["poweredBy"],poweredBy:["type",kc]};function Fc({expression:e},t){const n=t.injector.get("literalExpression").getText(e);return(0,sn.bF)(1,"div","textarea",(0,sn.bF)(1,"div","content",n,0),2)}class Tc{getText(e){return e.get("text")}}const Nc={__init__:["literalExpressionComponent"],literalExpressionComponent:["type",class{static $inject=["components"];constructor(e){e.onGetComponent("expression",({expression:e})=>{if((0,u.is)(e,"dmn:LiteralExpression"))return Fc})}}],literalExpression:["type",Tc]};class $c{getParameters(e){return e.get("formalParameter")}getBody(e){return e.get("body")}getKind(e){return e.get("kind")||"FEEL"}}function Lc({expression:e},t){const n=t.injector.get("functionDefinition"),i=n.getKind(e),s=n.getParameters(e),o=n.getBody(e);return(0,sn.bF)(1,"div","function-definition",[(0,sn.sO)(2,Vc,{kind:i}),(0,sn.sO)(2,Uc,{parameters:s}),(0,sn.sO)(2,Kc,{expression:o})],4)}const Bc={FEEL:"F",Java:"J",PMML:"P"};function Vc({kind:e},t){const n=t.injector.get("translate");return(0,sn.bF)(1,"div","function-definition-kind",Bc[e],0,{title:n("Function kind: {kind}",{kind:e})})}function Uc({parameters:e}){return(0,sn.bF)(1,"div","function-definition-parameters",(0,sn.bF)(1,"div",null,[(0,sn.eW)("("),e.reduce((e,t)=>e.concat((0,sn.sO)(2,zc,{parameter:t}),", "),[]).slice(0,-1),(0,sn.eW)(")")],0),2)}function zc({parameter:e}){const{name:t,typeRef:n}=e,i=t||"<unnamed>";return(0,sn.bF)(1,"span",null,n?`${i}: ${n}`:i,0)}function Kc({expression:e},t){const n=t.components.getComponent("expression",{expression:e});return(0,sn.bF)(1,"div","function-definition-body",(0,sn.sO)(2,n,{expression:e}),2)}const Wc={__init__:["functionDefinitionComponent"],functionDefinition:["type",$c],functionDefinitionComponent:["type",class{static $inject=["components"];constructor(e){e.onGetComponent("expression",({expression:e})=>{if((0,u.is)(e,"dmn:FunctionDefinition"))return Lc})}}]};class qc extends sn.uA{constructor(e,t){super(e,t);const{injector:n}=t;this._translate=n.get("translate"),this._eventBus=n.get("eventBus")}onClick=()=>{this._eventBus.fire("showDrd")};render(){return(0,sn.bF)(1,"div","view-drd",(0,sn.bF)(1,"button","view-drd-button",this._translate("View DRD"),0,{type:"button",onClick:this.onClick}),2,null,null,e=>this.node=e)}}qc.$inject=["translate"];class Gc{constructor(e,t,n){this._injector=n,e.onGetComponent("viewer",2e3,()=>{if(this.canViewDrd())return qc}),t.on("showDrd",()=>{const e=n.get("_parent",!1),t=e.getDefinitions(),i=e.getView(t);e.open(i)})}canViewDrd(){const e=this._injector.get("_parent",!1);if(!e)return;const t=e.getDefinitions();return!!e.getView(t)}}Gc.$inject=["components","eventBus","injector"];const Hc={__init__:["viewDrd"],viewDrd:["type",Gc]};function Xc(e,t){const n=t.injector.get("viewer"),{name:i}=n.getRootElement();return(0,sn.bF)(1,"div","element-properties",(0,sn.bF)(1,"h2","element-name",i,0),2)}class Yc{constructor(e){e.onGetComponent("header",()=>Xc)}}Yc.$inject=["components"];const Jc={__init__:["elementProperties"],elementProperties:["type",Yc]};function Zc(e,{injector:t}){const n=t.get("components"),i=(o=t.get("viewer").getRootElement(),(0,u.is)(o,"dmn:Decision")?o.get("decisionLogic"):(0,u.is)(o,"dmn:BusinessKnowledgeModel")?o.get("encapsulatedLogic"):void 0),s=n.getComponent("expression",{expression:i});var o;return(0,sn.sO)(2,s,{expression:i})}function Qc({expression:e}){return(0,sn.bF)(1,"div",null,(0,sn.bF)(1,"span",null,[(0,sn.eW)("Expression of type "),e.$type,(0,sn.eW)(" is not supported.")],0,{style:"color:red;"}),2)}const eu={__init__:["elementLogic"],elementLogic:["type",class{static $inject=["components"];constructor(e){e.onGetComponent("body",()=>Zc),e.onGetComponent("expression",100,()=>Qc)}}]};class tu{static $inject=["viewer"];constructor(e){this._viewer=e}getName(){const e=this.getVariable(),t=this._getElement();return(e?e.get("name"):null)||t.get("name")}getType(){const e=this.getVariable();return e?e.get("typeRef"):"Any"}_getElement(){return this._viewer.getRootElement()}getVariable(){return this._getElement().get("variable")}}function nu(e,t){const n=t.injector.get("elementVariable"),i=t.injector.get("translate"),s=n.getName(),o=n.getType();return(0,sn.bF)(1,"div","element-variable",[(0,sn.bF)(1,"h2",null,(0,sn.eW)("Result"),2),(0,sn.bF)(1,"div","element-variable-name",[(0,sn.bF)(1,"span","element-variable-name-label",i("Variable name"),0),(0,sn.bF)(1,"span",null,s,0)],4),(0,sn.bF)(1,"div","element-variable-type",[(0,sn.bF)(1,"span","element-variable-type-label",i("Variable type"),0),(0,sn.bF)(1,"span",null,o,0)],4)],4)}const iu={__init__:["elementVariableComponent"],elementVariable:["type",tu],elementVariableComponent:["type",class{static $inject=["components"];constructor(e){e.onGetComponent("footer",()=>nu)}}]};class su extends $l{constructor(e={}){const t=su._createContainer();super((0,v.assign)(e,{renderer:{container:t}})),this._container=t}open(e){const t=this.get("eventBus");return new Promise((n,i)=>{let s;try{this.getRootElement()&&(this.clear(),t.fire("renderer.unmount")),this._setRootElement(e),t.fire("import",e),t.fire("renderer.mount")}catch(e){s=e}s?(s.warnings=s.warnings||[],i(s)):n({warnings:[]})})}_init(e){let{modules:t,additionalModules:n,...i}=e;return{modules:[...t||this.getModules(),...n||[],{viewer:["value",this]}],config:i}}on(e,t,n,i){return this.get("eventBus").on(e,t,n,i)}off(e,t){this.get("eventBus").off(e,t)}_emit(e,t){return this.get("eventBus").fire(e,t)}getRootElement(){return this._root}_setRootElement(e){this._root=e}attachTo(e){if(!e)throw new Error("parentNode required");this.detach(),e.appendChild(this._container),this._emit("attach",{})}detach(){const e=this._container;e.parentNode&&(this._emit("detach",{}),(0,Q.TF)(e))}destroy(){super.destroy(),this.detach()}getModules(){return[Oc,P.A,Pc,Hc,Jc,eu,Wc,Nc,iu]}static _createContainer(){return te()('<div class="dmn-boxed-expression-container"></div>')}}var ou=n(56287);const ru={__depends__:[_e.A],__init__:["keyboardBindings"],keyboardBindings:["type",class{static $inject=["editorActions","keyboard"];constructor(e,t){this.registerBindings(t,e)}registerBindings(e,t){function n(n,i){t.isRegistered(n)&&e.addListener(i)}n("undo",function(e){const n=e.keyEvent;if((0,ou.DG)(n))return t.trigger("undo"),!0}),n("redo",function(e){const n=e.keyEvent;if((0,ou.hM)(n))return t.trigger("redo"),!0})}}]};class au extends ke.A{static $inject=["eventBus","modeling"];constructor(e,t){super(e),this._modeling=t,this.postExecuted("element.updateProperties",this.updateName)}updateName=({context:e})=>{const{element:t,properties:n}=e;this.isNameChanged(n)&&(this.isVariable(t)?this.handleVariableNameChange(t):this.isVariableContainer(t)&&this.handleVariableContainerNameChange(t))};isNameChanged(e){return"name"in e}isVariable(e){const t=lu(e);return(0,u.is)(e,"dmn:InformationItem")&&t&&t.get("variable")===e}isVariableContainer(e){const t=e.get("variable");return t&&(0,u.is)(t,"dmn:InformationItem")}handleVariableNameChange(e){const t=lu(e),n=e.get("name");n!==t.get("name")&&this._modeling.updateProperties(t,{name:n})}handleVariableContainerNameChange(e){const t=e.get("variable"),n=e.get("name");t&&n!==t.get("name")&&this._modeling.updateProperties(t,{name:n})}}function lu(e){return e.$parent}class cu{constructor(e,t,n){this._commandStack=e,this._viewer=t,this._eventBus=n,function(e,t){(0,v.forEach)(e,function(e,n){t.registerHandler(n,e)})}(this._getHandlers(),e)}_getHandlers(){return{"element.updateProperties":Ar}}updateProperties(e,t){const n={element:e,properties:t};this._commandStack.execute("element.updateProperties",n)}}cu.$inject=["commandStack","viewer","eventBus"];const uu={__init__:["idChangeBehavior","modeling","nameChangeBehavior"],commandStack:["type",_c.A],idChangeBehavior:["type",Le],modeling:["type",cu],nameChangeBehavior:["type",au]};function du(e,t){return function(n){return(0,sn._B)((0,sn.sO)(2,pu,{...n,_component:e,_selectDependencies:t}))}}class pu extends sn.uA{constructor(e,t){super(e,t),this._eventBus=t.injector.get("eventBus")}componentDidMount(){this._subscribe()}componentWillUnmount(){this._unsubscribe()}_subscribe(){this._eventBus.on("elements.changed",this.onChange)}_unsubscribe(){this._eventBus.off("elements.changed",this.onChange)}onChange=({elements:e})=>{this.props._selectDependencies(this.props).some(t=>e.includes(t))&&this.forceUpdate()};render(){const e=this.props._component;return(0,sn._B)((0,sn.sO)(2,e,{...this.props}))}}class hu extends sn.uA{constructor(e,t){super(e,t),this._literalExpression=t.injector.get("literalExpression"),this._translate=t.injector.get("translate"),this._expressionLanguages=t.injector.get("expressionLanguages"),this._variableResolver=t.injector.get("variableResolver",!1)}getLiteralExpression(){return this.props.expression}editLiteralExpressionText=e=>{const t=this.getLiteralExpression();this._literalExpression.setText(t,e)};getEditor(){return this.isFeel()?mu:gu}isFeel(){const e=this.getLiteralExpression();return(0,u.Fm)(e)}_getVariables(){const e=this.getLiteralExpression();return this._variableResolver&&this._variableResolver.getVariables(e)}render(){const{text:e}=this.getLiteralExpression(),t=this.getEditor(),n=this._getVariables(),i=this._translate("Literal expression");return(0,sn.sO)(2,t,{label:i,className:"textarea editor",value:e,onChange:this.editLiteralExpressionText,variables:n})}}function mu(e){return(0,sn._B)((0,sn.sO)(2,co,{...e,onChange:e.onChange}))}class gu extends Cs{render(){return(0,sn.bF)(1,"div",this.getClassName(),this.getEditor(),0)}}const fu=du(hu,e=>[e.expression]);class yu extends Tc{constructor(e){super(),this._modeling=e}setText(e,t){this._modeling.updateProperties(e,{text:t})}}yu.$inject=["modeling"];const vu={__init__:["literalExpressionComponent"],literalExpressionComponent:["type",class{static $inject=["components"];constructor(e){e.onGetComponent("expression",({expression:e})=>{if((0,u.is)(e,"dmn:LiteralExpression"))return fu})}}],literalExpression:["type",yu]};function bu({label:e,onClick:t}){return(0,sn.bF)(1,"button","edit-button dmn-icon-edit",null,1,{"aria-label":e,type:"button",onClick:t})}const _u=du(function({expression:e},t){const n=t.injector.get("functionDefinition"),i=t.injector.get("contextMenu"),s=n.getKind(e),o=n.getParameters(e),r=n.getBody(e);return(0,sn.bF)(1,"div","function-definition",[(0,sn.sO)(2,Cu,{kind:s,openEditor:t=>{const n=Su(t);i.open(n,{contextMenuType:"kind-editor",expression:e})}}),(0,sn.sO)(2,wu,{parameters:o,openEditor:t=>{const n=Su(t);i.open(n,{contextMenuType:"formal-parameters-editor",expression:e})}}),(0,sn.sO)(2,Du,{expression:r,parameters:o})],4)},e=>[e.expression]),xu={FEEL:"F",Java:"J",PMML:"P"};function Cu({kind:e,openEditor:t},n){const i=n.injector.get("translate");return(0,sn.bF)(1,"div","function-definition-kind",[xu[e],(0,sn.sO)(2,bu,{label:i("Edit function kind"),onClick:t})],0)}function wu({openEditor:e,parameters:t},n){const i=n.injector.get("translate");return(0,sn.bF)(1,"div","function-definition-parameters",[(0,sn.bF)(1,"div",null,[(0,sn.eW)("("),t.reduce((e,t)=>e.concat((0,sn.sO)(2,Eu,{parameter:t}),", "),[]).slice(0,-1),(0,sn.eW)(")")],0),(0,sn.sO)(2,bu,{label:i("Edit formal parameters"),onClick:e})],4)}const Eu=du(function({parameter:e}){const{name:t,typeRef:n}=e,i=t||"<unnamed>";return(0,sn.bF)(1,"span",null,n?`${i}: ${n}`:i,0)},e=>[e.parameter]),Du=du(function({expression:e,parameters:t},n){const i=n.components.getComponent("expression",{expression:e});return(0,sn.bF)(1,"div","function-definition-body",(0,sn.sO)(2,i,{expression:e,parameters:t}),2)},e=>e.parameters);function Su(e){const t=e.target.parentElement.getBoundingClientRect();return{x:t.x,y:t.y}}const Au=[{value:"FEEL",label:"FEEL"},{value:"Java",label:"Java"},{value:"PMML",label:"PMML"}];function Ru({context:{expression:e}},t){const n=t.injector.get("functionDefinition"),i=t.injector.get("translate"),s=n.getKind(e);return(0,sn.bF)(1,"div","context-menu-container",[(0,sn.bF)(1,"h3",null,i("Edit function kind"),0),(0,sn.sO)(2,go,{label:i("Kind"),options:Au,value:s,onChange:t=>{n.setKind(e,t)},noInput:!0})],4)}const Mu=du(function({context:{expression:e}},t){const n=t.injector.get("functionDefinition"),i=t.injector.get("translate"),s=n.getParameters(e);return(0,sn.bF)(1,"div","context-menu-container formal-parameters",[(0,sn.bF)(1,"h3",null,i("Edit formal parameters"),0),s.length?(0,sn.bF)(1,"table",null,[(0,sn.bF)(1,"thead",null,(0,sn.bF)(1,"tr",null,[(0,sn.bF)(1,"th",null,(0,sn.eW)("Name"),2),(0,sn.bF)(1,"th",null,(0,sn.eW)("Type"),2)],4),2),(0,sn.bF)(1,"tbody",null,s.map((t,i)=>(0,sn.sO)(2,Iu,{parameter:t,remove:()=>(t=>{n.removeParameter(e,t)})(t)},i)),0)],4):null,(0,sn.bF)(1,"button","add-parameter",i("Add parameter"),0,{type:"button",onClick:()=>{n.addParameter(e)}})],0)},e=>[e.context.expression]),Iu=du(function({parameter:e,remove:t},n){const i=n.injector.get("dataTypes"),s=n.injector.get("translate"),o=n.injector.get("functionDefinition"),{name:r,typeRef:a}=e,l=i.getAll().map(e=>({label:s(e),value:e}));return(0,sn.bF)(1,"tr","function-definition-parameter",[(0,sn.bF)(1,"td",null,(0,sn.sO)(2,eo,{onChange:t=>{o.updateParameter(e,{name:t})},value:r}),2),(0,sn.bF)(1,"td",null,(0,sn.sO)(2,go,{onChange:t=>{o.updateParameter(e,{typeRef:t})},value:a,options:l}),2),(0,sn.bF)(1,"td",null,(0,sn.bF)(1,"button","dmn-icon-trash",null,1,{type:"button",onClick:t,"aria-label":s("Remove parameter")}),2)],4)},e=>[e.parameter]),ju={__init__:["formalParametersEditorComponent","functionDefinitionComponent","kindEditorComponent"],__depends__:[Ts],formalParametersEditorComponent:["type",class{static $inject=["components"];constructor(e){e.onGetComponent("context-menu",(e={})=>{if(e.contextMenuType&&"formal-parameters-editor"===e.contextMenuType)return Mu})}}],functionDefinition:["type",class extends $c{static $inject=["modeling","dmnFactory"];constructor(e,t){super(),this._modeling=e,this._dmnFactory=t}addParameter(e){this._modeling.updateProperties(e,{formalParameter:[...this.getParameters(e),this._dmnFactory.create("dmn:InformationItem",{name:"",typeRef:""})]})}removeParameter(e,t){this._modeling.updateProperties(e,{formalParameter:this.getParameters(e).filter(e=>e!==t)})}updateParameter(e,t){this._modeling.updateProperties(e,t)}setKind(e,t){this._modeling.updateProperties(e,{kind:t})}}],functionDefinitionComponent:["type",class{static $inject=["components"];constructor(e){e.onGetComponent("expression",({expression:e})=>{if((0,u.is)(e,"dmn:FunctionDefinition"))return _u})}}],kindEditorComponent:["type",class{static $inject=["components"];constructor(e){e.onGetComponent("context-menu",(e={})=>{if(e.contextMenuType&&"kind-editor"===e.contextMenuType)return Ru})}}]},Ou=du(function(e,t){const{element:n}=e,i=t.injector.get("modeling"),s=t.injector.get("translate"),o=n.get("name");return(0,sn.sO)(2,eo,{label:s("Element name"),className:"element-name editor",value:o,onChange:e=>{i.updateProperties(n,{name:e})}})},e=>[e.element]);function ku(e,t){const n=t.injector.get("viewer").getRootElement();return(0,sn.bF)(1,"div","element-properties",(0,sn.sO)(2,Ou,{element:n}),2)}class Pu{constructor(e){e.onGetComponent("header",()=>ku)}}Pu.$inject=["components"];const Fu={__depends__:[As],__init__:["elementProperties"],elementProperties:["type",Pu]};class Tu{constructor(e,t){this._eventBus=t,this._viewer=e}updateId(e,t){if(e!==this._viewer.getRootElement())throw new Error("element !== rootElement");this._eventBus.fire("element.updateId",{element:e,newId:t}),e.id=t}}Tu.$inject=["viewer","eventBus"];const Nu={__init__:["elementRegistry"],elementRegistry:["type",Tu],dmnFactory:["type",class{static $inject=["moddle"];constructor(e){this._moddle=e}create(e,t={}){return this._moddle.create(e,t)}}]},$u="dmn-boxed-expression-variable-type";function Lu(e,t){const n=t.injector.get("elementVariable"),i=t.injector.get("translate"),s=n.getName();return(0,sn.bF)(1,"div","element-variable",[(0,sn.bF)(1,"h2",null,(0,sn.eW)("Result"),2),(0,sn.bF)(1,"div","element-variable-name",[(0,sn.bF)(1,"span","element-variable-name-label",i("Variable name"),0),(0,sn.bF)(1,"span",null,s,0)],4),(0,sn.bF)(1,"div","element-variable-type",[(0,sn.bF)(1,"label","element-variable-type-label",(0,sn.eW)("Result type"),2,{for:$u}),(0,sn.sO)(2,Bu)],4)],4)}function Bu(e,t){const n=t.injector.get("elementVariable"),i=t.injector.get("dataTypes"),s=t.injector.get("translate"),o=n.getType(),r=i.getAll().map(e=>({label:s(e),value:e}));return(0,sn.sO)(2,go,{value:o,onChange:e=>n.setType(e),options:r,id:$u})}const Vu={__init__:["elementVariableComponent"],elementVariable:["type",class extends tu{static $inject=["viewer","modeling","dmnFactory"];constructor(e,t,n){super(e),this._modeling=t,this._dmnFactory=n}setType(e){const t=this.getVariable();if(!t){const t=this._getElement();return void this._modeling.updateProperties(t,{variable:this._dmnFactory.create("dmn:InformationItem",{name:t.get("name"),typeRef:e})})}this._modeling.updateProperties(t,{typeRef:e})}}],elementVariableComponent:["type",class{static $inject=["components","elementVariable"];constructor(e,t){const n=du(Lu,()=>[t.getVariable()]);e.onGetComponent("footer",()=>n)}}]},Uu="is not a registered action";class zu{constructor(e,t){this._actions={undo(){e.undo()},redo(){e.redo()}}}trigger(e,t){if(!this._actions[e])throw Ku(e,Uu);return this._actions[e](t)}register(e,t){if("string"==typeof e)return this._registerAction(e,t);(0,v.forEach)(e,(e,t)=>{this._registerAction(t,e)},this)}_registerAction(e,t){if(this.isRegistered(e))throw Ku(e,"is already registered");this._actions[e]=t}unregister(e){if(!this.isRegistered(e))throw Ku(e,Uu);this._actions[e]=void 0}isRegistered(e){return!!this._actions[e]}}function Ku(e,t){return new Error(e+" "+t)}zu.$inject=["commandStack","eventBus"];const Wu={__init__:["editorActions"],editorActions:["type",zu]};class qu extends su{getModules(){return[...super.getModules(),Nu,uu,Wu,Fu,ju,Hn,Yn,vu,ru,Gs,Vu,Kt]}}class Gu extends d{_getViewProviders(){return[{id:"drd",constructor:Pt,opens:"dmn:Definitions"},{id:"decisionTable",constructor:kl,opens:e=>(0,u.is)(e,"dmn:Decision")&&(0,u.is)(e.decisionLogic,"dmn:DecisionTable")},{id:"literalExpression",constructor:Rc,opens:e=>(0,u.is)(e,"dmn:Decision")&&(0,u.is)(e.decisionLogic,"dmn:LiteralExpression")},{id:"boxedExpression",constructor:qu,opens:e=>(0,u.is)(e,"dmn:BusinessKnowledgeModel")&&(0,u.TO)(e)}]}_getInitialView(e,...t){let n=super._getInitialView(e,...t);if(!n)return;const i=n.element;return(0,u.is)(i,"dmn:Definitions")&&!(0,fe.$)(i)&&(n=(0,v.find)(e,e=>!(0,u.is)(e.element,"dmn:Definitions"))||n),n}}var Hu=n(72969),Xu=n(49486),Yu=n(99186),Ju=n(75575);Object.prototype.toString,Object.prototype.hasOwnProperty;const Zu=JSON.parse('{"name":"Camunda","uri":"http://camunda.org/schema/1.0/dmn","prefix":"camunda","xml":{"tagAlias":"lowerCase"},"associations":[],"types":[{"name":"Definitions","isAbstract":true,"extends":["dmn:Definitions"],"properties":[{"name":"diagramRelationId","isAttr":true,"type":"String"}]},{"name":"Decision","isAbstract":true,"extends":["dmn:Decision"],"properties":[{"name":"versionTag","isAttr":true,"type":"String"},{"name":"historyTimeToLive","isAttr":true,"type":"String"}]},{"name":"InputClause","extends":["dmn:InputClause"],"properties":[{"name":"inputVariable","isAttr":true,"type":"String"}]}],"emumerations":[]}'),Qu=JSON.parse('{"name":"zeebe","prefix":"zeebe","uri":"http://camunda.org/schema/zeebe/1.0","xml":{"tagAlias":"lowerCase"},"associations":[],"types":[{"name":"VersionTag","superClass":["Element"],"meta":{"allowedIn":["dmn:Decision"]},"properties":[{"name":"value","type":"String","isAttr":true}]}]}');function ed(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function td(e,t,n){return t=od(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ad()?Reflect.construct(t,n||[],od(e).constructor):t.apply(e,n))}function nd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function id(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,pd(i.key),i)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function sd(e,t,n){return(t=pd(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function od(e){return od=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},od(e)}function rd(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ud(e,t)}function ad(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ad=function(){return!!e})()}function ld(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function cd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ld(Object(n),!0).forEach(function(t){sd(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ld(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ud(e,t){return ud=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ud(e,t)}function dd(e){return function(e){if(Array.isArray(e))return ed(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ed(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ed(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pd(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}function hd(e,t){var n=function(e){return e&&e.businessObject||e}(e);return n&&"function"==typeof n.$instanceOf&&n.$instanceOf(t)}function md(e){return hd(e,"dmn:InputClause")}function gd(e){return hd(e,"dmn:OutputClause")}var fd=function(){return id(function e(t){nd(this,e),t.registerProvider(this)},[{key:"getVariables",value:function(e,t){return e.map(function(e){return cd(cd({},e),{},{name:yd(e)})})}}])}();function yd(e){var t=e.origin;return t&&hd(t,"dmn:Decision")?t.get("id"):e.name}fd.$inject=["variableResolver"];var vd={__init__:["camundaVariableProvider"],camundaVariableProvider:["type",fd]},bd=["boxedExpression","common","decisionTable","drd","literalExpression"],_d=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};nd(this,t);var n=e.boxedExpression,i=void 0===n?{}:n,s=e.common,o=void 0===s?{}:s,r=e.decisionTable,a=void 0===r?{}:r,l=e.drd,c=void 0===l?{}:l,u=e.literalExpression,d=void 0===u?{}:u,p=function(e,t){if(null==e)return{};var n,i,s=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.includes(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}(e,bd),h=c.disableAdjustOrigin||o.disableAdjustOrigin,m=c.disableGrid||o.disableGrid;return td(this,t,[cd(cd({},p),{},{common:cd(cd({},o),{},{feelLanguageContext:cd({parserDialect:"camunda"},null==o?void 0:o.feelLanguageContext)}),boxedExpression:xd(i,[vd]),decisionTable:xd(a,[vd]),drd:xd(c,[h?Hu.A:Yu.A,m?{}:Xu.A,Ju.DmnPropertiesPanelModule,Ju.DmnPropertiesProviderModule]),literalExpression:xd(d,[vd])})])}return rd(t,e),id(t)}(Gu);function xd(e,t){var n=e.additionalModules||[];return cd(cd({},e),{},{additionalModules:[].concat(dd(t),dd(n))})}class Cd extends sn.uA{constructor(e,t){super(e,t),this.state={value:e.value}}onInput=e=>{const{onInput:t}=this.props,n=e.target.value;this.setState({value:n},()=>{"function"==typeof t&&t(n)})};onChange=e=>{const{onChange:t}=this.props;"function"==typeof t&&t(e.target.value)};onKeyDown=e=>{const{onKeyDown:t}=this.props;"function"==typeof t&&t(e)};onKeyUp=e=>{const{onKeyUp:t}=this.props;"function"==typeof t&&t(e)};componentDidUpdate(e){const{value:t}=this.props;t!==e.value&&t!==this.state.value&&this.setState({value:t})}render(){const{className:e,label:t,id:n,placeholder:i,type:s}=this.props,{value:o}=this.state;return(0,sn.bF)(64,"input",[e||"","dms-input"].join(" "),null,1,{"aria-label":t,placeholder:i||"",onChange:this.onChange,onInput:this.onInput,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,spellCheck:"false",type:s||"text",value:o,id:n})}}var wd=function(e){function t(e,n){var i;nd(this,t),(i=td(this,t,[e,n]))._translate=n.injector.get("translate"),i._modeling=n.injector.get("modeling");var s=n.injector.get("debounceInput");return i.state={inputVariable:i.props.context.input.get("camunda:inputVariable")||""},i.handleInputVariableChange=i.handleInputVariableChange.bind(i),i._setInputVariable=s(i._setInputVariable),i}return rd(t,e),id(t,[{key:"handleInputVariableChange",value:function(e){var t=this;this.setState({inputVariable:e||void 0},function(){return t._setInputVariable(e)})}},{key:"_setInputVariable",value:function(e){return this._modeling.updateProperties(this.props.context.input,{"camunda:inputVariable":e||void 0})}},{key:"render",value:function(){var e=this.state.inputVariable;return(0,sn.bF)(1,"div","context-menu-container",(0,sn.bF)(1,"div","dms-form-control",[(0,sn.bF)(1,"label","dms-label",this._translate("Input Variable"),0),(0,sn.sO)(2,Cd,{className:"ref-input-variable",value:e||"",onInput:this.handleInputVariableChange,placeholder:this._translate("cellInput")})],4),2)}}])}(sn.uA),Ed=id(function e(t){nd(this,e),t.onGetComponent("context-menu",function(){if("input-edit"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).contextMenuType)return wd})});Ed.$inject=["components"];var Dd={__init__:["camundaPlatformInputVariable"],camundaPlatformInputVariable:["type",Ed]};class Sd extends sn.uA{constructor(e,t){super(e,t);const{validate:n,value:i}=e,s=n?n(i||""):void 0;this.state={validationWarning:s,value:i},this.onInput=this.onInput.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onKeyUp=this.onKeyUp.bind(this)}componentWillReceiveProps(e){const{validate:t,value:n}=e,i=t?t(n||""):void 0;this.setState({validationWarning:i,value:n})}onInput(e){const{onInput:t,validate:n}=this.props,i=n?n(e):void 0;this.setState({validationWarning:i,value:e}),"function"==typeof t&&t&&t({isValid:!i,value:e})}onKeyDown(e){const{target:t}=e,{value:n}=t,{onKeyDown:i,validate:s}=this.props,o=s?s(n):void 0;"function"==typeof i&&i({isValid:!o,value:n,event:e})}onKeyUp(e){const{target:t}=e,{value:n}=t,{onKeyUp:i,validate:s}=this.props,o=s?s(n):void 0;"function"==typeof i&&i({isValid:!o,value:n,event:e})}render(){const{placeholder:e,type:t,className:n,label:i}=this.props,{validationWarning:s,value:o}=this.state,r=["dms-validated-input",n].join(" "),a=[];return s&&a.push("invalid"),(0,sn.bF)(1,"div",r,[(0,sn.sO)(2,Cd,{className:a,label:i,onInput:this.onInput,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,placeholder:e||"",type:t,value:o||""}),s&&(0,sn.bF)(1,"p","dms-hint dms-validation-warning",s,0)],0)}}var Ad,Rd=!1;"undefined"!=typeof document&&((Ad=document.createElement("div")).innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',Rd=!Ad.getElementsByTagName("link").length,Ad=void 0);var Md={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:Rd?[1,"X<div>","</div>"]:[0,"",""]};Md.td=Md.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],Md.option=Md.optgroup=[1,'<select multiple="multiple">',"</select>"],Md.thead=Md.tbody=Md.colgroup=Md.caption=Md.tfoot=[1,"<table>","</table>"],Md.polyline=Md.ellipse=Md.polygon=Md.circle=Md.text=Md.line=Md.path=Md.rect=Md.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];var Id=function(e,t){if("string"!=typeof e)throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var i=n[1];if("body"==i)return(s=t.createElement("html")).innerHTML=e,s.removeChild(s.lastChild);var s,o=Object.prototype.hasOwnProperty.call(Md,i)?Md[i]:Md._default,r=o[0],a=o[1],l=o[2];for((s=t.createElement("div")).innerHTML=a+e+l;r--;)s=s.lastChild;if(s.firstChild==s.lastChild)return s.removeChild(s.firstChild);for(var c=t.createDocumentFragment();s.firstChild;)c.appendChild(s.removeChild(s.firstChild));return c};class jd extends sn.uA{constructor(e,t){super(e,t),function(e,t){const n=e.$inject;if(!n)return;const{injector:i}=t.context,s=[...n,function(...e){for(const i in e){const s=n[i],o=e[i];t[s]=o}}];i.invoke(s)}(this.constructor,this);const{value:n}=e;this.state={value:n,optionsVisible:!1},this._portalEl=null}componentDidMount(){document.addEventListener("mousedown",this.onGlobalClick),document.addEventListener("focusin",this.onFocusChanged),this.keyboard.addListener(this.onKeyboard)}componentWillUnmount(){document.removeEventListener("focusin",this.onFocusChanged),document.removeEventListener("mousedown",this.onGlobalClick),this.keyboard.removeListener(this.onKeyboard),this.removePortalEl()}componentWillReceiveProps(e){const{value:t}=e;this.setState({value:t})}componentWillUpdate(e,t){const{optionsVisible:n}=t;n?this._portalEl||this.addPortalEl():this._portalEl&&this.removePortalEl()}componentDidUpdate(){const{optionsVisible:e}=this.state;if(!e||!this.inputNode)return;const t=this.getOptionsBounds();!function(e,...t){Object.assign(e,...t)}(this._portalEl.style,t)}getOptionsBounds(){const e=this.renderer.getContainer(),{top:t,left:n,bottom:i}=e.getBoundingClientRect(),{top:s,left:o,width:r,height:a,bottom:l}=this.inputNode.getBoundingClientRect(),c=s+a-t+e.scrollTop,u={top:`${c}px`,left:`${o-n+e.scrollLeft}px`,width:`${r}px`,"max-height":`calc(100% - ${c}px)`};if(i-l<a){const e=i-s;u.bottom=`${e}px`,u["max-height"]=`calc(100% - ${e})`,delete u.top}return u}addPortalEl(){this._portalEl=Id('<div class="dms-select-options"></div>'),this.renderer.getContainer().appendChild(this._portalEl),this._portalEl.addEventListener("mousedown",Od)}removePortalEl(){var e;this._portalEl&&(this._portalEl.removeEventListener("mousedown",Od),(e=this._portalEl).parentNode&&e.parentNode.removeChild(e),this._portalEl=null)}onChange=e=>{this.setState({value:e});const{onChange:t}=this.props;"function"==typeof t&&t(e)};onInputClick=e=>{e.preventDefault(),e.stopPropagation(),this.setOptionsVisible(!this.state.optionsVisible),this.focusInput()};onInput=e=>{const{value:t}=e.target;this.onChange(t)};onOptionClick=(e,t)=>{t.preventDefault(),t.stopPropagation(),this.setOptionsVisible(!1),this.onChange(e),this.focusInput()};focusInput(){const e=this.inputNode;e.focus(),"selectionStart"in e&&(e.selectionStart=1e5)}checkClose(e){!this._portalEl||this._portalEl.contains(e)||this.parentNode.contains(e)||this.setOptionsVisible(!1)}onFocusChanged=e=>{this.checkClose(e.target)};onGlobalClick=e=>{this.checkClose(e.target)};select(e){const{options:t}=this.props,{value:n}=this.state;if(!t)return;const i=t.filter(e=>e.value===n)[0],s=i?t.indexOf(i):-1,o=-1===s?1===e?0:t.length-1:(s+e)%t.length,r=t[o<0?t.length+o:o];this.onChange(r.value)}setOptionsVisible(e){this.setState({optionsVisible:e})}onKeyDown=e=>{const{optionsVisible:t}=this.state;var n=e.which;40!==n&&38!==n||(e.stopPropagation(),e.preventDefault(),t?this.select(40===n?1:-1):this.setOptionsVisible(!0)),t&&(13!==n&&27!==n||(e.stopPropagation(),e.preventDefault(),this.setOptionsVisible(!1)))};onKeyboard=e=>{const{optionsVisible:t}=this.state;if(t)return 27===e?(this.setOptionsVisible(!1),!0):void 0};renderOptions(e,t){return(0,sn.bF)(1,"div","options",e.map(e=>(0,sn.bF)(1,"div",["option",t===e?"active":""].join(" "),e.label,0,{"data-value":e.value,onClick:t=>this.onOptionClick(e.value,t)})),0)}render(){const{className:e,label:t,id:n,options:i,noInput:s,title:o}=this.props,{optionsVisible:r,value:a}=this.state,l=!!i&&i.filter(e=>e.value===a)[0],c=l?l.label:a;return(0,sn.bF)(1,"div",[e||"","dms-input-select"].join(" "),[s?(0,sn.bF)(1,"div","dms-input",c,0,{"aria-label":t,tabIndex:"0",onKeyDown:this.onKeyDown},null,e=>this.inputNode=e):(0,sn.bF)(64,"input","dms-input",null,1,{"aria-label":t,onInput:this.onInput,onKeyDown:this.onKeyDown,spellCheck:"false",type:"text",value:a,id:n},null,e=>this.inputNode=e),(0,sn.bF)(1,"span",["dms-input-select-icon",r?"dmn-icon-up":"dmn-icon-down"].join(" ")),r&&(0,sn.d5)(this.renderOptions(i,l),this._portalEl)],0,{title:o,onClick:this.onInputClick},null,e=>this.parentNode=e)}}function Od(e){e.stopPropagation()}jd.$inject=["keyboard","renderer"];var kd=/^\d{4}(?:-\d\d){2}T(?:\d\d:){2}\d\d$/,Pd=/^\[date and time\("(\d{4}(?:-\d\d){2}T(?:\d\d:){2}\d\d)"\)..date and time\("(\d{4}(?:-\d\d){2}T(?:\d\d:){2}\d\d)"/,Fd=/^(<|>)\s*date and time\("(\d{4}(?:-\d\d){2}T(?:\d\d:){2}\d\d)"\)/,Td=/^date and time\("(\d{4}(?:-\d\d){2}T(?:\d\d:){2}\d\d)"\)$/;function Nd(e){if(!kd.test(e.trim()))return"Date must match pattern yyyy-MM-ddTHH:mm:ss."}function $d(e,t){return"exact"===e?'date and time("'.concat(t[0],'")'):"before"===e?'< date and time("'.concat(t[0],'")'):"after"===e?'> date and time("'.concat(t[0],'")'):"between"===e?'[date and time("'.concat(t[0],'")..date and time("').concat(t[1],'")]'):void 0}function Ld(){var e=new Date;return e.setUTCHours(0,0,0,0),e.toISOString().slice(0,-5)}function Bd(e){if(!e||""===e.trim())return{type:"exact",date:""};var t=e.match(Pd);return t?{type:"between",dates:[t[1],t[2]]}:(t=e.match(Fd))?{type:"<"===t[1]?"before":"after",date:t[2]}:(t=e.match(Td))?{type:"exact",date:t[1]}:void 0}var Vd="exact",Ud="between",zd=function(e){function t(e,n){var i;nd(this,t),(i=td(this,t,[e,n]))._modeling=n.injector.get("modeling");var s,o=Bd(i.props.context.element.businessObject.text);o?(s=o.date?[o.date,""]:o.dates?o.dates:["",""],i.state={type:o.type,dates:s}):i.state={type:Vd,dates:["",""]};var r=n.injector.get("debounceInput");return i.debouncedEditCell=r(i.editCell.bind(i)),i.editCell=i.editCell.bind(i),i.onTypeChange=i.onTypeChange.bind(i),i.onSetStartDateTodayClick=i.onSetStartDateTodayClick.bind(i),i.onSetEndDateTodayClick=i.onSetEndDateTodayClick.bind(i),i.onStartDateInput=i.onStartDateInput.bind(i),i.onEndDateInput=i.onEndDateInput.bind(i),i}return rd(t,e),id(t,[{key:"editCell",value:function(e,t){this._modeling.editCell(e,t)}},{key:"onTypeChange",value:function(e){var t=this.props.context.element,n=this.state.dates;this.setState({type:e}),Bd($d(e,n))&&this.editCell(t.businessObject,$d(e,n))}},{key:"onSetStartDateTodayClick",value:function(){var e=this.props.context.element,t=this.state,n=t.dates,i=t.type,s=Ld();this.setState({dates:[s,n[1]]}),Bd($d(i,[s,n[1]]))&&this.editCell(e.businessObject,$d(i,[s,n[1]]))}},{key:"onSetEndDateTodayClick",value:function(){var e=this.props.context.element,t=this.state,n=t.dates,i=t.type,s=Ld();this.setState({dates:[n[0],s]}),Bd($d(i,[n[0],s]))&&this.editCell(e.businessObject,$d(i,[n[0],s]))}},{key:"onStartDateInput",value:function(e){var t=e.isValid,n=e.value;if(t){var i=this.props.context.element,s=this.state,o=s.dates,r=s.type;this.setState({dates:[n,o[1]]}),this.debouncedEditCell(i.businessObject,$d(r,[n,o[1]]))}}},{key:"onEndDateInput",value:function(e){var t=e.isValid,n=e.value;if(t){var i=this.props.context.element,s=this.state,o=s.dates,r=s.type;this.setState({dates:[o[0],n]}),this.debouncedEditCell(i.businessObject,$d(r,[o[0],n]))}}},{key:"render",value:function(){var e=this.state,t=e.dates,n=e.type,i=[{label:"Exactly",value:Vd},{label:"Before",value:"before"},{label:"After",value:"after"},{label:"Between",value:Ud}];return(0,sn.bF)(1,"div","context-menu-container simple-date-edit",[(0,sn.bF)(1,"h3","dms-heading",(0,sn.eW)("Edit Date"),2),(0,sn.bF)(1,"div","dms-fill-row",(0,sn.sO)(2,jd,{noInput:!0,onChange:this.onTypeChange,options:i,value:n}),2),(0,sn.bF)(1,"h4","dms-heading",n===Ud?"Edit Start Date":"Set Date",0),(0,sn.bF)(1,"div",null,[(0,sn.sO)(2,Sd,{className:"start-date-input dms-block",onInput:this.onStartDateInput,placeholder:"e.g. ".concat(Ld()),validate:Nd,value:t[0]}),(0,sn.bF)(1,"p","dms-hint",[(0,sn.bF)(1,"button","use-today",(0,sn.eW)("Use today"),2,{type:"button",onClick:this.onSetStartDateTodayClick}),(0,sn.eW)(".")],4)],4),n===Ud&&(0,sn.bF)(1,"h4","dms-heading",(0,sn.eW)("Edit End Date"),2),n===Ud&&(0,sn.bF)(1,"div",null,[(0,sn.sO)(2,Sd,{className:"end-date-input dms-block",onInput:this.onEndDateInput,placeholder:"e.g. ".concat(Ld()),validate:Nd,value:t[1]}),(0,sn.bF)(1,"p","dms-hint",[(0,sn.bF)(1,"button","use-today",(0,sn.eW)("Use today"),2,{type:"button",onClick:this.onSetEndDateTodayClick}),(0,sn.eW)(".")],4)],4)],0)}}])}(sn.uA),Kd=function(e){function t(e,n){var i;nd(this,t),(i=td(this,t,[e,n]))._modeling=n.injector.get("modeling");var s=Bd(i.props.context.element.businessObject.text);i.state={date:s?s.date:""};var o=n.injector.get("debounceInput");return i.debouncedEditCell=o(i.editCell.bind(i)),i.editCell=i.editCell.bind(i),i.onClick=i.onClick.bind(i),i.onInput=i.onInput.bind(i),i}return rd(t,e),id(t,[{key:"editCell",value:function(e,t){this._modeling.editCell(e,t)}},{key:"onClick",value:function(){var e=this.props.context.element,t=Ld();this.setState({date:t}),this.editCell(e.businessObject,'date and time("'.concat(t,'")'))}},{key:"onInput",value:function(e){var t=e.isValid,n=e.value;if(t){var i=this.props.context.element;this.setState({date:n}),this.debouncedEditCell(i.businessObject,'date and time("'.concat(n,'")'))}}},{key:"render",value:function(){var e=this.state.date;return(0,sn.bF)(1,"div","context-menu-container simple-date-edit",[(0,sn.bF)(1,"h3","dms-heading",(0,sn.eW)("Edit Date"),2),(0,sn.bF)(1,"h4","dms-heading",(0,sn.eW)("Set Date"),2),(0,sn.bF)(1,"div",null,[(0,sn.sO)(2,Sd,{onInput:this.onInput,placeholder:"e.g. ".concat(Ld()),validate:Nd,value:e,className:"dms-block"}),(0,sn.bF)(1,"p","dms-hint",[(0,sn.eW)("Set date "),(0,sn.bF)(1,"button","use-today",(0,sn.eW)("to today"),2,{type:"button",onClick:this.onClick}),(0,sn.eW)(".")],4)],4)],4)}}])}(sn.uA),Wd=id(function e(t,n){nd(this,e),n.registerProvider(function(e){var t=qd(e);return(md(e.col)||gd(e.col))&&Gd(t)}),t.onGetComponent("context-menu",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.contextMenuType&&"simple-mode-edit"===e.contextMenuType){if(!e.element)return;if(Gd(qd(e.element))){if(md(e.element.col))return zd;if(gd(e.element.col))return Kd}}})});function qd(e){return md(e.col)?e.col&&e.col.businessObject.inputExpression.typeRef:e.col&&e.col.businessObject.typeRef}function Gd(e){return"date"===e}Wd.$inject=["components","simpleMode"];var Hd={__init__:["simpleDateEdit"],simpleDateEdit:["type",Wd]},Xd={simpleDurationEdit:["type",Yd],simpleDateTimeEdit:["type",Yd],simpleTimeEdit:["type",Yd]};function Yd(){}var Jd=[{label:"FEEL",value:"feel"},{label:"JUEL",value:"juel"},{label:"JavaScript",value:"javascript"},{label:"Groovy",value:"groovy"},{label:"Python",value:"python"},{label:"JRuby",value:"jruby"}],Zd=["string","boolean","integer","long","double","date"],Qd=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};nd(this,t);var n=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).expressionLanguages||{};return{options:e.options||Jd,default:e.default||{editor:"feel"}}}(e.common),i=e.decisionTable||{},s=e.drd||{},o=e.boxedExpression||{};return td(this,t,[cd(cd({},e),{},{boxedExpression:o,common:cd(cd({dataTypes:Zd},e.common),{},{expressionLanguages:n}),decisionTable:ep(i,[Dd,Hd,Xd]),drd:ep(s,[Ju.CamundaPropertiesProviderModule]),moddleExtensions:cd({camunda:Zu},e.moddleExtensions)})])}return rd(t,e),id(t)}(_d);function ep(e,t){var n=e.additionalModules||[];return cd(cd({},e),{},{additionalModules:[].concat(dd(t),dd(n))})}var tp={zeebe:Qu},np=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};nd(this,t);var n,i,s,o=e.common,r=void 0===o?{}:o,a=e.drd,l=void 0===a?{}:a,c=e.moddleExtensions,u=void 0===c?{}:c,d=r.propertiesPanel,p=void 0===d?{}:d;return td(this,t,[cd(cd({},e),{},{common:cd(cd({},r),{},{propertiesPanel:cd(cd({},p),{},{tooltip:Ju.ZeebeTooltipProvider})}),drd:(n=l,i=[Ju.ZeebePropertiesProviderModule],s=n.additionalModules||[],cd(cd({},n),{},{additionalModules:[].concat(dd(i),dd(s))})),moddleExtensions:cd(cd({},tp),u)})])}return rd(t,e),id(t)}(_d)},13337(e){var t;t="undefined"!=typeof global?global:this,e.exports=function(e){if(e.CSS&&e.CSS.escape)return e.CSS.escape;var t=function(e){if(0==arguments.length)throw new TypeError("`CSS.escape` requires an argument.");for(var t,n=String(e),i=n.length,s=-1,o="",r=n.charCodeAt(0);++s<i;)0!=(t=n.charCodeAt(s))?o+=t>=1&&t<=31||127==t||0==s&&t>=48&&t<=57||1==s&&t>=48&&t<=57&&45==r?"\\"+t.toString(16)+" ":0==s&&1==i&&45==t||!(t>=128||45==t||95==t||t>=48&&t<=57||t>=65&&t<=90||t>=97&&t<=122)?"\\"+n.charAt(s):n.charAt(s):o+="";return o};return e.CSS||(e.CSS={}),e.CSS.escape=t,t}(t)},98364(e,t,n){"use strict";n.d(t,{A:()=>Z});var i=n(7475),s=n(81340),o=n(93083),r=n.n(o),a=n(96222),l=n(57094),c=n(17715),u=n(23906),d=new c.d({name:"dmnElementRef",enumerable:!0},{name:"di",configurable:!0});function p(e,t){var n=[];function i(t){try{var n=t.di&&function(t){if(t.gfx)throw new Error("already rendered "+t.id);return e.element(t)}(t);return n}catch(e){r(e.message,{element:t,error:e})}}function s(e){var t,n;(n=(t=e).dmnElementRef)?n.di?r("multiple DI elements defined for element",{element:n}):(d.bind(n,"di"),n.di=t):r("no DMN element referenced in element",{element:t})}function o(e){n.push(e)}function r(t,n){e.error(t,n)}return{handleDefinitions:function(t,r){var a=t.dmnDI;if(!a)throw new Error("no dmndi:DMNDI");var c,d,p=a.diagrams||[];if(r&&-1===p.indexOf(r))throw new Error("diagram not part of dmndi:DMNDI");if(!r&&p&&p.length&&(r=p[0]),!r)throw new Error("no diagram to display");t.di=r,function(e){(0,l.forEach)(e.diagramElements,s)}(r),c=t,e.root(c),d=t.get("drgElement"),(0,l.forEach)(d,function(e){i(e),function(e){(0,l.forEach)(["informationRequirement","knowledgeRequirement","authorityRequirement"],function(t){(0,l.forEach)(e[t],function(e){o(function(){i(e)})})})}(e)}),function(e){(0,l.forEach)(e,function(e){(0,u.is)(e,"dmn:Association")?function(e){o(function(){i(e)})}(e):i(e)})}(t.get("artifact")),(0,l.forEach)(n,function(e){e()})}}}var h=n(27828),m=n(35326),g=n(94306),f=n(64847),y=n(1591),v=n(24107),b=new f.Ids,_="hsl(225, 10%, 15%)";function x(e,t,n,i,o,r){y.A.call(this,t);var a=b.next(),c=i.computeStyle,d={},p=e&&e.defaultFillColor||"white",m=e&&e.defaultStrokeColor||_,g=e&&e.defaultLabelColor;function f(e,t,n){var i=e+"-"+w(t)+"-"+w(n)+"-"+a;return d[i]||function(e,t,n,i){if("association-start"===t){var s=(0,h.vt)("path");(0,h.CF)(s,{d:"M 11 5 L 1 10 L 11 15"}),x(e,{element:s,attrs:{fill:"none",stroke:i,strokeWidth:1.5},ref:{x:1,y:10},scale:.5})}else if("association-end"===t){var o=(0,h.vt)("path");(0,h.CF)(o,{d:"M 1 5 L 11 10 L 1 15"}),x(e,{element:o,attrs:{fill:"none",stroke:i,strokeWidth:1.5},ref:{x:12,y:10},scale:.5})}else if("information-requirement-end"===t){var r=(0,h.vt)("path");(0,h.CF)(r,{d:"M 1 5 L 11 10 L 1 15 Z"}),x(e,{element:r,attrs:{fill:i,stroke:"none"},ref:{x:11,y:10},scale:1})}else if("knowledge-requirement-end"===t){var a=(0,h.vt)("path");(0,h.CF)(a,{d:"M 1 3 L 11 10 L 1 17"}),x(e,{element:a,attrs:{fill:"none",stroke:i,strokeWidth:2},ref:{x:11,y:10},scale:.8})}else if("authority-requirement-end"===t){var l=(0,h.vt)("circle");(0,h.CF)(l,{cx:3,cy:3,r:3}),x(e,{element:l,attrs:{fill:i,stroke:"none"},ref:{x:3,y:3},scale:.9})}}(i,e,0,n),"url(#"+i+")"}function x(e,t){var n=(0,l.assign)({strokeWidth:1,strokeLinecap:"round",strokeDasharray:"none"},t.attrs),i=t.ref||{x:0,y:0},o=t.scale||1;"none"===n.strokeDasharray&&(n.strokeDasharray=[1e4,1]);var a=(0,h.vt)("marker");(0,h.CF)(t.element,n),(0,h.BC)(a,t.element),(0,h.CF)(a,{id:e,viewBox:"0 0 20 20",refX:i.x,refY:i.y,markerWidth:20*o,markerHeight:20*o,orient:"auto"});var c=(0,s.P)("defs",r._svg);c||(c=(0,h.vt)("defs"),(0,h.BC)(r._svg,c)),(0,h.BC)(c,a),d[e]=a}function A(e,t,n,i,s,o){(0,l.isObject)(s)&&(o=s,s=0),s=s||0,o=c(o,{stroke:_,strokeWidth:2,fill:"white"});var r=(0,h.vt)("rect");return(0,h.CF)(r,{x:s,y:s,width:t-2*s,height:n-2*s,rx:i,ry:i}),(0,h.CF)(r,o),(0,h.BC)(e,r),r}function R(e,t,n){var i=o.createText(t||"",n);return(0,s.CF)(i,"class","djs-label"),(0,h.BC)(e,i),i}function M(e,t,n,i){return R(e,(0,u.mG)(t),i=(0,l.assign)({box:t,align:n,padding:5,style:{fill:S(0,g,m)}},i))}function I(e,t,n){n=c(n,["no-fill"],{strokeWidth:2,stroke:_});var i=(0,h.vt)("path");return(0,h.CF)(i,{d:t}),(0,h.CF)(i,n),(0,h.BC)(e,i),i}var j={"dmn:Decision":function(e,t){var n=A(e,t.width,t.height,0,{stroke:E(0,m),fill:D(0,p)});return M(e,t,"center-middle"),n},"dmn:KnowledgeSource":function(e,t){var i=I(e,n.getScaledPath("KNOWLEDGE_SOURCE",{xScaleFactor:1.021,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:0,my:.075}}),{strokeWidth:2,fill:D(0,p),stroke:E(0,m)});return M(e,t,"center-middle"),i},"dmn:BusinessKnowledgeModel":function(e,t){var i=I(e,n.getScaledPath("BUSINESS_KNOWLEDGE_MODEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:0,my:.3}}),{strokeWidth:2,fill:D(0,p),stroke:E(0,m)});return M(e,t,"center-middle"),i},"dmn:InputData":function(e,t){var n=A(e,t.width,t.height,22,{stroke:E(0,m),fill:D(0,p)});return M(e,t,"center-middle"),n},"dmn:TextAnnotation":function(e,t){var i=A(e,t.width,t.height,0,0,{fill:"none",stroke:"none"});return I(e,n.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:0,my:0}}),{stroke:E(0,m)}),R(e,C(t).text||"",{style:{fill:S(0,g,m)},box:t,align:"left-top",padding:5}),i},"dmn:Association":function(e,t){var n=C(t),i=D(0,p),s=E(0,m),o={stroke:s,strokeDasharray:"0.5, 5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"};return"One"!==n.associationDirection&&"Both"!==n.associationDirection||(o.markerEnd=f("association-end",i,s)),"Both"===n.associationDirection&&(o.markerStart=f("association-start",i,s)),O(e,t.waypoints,o)},"dmn:InformationRequirement":function(e,t){var n=D(0,p),i=E(0,m),s={stroke:i,strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",markerEnd:f("information-requirement-end",n,i)};return O(e,t.waypoints,s)},"dmn:KnowledgeRequirement":function(e,t){var n=D(0,p),i=E(0,m),s={stroke:i,strokeWidth:1,strokeDasharray:5,strokeLinecap:"round",strokeLinejoin:"round",markerEnd:f("knowledge-requirement-end",n,i)};return O(e,t.waypoints,s)},"dmn:AuthorityRequirement":function(e,t){var n=D(0,p),i=E(0,m),s={stroke:i,strokeWidth:1.5,strokeDasharray:5,strokeLinecap:"round",strokeLinejoin:"round",markerEnd:f("authority-requirement-end",n,i)};return O(e,t.waypoints,s)}};function O(e,t,n){n=c(n,["no-fill"],{stroke:_,strokeWidth:2,fill:"none"});var i=(0,v.RJ)(t,n);return(0,h.BC)(e,i),i}this.canRender=function(e){return(0,u.is)(e,"dmn:DMNElement")||(0,u.is)(e,"dmn:InformationRequirement")||(0,u.is)(e,"dmn:KnowledgeRequirement")||(0,u.is)(e,"dmn:AuthorityRequirement")},this.drawShape=function(e,t){var n=j[t.type];return n?n(e,t):y.A.prototype.drawShape.apply(this,[e,t])},this.drawConnection=function(e,t){var n=t.type,i=j[n];return i?i(e,t):y.A.prototype.drawConnection.apply(this,[e,t])}}function C(e){return e.businessObject}function w(e){return e.replace(/[^0-9a-zA-z]+/g,"_")}function E(e,t){return t}function D(e,t){return t}function S(e,t,n){return t||E(0,n)}(0,i.A)(x,y.A),x.$inject=["config.drdRenderer","eventBus","pathMap","styles","textRenderer","canvas"];var A=n(4156);function R(e){var t=(0,l.assign)({fontFamily:"Arial, sans-serif",fontSize:12,fontWeight:"normal",lineHeight:1.2},e&&e.defaultStyle||{}),n=parseInt(t.fontSize,10)-1,i=(0,l.assign)({},t,{fontSize:n},e&&e.externalStyle||{}),s=new A.A({style:t});this.getExternalLabelBounds=function(e,t){var n=s.getDimensions(t,{box:{width:90,height:30,x:e.width/2+e.x,y:e.height/2+e.y},style:i});return{x:Math.round(e.x+e.width/2-n.width/2),y:Math.round(e.y),width:Math.ceil(n.width),height:Math.ceil(n.height)}},this.getTextAnnotationBounds=function(e,n){var i=s.getDimensions(n,{box:e,style:t,align:"left-top",padding:5});return{x:e.x,y:e.y,width:e.width,height:Math.max(30,Math.round(i.height))}},this.createText=function(e,t){return s.createText(e,t||{})},this.getDefaultStyle=function(){return t},this.getExternalStyle=function(){return i}}R.$inject=["config.textRenderer"];var M=/\{([^{}]+)\}/g,I=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g;const j={__init__:["drdRenderer"],drdRenderer:["type",x],textRenderer:["type",R],pathMap:["type",function(){this.pathMap={KNOWLEDGE_SOURCE:{d:"m {mx},{my} l 0,{e.y0} c {e.x0},{e.y1} {e.x1},-{e.y2} {e.x2},-{e.y3} c {e.x3},-{e.y4} {e.x4},{e.y5} {e.x5},{e.y6} l 0,-{e.y7}z",width:100,height:65,widthElements:[29.8,48.4,67.2,12.2,19.8,30.8],heightElements:[55.3,19.7,4.2,6.7,2.3,1.6,6.2,54.6]},BUSINESS_KNOWLEDGE_MODEL:{d:"m {mx},{my} l {e.x0},-{e.y0} l {e.x1},0 l 0,{e.y1} l -{e.x2},{e.y2} l -{e.x3},0z",width:125,height:45,widthElements:[13.8,109.2,13.8,109.1],heightElements:[13.2,29.8,13.2]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",width:10,height:30,widthElements:[10],heightElements:[30]}},this.getRawPath=function(e){return this.pathMap[e].d},this.getScaledPath=function(e,t){var n,i,s=this.pathMap[e];t.abspos?(n=t.abspos.x,i=t.abspos.y):(n=t.containerWidth*t.position.mx,i=t.containerHeight*t.position.my);var o,r,a={};if(t.position){for(var l=t.containerHeight/s.height*t.yScaleFactor,c=t.containerWidth/s.width*t.xScaleFactor,u=0;u<s.heightElements.length;u++)a["y"+u]=s.heightElements[u]*l;for(var d=0;d<s.widthElements.length;d++)a["x"+d]=s.widthElements[d]*c}return o=s.d,r={mx:n,my:i,e:a},String(o).replace(M,function(e,t){return function(e,t,n){var i=n;return t.replace(I,function(e,t,n,s,o){t=t||s,i&&(t in i&&(i=i[t]),"function"==typeof i&&o&&(i=i()))}),i=(null==i||i==n?e:i)+""}(e,t,r)})}}]};function O(e,t,n,i){this._eventBus=e,this._canvas=t,this._elementRegistry=i,this._elementFactory=n}function k(e,t){return(0,l.assign)({id:e.id,type:e.$type,businessObject:e},t)}function P(e){return e.split("#").pop()}O.$inject=["eventBus","canvas","elementFactory","elementRegistry"],O.prototype.root=function(e){var t=this._elementFactory.createRoot(k(e));return this._canvas.setRootElement(t),t},O.prototype.add=function(e){var t,n,i,s,o,r,a=this._elementFactory,c=this._canvas,u=this._eventBus,d=e.di;if(d.$instanceOf("dmndi:DMNShape"))r=d.bounds,o=k(e,{x:Math.round(r.x),y:Math.round(r.y),width:Math.round(r.width),height:Math.round(r.height)}),t=a.createShape(o),c.addShape(t),u.fire("drdElement.added",{element:t,di:d});else{if(!d.$instanceOf("dmndi:DMNEdge"))throw new Error("unknown di for element "+e.id);n=function(e){var t=e.waypoint;if(t)return(0,l.map)(t,function(e){var t={x:e.x,y:e.y};return(0,l.assign)({original:t},t)})}(d),i=this._getSource(e),s=this._getTarget(e),i&&s&&(o=k(e,{hidden:!1,source:i,target:s,waypoints:n}),t=a.createConnection(o),c.addConnection(t),u.fire("drdElement.added",{element:t,di:d}))}return t},O.prototype._getSource=function(e){var t,n;if((0,u.is)(e,"dmn:Association")?n=e.sourceRef:(0,u.is)(e,"dmn:InformationRequirement")?n=e.requiredDecision||e.requiredInput:(0,u.is)(e,"dmn:KnowledgeRequirement")?n=e.requiredKnowledge:(0,u.is)(e,"dmn:AuthorityRequirement")&&(n=e.requiredDecision||e.requiredInput||e.requiredAuthority),n&&(t=n.href),t)return this._getShape(P(t))},O.prototype._getTarget=function(e){return(0,u.is)(e,"dmn:Association")?e.targetRef&&this._getShape(P(e.targetRef.href)):this._getShape(e.$parent.id)},O.prototype._getShape=function(e){return this._elementRegistry.get(e)};const F={__depends__:[j,{drdImporter:["type",O]}]};var T=n(31323),N=n(86104),$=n(4912),L=n(486),B=[{className:"dmn-icon-decision-table",matches:function(e){var t=(0,u.Cf)(e);return(0,u.is)(t,"dmn:Decision")&&(0,u.is)(t.decisionLogic,"dmn:DecisionTable")},title:"Open decision table"},{className:"dmn-icon-literal-expression",matches:function(e){var t=(0,u.TO)(e);return(0,u.is)(t,"dmn:LiteralExpression")},title:"Open literal expression"}];class V{constructor(e,t,n,i,s){this._injector=e,this._eventBus=t,this._overlays=n,this._translate=s,this._config=i||{enabled:!0},t.on(["shape.added"],({element:e})=>{for(let t=0;t<B.length;t++){const{matches:n,className:i,title:s}=B[t];n&&n(e)&&this.addOverlay(e,i,s)}})}addOverlay(e,t,n){const i=!1!==this._config.enabled,o=this._getOverlayNode(t,n,i),r=this._overlays.add(e,{position:{top:2,left:2},html:o});i&&((0,s.Ly)(o).add("interactive"),this.bindEventListener(e,o,r))}_getOverlayNode(e,t,n){const i=document.createElement("div");if(i.className="drill-down-overlay",!n){const t=document.createElement("span");return t.className=e,i.appendChild(t),i}const s=document.createElement("button");return s.type="button",s.className=e,s.title=this._translate(t),i.appendChild(s),i}bindEventListener(e,t,n){const i=this._overlays,o=this._eventBus,r=i._overlayRoot;s.Mm.bind(r,'[data-overlay-id="'+n+'"]',"click",()=>{!1!==o.fire("drillDown.click",{element:e})&&this.drillDown(e)})}drillDown(e){const t=this._injector.get("_parent",!1);if(!t)return!1;const n=t.getView(e.businessObject);return!!n&&(t.open(n),!0)}}V.$inject=["injector","eventBus","overlays","config.drillDown","translate"];const U={__depends__:[$.A,T.A],__init__:["drillDown"],drillDown:["type",V]};function z(e){this._container=this._createContainer(),(0,g.g)(this._container),this._init(this._container,e)}(0,i.A)(z,a.A),z.prototype.saveSVG=(0,m.O)(function(e){var t=this;return new Promise(function(e){var n=t.get("canvas"),i=n.getActiveLayer(),o=(0,s.P)("defs",n._svg),r=(0,h.LI)(i),a=o&&o.outerHTML||"",l=i.getBBox();e({svg:'<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- created with dmn-js / http://bpmn.io --\x3e\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+l.width+'" height="'+l.height+'" viewBox="'+l.x+" "+l.y+" "+l.width+" "+l.height+'" version="1.1">'+a+r+"</svg>"})})}),z.prototype.getModules=function(){return this._modules},z.prototype.destroy=function(){a.A.prototype.destroy.call(this),(0,s.TF)(this._container)},z.prototype.on=function(e,t,n,i){return this.get("eventBus").on(e,t,n,i)},z.prototype.off=function(e,t){this.get("eventBus").off(e,t)},z.prototype._init=function(e,t){var{additionalModules:n,canvas:i,...s}=t,o={...s,canvas:{...i,container:e},modules:[{drd:["value",this]},...t.modules||this.getModules(),...n||[]]};a.A.call(this,o),t&&t.container&&this.attachTo(t.container)},z.prototype._emit=function(e,t){return this.get("eventBus").fire(e,t)},z.prototype._createContainer=function(){return r()('<div class="dmn-drd-container"></div>')},z.prototype.open=function(e){var t=this;return new Promise((n,i)=>{var s;try{return t._definitions&&t.clear(),t._definitions=e,function(e,t){var s,o=e.get("drdImporter"),r=e.get("eventBus"),a=[];r.fire("import.start",{definitions:t});try{!function(e){new p({root:function(e){return o.root(e)},element:function(e,t){return o.add(e,t)},error:function(e,t){a.push({message:e,context:t})}}).handleDefinitions(e)}(t)}catch(e){s=e}r.fire("import.done",{error:s,warnings:a}),function(e,t){e?(e.warnings=t||[],i(e)):n({warnings:t||[]})}(s,a)}(t,e)}catch(e){s=e}s?(s.warnings=s.warnings||[],i(s)):n({warnings:[]})})},z.prototype.attachTo=function(e){if(!e)throw new Error("parentNode required");this.detach();var t=this._container;e.appendChild(t),this._emit("attach",{}),this.get("canvas").resized()},z.prototype.detach=function(){var e=this._container,t=e.parentNode;t&&(this._emit("detach",{}),t.removeChild(e))},z.prototype._modules=[F,T.A,N.A,$.A,L.A,U];var K=n(3834),W=n(84361),q=n(35506),G=n(46389);function H(e,t,n){this._elementRegistry=e,this._canvas=n,t.registerProvider(this)}function X(e){return(0,l.filter)(e,function(e){return!!e.matched}).length>0}function Y(e,t){const n=[],i=e;if(!e)return n;e=e.toLowerCase(),t=t.toLowerCase();const s=e.indexOf(t);return s>-1?(0!==s&&n.push({normal:i.substr(0,s)}),n.push({matched:i.substr(s,t.length)}),t.length+s<e.length&&n.push({normal:i.substr(t.length+s,e.length)})):n.push({normal:i}),n}H.$inject=["elementRegistry","searchPad","canvas"],H.prototype.find=function(e){const t=this._canvas.getRootElement();let n=this._elementRegistry.filter(function(e){return!e.labelTarget});return n=(0,l.filter)(n,function(e){return e!==t}),n=(0,l.map)(n,function(t){return{primaryTokens:Y((0,G.p)(t),e),secondaryTokens:Y(t.id,e),element:t}}),n=(0,l.filter)(n,function(e){return X(e.primaryTokens)||X(e.secondaryTokens)}),n=(0,l.sortBy)(n,function(e){return(0,G.p)(e.element)+e.element.id}),n};const J={__depends__:[q.A],__init__:["dmnSearch"],dmnSearch:["type",H]};function Z(e){z.call(this,e)}(0,i.A)(Z,z),Z.prototype._navigationModules=[K.A,W.A,J],Z.prototype._modules=[].concat(Z.prototype._modules,Z.prototype._navigationModules)},11847(e,t,n){"use strict";n.d(t,{A:()=>s});var i=n(81340);function s(e,t){function n(e,n){var s=t.getContainer();(0,i.Ly)(s).toggle(e,n)}e.on("palette.create",function(){n("with-palette",!0)}),e.on("palette.changed",function(e){n("with-palette-two-column",e.twoColumn)})}s.$inject=["eventBus","canvas"]},486(e,t,n){"use strict";n.d(t,{A:()=>l});var i=n(93083),s=n.n(i),o=n(81340);function r(e,t,n){this._eventBus=e,this._canvas=t,this._translate=n,e.on("diagram.init",function(){this._init()},this),e.on("import.done",function(e){e.error||this.update()},this),this.HTML_MARKUP='<div class="dmn-definitions"><div class="dmn-definitions-name" title="'+this._translate("Definition name")+'" spellcheck="false"></div><div class="dmn-definitions-id" title="'+this._translate("Definition ID")+'" spellcheck="false"></div></div>'}r.$inject=["eventBus","canvas","translate"],r.prototype._init=function(){var e=this._canvas,t=this._eventBus,n=e.getContainer(),i=this._container=s()(this.HTML_MARKUP);n.appendChild(i),this.nameElement=(0,o.P)(".dmn-definitions-name",this._container),this.idElement=(0,o.P)(".dmn-definitions-id",this._container),o.Mm.bind(i,".dmn-definitions-name, .dmn-definitions-id","mousedown",function(e){e.stopPropagation()}),t.fire("definitionIdView.create",{html:i})},r.prototype.update=function(){var e=this._canvas.getRootElement().businessObject;this.nameElement.textContent=e.name,this.idElement.textContent=e.id};var a=n(11847);const l={__depends__:[n(31323).A],__init__:["definitionPropertiesView","definitionPropertiesPaletteAdapter"],definitionPropertiesView:["type",r],definitionPropertiesPaletteAdapter:["type",a.A]}},46389(e,t,n){"use strict";n.d(t,{j:()=>r,p:()=>o});var i=n(23906);function s(e){return(0,i.is)(e,"dmn:Decision")||(0,i.is)(e,"dmn:BusinessKnowledgeModel")||(0,i.is)(e,"dmn:InputData")||(0,i.is)(e,"dmn:KnowledgeSource")?"name":(0,i.is)(e,"dmn:TextAnnotation")?"text":void 0}function o(e){var t=e.businessObject,n=s(t);if(n)return t[n]||""}function r(e,t,n){var i=e.businessObject,o=s(i);return o&&(i[o]=t),n&&(e.hidden=!t),e}},33470(e,t,n){"use strict";n.d(t,{A:()=>ce});var i=n(54988),s=n(57094);function o(){}function r(e,t){this.model=e,this.properties=t}o.prototype.get=function(e){return this.$model.properties.get(this,e)},o.prototype.set=function(e,t){this.$model.properties.set(this,e,t)},r.prototype.createType=function(e){var t=this.model,n=this.properties,i=Object.create(o.prototype);(0,s.forEach)(e.properties,function(e){e.isMany||void 0===e.default||(i[e.name]=e.default)}),n.defineModel(i,t),n.defineDescriptor(i,e);var r=e.ns.name;function a(e){n.define(this,"$type",{value:r,enumerable:!0}),n.define(this,"$attrs",{value:{}}),n.define(this,"$parent",{writable:!0}),(0,s.forEach)(e,(0,s.bind)(function(e,t){this.set(t,e)},this))}return a.prototype=i,a.hasType=i.$instanceOf=this.model.hasType,n.defineModel(a,t),n.defineDescriptor(a,e),a};var a={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},l={String:function(e){return e},Boolean:function(e){return"true"===e},Integer:function(e){return parseInt(e,10)},Real:function(e){return parseFloat(e)}};function c(e,t){var n=l[e];return n?n(t):t}function u(e){return!!a[e]}function d(e){return!!l[e]}function p(e,t){var n,i,s=e.split(/:/);if(1===s.length)n=e,i=t;else{if(2!==s.length)throw new Error("expected <prefix:localName> or <localName>, got "+e);n=s[1],i=s[0]}return{name:e=(i?i+":":"")+n,prefix:i,localName:n}}function h(e){this.ns=e,this.name=e.name,this.allTypes=[],this.allTypesByName={},this.properties=[],this.propertiesByName={}}function m(e,t){this.packageMap={},this.typeMap={},this.packages=[],this.properties=t,(0,s.forEach)(e,(0,s.bind)(this.registerPackage,this))}function g(e,t,n){var i=t[n];if(i in e)throw new Error("package with "+n+" <"+i+"> already defined")}function f(e){this.model=e}function y(e,t,n){Object.defineProperty(e,t.name,{enumerable:!t.isReference,writable:!0,value:n,configurable:!0})}function v(e){return e.replace(/^:/,"")}function b(e,t={}){this.properties=new f(this),this.factory=new r(this,this.properties),this.registry=new m(e,this.properties),this.typeCache={},this.config=t}h.prototype.build=function(){return(0,s.pick)(this,["ns","name","allTypes","allTypesByName","properties","propertiesByName","bodyProperty","idProperty"])},h.prototype.addProperty=function(e,t,n){"boolean"==typeof t&&(n=t,t=void 0),this.addNamedProperty(e,!1!==n);var i=this.properties;void 0!==t?i.splice(t,0,e):i.push(e)},h.prototype.replaceProperty=function(e,t,n){var i=e.ns,s=this.properties,o=this.propertiesByName,r=e.name!==t.name;if(e.isId){if(!t.isId)throw new Error("property <"+t.ns.name+"> must be id property to refine <"+e.ns.name+">");this.setIdProperty(t,!1)}if(e.isBody){if(!t.isBody)throw new Error("property <"+t.ns.name+"> must be body property to refine <"+e.ns.name+">");this.setBodyProperty(t,!1)}var a=s.indexOf(e);if(-1===a)throw new Error("property <"+i.name+"> not found in property list");s.splice(a,1),this.addProperty(t,n?void 0:a,r),o[i.name]=o[i.localName]=t},h.prototype.redefineProperty=function(e,t,n){var i=e.ns.prefix,s=t.split("#"),o=p(s[0],i),r=p(s[1],o.prefix).name,a=this.propertiesByName[r];if(!a)throw new Error("refined property <"+r+"> not found");this.replaceProperty(a,e,n),delete e.redefines},h.prototype.addNamedProperty=function(e,t){var n=e.ns,i=this.propertiesByName;t&&(this.assertNotDefined(e,n.name),this.assertNotDefined(e,n.localName)),i[n.name]=i[n.localName]=e},h.prototype.removeNamedProperty=function(e){var t=e.ns,n=this.propertiesByName;delete n[t.name],delete n[t.localName]},h.prototype.setBodyProperty=function(e,t){if(t&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+e.ns.name+">)");this.bodyProperty=e},h.prototype.setIdProperty=function(e,t){if(t&&this.idProperty)throw new Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+e.ns.name+">)");this.idProperty=e},h.prototype.assertNotTrait=function(e){if((e.extends||[]).length)throw new Error(`cannot create <${e.name}> extending <${e.extends}>`)},h.prototype.assertNotDefined=function(e,t){var n=e.name,i=this.propertiesByName[n];if(i)throw new Error("property <"+n+"> already defined; override of <"+i.definedBy.ns.name+"#"+i.ns.name+"> by <"+e.definedBy.ns.name+"#"+e.ns.name+"> not allowed without redefines")},h.prototype.hasProperty=function(e){return this.propertiesByName[e]},h.prototype.addTrait=function(e,t){t&&this.assertNotTrait(e);var n=this.allTypesByName,i=this.allTypes,o=e.name;o in n||((0,s.forEach)(e.properties,(0,s.bind)(function(n){n=(0,s.assign)({},n,{name:n.ns.localName,inherited:t}),Object.defineProperty(n,"definedBy",{value:e});var i=n.replaces,o=n.redefines;i||o?this.redefineProperty(n,i||o,i):(n.isBody&&this.setBodyProperty(n),n.isId&&this.setIdProperty(n),this.addProperty(n))},this)),i.push(e),n[o]=e)},m.prototype.getPackage=function(e){return this.packageMap[e]},m.prototype.getPackages=function(){return this.packages},m.prototype.registerPackage=function(e){e=(0,s.assign)({},e);var t=this.packageMap;g(t,e,"prefix"),g(t,e,"uri"),(0,s.forEach)(e.types,(0,s.bind)(function(t){this.registerType(t,e)},this)),t[e.uri]=t[e.prefix]=e,this.packages.push(e)},m.prototype.registerType=function(e,t){var n=p((e=(0,s.assign)({},e,{superClass:(e.superClass||[]).slice(),extends:(e.extends||[]).slice(),properties:(e.properties||[]).slice(),meta:(0,s.assign)(e.meta||{})})).name,t.prefix),i=n.name,o={};(0,s.forEach)(e.properties,(0,s.bind)(function(e){var t=p(e.name,n.prefix),i=t.name;u(e.type)||(e.type=p(e.type,t.prefix).name),(0,s.assign)(e,{ns:t,name:i}),o[i]=e},this)),(0,s.assign)(e,{ns:n,name:i,propertiesByName:o}),(0,s.forEach)(e.extends,(0,s.bind)(function(e){var t=p(e,n.prefix),s=this.typeMap[t.name];s.traits=s.traits||[],s.traits.push(i)},this)),this.definePackage(e,t),this.typeMap[i]=e},m.prototype.mapTypes=function(e,t,n){var i=u(e.name)?{name:e.name}:this.typeMap[e.name],o=this;function r(n,i){var s=p(n,u(n)?"":e.prefix);o.mapTypes(s,t,i)}function a(e){return r(e,!0)}if(!i)throw new Error("unknown type <"+e.name+">");(0,s.forEach)(i.superClass,n?a:function(e){return r(e,!1)}),t(i,!n),(0,s.forEach)(i.traits,a)},m.prototype.getEffectiveDescriptor=function(e){var t=p(e),n=new h(t);this.mapTypes(t,function(e,t){n.addTrait(e,t)});var i=n.build();return this.definePackage(i,i.allTypes[i.allTypes.length-1].$pkg),i},m.prototype.definePackage=function(e,t){this.properties.define(e,"$pkg",{value:t})},f.prototype.set=function(e,t,n){if(!(0,s.isString)(t)||!t.length)throw new TypeError("property name must be a non-empty string");var i=this.getProperty(e,t),o=i&&i.name;void 0===n?i?delete e[o]:delete e.$attrs[v(t)]:i?o in e?e[o]=n:y(e,i,n):e.$attrs[v(t)]=n},f.prototype.get=function(e,t){var n=this.getProperty(e,t);if(!n)return e.$attrs[v(t)];var i=n.name;return!e[i]&&n.isMany&&y(e,n,[]),e[i]},f.prototype.define=function(e,t,n){if(!n.writable){var i=n.value;delete(n=(0,s.assign)({},n,{get:function(){return i}})).value}Object.defineProperty(e,t,n)},f.prototype.defineDescriptor=function(e,t){this.define(e,"$descriptor",{value:t})},f.prototype.defineModel=function(e,t){this.define(e,"$model",{value:t})},f.prototype.getProperty=function(e,t){var n=this.model,i=n.getPropertyDescriptor(e,t);if(i)return i;if(t.includes(":"))return null;const s=n.config.strict;if(void 0!==s){const n=new TypeError(`unknown property <${t}> on <${e.$type}>`);if(s)throw n;"undefined"!=typeof console&&console.warn(n)}return null},b.prototype.create=function(e,t){var n=this.getType(e);if(!n)throw new Error("unknown type <"+e+">");return new n(t)},b.prototype.getType=function(e){var t=this.typeCache,n=(0,s.isString)(e)?e:e.ns.name,i=t[n];return i||(e=this.registry.getEffectiveDescriptor(n),i=t[n]=this.factory.createType(e)),i},b.prototype.createAny=function(e,t,n){var i=p(e),o={$type:e,$instanceOf:function(e){return e===this.$type},get:function(e){return this[e]},set:function(e,t){(0,s.set)(this,[e],t)}},r={name:e,isGeneric:!0,ns:{prefix:i.prefix,localName:i.localName,uri:t}};return this.properties.defineDescriptor(o,r),this.properties.defineModel(o,this),this.properties.define(o,"get",{enumerable:!1,writable:!0}),this.properties.define(o,"set",{enumerable:!1,writable:!0}),this.properties.define(o,"$parent",{enumerable:!1,writable:!0}),this.properties.define(o,"$instanceOf",{enumerable:!1,writable:!0}),(0,s.forEach)(n,function(e,t){(0,s.isObject)(e)&&void 0!==e.value?o[e.name]=e.value:o[t]=e}),o},b.prototype.getPackage=function(e){return this.registry.getPackage(e)},b.prototype.getPackages=function(){return this.registry.getPackages()},b.prototype.getElementDescriptor=function(e){return e.$descriptor},b.prototype.hasType=function(e,t){return void 0===t&&(t=e,e=this),t in e.$model.getElementDescriptor(e).allTypesByName},b.prototype.getPropertyDescriptor=function(e,t){return this.getElementDescriptor(e).propertiesByName[t]},b.prototype.getTypeDescriptor=function(e){return this.registry.typeMap[e]};var _=n(11302);function x(e){return e.xml&&"lowerCase"===e.xml.tagAlias}var C={xsi:"http://www.w3.org/2001/XMLSchema-instance",xml:"http://www.w3.org/XML/1998/namespace"},w="property";function E(e){return e.xml&&e.xml.serialize}function D(e,t){return x(t)?e.prefix+":"+((n=e.localName).charAt(0).toUpperCase()+n.slice(1)):e.name;var n}function S(e){return new Error(e)}function A(e){return e.$descriptor}function R(e){(0,s.assign)(this,e),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(e){this.references.push(e)},this.addElement=function(e){if(!e)throw S("expected element");var t,n=this.elementsById,i=A(e).idProperty;if(i&&(t=e.get(i.name))){if(!/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i.test(t))throw new Error("illegal ID <"+t+">");if(n[t])throw S("duplicate ID <"+t+">");n[t]=e}},this.addWarning=function(e){this.warnings.push(e)}}function M(){}function I(){}function j(){}function O(e,t){this.property=e,this.context=t}function k(e,t){this.element=t,this.propertyDesc=e}function P(){}function F(e,t,n){this.model=e,this.type=e.getType(t),this.context=n}function T(e,t,n){F.call(this,e,t,n)}function N(e,t,n){this.model=e,this.context=n}function $(e){e instanceof b&&(e={model:e}),(0,s.assign)(this,{lax:!1},e)}M.prototype.handleEnd=function(){},M.prototype.handleText=function(){},M.prototype.handleNode=function(){},I.prototype=Object.create(M.prototype),I.prototype.handleNode=function(){return this},j.prototype=Object.create(M.prototype),j.prototype.handleText=function(e){this.body=(this.body||"")+e},O.prototype=Object.create(j.prototype),O.prototype.handleNode=function(e){if(this.element)throw S("expected no sub nodes");return this.element=this.createReference(e),this},O.prototype.handleEnd=function(){this.element.id=this.body},O.prototype.createReference=function(e){return{property:this.property.ns.name,id:""}},k.prototype=Object.create(j.prototype),k.prototype.handleEnd=function(){var e=this.body||"",t=this.element,n=this.propertyDesc;e=c(n.type,e),n.isMany?t.get(n.name).push(e):t.set(n.name,e)},P.prototype=Object.create(j.prototype),P.prototype.handleNode=function(e){var t=this,n=this.element;return n?t=this.handleChild(e):(n=this.element=this.createElement(e),this.context.addElement(n)),t},F.prototype=Object.create(P.prototype),F.prototype.addReference=function(e){this.context.addReference(e)},F.prototype.handleText=function(e){if(!A(this.element).bodyProperty)throw S("unexpected body text <"+e+">");j.prototype.handleText.call(this,e)},F.prototype.handleEnd=function(){var e=this.body,t=this.element,n=A(t).bodyProperty;n&&void 0!==e&&(e=c(n.type,e),t.set(n.name,e))},F.prototype.createElement=function(e){var t,n=e.attributes,i=this.type,o=A(i),r=this.context,a=new i({}),l=this.model;return(0,s.forEach)(n,function(e,n){var i,u=o.propertiesByName[n];u&&u.isReference?u.isMany?(i=e.split(" "),(0,s.forEach)(i,function(e){r.addReference({element:a,property:u.ns.name,id:e})})):r.addReference({element:a,property:u.ns.name,id:e}):(u?e=c(u.type,e):"xmlns"===n?n=":"+n:(t=p(n,o.ns.prefix),l.getPackage(t.prefix)&&r.addWarning({message:"unknown attribute <"+n+">",element:a,property:n,value:e})),a.set(n,e))}),a},F.prototype.getPropertyForNode=function(e){var t=p(e.name),n=this.type,i=this.model,o=A(n),r=t.name,a=o.propertiesByName[r];if(a&&!a.isAttr){const t=function(e){const t=E(e);return t!==w&&(t||null)}(a);if(t){const n=e.attributes[t];if(n){const t=function(e,t,n){const i=p(e,t.xmlns),s=p(`${t[i.prefix]||i.prefix}:${i.localName}`);return function(e,t){var n=e.name,i=e.localName,s=t&&t.xml&&t.xml.typePrefix;return s&&0===i.indexOf(s)?e.prefix+":"+i.slice(s.length):n}(s,n.getPackage(s.prefix))}(n,e.ns,i),o=i.getType(t);return(0,s.assign)({},a,{effectiveType:A(o).name})}}return a}var l=i.getPackage(t.prefix);if(l){const e=D(t,l),n=i.getType(e);if(a=(0,s.find)(o.properties,function(e){return!e.isVirtual&&!e.isReference&&!e.isAttribute&&n.hasType(e.type)}))return(0,s.assign)({},a,{effectiveType:A(n).name})}else if(a=(0,s.find)(o.properties,function(e){return!e.isReference&&!e.isAttribute&&"Element"===e.type}))return a;throw S("unrecognized element <"+t.name+">")},F.prototype.toString=function(){return"ElementDescriptor["+A(this.type).name+"]"},F.prototype.valueHandler=function(e,t){return new k(e,t)},F.prototype.referenceHandler=function(e){return new O(e,this.context)},F.prototype.handler=function(e){return"Element"===e?new N(this.model,e,this.context):new F(this.model,e,this.context)},F.prototype.handleChild=function(e){var t,n,i,o;if(t=this.getPropertyForNode(e),i=this.element,d(n=t.effectiveType||t.type))return this.valueHandler(t,i);var r=(o=t.isReference?this.referenceHandler(t).handleNode(e):this.handler(n).handleNode(e)).element;return void 0!==r&&(t.isMany?i.get(t.name).push(r):i.set(t.name,r),t.isReference?((0,s.assign)(r,{element:i}),this.context.addReference(r)):r.$parent=i),o},T.prototype=Object.create(F.prototype),T.prototype.createElement=function(e){var t=e.name,n=p(t),i=this.model,s=this.type,o=i.getPackage(n.prefix),r=o&&D(n,o)||t;if(!s.hasType(r))throw S("unexpected element <"+e.originalName+">");return F.prototype.createElement.call(this,e)},N.prototype=Object.create(P.prototype),N.prototype.createElement=function(e){var t=e.name,n=p(t).prefix,i=e.ns[n+"$uri"],s=e.attributes;return this.model.createAny(t,i,s)},N.prototype.handleChild=function(e){var t=new N(this.model,"Element",this.context).handleNode(e),n=this.element,i=t.element;return void 0!==i&&((n.$children=n.$children||[]).push(i),i.$parent=n),t},N.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)},$.prototype.fromXML=function(e,t,n){var i=t.rootHandler;t instanceof F?(i=t,t={}):"string"==typeof t?(i=this.handler(t),t={}):"string"==typeof i&&(i=this.handler(i));var o=this.model,r=this.lax,a=new R((0,s.assign)({},t,{rootHandler:i})),l=new _.i({proxy:!0}),c=function(){var e=[];return Object.defineProperty(e,"peek",{value:function(){return this[this.length-1]}}),e}();function u(e,t,n){var i=t(),s=i.line,o=i.column,r=i.data;"<"===r.charAt(0)&&-1!==r.indexOf(" ")&&(r=r.slice(0,r.indexOf(" "))+">");var l="unparsable content "+(r?r+" ":"")+"detected\n\tline: "+s+"\n\tcolumn: "+o+"\n\tnested error: "+e.message;if(n)return a.addWarning({message:l,error:e}),!0;throw S(l)}function d(e,t){return u(e,t,!0)}i.context=a,c.push(i);var p=/^<\?xml /i,h=/ encoding="([^"]+)"/i,m=/^utf-8$/i;function g(e,t){try{c.peek().handleText(e)}catch(e){d(e,t)}}var f=o.getPackages().reduce(function(e,t){return e[t.uri]=t.prefix,e},Object.entries(C).reduce(function(e,[t,n]){return e[n]=t,e},o.config&&o.config.nsMap||{}));return l.ns(f).on("openTag",function(e,t,n,i){var s=e.attrs||{},o=Object.keys(s).reduce(function(e,n){var i=t(s[n]);return e[n]=i,e},{});!function(e,t){var n=c.peek();try{c.push(n.handleNode(e))}catch(e){u(e,t,r)&&c.push(new I)}}({name:e.name,originalName:e.originalName,attributes:o,ns:e.ns},i)}).on("question",function(e){if(p.test(e)){var t=h.exec(e),n=t&&t[1];n&&!m.test(n)&&a.addWarning({message:"unsupported document encoding <"+n+">, falling back to UTF-8"})}}).on("closeTag",function(){c.pop().handleEnd()}).on("cdata",g).on("text",function(e,t,n){!function(e,t){e.trim()&&g(e,t)}(t(e),n)}).on("error",u).on("warn",d),new Promise(function(t,n){var s;try{l.parse(e),function(){var e,t,n=a.elementsById,i=a.references;for(e=0;t=i[e];e++){var s=t.element,o=n[t.id],r=A(s).propertiesByName[t.property];if(o||a.addWarning({message:"unresolved reference <"+t.id+">",element:t.element,property:t.property,value:t.id}),r.isMany){var l=s.get(r.name),c=l.indexOf(t);-1===c&&(c=l.length),o?l[c]=o:l.splice(c,1)}else s.set(r.name,o)}}()}catch(e){s=e}var o=i.element;s||o||(s=S("failed to parse document as <"+i.type.$descriptor.name+">"));var r=a.warnings,c=a.references,u=a.elementsById;return s?(s.warnings=r,n(s)):t({rootElement:o,elementsById:u,references:c,warnings:r})})},$.prototype.handler=function(e){return new T(this.model,e)};var L=/<|>|'|"|&|\n\r|\n/g,B=/<|>|&/g;function V(e){this.prefixMap={},this.uriMap={},this.used={},this.wellknown=[],this.custom=[],this.parent=e,this.defaultPrefixMap=e&&e.defaultPrefixMap||{}}function U(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function z(e){return(0,s.isString)(e)?e:(e.prefix?e.prefix+":":"")+e.localName}V.prototype.mapDefaultPrefixes=function(e){this.defaultPrefixMap=e},V.prototype.defaultUriByPrefix=function(e){return this.defaultPrefixMap[e]},V.prototype.byUri=function(e){return this.uriMap[e]||this.parent&&this.parent.byUri(e)},V.prototype.add=function(e,t){this.uriMap[e.uri]=e,t?this.wellknown.push(e):this.custom.push(e),this.mapPrefix(e.prefix,e.uri)},V.prototype.uriByPrefix=function(e){return this.prefixMap[e||"xmlns"]||this.parent&&this.parent.uriByPrefix(e)},V.prototype.mapPrefix=function(e,t){this.prefixMap[e||"xmlns"]=t},V.prototype.getNSKey=function(e){return void 0!==e.prefix?e.uri+"|"+e.prefix:e.uri},V.prototype.logUsed=function(e){var t=e.uri,n=this.getNSKey(e);this.used[n]=this.byUri(t),this.parent&&this.parent.logUsed(e)},V.prototype.getUsed=function(e){return[].concat(this.wellknown,this.custom).filter(e=>{var t=this.getNSKey(e);return this.used[t]})};var K={"\n":"#10","\n\r":"#10",'"':"#34","'":"#39","<":"#60",">":"#62","&":"#38"},W={"<":"lt",">":"gt","&":"amp"};function q(e,t,n){return(e=(0,s.isString)(e)?e:""+e).replace(t,function(e){return"&"+n[e]+";"})}function G(e){this.tagName=e}function H(){}function X(e){this.tagName=e}function Y(e,t){this.body=[],this.attrs=[],this.parent=e,this.propertyDescriptor=t}function J(e,t,n){Y.call(this,e,t),this.serialization=n}function Z(){this.value="",this.write=function(e){this.value+=e}}function Q(e,t){var n=[""];this.append=function(t){return e.write(t),this},this.appendNewLine=function(){return t&&e.write("\n"),this},this.appendIndent=function(){return t&&e.write(n.join("  ")),this},this.indent=function(){return n.push(""),this},this.unindent=function(){return n.pop(),this}}function ee(e){return e=(0,s.assign)({format:!1,preamble:!0},e||{}),{toXML:function(t,n){var i=n||new Z,s=new Q(i,e.format);e.preamble&&s.append('<?xml version="1.0" encoding="UTF-8"?>\n');var o=new Y,r=t.$model;if(o.getNamespaces().mapDefaultPrefixes(function(e){const t=e.config&&e.config.nsMap||{},n={};for(const e in C)n[e]=C[e];for(const e in t)n[t[e]]=e;for(const t of e.getPackages())n[t.prefix]=t.uri;return n}(r)),o.build(t).serializeTo(s),!n)return i.value}}}function te(e,t){b.call(this,e,t)}G.prototype.build=function(e){return this.element=e,this},G.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"+this.element.id+"</"+this.tagName+">").appendNewLine()},H.prototype.serializeValue=H.prototype.serializeTo=function(e){e.append(this.escape?q(this.value,B,W):this.value)},H.prototype.build=function(e,t){return this.value=t,"String"===e.type&&-1!==t.search(B)&&(this.escape=!0),this},U(X,H),X.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"),this.serializeValue(e),e.append("</"+this.tagName+">").appendNewLine()},Y.prototype.build=function(e){this.element=e;var t,n,i,o=e.$descriptor,r=this.propertyDescriptor,a=o.isGeneric;return t=a?this.parseGenericNsAttributes(e):this.parseNsAttributes(e),this.ns=r?this.nsPropertyTagName(r):this.nsTagName(o),this.tagName=this.addTagName(this.ns),a?this.parseGenericContainments(e):(n=function(e){var t=e.$descriptor;return(0,s.filter)(t.properties,function(t){var n=t.name;if(t.isVirtual)return!1;if(!(0,s.has)(e,n))return!1;var i=e[n];return i!==t.default&&null!==i&&(!t.isMany||i.length)})}(e),this.parseAttributes((i=n,(0,s.filter)(i,function(e){return e.isAttr}))),this.parseContainments(function(e){return(0,s.filter)(e,function(e){return!e.isAttr})}(n))),this.parseGenericAttributes(e,t),this},Y.prototype.nsTagName=function(e){return function(e,t){return t.isGeneric?(0,s.assign)({localName:t.ns.localName},e):(0,s.assign)({localName:(n=t.ns.localName,i=t.$pkg,x(i)?(o=n).charAt(0).toLowerCase()+o.slice(1):n)},e);var n,i,o}(this.logNamespaceUsed(e.ns),e)},Y.prototype.nsPropertyTagName=function(e){return function(e,t){return(0,s.assign)({localName:t.ns.localName},e)}(this.logNamespaceUsed(e.ns),e)},Y.prototype.isLocalNs=function(e){return e.uri===this.ns.uri},Y.prototype.nsAttributeName=function(e){var t;if(t=(0,s.isString)(e)?p(e):e.ns,e.inherited)return{localName:t.localName};var n=this.logNamespaceUsed(t);return this.getNamespaces().logUsed(n),this.isLocalNs(n)?{localName:t.localName}:(0,s.assign)({localName:t.localName},n)},Y.prototype.parseGenericNsAttributes=function(e){return Object.entries(e).filter(([t,n])=>!t.startsWith("$")&&this.parseNsAttribute(e,t,n)).map(([e,t])=>({name:e,value:t}))},Y.prototype.parseGenericContainments=function(e){var t=e.$body;t&&this.body.push((new H).build({type:"String"},t));var n=e.$children;n&&(0,s.forEach)(n,e=>{this.body.push(new Y(this).build(e))})},Y.prototype.parseNsAttribute=function(e,t,n){var i,s=e.$model,o=p(t);if("xmlns"===o.prefix&&(i={prefix:o.localName,uri:n}),o.prefix||"xmlns"!==o.localName||(i={uri:n}),!i)return{name:t,value:n};if(s&&s.getPackage(n))this.logNamespace(i,!0,!0);else{var r=this.logNamespaceUsed(i,!0);this.getNamespaces().logUsed(r)}},Y.prototype.parseNsAttributes=function(e){var t=this,n=e.$attrs,i=[];return(0,s.forEach)(n,function(n,s){var o=t.parseNsAttribute(e,s,n);o&&i.push(o)}),i},Y.prototype.parseGenericAttributes=function(e,t){var n=this;(0,s.forEach)(t,function(t){try{n.addAttribute(n.nsAttributeName(t.name),t.value)}catch(n){"undefined"!=typeof console&&console.warn(`missing namespace information for <${t.name}=${t.value}> on`,e,n)}})},Y.prototype.parseContainments=function(e){var t=this,n=this.body,i=this.element;(0,s.forEach)(e,function(e){var o=i.get(e.name),r=e.isReference;if(e.isMany||(o=[o]),e.isBody)n.push((new H).build(e,o[0]));else if(d(e.type))(0,s.forEach)(o,function(i){n.push(new X(t.addTagName(t.nsPropertyTagName(e))).build(e,i))});else if(r)(0,s.forEach)(o,function(i){n.push(new G(t.addTagName(t.nsPropertyTagName(e))).build(i))});else{var a=E(e);(0,s.forEach)(o,function(i){var s;s=a?a===w?new Y(t,e):new J(t,e,a):new Y(t),n.push(s.build(i))})}})},Y.prototype.getNamespaces=function(e){var t,n=this.namespaces,i=this.parent;return n||(t=i&&i.getNamespaces(),e||!t?this.namespaces=n=new V(t):n=t),n},Y.prototype.logNamespace=function(e,t,n){var i=this.getNamespaces(n),s=e.uri,o=e.prefix;return i.byUri(s)&&!n||i.add(e,t),i.mapPrefix(o,s),e},Y.prototype.logNamespaceUsed=function(e,t){var n,i,s,o=this.getNamespaces(t),r=e.prefix,a=e.uri;if(!r&&!a)return{localName:e.localName};if(s=o.defaultUriByPrefix(r),!(a=a||s||o.uriByPrefix(r)))throw new Error("no namespace uri given for prefix <"+r+">");if((e=o.byUri(a))||r||(e=this.logNamespace({uri:a},s===a,!0)),!e){for(n=r,i=1;o.uriByPrefix(n);)n=r+"_"+i++;e=this.logNamespace({prefix:n,uri:a},s===a)}return r&&o.mapPrefix(r,a),e},Y.prototype.parseAttributes=function(e){var t=this,n=this.element;(0,s.forEach)(e,function(e){var i=n.get(e.name);if(e.isReference)if(e.isMany){var o=[];(0,s.forEach)(i,function(e){o.push(e.id)}),i=o.join(" ")}else i=i.id;t.addAttribute(t.nsAttributeName(e),i)})},Y.prototype.addTagName=function(e){var t=this.logNamespaceUsed(e);return this.getNamespaces().logUsed(t),z(e)},Y.prototype.addAttribute=function(e,t){var n=this.attrs;(0,s.isString)(t)&&(t=q(t,L,K));var i=(0,s.findIndex)(n,function(t){return t.name.localName===e.localName&&t.name.uri===e.uri&&t.name.prefix===e.prefix}),o={name:e,value:t};-1!==i?n.splice(i,1,o):n.push(o)},Y.prototype.serializeAttributes=function(e){var t=this.attrs,n=this.namespaces;n&&(t=function(e){return e.getUsed().filter(function(e){return"xml"!==e.prefix}).map(function(e){return{name:"xmlns"+(e.prefix?":"+e.prefix:""),value:e.uri}})}(n).concat(t)),(0,s.forEach)(t,function(t){e.append(" ").append(z(t.name)).append('="').append(t.value).append('"')})},Y.prototype.serializeTo=function(e){var t=this.body[0],n=t&&t.constructor!==H;e.appendIndent().append("<"+this.tagName),this.serializeAttributes(e),e.append(t?">":" />"),t&&(n&&e.appendNewLine().indent(),(0,s.forEach)(this.body,function(t){t.serializeTo(e)}),n&&e.unindent().appendIndent(),e.append("</"+this.tagName+">")),e.appendNewLine()},U(J,Y),J.prototype.parseNsAttributes=function(e){var t=Y.prototype.parseNsAttributes.call(this,e).filter(e=>e.name!==this.serialization),n=e.$descriptor;if(n.name===this.propertyDescriptor.type)return t;var i=this.typeNs=this.nsTagName(n);this.getNamespaces().logUsed(this.typeNs);var s=e.$model.getPackage(i.uri),o=s.xml&&s.xml.typePrefix||"";return this.addAttribute(this.nsAttributeName(this.serialization),(i.prefix?i.prefix+":":"")+o+n.ns.localName),t},J.prototype.isLocalNs=function(e){return e.uri===(this.typeNs||this.ns).uri},te.prototype=Object.create(b.prototype),te.prototype.fromXML=function(e,t,n){(0,s.isString)(t)||(n=t,t="dmn:Definitions");var i=new $((0,s.assign)({model:this,lax:!0},n)),o=i.handler(t);return i.fromXML(e,o)},te.prototype.toXML=function(e,t){var n=new ee(t);return new Promise(function(t,i){try{return t({xml:n.toXML(e)})}catch(e){return i(e)}})};var ne={dc:{name:"DC",prefix:"dc",uri:"http://www.omg.org/spec/DMN/20180521/DC/",types:[{name:"Dimension",properties:[{name:"width",isAttr:!0,type:"Real"},{name:"height",isAttr:!0,type:"Real"}]},{name:"Bounds",properties:[{name:"height",isAttr:!0,type:"Real"},{name:"width",isAttr:!0,type:"Real"},{name:"x",isAttr:!0,type:"Real"},{name:"y",isAttr:!0,type:"Real"}]},{name:"Point",properties:[{name:"x",isAttr:!0,type:"Real"},{name:"y",isAttr:!0,type:"Real"}]},{name:"Color",properties:[{name:"red",type:"UML_Standard_Profile.mdzip:eee_1045467100323_917313_65"},{name:"green",type:"UML_Standard_Profile.mdzip:eee_1045467100323_917313_65"},{name:"blue",type:"UML_Standard_Profile.mdzip:eee_1045467100323_917313_65"}]}],associations:[],enumerations:[{name:"AlignmentKind",literalValues:[{name:"start"},{name:"center"},{name:"end"}]}]},di:{name:"DI",prefix:"di",uri:"http://www.omg.org/spec/DMN/20180521/DI/",types:[{name:"DiagramElement",isAbstract:!0,properties:[{name:"extension",type:"Extension"},{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"style",isReference:!0,type:"Style",xml:{serialize:"property"}},{name:"sharedStyle",isReference:!0,isVirtual:!0,type:"Style"}]},{name:"Diagram",superClass:["DiagramElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,type:"Real"}]},{name:"Shape",isAbstract:!0,properties:[{name:"bounds",type:"dc:Bounds"}],superClass:["DiagramElement"]},{name:"Edge",isAbstract:!0,properties:[{name:"waypoint",type:"dc:Point",isMany:!0,xml:{serialize:"property"}}],superClass:["DiagramElement"]},{name:"Style",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"}]},{name:"Extension",properties:[{name:"values",isMany:!0,type:"Element"}]}],associations:[],enumerations:[],xml:{tagAlias:"lowerCase"}},dmn:{name:"DMN",prefix:"dmn",uri:"https://www.omg.org/spec/DMN/20191111/MODEL/",types:[{name:"AuthorityRequirement",superClass:["DMNElement"],properties:[{name:"requiredAuthority",type:"DMNElementReference",xml:{serialize:"property"}},{name:"requiredDecision",type:"DMNElementReference",xml:{serialize:"property"}},{name:"requiredInput",type:"DMNElementReference",xml:{serialize:"property"}}]},{name:"ItemDefinition",superClass:["NamedElement"],properties:[{name:"typeRef",type:"String"},{name:"allowedValues",type:"UnaryTests",xml:{serialize:"property"}},{name:"typeLanguage",type:"String",isAttr:!0},{name:"itemComponent",type:"ItemDefinition",isMany:!0,xml:{serialize:"property"}},{name:"functionItem",type:"FunctionItem"},{name:"isCollection",isAttr:!0,type:"Boolean"}]},{name:"Definitions",superClass:["NamedElement"],properties:[{name:"import",type:"Import",isMany:!0},{name:"itemDefinition",type:"ItemDefinition",isMany:!0},{name:"drgElement",type:"DRGElement",isMany:!0},{name:"artifact",type:"Artifact",isMany:!0},{name:"elementCollection",type:"ElementCollection",isMany:!0},{name:"businessContextElement",type:"BusinessContextElement",isMany:!0},{name:"namespace",type:"String",isAttr:!0},{name:"expressionLanguage",type:"String",isAttr:!0},{name:"typeLanguage",type:"String",isAttr:!0},{name:"exporter",isAttr:!0,type:"String"},{name:"exporterVersion",isAttr:!0,type:"String"},{name:"dmnDI",type:"dmndi:DMNDI"}]},{name:"KnowledgeSource",superClass:["DRGElement"],properties:[{name:"authorityRequirement",type:"AuthorityRequirement",isMany:!0},{name:"type",type:"String"},{name:"owner",type:"DMNElementReference",xml:{serialize:"property"}},{name:"locationURI",type:"String",isAttr:!0}]},{name:"DecisionRule",superClass:["DMNElement"],properties:[{name:"inputEntry",type:"UnaryTests",isMany:!0,xml:{serialize:"property"}},{name:"outputEntry",type:"LiteralExpression",isMany:!0,xml:{serialize:"property"}},{name:"annotationEntry",type:"RuleAnnotation",isMany:!0,xml:{serialize:"property"}}]},{name:"Expression",isAbstract:!0,superClass:["DMNElement"],properties:[{name:"typeRef",isAttr:!0,type:"String"}]},{name:"InformationItem",superClass:["NamedElement"],properties:[{name:"typeRef",isAttr:!0,type:"String"}]},{name:"Decision",superClass:["DRGElement"],properties:[{name:"question",type:"String",xml:{serialize:"property"}},{name:"allowedAnswers",type:"String",xml:{serialize:"property"}},{name:"variable",type:"InformationItem",xml:{serialize:"property"}},{name:"informationRequirement",type:"InformationRequirement",isMany:!0},{name:"knowledgeRequirement",type:"KnowledgeRequirement",isMany:!0},{name:"authorityRequirement",type:"AuthorityRequirement",isMany:!0},{name:"supportedObjective",isMany:!0,type:"DMNElementReference",xml:{serialize:"property"}},{name:"impactedPerformanceIndicator",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}},{name:"decisionMaker",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}},{name:"decisionOwner",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}},{name:"usingProcess",isMany:!0,type:"DMNElementReference",xml:{serialize:"property"}},{name:"usingTask",isMany:!0,type:"DMNElementReference",xml:{serialize:"property"}},{name:"decisionLogic",type:"Expression"}]},{name:"Invocation",superClass:["Expression"],properties:[{name:"calledFunction",type:"Expression"},{name:"binding",type:"Binding",isMany:!0}]},{name:"OrganisationalUnit",superClass:["BusinessContextElement"],properties:[{name:"decisionMade",type:"Decision",isReference:!0,isMany:!0},{name:"decisionOwned",type:"Decision",isReference:!0,isMany:!0}]},{name:"Import",superClass:["NamedElement"],properties:[{name:"importType",type:"String",isAttr:!0},{name:"locationURI",type:"String",isAttr:!0},{name:"namespace",type:"String",isAttr:!0}]},{name:"InformationRequirement",superClass:["DMNElement"],properties:[{name:"requiredDecision",type:"DMNElementReference",xml:{serialize:"property"}},{name:"requiredInput",type:"DMNElementReference",xml:{serialize:"property"}}]},{name:"ElementCollection",superClass:["NamedElement"],properties:[{name:"drgElement",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}}]},{name:"DRGElement",isAbstract:!0,superClass:["NamedElement"],properties:[]},{name:"InputData",superClass:["DRGElement"],properties:[{name:"variable",type:"InformationItem",xml:{serialize:"property"}}]},{name:"DMNElement",isAbstract:!0,properties:[{name:"description",type:"String"},{name:"extensionElements",type:"ExtensionElements"},{name:"id",type:"String",isAttr:!0,isId:!0},{name:"extensionAttribute",type:"ExtensionAttribute",isMany:!0},{name:"label",isAttr:!0,type:"String"}]},{name:"InputClause",superClass:["DMNElement"],properties:[{name:"inputExpression",type:"LiteralExpression",xml:{serialize:"property"}},{name:"inputValues",type:"UnaryTests",xml:{serialize:"property"}}]},{name:"DecisionTable",superClass:["Expression"],properties:[{name:"input",type:"InputClause",isMany:!0,xml:{serialize:"property"}},{name:"output",type:"OutputClause",isMany:!0,xml:{serialize:"property"}},{name:"annotation",type:"RuleAnnotationClause",isMany:!0,xml:{serialize:"property"}},{name:"rule",type:"DecisionRule",isMany:!0,xml:{serialize:"property"}},{name:"hitPolicy",type:"HitPolicy",isAttr:!0,default:"UNIQUE"},{name:"aggregation",type:"BuiltinAggregator",isAttr:!0},{name:"preferredOrientation",type:"DecisionTableOrientation",isAttr:!0},{name:"outputLabel",isAttr:!0,type:"String"}]},{name:"LiteralExpression",superClass:["Expression"],properties:[{name:"expressionLanguage",type:"String",isAttr:!0},{name:"text",type:"String"},{name:"importedValues",type:"ImportedValues"}]},{name:"Binding",properties:[{name:"parameter",type:"InformationItem",xml:{serialize:"property"}},{name:"bindingFormula",type:"Expression"}]},{name:"KnowledgeRequirement",superClass:["DMNElement"],properties:[{name:"requiredKnowledge",type:"DMNElementReference",xml:{serialize:"property"}}]},{name:"BusinessKnowledgeModel",superClass:["Invocable"],properties:[{name:"encapsulatedLogic",type:"FunctionDefinition",xml:{serialize:"property"}},{name:"knowledgeRequirement",type:"KnowledgeRequirement",isMany:!0},{name:"authorityRequirement",type:"AuthorityRequirement",isMany:!0}]},{name:"BusinessContextElement",isAbstract:!0,superClass:["NamedElement"],properties:[{name:"URI",type:"String",isAttr:!0}]},{name:"PerformanceIndicator",superClass:["BusinessContextElement"],properties:[{name:"impactingDecision",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}}]},{name:"FunctionDefinition",superClass:["Expression"],properties:[{name:"formalParameter",type:"InformationItem",isMany:!0,xml:{serialize:"property"}},{name:"body",type:"Expression"},{name:"kind",type:"FunctionKind",isAttr:!0}]},{name:"Context",superClass:["Expression"],properties:[{name:"contextEntry",type:"ContextEntry",isMany:!0}]},{name:"ContextEntry",superClass:["DMNElement"],properties:[{name:"variable",type:"InformationItem",xml:{serialize:"property"}},{name:"value",type:"Expression"}]},{name:"List",superClass:["Expression"],properties:[{name:"elements",isMany:!0,type:"Expression"}]},{name:"Relation",superClass:["Expression"],properties:[{name:"column",type:"InformationItem",isMany:!0,xml:{serialize:"property"}},{name:"row",type:"List",isMany:!0,xml:{serialize:"property"}}]},{name:"OutputClause",superClass:["DMNElement"],properties:[{name:"outputValues",type:"UnaryTests",xml:{serialize:"property"}},{name:"defaultOutputEntry",type:"LiteralExpression",xml:{serialize:"property"}},{name:"name",isAttr:!0,type:"String"},{name:"typeRef",isAttr:!0,type:"String"}]},{name:"UnaryTests",superClass:["Expression"],properties:[{name:"text",type:"String"},{name:"expressionLanguage",type:"String",isAttr:!0}]},{name:"NamedElement",isAbstract:!0,superClass:["DMNElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"ImportedValues",superClass:["Import"],properties:[{name:"importedElement",type:"String"},{name:"expressionLanguage",type:"String",isAttr:!0}]},{name:"DecisionService",superClass:["Invocable"],properties:[{name:"outputDecision",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}},{name:"encapsulatedDecision",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}},{name:"inputDecision",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}},{name:"inputData",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}}]},{name:"ExtensionElements",properties:[{name:"values",type:"Element",isMany:!0}]},{name:"ExtensionAttribute",properties:[{name:"value",type:"Element"},{name:"valueRef",type:"Element",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Element",isAbstract:!0,properties:[{name:"extensionAttribute",type:"ExtensionAttribute",isAttr:!0,isReference:!0},{name:"elements",type:"ExtensionElements",isAttr:!0,isReference:!0}]},{name:"Artifact",isAbstract:!0,superClass:["DMNElement"],properties:[]},{name:"Association",superClass:["Artifact"],properties:[{name:"sourceRef",type:"DMNElementReference",xml:{serialize:"property"}},{name:"targetRef",type:"DMNElementReference",xml:{serialize:"property"}},{name:"associationDirection",type:"AssociationDirection",isAttr:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat",isAttr:!0,type:"String",default:"text/plain"}]},{name:"RuleAnnotationClause",properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"RuleAnnotation",properties:[{name:"text",type:"String"}]},{name:"Invocable",isAbstract:!0,superClass:["DRGElement"],properties:[{name:"variable",type:"InformationItem",xml:{serialize:"property"}}]},{name:"Group",superClass:["Artifact"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"FunctionItem",superClass:["DMNElement"],properties:[{name:"parameters",isMany:!0,type:"InformationItem",xml:{serialize:"property"}},{name:"outputTypeRef",isAttr:!0,type:"String"}]},{name:"DMNElementReference",properties:[{isAttr:!0,name:"href",type:"String"}]}],enumerations:[{name:"HitPolicy",literalValues:[{name:"UNIQUE"},{name:"FIRST"},{name:"PRIORITY"},{name:"ANY"},{name:"COLLECT"},{name:"RULE ORDER"},{name:"OUTPUT ORDER"}]},{name:"BuiltinAggregator",literalValues:[{name:"SUM"},{name:"COUNT"},{name:"MIN"},{name:"MAX"}]},{name:"DecisionTableOrientation",literalValues:[{name:"Rule-as-Row"},{name:"Rule-as-Column"},{name:"CrossTable"}]},{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"FunctionKind",literalValues:[{name:"FEEL"},{name:"Java"},{name:"PMML"}]}],associations:[],xml:{tagAlias:"lowerCase"}},dmndi:{name:"DMNDI",prefix:"dmndi",uri:"https://www.omg.org/spec/DMN/20191111/DMNDI/",types:[{name:"DMNDI",properties:[{name:"diagrams",type:"DMNDiagram",isMany:!0},{name:"styles",type:"DMNStyle",isMany:!0}]},{name:"DMNStyle",superClass:["di:Style"],properties:[{name:"fillColor",type:"dc:Color",isAttr:!0},{name:"strokeColor",type:"dc:Color",isAttr:!0},{name:"fontColor",type:"dc:Color",isAttr:!0},{name:"fontSize",isAttr:!0,type:"Real"},{name:"fontFamily",isAttr:!0,type:"String"},{name:"fontItalic",isAttr:!0,type:"Boolean"},{name:"fontBold",isAttr:!0,type:"Boolean"},{name:"fontUnderline",isAttr:!0,type:"Boolean"},{name:"fontStrikeThrough",isAttr:!0,type:"Boolean"},{name:"labelHorizontalAlignment",type:"dc:AlignmentKind",isAttr:!0},{name:"labelVerticalAlignment",type:"dc:AlignmentKind",isAttr:!0}]},{name:"DMNDiagram",superClass:["di:Diagram"],properties:[{name:"dmnElementRef",type:"dmn:DMNElement",isAttr:!0,isReference:!0},{name:"size",type:"Size"},{name:"localStyle",type:"DMNStyle",isVirtual:!0},{name:"sharedStyle",type:"DMNStyle",isVirtual:!0,isReference:!0,redefines:"di:DiagramElement#sharedStyle"},{name:"diagramElements",type:"DMNDiagramElement",isMany:!0}]},{name:"DMNDiagramElement",isAbstract:!0,superClass:["di:DiagramElement"],properties:[{name:"dmnElementRef",type:"dmn:DMNElement",isAttr:!0,isReference:!0},{name:"sharedStyle",type:"DMNStyle",isVirtual:!0,isReference:!0,redefines:"di:DiagramElement#sharedStyle"},{name:"localStyle",type:"DMNStyle",isVirtual:!0},{name:"label",type:"DMNLabel"}]},{name:"DMNLabel",superClass:["di:Shape"],properties:[{name:"text",type:"Text"}]},{name:"DMNShape",superClass:["di:Shape","DMNDiagramElement"],properties:[{name:"isListedInputData",isAttr:!0,type:"Boolean"},{name:"decisionServiceDividerLine",type:"DMNDecisionServiceDividerLine"},{name:"isCollapsed",isAttr:!0,type:"Boolean"}]},{name:"DMNEdge",superClass:["di:Edge","DMNDiagramElement"],properties:[{name:"sourceElement",type:"DMNDiagramElement",isAttr:!0,isReference:!0},{name:"targetElement",type:"DMNDiagramElement",isAttr:!0,isReference:!0}]},{name:"DMNDecisionServiceDividerLine",superClass:["di:Edge"]},{name:"Text",properties:[{name:"text",isBody:!0,type:"String"}]},{name:"Size",superClass:["dc:Dimension"]}],associations:[],enumerations:[]},biodi:{name:"bpmn.io DI for DMN",uri:"http://bpmn.io/schema/dmn/biodi/2.0",prefix:"biodi",xml:{tagAlias:"lowerCase"},types:[{name:"DecisionTable",isAbstract:!0,extends:["dmn:DecisionTable"],properties:[{name:"annotationsWidth",isAttr:!0,type:"Integer"}]},{name:"OutputClause",isAbstract:!0,extends:["dmn:OutputClause"],properties:[{name:"width",isAttr:!0,type:"Integer"}]},{name:"InputClause",isAbstract:!0,extends:["dmn:InputClause"],properties:[{name:"width",isAttr:!0,type:"Integer"}]}]}};function ie(e,t){return new te((0,s.assign)({},ne,e),t)}var se=n(81340),oe=n(93083),re=n.n(oe),ae=n(35326);const le={width:"100%",height:"100%",position:"relative"};class ce{constructor(e={}){this._eventBus=new i.A,this._viewsChanged=(0,s.debounce)(this._viewsChanged,0),this._views=[],this._viewers={},this.open=(0,ae.O)(this.open.bind(this)),this.importXML=(0,ae.O)(this.importXML.bind(this)),this.saveXML=(0,ae.O)(this.saveXML.bind(this)),this._init(e)}importXML(e,t){var n=this;return t=t||{open:!0},new Promise(function(s,o){var r=n._activeView;n._clear().then(()=>{var a;e=n._emit("import.parse.start",{xml:e})||e,n._moddle.fromXML(e,"dmn:Definitions").then(e=>{var l=e.rootElement,c=e.references,u=e.elementsById;if(a=e.warnings,l=n._emit("import.parse.complete",i({error:null,definitions:l,elementsById:u,references:c,warnings:a}))||l,n._setDefinitions(l),!t.open)return n._emit("import.done",{error:null,warnings:a}),void s({warnings:a});var d=n._getInitialView(n._views,r);if(!d){var p=new Error("no displayable contents");return n._emit("import.done",{error:p,warnings:a}),p.warnings=a,o(p)}n.open(d).then(e=>({warnings:e.warnings})).catch(e=>({error:e,warnings:e.warnings})).then(e=>{var t=[].concat(a,e.warnings);n._emit("import.done",{error:e.error,warnings:t}),e.error?(e.error.warnings=t,o(e.error)):s({warnings:t})})}).catch(t=>{return a=t.warnings,t=function(e,t){if("failed to parse document as <dmn:Definitions>"!==e.message)return null;var n=-1!==t.indexOf('"http://www.omg.org/spec/DMN/20151101/dmn.xsd"')?"1.1":-1!==t.indexOf('"http://www.omg.org/spec/DMN/20180521/MODEL/"')&&"1.2";return n?(e=new Error("unsupported DMN "+n+" file detected; only DMN 1.3 files can be opened"),console.error("Cannot open what looks like a DMN "+n+" diagram. Please refer to https://bpmn.io/l/dmn-compatibility.html to learn how to make the toolkit compatible with older DMN files",e),e):null}(t,e)||((r=/unparsable content <([^>]+)> detected([\s\S]*)$/.exec((s=t).message))?(s.message="unparsable content <"+r[1]+"> detected; this may indicate an invalid DMN 1.3 diagram file"+r[2],s):null)||t,n._emit("import.parse.complete",i({error:t,warnings:a})),n._emit("import.done",{error:t,warnings:a}),t.warnings=a,o(t);var s,r})}).catch(e=>(n._emit("import.done",{error:e,warnings:[]}),e.warnings=[],o(e)))});function i(e){var t=n._eventBus.createEvent(e);return Object.defineProperty(t,"context",{enumerable:!0,get:function(){return console.warn(new Error("import.parse.complete <context> is deprecated and will be removed in future library versions")),{warnings:e.warnings,references:e.references,elementsById:e.elementsById}}}),t}}getDefinitions(){return this._definitions}getActiveView(){return this._activeView}getActiveViewer(){var e=this.getActiveView();return e&&this._getViewer(e)}getView(e){return this._views.filter(function(t){return t.element===e})[0]}getViews(){return this._views}saveXML(e){var t=this;e=e||{};var n=this._definitions;return new Promise(function(i,s){n?(n=t._emit("saveXML.start",{definitions:n})||n,t._moddle.toXML(n,e).then(function(e){var n=e.xml;return{xml:n=t._emit("saveXML.serialized",{xml:n})||n}}).catch(e=>({error:e})).then(e=>{t._emit("saveXML.done",e),e.error?s(e.error):i({xml:e.xml})})):s(new Error("no definitions loaded"))})}on(...e){this._eventBus.on(...e)}off(...e){this._eventBus.off(...e)}once(...e){this._eventBus.once(...e)}attachTo(e){e.get&&e.constructor.prototype.jquery&&(e=e.get(0)),"string"==typeof e&&(e=(0,se.P)(e)),e.appendChild(this._container),this._emit("attach",{})}detach(){this._emit("detach",{}),(0,se.TF)(this._container)}destroy(){Object.keys(this._viewers).forEach(e=>{he(this._viewers[e],"destroy")}),(0,se.TF)(this._container)}_init(e){this._options=e,this._moddle=this._createModdle(e),this._viewers={},this._views=[];const t=re()('<div class="dmn-js-parent"></div>'),n=(0,s.assign)({},le,e);(0,s.assign)(t.style,{width:ue(n.width),height:ue(n.height),position:n.position}),this._container=t,e.container&&this.attachTo(e.container)}_clear(){return this._switchView(null)}open(e){return this._switchView(e)}_setDefinitions(e){this._definitions=e,this._updateViews()}_viewsChanged=()=>{this._emit("views.changed",{views:this._views,activeView:this._activeView})};_updateViews(){var e=this._definitions;if(!e)return this._views=[],void this._switchView(null);var t=this._getViewProviders(),n=[e,...e.drgElement||[]],i=this._views,o=[];for(var r of n){var a=(0,s.find)(t,function(e){return"string"==typeof e.opens?e.opens===r.$type:e.opens(r)});if(a){var l={element:r,id:r.id,name:r.name,type:a.id};o.push(l)}}var c,u=this._activeView;if(!u||(c=(0,s.find)(o,function(e){return de(u,e)})||this._getInitialView(o),c)){var d=!de(u,c)||pe(u,c),p=i.length!==o.length||!(0,s.every)(o,function(e){return(0,s.find)(i,function(t){return de(t,e)&&!pe(t,e)})});this._activeView=c,this._views=o,(d||p)&&this._viewsChanged()}else this._switchView(null)}_getInitialView(e,t){var n;return t&&(n=(0,s.find)(e,function(e){return de(e,t)})||(0,s.find)(e,function(e){return e.type===t})),n||e[0]}_switchView(e){var t=this;return new Promise(function(n,i){var s,o=(e,s)=>{t._viewsChanged(),e?i(e):n(s)},r=t.getActiveView(),a=e&&t._getViewer(e),l=e&&e.element;if(r&&(s=t._getViewer(r))!==a&&(he(s,"clear"),s.detach()),t._activeView=e,a)return s!==a&&a.attachTo(t._container),t._emit("import.render.start",{view:e,element:l}),void a.open(l).then(n=>{t._emit("import.render.complete",{view:e,error:null,warnings:n.warnings}),o(null,n)}).catch(n=>{t._emit("import.render.complete",{view:e,error:n,warnings:n.warnings}),o(n,null)});o()})}_getViewer(e){var t=e.type,n=this._viewers[t];return n||(n=this._viewers[t]=this._createViewer(e.type),this._emit("viewer.created",{type:t,viewer:n})),n}_createViewer(e){var t=(0,s.find)(this._getViewProviders(),function(t){return t.id===e});if(!t)throw new Error("no provider for view type <"+e+">");var n=t.constructor,i=this._options[e]||{};return new n({...this._options.common||{},...i,additionalModules:[...i.additionalModules||[],{_parent:["value",this],moddle:["value",this._moddle]}]})}_emit(...e){return this._eventBus.fire(...e)}_createModdle(e){return new ie(e.moddleExtensions)}_getViewProviders(){return[]}}function ue(e){return e+((0,s.isNumber)(e)?"px":"")}function de(e,t){return(0,s.isDefined)(e)?!!(0,s.isDefined)(t)&&(e.element===t.element||e.id===t.id):!(0,s.isDefined)(t)}function pe(e,t){return!e||!t||e.name!==t.name}function he(e,t){(0,s.isFunction)(e[t])&&e[t]()}},35326(e,t,n){"use strict";n.d(t,{O:()=>s});var i=n(57094);function s(e){return function(){if(!window.Promise)throw new Error("Promises is not supported in this environment. Please polyfill Promise.");var t=arguments.length;if(!(t>=1&&(0,i.isFunction)(arguments[t-1])))return e.apply(this,arguments);var n=arguments[t-1];console.warn(new Error("Passing callbacks to "+e.name.replace("bound ","")+" is deprecated and will be removed in a future major release. Please switch to promises: https://bpmn.io/l/moving-to-promises.html"));var s=Array.prototype.slice.call(arguments,0,-1);e.apply(this,s).then(function(e){var t=Object.keys(e)[0];return n(null,e[t])},function(e){return n(e,e.warnings)})}}},84464(e,t,n){"use strict";function i(e){return e.dmnDI&&e.dmnDI.diagrams&&e.dmnDI.diagrams[0]}n.d(t,{$:()=>i})},23906(e,t,n){"use strict";n.d(t,{Cf:()=>a,Fm:()=>d,Mz:()=>r,TO:()=>u,Xy:()=>o,f7:()=>c,is:()=>s,mG:()=>l});var i=n(57094);function s(e,t){var n=a(e);return n&&"function"==typeof n.$instanceOf&&n.$instanceOf(t)}function o(e){return s(e,"dmn:InputClause")}function r(e){return s(e,"dmn:OutputClause")}function a(e){return e&&e.businessObject||e}function l(e){return a(e).name}function c(e,t){return(0,i.some)(t,function(t){return s(e,t)})}function u(e){var t=a(e);if(s(t,"dmn:Decision"))return t.get("decisionLogic");if(s(t,"dmn:BusinessKnowledgeModel")){var n=t.get("encapsulatedLogic");return n&&n.get("body")}}function d(e){for(let t=e;t;t=t.$parent){const e=t.get("expressionLanguage");if(e)return!("https://www.omg.org/spec/DMN/20191111/FEEL/"!==e&&!/feel/i.test(e));if(s(t,"dmn:FunctionDefinition"))return"FEEL"===(t.get("kind")||"FEEL")}return!0}},94306(e,t,n){"use strict";n.d(t,{g:()=>l,v:()=>c});var i=n(75668),s=n(81340),o=n(93083),r=n.n(o),a='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.02 5.57" width="53" height="21" style="vertical-align:middle"><path fill="#000000" d="M1.88.92v.14c0 .41-.13.68-.4.8.33.14.46.44.46.86v.33c0 .61-.33.95-.95.95H0V0h.95c.65 0 .93.3.93.92zM.63.57v1.06h.24c.24 0 .38-.1.38-.43V.98c0-.28-.1-.4-.32-.4zm0 1.63v1.22h.36c.2 0 .32-.1.32-.39v-.35c0-.37-.12-.48-.4-.48H.63zM4.18.99v.52c0 .64-.31.98-.94.98h-.3V4h-.62V0h.92c.63 0 .94.35.94.99zM2.94.57v1.35h.3c.2 0 .3-.09.3-.37v-.6c0-.29-.1-.38-.3-.38h-.3zm2.89 2.27L6.25 0h.88v4h-.6V1.12L6.1 3.99h-.6l-.46-2.82v2.82h-.55V0h.87zM8.14 1.1V4h-.56V0h.79L9 2.4V0h.56v4h-.64zm2.49 2.29v.6h-.6v-.6zM12.12 1c0-.63.33-1 .95-1 .61 0 .95.37.95 1v2.04c0 .64-.34 1-.95 1-.62 0-.95-.37-.95-1zm.62 2.08c0 .28.13.39.33.39s.32-.1.32-.4V.98c0-.29-.12-.4-.32-.4s-.33.11-.33.4z"/><path fill="#000000" d="M0 4.53h14.02v1.04H0zM11.08 0h.63v.62h-.63zm.63 4V1h-.63v2.98z"/></svg>';function l(e){var t='<a href="http://bpmn.io" target="_blank" class="bjs-powered-by" title="Powered by bpmn.io" style="position: absolute; bottom: 15px; right: 15px; z-index: 100;">'+a+"</a>",n=r()(t);e.appendChild(n),s.f0.bind(n,"click",function(e){d||(d=r()(p),s.Mm.bind(d,".backdrop","click",function(e){document.body.removeChild(d)})),document.body.appendChild(d),e.preventDefault()})}class c extends i.uA{constructor(e,t){super(e,t),this.node=null}componentDidMount(){l(this.node)}render(){return(0,i.bF)(1,"div",null,null,1,null,null,e=>this.node=e)}}function u(e){return e.join(";")}var d,p='<div class="bjs-powered-by-lightbox" style="'+u(["z-index: 1001","position: fixed","top: 0","left: 0","right: 0","bottom: 0"])+'"><div class="backdrop" style="'+u(["width: 100%","height: 100%","background: rgba(40,40,40,0.2)"])+'"></div><div class="notice" style="'+u(["position: absolute","left: 50%","top: 40%","transform: translate(-50%)","width: 260px","padding: 10px","background: white","box-shadow: 0 1px 4px rgba(0,0,0,0.3)","font-family: Helvetica, Arial, sans-serif","font-size: 14px","display: flex","line-height: 1.3"])+'"><a href="https://bpmn.io" target="_blank" rel="noopener" style="margin: 15px 20px 15px 10px; align-self: center;">'+a+'</a><span>Web-based tooling for BPMN, DMN and CMMN diagrams powered by <a href="https://bpmn.io" target="_blank" rel="noopener">bpmn.io</a>.</span></div></div>'},22696(e){"use strict";var t=/["'&<>]/;e.exports=function(e){var n,i=""+e,s=t.exec(i);if(!s)return i;var o="",r=0,a=0;for(r=s.index;r<i.length;r++){switch(i.charCodeAt(r)){case 34:n="&quot;";break;case 38:n="&amp;";break;case 39:n="&#39;";break;case 60:n="&lt;";break;case 62:n="&gt;";break;default:continue}a!==r&&(o+=i.substring(a,r)),a=r+1,o+=n}return a!==r?o+i.substring(a,r):o}},75668(e,t,n){"use strict";n.d(t,{uA:()=>Me,sO:()=>y,d5:()=>Ee,eW:()=>v,bF:()=>f,_B:()=>b,XX:()=>we});var i="$NO_OP",s=Array.isArray;function o(e){var t=typeof e;return"string"===t||"number"===t}function r(e){return p(e)||d(e)}function a(e){return d(e)||!1===e||function(e){return!0===e}(e)||p(e)}function l(e){return"function"==typeof e}function c(e){return"string"==typeof e}function u(e){return"number"==typeof e}function d(e){return null===e}function p(e){return void 0===e}function h(e,t){var n={};if(e)for(var i in e)n[i]=e[i];if(t)for(var s in t)n[s]=t[s];return n}var m="$";function g(e,t,n,i,s,o,r,a){return{childFlags:e,children:t,className:n,dom:null,flags:i,key:void 0===s?null:s,parentVNode:null,props:void 0===o?null:o,ref:void 0===r?null:r,type:a}}function f(e,t,n,i,s,o,r,a){var l=void 0===s?1:s,c=g(l,i,n,e,r,o,a,t),u=E.createVNode;return"function"==typeof u&&u(c),0===l&&w(c,c.children),c}function y(e,t,n,i,s){(2&e)>0&&(e=t.prototype&&l(t.prototype.render)?4:8);var o=t.defaultProps;if(!r(o))for(var a in n||(n={}),o)p(n[a])&&(n[a]=o[a]);if((8&e)>0){var c=t.defaultHooks;if(!r(c))if(s)for(var u in c)p(s[u])&&(s[u]=c[u]);else s=c}var d=g(1,null,null,e,i,n,s,t),h=E.createVNode;return l(h)&&h(d),d}function v(e,t){return g(1,r(e)?"":e,null,16,t,null,null,null)}function b(e){var t=e.props;if(t){var n=e.flags;481&n&&(void 0!==t.children&&r(e.children)&&w(e,t.children),void 0!==t.className&&(e.className=t.className||null,t.className=void 0)),void 0!==t.key&&(e.key=t.key,t.key=void 0),void 0!==t.ref&&(e.ref=8&n?h(e.ref,t.ref):t.ref,t.ref=void 0)}return e}function _(e){var t,n=e.flags;if(14&n){var i,s=e.props;if(!d(s))for(var o in i={},s)i[o]=s[o];t=y(n,e.type,i,e.key,e.ref)}else 481&n?t=f(n,e.type,e.className,e.children,e.childFlags,e.props,e.key,e.ref):16&n?t=v(e.children,e.key):1024&n&&(t=e);return t}function x(){return v("",null)}function C(e,t,n,i){for(var r=e.length;n<r;n++){var l=e[n];if(!a(l)){var u=i+m+n;if(s(l))C(l,t,0,u);else{if(o(l))l=v(l,u);else{var p=l.key,h=c(p)&&p[0]===m;d(l.dom)&&!h||(l=_(l)),d(p)||h?l.key=u:l.key=i+p}t.push(l)}}}}function w(e,t){var n,i=1;if(a(t))n=t;else if(c(t))i=2,n=v(t);else if(u(t))i=2,n=v(t+"");else if(s(t)){var r=t.length;if(0===r)n=null,i=1;else{(Object.isFrozen(t)||!0===t.$)&&(t=t.slice()),i=8;for(var l=0;l<r;l++){var p=t[l];if(a(p)||s(p)){n=n||t.slice(0,l),C(t,n,l,"");break}if(o(p))(n=n||t.slice(0,l)).push(v(p,m+l));else{var h=p.key,g=d(p.dom),f=d(h),y=!f&&c(h)&&h[0]===m;!g||f||y?(n=n||t.slice(0,l),g&&!y||(p=_(p)),(f||y)&&(p.key=m+l),n.push(p)):n&&n.push(p)}}(n=n||t).$=!0}}else n=t,d(t.dom)||(n=_(t)),i=2;return e.children=n,e.childFlags=i,e}var E={afterRender:null,beforeRender:null,createVNode:null,renderComplete:null},D="http://www.w3.org/1999/xlink",S="http://www.w3.org/XML/1998/namespace",A={"xlink:actuate":D,"xlink:arcrole":D,"xlink:href":D,"xlink:role":D,"xlink:show":D,"xlink:title":D,"xlink:type":D,"xml:base":S,"xml:lang":S,"xml:space":S},R={},M=[];function I(e,t){e.appendChild(t)}function j(e,t,n){r(n)?I(e,t):e.insertBefore(t,n)}function O(e,t,n){e.replaceChild(t,n)}function k(e){for(var t;void 0!==(t=e.shift());)t()}var P={},F={};function T(e,t,n){var i=P[e],s=n.$EV;t?(i||(F[e]=function(e){var t=function(t){var n=t.type,i="click"===n||"dblclick"===n;if(i&&0!==t.button)return t.stopPropagation(),!1;t.stopPropagation=$;var s={dom:document};Object.defineProperty(t,"currentTarget",{configurable:!0,get:function(){return s.dom}}),function(e,t,n,i){for(var s=function(e){return l(e.composedPath)?e.composedPath()[0]:e.target}(e);!d(s);){if(t&&s.disabled)return;var o=s.$EV;if(o){var r=o[n];if(r&&(i.dom=s,r.event?r.event(r.data,e):r(e),e.cancelBubble))return}s=s.parentNode}}(t,i,e,s)};return document.addEventListener(N(e),t),t}(e),P[e]=0),s||(s=n.$EV={}),s[e]||P[e]++,s[e]=t):s&&s[e]&&(P[e]--,1===i&&(document.removeEventListener(N(e),F[e]),F[e]=null),s[e]=t)}function N(e){return e.substr(2).toLowerCase()}function $(){this.cancelBubble=!0,this.immediatePropagationStopped||this.stopImmediatePropagation()}function L(e,t){var n=document.createElement("i");return n.innerHTML=t,n.innerHTML===e.innerHTML}function B(e,t,n){if(e[t]){var i=e[t];i.event?i.event(i.data,n):i(n)}else{var s=t.toLowerCase();e[s]&&e[s](n)}}function V(e,t){var n=function(n){n.stopPropagation();var i=this.$V;if(i){var s=i.props||R,o=i.dom;if(c(e))B(s,e,n);else for(var r=0;r<e.length;r++)B(s,e[r],n);if(l(t)){var a=this.$V,u=a.props||R;t(u,o,!1,a)}}};return Object.defineProperty(n,"wrapped",{configurable:!1,enumerable:!1,value:!0,writable:!1}),n}function U(e){return"checkbox"===e||"radio"===e}var z=V("onInput",q),K=V(["onClick","onChange"],q);function W(e){e.stopPropagation()}function q(e,t){var n=e.type,i=e.value,s=e.checked,o=e.multiple,a=e.defaultValue,l=!r(i);n&&n!==t.type&&t.setAttribute("type",n),r(o)||o===t.multiple||(t.multiple=o),r(a)||l||(t.defaultValue=a+""),U(n)?(l&&(t.value=i),r(s)||(t.checked=s)):l&&t.value!==i?(t.defaultValue=i,t.value=i):r(s)||(t.checked=s)}function G(e,t){if("optgroup"===e.type){var n=e.children,i=e.childFlags;if(12&i)for(var s=0,o=n.length;s<o;s++)H(n[s],t);else 2===i&&H(n,t)}else H(e,t)}function H(e,t){var n=e.props||R,i=e.dom;i.value=n.value,s(t)&&-1!==t.indexOf(n.value)||n.value===t?i.selected=!0:r(t)&&r(n.selected)||(i.selected=n.selected||!1)}W.wrapped=!0;var X=V("onChange",Y);function Y(e,t,n,i){var s=Boolean(e.multiple);r(e.multiple)||s===t.multiple||(t.multiple=s);var o=i.childFlags;if(!(1&o)){var a=i.children,l=e.value;if(n&&r(l)&&(l=e.defaultValue),12&o)for(var c=0,u=a.length;c<u;c++)G(a[c],l);else 2===o&&G(a,l)}}var J=V("onInput",Q),Z=V("onChange");function Q(e,t,n){var i=e.value,s=t.value;if(r(i)){if(n){var o=e.defaultValue;r(o)||o===s||(t.defaultValue=o,t.value=o)}}else s!==i&&(t.defaultValue=i,t.value=i)}function ee(e,t,n,i,s,o){64&e?q(i,n):256&e?Y(i,n,s,t):128&e&&Q(i,n,s),o&&(n.$V=t)}function te(e){return e.type&&U(e.type)?!r(e.checked):!r(e.value)}function ne(e,t){ie(e),t&&e.dom&&(function(e,t){e.removeChild(t)}(t,e.dom),e.dom=null)}function ie(e){var t=e.flags;if(481&t){var n=e.ref,i=e.props;l(n)&&n(null);var s=e.children,o=e.childFlags;if(12&o?se(s):2===o&&ie(s),!d(i))for(var a in i)switch(a){case"onClick":case"onDblClick":case"onFocusIn":case"onFocusOut":case"onKeyDown":case"onKeyPress":case"onKeyUp":case"onMouseDown":case"onMouseMove":case"onMouseUp":case"onSubmit":case"onTouchEnd":case"onTouchMove":case"onTouchStart":T(a,null,e.dom)}}else{var c=e.children;if(c)if(14&t){var u=e.ref;4&t?(l(c.componentWillUnmount)&&c.componentWillUnmount(),l(u)&&u(null),c.$UN=!0,c.$LI&&ie(c.$LI)):(!r(u)&&l(u.onComponentWillUnmount)&&u.onComponentWillUnmount(e.dom,e.props||R),ie(c))}else 1024&t&&ne(c,e.type)}}function se(e){for(var t=0,n=e.length;t<n;t++)ie(e[t])}function oe(e,t){se(t),e.textContent=""}function re(e,t){switch(e){case"animationIterationCount":case"borderImageOutset":case"borderImageSlice":case"borderImageWidth":case"boxFlex":case"boxFlexGroup":case"boxOrdinalGroup":case"columnCount":case"fillOpacity":case"flex":case"flexGrow":case"flexNegative":case"flexOrder":case"flexPositive":case"flexShrink":case"floodOpacity":case"fontWeight":case"gridColumn":case"gridRow":case"lineClamp":case"lineHeight":case"opacity":case"order":case"orphans":case"stopOpacity":case"strokeDasharray":case"strokeDashoffset":case"strokeMiterlimit":case"strokeOpacity":case"strokeWidth":case"tabSize":case"widows":case"zIndex":case"zoom":return t;default:return t+"px"}}function ae(e,t,n,i,s,o,a){switch(e){case"onClick":case"onDblClick":case"onFocusIn":case"onFocusOut":case"onKeyDown":case"onKeyPress":case"onKeyUp":case"onMouseDown":case"onMouseMove":case"onMouseUp":case"onSubmit":case"onTouchEnd":case"onTouchMove":case"onTouchStart":T(e,n,i);break;case"children":case"childrenType":case"className":case"defaultValue":case"key":case"multiple":case"ref":break;case"autoFocus":i.autofocus=!!n;break;case"allowfullscreen":case"autoplay":case"capture":case"checked":case"controls":case"default":case"disabled":case"hidden":case"indeterminate":case"loop":case"muted":case"novalidate":case"open":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"selected":i[e]=!!n;break;case"defaultChecked":case"value":case"volume":if(o&&"value"===e)return;var p=r(n)?"":n;i[e]!==p&&(i[e]=p);break;case"dangerouslySetInnerHTML":var h=t&&t.__html||"",m=n&&n.__html||"";h!==m&&(r(m)||L(i,m)||(d(a)||(12&a.childFlags?se(a.children):2===a.childFlags&&ie(a.children),a.children=null,a.childFlags=1),i.innerHTML=m));break;default:"o"===e[0]&&"n"===e[1]?function(e,t,n){var i=e.toLowerCase();if(l(t)||r(t)){var s=n[i];s&&s.wrapped||(n[i]=t)}else{var o=t.event;o&&l(o)&&(n[i]=function(e,t){return function(n){e(t.data,n)}}(o,t))}}(e,n,i):r(n)?i.removeAttribute(e):"style"===e?function(e,t,n){var i,s,o=n.style;if(c(t))o.cssText=t;else if(r(e)||c(e))for(i in t)s=t[i],o[i]=u(s)?re(i,s):s;else{for(i in t)(s=t[i])!==e[i]&&(o[i]=u(s)?re(i,s):s);for(i in e)r(t[i])&&(o[i]="")}}(t,n,i):s&&A[e]?i.setAttributeNS(A[e],e,n):i.setAttribute(e,n)}}function le(e,t,n,i,s){var o=!1,r=(448&t)>0;for(var a in r&&(o=te(n))&&function(e,t,n){64&e?function(e,t){U(t.type)?(e.onchange=K,e.onclick=W):e.oninput=z}(t,n):256&e?function(e){e.onchange=X}(t):128&e&&function(e,t){e.oninput=J,t.onChange&&(e.onchange=Z)}(t,n)}(t,i,n),n)ae(a,null,n[a],i,s,o,null);r&&ee(t,e,i,n,!0,o)}function ce(e,t,n,i){var s=new t(n,i);if(e.children=s,s.$V=e,s.$BS=!1,s.context=i,s.props===R&&(s.props=n),s.$UN=!1,l(s.componentWillMount)){if(s.$BR=!0,s.componentWillMount(),s.$PSS){var o=s.state,a=s.$PS;if(d(o))s.state=a;else for(var c in a)o[c]=a[c];s.$PSS=!1,s.$PS=null}s.$BR=!1}l(E.beforeRender)&&E.beforeRender(s);var u,p=ue(s.render(n,s.state,i),e);return l(s.getChildContext)&&(u=s.getChildContext()),r(u)?s.$CX=i:s.$CX=h(i,u),l(E.afterRender)&&E.afterRender(s),s.$LI=p,s}function ue(e,t){return a(e)?e=x():o(e)?e=v(e,null):(e.dom&&(e=_(e)),14&e.flags&&(e.parentVNode=t)),e}function de(e,t,n,i){var s=e.flags;return 481&s?he(e,t,n,i):14&s?function(e,t,n,i,s){var o,r=e.type,a=e.props||R,l=e.ref;if(s){var c=ce(e,r,a,n);e.dom=o=de(c.$LI,null,c.$CX,i),ge(0,l,c),c.$UPD=!1}else{var u=ue(r(a,n),e);e.children=u,e.dom=o=de(u,null,n,i),fe(a,l,o)}return d(t)||I(t,o),o}(e,t,n,i,(4&s)>0):512&s||16&s?pe(e,t):1024&s?(de(e.children,e.type,n,!1),e.dom=pe(x(),t)):void 0}function pe(e,t){var n=e.dom=document.createTextNode(e.children);return d(t)||I(t,n),n}function he(e,t,n,i){var s=e.flags,o=e.children,a=e.props,c=e.className,u=e.ref,p=e.childFlags;i=i||(32&s)>0;var h=function(e,t){return t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e)}(e.type,i);if(e.dom=h,r(c)||""===c||(i?h.setAttribute("class",c):h.className=c),d(t)||I(t,h),!(1&p)){var m=!0===i&&"foreignObject"!==e.type;2===p?de(o,h,n,m):12&p&&me(o,h,n,m)}return d(a)||le(e,s,a,h,i),l(u)&&ye(h,u),h}function me(e,t,n,i){for(var s=0,o=e.length;s<o;s++){var r=e[s];d(r.dom)||(e[s]=r=_(r)),de(r,t,n,i)}}function ge(e,t,n){l(t)&&t(n),l(n.componentDidMount)&&M.push(function(e){return function(){e.$UPD=!0,e.componentDidMount(),e.$UPD=!1}}(n))}function fe(e,t,n){r(t)||(l(t.onComponentWillMount)&&t.onComponentWillMount(e),l(t.onComponentDidMount)&&M.push(function(e,t,n){return function(){return e.onComponentDidMount(t,n)}}(t,n,e)))}function ye(e,t){M.push(function(){return t(e)})}function ve(e,t,n,i){var s=e.flags;14&s?function(e,t,n,i,s){var o=e.type,r=e.ref,a=e.props||R;if(s){var l=ce(e,o,a,n),c=l.$LI;ve(c,t,l.$CX,i),e.dom=c.dom,ge(0,r,l),l.$UPD=!1}else{var u=ue(o(a,n),e);ve(u,t,n,i),e.children=u,e.dom=u.dom,fe(a,r,t)}}(e,t,n,i,(4&s)>0):481&s?function(e,t,n,i){var s=e.children,o=e.props,a=e.className,c=e.flags,u=e.ref;if(i=i||(32&c)>0,1!==t.nodeType||t.tagName.toLowerCase()!==e.type){var p=he(e,null,n,i);e.dom=p,O(t.parentNode,p,t)}else{e.dom=t;var h=t.firstChild,m=e.childFlags;if(1&m)d(t.firstChild)||function(e,t){return Boolean(t&&t.dangerouslySetInnerHTML&&t.dangerouslySetInnerHTML.__html&&L(e,t.dangerouslySetInnerHTML.__html))}(t,o)||(t.textContent="",448&c&&(t.defaultValue=""));else{for(var g=null;h;)g=h.nextSibling,8===h.nodeType&&("!"===h.data?t.replaceChild(document.createTextNode(""),h):t.removeChild(h)),h=g;if(h=t.firstChild,2===m)d(h)?de(s,t,n,i):(g=h.nextSibling,ve(s,h,n,i),h=g);else if(12&m)for(var f=0,y=s.length;f<y;f++){var v=s[f];d(h)?de(v,t,n,i):(g=h.nextSibling,ve(v,h,n,i),h=g)}for(;h;)g=h.nextSibling,t.removeChild(h),h=g}d(o)||le(e,c,o,t,i),r(a)?""!==t.className&&t.removeAttribute("class"):i?t.setAttribute("class",a):t.className=a,l(u)&&ye(t,u)}}(e,t,n,i):16&s?function(e,t){if(3!==t.nodeType){var n=pe(e,null);e.dom=n,O(t.parentNode,n,t)}else{var i=e.children;t.nodeValue!==i&&(t.nodeValue=i),e.dom=t}}(e,t):512&s?e.dom=t:function(e){throw e||(e="a runtime error occured! Use Inferno in development environment to find the error."),new Error("Inferno Error: "+e)}()}function be(e,t,n,i,s){ie(e),O(n,de(t,null,i,s),e.dom)}function _e(e,t,n,s,o){var c=0|t.flags;e.flags!==c||2048&c?be(e,t,n,s,o):481&c?function(e,t,n,i,s,o){var a=t.type;if(e.type!==a)be(e,t,n,i,s);else{var c,u=e.dom,d=e.props,p=t.props,h=!1,m=!1;if(t.dom=u,s=s||(32&o)>0,d!==p){var g=d||R;if((c=p||R)!==R)for(var f in(h=(448&o)>0)&&(m=te(c)),c){var y=g[f],v=c[f];y!==v&&ae(f,y,v,u,s,m,e)}if(g!==R)for(var b in g)c.hasOwnProperty(b)||r(g[b])||ae(b,g[b],null,u,s,m,e)}var _=e.children,x=t.children,C=t.ref,w=e.className,E=t.className;4096&o?function(e,t){e.textContent!==t.children&&(e.textContent=t.children)}(u,x):xe(e.childFlags,t.childFlags,_,x,u,i,s&&"foreignObject"!==a),h&&ee(o,t,u,c,!1,m),w!==E&&(r(E)?u.removeAttribute("class"):s?u.setAttribute("class",E):u.className=E),l(C)&&e.ref!==C&&ye(u,C)}}(e,t,n,s,o,c):14&c?function(e,t,n,s,o,a){var c=t.type,u=e.key,d=t.key;if(e.type!==c||u!==d)be(e,t,n,s,o);else{var p=t.props||R;if(a){var h=e.children;h.$UPD=!0,h.$V=t,Ce(h,h.state,t,p,n,s,o,!1,!1),h.$UPD=!1}else{var m=!0,g=e.props,f=t.ref,y=!r(f),v=e.children;if(t.dom=e.dom,t.children=v,y&&l(f.onComponentShouldUpdate)&&(m=f.onComponentShouldUpdate(g,p)),!1!==m){y&&l(f.onComponentWillUpdate)&&f.onComponentWillUpdate(g,p);var b=c(p,s);b!==i&&(_e(v,b=ue(b,t),n,s,o),t.children=b,t.dom=b.dom,y&&l(f.onComponentDidUpdate)&&f.onComponentDidUpdate(g,p))}else 14&v.flags&&(v.parentVNode=t)}}}(e,t,n,s,o,(4&c)>0):16&c?function(e,t){var n=t.children,i=e.dom;n!==e.children&&(i.nodeValue=n),t.dom=i}(e,t):512&c?t.dom=e.dom:function(e,t,n){var i=e.type,s=t.type,o=t.children;if(xe(e.childFlags,t.childFlags,e.children,o,i,n,!1),t.dom=e.dom,i!==s&&!a(o)){var r=o.dom;i.removeChild(r),s.appendChild(r)}}(e,t,s)}function xe(e,t,n,i,s,o,r){switch(e){case 2:switch(t){case 2:_e(n,i,s,o,r);break;case 1:ne(n,s);break;default:ne(n,s),me(i,s,o,r)}break;case 1:switch(t){case 2:de(i,s,o,r);break;case 1:break;default:me(i,s,o,r)}break;default:if(12&t){var a=n.length,l=i.length;0===a?l>0&&me(i,s,o,r):0===l?oe(s,n):8===t&&8===e?function(e,t,n,i,s,o,r){var a,l,c=o-1,u=r-1,d=0,p=e[d],h=t[d];e:{for(;p.key===h.key;){if(h.dom&&(t[d]=h=_(h)),_e(p,h,n,i,s),e[d]=h,++d>c||d>u)break e;p=e[d],h=t[d]}for(p=e[c],h=t[u];p.key===h.key;){if(h.dom&&(t[u]=h=_(h)),_e(p,h,n,i,s),e[c]=h,u--,d>--c||d>u)break e;p=e[c],h=t[u]}}if(d>c){if(d<=u)for(var m=(l=u+1)<r?t[l].dom:null;d<=u;)(h=t[d]).dom&&(t[d]=h=_(h)),d++,j(n,de(h,null,i,s),m)}else if(d>u)for(;d<=c;)ne(e[d++],n);else{var g=d,f=d,y=c-d+1,v=u-d+1,b=[];for(a=0;a<v;a++)b.push(0);var x=y===o,C=!1,w=0,E=0;if(r<4||(y|v)<32)for(a=g;a<=c;a++)if(p=e[a],E<v){for(d=f;d<=u;d++)if(h=t[d],p.key===h.key){if(b[d-f]=a+1,x)for(x=!1;a>g;)ne(e[g++],n);w>d?C=!0:w=d,h.dom&&(t[d]=h=_(h)),_e(p,h,n,i,s),E++;break}!x&&d>u&&ne(p,n)}else x||ne(p,n);else{var D={};for(a=f;a<=u;a++)D[t[a].key]=a;for(a=g;a<=c;a++)if(p=e[a],E<v)if(void 0!==(d=D[p.key])){if(x)for(x=!1;a>g;)ne(e[g++],n);h=t[d],b[d-f]=a+1,w>d?C=!0:w=d,h.dom&&(t[d]=h=_(h)),_e(p,h,n,i,s),E++}else x||ne(p,n);else x||ne(p,n)}if(x)oe(n,e),me(t,n,i,s);else if(C){var S=function(e){var t,n,i,s,o,r=e.slice(),a=[0],l=e.length;for(t=0;t<l;t++){var c=e[t];if(0!==c){if(e[n=a[a.length-1]]<c){r[t]=n,a.push(t);continue}for(i=0,s=a.length-1;i<s;)e[a[o=(i+s)/2|0]]<c?i=o+1:s=o;c<e[a[i]]&&(i>0&&(r[t]=a[i-1]),a[i]=t)}}for(s=a[(i=a.length)-1];i-- >0;)a[i]=s,s=r[s];return a}(b);for(d=S.length-1,a=v-1;a>=0;a--)0===b[a]?((h=t[w=a+f]).dom&&(t[w]=h=_(h)),l=w+1,j(n,de(h,null,i,s),l<r?t[l].dom:null)):d<0||a!==S[d]?(l=(w=a+f)+1,j(n,(h=t[w]).dom,l<r?t[l].dom:null)):d--}else if(E!==v)for(a=v-1;a>=0;a--)0===b[a]&&((h=t[w=a+f]).dom&&(t[w]=h=_(h)),l=w+1,j(n,de(h,null,i,s),l<r?t[l].dom:null))}}(n,i,s,o,r,a,l):function(e,t,n,i,s,o,r){for(var a,l,c=o>r?r:o,u=0;u<c;u++)a=t[u],l=e[u],a.dom&&(a=t[u]=_(a)),_e(l,a,n,i,s),e[u]=a;if(o<r)for(u=c;u<r;u++)(a=t[u]).dom&&(a=t[u]=_(a)),de(a,n,i,s);else if(o>r)for(u=c;u<o;u++)ne(e[u],n)}(n,i,s,o,r,a,l)}else 1===t?oe(s,n):2===t&&(oe(s,n),de(i,s,o,r))}}function Ce(e,t,n,s,o,a,c,u,d){var p,m=e.state,g=e.props;if(n.children=e,!e.$UN){if(g!==s||s===R){if(!d&&l(e.componentWillReceiveProps)){if(e.$BR=!0,e.componentWillReceiveProps(s,a),e.$UN)return;e.$BR=!1}e.$PSS&&(t=h(t,e.$PS),e.$PSS=!1,e.$PS=null)}var f=Boolean(e.shouldComponentUpdate);if(u||!f||f&&e.shouldComponentUpdate(s,t,a)){l(e.componentWillUpdate)&&(e.$BS=!0,e.componentWillUpdate(s,t,a),e.$BS=!1),e.props=s,e.state=t,e.context=a,l(E.beforeRender)&&E.beforeRender(e),p=e.render(s,t,a),l(E.afterRender)&&E.afterRender(e);var y,v=p!==i;if(l(e.getChildContext)&&(y=e.getChildContext()),y=r(y)?a:h(a,y),e.$CX=y,v){var b=e.$LI,_=ue(p,n);_e(b,_,o,y,c),e.$LI=_,l(e.componentDidUpdate)&&e.componentDidUpdate(g,m)}}else e.props=s,e.state=t,e.context=a;n.dom=e.$LI.dom}}function we(e,t,n){if(e!==i){var s=t.$V;return r(s)?a(e)||(e.dom&&(e=_(e)),d(t.firstChild)?(de(e,t,R,!1),t.$V=e):function(e,t,n){var i=t.firstChild;if(!d(i))for(a(e)||ve(e,i,R,!1),i=t.firstChild;i=i.nextSibling;)t.removeChild(i);M.length>0&&k(M),t.$V=e,l(n)&&n()}(e,t),s=e):r(e)?(ne(s,t),t.$V=null):(e.dom&&(e=_(e)),_e(s,e,t,R,!1),s=t.$V=e),M.length>0&&k(M),l(n)&&n(),l(E.renderComplete)&&E.renderComplete(s),s&&14&s.flags?s.children:void 0}}function Ee(e,t){return f(1024,t,null,e,0,null,a(e)?null:e.key,null)}var De="undefined"==typeof Promise?null:Promise.resolve(),Se="undefined"==typeof requestAnimationFrame?setTimeout:requestAnimationFrame.bind(window);function Ae(e,t,n,i){l(t)&&(t=t(e.state,e.props,e.context));var s,o=e.$PS;if(r(o))e.$PS=t;else for(var a in t)o[a]=t[a];if(e.$PSS||e.$BR)e.$PSS=!0,e.$BR&&l(n)&&M.push(n.bind(e));else if(e.$UPD){var c=e.$QU;d(c)&&(c=e.$QU=[],s=function(e,t){return function(){e.$QU=null,e.$UPD=!0,Re(e,!1,function(){for(var n=0,i=t.length;n<i;n++)t[n].call(e)}),e.$UPD=!1}}(e,c),De?De.then(s):Se(s)),l(n)&&c.push(n)}else e.$PSS=!0,e.$UPD=!0,Re(e,i,n),e.$UPD=!1}function Re(e,t,n){if(!e.$UN){if(t||!e.$BR){e.$PSS=!1;var i=e.$PS,s=h(e.state,i),o=e.props,r=e.context;e.$PS=null;var a=e.$V,c=e.$LI;if(Ce(e,s,a,o,c.dom&&c.dom.parentNode,r,(32&a.flags)>0,t,!0),e.$UN)return;if(!(1024&e.$LI.flags))for(var u=e.$LI.dom;!d(a=a.parentVNode);)(14&a.flags)>0&&(a.dom=u);M.length>0&&k(M)}else e.state=e.$PS,e.$PS=null;l(n)&&n.call(e)}}var Me=function(){function e(e,t){this.state=null,this.props=void 0,this.context=void 0,this.refs=void 0,this.$BR=!1,this.$BS=!0,this.$PSS=!1,this.$PS=null,this.$LI=null,this.$V=null,this.$UN=!1,this.$CX=null,this.$UPD=!0,this.$QU=null,this.props=e||R,this.context=t||R}var t=e.prototype;return t.forceUpdate=function(e){this.$UN||Ae(this,{},e,!0)},t.setState=function(e,t){this.$UN||this.$BS||Ae(this,e,t,!1)},t.render=function(e,t,n){},e}();Me.defaultProps=void 0},88308(e,t,n){"use strict";n.d(t,{V:()=>w});const i=Object.prototype.toString;function s(e,...t){return Object.assign(e,...t)}Object.prototype.hasOwnProperty;var o=n(58886),r=n(53112);function a(e,t){o.ij.call(this,e,t)}a.prototype=Object.create(o.ij.prototype),a.prototype.fromXML=function(e,t,n){var o;o=t,"[object String]"!==i.call(o)&&(n=t,t="dmn:Definitions");var a=new r.m(s({model:this,lax:!0},n)),l=a.handler(t);return a.fromXML(e,l)},a.prototype.toXML=function(e,t){var n=new r.A(t);return new Promise(function(t,i){try{return t({xml:n.toXML(e)})}catch(e){return i(e)}})};var l={dc:{name:"DC",prefix:"dc",uri:"http://www.omg.org/spec/DMN/20180521/DC/",types:[{name:"Dimension",properties:[{name:"width",isAttr:!0,type:"Real"},{name:"height",isAttr:!0,type:"Real"}]},{name:"Bounds",properties:[{name:"height",isAttr:!0,type:"Real"},{name:"width",isAttr:!0,type:"Real"},{name:"x",isAttr:!0,type:"Real"},{name:"y",isAttr:!0,type:"Real"}]},{name:"Point",properties:[{name:"x",isAttr:!0,type:"Real"},{name:"y",isAttr:!0,type:"Real"}]},{name:"Color",properties:[{name:"red",type:"UML_Standard_Profile.mdzip:eee_1045467100323_917313_65"},{name:"green",type:"UML_Standard_Profile.mdzip:eee_1045467100323_917313_65"},{name:"blue",type:"UML_Standard_Profile.mdzip:eee_1045467100323_917313_65"}]}],associations:[],enumerations:[{name:"AlignmentKind",literalValues:[{name:"start"},{name:"center"},{name:"end"}]}]},di:{name:"DI",prefix:"di",uri:"http://www.omg.org/spec/DMN/20180521/DI/",types:[{name:"DiagramElement",isAbstract:!0,properties:[{name:"extension",type:"Extension"},{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"style",isReference:!0,type:"Style",xml:{serialize:"property"}},{name:"sharedStyle",isReference:!0,isVirtual:!0,type:"Style"}]},{name:"Diagram",superClass:["DiagramElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,type:"Real"}]},{name:"Shape",isAbstract:!0,properties:[{name:"bounds",type:"dc:Bounds"}],superClass:["DiagramElement"]},{name:"Edge",isAbstract:!0,properties:[{name:"waypoint",type:"dc:Point",isMany:!0,xml:{serialize:"property"}}],superClass:["DiagramElement"]},{name:"Style",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"}]},{name:"Extension",properties:[{name:"values",isMany:!0,type:"Element"}]}],associations:[],enumerations:[],xml:{tagAlias:"lowerCase"}},dmn:{name:"DMN",prefix:"dmn",uri:"https://www.omg.org/spec/DMN/20191111/MODEL/",types:[{name:"AuthorityRequirement",superClass:["DMNElement"],properties:[{name:"requiredAuthority",type:"DMNElementReference",xml:{serialize:"property"}},{name:"requiredDecision",type:"DMNElementReference",xml:{serialize:"property"}},{name:"requiredInput",type:"DMNElementReference",xml:{serialize:"property"}}]},{name:"ItemDefinition",superClass:["NamedElement"],properties:[{name:"typeRef",type:"String"},{name:"allowedValues",type:"UnaryTests",xml:{serialize:"property"}},{name:"typeLanguage",type:"String",isAttr:!0},{name:"itemComponent",type:"ItemDefinition",isMany:!0,xml:{serialize:"property"}},{name:"functionItem",type:"FunctionItem"},{name:"isCollection",isAttr:!0,type:"Boolean"}]},{name:"Definitions",superClass:["NamedElement"],properties:[{name:"import",type:"Import",isMany:!0},{name:"itemDefinition",type:"ItemDefinition",isMany:!0},{name:"drgElement",type:"DRGElement",isMany:!0},{name:"artifact",type:"Artifact",isMany:!0},{name:"elementCollection",type:"ElementCollection",isMany:!0},{name:"businessContextElement",type:"BusinessContextElement",isMany:!0},{name:"namespace",type:"String",isAttr:!0},{name:"expressionLanguage",type:"String",isAttr:!0},{name:"typeLanguage",type:"String",isAttr:!0},{name:"exporter",isAttr:!0,type:"String"},{name:"exporterVersion",isAttr:!0,type:"String"},{name:"dmnDI",type:"dmndi:DMNDI"}]},{name:"KnowledgeSource",superClass:["DRGElement"],properties:[{name:"authorityRequirement",type:"AuthorityRequirement",isMany:!0},{name:"type",type:"String"},{name:"owner",type:"DMNElementReference",xml:{serialize:"property"}},{name:"locationURI",type:"String",isAttr:!0}]},{name:"DecisionRule",superClass:["DMNElement"],properties:[{name:"inputEntry",type:"UnaryTests",isMany:!0,xml:{serialize:"property"}},{name:"outputEntry",type:"LiteralExpression",isMany:!0,xml:{serialize:"property"}},{name:"annotationEntry",type:"RuleAnnotation",isMany:!0,xml:{serialize:"property"}}]},{name:"Expression",isAbstract:!0,superClass:["DMNElement"],properties:[{name:"typeRef",isAttr:!0,type:"String"}]},{name:"InformationItem",superClass:["NamedElement"],properties:[{name:"typeRef",isAttr:!0,type:"String"}]},{name:"Decision",superClass:["DRGElement"],properties:[{name:"question",type:"String",xml:{serialize:"property"}},{name:"allowedAnswers",type:"String",xml:{serialize:"property"}},{name:"variable",type:"InformationItem",xml:{serialize:"property"}},{name:"informationRequirement",type:"InformationRequirement",isMany:!0},{name:"knowledgeRequirement",type:"KnowledgeRequirement",isMany:!0},{name:"authorityRequirement",type:"AuthorityRequirement",isMany:!0},{name:"supportedObjective",isMany:!0,type:"DMNElementReference",xml:{serialize:"property"}},{name:"impactedPerformanceIndicator",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}},{name:"decisionMaker",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}},{name:"decisionOwner",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}},{name:"usingProcess",isMany:!0,type:"DMNElementReference",xml:{serialize:"property"}},{name:"usingTask",isMany:!0,type:"DMNElementReference",xml:{serialize:"property"}},{name:"decisionLogic",type:"Expression"}]},{name:"Invocation",superClass:["Expression"],properties:[{name:"calledFunction",type:"Expression"},{name:"binding",type:"Binding",isMany:!0}]},{name:"OrganisationalUnit",superClass:["BusinessContextElement"],properties:[{name:"decisionMade",type:"Decision",isReference:!0,isMany:!0},{name:"decisionOwned",type:"Decision",isReference:!0,isMany:!0}]},{name:"Import",superClass:["NamedElement"],properties:[{name:"importType",type:"String",isAttr:!0},{name:"locationURI",type:"String",isAttr:!0},{name:"namespace",type:"String",isAttr:!0}]},{name:"InformationRequirement",superClass:["DMNElement"],properties:[{name:"requiredDecision",type:"DMNElementReference",xml:{serialize:"property"}},{name:"requiredInput",type:"DMNElementReference",xml:{serialize:"property"}}]},{name:"ElementCollection",superClass:["NamedElement"],properties:[{name:"drgElement",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}}]},{name:"DRGElement",isAbstract:!0,superClass:["NamedElement"],properties:[]},{name:"InputData",superClass:["DRGElement"],properties:[{name:"variable",type:"InformationItem",xml:{serialize:"property"}}]},{name:"DMNElement",isAbstract:!0,properties:[{name:"description",type:"String"},{name:"extensionElements",type:"ExtensionElements"},{name:"id",type:"String",isAttr:!0,isId:!0},{name:"extensionAttribute",type:"ExtensionAttribute",isMany:!0},{name:"label",isAttr:!0,type:"String"}]},{name:"InputClause",superClass:["DMNElement"],properties:[{name:"inputExpression",type:"LiteralExpression",xml:{serialize:"property"}},{name:"inputValues",type:"UnaryTests",xml:{serialize:"property"}}]},{name:"DecisionTable",superClass:["Expression"],properties:[{name:"input",type:"InputClause",isMany:!0,xml:{serialize:"property"}},{name:"output",type:"OutputClause",isMany:!0,xml:{serialize:"property"}},{name:"annotation",type:"RuleAnnotationClause",isMany:!0,xml:{serialize:"property"}},{name:"rule",type:"DecisionRule",isMany:!0,xml:{serialize:"property"}},{name:"hitPolicy",type:"HitPolicy",isAttr:!0,default:"UNIQUE"},{name:"aggregation",type:"BuiltinAggregator",isAttr:!0},{name:"preferredOrientation",type:"DecisionTableOrientation",isAttr:!0},{name:"outputLabel",isAttr:!0,type:"String"}]},{name:"LiteralExpression",superClass:["Expression"],properties:[{name:"expressionLanguage",type:"String",isAttr:!0},{name:"text",type:"String"},{name:"importedValues",type:"ImportedValues"}]},{name:"Binding",properties:[{name:"parameter",type:"InformationItem",xml:{serialize:"property"}},{name:"bindingFormula",type:"Expression"}]},{name:"KnowledgeRequirement",superClass:["DMNElement"],properties:[{name:"requiredKnowledge",type:"DMNElementReference",xml:{serialize:"property"}}]},{name:"BusinessKnowledgeModel",superClass:["Invocable"],properties:[{name:"encapsulatedLogic",type:"FunctionDefinition",xml:{serialize:"property"}},{name:"knowledgeRequirement",type:"KnowledgeRequirement",isMany:!0},{name:"authorityRequirement",type:"AuthorityRequirement",isMany:!0}]},{name:"BusinessContextElement",isAbstract:!0,superClass:["NamedElement"],properties:[{name:"URI",type:"String",isAttr:!0}]},{name:"PerformanceIndicator",superClass:["BusinessContextElement"],properties:[{name:"impactingDecision",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}}]},{name:"FunctionDefinition",superClass:["Expression"],properties:[{name:"formalParameter",type:"InformationItem",isMany:!0,xml:{serialize:"property"}},{name:"body",type:"Expression"},{name:"kind",type:"FunctionKind",isAttr:!0}]},{name:"Context",superClass:["Expression"],properties:[{name:"contextEntry",type:"ContextEntry",isMany:!0}]},{name:"ContextEntry",superClass:["DMNElement"],properties:[{name:"variable",type:"InformationItem",xml:{serialize:"property"}},{name:"value",type:"Expression"}]},{name:"List",superClass:["Expression"],properties:[{name:"elements",isMany:!0,type:"Expression"}]},{name:"Relation",superClass:["Expression"],properties:[{name:"column",type:"InformationItem",isMany:!0,xml:{serialize:"property"}},{name:"row",type:"List",isMany:!0,xml:{serialize:"property"}}]},{name:"OutputClause",superClass:["DMNElement"],properties:[{name:"outputValues",type:"UnaryTests",xml:{serialize:"property"}},{name:"defaultOutputEntry",type:"LiteralExpression",xml:{serialize:"property"}},{name:"name",isAttr:!0,type:"String"},{name:"typeRef",isAttr:!0,type:"String"}]},{name:"UnaryTests",superClass:["Expression"],properties:[{name:"text",type:"String"},{name:"expressionLanguage",type:"String",isAttr:!0}]},{name:"NamedElement",isAbstract:!0,superClass:["DMNElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"ImportedValues",superClass:["Import"],properties:[{name:"importedElement",type:"String"},{name:"expressionLanguage",type:"String",isAttr:!0}]},{name:"DecisionService",superClass:["Invocable"],properties:[{name:"outputDecision",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}},{name:"encapsulatedDecision",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}},{name:"inputDecision",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}},{name:"inputData",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}}]},{name:"ExtensionElements",properties:[{name:"values",type:"Element",isMany:!0}]},{name:"ExtensionAttribute",properties:[{name:"value",type:"Element"},{name:"valueRef",type:"Element",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Element",isAbstract:!0,properties:[{name:"extensionAttribute",type:"ExtensionAttribute",isAttr:!0,isReference:!0},{name:"elements",type:"ExtensionElements",isAttr:!0,isReference:!0}]},{name:"Artifact",isAbstract:!0,superClass:["DMNElement"],properties:[]},{name:"Association",superClass:["Artifact"],properties:[{name:"sourceRef",type:"DMNElementReference",xml:{serialize:"property"}},{name:"targetRef",type:"DMNElementReference",xml:{serialize:"property"}},{name:"associationDirection",type:"AssociationDirection",isAttr:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat",isAttr:!0,type:"String",default:"text/plain"}]},{name:"RuleAnnotationClause",properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"RuleAnnotation",properties:[{name:"text",type:"String"}]},{name:"Invocable",isAbstract:!0,superClass:["DRGElement"],properties:[{name:"variable",type:"InformationItem",xml:{serialize:"property"}}]},{name:"Group",superClass:["Artifact"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"FunctionItem",superClass:["DMNElement"],properties:[{name:"parameters",isMany:!0,type:"InformationItem",xml:{serialize:"property"}},{name:"outputTypeRef",isAttr:!0,type:"String"}]},{name:"DMNElementReference",properties:[{isAttr:!0,name:"href",type:"String"}]}],enumerations:[{name:"HitPolicy",literalValues:[{name:"UNIQUE"},{name:"FIRST"},{name:"PRIORITY"},{name:"ANY"},{name:"COLLECT"},{name:"RULE ORDER"},{name:"OUTPUT ORDER"}]},{name:"BuiltinAggregator",literalValues:[{name:"SUM"},{name:"COUNT"},{name:"MIN"},{name:"MAX"}]},{name:"DecisionTableOrientation",literalValues:[{name:"Rule-as-Row"},{name:"Rule-as-Column"},{name:"CrossTable"}]},{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"FunctionKind",literalValues:[{name:"FEEL"},{name:"Java"},{name:"PMML"}]}],associations:[],xml:{tagAlias:"lowerCase"}},dmndi:{name:"DMNDI",prefix:"dmndi",uri:"https://www.omg.org/spec/DMN/20191111/DMNDI/",types:[{name:"DMNDI",properties:[{name:"diagrams",type:"DMNDiagram",isMany:!0},{name:"styles",type:"DMNStyle",isMany:!0}]},{name:"DMNStyle",superClass:["di:Style"],properties:[{name:"fillColor",type:"dc:Color",isAttr:!0},{name:"strokeColor",type:"dc:Color",isAttr:!0},{name:"fontColor",type:"dc:Color",isAttr:!0},{name:"fontSize",isAttr:!0,type:"Real"},{name:"fontFamily",isAttr:!0,type:"String"},{name:"fontItalic",isAttr:!0,type:"Boolean"},{name:"fontBold",isAttr:!0,type:"Boolean"},{name:"fontUnderline",isAttr:!0,type:"Boolean"},{name:"fontStrikeThrough",isAttr:!0,type:"Boolean"},{name:"labelHorizontalAlignment",type:"dc:AlignmentKind",isAttr:!0},{name:"labelVerticalAlignment",type:"dc:AlignmentKind",isAttr:!0}]},{name:"DMNDiagram",superClass:["di:Diagram"],properties:[{name:"dmnElementRef",type:"dmn:DMNElement",isAttr:!0,isReference:!0},{name:"size",type:"Size"},{name:"localStyle",type:"DMNStyle",isVirtual:!0},{name:"sharedStyle",type:"DMNStyle",isVirtual:!0,isReference:!0,redefines:"di:DiagramElement#sharedStyle"},{name:"diagramElements",type:"DMNDiagramElement",isMany:!0}]},{name:"DMNDiagramElement",isAbstract:!0,superClass:["di:DiagramElement"],properties:[{name:"dmnElementRef",type:"dmn:DMNElement",isAttr:!0,isReference:!0},{name:"sharedStyle",type:"DMNStyle",isVirtual:!0,isReference:!0,redefines:"di:DiagramElement#sharedStyle"},{name:"localStyle",type:"DMNStyle",isVirtual:!0},{name:"label",type:"DMNLabel"}]},{name:"DMNLabel",superClass:["di:Shape"],properties:[{name:"text",type:"Text"}]},{name:"DMNShape",superClass:["di:Shape","DMNDiagramElement"],properties:[{name:"isListedInputData",isAttr:!0,type:"Boolean"},{name:"decisionServiceDividerLine",type:"DMNDecisionServiceDividerLine"},{name:"isCollapsed",isAttr:!0,type:"Boolean"}]},{name:"DMNEdge",superClass:["di:Edge","DMNDiagramElement"],properties:[{name:"sourceElement",type:"DMNDiagramElement",isAttr:!0,isReference:!0},{name:"targetElement",type:"DMNDiagramElement",isAttr:!0,isReference:!0}]},{name:"DMNDecisionServiceDividerLine",superClass:["di:Edge"]},{name:"Text",properties:[{name:"text",isBody:!0,type:"String"}]},{name:"Size",superClass:["dc:Dimension"]}],associations:[],enumerations:[]},biodi:{name:"bpmn.io DI for DMN",uri:"http://bpmn.io/schema/dmn/biodi/2.0",prefix:"biodi",xml:{tagAlias:"lowerCase"},types:[{name:"DecisionTable",isAbstract:!0,extends:["dmn:DecisionTable"],properties:[{name:"annotationsWidth",isAttr:!0,type:"Integer"}]},{name:"OutputClause",isAbstract:!0,extends:["dmn:OutputClause"],properties:[{name:"width",isAttr:!0,type:"Integer"}]},{name:"InputClause",isAbstract:!0,extends:["dmn:InputClause"],properties:[{name:"width",isAttr:!0,type:"Integer"}]}]}},c=n(64847);const u=Object.prototype.toString,d=Object.prototype.hasOwnProperty;function p(e){return"[object Array]"===u.call(e)}function h(e){const t=u.call(e);return"[object Function]"===t||"[object AsyncFunction]"===t||"[object GeneratorFunction]"===t||"[object AsyncGeneratorFunction]"===t||"[object Proxy]"===t}function m(e,t){return!(null==e)&&d.call(e,t)}function g(e,t){return!!function(e,t){const n=function(e){return h(e)?e:t=>t===e}(t);let i;return function(e,t){let n,i;if(void 0===e)return;const s=p(e)?y:f;for(let o in e)if(m(e,o)&&(n=e[o],i=t(n,s(o)),!1===i))return n}(e,function(e,t){if(n(e,t))return i=e,!1}),i}(e,t)}function f(e){return e}function y(e){return Number(e)}const v=new c.A([32,36,1]),b=new function(e){return new a(s({},l,e),void 0)}({biodi:{name:"bpmn.io DI for DMN",uri:"http://bpmn.io/schema/dmn/biodi/1.0",prefix:"biodi",xml:{tagAlias:"lowerCase"},types:[{name:"Bounds",superClass:["dc:Bounds","Element"]},{name:"Edge",superClass:["Element"],properties:[{name:"source",type:"String",isAttr:!0},{name:"waypoints",type:"Waypoint",isMany:!0,xml:{serialize:"property"}}]},{name:"Waypoint",superClass:["dc:Point"]}]}}),_='"http://www.omg.org/spec/DMN/20151101/dmn.xsd"',x='"http://www.omg.org/spec/DMN/20180521/MODEL/"',C='"https://www.omg.org/spec/DMN/20191111/MODEL/"';async function w(e){return t=e,"[object String]"!==u.call(t)?e:E(_,e)?async function(e){const t=e.replace(_,C),[n,i]=await async function(e){return b.fromXML(e,"dmn:Definitions").then(e=>[e.rootElement,null],e=>[null,e])}(t);if(i)return e;S(n),R(n),function(e,t){const n=[];if([].concat(e.get("drgElement"),e.get("artifact")).forEach(e=>{const i=e.get("extensionElements");i&&(i.get("values").forEach(i=>{if(M(i,"biodi:Bounds")){const s=t.create("dc:Bounds",{height:i.get("height"),width:i.get("width"),x:i.get("x"),y:i.get("y")}),o=t.create("dmndi:DMNShape",{bounds:s,dmnElementRef:e});s.$parent=o,D(o),n.push(o),o.$parent=n}if(M(i,"biodi:Edge")){const r=(s=e,o=i.get("source"),M(s,"dmn:Association")?s:Object.values(s).reduce((e,t)=>p(t)?e||t.find(e=>{if(M(e,"dmn:DMNElement"))return Object.values(e).find(e=>{if(M(e,"dmn:DMNElementReference")){const{href:t}=e;return t.replace("#","").includes(o)}})}):e,null));if(!r)return;const a=i.get("waypoints").map(e=>t.create("dc:Point",{x:e.get("x"),y:e.get("y")})),l=t.create("dmndi:DMNEdge",{dmnElementRef:r,waypoint:a});r.$parent=l,D(l),a.forEach(e=>e.$parent=l),n.push(l),l.$parent=n}var s,o}),i.set("values",i.get("values").filter(e=>!I(e,["biodi:Bounds","biodi:Edge"]))),i.get("values").length||e.set("extensionElements",void 0))}),n.length){const i=function(e){const t=e.create("dmndi:DMNDiagram",{diagramElements:[]});D(t);const n=e.create("dmndi:DMNDI",{diagrams:[t]});return t.$parent=n,n}(t);e.set("dmnDI",i),i.$parent=e;const s=i.get("diagrams")[0];s.set("diagramElements",n),n.forEach(e=>e.$parent=s)}}(n,b);const{xml:s}=await b.toXML(n,{format:!0});return s}(e):E(x,e)?async function(e){return e.replace(x,C).replace('"http://www.omg.org/spec/DMN/20180521/DMNDI/"','"https://www.omg.org/spec/DMN/20191111/DMNDI/"')}(e):(E(C,e),e);var t}function E(e,t){return t.includes(e)}function D(e){e.id||I(e,["dmn:DMNElement","dmndi:DMNDiagram","dmndi:DMNDiagramElement"])&&(e.id=v.nextPrefixed(e.$type.split(":")[1]+"_",e))}function S(e){D(e),Object.values(e).forEach(e=>{e.$type&&(D(e),S(e)),p(e)&&e.forEach(S)})}function A(e){M(e,"dmn:NamedElement")&&!e.name&&(e.name=e.id)}function R(e){A(e),Object.values(e).forEach(e=>{e.$type&&(A(e),R(e)),p(e)&&e.forEach(R)})}function M(e,t){return h(e.$instanceOf)&&e.$instanceOf(t)}function I(e,t){return g(t,t=>M(e,t))}},15210(e){"use strict";e.exports=JSON.parse('{"name":"Modeler","uri":"http://camunda.org/schema/modeler/1.0","prefix":"modeler","xml":{"tagAlias":"lowerCase"},"associations":[],"types":[{"name":"Definitions","isAbstract":true,"extends":["dmn:Definitions"],"properties":[{"name":"executionPlatform","isAttr":true,"type":"String"},{"name":"executionPlatformVersion","isAttr":true,"type":"String"}]}],"enumerations":[]}')}}]);
//# sourceMappingURL=3875.js.map