{"version":3,"file":"5243.js","mappings":"wNAiBe,MAAMA,UAAuCC,EAAA,EAC1D,WAAAC,CAAYC,EAAUC,GACpBC,MAAMF,GAMNG,KAAKC,YAAY,iCAdC,KAcgD,SAASC,GACzE,MAAM,QACJC,EAAO,cACPC,GACEF,EAEEG,GAAiB,QAAkBF,GAEzC,KACG,IAAAG,IAAGD,EAAgB,2BAChB,IAAAC,IAAGF,EAAe,4BAClBG,EAAkBJ,GAEtB,OAGFL,EAASU,uBAAuBL,EAASE,EAAgB,CACvDI,8BAA0BC,EAC1BC,yBAAqBD,IAGvB,MAAME,EA6CZ,SAAkBT,GAChB,MAAME,GAAiB,QAAkBF,GAEzC,OAAO,OAAyBE,EAAgB,eAAgB,EAClE,CAjDoBQ,CAASV,GAEnBS,GACFd,EAASU,uBAAuBL,EAASS,EAAO,CAC9CE,8BAA0BJ,GAGhC,IAAG,GAKHV,KAAKC,YAAY,iCA/CC,KA+CgD,SAASC,GACzE,MAAM,QACJC,EAAO,cACPC,GACEF,EAEJ,KACG,IAAAI,IAAGH,EAAS,2BACT,IAAAG,IAAGF,EAAe,2BACnBG,EAAkBJ,GAErB,OAGF,MAAMY,EAyBZ,SAAwBZ,GACtB,MAAME,GAAiB,QAAkBF,GAEzC,OAAO,OAAyBE,EAAgB,qBAAsB,EACxE,CA7B0BW,CAAeb,GAE/BY,GACFjB,EAASU,uBAAuBL,EAASC,EAAe,CACtDa,QAAQ,QAAQb,EAAcc,IAAI,UAAWH,IAGnD,IAAG,EACL,EAuBF,SAASR,EAAkBJ,GACzB,MAAME,GAAiB,QAAkBF,GAEzC,OAAO,OAAyBE,EAAgB,wBAAyB,EAC3E,CAxBAX,EAA+ByB,QAAU,CACvC,WACA,YCjEa,MAAMC,UAAwCzB,EAAA,EAC3D,WAAAC,CAAYyB,EAAcxB,GACxBE,MAAMF,GAKNG,KAAKsB,WAAW,iCAhBE,KAgBgD,SAASpB,GACzE,MAAM,QACJC,EAAO,cACPC,EAAa,WACbmB,GACErB,EAEJ,KACG,IAAAI,IAAGH,EAAS,4BACT,IAAAG,IAAGF,EAAe,4BAClBmB,EAAWN,OAEf,OAGF,MAAMO,EAAiBC,EAAkBtB,GACnCuB,EAAiB,EAAkBvB,GAGvCqB,IACIE,GACDH,EAAWN,OAAOU,MAAKC,IAAS,IAAAtB,IAAGsB,EAAO,2BAC1CL,EAAWN,OAAOU,MAAKC,IAAS,IAAAtB,IAAGsB,EAAO,4BAE7CL,EAAWN,QAAS,QAAQM,EAAWN,OAAQO,GAEnD,IAAG,GAKHxB,KAAKsB,WAAW,iCA/CE,KA+C+C,SAASpB,GACxE,MAAM,QACJC,EAAO,cACPC,EAAa,WACbmB,GACErB,EAEJ,KACG,IAAAI,IAAGH,EAAS,4BACT,IAAAG,IAAGF,EAAe,4BAClBmB,EAAWN,OAEf,OAGF,MAAMO,EAAiBC,EAAkBtB,GACnCuB,EAAiB,EAAkBvB,GACnCY,EAmCZ,SAAwBZ,GACtB,MAAME,GAAiB,QAAkBF,GAEzC,OAAO,OAAyBE,EAAgB,qBAAsB,EACxE,CAvC0B,CAAeF,IAGhCqB,IACGE,GAAkBX,IACnBQ,EAAWN,OAAOU,MAAKC,IAAS,IAAAtB,IAAGsB,EAAO,2BAC1CL,EAAWN,OAAOU,MAAKC,IAAS,IAAAtB,IAAGsB,EAAO,0BAA2B,IAAAtB,IAAGsB,EAAO,yBAElFL,EAAWN,QAAS,QAAQM,EAAWN,QAASW,GAAUA,IAAUF,GAAkBE,IAAUb,IAEpG,IAAG,EAEL,EAWF,SAASU,EAAkBtB,GACzB,MAAME,GAAiB,QAAkBF,GAEzC,OAAO,OAAyBE,EAAgB,wBAAyB,EAC3E,CAEA,SAAS,EAAkBF,GACzB,MAAME,GAAiB,QAAkBF,GAEzC,OAAO,OAAyBE,EAAgB,wBAAyB,EAC3E,CAlBAe,EAAgCD,QAAU,CACxC,eACA,YCxFa,MAAMU,UAAgClC,EAAA,EACnD,WAAAC,CAAYC,EAAUC,GACpBC,MAAMF,GAENG,KAAK8B,aAAa,iBAAiB,SAASC,GAE1C,MAAM,QACJ7B,GACE6B,GAEE,SACJC,GACE9B,EAEJ,KAAK,IAAAI,IAAG0B,EAAU,mBA0BjB,SAAiC7B,GACtC,MAEM8B,GAFiB,QAAkB9B,GAEDe,IAAI,qBAAuB,GAEnE,OAAO,QAAKe,GAAkB,SAASC,GACrC,OAAO,IAAA5B,IAAG4B,EAAY,4BACxB,GACF,CAlC6CC,CAAwBH,GAC7D,OAGF,MAAMI,EAgCL,SAAsBjC,GAC3B,MAEMkC,GAFK,QAAkBlC,GAEAe,IAAI,qBAEjC,IAAKmB,EACH,OAAO,KAGT,MAAMpB,EAASoB,EAAkBnB,IAAI,UAErC,OAAKD,GAIE,QAAKA,GAAQW,IAAS,IAAAtB,IAAGsB,EAAO,qBAH9B,IAIX,CAhDwBU,CAAaN,GAE/B,IAAKI,EACH,OAGF,MACMC,GADiB,QAAkBL,GACAd,IAAI,qBACvCD,GAAS,QAAQoB,EAAkBnB,IAAI,UAAWkB,GAExDtC,EAASU,uBAAuBwB,EAAUK,EAAmB,CAAEpB,UACjE,GACF,EAGFY,EAAwBV,QAAU,CAChC,WACA,YCjCF,MAAMoB,EAAkC,CACtC,kBACA,sBAGa,MAAMC,UAA0C7C,EAAA,EAC7D,WAAAC,CAAYC,EAAUC,GACpBC,MAAMF,GAGNG,KAAK8B,aAAa,iBAAiB,SAASC,GAC1C,MAAM5B,EAAU4B,EAAM7B,QAAQ8B,SAExBS,EA+FZ,SAAwCtC,GACtC,OAAO,OAAyBA,EAAS,4BAA4B,EACvE,CAjG0CuC,CAA+BvC,GACnE,IAAKsC,EACH,OAGF,MAAME,EAAYF,EAA4BvB,IAAI,aAC5C0B,EAmCZ,SAAoCzC,EAASwC,GAI3C,OAHAA,EAMF,SAAyCxC,EAASwC,GAChD,OAAI,QAAMxC,EAASoC,GACVI,EAAUE,QAAOC,GAAmC,UAAvBA,EAASC,YAGxCJ,CACT,CAZcK,CAAgC7C,EAASwC,GACrDA,EAaF,SAAuCxC,EAASwC,GAC9C,OAOF,SAAkCxC,GAChC,IACE,IAAAG,IAAGH,EAAS,uBAQhB,SAA6BA,GAC3B,MAAM8B,EAAmBgB,EAAoB9C,GAE7C,OAAO,QAAK8B,GAAkB,SAASC,GACrC,OAAO,IAAA5B,IAAG4B,EAAY,iCACxB,GACF,CAdyCgB,CAAoB/C,KACzD,IAAAG,IAAGH,EAAS,kBAehB,SAAsBA,GACpB,MAAM8B,EAAmBgB,EAAoB9C,GAE7C,OAAO,QAAK8B,GAAkB,SAASC,GACrC,OAAO,IAAA5B,IAAG4B,EAAY,4BACxB,GACF,CArBoCiB,CAAahD,KAC7C,IAAAG,IAAGH,EAAS,gBAEZ,OAAO,CAEX,CAfMiD,CAAyBjD,GACpBwC,EAAUE,QAAOC,GAAmC,QAAvBA,EAASC,YAGxCJ,CACT,CAnBcU,CAA8BlD,EAASwC,GAE5CA,CACT,CAxC2BW,CAA2BnD,EAASwC,GAErDC,EAAaW,SAAWZ,EAAUY,QACpCzD,EAASU,uBAAuBL,EAASsC,EAA6B,CAAEE,UAAWC,GAEvF,IAGA5C,KAAK8B,aAAa,kCAAkC,SAASC,GAC3D,MAAM,QACJ5B,EAAO,cACPC,GACE2B,EAAM7B,QAEV,KAAK,IAAAI,IAAGF,EAAe,4BACrB,OAIF,GADkBA,EAAcc,IAAI,aACtBqC,OACZ,OAGF,MAAMlB,EAAoBjC,EAAcoD,QACxC1D,EAASU,uBAAuBL,EAASkC,EAAmB,CAAEpB,QAAQ,QAAQoB,EAAkBnB,IAAI,UAAWd,IACjH,GACF,EA0DF,SAAS6C,EAAoB9C,GAE3B,OADuB,QAAkBA,GACnBe,IAAI,qBAAuB,EACnD,CA1DAsB,EAAkCrB,QAAU,CAC1C,WACA,YCpDa,MAAMsC,UAAkC9D,EAAA,EACrD,WAAAC,CAAYC,EAAUC,GACpBC,MAAMF,EAAUC,GAEhBE,KAAK8B,aAAa,iBAAiB,SAASC,GAC1C,MAAMC,EAAWD,EAAM7B,QAAQ8B,SAE/B,KAAK,IAAA1B,IAAG0B,EAAU,mBAChB,OAGF,MAAM0B,GAyCuBvD,EAzC4B6B,IA0CtC,QAAkB7B,GAEDe,IAAI,qBAAuB,IAE3CS,MAAKO,IACpB,IAAA5B,IAAG4B,EAAY,kCAN1B,IAAmC/B,EAvCxBuD,GAIcA,EAAuBxC,IAAI,eAK9CpB,EAASU,uBAAuBwB,EAAU0B,EAAwB,CAChEC,gBAAYjD,GAEhB,IAEAV,KAAK8B,aAAa,iBAAiB,SAASC,GAC1C,MAAMC,EAAWD,EAAM7B,QAAQ8B,SACzB4B,GAAK,QAAkB5B,IAExB,IAAA1B,IAAGsD,EAAI,kBAIOA,EAAG1C,IAAI,eAK1BpB,EAAS+D,iBAAiB7B,EAAU,CAClC2B,gBAAYjD,GAEhB,GACF,EAGF+C,EAA0BtC,QAAU,CAAE,WAAY,YC5CnC,MAAM2C,UAAqCnE,EAAA,EACxD,WAAAC,CAAYC,EAAUC,GACpBC,MAAMF,GAGNG,KAAK8B,aAAa,iBAAiB,SAASC,GAG1CgC,EAFgBhC,EAAM7B,QAAQ8B,SAELlC,EAC3B,IAGAE,KAAK8B,aAAa,kCAAkC,SAASC,GAC3D,MAAM5B,EAAU4B,EAAM7B,QAAQC,SAEzB,IAAAG,IAAGH,EAAS,kBAIjB4D,EAAgB5D,EAASL,EAC3B,IAGAE,KAAK8B,aAAa,kCAAkC,SAASC,GAC3D,MAAM,QACJ5B,EAAO,cACPC,GACE2B,EAAM7B,QAEV,KAAK,IAAAI,IAAGF,EAAe,uBACrB,OAIF,GADkBA,EAAcc,IAAI,aACtBqC,OACZ,OAGF,MAAMlB,EAAoBjC,EAAcoD,QACxC1D,EAASU,uBAAuBL,EAASkC,EAAmB,CAAEpB,QAAQ,QAAQoB,EAAkBnB,IAAI,UAAWd,IACjH,GACF,EASF,SAAS2D,EAAgB5D,EAASL,GAChC,MAAMkE,EAyBR,SAAmC7D,GACjC,OAAO,OAAyBA,EAAS,uBAAuB,EAClE,CA3BiC8D,CAA0B9D,GACzD,IAAK6D,EACH,OAGF,MAAMrB,EAAYqB,EAAuB9C,IAAI,aACvC0B,EAOR,SAAoCzC,EAASwC,GAC3C,OAAOA,EAAUE,QAAOC,OAEnB,IAAAxC,IAAGH,EAAS,mBAanB,SAAsCA,GACpC,OAAO,OAAyBA,EAAS,kBAAkBoD,OAAS,CACtE,CAdOW,CAA6B/D,KAMpC,CAjBuB,CAA2BA,EAASwC,GAErDC,EAAaW,SAAWZ,EAAUY,QACpCzD,EAASU,uBAAuBL,EAAS6D,EAAwB,CAAErB,UAAWC,GAElF,CAlBAkB,EAA6B3C,QAAU,CACrC,WACA,YCxCa,MAAMgD,UAAoCxE,EAAA,EACvD,WAAAC,CAAYC,EAAUwB,GACpBtB,MAAMF,GAENG,KAAK8B,aAAa,CAChB,2BACA,mCACC5B,IACD,MAAMC,EAAUD,EAAQkE,OAASlE,EAAQ8B,UAAY9B,EAAQC,QAE7D,GAAIA,EAAQkE,YACV,OAGF,KAAK,IAAA/D,IAAGH,EAAS,cACf,OAGF,MAAMuD,GAmCuB3B,EAnC4B5B,GAoCtC,QAAkB4B,GAEnBb,IAAI,oBAAoBS,MAAK2C,IAC1C,IAAAhE,IAAGgE,EAAiB,kCAJ/B,IAAmCvC,EAjC7B,IAAK2B,EACH,OAGF,MAAMa,EAAUb,EAAuBxC,IAAI,cAE3C,IAAKqD,EACH,OAGF,MAAMC,EA+BZ,SAAyBD,GACvB,OAAO,OAAyBA,EAAS,sBAAuB,EAClE,CAjC2BE,CAAgBF,GAEhCC,GAiCX,SAAyBrE,GAGvB,OAFmBA,EAAQuE,YAETnD,WAAWoD,OAAMC,QACKlE,IAA/BP,EAAQe,IAAI0D,EAASC,OAEhC,CAnCWC,CAAgBN,KAIrB,OAAwBrE,EAASoE,EAASC,EAAcnD,EAAa,IACpE,EACL,EAGF8C,EAA4BhD,QAAU,CACpC,WACA,gBCtDK,MAAM4D,EAAmB,CAC9B,YACA,WACA,gBA4DF,SAASC,EAAe3E,GACtB,OAAI,IAAAC,IAAGD,EAAgB,uBAC2B,IAAzCA,EAAea,IAAI,mBAGoB,IAAzCb,EAAea,IAAI,iBAC5B,CAEA,SAAS+D,EAAyB5E,GAChC,MAAM6E,EAAS7E,EAAemD,QAE9B,OAAO0B,IAAU,IAAA5E,IAAG4E,EAAQ,oBAAsBA,EAAOhE,IAAI,mBAC/D,CC/De,MAAMiE,UAAuCxF,EAAA,EAC1D,WAAAC,CAAYC,EAAUC,GACpBC,MAAMF,GAENG,KAAKoF,UAAYtF,EAEjBE,KAAK8B,aAAa,CAChB,aACA,gBACA,eACA,2BACA,mCACC5B,IACD,MAAMC,EAAUD,EAAQkE,OAASlE,EAAQ8B,UAAY9B,EAAQC,QAC7DH,KAAKqF,uBAAuBlF,EAAQ,IACnC,EACL,CAKA,sBAAAkF,CAAuBlF,GAErB,KAAK,IAAAG,IAAGH,EAAS,cACf,OAGF,MAAMmF,EDjCH,SAAiCnF,GAGtC,OAFuB,QAAkBA,GAEnBe,IAAI,oBAAoBS,MAAK2C,IAC1C,IAAAhE,IAAGgE,EAAiB,8BAE/B,CC2BiCiB,CAAwBpF,GAErD,IAAKmF,EACH,OAGF,MAAME,EAAmBT,EAAiBU,QAAO,CAACC,EAAKC,KACjDL,EAAqBpE,IAAIyE,KDxB5B,SAAwCA,EAAMxF,GACnD,MAAME,GAAiB,QAAkBF,GAEzC,OAAQwF,GACR,IAAK,WACH,OAAO,QAAMxF,EAAS,CACpB,qBACA,8BACA,oBAGJ,IAAK,YACH,WAAI,IAAAG,IAAGH,EAAS,oBAAwB8E,EAAyB5E,KAAqB2E,EAAe3E,OAIjG,IAAAC,IAAGH,EAAS,uBAA0B6E,EAAe3E,KAM3D,IAAK,eACH,SAAI,QAAMF,EAAS,CACjB,qBACA,qCAKE,IAAAG,IAAGH,EAAS,qBAAsB8E,EAAyB5E,IAMjE,QACE,OAAO,EAEX,CCf6CuF,CAA+BD,EAAMxF,KAC1EuF,EAAIC,QAAQjF,GAEPgF,IACN,CAAC,GAEAG,OAAOC,KAAKN,GAAkBjC,QAChCvD,KAAKoF,UAAU5E,uBAAuBL,EAASmF,EAAsBE,EAEzE,EAGFL,EAA+BhE,QAAU,CACvC,WACA,YCvDF,MAEM4E,EAA6B,CACjC,cACA,4BACA,uBACA,oBACA,sBAGa,MAAMC,EACnB,WAAApG,CAAYC,GACVA,EAASoG,GAAG,8BAA+B/F,IACzC,MAAM,OACJgF,EAAM,SACNN,EAAQ,aACRsB,GACEhG,EAEJ,OAAOF,KAAKmG,gBAAgBvB,EAAUM,EAAQgB,EAAa,GAE/D,CAEA,eAAAC,CAAgBvB,EAAUM,EAAQgB,GAGhC,SAAI,QAAStB,KAwDjB,SAA2BA,EAAUM,GAGnC,MAAMkB,EAAaxB,EAASyB,OAASzB,EAAS0B,OAAOC,kBAAkB3B,EAASyB,OAE1EG,EAAYJ,GAAcA,EAAWK,MAAQL,EAAWK,KAAKD,UAEnE,QAAKA,IAUP,SAAoBA,GAClB,OAAwC,IAAjCA,EAAUE,QApGF,IAqGjB,CAZoBC,CAAWH,MAKtB,QAAKA,GAAW,SAASb,GAC9B,OAAOiB,EAAU1B,EAAQS,EAC3B,GACF,CAvE+BkB,CAAkBjC,EAAUM,OAKlDlF,KAAK8G,iCAAiClC,EAAUM,MAIhDlF,KAAK+G,uBAAuB7B,EAAQgB,SAAzC,CAGF,CAEA,gCAAAY,CAAiClC,EAAUM,GACzC,GAuEJ,SAAqCN,GACnC,OAAOmB,EAA2BiB,MAAMC,IAC/B,IAAA3G,IAAGsE,EAAUqC,IAExB,CA3EQC,CAA4BtC,GAAW,CACzC,MAAMuC,EAAkBP,EAAU1B,EAAQ,gCAAkC0B,EAAU1B,EAAQ,iBAE9F,GAAIiC,EACF,OAAsBA,EA2DGjG,IAAI,oBAEX8F,MAAM1C,IACrB,IAAAhE,IAAGgE,EAAiB,gCA5D3B,CAEA,OAAO,CACT,CAEA,sBAAAyC,CAAuB7B,EAAQgB,GAC7B,OAAKnB,EAAiBqC,SAASlB,KAIxB,IAAA5F,IAAG4E,EAAQ,4BACpB,EAQF,SAAS0B,EAAUzG,EAASwF,GAC1B,OAAKA,GAID,IAAArF,IAAGH,EAASwF,GACPxF,EAGJA,EAAQqD,QAINoD,EAAUzG,EAAQqD,QAASmC,QAJlC,EAPSxF,EAAQqD,OAYnB,CC/EO,SAAS,EAAc6D,EAAa9F,EAAY2D,EAAQoC,GAC7D,IAAInH,EAAUmH,EAAQC,OAAOF,EAAa9F,GAG1C,OAFApB,EAAQqD,QAAU0B,EAEX/E,CACT,CDuDA6F,EAAqB7E,QAAU,CAAE,YErDlB,MAAMqG,UAAwC7H,EAAA,EAC3D,WAAAC,CAAY6H,EAAa5H,EAAUC,GACjCC,MAAMF,GAMNG,KAAK8B,aAAa,eAdA,KAc+B,SAAS5B,GACxD,MAAM,MAAEkE,GAAUlE,EAElB,KAAK,IAAAI,IAAG8D,EAAO,qBACb,OAGF,MAAM/D,GAAiB,QAAkB+D,GAEzC,IAAIsD,ECEH,SAA0BvH,GAC/B,MAAMwH,EAKD,SAA2BxH,GAChC,MAAME,GAAiB,QAAkBF,GAEzC,OAAO,OAAyBE,EAAgB,sBAClD,CATyBuH,CAAkBzH,GAEzC,OAAOwH,EAAgB,EACzB,CDN0BE,CAAiBxH,GAErC,GAAKqH,GA+BO,QAAIA,EAAe,+BAG7B5H,EAASU,uBAAuB4D,EAAOsD,EAAe,CACpDI,4BAA4B,QAnCZ,CAClB,IAAIzF,EAAoBhC,EAAea,IAAI,qBAEtCmB,IACHA,EAAoB,EAClB,yBACA,CACEpB,OAAQ,IAEVZ,EACAoH,GAGF3H,EAAS+D,iBAAiBO,EAAO,CAAE/B,uBAGrCqF,EAAgB,EACd,sBACA,CACEI,4BAA4B,GAE9BzF,EACAoF,GAGF3H,EAASU,uBAAuB4D,EAAO/B,EAAmB,CACxDpB,OAAQ,IACFoB,EAAkBpB,QAAU,GAChCyG,IAGN,CAOF,IAAG,EAEL,EAGFF,EAAgCrG,QAAU,CACxC,cACA,WACA,YEzEa,MAAM4G,UAAoCpI,EAAA,EACvD,WAAAC,CAAY6H,EAAa5H,EAAUC,GACjCC,MAAMF,GAKNG,KAAK8B,aACH,CAAE,eAAgB,iBAbF,KAehB,SAAS5B,GACP,MAAMkE,EAAQlE,EAAQkE,OAASlE,EAAQ8B,SACjCgG,EAAqB9H,EAAQ+H,QAAkD,IAAzC/H,EAAQ+H,MAAMC,uBAE1D,KAAK,IAAA5H,IAAG8D,EAAO,kBAAoB4D,EACjC,OAGF,IAAIG,EA8CZ,SAA0BhI,GACxB,MAAME,GAAiB,QAAkBF,GAGzC,OAFyB,OAAyBE,EAAgB,kBAE1C,IAAM,IAChC,CAnD8B+H,CAAiBhE,GACvC,GAAI+D,EACF,OAGF,MAAM9H,GAAiB,QAAkB+D,GACzC,IAAI/B,EAAoBhC,EAAea,IAAI,qBAEtCmB,IACHA,EAAoB,EAClB,yBACA,CACEpB,OAAQ,IAEVZ,EACAoH,GAGF3H,EAAS+D,iBAAiBO,EAAO,CAAE/B,uBAGrC8F,EAAkB,EAChB,iBACA,CAAC,EACD9F,EACAoF,GAGF3H,EAASU,uBAAuB4D,EAAO/B,EAAmB,CACxDpB,OAAQ,IAAMoB,EAAkBpB,QAAU,GAAKkH,IAEnD,IACA,EAEJ,EAGFJ,EAA4B5G,QAAU,CAAE,cAAe,WAAY,Y,eChEnE,MAAMkH,EAAM,I,SAAI,GAAI,CAAE,GAAI,GAAI,ICOxBC,EAAkB,sBAGjB,SAASC,EAAkBpI,GAChC,MAAME,GAAiB,QAAkBF,GAIzC,OAFwB,OAAyBE,EAAgB,wBAEzC,EAC1B,CAEO,SAASmI,EAAgBrI,EAASsI,EAAU,CAAC,GAClD,IAAI,QACFC,EAAO,YACPC,GACEF,EAIJ,GAFAE,EAAcA,GAAeC,EAAezI,IAEvCuI,EAAS,CACZ,MAAMG,EAAiBN,EAAkBpI,GAEzC,IAAK0I,EACH,OAGFH,EAAUG,EAAe3H,IAAI,UAC/B,CAIA,OAFsB,OAAyByH,EAAa,sBAEvChH,MAAKmH,GACjBC,EAAwBD,EAAa5H,IAAI,SAAWwH,GAE/D,CAEO,SAASK,EAAwBC,GACtC,MAAO,GAAIV,IAAoBU,GACjC,CAMO,SAASC,EAAkBP,GAChC,OAAOA,GAAWA,EAAQQ,WAAWZ,EACvC,CAMO,SAASM,EAAezI,GAG7B,IAAI+E,GAFmB,QAAkB/E,GAIzC,KAAO+E,EAAO1B,WAAY,IAAAlD,IAAG4E,EAAQ,iBACnCA,EAASA,EAAO1B,QAGlB,OAAO0B,CACT,CChDe,MAAMiE,UAAsBxJ,EAAA,EACzC,WAAAC,CAAY6H,EAAa2B,EAAiBvJ,EAAUC,GAKlD,SAASuJ,EAAmBlJ,EAASC,EAAe0I,GAClD,MAAMzG,EAAoBjC,EAAcc,IAAI,qBAEtCD,GAAS,QAAQoB,EAAkBnB,IAAI,UAAW4H,GAExDhJ,EAASU,uBAAuBL,EAASkC,EAAmB,CAC1DpB,WAGGA,EAAOsC,QACVzD,EAASU,uBAAuBL,EAASC,EAAe,CACtDiC,uBAAmB3B,GAGzB,CAlBAX,MAAMF,GAENG,KAAKoF,UAAYtF,EAqBjBE,KAAKC,YAAY,gBAAgB,SAASC,GACxC,MAAM,UACJoJ,EAAS,MACTlF,GACElE,EAEEyI,EAAcC,EAAeU,GAE7BR,EAAeN,EAAgBpE,EAAO,CAAEuE,iBAEzC,IAAArI,IAAG8D,EAAO,kBAAqB0E,GAIpCO,EAAmBjF,EAAOuE,EAAaG,EACzC,IAAG,GAQH9I,KAAKC,YAAY,gBAAgB,SAASC,GACxC,MAAM,MAAEkE,GAAUlE,EAElB,KAAK,IAAAI,IAAG8D,EAAO,iBACb,OAGF,MAAMmF,EAAoBhB,EAAkBnE,GAE5C,IAAKmF,EACH,OAGF,MAAMC,EAAkBhB,EAAgBpE,GAExC,IAAKoF,EACH,OAeF,IAZqBJ,EAAgBvG,QAAO1C,IAC1C,GAAIA,IAAYiE,EACd,OAAO,EAGT,MAAMyE,EAAiBN,EAAkBpI,GAEzC,OAAO0I,GACFA,EAAe3H,IAAI,YACK2H,EAAe3H,IAAI,WDjDvCuI,QAAQnB,EAAiB,MCiD8BkB,EAAgBtI,IAAI,KAAK,IAGzEqC,OAChB,OAGF,MAAMoF,EAAcC,EAAexE,GAEnC,IAAI/B,EAAoBsG,EAAYzH,IAAI,qBAGnCmB,IACHA,EAAoB,EAAc,yBAA0B,CAC1DpB,OAAQ,IACP0H,EAAalB,GAEhB3H,EAASU,uBAAuB4D,EAAOuE,EAAa,CAClDtG,uBAKJ,MAAM2G,EFlHHX,EAAIqB,aCEoB,iBCkHrBZ,EAAe,EAAc,qBAAsB,CACvDa,GAAIX,EACJY,KAAMJ,EAAgBtI,IAAI,SACzBmB,EAAmBoF,GAEtB3H,EAASU,uBAAuB4D,EAAO/B,EAAmB,CACxDpB,OAAQ,IACFoB,EAAkBnB,IAAI,WAAa,GACvC4H,KAKJhJ,EAASU,uBAAuB4D,EAAOmF,EAAmB,CACxDb,QAASK,EAAwBC,IAErC,IAAG,GAeHhJ,KAAKsB,WAAW,kCAAkC,SAASpB,GACzD,MAAM,cACJE,EAAa,WACbmB,GACErB,GAEA,IAAAI,IAAGF,EAAe,0BAChB,WAAYmB,GACdA,EAAWmH,aAAUhI,EACrBa,EAAWsI,uBAAoBnJ,GACtB,YAAaa,GACtBA,EAAWuI,YAASpJ,EACpBa,EAAWsI,uBAAoBnJ,EAC/Ba,EAAWwI,iBAAcrJ,GAChB,sBAAuBa,IAChCA,EAAWuI,YAASpJ,EACpBa,EAAWmH,aAAUhI,EACrBa,EAAWwI,iBAAcrJ,KAGvB,gBAAiBa,IAAgB,WAAYA,GAAgBnB,EAAcc,IAAI,YACjFK,EAAWsI,uBAAoBnJ,EAC/Ba,EAAWuI,OAAS,GACpBvI,EAAWmH,aAAUhI,GAG3B,IAAG,GAMHV,KAAKC,YAAY,kCAAkC,SAASC,GAC1D,MAAM,QACJC,EAAO,cACPC,EAAa,cACb4J,GACE9J,EAEJ,IAAI,IAAAI,IAAGF,EAAe,wBAAyB,CAC7C,MAAMsI,EAAUtI,EAAcc,IAAI,WAElC,IAAKwH,IAAYO,EAAkBP,GAAU,CAC3C,MAAMI,EAAeN,EAAgBrI,EAAS,CAAEuI,QAASsB,EAActB,UAEnEI,GACFO,EAAmBlJ,EAASyI,EAAezI,GAAU2I,EAEzD,CACF,MAAO,GA0Fb,SAAmC5I,EAASyF,GAC1C,MAAM,cACJvF,EAAa,cACb4J,EAAa,WACbzI,GACErB,EAEJ,OAAO,IAAAI,IAAGF,EAAe,2BACpB,WAAY4J,GACZ,WAAYzI,GACZyI,EAAc/I,OAAOU,MAAKC,IAAS,IAAAtB,IAAGsB,EAAO+D,OAC5CpE,EAAWN,OAAOU,MAAKC,IAAS,IAAAtB,IAAGsB,EAAO+D,IAClD,CAtGiBsE,CAA0B/J,EAAS,wBAAyB,CACrE,MAEM4I,EAAeN,EAAgBrI,EAAS,CAAEuI,QAFzBsB,EAAc/I,OAAOU,MAAKC,IAAS,IAAAtB,IAAGsB,EAAO,0BAEIV,IAAI,aAExE4H,GACFO,EAAmBlJ,EAASyI,EAAezI,GAAU2I,GAGlD1I,EAAcc,IAAI,UAAUqC,QAC/BzD,EAAS+D,iBAAiB1D,EAAS,CACjCkC,uBAAmB3B,GAGzB,CACF,IAAG,GAEHV,KAAKkK,+BACP,CAEA,6BAAAA,GAOElK,KAAKC,YAAY,kCAAkC,EAAGE,cAEpD,KAAK,IAAAG,IAAGH,EAAS,mBAAqBgK,EAAiBhK,GACrD,OAGF,MAAM0I,EAAiBN,EAAkBpI,GAEzC,IAAK0I,EACH,OAGF,MAAMH,EAAUG,EAAe3H,IAAI,YAE/B,QAAYwH,KAIZO,EAAkBP,GACpB1I,KAAKoF,UAAU5E,uBAAuBL,EAAS0I,EAAgB,CAAEH,aAAShI,IAE1EV,KAAKoF,UAAU5E,uBAAuBL,EAAS0I,EAAgB,CAC7DgB,kBAAmBnB,IAEvB,IACC,GAKH1I,KAAKC,YAAY,kCAAkC,EAAGE,cAEpD,KAAK,IAAAG,IAAGH,EAAS,kBAAoBgK,EAAiBhK,GACpD,OAGF,MAAM0I,EAAiBN,EAAkBpI,GAEzC,IAAK0I,EACH,OAGF,MAAMgB,EAAoBhB,EAAe3H,IAAI,sBAEzC,QAAY2I,IAIhB7J,KAAKoF,UAAU5E,uBAAuBL,EAAS0I,EAAgB,CAC7DgB,uBAAmBnJ,EACnBgI,QAASmB,GACT,IACD,EACL,EAwBF,SAASM,EAAiBC,GACxB,OAAO,OAAyBA,EAAU,kBAAkB7G,MAC9D,CAvBA4F,EAAchI,QAAU,CACtB,cACA,kBACA,WACA,YClRa,MAAMkJ,UAA2C1K,EAAA,EAC9D,WAAAC,CAAYyB,EAAcxB,GACxBE,MAAMF,GAENG,KAAK8B,aAAa,iCAXA,KAWkD,SAAS5B,GAC3E,MAAM,QACJC,EAAO,cACPC,GACEF,EAEJ,KAAK,IAAAI,IAAGF,EAAe,8BACrB,OAGF,MAAMkK,EAAuBlK,EAE7B,IACE,IAAAE,IAAGH,EAAS,mBACP,QAAYmK,EAAqBpJ,IAAI,qBACrC,QAAYoJ,EAAqBpJ,IAAI,4BACrC,QAAYoJ,EAAqBpJ,IAAI,yBAC1C,CACA,MAAMb,GAAiB,QAAkBF,IAEzC,OAAwBA,EAASE,EAAgBiK,EAAsBjJ,EACzE,CACF,IAAG,EAEL,EAGFgJ,EAAmClJ,QAAU,CAC3C,eACA,YCjCa,MAAMoJ,UAAmC5K,EAAA,EACtD,WAAAC,CAAYyB,EAAcxB,GACxBE,MAAMF,GAENG,KAAK8B,aAAa,iCAXA,KAWkD,SAAS5B,GAC3E,MAAM,QACJC,EAAO,cACPC,GACEF,EAEJ,KAAK,IAAAI,IAAGF,EAAe,sBACrB,OAGF,MAAMoK,EAAepK,EAErB,IACE,IAAAE,IAAGH,EAAS,mBACP,QAAYqK,EAAatJ,IAAI,oBAC7B,QAAYsJ,EAAatJ,IAAI,uBAClC,CACA,MAAMb,GAAiB,QAAkBF,IAEzC,OAAwBA,EAASE,EAAgBmK,EAAcnJ,EACjE,CACF,IAAG,EAEL,EC9BK,SAAS,EAAalB,GAC3B,MAEMkC,GAFiB,QAAkBlC,GAEAe,IAAI,qBAE7C,GAAKmB,EAIL,OAAOA,EAAkBnB,IAAI,UAAUS,MAAMC,IACpC,IAAAtB,IAAGsB,EAAO,oBAErB,CDqBA2I,EAA2BpJ,QAAU,CACnC,eACA,YEhCa,MAAMsJ,UAAiD9K,EAAA,EACpE,WAAAC,CAAYC,EAAUC,GACpBC,MAAMF,GAGNG,KAAKC,YAAY,iCAbC,KAaiD,SAASC,GAC1E,MAAM,QACJC,EAAO,cACPC,EAAa,WACbmB,EAAa,CAAC,GACZrB,EAEE4H,EACJvG,EAAWuG,4BACXvG,EAAY,oCAEd,KACG,IAAAjB,IAAGH,EAAS,wBACT,IAAAG,IAAGF,EAAe,yBAClB0H,EAEJ,OAGF,MAAM4C,EDWL,SAA6BvK,GAClC,MAAMiC,EAAY,EAAajC,GAE/B,OAAIiC,EACKA,EAAUlB,IAAI,0BAGhB,EACT,CCnB+B,CAAoBf,GAE7C,IAAKuK,IAAqBA,EAAiBnH,OACzC,OAGF,MAAMnB,EAAY,EAAajC,GAE/BL,EAASU,uBAAuBL,EAASiC,EAAW,CAClD,yBAA0B,IAE9B,IAAG,EACL,EAGFqI,EAAyCtJ,QAAU,CACjD,WACA,YC5Ca,MAAMwJ,UAA2BhL,EAAA,EAC9C,WAAAC,CAAYC,EAAUwB,GACpBtB,MAAMF,GAONG,KAAKsB,WAAW,kCAAkC,SAASpB,GACzD,MAAM,cACJE,EAAa,WACbmB,GACErB,GAEC,QAAME,EAAe,CACxB,uBACA,sBACA,2BAME,gBAAiBmB,GACW,eAA3BA,EAAWwI,cACX,QAAU3J,EAAcc,IAAI,iBAC/BK,EAAWqJ,gBAAalK,IAItB,QAAUa,EAAWqJ,aAAoD,eAArCxK,EAAcc,IAAI,iBACxDK,EAAWwI,YAAc,cAE7B,IAAG,GAKH/J,KAAK8B,aAAa,kCAAkC,SAAS5B,GAC3D,MAAM,QACJC,EAAO,cACPC,GACEF,EAEJ,KAAK,IAAAI,IAAGF,EAAe,oBACrB,OAGF,IAAIC,GAAiB,QAAkBF,GAoB7C,IAAiByB,GAlBP,IAAAtB,IAAGH,EAAS,sBACdE,EAAiBA,EAAea,IAAI,gBAkB1BR,OADDkB,EAdCxB,EAAcc,IAAI,WAeK,KAAVU,KAdvB,OAAwBzB,EAASE,EAAgBD,EAAeiB,EAEpE,IAAG,EACL,EAGFsJ,EAAmBxJ,QAAU,CAC3B,WACA,gBC5DF,SACE0J,SAAU,CACR,2CACA,iCACA,kCACA,0BACA,oCACA,4BACA,+BACA,8BACA,iCACA,oBACA,kCACA,8BACA,6BACA,gBACA,qCACA,6BACA,sBAEFC,yCAA0C,CAAE,OAAQL,GACpDM,+BAAgC,CAAE,OAAQrL,GAC1CsL,gCAAiC,CAAE,OAAQ5J,GAC3C6J,wBAAyB,CAAE,OAAQpJ,GACnCqJ,kCAAmC,CAAE,OAAQ1I,GAC7C2I,0BAA2B,CAAE,OAAQ1H,GACrC2H,6BAA8B,CAAE,OAAQtH,GACxCuH,4BAA6B,CAAE,OAAQlH,GACvCmH,+BAAgC,CAAE,OAAQnG,GAC1CoG,kBAAmB,CAAE,OAAQ,GAC7BC,gCAAiC,CAAE,OAAQhE,GAC3CiE,4BAA6B,CAAE,OAAQ1D,GACvC2D,2BAA4B,CAAE,OAAQC,EAAA,GACtCC,cAAe,CAAE,OAAQzC,GACzB0C,mCAAoC,CAAE,OAAQxB,GAC9CyB,2BAA4B,CAAE,OAAQvB,GACtCwB,mBAAoB,CAAE,OAAQpB,I,gDCpDzB,MAAMqB,EAA6B,mCAQnC,SAASC,EAAe9L,GAC7B,MAAMyE,EAAWsH,GAAiB/L,EAAS6L,GAE3C,GAAIpH,EACF,OAAOA,EAAS1D,IAAI,QAExB,CAEO,SAASgL,GAAiB/L,EAAS0E,GACxC,MAAMsH,EAWR,SAA8BhM,GAG5B,IAAIiM,EAAW,GACf,MAAM/J,GAHK,QAAkBlC,GAGAe,IAAI,qBAEjC,QAAiC,IAAtBmB,EAAmC,CAC5C,MAAMgK,EAAkBhK,EAAkBnB,IAAI,eAEf,IAApBmL,IACTD,EAAWC,EAAgBxJ,QAAOyJ,IAAK,IAAAhM,IAAGgM,EArBM,sBAuBpD,CAEA,OAAOF,CACT,CA1BwBG,CAAqBpM,GAE3C,GAA6B,IAAzBgM,EAAc5I,OAMlB,OAFmB4I,EAAc,GAAGjL,IAAI,cAEtBS,MAAK6K,GAAKA,EAAEtL,IAAI,UAAY2D,GAChD,CCtBO,MAAM4H,WAA4BC,EAAA,EACvC,YAAAC,CAAaxM,GACX,MAAMyM,EAAOX,EAAe9L,GAE5B,IAAKyM,EACH,OAGF,MAAMC,EAYV,SAAgCD,GAC9B,IAIE,OAFkBE,GADHC,KAAKC,MAAMJ,GAI5B,CAAE,MAAON,GAGP,MAAO,EACT,CACF,CAvBuBW,CAAuBL,GAC1C,OAAOC,CACT,EA8BF,SAASC,GAAiBF,EAAO,CAAC,GAChC,GAAoB,iBAATA,GAA8B,OAATA,EAIhC,OAAO/G,OAAOC,KAAK8G,GAAMM,KAAIC,IAC3B,IAAIvL,EAAQgL,EAAKO,GAEjB,MAAMC,EAAa,CACjBvI,KAAMsI,EACNE,KAAMN,KAAKO,UAAU1L,EAAO,KAAM,IAGpC,OAAI2L,MAAMC,QAAQ5L,IAChBwL,EAAWK,QAAS,EACpBL,EAAWzH,KAAO,OAEd/D,EAAM2B,OAAS,IACjB6J,EAAWM,QAAUZ,GAAiBlL,EAAM,KAEvCwL,IAGTA,EAAWzH,KAOf,SAAiB/D,GAEf,GAAc,OAAVA,EACF,MAAO,GAGT,MAAM+D,SAAc/D,EAEpB,MAAa,WAAT+D,EACK,WAOSgI,EAJAhI,GAKJiI,OAAO,GAAGC,cAAgBF,EAAOG,MAAM,GADvD,IAAoBH,CAHpB,CApBsBI,CAAQnM,GAC1BwL,EAAWM,QAAUZ,GAAiBlL,GAE/BwL,EAAU,GAErB,CCxEA,UACEvC,SAAU,CACR,mBAEFmD,gBAAiB,CAAE,OAAQvB,K,4BCO7B,MAAMwB,GAAiBpI,OAAOqI,UAAUC,SACXtI,OAAOqI,UAAUE,eCE9C,MA8GA,GA9G0BC,IACxB,MAAM,QACJlO,GACEkO,EAEEC,GAAW,IAAAC,YAAW,iBACtBC,GAAY,IAAAD,YAAW,aACvBlN,GAAe,IAAAkN,YAAW,gBAC1BE,GAAS,IAAAF,YAAW,UACpBG,GAAW,IAAAH,YAAW,YAqF5B,OAAO,KAAAI,eAAc,CACnBxO,UACAyO,MAAOJ,EAAU,kBACjBK,YAAa,KAAI;oHACgGL,EAAU;QACtHA,EAAU;UAEf7E,GAAI,cACJmF,SA3Fe,IACR7C,EAAe9L,GA2FtB4O,SAxFgBnN,IAChB,MAAMoN,EAAW,IAGfA,SAAUC,EAAyB,gBACnCC,GACEC,GAAsBhP,EAASuO,GACnCM,EAASI,QAAQH,GAGjB,MAAMI,EAAenD,GAAiB/L,EAAS6L,GAE3CqD,EACEzN,EAGFoN,EAASI,KAAK,CACZE,IAAK,iCACLpP,QAAS,CACPC,UACAC,cAAeiP,EACf9N,WAAY,CACVK,YAQNoN,EAASI,KAAK,CACZE,IAAK,iCACLpP,QAAS,CACPC,UACAC,cAAe8O,EACf3N,WAAY,CACVA,WAAYgO,GAAeL,EAAgBhO,IAAI,mBASvD8N,EAASI,KAAK,CACZE,IAAK,iCACLpP,QAAS,CACPC,UACAC,cAAe8O,EACf3N,WAAY,CACVA,WAAY,IACP2N,EAAgBhO,IAAI,cACvBsO,GAAc5N,EAAO6M,QAO/BpN,EAAaoO,QAAQ,0CAA2CT,EAAS,EA6BzEV,WACAoB,SA3BkB9N,IAClB,GAAKA,EAIL,IAEE,GDrEY+N,ECoEG5C,KAAKC,MAAMpL,GDnEM,oBAA7BqM,GAAe2B,KAAKD,GCqErB,OAAOnB,EAAU,8CAErB,CACA,MAAOlC,GACL,OAAOA,EAAE/H,OACX,CD3EJ,IAAkBoL,CC2Ed,EAeAE,WAAW,GACX,EAUEV,GAAwB,CAAChP,EAASuO,KACtC,MAAMM,EAAW,GAEXpL,GAAK,QAAkBzD,GAEvBsH,EAAciH,EAASxN,IAAI,eAEjC,IAAImB,EAAoBuB,EAAG1C,IAAI,qBAC1BmB,IACHA,EAAoBoF,EAAYF,OAC9B,yBACA,CAAEtG,OAAQ,KAGZoB,EAAkBmB,QAAUI,EAC5BoL,EAASI,KACP,CACEE,IAAK,iCACLpP,QAAS,CACPC,UACAC,cAAewD,EACfrC,WAAY,CACVc,yBAOV,IAAI6M,EAAkB7M,EAAkBnB,IAAI,UAAUS,MAAKmO,GAAiB,qBAAZA,EAAEzJ,QA0BlE,OAxBK6I,IACHA,EAAkBzH,EAAYF,OAAO,mBAAoB,CACvDhG,WAAY,KAGd2N,EAAgB1L,QAAUnB,EAE1B2M,EAASI,KACP,CACEE,IAAK,iCACLpP,QAAS,CACPC,UACAC,cAAeiC,EACfd,WAAY,CACVN,OAAQ,IACHoB,EAAkBnB,IAAI,UACzBgO,QAQL,CACLA,kBACAF,WACD,EAGH,SAASQ,GAAc5C,EAAM6B,GAC3B,OAAOA,EAAOlH,OAAO,iBAAkB,CACrC1C,KAAMmH,EACNpK,MAAOgL,GAEX,CAEA,SAAS2C,GAAeL,GACtB,OAAOA,EAAgBrM,QAAO2J,GAAKA,EAAEtL,IAAI,UAAY8K,GACvD,CClMe,MAAM+D,GACnB,WAAAnQ,CAAYoQ,EAAiBtB,GAC3B1O,KAAKiQ,UAAYvB,EACjBsB,EAAgBE,iBALM,IAK8BlQ,KACtD,CAEA,SAAAmQ,CAAUhQ,GACR,MAAMqO,EAAYxO,KAAKiQ,UAAU/O,IAAI,aAC/BkP,EAAmBpQ,KAAKiQ,UAAU/O,IAAI,oBAAoB,GAChE,IAAImP,EAAW,KAEXD,IACFC,EAAWD,EAAiBlP,IAAIf,IAGlC,MAAMmQ,IAAeD,EAErB,OAAQE,IACN,GAAID,EACF,OAAOC,EAGT,MAAMC,EAAQ,CACZ7G,GAAI,sBACJiF,MAAOJ,EAAU,gBACjBd,QAAS,CACP,CACE/D,GAAI,cACJ8G,UAAW,GACXC,SAAU,GAAAC,wBAGdF,UAAW,GAAAG,OAIb,OADAL,EAAOnB,KAAKoB,GACLD,CAAM,CAEjB,EAGFR,GAAuB5O,QAAU,CAAE,kBAAmB,YChDtD,MCCA,IACE0P,YAAa,CACX,GDHJ,CACEhG,SAAU,CAAE,0BACZiG,uBAAwB,CAAE,OAAQf,O,gBEGpC,MAAMgB,WAA6B,KACjC,WAAAnR,CAAYC,KAAamR,GACvBjR,SAASiR,GAEThR,KAAKiR,UAAYpR,CACnB,CAEA,kBAAM8M,CAAaxM,GAMjB,MAAM+Q,QAAmBlR,KAAKiR,UAAUE,KAAK,qCAAsC,CAAEhR,YAErF,IAAK+Q,EACH,OAGF,IAAIE,EACJ,IACEA,GAAY,SACVrE,KAAKC,MAAMkE,GACX,CACEG,QAAS,EACTC,SAAU,GAGhB,CACA,MAAOC,GAGL,MACF,CAEA,OAAOH,EAAUlE,KAAIrI,IACZ,CAAEA,OAAMwI,KAAM,yBAAyBlN,EAAQ0E,MAAQ1E,EAAQwJ,QAE1E,CAEA6H,eAAiB,CAAE,cAAezR,MAAMoB,SAG1C,SAAS,GAAqBhB,EAASwF,GAGrC,IAAIyG,EAAW,GACf,MAAM/J,GAHK,QAAkBlC,GAGAe,IAAI,qBAEjC,QAAiC,IAAtBmB,EAAmC,CAC5C,MAAMgK,EAAkBhK,EAAkBnB,IAAI,eAEf,IAApBmL,IACTD,EAAWC,EAAgBxJ,QAAOyJ,IAAK,IAAAhM,IAAGgM,EAAG3G,KAEjD,CAEA,OAAOyG,CACT,CAMA,SAASqF,GAAc5R,GACrBA,EAASoG,GAAG,qCAAsCyL,GACpD,CAMA,SAASA,IAAa,QAAEvR,IACtB,MAAM0I,EAAiB,GAAqB1I,EAAS,wBAAwB,GAE7E,IAAK0I,EACH,OAGF,MAAMH,EAAUG,EAAeH,QAE/B,IAAKA,EACH,OAGF,MAAMoB,EAASpB,EAAQe,QAAQ,sBAAuB,IAChDkI,EAaR,SAAoBxR,GAClB,IAAI+E,EAAS/E,EAAQqD,QAErB,KAAO0B,KAAW,IAAA5E,IAAG4E,EAAQ,iBAC3BA,EAASA,EAAO1B,QAGlB,OAAO0B,CACT,CArBkB0M,CAAWzR,GAIrB0R,EAFY,GAAqBF,EAAS,sBAEzBhQ,MAAKkQ,GAAQA,EAAKlI,KAAOG,IAEhD,OAAK+H,EAIEA,EAAKjI,UAJZ,CAKF,CA7BA6H,GAActQ,QAAU,CAAE,YAyC1B,IAAI2Q,GAAQ,CACVjH,SAAU,CACR,uBACA,sCAEFkH,qBAAsB,CAAE,OAAQhB,IAChC,qCAAsC,CAAE,OAAQU,K,WC9GlD,SAASO,GACLC,EACApS,EACAuQ,EACA5B,EACA0D,GAEFlS,KAAKiR,UAAYpR,EACjBG,KAAKmS,kBAAoB/B,EACzBpQ,KAAKoS,WAAa5D,EAClBxO,KAAKqS,WAAaH,IAEKD,IAA4C,IAAlCA,EAAOK,yBAEvBzS,EAASoG,GAAG,2BAA4BlE,IAEvD,MAAM,QAAE5B,GAAY4B,EAEpB/B,KAAKuS,KAAKpS,GAASqS,MAAKnC,IACtBD,EAAiBqC,cAActS,EAASkQ,EAAS,IAChDqC,OAAMnB,IACK,kBAARA,GACFoB,QAAQC,MAAM,kCAAmCrB,EACnD,GACA,GAEN,CA2CA,SAASsB,GAAoCX,EAAWrS,EAAU2O,EAAW4B,GAE3EpQ,KAAKqS,WAAaH,EAClBlS,KAAKiR,UAAYpR,EACjBG,KAAKoS,WAAa5D,EAClBxO,KAAKmS,kBAAoB/B,EAEzBpQ,KAAK8S,UACP,CAjDAd,GAAuB7Q,QAAU,CAC/B,6BACA,WACA,mBACA,YACA,aAGF6Q,GAAuB9D,UAAUqE,KAAO,SAASpS,GAE/C,MAAM+R,EAAYlS,KAAKqS,WACjB7D,EAAYxO,KAAKoS,WACjBvS,EAAWG,KAAKiR,UAEtB,OAAO,IAAI8B,SAAQ,CAACC,EAASC,KAE3B,MAAMC,EAAe,IAAMD,EAAO,iBAElCpT,EAASsT,KAAK,kBAAmBD,GAEjCrT,EAASsT,KAAK,iCAAiCpR,IAE7C,MAAM,SAAEsO,GAAatO,EAErBlC,EAASuT,IAAI,kBAAmBF,GAEhCF,EAAQ3C,EAAS,IAGnB6B,EAAUK,KAAKpS,EAAS,2BAA4B,CAAEkT,EAAG,EAAGC,EAAG,GAAK,CAClEC,MAAO/E,EAAU,2BACjBgF,QAAQ,EACRC,MAAO,KACP,GAGN,EAeAZ,GAAoC1R,QAAU,CAC5C,YACA,WACA,YACA,oBAMF0R,GAAoC3E,UAAU4E,SAAW,WACvD9S,KAAKqS,WAAWnC,iBAAiB,2BAA4BlQ,KAC/D,EAQA6S,GAAoC3E,UAAUwF,oBAAsB,SAASvT,GAG3E,OAAOH,KAAK2T,mBAAmBxT,GAASsF,QAAO,CAACiI,GAAWP,EAAKvL,MAC9D8L,EAAQP,GAAOvL,EAER8L,IACN,CAAC,EAEN,EASAmF,GAAoC3E,UAAUyF,mBAAqB,SAASxT,GAE1E,MAAMN,EAAWG,KAAKiR,UAChBzC,EAAYxO,KAAKoS,WAEvB,OAAOpS,KAAK4T,sBAAsBzT,GAAS+M,KAAImD,IAE7C,MAAM,KACJwD,EAAO,CAAC,EAAC,SACTC,EAAQ,SACRC,EAAW,IACT1D,EAIJ,MAAO,CAFS,kBAAmBA,EAAS1G,KAE1B,CAChBiF,MAAOyB,EAASxL,MAAQ2J,EAAU6B,EAASxL,MAC3CgK,YAAawB,EAASxB,aAAeL,EAAU6B,EAASxB,aACxDmF,iBAAkB3D,EAAS2D,iBAC3BC,SAAUJ,EAAKK,SACfV,OAAQO,EACRvD,MAAOsD,GAAY,IAAKA,EAAUjP,KAAM2J,EAAUsF,EAASjP,OAC3DsP,OAAQ,KACNtU,EAASsR,KAAK,gCAAiC,CAAEhR,UAASkQ,YAAW,GAEtE,GAEP,EASAwC,GAAoC3E,UAAU0F,sBAAwB,SAASzT,GAC7E,OAAOH,KAAKmS,kBAAkBiC,UAAUjU,GAAS0C,QAAOwN,IAQ1D,SAA2BlQ,EAASkQ,GAClC,MAAMhQ,GAAiB,QAAkBF,GAEzC,QAAIE,GACKA,EAAea,IAAI,qBAAuBmP,EAAS1G,EAI9D,CAfY0K,CAAkBlU,EAASkQ,IAEvC,EAeA,IAAI,GAAQ,CACVxF,SAAU,CACR,yBACA,uCAEFyH,uBAAwB,CAAE,OAAQN,IAClCsC,oCAAqC,CAAE,OAAQzB,K,uBCvIjD,IAEI0B,GAAiB,CACnB,qBAAsB,EACtB,iBAAkB,EAClB,KAAQ,EACR,YAAa,EACb,YAAa,EACb,MAAS,EACT,sBAAuB,EACvB,8BAA+B,EAC/B,gBAAiB,EACjB,kBAAmB,EACnB,OAAU,EACV,UAAa,EACb,QAAW,EACX,oBAAqB,EACrB,oBAAqB,EACrB,KAAQ,EACR,eAAgB,EAChB,YAAa,EACb,OAAU,EACV,cAAe,EACf,gBAAiB,EACjB,KAAQ,EACR,cAAe,EACf,YA1BgB,EA2BhB,mBAAoB,EACpB,eAAgB,EAChB,aAAc,EACd,eAAgB,EAChB,cAAe,EACf,+BAAgC,EAChC,6BAA8B,EAC9B,kBAAmB,EACnB,QAAW,EACX,iBAAkB,EAClB,iBAAkB,EAClB,OAAU,EACV,aAAc,EACd,aAAc,EACd,eAAgB,EAChB,KAAQ,EACR,QAAW,EACX,SAAY,EACZ,iBAAkB,EAClB,kBAAmB,EACnB,aAAc,EACd,eAAgB,EAChB,OAAU,EACV,mBAAoB,EACpB,oBAAqB,EACrB,iBAAkB,EAClB,kBAAmB,EACnB,oBAAqB,EACrB,iBAAkB,EAClB,eAxDgB,EAyDhB,cAAe,EACf,kBAAmB,EACnB,iBAAkB,EAClB,eAAgB,EAChB,WAAc,EACd,eAAgB,EAChB,eAAgB,GAYlB,SAASC,GAAaC,EAAM5P,EAAMjD,GAChC,IAAI8S,EAAa7P,EAAK4E,QAAQ,kBAAmB,SAASkL,cAEtDhP,EAAO4O,GAAeG,GAEtB/O,GAhFY,IAmFVA,GAAyC,iBAAV/D,IACjCA,EAAQgT,OAAOhT,GAAS,MAG1B6S,EAAKI,MAAMH,GAAc9S,GAEzB6S,EAAKK,eAAe,KAAMjQ,EAAMjD,EAEpC,CAqBA,SAASmT,GAAKN,EAAM5P,EAAMjD,GACxB,GAAoB,iBAATiD,EAAmB,CAC5B,QAAcnE,IAAVkB,EAGF,OAlDN,SAAsB6S,EAAM5P,GAC1B,OAAI0P,GAAe1P,GACV4P,EAAKI,MAAMhQ,GAEX4P,EAAKO,eAAe,KAAMnQ,EAErC,CA4CaoQ,CAAaR,EAAM5P,GAF1B2P,GAAaC,EAAM5P,EAAMjD,EAI7B,MA1BF,SAAuB6S,EAAMS,GAE3B,IAAgCC,EAAGtQ,EAA/BuQ,EAAQvP,OAAOC,KAAKoP,GAExB,IAAKC,EAAI,EAAUtQ,EAAOuQ,EAAMD,GAAKA,IACnCX,GAAaC,EAAM5P,EAAMqQ,EAAMrQ,GAEnC,CAoBIwQ,CAAcZ,EAAM5P,GAGtB,OAAO4P,CACT,CAYA,MAAM,GAAW5O,OAAOqI,UAAUC,SAclC,SAASmH,GAAUC,GACjB,IAAKA,IAAOA,EAAGC,SACb,MAAM,IAAIC,MAAM,uCAElBzV,KAAKuV,GAAKA,EACVvV,KAAK0V,KAAOH,EAAGI,SACjB,CAUAL,GAAUpH,UAAU0H,IAAM,SAAS/Q,GAEjC,OADA7E,KAAK0V,KAAKE,IAAI/Q,GACP7E,IACT,EAYAsV,GAAUpH,UAAU2H,OAAS,SAAShR,GACpC,MAAI,mBAAqB,GAAS+K,KAAK/K,GAC9B7E,KAAK8V,eAAejR,IAG7B7E,KAAK0V,KAAKG,OAAOhR,GACV7E,KACT,EAUAsV,GAAUpH,UAAU4H,eAAiB,SAASC,GAC5C,MAAMC,EAAMhW,KAAKiW,QACjB,IAAK,IAAId,EAAI,EAAGA,EAAIa,EAAIzS,OAAQ4R,IAC1BY,EAAGG,KAAKF,EAAIb,KACdnV,KAAK6V,OAAOG,EAAIb,IAGpB,OAAOnV,IACT,EAcAsV,GAAUpH,UAAUiI,OAAS,SAAStR,EAAMuR,GAQ1C,YAPI,IAAuBA,EACrBA,IAAUpW,KAAK0V,KAAKS,OAAOtR,EAAMuR,IACnCpW,KAAK0V,KAAKS,OAAOtR,GAGnB7E,KAAK0V,KAAKS,OAAOtR,GAEZ7E,IACT,EASAsV,GAAUpH,UAAU+H,MAAQ,WAC1B,OAAO1I,MAAM8I,KAAKrW,KAAK0V,KACzB,EAUAJ,GAAUpH,UAAUoI,IACnBhB,GAAUpH,UAAUqI,SAAW,SAAS1R,GACtC,OAAO7E,KAAK0V,KAAKa,SAAS1R,EAC5B,EA0BD,IAAI2R,GACG,6BAQHC,GAAY,eAAiBD,GAAS,IA4D1C,SAASjP,GAAO1C,EAAMqQ,GACpB,IAAI/U,EAeJ,MAXuB,OAFvB0E,EAAOA,EAAK6R,QAEH9I,OAAO,IACdzN,EAhEJ,SAAewW,GAEb,IAAIC,GAAS,EAGe,SAAxBD,EAAIE,UAAU,EAAG,IACU,IAAzBF,EAAIjQ,QAAQ8P,MACdG,EAAMF,GAAYE,EAAIE,UAAU,KAKlCF,EAAMF,GAAY,IAAME,EAAM,SAC9BC,GAAS,GAGX,IAAIE,EAiBN,SAAuBH,GAErB,IAAII,EAMJ,OAHAA,EAAS,IAAIC,WACNC,OAAQ,EAERF,EAAOG,gBAAgBP,EAAK,WACrC,CA1BeQ,CAAcR,GAE3B,IAAKC,EACH,OAAOE,EAOT,IAJA,IAAIM,EAAWC,SAASC,yBAEpBpS,EAAS4R,EAAOS,WAEbrS,EAAOqS,YACZH,EAASI,YAAYtS,EAAOqS,YAG9B,OAAOH,CACT,CAiCcpK,CAAMnI,GAAM0S,WACtBpX,EAAUkX,SAASI,WAAWtX,GAAS,IAEvCA,EAAUkX,SAASK,gBAAgBlB,GAAQ3R,GAGzCqQ,GACFH,GAAK5U,EAAS+U,GAGT/U,CACT,CCxYe,SAASwX,GACpB1F,EACA2F,EACA/X,GAEFG,KAAK6X,cAAgBD,EAErB5X,KAAK8X,cAAgB7F,GAAUA,EAAO8F,aAEtCC,GAAA,EAAapI,KAAK5P,KAAMH,EAZN,KAapB,EAEA,OAAS8X,GAA6BK,GAAA,GAEtCL,GAA4BzJ,UAAU+J,UAAY,SAAS9X,GAEzD,QAAI,SAAQA,QAKV,QAAMA,EAAS,CAAE,gBAAiB,iBAAmBH,KAAKkY,SAAS/X,GAEvE,EAEAwX,GAA4BzJ,UAAUgK,SAAW,SAAS/X,GACxD,OC1CK,SAAgCA,EAAS4X,GAG9C,OAFAA,EAAeA,GAAgB,6BAExB,QAAkB5X,GAASe,IAAI6W,EACxC,CDsCSI,CAAuBhY,EAASH,KAAK8X,cAC9C,EAEAH,GAA4BzJ,UAAUkK,UAAY,SAASC,EAAWlY,EAAS+U,EAAQ,CAAC,GAEtF,IAiBIoD,GAAMC,EAjBKvY,KAAK6X,cAAcW,SAChC,CACE,qBACA,oBACA,gBACA,8BACA,8BACA,kBACA,YAGA,uBACA,mBACA,mBACA7W,MAAK8W,IAAK,IAAAnY,IAAGH,EAASsY,OAGPJ,EAAWlY,EAAS,IAAK+U,EAAOwD,YAAY,IAE3D7E,EAAO7T,KAAKkY,SAAS/X,GAIrBwY,GAAU,IAAArY,IAAGH,EAAS,iBAAmB,CAC3CkT,EAAG,EACHC,EAAG,GACD,CACFD,GAAIlT,EAAQsT,MANH,IAMmB,EAC5BH,GAAInT,EAAQyY,OAPH,IAOoB,GAG3BC,EAAM,GAAU,SAUpB,OATA,GAAQA,EAAK,CACXC,KAAMjF,EACNJ,MAbS,GAcTmF,OAdS,MAeND,IDlEP,SAAkBxY,EAAS4Y,GAClBA,EAAOvB,YA9BhB,SAAwBrX,EAAS4Y,GAE/B,GAAI5Y,EAAQ6Y,gBAAkBD,EAAOC,cACnC,IAGE,OAAOD,EAAOC,cAAcvB,WAAWtX,GAAS,EAClD,CAAE,MAAOmM,GAGT,CAGF,OAAOnM,CACT,CAgB4B8Y,CAAe9Y,EAAS4Y,GACpD,CAgBEG,CCmDqBL,EAAXR,GAEHC,CACT,EAEAX,GAA4BxW,QAAU,CACpC,qCACA,eACA,YE5FK,MAAMgY,GAAgB,CCZ7B,CACEtO,SAAU,CAAE,+BACZuO,4BAA6B,CAAE,OAAQzB,MDmB5B0B,GAAyB,CACpCC,M,sCENF,MA8DMC,IAAoB,SA5DN,CAClB,CACE7L,QAAS,CACP,6BACA,uBACA,wBAEF8F,OAAQ,iBAEV,CACE9F,QAAS,CACP,4BACA,sBACA,uBAEF8F,OAAQ,WAEV,CACE9F,QAAS,CACP,yBACA,mBACA,oBAEF8F,OAAQ,gBAEV,CACE9F,QAAS,CACP,4BACA,sBACA,uBAEF8F,OAAQ,CAAE,aAAc,eAE1B,CACE9F,QAAS,CACP,2BACA,qBACA,qBACA,yBACA,mBACA,mBACA,0CACA,oCACA,oCACA,2BACA,qBACA,sBAEF8F,OAAQ,cAEV,CACE9F,QAAS,CACP,yBACA,mBACA,oBAEF8F,OAAQ,gBAIkC,CAACgG,EAAkBC,KAE/D,MAAM,QAAE/L,EAAO,OAAE8F,GAAWiG,EAE5B,IAAK,MAAMC,KAAShM,EACd8L,EAAiBE,GACnBF,EAAiBE,GAAOlG,QAAU,IAAMA,EAExCgG,EAAiBE,GAAS,CAAElG,UAIhC,OAAOgG,CAAgB,GACtB,CAAC,GAQW,SAASG,GAAgCzH,GAEtDlS,KAAKqS,WAAaH,EAElBlS,KAAK8S,UACP,CAEA6G,GAAgCxY,QAAU,CAAE,aAM5CwY,GAAgCzL,UAAU4E,SAAW,WAGnD9S,KAAKqS,WAAWnC,iBAAiB,cAnGd,IAmG2ClQ,MAG9DA,KAAKqS,WAAWnC,iBAAiB,cAtGd,IAsG2ClQ,MAG9DA,KAAKqS,WAAWnC,iBAAiB,eAzGd,IAyG4ClQ,KACjE,EAQA2Z,GAAgCzL,UAAUwF,oBAAsB,SAASkG,GAOvE,OAAQC,GAEChU,OAAO6H,QAAQmM,GAAiBpU,QAAO,CAACiI,GAAW7I,EAAM6U,MAE9DhM,EAAQ7I,GAAQ7E,KAAK8Z,eAAejV,EAAM6U,GAEnChM,IACN,CAAE,EAGT,EAEAiM,GAAgCzL,UAAU4L,eAAiB,SAASjV,EAAM6U,GAExE,MAAMD,EAAaF,GAAkB1U,GAErC,OAAI4U,EACK,IACFC,EACHlG,OAAQkG,EAAMlG,OAAS,GAAIkG,EAAMlG,UAAYiG,EAAWjG,SAAYiG,EAAWjG,QAI5EkG,CACT,ECvJA,UACE7O,SAAU,CAAE,mCACZkP,gCAAiC,CAAE,OAAQJ,KCYtC,SAAS,GAAcK,EAAUtL,GACtC,OAWF,SAA4BsL,EAAUtL,GACpC,MAAMjH,EAAciH,EAASxN,IAAI,eAE3BwG,EAqBR,SAA6BsS,EAAUvS,GACrC,OAAOA,EAAYF,OAAO,sBAAuB,CAC/C0S,UAAWD,EAASC,WAExB,CAzBwBC,CAAoBF,EAAUvS,GAC9CpF,EAAoBoF,EAAYF,OAAO,yBAA0B,CACrEtG,OAAQ,CACNyG,KAIJ,OAAOD,EAAYF,OAAO,oBAAqB,CAC7C1C,KAAMmV,EAASnV,KACfxC,qBAEJ,CAzBS8X,CAAmBH,EAAUtL,EACtC,CClBO,MAAM0L,GAAc,CACzB,WACA,OACA,gBACA,iBACAC,KAAK,KCUA,MAAMC,GAMX,WAAA1a,CAAY8O,EAAUuD,GACpBjS,KAAKiQ,UAAYvB,EACjB1O,KAAKua,gBAAkB7L,EAASxN,IAAI,kBACpClB,KAAKwa,aAAe9L,EAASxN,IAAI,eACjClB,KAAKqS,WAAa3D,EAASxN,IAAI,aAC/BlB,KAAKya,QAAU/L,EAASxN,IAAI,UAC5BlB,KAAK0a,WAAahM,EAASxN,IAAI,aAC/BlB,KAAK2a,OAASjM,EAASxN,IAAI,SAC3BlB,KAAKoS,WAAa1D,EAASxN,IAAI,aAC/BlB,KAAK4a,WAAalM,EAASxN,IAAI,aAE/BwN,EAASxN,IAAI,aAAagP,iBAAiB,cAAelQ,MAE1DA,KAAK6a,QAAU5I,CACjB,CAKA,mBAAAyB,GACE,MAAM,aACJoH,EAAY,UACZC,EAAS,cACTC,KACGC,GACDjb,KAAK6a,QAEHK,EAAYlb,KAAK4a,WAAW/X,QAAOsY,GAAKA,EAAExV,OAASmV,IACnDpN,EAAU,CAAC,EAejB,OAbAwN,EAAUE,SAAQ,CAACpB,EAAUlI,KAE3BpE,EAAQ,oBAAoBoN,KAAgBhJ,KAAW,CACrDlD,MAAOoL,EAASnV,KAChBsP,OAAQnU,KAAKqb,oBAHG,IAAML,EAAchB,EAAUha,KAAKiQ,aAInDO,MAAO,CACL7G,GAAIoR,EAAUpG,cACd9P,KAAM7E,KAAKoS,WAAW2I,OAErBE,EACJ,IAGIvN,CACT,CAEA,kBAAA2N,CAAmBC,GACjB,MAAM/T,EAASvH,KAAKya,QACdc,EAAQvb,KAAK2a,OACbzI,EAAYlS,KAAKqS,WACjBmJ,EAAiBxb,KAAKua,gBAE5B,OAAQxY,IACNmQ,EAAUuJ,QAEV,MAAMpb,EAAiBib,IACjBnb,EAAUqb,EAAeE,YAAY,CACzC/V,KAAMtF,EAAegG,MACrBhG,eAAgBA,IAQlB,OAJI0B,aAAiB4Z,gBACnB5Z,EAAQwZ,EAAMK,oBAGTrU,EAAOsU,MAAM9Z,EAAO5B,EAAQ,CAEvC,EC1EK,MAAM2b,GAMX,WAAAlc,CAAY8O,EAAUuD,GACpBjS,KAAKiQ,UAAYvB,EACjB1O,KAAKua,gBAAkB7L,EAASxN,IAAI,kBACpClB,KAAKwa,aAAe9L,EAASxN,IAAI,eACjClB,KAAKqS,WAAa3D,EAASxN,IAAI,aAC/BlB,KAAKya,QAAU/L,EAASxN,IAAI,UAC5BlB,KAAK0a,WAAahM,EAASxN,IAAI,aAC/BlB,KAAK+b,OAASrN,EAASxN,IAAI,SAC3BlB,KAAKoS,WAAa1D,EAASxN,IAAI,aAC/BlB,KAAK4a,WAAalM,EAASxN,IAAI,aAE/BlB,KAAK6a,QAAU5I,EAEfjS,KAAKgc,WACP,CAEA,SAAAA,GACEhc,KAAKqS,WAAWnC,iBAAiB,cAAelQ,KAClD,CAOA,mBAAA0T,CAAoBvT,GAGlB,IAFcH,KAAK+b,OAERE,QAAQ,eAAgB,CAAE9b,QAASA,IAC5C,MAAO,GAGT,MAAM,aACJ2a,EAAY,UACZC,EAAS,cACTC,KACGC,GACDjb,KAAK6a,QAEHK,EAAYlb,KAAK4a,WAAW/X,QAAOsY,GAAKA,EAAExV,OAASmV,IACnDpN,EAAU,CAAC,EAejB,OAbAwN,EAAUE,SAAQ,CAACpB,EAAUlI,KAE3BpE,EAAQ,oBAAoBoN,KAAgBhJ,KAAW,CACrDlD,MAAOoL,EAASnV,KAChBsP,OAAQnU,KAAKqb,mBAAmBlb,GAHhB,IAAM6a,EAAchB,EAAUha,KAAKiQ,aAInDO,MAAO,CACL7G,GAAIoR,EAAUpG,cACd9P,KAAM7E,KAAKoS,WAAW2I,OAErBE,EACJ,IAGIvN,CACT,CAEA,kBAAA2N,CAAmBlb,EAAS+b,GAC1B,MAAMV,EAAiBxb,KAAKua,gBACtB4B,EAAYnc,KAAK0a,WACjBnT,EAASvH,KAAKya,QAEdO,EAAgB,KACpB,MAAM3a,EAAiB6b,IAEvB,OAAOV,EAAeE,YAAY,CAChC/V,KAAMtF,EAAegG,MACrBhG,eAAgBA,GAChB,EAeJ,MAAO,CACL+b,MAbuB,KACvB,MAAMhP,EAAa4N,IACnBmB,EAAUE,OAAOlc,EAASiN,EAAW,EAYrCkP,UAT0Bva,IAC1B,MAAMqL,EAAa4N,IACnB,OAAOzT,EAAOsU,MAAM9Z,EAAOqL,EAAY,CACrCmP,OAAQpc,GACR,EAON,EC7FK,SAASqc,GAAerc,EAAS6Z,EAAUtL,GAChD,MAAMjH,EAAciH,EAASxN,IAAI,eAC3Bub,EAAc/N,EAASxN,IAAI,eAC3BpB,EAAW4O,EAASxN,IAAI,YACTwN,EAASxN,IAAI,gBAGrBuO,QAAQ,sCAAuC,CAC1DiN,QAIF,WACE,MAAMC,EAAkBF,EAAYD,eAAerc,EAAS,CAAEwF,KAAM,sBACpE7F,EAAS+D,iBAAiB8Y,EAAiB,CACzC9X,KAAMmV,EAASnV,OAGjB,MAEMxC,GAFK,QAAkBsa,GAEAzb,IAAI,qBAEjC,IAAKmB,EASH,YARAvC,EAAS+D,iBAAiB8Y,EAAiB,CACzCta,kBAAmBoF,EAAYF,OAAO,yBAA0B,CAC9DtG,OAAQ,CACN,GAAoB+Y,EAAUvS,QAQtC,MAAMC,EAmBV,SAA0BvH,GACxB,OAAOA,EAAQE,gBAAgBgC,mBAAmBpB,OAAOU,MAAKC,IAAS,IAAAtB,IAAGsB,EAAO,wBACnF,CArB0B,CAAiB+a,GAElCjV,EAWL5H,EAASU,uBAAuBmc,EAAiBjV,EAAe,CAC9DuS,UAAWD,EAASC,YAXpBna,EAASU,uBAAuBmc,EAAiBta,EAAmB,CAClEpB,OAAQ,IACHoB,EAAkBpB,OACrB,GAAoB+Y,EAAUvS,KAUtC,GACF,CAMA,SAAS,GAAoBuS,EAAUvS,GACrC,OAAOA,EAAYF,OAAO,sBAAuB,CAC/C0S,UAAWD,EAASC,WAExB,CCtDO,MAAM2C,GAMX,WAAAhd,CAAY8O,EAAUuD,GAEpBjS,KAAKiQ,UAAYvB,EACjB1O,KAAKqS,WAAa3D,EAASxN,IAAI,aAC/BlB,KAAK+b,OAASrN,EAASxN,IAAI,SAC3BlB,KAAKoS,WAAa1D,EAASxN,IAAI,aAC/BlB,KAAK4a,WAAalM,EAASxN,IAAI,aAE/BlB,KAAKqS,WAAWnC,iBAAiB,eAAgBlQ,MAEjDA,KAAK6a,QAAU5I,CACjB,CAQA,mBAAAyB,CAAoBvT,GAClB,MAAM0c,EAAQ7c,KAAK+b,OAEnB,IAAI,SAAQ5b,KAAa0c,EAAMZ,QAAQ,gBAAiB,CAAE9b,YACxD,MAAO,CAAC,EAGV,KAAK,IAAAG,IAAGH,EAAS,iBACf,MAAO,CAAC,EAGV,MAAM,aACJ2a,EAAY,UACZC,EAAS,eACTyB,KACGvB,GACDjb,KAAK6a,QAEHK,EAAYlb,KAAK4a,WAAW/X,QAAOsY,GAAKA,EAAExV,OAASmV,IACnDpN,EAAU,CAAC,EAejB,OAbAwN,EAAUE,SAAQ,CAACpB,EAAUlI,KAE3BpE,EAAQ,qBAAqBoN,KAAgBhJ,KAAW,CACtDlD,MAAOoL,EAASnV,KAChBsP,OAHc,IAAMqI,EAAerc,EAAS6Z,EAAUha,KAAKiQ,WAI3DO,MAAO,CACL7G,GAAIoR,EAAUpG,cACd9P,KAAM7E,KAAKoS,WAAW2I,OAErBE,EACJ,IAGIvN,CACT,EC/EK,MAAMoP,GAAuB,CAClCjS,SAAU,CACR,kCACA,kCACA,oCAEF,kCAAmC,CAAE,OCNhC,cAAiCyP,GACtC9I,eAAiB,CACf,YAGF,WAAA5R,CAAY8O,GACV3O,MAAM2O,EAAU,CACdoM,aAAc,cACdC,UAAW,YACXgC,UAAW,0BACX/B,cAAa,GACbxH,OAAQ4G,IAEZ,IDNA,kCAAmC,CAAE,OEPhC,cAAiC0B,GACtCtK,eAAiB,CACf,YAGF,WAAA5R,CAAY8O,GACV3O,MAAM2O,EAAU,CACdoM,aAAc,cACdC,UAAW,YACXgC,UAAW,0BACX/B,cAAa,GACbxH,OAAQ4G,IAEZ,IFLA,mCAAoC,CAAE,OGRjC,cAAkCwC,GACvCpL,eAAiB,CACf,YAGF,WAAA5R,CAAY8O,GACV3O,MAAM2O,EAAU,CACdoM,aAAc,cACdC,UAAW,YACXgC,UAAW,0BACXP,eAAc,GACdhJ,OAAQ4G,IAEZ,KCDK,SAAS,GAAcJ,EAAUtL,GACtC,OAWF,SAA4BsL,EAAUtL,GACpC,MAAMjH,EAAciH,EAASxN,IAAI,eAE3BwG,EAcR,SAA8BsS,EAAUvS,GACtC,OAAOA,EAAYF,OAAO,uBAAwB,CAChDyV,WAAYhD,EAASgD,YAEzB,CAlBwBC,CAAqBjD,EAAUvS,GAE/CpF,EAAoBoF,EAAYF,OAAO,yBAA0B,CACrEtG,OAAQ,CACNyG,KAIJ,OAAOD,EAAYF,OAAO,wBAAyB,CACjD1C,KAAMmV,EAASnV,KACfxC,qBAEJ,CA1BS6a,CAAmBlD,EAAUtL,EACtC,CClBO,MAAM,GAAc,CACzB,WACA,MACA,qBACA,YACA2L,KAAK,KCUA,SAAS,GAAela,EAAS6Z,EAAUtL,GAChD,MAAMjH,EAAciH,EAASxN,IAAI,eAC3Bub,EAAc/N,EAASxN,IAAI,eAC3BpB,EAAW4O,EAASxN,IAAI,YACTwN,EAASxN,IAAI,gBAGrBuO,QAAQ,sCAAuC,CAC1DiN,QAIF,WACE,MAAMC,EAAkBF,EAAYD,eAAerc,EAAS,CAAEwF,KAAM,0BACpE7F,EAAS+D,iBAAiB8Y,EAAiB,CACzC9X,KAAMmV,EAASnV,OAGjB,MAEMxC,GAFK,QAAkBsa,GAEAzb,IAAI,qBAEjC,IAAKmB,EASH,YARAvC,EAAS+D,iBAAiB8Y,EAAiB,CACzCta,kBAAmBoF,EAAYF,OAAO,yBAA0B,CAC9DtG,OAAQ,CACN,GAAqB+Y,EAAUvS,QAQvC,MAAMjG,EAmBV,SAA2BrB,GACzB,OAAOA,EAAQE,gBAAgBgC,mBAAmBpB,OAAOU,MAAKC,IAAS,IAAAtB,IAAGsB,EAAO,yBACnF,CArB2B,CAAkB+a,GAEpCnb,EAWL1B,EAASU,uBAAuBmc,EAAiBnb,EAAgB,CAC/Dwb,WAAYhD,EAASgD,aAXrBld,EAASU,uBAAuBmc,EAAiBta,EAAmB,CAClEpB,OAAQ,IACHoB,EAAkBpB,OACrB,GAAqB+Y,EAAUvS,KAUvC,GACF,CAMA,SAAS,GAAqBuS,EAAUvS,GACtC,OAAOA,EAAYF,OAAO,uBAAwB,CAChDyV,WAAYhD,EAASgD,YAEzB,CCxEO,MAAMG,GAAwB,CACnCtS,SAAU,CACR,mCACA,mCACA,qCAEF,mCAAoC,CAAE,OCNjC,cAAiCyP,GACtC9I,eAAiB,CACf,YAGF,WAAA5R,CAAY8O,GACV3O,MAAM2O,EAAU,CACdoM,aAAc,cACdC,UAAW,YACXgC,UAAW,+BACX/B,cAAa,GACbxH,OAAQ,IAEZ,IDNA,mCAAoC,CAAE,OEPjC,cAAiCsI,GACtCtK,eAAiB,CACf,YAGF,WAAA5R,CAAY8O,GACV3O,MAAM2O,EAAU,CACdoM,aAAc,cACdC,UAAW,YACXgC,UAAW,+BACX/B,cAAa,GACbxH,OAAQ,IAEZ,IFLA,oCAAqC,CAAE,OGRlC,cAAkCoJ,GACvCpL,eAAiB,CACf,YAGF,WAAA5R,CAAY8O,GACV3O,MAAM2O,EAAU,CACdoM,aAAc,cACdC,UAAW,YACXgC,UAAW,+BACXP,eAAc,GACdhJ,OAAQ,IAEZ,KCDK,SAAS,GAAcwG,EAAUtL,GACtC,OAWF,SAAwBsL,EAAUtL,GAChC,MAAMjH,EAAciH,EAASxN,IAAI,eAE3B2H,EAcR,SAA8BmR,EAAUvS,GACtC,OAAOA,EAAYF,OAAO,uBAAwB,CAChDuC,OAAQkQ,EAASlQ,QAErB,CAlByBsT,CAAqBpD,EAAUvS,GAChDpF,EAAoBoF,EAAYF,OAAO,yBAA0B,CACrEtG,OAAQ,CACNoc,GAAoB5V,GACpBoB,KAIJ,OAAOpB,EAAYF,OAAO,gBAAiB,CACzC1C,KAAMmV,EAASnV,KACfxC,qBAEJ,CA1BSib,CAAetD,EAAUtL,EAClC,CAiCA,SAAS2O,GAAoB5V,GAC3B,OAAOA,EAAYF,OAAO,iBAC5B,CCrDO,MAAM,GAAc,CACzB,WACA,OACA,YACA,SACA8S,KAAK,KCUA,SAAS,GAAela,EAAS6Z,EAAUtL,GAChD,MAAMjH,EAAciH,EAASxN,IAAI,eAC3Bub,EAAc/N,EAASxN,IAAI,eAC3BpB,EAAW4O,EAASxN,IAAI,YACTwN,EAASxN,IAAI,gBAGrBuO,QAAQ,sCAAuC,CAC1DiN,QAIF,WACE,MAAMC,EAAkBF,EAAYD,eAAerc,EAAS,CAAEwF,KAAM,kBACpE7F,EAAS+D,iBAAiB8Y,EAAiB,CACzC9X,KAAMmV,EAASnV,OAGjB,MAEMxC,GAFK,QAAkBsa,GAEAzb,IAAI,qBAEjC,IAAKmB,EAUH,YATAvC,EAAS+D,iBAAiB8Y,EAAiB,CACzCta,kBAAmBoF,EAAYF,OAAO,yBAA0B,CAC9DtG,OAAQ,CACN,GAAoBwG,GACpB,GAAqBuS,EAAUvS,QAQvC,MAAMoB,EAmBV,SAA2B1I,GACzB,OAAOA,EAAQE,gBAAgBgC,mBAAmBpB,OAAOU,MAAKC,IAAS,IAAAtB,IAAGsB,EAAO,yBACnF,CArB2B,CAAkB+a,GAEpC9T,EAWL/I,EAASU,uBAAuBmc,EAAiB9T,EAAgB,CAC/DiB,OAAQkQ,EAASlQ,SAXjBhK,EAASU,uBAAuBmc,EAAiBta,EAAmB,CAClEpB,OAAQ,IACHoB,EAAkBpB,OACrB,GAAqB+Y,EAAUvS,KAUvC,GACF,CAMA,SAAS,GAAqBuS,EAAUvS,GACtC,OAAOA,EAAYF,OAAO,uBAAwB,CAChDuC,OAAQkQ,EAASlQ,QAErB,CAEA,SAAS,GAAoBrC,GAC3B,OAAOA,EAAYF,OAAO,iBAC5B,CC7EO,MAAMgW,GAAoB,CAC/B1S,SAAU,CACR,+BACA,+BACA,iCAEF,+BAAgC,CAAE,OCN7B,cAAiCyP,GACtC9I,eAAiB,CACf,YAGF,WAAA5R,CAAY8O,GACV3O,MAAM2O,EAAU,CACdoM,aAAc,OACdC,UAAW,QACXgC,UAAW,sBACX/B,cAAa,GACbxH,OAAQ,IAEZ,IDNA,+BAAgC,CAAE,OEP7B,cAAiCsI,GACtCtK,eAAiB,CACf,YAGF,WAAA5R,CAAY8O,GACV3O,MAAM2O,EAAU,CACdoM,aAAc,OACdC,UAAW,QACXgC,UAAW,sBACX/B,cAAa,GACbxH,OAAQ,IAEZ,IFLA,gCAAiC,CAAE,OGR9B,cAAkCoJ,GACvCpL,eAAiB,CACf,YAGF,WAAA5R,CAAY8O,GACV3O,MAAM2O,EAAU,CACdoM,aAAc,OACdC,UAAW,QACXgC,UAAW,sBACXP,eAAc,GACdhJ,OAAQ,IAEZ,KCjBWgK,GAAkB,yBAClBC,GAA4B,YAE5BC,GAAW,q7BCgBjB,SAAS,GAAc1D,EAAUtL,GACtC,OAYF,SAAuBsL,EAAUtL,GAC/B,MAAM0B,EAAmB1B,EAASxN,IAAI,oBAEhCyc,EAAYvN,EAAiBgE,UAAUoJ,IAEvCI,EAAUxN,EAAiB4K,cAAc2C,EAAU,IAEnD/Z,GAAK,QAAkBga,GAU7B,OAT0Bha,EAAG1C,IAAI,qBACSA,IAAI,UAAUS,MAAM4T,IAAO,IAAAjV,IAAGiV,EAAI,2BAEzCtU,OAAOU,MAAM4T,GAAOA,EAAGsI,WAAaJ,KAE5DK,IAAI,aAAc9D,EAAS+D,UAEtCna,EAAGka,IAAI,OAAQ9D,EAASnV,MAEjBjB,CACT,CA9BSoa,CAAchE,EAAUtL,EACjC,CCrBO,MAAM,GAAc,CAAE,WAAY,MAAO,SAAU,UAAW,cAAe2L,KAAK,KCgBlF,SAAS,GAAela,EAAS6Z,EAAUtL,GAChD,MAAM5O,EAAW4O,EAASxN,IAAI,YACTwN,EAASxN,IAAI,gBAErBuO,QAAQ,sCAAuC,CAC1DiN,QAGF,WACE,MAAMtM,EAAmB1B,EAASxN,IAAI,oBAEhCyc,EAAYvN,EAAiBgE,UAAUoJ,IAEvCI,EAAUxN,EAAiBqC,cAActS,EAASwd,EAAU,IAElE7d,EAAS+D,iBAAiB+Z,EAAS,CACjC/Y,KAAMmV,EAASnV,OAGjB,MAKMoZ,GALK,QAAkBL,GAEA1c,IAAI,qBACSA,IAAI,UAAUS,MAAM4T,IAAO,IAAAjV,IAAGiV,EAAI,2BAEzCrU,IAAI,UAAUS,MAAM4T,GAAOA,EAAGrU,IAAI,cAAgBuc,KAMrF,OAJA3d,EAASU,uBAAuBod,EAASK,EAAY,CACnDC,WAAYlE,EAAS+D,WAGhBH,CACT,GACF,CC5CO,MAAMO,GAAmB,CAC9BtT,SAAU,CAAE,8BAA+B,8BAA+B,gCAC1E,8BAA+B,CAAE,OCD5B,cAAiCyP,GACtC9I,eAAiB,CAAE,YAEnB,WAAA5R,CAAY8O,GACV3O,MAAM2O,EAAU,CACdoM,aAAc,MACdC,UAAW,cACXgC,UAAW,uBACX/B,cAAa,GACbxH,OAAQ,GACRS,SAAUyJ,KAGZ1d,KAAKmS,kBAAoBzD,EAASxN,IAAI,mBACxC,CAEA,mBAAAwS,CAAoBvT,GAClB,MAAMwd,EAAY3d,KAAKmS,kBAAkBiC,UAAUoJ,IAEnD,OAAKG,GAAkC,IAArBA,EAAUpa,OAIrBxD,MAAM2T,oBAAoBvT,GAHxB,CAAC,CAIZ,IDtBA,8BAA+B,CAAE,OEF5B,cAAiC2b,GACtCtK,eAAiB,CAAE,YAEnB,WAAA5R,CAAY8O,GACV3O,MAAM2O,EAAU,CACdoM,aAAc,MACdC,UAAW,cACXgC,UAAW,uBACX/B,cAAa,GACbxH,OAAQ,GACRS,SAAUyJ,KAGZ1d,KAAKmS,kBAAoBzD,EAASxN,IAAI,mBACxC,CAEA,mBAAAwS,CAAoBvT,GAClB,MAAMwd,EAAY3d,KAAKmS,kBAAkBiC,UAAUoJ,IAEnD,OAAKG,GAAkC,IAArBA,EAAUpa,OAIrBxD,MAAM2T,oBAAoBvT,GAHxB,CAAC,CAIZ,IFrBA,+BAAgC,CAAE,OGH7B,cAAkCyc,GACvCpL,eAAiB,CAAE,YAEnB,WAAA5R,CAAY8O,GACV3O,MAAM2O,EAAU,CACdoM,aAAc,MACdC,UAAW,cACXgC,UAAW,uBACXP,eAAc,GACdhJ,OAAQ,GACRS,SAAUyJ,KAGZ1d,KAAKmS,kBAAoBzD,EAASxN,IAAI,mBACxC,CAEA,mBAAAwS,CAAoBvT,GAClB,MAAMwd,EAAY3d,KAAKmS,kBAAkBiC,UAAUoJ,IAEnD,OAAKG,GAAkC,IAArBA,EAAUpa,OAIrBxD,MAAM2T,oBAAoBvT,GAHxB,CAAC,CAIZ,KCxBK,MAAMie,GACX,WAAAxe,CAAYyB,GACVrB,KAAKqe,cAAgBhd,CACvB,CAEA,UAAAC,CAAWpB,GACTA,EAAQwc,SACV,EAGF0B,GAAuBjd,QAAU,CAAE,gBCTnC,MAAMmd,GAAW,CACf,sCAAuCF,IAI1B,SAASG,GAAmB1e,EAAUwB,GAEnDxB,EAASoG,GAAG,gBAAgB,YAC1B,SAAQqY,IAAU,SAASE,EAAS7U,GAClCtI,EAAaod,gBAAgB9U,EAAI6U,EACnC,GACF,GACF,CAEAD,GAAmBpd,QAAU,CAAE,WAAY,gBCVpC,MAQMud,GAAwB,CACnC7T,SAAU,CACR,IAEFgG,YAAa,CACXsM,GACAI,GACAT,GACAqB,KCeW,SAAS,GAAQ1V,EAAU,CAAC,GAEzCA,EAAU,IACLA,EACHkW,iBAAkB,IACbtF,MACA5Q,EAAQkW,kBAEb3O,gBAAiB,CACf4O,QAAS,EAAAC,qBACTC,kBAAoBnZ,GACL,SAATA,EACK,CACL,CACE4N,MAAO,yBACPuF,KAAM,sEAER,CACEvF,MAAO,mBACPuF,KAAM,sCAGQ,YAATnT,EACF,CACL,CACE4N,MAAO,mBACPuF,KAAM,6GAJL,KASNrQ,EAAQuH,kBAIfhQ,KAAK+e,iCAAiCtW,GAEtC,IAAYmH,KAAK5P,KAAMyI,EACzB,EAEA,OAAS,GAAS,KAElB,GAAQyF,UAAU6Q,iCAAmC,SAAStW,GAC5D,MAAM,uBAAE6J,GAA2B7J,GAEJ,IAA3B6J,IACFtS,KAAKgf,SAAW,IAAKhf,KAAKgf,SAAU,IAExC,EAEA,GAAQ9Q,UAAU+Q,qBAAuB,IACpC9F,GACH,EACA,gCACA,KACA,MACA,MACA,KACA,KACA,GACA,GACA,GACAuF,GD7F6B,CAC7B7T,SAAU,CACR,4BAEF,2BAA4B,CAAE,OEdzB,MACL2G,eAAiB,CAAE,WAAY,aAE/B,WAAA5R,CAAYC,EAAUqb,GACpBlb,KAAK4a,WAAaM,EAClBlb,KAAKkf,WAAa,GAElBrf,EAASoG,GAAG,gBAAgB,KAC1BjG,KAAKmf,QAAQ,GAEjB,CAEA,QAAArM,CAASsM,GACPpf,KAAKkf,WAAW9P,KAAKgQ,EACvB,CAEA,MAAAD,GACE,MAAME,EAAWrf,KAAKkf,WAAWzZ,QAAO,CAACyV,EAAWoE,IAC3CpE,EAAUqE,OAAOD,EAASE,iBAChC,IAEHxf,KAAK4a,WAAWkD,IAAIuB,EACtB,IFPA,UAAa,CAAE,OGfV,MACL7N,eAAiB,CAAE,oBAEnB,WAAA5R,CAAYsb,GACVlb,KAAK4a,WAAaM,GAAa,EACjC,CAEA,GAAA4C,CAAI5C,GACFlb,KAAK4a,WAAaM,CACpB,CAEA,MAAAuE,GACE,OAAOzf,KAAK4a,UACd,CAEA,MAAA/X,CAAO6c,GACL,OAAO1f,KAAK4a,WAAW/X,OAAO6c,EAChC,MF0FF,GAAQxR,UAAU8Q,SAAW,GAAGO,OAC9B,IAAYrR,UAAU8Q,SACtB,GAAQ9Q,UAAU+Q,qB","sources":["webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js-behaviors/lib/camunda-cloud/CleanUpAdHocSubProcessBehavior.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js-behaviors/lib/camunda-cloud/CleanUpBusinessRuleTaskBehavior.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js-behaviors/lib/camunda-cloud/CleanUpEndEventBehavior.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js-behaviors/lib/camunda-cloud/CleanUpExecutionListenersBehavior.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js-behaviors/lib/camunda-cloud/CleanUpMessageRefBehavior.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js-behaviors/lib/camunda-cloud/CleanUpTaskListenersBehavior.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js-behaviors/lib/camunda-cloud/CleanUpSubscriptionBehavior.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js-behaviors/lib/camunda-cloud/util/TimerUtil.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js-behaviors/lib/camunda-cloud/CleanUpTimerExpressionBehavior.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js-behaviors/lib/camunda-cloud/CopyPasteBehavior.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js-behaviors/lib/util/ElementUtil.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js-behaviors/lib/camunda-cloud/CreateZeebeCallActivityBehavior.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js-behaviors/lib/camunda-cloud/util/CalledElementUtil.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js-behaviors/lib/camunda-cloud/CreateZeebeUserTaskBehavior.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js-behaviors/lib/util/IdsUtil.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js-behaviors/lib/camunda-cloud/util/FormsUtil.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js-behaviors/lib/camunda-cloud/FormsBehavior.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js-behaviors/lib/camunda-cloud/RemoveAssignmentDefinitionBehavior.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js-behaviors/lib/camunda-cloud/RemoveTaskScheduleBehavior.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js-behaviors/lib/camunda-cloud/util/InputOutputUtil.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js-behaviors/lib/camunda-cloud/CallActivityVariablesPropagationBehavior.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js-behaviors/lib/camunda-cloud/VersionTagBehavior.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js-behaviors/lib/camunda-cloud/index.js","webpack://camunda-modeler-client/../node_modules/@camunda/example-data-properties-provider/lib/util/jsonDataUtil.js","webpack://camunda-modeler-client/../node_modules/@camunda/example-data-properties-provider/lib/variableProvider/ExampleJsonProvider.js","webpack://camunda-modeler-client/../node_modules/@camunda/example-data-properties-provider/lib/variableProvider/index.js","webpack://camunda-modeler-client/../node_modules/@camunda/example-data-properties-provider/node_modules/min-dash/dist/index.esm.js","webpack://camunda-modeler-client/../node_modules/@camunda/example-data-properties-provider/lib/propertiesPanel/JSONDataProperty.js","webpack://camunda-modeler-client/../node_modules/@camunda/example-data-properties-provider/lib/propertiesPanel/DataPropertiesProvider.js","webpack://camunda-modeler-client/../node_modules/@camunda/example-data-properties-provider/lib/propertiesPanel/index.js","webpack://camunda-modeler-client/../node_modules/@camunda/example-data-properties-provider/lib/index.js","webpack://camunda-modeler-client/../node_modules/@bpmn-io/form-variable-provider/dist/index.es.js","webpack://camunda-modeler-client/../node_modules/@bpmn-io/element-template-chooser/dist/index.es.js","webpack://camunda-modeler-client/../node_modules/@bpmn-io/element-template-icon-renderer/node_modules/tiny-svg/dist/index.esm.js","webpack://camunda-modeler-client/../node_modules/@bpmn-io/element-template-icon-renderer/src/ElementTemplateIconRenderer.js","webpack://camunda-modeler-client/../node_modules/@bpmn-io/element-template-icon-renderer/src/util/index.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js/lib/camunda-cloud/util/commonModules.js","webpack://camunda-modeler-client/../node_modules/@bpmn-io/element-template-icon-renderer/src/index.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js/lib/camunda-cloud/features/popup-menu/CamundaDetailsPopupMenuProvider.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js/lib/camunda-cloud/features/popup-menu/index.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js/lib/camunda-cloud/features/external-resources/handlers/process/createElement.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js/lib/camunda-cloud/features/external-resources/handlers/process/searchTerms.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js/lib/camunda-cloud/features/external-resources/handlers/util/BaseCreateMenuProvider.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js/lib/camunda-cloud/features/external-resources/handlers/util/BaseAppendMenuProvider.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js/lib/camunda-cloud/features/external-resources/handlers/process/replaceElement.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js/lib/camunda-cloud/features/external-resources/handlers/util/BaseReplaceMenuProvider.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js/lib/camunda-cloud/features/external-resources/handlers/process/index.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js/lib/camunda-cloud/features/external-resources/handlers/process/CreateMenuProvider.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js/lib/camunda-cloud/features/external-resources/handlers/process/AppendMenuProvider.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js/lib/camunda-cloud/features/external-resources/handlers/process/ReplaceMenuProvider.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js/lib/camunda-cloud/features/external-resources/handlers/decision/createElement.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js/lib/camunda-cloud/features/external-resources/handlers/decision/searchTerms.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js/lib/camunda-cloud/features/external-resources/handlers/decision/replaceElement.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js/lib/camunda-cloud/features/external-resources/handlers/decision/index.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js/lib/camunda-cloud/features/external-resources/handlers/decision/CreateMenuProvider.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js/lib/camunda-cloud/features/external-resources/handlers/decision/AppendMenuProvider.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js/lib/camunda-cloud/features/external-resources/handlers/decision/ReplaceMenuProvider.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js/lib/camunda-cloud/features/external-resources/handlers/form/createElement.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js/lib/camunda-cloud/features/external-resources/handlers/form/searchTerms.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js/lib/camunda-cloud/features/external-resources/handlers/form/replaceElement.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js/lib/camunda-cloud/features/external-resources/handlers/form/index.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js/lib/camunda-cloud/features/external-resources/handlers/form/CreateMenuProvider.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js/lib/camunda-cloud/features/external-resources/handlers/form/AppendMenuProvider.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js/lib/camunda-cloud/features/external-resources/handlers/form/ReplaceMenuProvider.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js/lib/camunda-cloud/features/external-resources/handlers/rpa/constants.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js/lib/camunda-cloud/features/external-resources/handlers/rpa/createElement.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js/lib/camunda-cloud/features/external-resources/handlers/rpa/searchTerms.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js/lib/camunda-cloud/features/external-resources/handlers/rpa/replaceElement.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js/lib/camunda-cloud/features/external-resources/handlers/rpa/index.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js/lib/camunda-cloud/features/external-resources/handlers/rpa/CreateMenuProvider.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js/lib/camunda-cloud/features/external-resources/handlers/rpa/AppendMenuProvider.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js/lib/camunda-cloud/features/external-resources/handlers/rpa/ReplaceMenuProvider.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js/lib/camunda-cloud/features/external-resources/cmd/ComposedCommandHandler.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js/lib/camunda-cloud/features/external-resources/cmd/index.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js/lib/camunda-cloud/features/external-resources/index.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js/lib/camunda-cloud/Modeler.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js/lib/camunda-cloud/features/external-resources/ResourceLoader.js","webpack://camunda-modeler-client/../node_modules/camunda-bpmn-js/lib/camunda-cloud/features/external-resources/Resources.js"],"sourcesContent":["import {\n  getBusinessObject,\n  is\n} from 'bpmn-js/lib/util/ModelUtil';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport { without } from 'min-dash';\n\nimport { getExtensionElementsList } from '../util/ExtensionElementsUtil';\n\nconst HIGH_PRIORITY = 5000;\n\n/**\n * Zeebe BPMN behavior ensuring that bpmn:AdHocSubProcess is cleaned up\n * when zeebe:TaskDefinition is added or removed.\n */\nexport default class CleanUpAdHocSubProcessBehavior extends CommandInterceptor {\n  constructor(eventBus, modeling) {\n    super(eventBus);\n\n    /**\n     * Remove zeebe:AdHoc properties (zeebe:activeElementsCollection, zeebe:completionCondition)\n     * and remove bpmn:cancelRemainingInstances when zeebe:TaskDefinition is added.\n     */\n    this.postExecute('element.updateModdleProperties', HIGH_PRIORITY, function(context) {\n      const {\n        element,\n        moddleElement\n      } = context;\n\n      const businessObject = getBusinessObject(element);\n\n      if (\n        !is(businessObject, 'bpmn:AdHocSubProcess')\n        || !is(moddleElement, 'bpmn:ExtensionElements')\n        || !getTaskDefinition(element)\n      ) {\n        return;\n      }\n\n      modeling.updateModdleProperties(element, businessObject, {\n        cancelRemainingInstances: undefined,\n        completionCondition: undefined\n      });\n\n      const adHoc = getAdHoc(element);\n\n      if (adHoc) {\n        modeling.updateModdleProperties(element, adHoc, {\n          activeElementsCollection: undefined,\n        });\n      }\n    }, true);\n\n    /**\n     * Remove zeebe:TaskHeaders when zeebe:TaskDefinition is removed.\n     */\n    this.postExecute('element.updateModdleProperties', HIGH_PRIORITY, function(context) {\n      const {\n        element,\n        moddleElement\n      } = context;\n\n      if (\n        !is(element, 'bpmn:AdHocSubProcess')\n        || !is(moddleElement, 'bpmn:ExtensionElements')\n        || getTaskDefinition(element)\n      ) {\n        return;\n      }\n\n      const taskHeaders = getTaskHeaders(element);\n\n      if (taskHeaders) {\n        modeling.updateModdleProperties(element, moddleElement, {\n          values: without(moddleElement.get('values'), taskHeaders)\n        });\n      }\n    }, true);\n  }\n}\n\nCleanUpAdHocSubProcessBehavior.$inject = [\n  'eventBus',\n  'modeling'\n];\n\n\n// helpers //////////\n\nfunction getAdHoc(element) {\n  const businessObject = getBusinessObject(element);\n\n  return getExtensionElementsList(businessObject, 'zeebe:AdHoc')[ 0 ];\n}\n\nfunction getTaskHeaders(element) {\n  const businessObject = getBusinessObject(element);\n\n  return getExtensionElementsList(businessObject, 'zeebe:TaskHeaders')[ 0 ];\n}\n\nfunction getTaskDefinition(element) {\n  const businessObject = getBusinessObject(element);\n\n  return getExtensionElementsList(businessObject, 'zeebe:TaskDefinition')[ 0 ];\n}","import {\n  getBusinessObject,\n  is\n} from 'bpmn-js/lib/util/ModelUtil';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport { without } from 'min-dash';\n\nimport { getExtensionElementsList } from '../util/ExtensionElementsUtil';\n\nconst HIGH_PRIORITY = 5000;\n\n\n/**\n * Zeebe BPMN behavior ensuring that bpmn:BusinessRuleTask only has one of the following:\n *\n * (1) zeebe:CalledDecision\n * (2) zeebe:TaskDefinition and zeebe:TaskHeaders\n */\nexport default class CleanUpBusinessRuleTaskBehavior extends CommandInterceptor {\n  constructor(commandStack, eventBus) {\n    super(eventBus);\n\n    /**\n     * Remove zeebe:CalledDecision if zeebe:TaskDefinition is about to be added.\n     */\n    this.preExecute('element.updateModdleProperties' , HIGH_PRIORITY, function(context) {\n      const {\n        element,\n        moddleElement,\n        properties\n      } = context;\n\n      if (\n        !is(element, 'bpmn:BusinessRuleTask')\n        || !is(moddleElement, 'bpmn:ExtensionElements')\n        || !properties.values\n      ) {\n        return;\n      }\n\n      const calledDecision = getCalledDecision(element),\n            taskDefinition = getTaskDefinition(element);\n\n      if (\n        calledDecision\n        && !taskDefinition\n        && properties.values.find(value => is(value, 'zeebe:CalledDecision'))\n        && properties.values.find(value => is(value, 'zeebe:TaskDefinition'))\n      ) {\n        properties.values = without(properties.values, calledDecision);\n      }\n    }, true);\n\n    /**\n     * Remove zeebe:TaskDefinition and zeebe:TaskHeaders if zeebe:CalledDecision is about to be added.\n     */\n    this.preExecute('element.updateModdleProperties', HIGH_PRIORITY, function(context) {\n      const {\n        element,\n        moddleElement,\n        properties\n      } = context;\n\n      if (\n        !is(element, 'bpmn:BusinessRuleTask')\n        || !is(moddleElement, 'bpmn:ExtensionElements')\n        || !properties.values\n      ) {\n        return;\n      }\n\n      const calledDecision = getCalledDecision(element),\n            taskDefinition = getTaskDefinition(element),\n            taskHeaders = getTaskHeaders(element);\n\n      if (\n        !calledDecision\n        && (taskDefinition || taskHeaders)\n        && properties.values.find(value => is(value, 'zeebe:CalledDecision'))\n        && properties.values.find(value => is(value, 'zeebe:TaskDefinition') || is(value, 'zeebe:TaskHeaders'))\n      ) {\n        properties.values = without(properties.values, (value) => value === taskDefinition || value === taskHeaders);\n      }\n    }, true);\n\n  }\n}\n\nCleanUpBusinessRuleTaskBehavior.$inject = [\n  'commandStack',\n  'eventBus'\n];\n\n\n// helpers //////////\n\nfunction getCalledDecision(element) {\n  const businessObject = getBusinessObject(element);\n\n  return getExtensionElementsList(businessObject, 'zeebe:CalledDecision')[ 0 ];\n}\n\nfunction getTaskDefinition(element) {\n  const businessObject = getBusinessObject(element);\n\n  return getExtensionElementsList(businessObject, 'zeebe:TaskDefinition')[ 0 ];\n}\n\nfunction getTaskHeaders(element) {\n  const businessObject = getBusinessObject(element);\n\n  return getExtensionElementsList(businessObject, 'zeebe:TaskHeaders')[ 0 ];\n}","import { getBusinessObject, is } from 'bpmn-js/lib/util/ModelUtil';\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\nimport { find, without } from 'min-dash';\n\nexport default class CleanUpEndEventBehavior extends CommandInterceptor {\n  constructor(eventBus, modeling) {\n    super(eventBus);\n\n    this.postExecuted('shape.replace', function(event) {\n\n      const {\n        context\n      } = event;\n\n      const {\n        newShape\n      } = context;\n\n      if (!is(newShape, 'bpmn:EndEvent') || !getErrorEventDefinition(newShape)) {\n        return;\n      }\n\n      const ioMapping = getIoMapping(newShape);\n\n      if (!ioMapping) {\n        return;\n      }\n\n      const businessObject = getBusinessObject(newShape),\n            extensionElements = businessObject.get('extensionElements'),\n            values = without(extensionElements.get('values'), ioMapping);\n\n      modeling.updateModdleProperties(newShape, extensionElements, { values });\n    });\n  }\n}\n\nCleanUpEndEventBehavior.$inject = [\n  'eventBus',\n  'modeling'\n];\n\n// helpers //////////\n\nexport function getErrorEventDefinition(element) {\n  const businessObject = getBusinessObject(element);\n\n  const eventDefinitions = businessObject.get('eventDefinitions') || [];\n\n  return find(eventDefinitions, function(definition) {\n    return is(definition, 'bpmn:ErrorEventDefinition');\n  });\n}\n\nexport function getIoMapping(element) {\n  const bo = getBusinessObject(element);\n\n  const extensionElements = bo.get('extensionElements');\n\n  if (!extensionElements) {\n    return null;\n  }\n\n  const values = extensionElements.get('values');\n\n  if (!values) {\n    return null;\n  }\n\n  return find(values, value => is(value, 'zeebe:IoMapping'));\n}\n","import { getBusinessObject, is, isAny } from 'bpmn-js/lib/util/ModelUtil';\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\nimport { find, without } from 'min-dash';\n\nimport { getExtensionElementsList } from '../util/ExtensionElementsUtil';\n\nconst DISALLOWED_START_LISTENER_TYPES = [\n  'bpmn:StartEvent',\n  'bpmn:BoundaryEvent'\n];\n\nexport default class CleanUpExecutionListenersBehavior extends CommandInterceptor {\n  constructor(eventBus, modeling) {\n    super(eventBus);\n\n    // remove execution listeners of disallowed type\n    this.postExecuted('shape.replace', function(event) {\n      const element = event.context.newShape;\n\n      const executionListenersContainer = getExecutionListenersContainer(element);\n      if (!executionListenersContainer) {\n        return;\n      }\n\n      const listeners = executionListenersContainer.get('listeners');\n      const newListeners = withoutDisallowedListeners(element, listeners);\n\n      if (newListeners.length !== listeners.length) {\n        modeling.updateModdleProperties(element, executionListenersContainer, { listeners: newListeners });\n      }\n    });\n\n    // remove empty execution listener container\n    this.postExecuted('element.updateModdleProperties', function(event) {\n      const {\n        element,\n        moddleElement\n      } = event.context;\n\n      if (!is(moddleElement, 'zeebe:ExecutionListeners')) {\n        return;\n      }\n\n      const listeners = moddleElement.get('listeners');\n      if (listeners.length) {\n        return;\n      }\n\n      const extensionElements = moddleElement.$parent;\n      modeling.updateModdleProperties(element, extensionElements, { values: without(extensionElements.get('values'), moddleElement) });\n    });\n  }\n}\n\nCleanUpExecutionListenersBehavior.$inject = [\n  'eventBus',\n  'modeling'\n];\n\n// helpers //////////\nfunction withoutDisallowedListeners(element, listeners) {\n  listeners = withoutDisallowedStartListeners(element, listeners);\n  listeners = withoutDisallowedEndListeners(element, listeners);\n\n  return listeners;\n}\n\nfunction withoutDisallowedStartListeners(element, listeners) {\n  if (isAny(element, DISALLOWED_START_LISTENER_TYPES)) {\n    return listeners.filter(listener => listener.eventType !== 'start');\n  }\n\n  return listeners;\n}\n\nfunction withoutDisallowedEndListeners(element, listeners) {\n  if (shouldRemoveEndListeners(element)) {\n    return listeners.filter(listener => listener.eventType !== 'end');\n  }\n\n  return listeners;\n}\n\nfunction shouldRemoveEndListeners(element) {\n  if (\n    is(element, 'bpmn:BoundaryEvent') && isCompensationEvent(element) ||\n    is(element, 'bpmn:EndEvent') && isErrorEvent(element) ||\n    is(element, 'bpmn:Gateway')\n  ) {\n    return true;\n  }\n}\n\nfunction isCompensationEvent(element) {\n  const eventDefinitions = getEventDefinitions(element);\n\n  return find(eventDefinitions, function(definition) {\n    return is(definition, 'bpmn:CompensateEventDefinition');\n  });\n}\n\nfunction isErrorEvent(element) {\n  const eventDefinitions = getEventDefinitions(element);\n\n  return find(eventDefinitions, function(definition) {\n    return is(definition, 'bpmn:ErrorEventDefinition');\n  });\n}\n\nfunction getEventDefinitions(element) {\n  const businessObject = getBusinessObject(element);\n  return businessObject.get('eventDefinitions') || [];\n}\n\nfunction getExecutionListenersContainer(element) {\n  return getExtensionElementsList(element, 'zeebe:ExecutionListeners')[0];\n}\n","import { getBusinessObject, is } from 'bpmn-js/lib/util/ModelUtil';\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\n\nexport default class CleanUpMessageRefBehavior extends CommandInterceptor {\n  constructor(eventBus, modeling) {\n    super(eventBus, modeling);\n\n    this.postExecuted('shape.replace', function(event) {\n      const newShape = event.context.newShape;\n\n      if (!is(newShape, 'bpmn:ThrowEvent')) {\n        return;\n      }\n\n      const messageEventDefinition = getMessageEventDefinition(newShape);\n\n      if (!messageEventDefinition) {\n        return;\n      }\n\n      const messageRef = messageEventDefinition.get('messageRef');\n      if (!messageRef) {\n        return;\n      }\n\n      modeling.updateModdleProperties(newShape, messageEventDefinition, {\n        messageRef: undefined\n      });\n    });\n\n    this.postExecuted('shape.replace', function(event) {\n      const newShape = event.context.newShape,\n            bo = getBusinessObject(newShape);\n\n      if (!is(bo, 'bpmn:SendTask')) {\n        return;\n      }\n\n      const messageRef = bo.get('messageRef');\n      if (!messageRef) {\n        return;\n      }\n\n      modeling.updateProperties(newShape, {\n        messageRef: undefined\n      });\n    });\n  }\n}\n\nCleanUpMessageRefBehavior.$inject = [ 'eventBus', 'modeling' ];\n\n\n// helpers //////////\n\nfunction getMessageEventDefinition(element) {\n  const businessObject = getBusinessObject(element);\n\n  const eventDefinitions = businessObject.get('eventDefinitions') || [];\n\n  return eventDefinitions.find(definition => {\n    return is(definition, 'bpmn:MessageEventDefinition');\n  });\n}\n","import { is } from 'bpmn-js/lib/util/ModelUtil';\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\nimport { without } from 'min-dash';\n\nimport { getExtensionElementsList } from '../util/ExtensionElementsUtil';\n\n\nexport default class CleanUpTaskListenersBehavior extends CommandInterceptor {\n  constructor(eventBus, modeling) {\n    super(eventBus);\n\n    // remove task listeners of disallowed type on shape replace\n    this.postExecuted('shape.replace', function(event) {\n      const element = event.context.newShape;\n\n      updateListeners(element, modeling);\n    });\n\n    // remove task listeners of disallowed type on user task properties update\n    this.postExecuted('element.updateModdleProperties', function(event) {\n      const element = event.context.element;\n\n      if (!is(element, 'bpmn:UserTask')) {\n        return;\n      }\n\n      updateListeners(element, modeling);\n    });\n\n    // remove empty task listener container\n    this.postExecuted('element.updateModdleProperties', function(event) {\n      const {\n        element,\n        moddleElement\n      } = event.context;\n\n      if (!is(moddleElement, 'zeebe:TaskListeners')) {\n        return;\n      }\n\n      const listeners = moddleElement.get('listeners');\n      if (listeners.length) {\n        return;\n      }\n\n      const extensionElements = moddleElement.$parent;\n      modeling.updateModdleProperties(element, extensionElements, { values: without(extensionElements.get('values'), moddleElement) });\n    });\n  }\n}\n\nCleanUpTaskListenersBehavior.$inject = [\n  'eventBus',\n  'modeling'\n];\n\n// helpers //////////\nfunction updateListeners(element, modeling) {\n  const taskListenersContainer = getTaskListenersContainer(element);\n  if (!taskListenersContainer) {\n    return;\n  }\n\n  const listeners = taskListenersContainer.get('listeners');\n  const newListeners = withoutDisallowedListeners(element, listeners);\n\n  if (newListeners.length !== listeners.length) {\n    modeling.updateModdleProperties(element, taskListenersContainer, { listeners: newListeners });\n  }\n}\n\nfunction withoutDisallowedListeners(element, listeners) {\n  return listeners.filter(listener => {\n    if (\n      !is(element, 'bpmn:UserTask') ||\n      !hasZeebeTaskExtensionElement(element)\n    ) {\n      return false;\n    }\n    return true;\n  });\n}\n\nfunction getTaskListenersContainer(element) {\n  return getExtensionElementsList(element, 'zeebe:TaskListeners')[0];\n}\n\nfunction hasZeebeTaskExtensionElement(element) {\n  return getExtensionElementsList(element, 'zeebe:UserTask').length > 0;\n}\n","import {\n  getBusinessObject,\n  is\n} from 'bpmn-js/lib/util/ModelUtil';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport { getExtensionElementsList, removeExtensionElements } from '../util/ExtensionElementsUtil';\n\n/**\n * Zeebe BPMN behavior ensuring that zeebe:subscription is removed from bpmn:Message\n * when it has no properties anymore.\n */\nexport default class CleanUpSubscriptionBehavior extends CommandInterceptor {\n  constructor(eventBus, commandStack) {\n    super(eventBus);\n\n    this.postExecuted([\n      'element.updateProperties',\n      'element.updateModdleProperties'\n    ], context => {\n      const element = context.shape || context.newShape || context.element;\n\n      if (element.labelTarget) {\n        return;\n      }\n\n      if (!is(element, 'bpmn:Event')) {\n        return;\n      }\n\n      const messageEventDefinition = getMessageEventDefinition(element);\n\n      if (!messageEventDefinition) {\n        return;\n      }\n\n      const message = messageEventDefinition.get('messageRef');\n\n      if (!message) {\n        return;\n      }\n\n      const subscription = getSubscription(message);\n\n      if (!subscription) {\n        return;\n      }\n\n      if (!hasNoProperties(subscription)) {\n        return;\n      }\n\n      removeExtensionElements(element, message, subscription, commandStack);\n    }, true);\n  }\n}\n\nCleanUpSubscriptionBehavior.$inject = [\n  'eventBus',\n  'commandStack'\n];\n\n\n// helpers //////////\n\nfunction getMessageEventDefinition(event) {\n  const businessObject = getBusinessObject(event);\n\n  return businessObject.get('eventDefinitions').find(eventDefinition => {\n    return is(eventDefinition, 'bpmn:MessageEventDefinition');\n  });\n}\n\nfunction getSubscription(message) {\n  return getExtensionElementsList(message, 'zeebe:Subscription')[ 0 ];\n}\n\nfunction hasNoProperties(element) {\n  const descriptor = element.$descriptor;\n\n  return descriptor.properties.every(property => {\n    return element.get(property.name) === undefined;\n  });\n}\n","import {\n  getBusinessObject,\n  is,\n  isAny\n} from 'bpmn-js/lib/util/ModelUtil';\n\nexport const TIMER_PROPERTIES = [\n  'timeCycle',\n  'timeDate',\n  'timeDuration'\n];\n\nexport function getTimerEventDefinition(element) {\n  const businessObject = getBusinessObject(element);\n\n  return businessObject.get('eventDefinitions').find(eventDefinition => {\n    return is(eventDefinition, 'bpmn:TimerEventDefinition');\n  });\n}\n\n/**\n * Check whether a given timer expression type is supported for a given element.\n *\n * @param {string} type\n * @param {Element|ModdleElement} element\n *\n * @return {boolean}\n */\nexport function isTimerExpressionTypeSupported(type, element) {\n  const businessObject = getBusinessObject(element);\n\n  switch (type) {\n  case 'timeDate':\n    return isAny(element, [\n      'bpmn:BoundaryEvent',\n      'bpmn:IntermediateCatchEvent',\n      'bpmn:StartEvent'\n    ]);\n\n  case 'timeCycle':\n    if (is(element, 'bpmn:StartEvent') && (!hasParentEventSubProcess(businessObject)) || !isInterrupting(businessObject)) {\n      return true;\n    }\n\n    if (is(element, 'bpmn:BoundaryEvent') && !isInterrupting(businessObject)) {\n      return true;\n    }\n\n    return false;\n\n  case 'timeDuration':\n    if (isAny(element, [\n      'bpmn:BoundaryEvent',\n      'bpmn:IntermediateCatchEvent'\n    ])) {\n      return true;\n    }\n\n    if (is(element, 'bpmn:StartEvent') && hasParentEventSubProcess(businessObject)) {\n      return true;\n    }\n\n    return false;\n\n  default:\n    return false;\n  }\n}\n\nfunction isInterrupting(businessObject) {\n  if (is(businessObject, 'bpmn:BoundaryEvent')) {\n    return businessObject.get('cancelActivity') !== false;\n  }\n\n  return businessObject.get('isInterrupting') !== false;\n}\n\nfunction hasParentEventSubProcess(businessObject) {\n  const parent = businessObject.$parent;\n\n  return parent && is(parent, 'bpmn:SubProcess') && parent.get('triggeredByEvent');\n}","import {\n  is\n} from 'bpmn-js/lib/util/ModelUtil';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport {\n  getTimerEventDefinition,\n  isTimerExpressionTypeSupported,\n  TIMER_PROPERTIES\n} from './util/TimerUtil';\n\n/**\n * Zeebe BPMN behavior ensuring that bpmn:TimerEventDefinition has only allowed time properties of:\n * - timeCycle\n * - timeDate\n * - timeDuration\n */\nexport default class CleanUpTimerExpressionBehavior extends CommandInterceptor {\n  constructor(eventBus, modeling) {\n    super(eventBus);\n\n    this._modeling = modeling;\n\n    this.postExecuted([\n      'shape.move',\n      'shape.replace',\n      'shape.create',\n      'element.updateProperties',\n      'element.updateModdleProperties'\n    ], context => {\n      const element = context.shape || context.newShape || context.element;\n      this.cleanUpTimerProperties(element);\n    }, true);\n  }\n\n  /**\n  * Remove unsupported timer properties.\n  */\n  cleanUpTimerProperties(element) {\n\n    if (!is(element, 'bpmn:Event')) {\n      return;\n    }\n\n    const timerEventDefinition = getTimerEventDefinition(element);\n\n    if (!timerEventDefinition) {\n      return;\n    }\n\n    const propertiesUpdate = TIMER_PROPERTIES.reduce((acc, type) => {\n      if (timerEventDefinition.get(type) && !isTimerExpressionTypeSupported(type, element)) {\n        acc[type] = undefined;\n      }\n      return acc;\n    }, {});\n\n    if (Object.keys(propertiesUpdate).length) {\n      this._modeling.updateModdleProperties(element, timerEventDefinition, propertiesUpdate);\n    }\n  }\n}\n\nCleanUpTimerExpressionBehavior.$inject = [\n  'eventBus',\n  'modeling'\n];\n","import {\n  isObject,\n  some\n} from 'min-dash';\n\nimport { is } from 'bpmn-js/lib/util/ModelUtil';\n\nimport {\n  TIMER_PROPERTIES\n} from './util/TimerUtil';\n\nconst WILDCARD = '*';\n\nconst zeebeServiceTaskProperties = [\n  'zeebe:Input',\n  'zeebe:LoopCharacteristics',\n  'zeebe:TaskDefinition',\n  'zeebe:TaskHeaders',\n  'zeebe:Subscription'\n];\n\nexport default class ZeebeModdleExtension {\n  constructor(eventBus) {\n    eventBus.on('moddleCopy.canCopyProperty', (context) => {\n      const {\n        parent,\n        property,\n        propertyName\n      } = context;\n\n      return this.canCopyProperty(property, parent, propertyName);\n    });\n  }\n\n  canCopyProperty(property, parent, propertyName) {\n\n    // (1) check if property is allowed in parent\n    if (isObject(property) && !isAllowedInParent(property, parent)) {\n      return false;\n    }\n\n    // (2) check for specific scenarios\n    if (!this.canHostServiceTaskLikeProperties(property, parent)) {\n      return false;\n    }\n\n    if (!this.canHostTimerExpression(parent, propertyName)) {\n      return false;\n    }\n  }\n\n  canHostServiceTaskLikeProperties(property, parent) {\n    if (isAllowedInZeebeServiceTask(property)) {\n      const serviceTaskLike = getParent(parent, 'bpmn:IntermediateThrowEvent') || getParent(parent, 'bpmn:EndEvent');\n\n      if (serviceTaskLike) {\n        return isMessageEvent(serviceTaskLike);\n      }\n    }\n\n    return true;\n  }\n\n  canHostTimerExpression(parent, propertyName) {\n    if (!TIMER_PROPERTIES.includes(propertyName)) {\n      return true;\n    }\n\n    return is(parent, 'bpmn:TimerEventDefinition');\n  }\n}\n\nZeebeModdleExtension.$inject = [ 'eventBus' ];\n\n\n// helpers //////////\n\nfunction getParent(element, type) {\n  if (!type) {\n    return element.$parent;\n  }\n\n  if (is(element, type)) {\n    return element;\n  }\n\n  if (!element.$parent) {\n    return;\n  }\n\n  return getParent(element.$parent, type);\n}\n\nfunction isAllowedInParent(property, parent) {\n\n  // (1) find property descriptor\n  const descriptor = property.$type && property.$model.getTypeDescriptor(property.$type);\n\n  const allowedIn = descriptor && descriptor.meta && descriptor.meta.allowedIn;\n\n  if (!allowedIn || isWildcard(allowedIn)) {\n    return true;\n  }\n\n  // (2) check if property has parent of allowed type\n  return some(allowedIn, function(type) {\n    return getParent(parent, type);\n  });\n}\n\nfunction isWildcard(allowedIn) {\n  return allowedIn.indexOf(WILDCARD) !== -1;\n}\n\nfunction isMessageEvent(event) {\n  const eventDefinitions = event.get('eventDefinitions');\n\n  return eventDefinitions.some((eventDefinition) => {\n    return is(eventDefinition, 'bpmn:MessageEventDefinition');\n  });\n}\n\n// check if property is allowed in zeebe:ZeebeServiceTask but not for none events\nfunction isAllowedInZeebeServiceTask(property) {\n  return zeebeServiceTaskProperties.some((propertyType) => {\n    return is(property, propertyType);\n  });\n}","/**\n * Creates a new element and set the parent to it\n *\n * @method ElementHelper#createElement\n *\n * @param {String} elementType of the new element\n * @param {Object} properties of the new element in key-value pairs\n * @param {moddle.object} parent of the new element\n * @param {BpmnFactory} factory which creates the new element\n *\n * @returns {djs.model.Base} element which is created\n */\nexport function createElement(elementType, properties, parent, factory) {\n  var element = factory.create(elementType, properties);\n  element.$parent = parent;\n\n  return element;\n}\n","import { has } from 'min-dash';\n\nimport { createElement } from '../util/ElementUtil';\n\nimport { getCalledElement } from './util/CalledElementUtil';\n\nimport {\n  getBusinessObject,\n  is\n} from 'bpmn-js/lib/util/ModelUtil';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nconst HIGH_PRIORITY = 5000;\n\n\n/**\n * Zeebe BPMN specific behavior for creating call activities.\n */\nexport default class CreateZeebeCallActivityBehavior extends CommandInterceptor {\n  constructor(bpmnFactory, eventBus, modeling) {\n    super(eventBus);\n\n    /**\n     * Add zeebe:CalledElement extension element with zeebe:propagateAllChildVariables attribute = false\n     * when creating bpmn:CallActivity.\n     */\n    this.postExecuted('shape.create', HIGH_PRIORITY, function(context) {\n      const { shape } = context;\n\n      if (!is(shape, 'bpmn:CallActivity')) {\n        return;\n      }\n\n      const businessObject = getBusinessObject(shape);\n\n      let calledElement = getCalledElement(businessObject);\n\n      if (!calledElement) {\n        let extensionElements = businessObject.get('extensionElements');\n\n        if (!extensionElements) {\n          extensionElements = createElement(\n            'bpmn:ExtensionElements',\n            {\n              values: []\n            },\n            businessObject,\n            bpmnFactory\n          );\n\n          modeling.updateProperties(shape, { extensionElements });\n        }\n\n        calledElement = createElement(\n          'zeebe:CalledElement',\n          {\n            propagateAllChildVariables: false\n          },\n          extensionElements,\n          bpmnFactory\n        );\n\n        modeling.updateModdleProperties(shape, extensionElements, {\n          values: [\n            ...(extensionElements.values || []),\n            calledElement\n          ]\n        });\n      } else if (!has(calledElement, 'propagateAllChildVariables')) {\n\n        // set zeebe:propagateAllChildVariables to false if zeebe:CalledElement exists\n        modeling.updateModdleProperties(shape, calledElement, {\n          propagateAllChildVariables: false\n        });\n      }\n    }, true);\n\n  }\n}\n\nCreateZeebeCallActivityBehavior.$inject = [\n  'bpmnFactory',\n  'eventBus',\n  'modeling'\n];","import { has } from 'min-dash';\n\nimport { getOutputParameters } from './InputOutputUtil';\n\nimport { getExtensionElementsList } from '../../util/ExtensionElementsUtil';\n\nimport {\n  getBusinessObject,\n  is\n} from 'bpmn-js/lib/util/ModelUtil';\n\n\n/**\n * Get default value for zeebe:propagateAllChildVariables.\n *\n * @param {djs.model.Base|ModdleElement} element\n *\n * @returns {boolean}\n */\nfunction getPropagateAllChildVariablesDefault(element) {\n  if (!is(element, 'bpmn:CallActivity')) {\n    return false;\n  }\n\n  const outputParameters = getOutputParameters(element);\n\n  if (outputParameters) {\n    return !outputParameters.length;\n  }\n}\n\n/**\n * Get zeebe:CalledElement of an element.\n *\n * @param {djs.model.Base|ModdleElement} element\n *\n * @returns {ModdleElement}\n */\nexport function getCalledElement(element) {\n  const calledElements = getCalledElements(element);\n\n  return calledElements[ 0 ];\n}\n\nexport function getCalledElements(element) {\n  const businessObject = getBusinessObject(element);\n\n  return getExtensionElementsList(businessObject, 'zeebe:CalledElement');\n}\n\n/**\n * Check whether zeebe:propagateAllChildVariables is set on an element.\n * Fall back to default if zeebe:propagateAllChildVariables not set.\n *\n * @param {djs.model.Base|ModdleElement} element\n *\n * @returns {boolean}\n */\nexport function isPropagateAllChildVariables(element) {\n  if (!is(element, 'bpmn:CallActivity')) {\n    return false;\n  }\n\n  const businessObject = getBusinessObject(element),\n        calledElement = getCalledElement(businessObject);\n\n  if (calledElement && has(calledElement, 'propagateAllChildVariables')) {\n    return calledElement.get('propagateAllChildVariables') || false;\n  } else {\n    return getPropagateAllChildVariablesDefault(element);\n  }\n}\n","import { getBusinessObject, is } from 'bpmn-js/lib/util/ModelUtil';\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport { createElement } from '../util/ElementUtil';\nimport { getExtensionElementsList } from '../util/ExtensionElementsUtil';\n\nconst HIGH_PRIORITY = 5000;\n\n/**\n * Zeebe BPMN specific behavior for creating user tasks.\n */\nexport default class CreateZeebeUserTaskBehavior extends CommandInterceptor {\n  constructor(bpmnFactory, eventBus, modeling) {\n    super(eventBus);\n\n    /**\n     * Add zeebe:userTask extension element when creating bpmn:UserTask.\n     */\n    this.postExecuted(\n      [ 'shape.create', 'shape.replace' ],\n      HIGH_PRIORITY,\n      function(context) {\n        const shape = context.shape || context.newShape;\n        const explicitlyDisabled = context.hints && context.hints.createElementsBehavior === false;\n\n        if (!is(shape, 'bpmn:UserTask') || explicitlyDisabled) {\n          return;\n        }\n\n        let userTaskElement = getZeebeUserTask(shape);\n        if (userTaskElement) {\n          return;\n        }\n\n        const businessObject = getBusinessObject(shape);\n        let extensionElements = businessObject.get('extensionElements');\n\n        if (!extensionElements) {\n          extensionElements = createElement(\n            'bpmn:ExtensionElements',\n            {\n              values: [],\n            },\n            businessObject,\n            bpmnFactory\n          );\n\n          modeling.updateProperties(shape, { extensionElements });\n        }\n\n        userTaskElement = createElement(\n          'zeebe:UserTask',\n          {},\n          extensionElements,\n          bpmnFactory\n        );\n\n        modeling.updateModdleProperties(shape, extensionElements, {\n          values: [ ...(extensionElements.values || []), userTaskElement ],\n        });\n      },\n      true\n    );\n  }\n}\n\nCreateZeebeUserTaskBehavior.$inject = [ 'bpmnFactory', 'eventBus', 'modeling' ];\n\n/**\n * Get zeebe:userTask extension.\n *\n * @param {djs.model.Base|ModdleElement} element\n *\n * @returns {ModdleElement|null}\n */\nfunction getZeebeUserTask(element) {\n  const businessObject = getBusinessObject(element);\n  const userTaskElements = getExtensionElementsList(businessObject, 'zeebe:UserTask');\n\n  return userTaskElements[0] || null;\n}\n","import Ids from 'ids';\n\nconst ids = new Ids([ 32, 32, 1 ]);\n\n/**\n * Get ID with prefix.\n */\nexport function getPrefixedId(prefix) {\n  return ids.nextPrefixed(prefix);\n}\n","import {\n  getBusinessObject,\n  is\n} from 'bpmn-js/lib/util/ModelUtil';\n\nimport { getPrefixedId } from '../../util/IdsUtil';\n\nimport { getExtensionElementsList } from '../../util/ExtensionElementsUtil';\n\nconst FORM_KEY_PREFIX = 'camunda-forms:bpmn:',\n      USER_TASK_FORM_ID_PREFIX = 'UserTaskForm_';\n\nexport function getFormDefinition(element) {\n  const businessObject = getBusinessObject(element);\n\n  const formDefinitions = getExtensionElementsList(businessObject, 'zeebe:FormDefinition');\n\n  return formDefinitions[ 0 ];\n}\n\nexport function getUserTaskForm(element, options = {}) {\n  let {\n    formKey,\n    rootElement\n  } = options;\n\n  rootElement = rootElement || getRootElement(element);\n\n  if (!formKey) {\n    const formDefinition = getFormDefinition(element);\n\n    if (!formDefinition) {\n      return;\n    }\n\n    formKey = formDefinition.get('formKey');\n  }\n\n  const userTaskForms = getExtensionElementsList(rootElement, 'zeebe:UserTaskForm');\n\n  return userTaskForms.find(userTaskForm => {\n    return userTaskFormIdToFormKey(userTaskForm.get('id')) === formKey;\n  });\n}\n\nexport function userTaskFormIdToFormKey(userTaskFormId) {\n  return `${ FORM_KEY_PREFIX }${ userTaskFormId }`;\n}\n\nexport function formKeyToUserTaskFormId(formKey) {\n  return formKey.replace(FORM_KEY_PREFIX, '');\n}\n\nexport function isUserTaskFormKey(formKey) {\n  return formKey && formKey.startsWith(FORM_KEY_PREFIX);\n}\n\nexport function createUserTaskFormId() {\n  return getPrefixedId(USER_TASK_FORM_ID_PREFIX);\n}\n\nexport function getRootElement(element) {\n  const businessObject = getBusinessObject(element);\n\n  let parent = businessObject;\n\n  while (parent.$parent && !is(parent, 'bpmn:Process')) {\n    parent = parent.$parent;\n  }\n\n  return parent;\n}","import { isUndefined, without } from 'min-dash';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport { createElement } from '../util/ElementUtil';\nimport { getExtensionElementsList } from '../util/ExtensionElementsUtil';\n\nimport { is } from 'bpmn-js/lib/util/ModelUtil';\n\nimport {\n  createUserTaskFormId,\n  formKeyToUserTaskFormId,\n  getFormDefinition,\n  getRootElement,\n  getUserTaskForm,\n  isUserTaskFormKey,\n  userTaskFormIdToFormKey\n} from './util/FormsUtil';\n\n\n/**\n * Zeebe BPMN specific forms behavior.\n */\nexport default class FormsBehavior extends CommandInterceptor {\n  constructor(bpmnFactory, elementRegistry, eventBus, modeling) {\n    super(eventBus);\n\n    this._modeling = modeling;\n\n    function removeUserTaskForm(element, moddleElement, userTaskForm) {\n      const extensionElements = moddleElement.get('extensionElements');\n\n      const values = without(extensionElements.get('values'), userTaskForm);\n\n      modeling.updateModdleProperties(element, extensionElements, {\n        values\n      });\n\n      if (!values.length) {\n        modeling.updateModdleProperties(element, moddleElement, {\n          extensionElements: undefined\n        });\n      }\n    }\n\n    /**\n     * Remove zeebe:UserTaskForm on user task removed.\n     */\n    this.postExecute('shape.delete', function(context) {\n      const {\n        oldParent,\n        shape\n      } = context;\n\n      const rootElement = getRootElement(oldParent);\n\n      const userTaskForm = getUserTaskForm(shape, { rootElement });\n\n      if (!is(shape, 'bpmn:UserTask') || !userTaskForm) {\n        return;\n      }\n\n      removeUserTaskForm(shape, rootElement, userTaskForm);\n    }, true);\n\n\n    /**\n     * Create and reference new zeebe:UserTaskForm when user task is created\n     * that references existing zeebe:UserTaskForm that is already referenced by\n     * existing user task.\n     */\n    this.postExecute('shape.create', function(context) {\n      const { shape } = context;\n\n      if (!is(shape, 'bpmn:UserTask')) {\n        return;\n      }\n\n      const oldFormDefinition = getFormDefinition(shape);\n\n      if (!oldFormDefinition) {\n        return;\n      }\n\n      const oldUserTaskForm = getUserTaskForm(shape);\n\n      if (!oldUserTaskForm) {\n        return;\n      }\n\n      const isReferenced = elementRegistry.filter(element => {\n        if (element === shape) {\n          return false;\n        }\n\n        const formDefinition = getFormDefinition(element);\n\n        return formDefinition\n          && formDefinition.get('formKey')\n          && formKeyToUserTaskFormId(formDefinition.get('formKey')) === oldUserTaskForm.get('id');\n      });\n\n      if (!isReferenced.length) {\n        return;\n      }\n\n      const rootElement = getRootElement(shape);\n\n      let extensionElements = rootElement.get('extensionElements');\n\n      // (1) ensure extension elements exist\n      if (!extensionElements) {\n        extensionElements = createElement('bpmn:ExtensionElements', {\n          values: []\n        }, rootElement, bpmnFactory);\n\n        modeling.updateModdleProperties(shape, rootElement, {\n          extensionElements\n        });\n      }\n\n      // (2) create new user task form\n      const userTaskFormId = createUserTaskFormId();\n\n      const userTaskForm = createElement('zeebe:UserTaskForm', {\n        id: userTaskFormId,\n        body: oldUserTaskForm.get('body')\n      }, extensionElements, bpmnFactory);\n\n      modeling.updateModdleProperties(shape, extensionElements, {\n        values: [\n          ...(extensionElements.get('values') || []),\n          userTaskForm\n        ]\n      });\n\n      // (3) reference new user task form\n      modeling.updateModdleProperties(shape, oldFormDefinition, {\n        formKey: userTaskFormIdToFormKey(userTaskFormId)\n      });\n    }, true);\n\n\n    /**\n     * Ensure that a user task only has one of the following:\n     *\n     * 1. zeebe:FormDefinition with zeebe:formId (linked Camunda form)\n     * 2. zeebe:FormDefinition with zeebe:formKey in the format of camunda-forms:bpmn:UserTaskForm_1 (embedded Camunda form)\n     * 3. zeebe:FormDefinition with zeebe:formKey (custom form)\n     * 4. zeebe:FormDefinition with zeebe:externalReference (external form)\n     *\n     * Furthermore, ensure that:\n     *\n     * 1. zeebe:bindingType only exists if zeebe:formId is set (linked Camunda form)\n     */\n    this.preExecute('element.updateModdleProperties', function(context) {\n      const {\n        moddleElement,\n        properties\n      } = context;\n\n      if (is(moddleElement, 'zeebe:FormDefinition')) {\n        if ('formId' in properties) {\n          properties.formKey = undefined;\n          properties.externalReference = undefined;\n        } else if ('formKey' in properties) {\n          properties.formId = undefined;\n          properties.externalReference = undefined;\n          properties.bindingType = undefined;\n        } else if ('externalReference' in properties) {\n          properties.formId = undefined;\n          properties.formKey = undefined;\n          properties.bindingType = undefined;\n        }\n\n        if ('bindingType' in properties && !('formId' in properties) && !moddleElement.get('formId')) {\n          properties.externalReference = undefined;\n          properties.formId = '';\n          properties.formKey = undefined;\n        }\n      }\n    }, true);\n\n    /**\n     * Clean up user task form after form key or definition is removed. Clean up\n     * empty extension elements after form definition is removed.\n     */\n    this.postExecute('element.updateModdleProperties', function(context) {\n      const {\n        element,\n        moddleElement,\n        oldProperties\n      } = context;\n\n      if (is(moddleElement, 'zeebe:FormDefinition')) {\n        const formKey = moddleElement.get('formKey');\n\n        if (!formKey || !isUserTaskFormKey(formKey)) {\n          const userTaskForm = getUserTaskForm(element, { formKey: oldProperties.formKey });\n\n          if (userTaskForm) {\n            removeUserTaskForm(element, getRootElement(element), userTaskForm);\n          }\n        }\n      } else if (isExtensionElementRemoved(context, 'zeebe:FormDefinition')) {\n        const formDefinition = oldProperties.values.find(value => is(value, 'zeebe:FormDefinition'));\n\n        const userTaskForm = getUserTaskForm(element, { formKey: formDefinition.get('formKey') });\n\n        if (userTaskForm) {\n          removeUserTaskForm(element, getRootElement(element), userTaskForm);\n        }\n\n        if (!moddleElement.get('values').length) {\n          modeling.updateProperties(element, {\n            extensionElements: undefined\n          });\n        }\n      }\n    }, true);\n\n    this._registerZeebeUserTaskSupport();\n  }\n\n  _registerZeebeUserTaskSupport() {\n\n    /**\n     * Handle `formKey` for `zeebe:UserTask`.\n     * 1. Remove if embedded form is used.\n     * 2. Convert to externalReference if custom form key.\n     */\n    this.postExecute('element.updateModdleProperties', ({ element }) => {\n\n      if (!is(element, 'bpmn:UserTask') || !hasZeebeUserTask(element)) {\n        return;\n      }\n\n      const formDefinition = getFormDefinition(element);\n\n      if (!formDefinition) {\n        return;\n      }\n\n      const formKey = formDefinition.get('formKey');\n\n      if (isUndefined(formKey)) {\n        return;\n      }\n\n      if (isUserTaskFormKey(formKey)) {\n        this._modeling.updateModdleProperties(element, formDefinition, { formKey: undefined });\n      } else {\n        this._modeling.updateModdleProperties(element, formDefinition, {\n          externalReference: formKey\n        });\n      }\n    }, true);\n\n    /**\n     * Replace `externalReference` with `formKey` for non-`zeebe:UserTask`.\n     */\n    this.postExecute('element.updateModdleProperties', ({ element }) => {\n\n      if (!is(element, 'bpmn:UserTask') || hasZeebeUserTask(element)) {\n        return;\n      }\n\n      const formDefinition = getFormDefinition(element);\n\n      if (!formDefinition) {\n        return;\n      }\n\n      const externalReference = formDefinition.get('externalReference');\n\n      if (isUndefined(externalReference)) {\n        return;\n      }\n\n      this._modeling.updateModdleProperties(element, formDefinition, {\n        externalReference: undefined,\n        formKey: externalReference\n      });\n    }, true);\n  }\n}\n\nFormsBehavior.$inject = [\n  'bpmnFactory',\n  'elementRegistry',\n  'eventBus',\n  'modeling'\n];\n\nfunction isExtensionElementRemoved(context, type) {\n  const {\n    moddleElement,\n    oldProperties,\n    properties\n  } = context;\n\n  return is(moddleElement, 'bpmn:ExtensionElements')\n    && 'values' in oldProperties\n    && 'values' in properties\n    && oldProperties.values.find(value => is(value, type))\n    && !properties.values.find(value => is(value, type));\n}\n\nfunction hasZeebeUserTask(userTask) {\n  return getExtensionElementsList(userTask, 'zeebe:UserTask').length;\n}\n","import { is } from 'bpmn-js/lib/util/ModelUtil';\n\nimport { getBusinessObject } from 'bpmn-js/lib/util/ModelUtil';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport { isUndefined } from 'min-dash';\n\nimport { removeExtensionElements } from '../util/ExtensionElementsUtil';\n\nconst HIGH_PRIORITY = 5000;\n\n\n/**\n * Zeebe BPMN behavior removing zeebe:AssignmentDefinition elements without\n * zeebe:assignee, zeebe:candidateGroups or zeebe:candidateUsers.\n */\nexport default class RemoveAssignmentDefinitionBehavior extends CommandInterceptor {\n  constructor(commandStack, eventBus) {\n    super(eventBus);\n\n    this.postExecuted('element.updateModdleProperties' , HIGH_PRIORITY, function(context) {\n      const {\n        element,\n        moddleElement\n      } = context;\n\n      if (!is(moddleElement, 'zeebe:AssignmentDefinition')) {\n        return;\n      }\n\n      const assignmentDefinition = moddleElement;\n\n      if (\n        is(element, 'bpmn:UserTask')\n          && isUndefined(assignmentDefinition.get('zeebe:assignee'))\n          && isUndefined(assignmentDefinition.get('zeebe:candidateGroups'))\n          && isUndefined(assignmentDefinition.get('zeebe:candidateUsers'))\n      ) {\n        const businessObject = getBusinessObject(element);\n\n        removeExtensionElements(element, businessObject, assignmentDefinition, commandStack);\n      }\n    }, true);\n\n  }\n}\n\nRemoveAssignmentDefinitionBehavior.$inject = [\n  'commandStack',\n  'eventBus'\n];","import { is } from 'bpmn-js/lib/util/ModelUtil';\n\nimport { getBusinessObject } from 'bpmn-js/lib/util/ModelUtil';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport { isUndefined } from 'min-dash';\n\nimport { removeExtensionElements } from '../util/ExtensionElementsUtil';\n\nconst HIGH_PRIORITY = 5000;\n\n\n/**\n * Zeebe BPMN behavior removing zeebe:TaskSchedule elements without\n * zeebe:dueDate and zeebe:followUpDate.\n */\nexport default class RemoveTaskScheduleBehavior extends CommandInterceptor {\n  constructor(commandStack, eventBus) {\n    super(eventBus);\n\n    this.postExecuted('element.updateModdleProperties' , HIGH_PRIORITY, function(context) {\n      const {\n        element,\n        moddleElement\n      } = context;\n\n      if (!is(moddleElement, 'zeebe:TaskSchedule')) {\n        return;\n      }\n\n      const taskSchedule = moddleElement;\n\n      if (\n        is(element, 'bpmn:UserTask')\n          && isUndefined(taskSchedule.get('zeebe:dueDate'))\n          && isUndefined(taskSchedule.get('zeebe:followUpDate'))\n      ) {\n        const businessObject = getBusinessObject(element);\n\n        removeExtensionElements(element, businessObject, taskSchedule, commandStack);\n      }\n    }, true);\n\n  }\n}\n\nRemoveTaskScheduleBehavior.$inject = [\n  'commandStack',\n  'eventBus'\n];","import {\n  getBusinessObject,\n  is\n} from 'bpmn-js/lib/util/ModelUtil';\n\nimport { createElement } from '../../util/ElementUtil';\n\n/**\n * Get zeebe:IoMapping from an element.\n *\n * @param {djs.model.Base|ModdleElement} element\n *\n * @return {ModdleElement}\n */\nexport function getIoMapping(element) {\n  const businessObject = getBusinessObject(element);\n\n  const extensionElements = businessObject.get('extensionElements');\n\n  if (!extensionElements) {\n    return;\n  }\n\n  return extensionElements.get('values').find((value) => {\n    return is(value, 'zeebe:IoMapping');\n  });\n}\n\n/**\n * Get zeebe:InputParameters from an element.\n *\n * @param  {djs.model.Base|ModdleElement} element\n *\n * @return {Array<ModdleElement>}\n */\nexport function getInputParameters(element) {\n  const ioMapping = getIoMapping(element);\n\n  if (ioMapping) {\n    return ioMapping.get('zeebe:inputParameters');\n  }\n\n  return [];\n}\n\n/**\n * Get zeebe:OutputParameters from an element.\n *\n * @param  {djs.model.Base|ModdleElement} element\n *\n * @return {Array<ModdleElement>}\n */\nexport function getOutputParameters(element) {\n  const ioMapping = getIoMapping(element);\n\n  if (ioMapping) {\n    return ioMapping.get('zeebe:outputParameters');\n  }\n\n  return [];\n}\n\n/**\n * Get zeebe:Input at index.\n *\n * @param {djs.model.Base|ModdleElement} element\n * @param {number} index\n *\n * @return {ModdleElement}\n */\nexport function getInputParameter(element, index) {\n  return getInputParameters(element)[ index ];\n}\n\n/**\n * Get zeebe:Output at index.\n *\n * @param {djs.model.Base|ModdleElement} element\n * @param {number} index\n *\n * @return {ModdleElement}\n */\nexport function getOutputParameter(element, index) {\n  return getOutputParameters(element)[ index ];\n}\n\nexport function createIoMapping(parent, bpmnFactory, properties) {\n  return createElement('zeebe:IoMapping', properties, parent, bpmnFactory);\n}\n","import CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport { is } from 'bpmn-js/lib/util/ModelUtil';\n\nimport {\n  getOutputParameters,\n  getIoMapping\n} from './util/InputOutputUtil';\n\nconst HIGH_PRIORITY = 5000;\n\n/**\n * Zeebe BPMN behavior for updating <bpmn:CallActivity> elements\n * ensuring that:\n *\n * - `<zeebe:Output>` elements are removed if `zeebe:propagateAllChildVariables` is set to true\n */\nexport default class CallActivityVariablesPropagationBehavior extends CommandInterceptor {\n  constructor(eventBus, modeling) {\n    super(eventBus);\n\n    // Remove <zeebe:Output> elements if zeebe:propagateAllChildVariables is set to true.\n    this.postExecute('element.updateModdleProperties' , HIGH_PRIORITY, function(context) {\n      const {\n        element,\n        moddleElement,\n        properties = {}\n      } = context;\n\n      const propagateAllChildVariables =\n        properties.propagateAllChildVariables ||\n        properties[ 'zeebe:propagateAllChildVariables' ];\n\n      if (\n        !is(element, 'bpmn:CallActivity')\n        || !is(moddleElement, 'zeebe:CalledElement')\n        || !propagateAllChildVariables\n      ) {\n        return;\n      }\n\n      const outputParameters = getOutputParameters(element);\n\n      if (!outputParameters || !outputParameters.length) {\n        return;\n      }\n\n      const ioMapping = getIoMapping(element);\n\n      modeling.updateModdleProperties(element, ioMapping, {\n        'zeebe:outputParameters': []\n      });\n    }, true);\n  }\n}\n\nCallActivityVariablesPropagationBehavior.$inject = [\n  'eventBus',\n  'modeling'\n];","import { isDefined } from 'min-dash';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport {\n  getBusinessObject,\n  is,\n  isAny\n} from 'bpmn-js/lib/util/ModelUtil';\nimport { removeExtensionElements } from '../util/ExtensionElementsUtil';\n\n/**\n * Zeebe BPMN specific version tag behavior.\n */\nexport default class VersionTagBehavior extends CommandInterceptor {\n  constructor(eventBus, commandStack) {\n    super(eventBus);\n\n    /**\n     * Ensure that `zeebe:BindingTypeSupported` (`zeebe:CalledDecision`,\n     * `zeebe:CalledElement` and `zeebe:FormDefinition`) only has\n     * `zeebe:versionTag` if `zeebe:bindingType` is `versionTag`.\n     */\n    this.preExecute('element.updateModdleProperties', function(context) {\n      const {\n        moddleElement,\n        properties\n      } = context;\n\n      if (!isAny(moddleElement, [\n        'zeebe:CalledDecision',\n        'zeebe:CalledElement',\n        'zeebe:FormDefinition'\n      ])) {\n        return;\n      }\n\n      // unset `zeebe:versionTag` if `zeebe:bindingType` is not set to `versionTag`\n      if ('bindingType' in properties\n        && properties.bindingType !== 'versionTag'\n        && isDefined(moddleElement.get('versionTag'))) {\n        properties.versionTag = undefined;\n      }\n\n      // set `zeebe:bindingType` to `versionTag` if `zeebe:versionTag` is set\n      if (isDefined(properties.versionTag) && moddleElement.get('bindingType') !== 'versionTag') {\n        properties.bindingType = 'versionTag';\n      }\n    }, true);\n\n    /**\n     * Remove `zeebe:VersionTag` if its value is empty.\n     */\n    this.postExecuted('element.updateModdleProperties', function(context) {\n      const {\n        element,\n        moddleElement\n      } = context;\n\n      if (!is(moddleElement, 'zeebe:VersionTag')) {\n        return;\n      }\n\n      let businessObject = getBusinessObject(element);\n\n      if (is(element, 'bpmn:Participant')) {\n        businessObject = businessObject.get('processRef');\n      }\n\n      if (isEmpty(moddleElement.get('value'))) {\n        removeExtensionElements(element, businessObject, moddleElement, commandStack);\n      }\n    }, true);\n  }\n}\n\nVersionTagBehavior.$inject = [\n  'eventBus',\n  'commandStack'\n];\n\n// helpers //////////\n\nfunction isEmpty(value) {\n  return value == undefined || value === '';\n}","import CleanUpAdHocSubProcessBehavior from './CleanUpAdHocSubProcessBehavior';\nimport CleanUpBusinessRuleTaskBehavior from './CleanUpBusinessRuleTaskBehavior';\nimport CleanUpEndEventBehavior from './CleanUpEndEventBehavior';\nimport CleanUpExecutionListenersBehavior from './CleanUpExecutionListenersBehavior';\nimport CleanUpMessageRefBehavior from './CleanUpMessageRefBehavior';\nimport CleanUpTaskListenersBehavior from './CleanUpTaskListenersBehavior';\nimport CleanUpSubscriptionBehavior from './CleanUpSubscriptionBehavior';\nimport CleanUpTimerExpressionBehavior from './CleanUpTimerExpressionBehavior';\nimport CopyPasteBehavior from './CopyPasteBehavior';\nimport CreateZeebeCallActivityBehavior from './CreateZeebeCallActivityBehavior';\nimport CreateZeebeUserTaskBehavior from './CreateZeebeUserTaskBehavior';\nimport DeleteParticipantBehaviour from '../shared/DeleteParticipantBehaviour';\nimport FormsBehavior from './FormsBehavior';\nimport RemoveAssignmentDefinitionBehavior from './RemoveAssignmentDefinitionBehavior';\nimport RemoveTaskScheduleBehavior from './RemoveTaskScheduleBehavior';\nimport CallActivityVariablesPropagationBehavior from './CallActivityVariablesPropagationBehavior';\nimport VersionTagBehavior from './VersionTagBehavior';\n\nexport default {\n  __init__: [\n    'callActivityVariablesPropagationBehavior',\n    'cleanUpAdHocSubProcessBehavior',\n    'cleanUpBusinessRuleTaskBehavior',\n    'cleanUpEndEventBehavior',\n    'cleanUpExecutionListenersBehavior',\n    'cleanUpMessageRefBehavior',\n    'cleanUpTaskListenersBehavior',\n    'cleanUpSubscriptionBehavior',\n    'cleanUpTimerExpressionBehavior',\n    'copyPasteBehavior',\n    'createZeebeCallActivityBehavior',\n    'createZeebeUserTaskBehavior',\n    'deleteParticipantBehaviour',\n    'formsBehavior',\n    'removeAssignmentDefinitionBehavior',\n    'removeTaskScheduleBehavior',\n    'versionTagBehavior'\n  ],\n  callActivityVariablesPropagationBehavior: [ 'type', CallActivityVariablesPropagationBehavior ],\n  cleanUpAdHocSubProcessBehavior: [ 'type', CleanUpAdHocSubProcessBehavior ],\n  cleanUpBusinessRuleTaskBehavior: [ 'type', CleanUpBusinessRuleTaskBehavior ],\n  cleanUpEndEventBehavior: [ 'type', CleanUpEndEventBehavior ],\n  cleanUpExecutionListenersBehavior: [ 'type', CleanUpExecutionListenersBehavior ],\n  cleanUpMessageRefBehavior: [ 'type', CleanUpMessageRefBehavior ],\n  cleanUpTaskListenersBehavior: [ 'type', CleanUpTaskListenersBehavior ],\n  cleanUpSubscriptionBehavior: [ 'type', CleanUpSubscriptionBehavior ],\n  cleanUpTimerExpressionBehavior: [ 'type', CleanUpTimerExpressionBehavior ],\n  copyPasteBehavior: [ 'type', CopyPasteBehavior ],\n  createZeebeCallActivityBehavior: [ 'type', CreateZeebeCallActivityBehavior ],\n  createZeebeUserTaskBehavior: [ 'type', CreateZeebeUserTaskBehavior ],\n  deleteParticipantBehaviour: [ 'type', DeleteParticipantBehaviour ],\n  formsBehavior: [ 'type', FormsBehavior ],\n  removeAssignmentDefinitionBehavior: [ 'type', RemoveAssignmentDefinitionBehavior ],\n  removeTaskScheduleBehavior: [ 'type', RemoveTaskScheduleBehavior ],\n  versionTagBehavior: [ 'type', VersionTagBehavior ]\n};\n","import { getBusinessObject, is } from 'bpmn-js/lib/util/ModelUtil';\n\nexport const EXAMPLE_JSON_PROPERTY_NAME = 'camundaModeler:exampleOutputJson';\n\n/**\n * Returns the example JSON data from the zeebe:Properties extension element\n *\n * @param {Element} element\n * @returns {String|undefined} value\n */\nexport function getExampleJson(element) {\n  const property = getZeebeProperty(element, EXAMPLE_JSON_PROPERTY_NAME);\n\n  if (property) {\n    return property.get('value');\n  }\n}\n\nexport function getZeebeProperty(element, name) {\n  const allProperties = getExtensionElements(element, 'zeebe:Properties');\n\n  if (allProperties.length === 0) {\n    return;\n  }\n\n  const properties = allProperties[0].get('properties');\n\n  return properties.find(p => p.get('name') === name);\n}\n\nfunction getExtensionElements(element, type) {\n  const bo = getBusinessObject(element);\n\n  let elements = [];\n  const extensionElements = bo.get('extensionElements');\n\n  if (typeof extensionElements !== 'undefined') {\n    const extensionValues = extensionElements.get('values');\n\n    if (typeof extensionValues !== 'undefined') {\n      elements = extensionValues.filter(e => is(e, type));\n    }\n  }\n\n  return elements;\n}","import VariableProvider from '@bpmn-io/variable-resolver/lib/VariableProvider';\nimport { getExampleJson } from '../util/jsonDataUtil';\n\n/**\n * Variable Provider that parses example JSON from a specific Zeebe property\n */\nexport class ExampleJsonProvider extends VariableProvider {\n  getVariables(element) {\n    const data = getExampleJson(element);\n\n    if (!data) {\n      return;\n    }\n\n    const parsedData = getVariablesFromString(data);\n    return parsedData;\n  }\n}\n\n/**\n * Translates a JSON string into a list of variables. Returns an empty list if the\n * JSON string is not parseable.\n *\n * @param {String} data the JSON string to parse\n * @returns {Array} variables\n */\nfunction getVariablesFromString(data) {\n  try {\n    const parsed = JSON.parse(data);\n    const variables = toInternalFormat(parsed);\n\n    return variables;\n  } catch (e) {\n\n    // Malformed JSON\n    return [];\n  }\n}\n\n\n/**\n * Transforms example data into the internal format, annotating with type and example\n * value.\n *\n * @param {Object} data\n */\nfunction toInternalFormat(data = {}) {\n  if (typeof data !== 'object' || data === null) {\n    return;\n  }\n\n  return Object.keys(data).map(key => {\n    let value = data[key];\n\n    const newElement = {\n      name: key,\n      info: JSON.stringify(value, null, 2)\n    };\n\n    if (Array.isArray(value)) {\n      newElement.isList = true;\n      newElement.type = 'List';\n\n      if (value.length > 0) {\n        newElement.entries = toInternalFormat(value[0]);\n      }\n      return newElement;\n    }\n\n    newElement.type = getType(value);\n    newElement.entries = toInternalFormat(value);\n\n    return newElement;\n  });\n}\n\nfunction getType(value) {\n\n  if (value === null) {\n    return '';\n  }\n\n  const type = typeof value;\n\n  if (type === 'object') {\n    return 'Context';\n  }\n\n  return capitalize(type);\n}\n\n\nfunction capitalize(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}","import { ExampleJsonProvider } from './ExampleJsonProvider';\n\nexport default {\n  __init__: [\n    'exampleProvider',\n  ],\n  exampleProvider: [ 'type', ExampleJsonProvider ],\n};\n","/**\n * Flatten array, one level deep.\n *\n * @template T\n *\n * @param {T[][] | T[] | null} [arr]\n *\n * @return {T[]}\n */\nfunction flatten(arr) {\n  return Array.prototype.concat.apply([], arr);\n}\n\nconst nativeToString = Object.prototype.toString;\nconst nativeHasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction isUndefined(obj) {\n  return obj === undefined;\n}\n\nfunction isDefined(obj) {\n  return obj !== undefined;\n}\n\nfunction isNil(obj) {\n  return obj == null;\n}\n\nfunction isArray(obj) {\n  return nativeToString.call(obj) === '[object Array]';\n}\n\nfunction isObject(obj) {\n  return nativeToString.call(obj) === '[object Object]';\n}\n\nfunction isNumber(obj) {\n  return nativeToString.call(obj) === '[object Number]';\n}\n\n/**\n * @param {any} obj\n *\n * @return {boolean}\n */\nfunction isFunction(obj) {\n  const tag = nativeToString.call(obj);\n\n  return (\n    tag === '[object Function]' ||\n    tag === '[object AsyncFunction]' ||\n    tag === '[object GeneratorFunction]' ||\n    tag === '[object AsyncGeneratorFunction]' ||\n    tag === '[object Proxy]'\n  );\n}\n\nfunction isString(obj) {\n  return nativeToString.call(obj) === '[object String]';\n}\n\n\n/**\n * Ensure collection is an array.\n *\n * @param {Object} obj\n */\nfunction ensureArray(obj) {\n\n  if (isArray(obj)) {\n    return;\n  }\n\n  throw new Error('must supply array');\n}\n\n/**\n * Return true, if target owns a property with the given key.\n *\n * @param {Object} target\n * @param {String} key\n *\n * @return {Boolean}\n */\nfunction has(target, key) {\n  return nativeHasOwnProperty.call(target, key);\n}\n\n/**\n * @template T\n * @typedef { (\n *   ((e: T) => boolean) |\n *   ((e: T, idx: number) => boolean) |\n *   ((e: T, key: string) => boolean) |\n *   string |\n *   number\n * ) } Matcher\n */\n\n/**\n * @template T\n * @template U\n *\n * @typedef { (\n *   ((e: T) => U) | string | number\n * ) } Extractor\n */\n\n\n/**\n * @template T\n * @typedef { (val: T, key: any) => boolean } MatchFn\n */\n\n/**\n * @template T\n * @typedef { T[] } ArrayCollection\n */\n\n/**\n * @template T\n * @typedef { { [key: string]: T } } StringKeyValueCollection\n */\n\n/**\n * @template T\n * @typedef { { [key: number]: T } } NumberKeyValueCollection\n */\n\n/**\n * @template T\n * @typedef { StringKeyValueCollection<T> | NumberKeyValueCollection<T> } KeyValueCollection\n */\n\n/**\n * @template T\n * @typedef { KeyValueCollection<T> | ArrayCollection<T> } Collection\n */\n\n/**\n * Find element in collection.\n *\n * @template T\n * @param {Collection<T>} collection\n * @param {Matcher<T>} matcher\n *\n * @return {Object}\n */\nfunction find(collection, matcher) {\n\n  const matchFn = toMatcher(matcher);\n\n  let match;\n\n  forEach(collection, function(val, key) {\n    if (matchFn(val, key)) {\n      match = val;\n\n      return false;\n    }\n  });\n\n  return match;\n\n}\n\n\n/**\n * Find element index in collection.\n *\n * @template T\n * @param {Collection<T>} collection\n * @param {Matcher<T>} matcher\n *\n * @return {number}\n */\nfunction findIndex(collection, matcher) {\n\n  const matchFn = toMatcher(matcher);\n\n  let idx = isArray(collection) ? -1 : undefined;\n\n  forEach(collection, function(val, key) {\n    if (matchFn(val, key)) {\n      idx = key;\n\n      return false;\n    }\n  });\n\n  return idx;\n}\n\n\n/**\n * Filter elements in collection.\n *\n * @template T\n * @param {Collection<T>} collection\n * @param {Matcher<T>} matcher\n *\n * @return {T[]} result\n */\nfunction filter(collection, matcher) {\n\n  const matchFn = toMatcher(matcher);\n\n  let result = [];\n\n  forEach(collection, function(val, key) {\n    if (matchFn(val, key)) {\n      result.push(val);\n    }\n  });\n\n  return result;\n}\n\n\n/**\n * Iterate over collection; returning something\n * (non-undefined) will stop iteration.\n *\n * @template T\n * @param {Collection<T>} collection\n * @param { ((item: T, idx: number) => (boolean|void)) | ((item: T, key: string) => (boolean|void)) } iterator\n *\n * @return {T} return result that stopped the iteration\n */\nfunction forEach(collection, iterator) {\n\n  let val,\n      result;\n\n  if (isUndefined(collection)) {\n    return;\n  }\n\n  const convertKey = isArray(collection) ? toNum : identity;\n\n  for (let key in collection) {\n\n    if (has(collection, key)) {\n      val = collection[key];\n\n      result = iterator(val, convertKey(key));\n\n      if (result === false) {\n        return val;\n      }\n    }\n  }\n}\n\n/**\n * Return collection without element.\n *\n * @template T\n * @param {ArrayCollection<T>} arr\n * @param {Matcher<T>} matcher\n *\n * @return {T[]}\n */\nfunction without(arr, matcher) {\n\n  if (isUndefined(arr)) {\n    return [];\n  }\n\n  ensureArray(arr);\n\n  const matchFn = toMatcher(matcher);\n\n  return arr.filter(function(el, idx) {\n    return !matchFn(el, idx);\n  });\n\n}\n\n\n/**\n * Reduce collection, returning a single result.\n *\n * @template T\n * @template V\n *\n * @param {Collection<T>} collection\n * @param {(result: V, entry: T, index: any) => V} iterator\n * @param {V} result\n *\n * @return {V} result returned from last iterator\n */\nfunction reduce(collection, iterator, result) {\n\n  forEach(collection, function(value, idx) {\n    result = iterator(result, value, idx);\n  });\n\n  return result;\n}\n\n\n/**\n * Return true if every element in the collection\n * matches the criteria.\n *\n * @param  {Object|Array} collection\n * @param  {Function} matcher\n *\n * @return {Boolean}\n */\nfunction every(collection, matcher) {\n\n  return !!reduce(collection, function(matches, val, key) {\n    return matches && matcher(val, key);\n  }, true);\n}\n\n\n/**\n * Return true if some elements in the collection\n * match the criteria.\n *\n * @param  {Object|Array} collection\n * @param  {Function} matcher\n *\n * @return {Boolean}\n */\nfunction some(collection, matcher) {\n\n  return !!find(collection, matcher);\n}\n\n\n/**\n * Transform a collection into another collection\n * by piping each member through the given fn.\n *\n * @param  {Object|Array}   collection\n * @param  {Function} fn\n *\n * @return {Array} transformed collection\n */\nfunction map(collection, fn) {\n\n  let result = [];\n\n  forEach(collection, function(val, key) {\n    result.push(fn(val, key));\n  });\n\n  return result;\n}\n\n\n/**\n * Get the collections keys.\n *\n * @param  {Object|Array} collection\n *\n * @return {Array}\n */\nfunction keys(collection) {\n  return collection && Object.keys(collection) || [];\n}\n\n\n/**\n * Shorthand for `keys(o).length`.\n *\n * @param  {Object|Array} collection\n *\n * @return {Number}\n */\nfunction size(collection) {\n  return keys(collection).length;\n}\n\n\n/**\n * Get the values in the collection.\n *\n * @param  {Object|Array} collection\n *\n * @return {Array}\n */\nfunction values(collection) {\n  return map(collection, (val) => val);\n}\n\n\n/**\n * Group collection members by attribute.\n *\n * @param {Object|Array} collection\n * @param {Extractor} extractor\n *\n * @return {Object} map with { attrValue => [ a, b, c ] }\n */\nfunction groupBy(collection, extractor, grouped = {}) {\n\n  extractor = toExtractor(extractor);\n\n  forEach(collection, function(val) {\n    let discriminator = extractor(val) || '_';\n\n    let group = grouped[discriminator];\n\n    if (!group) {\n      group = grouped[discriminator] = [];\n    }\n\n    group.push(val);\n  });\n\n  return grouped;\n}\n\n\nfunction uniqueBy(extractor, ...collections) {\n\n  extractor = toExtractor(extractor);\n\n  let grouped = {};\n\n  forEach(collections, (c) => groupBy(c, extractor, grouped));\n\n  let result = map(grouped, function(val, key) {\n    return val[0];\n  });\n\n  return result;\n}\n\n\nconst unionBy = uniqueBy;\n\n\n\n/**\n * Sort collection by criteria.\n *\n * @template T\n *\n * @param {Collection<T>} collection\n * @param {Extractor<T, number | string>} extractor\n *\n * @return {Array}\n */\nfunction sortBy(collection, extractor) {\n\n  extractor = toExtractor(extractor);\n\n  let sorted = [];\n\n  forEach(collection, function(value, key) {\n    let disc = extractor(value, key);\n\n    let entry = {\n      d: disc,\n      v: value\n    };\n\n    for (var idx = 0; idx < sorted.length; idx++) {\n      let { d } = sorted[idx];\n\n      if (disc < d) {\n        sorted.splice(idx, 0, entry);\n        return;\n      }\n    }\n\n    // not inserted, append (!)\n    sorted.push(entry);\n  });\n\n  return map(sorted, (e) => e.v);\n}\n\n\n/**\n * Create an object pattern matcher.\n *\n * @example\n *\n * ```javascript\n * const matcher = matchPattern({ id: 1 });\n *\n * let element = find(elements, matcher);\n * ```\n *\n * @template T\n *\n * @param {T} pattern\n *\n * @return { (el: any) =>  boolean } matcherFn\n */\nfunction matchPattern(pattern) {\n\n  return function(el) {\n\n    return every(pattern, function(val, key) {\n      return el[key] === val;\n    });\n\n  };\n}\n\n\n/**\n * @param {string | ((e: any) => any) } extractor\n *\n * @return { (e: any) => any }\n */\nfunction toExtractor(extractor) {\n\n  /**\n   * @satisfies { (e: any) => any }\n   */\n  return isFunction(extractor) ? extractor : (e) => {\n\n    // @ts-ignore: just works\n    return e[extractor];\n  };\n}\n\n\n/**\n * @template T\n * @param {Matcher<T>} matcher\n *\n * @return {MatchFn<T>}\n */\nfunction toMatcher(matcher) {\n  return isFunction(matcher) ? matcher : (e) => {\n    return e === matcher;\n  };\n}\n\n\nfunction identity(arg) {\n  return arg;\n}\n\nfunction toNum(arg) {\n  return Number(arg);\n}\n\n/* global setTimeout clearTimeout */\n\n/**\n * @typedef { {\n *   (...args: any[]): any;\n *   flush: () => void;\n *   cancel: () => void;\n * } } DebouncedFunction\n */\n\n/**\n * Debounce fn, calling it only once if the given time\n * elapsed between calls.\n *\n * Lodash-style the function exposes methods to `#clear`\n * and `#flush` to control internal behavior.\n *\n * @param  {Function} fn\n * @param  {Number} timeout\n *\n * @return {DebouncedFunction} debounced function\n */\nfunction debounce(fn, timeout) {\n\n  let timer;\n\n  let lastArgs;\n  let lastThis;\n\n  let lastNow;\n\n  function fire(force) {\n\n    let now = Date.now();\n\n    let scheduledDiff = force ? 0 : (lastNow + timeout) - now;\n\n    if (scheduledDiff > 0) {\n      return schedule(scheduledDiff);\n    }\n\n    fn.apply(lastThis, lastArgs);\n\n    clear();\n  }\n\n  function schedule(timeout) {\n    timer = setTimeout(fire, timeout);\n  }\n\n  function clear() {\n    if (timer) {\n      clearTimeout(timer);\n    }\n\n    timer = lastNow = lastArgs = lastThis = undefined;\n  }\n\n  function flush() {\n    if (timer) {\n      fire(true);\n    }\n\n    clear();\n  }\n\n  /**\n   * @type { DebouncedFunction }\n   */\n  function callback(...args) {\n    lastNow = Date.now();\n\n    lastArgs = args;\n    lastThis = this;\n\n    // ensure an execution is scheduled\n    if (!timer) {\n      schedule(timeout);\n    }\n  }\n\n  callback.flush = flush;\n  callback.cancel = clear;\n\n  return callback;\n}\n\n/**\n * Throttle fn, calling at most once\n * in the given interval.\n *\n * @param  {Function} fn\n * @param  {Number} interval\n *\n * @return {Function} throttled function\n */\nfunction throttle(fn, interval) {\n  let throttling = false;\n\n  return function(...args) {\n\n    if (throttling) {\n      return;\n    }\n\n    fn(...args);\n    throttling = true;\n\n    setTimeout(() => {\n      throttling = false;\n    }, interval);\n  };\n}\n\n/**\n * Bind function against target <this>.\n *\n * @param  {Function} fn\n * @param  {Object}   target\n *\n * @return {Function} bound function\n */\nfunction bind(fn, target) {\n  return fn.bind(target);\n}\n\n/**\n * Convenience wrapper for `Object.assign`.\n *\n * @param {Object} target\n * @param {...Object} others\n *\n * @return {Object} the target\n */\nfunction assign(target, ...others) {\n  return Object.assign(target, ...others);\n}\n\n/**\n * Sets a nested property of a given object to the specified value.\n *\n * This mutates the object and returns it.\n *\n * @template T\n *\n * @param {T} target The target of the set operation.\n * @param {(string|number)[]} path The path to the nested value.\n * @param {any} value The value to set.\n *\n * @return {T}\n */\nfunction set(target, path, value) {\n\n  let currentTarget = target;\n\n  forEach(path, function(key, idx) {\n\n    if (typeof key !== 'number' && typeof key !== 'string') {\n      throw new Error('illegal key type: ' + typeof key + '. Key should be of type number or string.');\n    }\n\n    if (key === 'constructor') {\n      throw new Error('illegal key: constructor');\n    }\n\n    if (key === '__proto__') {\n      throw new Error('illegal key: __proto__');\n    }\n\n    let nextKey = path[idx + 1];\n    let nextTarget = currentTarget[key];\n\n    if (isDefined(nextKey) && isNil(nextTarget)) {\n      nextTarget = currentTarget[key] = isNaN(+nextKey) ? {} : [];\n    }\n\n    if (isUndefined(nextKey)) {\n      if (isUndefined(value)) {\n        delete currentTarget[key];\n      } else {\n        currentTarget[key] = value;\n      }\n    } else {\n      currentTarget = nextTarget;\n    }\n  });\n\n  return target;\n}\n\n\n/**\n * Gets a nested property of a given object.\n *\n * @param {Object} target The target of the get operation.\n * @param {(string|number)[]} path The path to the nested value.\n * @param {any} [defaultValue] The value to return if no value exists.\n *\n * @return {any}\n */\nfunction get(target, path, defaultValue) {\n\n  let currentTarget = target;\n\n  forEach(path, function(key) {\n\n    // accessing nil property yields <undefined>\n    if (isNil(currentTarget)) {\n      currentTarget = undefined;\n\n      return false;\n    }\n\n    currentTarget = currentTarget[key];\n  });\n\n  return isUndefined(currentTarget) ? defaultValue : currentTarget;\n}\n\n/**\n * Pick properties from the given target.\n *\n * @template T\n * @template {any[]} V\n *\n * @param {T} target\n * @param {V} properties\n *\n * @return Pick<T, V>\n */\nfunction pick(target, properties) {\n\n  let result = {};\n\n  let obj = Object(target);\n\n  forEach(properties, function(prop) {\n\n    if (prop in obj) {\n      result[prop] = target[prop];\n    }\n  });\n\n  return result;\n}\n\n/**\n * Pick all target properties, excluding the given ones.\n *\n * @template T\n * @template {any[]} V\n *\n * @param {T} target\n * @param {V} properties\n *\n * @return {Omit<T, V>} target\n */\nfunction omit(target, properties) {\n\n  let result = {};\n\n  let obj = Object(target);\n\n  forEach(obj, function(prop, key) {\n\n    if (properties.indexOf(key) === -1) {\n      result[key] = prop;\n    }\n  });\n\n  return result;\n}\n\n/**\n * Recursively merge `...sources` into given target.\n *\n * Does support merging objects; does not support merging arrays.\n *\n * @param {Object} target\n * @param {...Object} sources\n *\n * @return {Object} the target\n */\nfunction merge(target, ...sources) {\n\n  if (!sources.length) {\n    return target;\n  }\n\n  forEach(sources, function(source) {\n\n    // skip non-obj sources, i.e. null\n    if (!source || !isObject(source)) {\n      return;\n    }\n\n    forEach(source, function(sourceVal, key) {\n\n      if (key === '__proto__') {\n        return;\n      }\n\n      let targetVal = target[key];\n\n      if (isObject(sourceVal)) {\n\n        if (!isObject(targetVal)) {\n\n          // override target[key] with object\n          targetVal = {};\n        }\n\n        target[key] = merge(targetVal, sourceVal);\n      } else {\n        target[key] = sourceVal;\n      }\n\n    });\n  });\n\n  return target;\n}\n\nexport { assign, bind, debounce, ensureArray, every, filter, find, findIndex, flatten, forEach, get, groupBy, has, isArray, isDefined, isFunction, isNil, isNumber, isObject, isString, isUndefined, keys, map, matchPattern, merge, omit, pick, reduce, set, size, some, sortBy, throttle, unionBy, uniqueBy, values, without };\n","import { html } from 'htm/preact';\nimport { TextAreaEntry } from '@bpmn-io/properties-panel';\nimport { useService } from 'bpmn-js-properties-panel';\nimport { getBusinessObject } from 'bpmn-js/lib/util/ModelUtil';\nimport { isObject } from 'min-dash';\n\nimport {\n  getExampleJson,\n  EXAMPLE_JSON_PROPERTY_NAME,\n  getZeebeProperty\n} from '../util/jsonDataUtil';\n\n/**\n * Allows to edit the example JSON data of a task in a TextArea. Stores the data\n * in a zeebe:Property with the name specified in `exampleDataUtil`.\n */\nconst JSONDataProperty = (props) => {\n  const {\n    element\n  } = props;\n\n  const debounce = useService('debounceInput');\n  const translate = useService('translate');\n  const commandStack = useService('commandStack');\n  const moddle = useService('moddle');\n  const injector = useService('injector');\n\n  const getValue = () => {\n    return getExampleJson(element);\n  };\n\n  const setValue = (value) => {\n    const commands = [];\n\n    const {\n      commands: createZeebePropertiesCmds,\n      zeebeProperties\n    } = ensureZeebeProperties(element, injector);\n    commands.push(...createZeebePropertiesCmds);\n\n    // Update existing data\n    const existingData = getZeebeProperty(element, EXAMPLE_JSON_PROPERTY_NAME);\n\n    if (existingData) {\n      if (value) {\n\n        // Update value\n        commands.push({\n          cmd: 'element.updateModdleProperties',\n          context: {\n            element,\n            moddleElement: existingData,\n            properties: {\n              value\n            }\n          }\n        });\n      }\n      else {\n\n        // Remove empty zeebe property\n        commands.push({\n          cmd: 'element.updateModdleProperties',\n          context: {\n            element,\n            moddleElement: zeebeProperties,\n            properties: {\n              properties: withoutOutData(zeebeProperties.get('properties'))\n            }\n          }\n        });\n      }\n    }\n    else {\n\n      // Create new output data\n      commands.push({\n        cmd: 'element.updateModdleProperties',\n        context: {\n          element,\n          moddleElement: zeebeProperties,\n          properties: {\n            properties: [\n              ...zeebeProperties.get('properties'),\n              createOutData(value, moddle)\n            ]\n          }\n        }\n      });\n    }\n\n    commandStack.execute('properties-panel.multi-command-executor', commands);\n  };\n\n  const onValidate = (value) => {\n    if (!value) {\n      return;\n    }\n\n    try {\n      const parsed = JSON.parse(value);\n      if (!isObject(parsed)) {\n        return translate('Example data must be a JSON object literal.');\n      }\n    }\n    catch (e) {\n      return e.message;\n    }\n  };\n\n  return TextAreaEntry({\n    element,\n    label: translate('Example output'),\n    description: html`\n    <a href=\"https://docs.camunda.io/docs/components/modeler/data-handling/\" target=\"_blank\" rel=\"noopener\" title=${ translate('Example Data documentation') }>\n      ${ translate('About example data') }\n    </a>`,\n    id: 'exampleJson',\n    getValue,\n    setValue,\n    debounce,\n    validate: onValidate,\n    monospace: true\n  });\n};\n\nexport default JSONDataProperty;\n\n\n/**\n * Ensures that Extension elements and the zeebe:Properties extension element exists.\n * Returns the zeebe:Properties element and a list of commands to create them if they don't exist.\n */\nconst ensureZeebeProperties = (element, injector) => {\n  const commands = [];\n\n  const bo = getBusinessObject(element);\n\n  const bpmnFactory = injector.get('bpmnFactory');\n\n  let extensionElements = bo.get('extensionElements');\n  if (!extensionElements) {\n    extensionElements = bpmnFactory.create(\n      'bpmn:ExtensionElements',\n      { values: [] }\n    );\n\n    extensionElements.$parent = bo;\n    commands.push(\n      {\n        cmd: 'element.updateModdleProperties',\n        context: {\n          element,\n          moddleElement: bo,\n          properties: {\n            extensionElements\n          }\n        }\n      }\n    );\n  }\n\n  let zeebeProperties = extensionElements.get('values').find(v => v.$type === 'zeebe:Properties');\n\n  if (!zeebeProperties) {\n    zeebeProperties = bpmnFactory.create('zeebe:Properties', {\n      properties: []\n    });\n\n    zeebeProperties.$parent = extensionElements;\n\n    commands.push(\n      {\n        cmd: 'element.updateModdleProperties',\n        context: {\n          element,\n          moddleElement: extensionElements,\n          properties: {\n            values: [\n              ...extensionElements.get('values'),\n              zeebeProperties\n            ]\n          }\n        }\n      }\n    );\n  }\n\n  return {\n    zeebeProperties,\n    commands\n  };\n};\n\nfunction createOutData(data, moddle) {\n  return moddle.create('zeebe:Property', {\n    name: EXAMPLE_JSON_PROPERTY_NAME,\n    value: data\n  });\n}\n\nfunction withoutOutData(zeebeProperties) {\n  return zeebeProperties.filter(p => p.get('name') !== EXAMPLE_JSON_PROPERTY_NAME);\n}","import {\n  Group,\n  isTextAreaEntryEdited\n} from '@bpmn-io/properties-panel';\n\nimport JSONDataProperty from './JSONDataProperty';\n\nconst VERY_LOW_PRIORITY = 100;\n\nexport default class DataPropertiesProvider {\n  constructor(propertiesPanel, injector) {\n    this._injector = injector;\n    propertiesPanel.registerProvider(VERY_LOW_PRIORITY, this);\n  }\n\n  getGroups(element) {\n    const translate = this._injector.get('translate');\n    const elementTemplates = this._injector.get('elementTemplates', false);\n    let template = null;\n\n    if (elementTemplates) {\n      template = elementTemplates.get(element);\n    }\n\n    const shouldHide = !!template;\n\n    return (groups) => {\n      if (shouldHide) {\n        return groups;\n      }\n\n      const group = {\n        id: 'additionalDataGroup',\n        label: translate('Example data'),\n        entries: [\n          {\n            id: 'exampleJson',\n            component: JSONDataProperty,\n            isEdited: isTextAreaEntryEdited\n          }\n        ],\n        component: Group\n      };\n\n      groups.push(group);\n      return groups;\n    };\n  }\n}\n\nDataPropertiesProvider.$inject = [ 'propertiesPanel', 'injector' ];\n","import DataPropertiesProvider from './DataPropertiesProvider';\n\nexport default {\n  __init__: [ 'dataPropertiesProvider' ],\n  dataPropertiesProvider: [ 'type', DataPropertiesProvider ]\n};","import VariableResolverModule from './variableProvider';\nimport DataPropertiesProviderModule from './propertiesPanel';\n\nexport default {\n  __depends__: [\n    VariableResolverModule,\n    DataPropertiesProviderModule\n  ]\n};\n","import { VariableProvider } from '@bpmn-io/variable-resolver';\nimport { getSchemaVariables } from '@bpmn-io/form-js';\nimport { getBusinessObject, is } from 'bpmn-js/lib/util/ModelUtil';\n\n/**\n * Variable Provider that parses example JSON from a specific Zeebe property\n */\nclass FormVariableProvider extends VariableProvider {\n  constructor(eventBus, ...rest) {\n    super(...rest);\n\n    this._eventBus = eventBus;\n  }\n\n  async getVariables(element) {\n\n    /**\n     * Use the eventBus to collect form schemas. We currently only support locally defined forms,\n     * but plan to have linked forms on a project level soon.\n     */\n    const formSchema = await this._eventBus.fire('formVariableProvider.getFormSchema', { element });\n\n    if (!formSchema) {\n      return;\n    }\n\n    let variables;\n    try {\n      variables = getSchemaVariables(\n        JSON.parse(formSchema),\n        {\n          inputs : false,\n          outputs : true\n        }\n      );\n    }\n    catch (err) {\n\n      // invalid JSON or schema, ignore error\n      return;\n    }\n\n    return variables.map(name => {\n      return { name, info: `Returned from Form in ${element.name || element.id}` };\n    });\n  }\n\n  static $inject = [ 'eventBus', ...super.$inject ];\n}\n\nfunction getExtensionElements(element, type) {\n  const bo = getBusinessObject(element);\n\n  let elements = [];\n  const extensionElements = bo.get('extensionElements');\n\n  if (typeof extensionElements !== 'undefined') {\n    const extensionValues = extensionElements.get('values');\n\n    if (typeof extensionValues !== 'undefined') {\n      elements = extensionValues.filter(e => is(e, type));\n    }\n  }\n\n  return elements;\n}\n\n/**\n * Subscribe to the eventBus and handle Forms that are defined locally in the\n * Process.\n */\nfunction formExtractor(eventBus) {\n  eventBus.on('formVariableProvider.getFormSchema', getLocalForm);\n}\n\nformExtractor.$inject = [ 'eventBus' ];\n\n// helpers ////////////\n\nfunction getLocalForm({ element }) {\n  const formDefinition = getExtensionElements(element, 'zeebe:FormDefinition')[0];\n\n  if (!formDefinition) {\n    return;\n  }\n\n  const formKey = formDefinition.formKey;\n\n  if (!formKey) {\n    return;\n  }\n\n  const formId = formKey.replace('camunda-forms:bpmn:', '');\n  const process = getProcess(element);\n\n  const taskForms = getExtensionElements(process, 'zeebe:UserTaskForm');\n\n  const form = taskForms.find(form => form.id === formId);\n\n  if (!form) {\n    return;\n  }\n\n  return form.body;\n}\n\nfunction getProcess(element) {\n  let parent = element.$parent;\n\n  while (parent && !is(parent, 'bpmn:Process')) {\n    parent = parent.$parent;\n  }\n\n  return parent;\n}\n\nvar index = {\n  __init__: [\n    'formVariableProvider',\n    'formVariableProvider.formExtractor'\n  ],\n  formVariableProvider: [ 'type', FormVariableProvider ],\n  'formVariableProvider.formExtractor': [ 'type', formExtractor ]\n};\n\nexport { index as default };\n","import { getBusinessObject } from 'bpmn-js/lib/util/ModelUtil';\n\n/**\n * An element template chooser that hooks into\n * properties panel fired \"choose template\" events.\n *\n * @param {Object} config\n * @param {EventBus} eventBus\n * @param {ElementTemplates} elementTemplates\n * @param {Translate} translate\n * @param {PopupMenu} popupMenu\n */\nfunction ElementTemplateChooser(\n    config,\n    eventBus,\n    elementTemplates,\n    translate,\n    popupMenu) {\n\n  this._eventBus = eventBus;\n  this._elementTemplates = elementTemplates;\n  this._translate = translate;\n  this._popupMenu = popupMenu;\n\n  const enableChooser = !config || config.elementTemplateChooser !== false;\n\n  enableChooser && eventBus.on('elementTemplates.select', (event) => {\n\n    const { element } = event;\n\n    this.open(element).then(template => {\n      elementTemplates.applyTemplate(element, template);\n    }).catch(err => {\n      if (err !== 'user-canceled') {\n        console.error('elementTemplate.select :: error', err);\n      }\n    });\n  });\n}\n\nElementTemplateChooser.$inject = [\n  'config.connectorsExtension',\n  'eventBus',\n  'elementTemplates',\n  'translate',\n  'popupMenu'\n];\n\nElementTemplateChooser.prototype.open = function(element) {\n\n  const popupMenu = this._popupMenu;\n  const translate = this._translate;\n  const eventBus = this._eventBus;\n\n  return new Promise((resolve, reject) => {\n\n    const handleClosed = () => reject('user-canceled');\n\n    eventBus.once('popupMenu.close', handleClosed);\n\n    eventBus.once('elementTemplateChooser.chosen', event => {\n\n      const { template } = event;\n\n      eventBus.off('popupMenu.close', handleClosed);\n\n      resolve(template);\n    });\n\n    popupMenu.open(element, 'element-template-chooser', { x: 0, y: 0 }, {\n      title: translate('Choose element template'),\n      search: true,\n      width: 350\n    });\n  });\n\n};\n\n/**\n * A entry provider for the <element-template-chooser> popup menu.\n */\nfunction ElementTemplateChooserEntryProvider(popupMenu, eventBus, translate, elementTemplates) {\n\n  this._popupMenu = popupMenu;\n  this._eventBus = eventBus;\n  this._translate = translate;\n  this._elementTemplates = elementTemplates;\n\n  this.register();\n}\n\nElementTemplateChooserEntryProvider.$inject = [\n  'popupMenu',\n  'eventBus',\n  'translate',\n  'elementTemplates'\n];\n\n/**\n * Register replace menu provider in the popup menu\n */\nElementTemplateChooserEntryProvider.prototype.register = function() {\n  this._popupMenu.registerProvider('element-template-chooser', this);\n};\n\n/**\n * Adds the element templates to the replace menu.\n * @param {djs.model.Base} element\n *\n * @returns {Object}\n */\nElementTemplateChooserEntryProvider.prototype.getPopupMenuEntries = function(element) {\n\n  // convert to object\n  return this.getTemplateEntries(element).reduce((entries, [ key, value ]) => {\n    entries[key] = value;\n\n    return entries;\n  }, {});\n\n};\n\n/**\n * Get all element templates that can be used to replace the given element.\n *\n * @param {djs.model.Base} element\n *\n * @return {Array<Object>} a list of element templates as menu entries\n */\nElementTemplateChooserEntryProvider.prototype.getTemplateEntries = function(element) {\n\n  const eventBus = this._eventBus;\n  const translate = this._translate;\n\n  return this._getMatchingTemplates(element).map(template => {\n\n    const {\n      icon = {},\n      category,\n      keywords = []\n    } = template;\n\n    const entryId = `apply-template-${ template.id }`;\n\n    return [ entryId, {\n      label: template.name && translate(template.name),\n      description: template.description && translate(template.description),\n      documentationRef: template.documentationRef,\n      imageUrl: icon.contents,\n      search: keywords,\n      group: category && { ...category, name: translate(category.name) },\n      action: () => {\n        eventBus.fire('elementTemplateChooser.chosen', { element, template });\n      }\n    } ];\n  });\n};\n\n/**\n * Returns the templates that can the element can be replaced with.\n *\n * @param  {djs.model.Base} element\n *\n * @return {Array<ElementTemplate>}\n */\nElementTemplateChooserEntryProvider.prototype._getMatchingTemplates = function(element) {\n  return this._elementTemplates.getLatest(element).filter(template => {\n    return !isTemplateApplied(element, template);\n  });\n};\n\n\n// helpers ////////////\n\nfunction isTemplateApplied(element, template) {\n  const businessObject = getBusinessObject(element);\n\n  if (businessObject) {\n    return businessObject.get('modelerTemplate') === template.id;\n  }\n\n  return false;\n}\n\nvar index = {\n  __init__: [\n    'elementTemplateChooser',\n    'elementTemplateChooserEntryProvider'\n  ],\n  elementTemplateChooser: [ 'type', ElementTemplateChooser ],\n  elementTemplateChooserEntryProvider: [ 'type', ElementTemplateChooserEntryProvider ]\n};\n\nexport { index as default };\n//# sourceMappingURL=index.es.js.map\n","function ensureImported(element, target) {\n\n  if (element.ownerDocument !== target.ownerDocument) {\n    try {\n\n      // may fail on webkit\n      return target.ownerDocument.importNode(element, true);\n    } catch (e) {\n\n      // ignore\n    }\n  }\n\n  return element;\n}\n\n/**\n * appendTo utility\n */\n\n\n/**\n * Append a node to a target element and return the appended node.\n *\n * @param  {SVGElement} element\n * @param  {SVGElement} target\n *\n * @return {SVGElement} the appended node\n */\nfunction appendTo(element, target) {\n  return target.appendChild(ensureImported(element, target));\n}\n\n/**\n * append utility\n */\n\n\n/**\n * Append a node to an element\n *\n * @param  {SVGElement} element\n * @param  {SVGElement} node\n *\n * @return {SVGElement} the element\n */\nfunction append(target, node) {\n  appendTo(node, target);\n  return target;\n}\n\n/**\n * attribute accessor utility\n */\n\nvar LENGTH_ATTR = 2;\n\nvar CSS_PROPERTIES = {\n  'alignment-baseline': 1,\n  'baseline-shift': 1,\n  'clip': 1,\n  'clip-path': 1,\n  'clip-rule': 1,\n  'color': 1,\n  'color-interpolation': 1,\n  'color-interpolation-filters': 1,\n  'color-profile': 1,\n  'color-rendering': 1,\n  'cursor': 1,\n  'direction': 1,\n  'display': 1,\n  'dominant-baseline': 1,\n  'enable-background': 1,\n  'fill': 1,\n  'fill-opacity': 1,\n  'fill-rule': 1,\n  'filter': 1,\n  'flood-color': 1,\n  'flood-opacity': 1,\n  'font': 1,\n  'font-family': 1,\n  'font-size': LENGTH_ATTR,\n  'font-size-adjust': 1,\n  'font-stretch': 1,\n  'font-style': 1,\n  'font-variant': 1,\n  'font-weight': 1,\n  'glyph-orientation-horizontal': 1,\n  'glyph-orientation-vertical': 1,\n  'image-rendering': 1,\n  'kerning': 1,\n  'letter-spacing': 1,\n  'lighting-color': 1,\n  'marker': 1,\n  'marker-end': 1,\n  'marker-mid': 1,\n  'marker-start': 1,\n  'mask': 1,\n  'opacity': 1,\n  'overflow': 1,\n  'pointer-events': 1,\n  'shape-rendering': 1,\n  'stop-color': 1,\n  'stop-opacity': 1,\n  'stroke': 1,\n  'stroke-dasharray': 1,\n  'stroke-dashoffset': 1,\n  'stroke-linecap': 1,\n  'stroke-linejoin': 1,\n  'stroke-miterlimit': 1,\n  'stroke-opacity': 1,\n  'stroke-width': LENGTH_ATTR,\n  'text-anchor': 1,\n  'text-decoration': 1,\n  'text-rendering': 1,\n  'unicode-bidi': 1,\n  'visibility': 1,\n  'word-spacing': 1,\n  'writing-mode': 1\n};\n\n\nfunction getAttribute(node, name) {\n  if (CSS_PROPERTIES[name]) {\n    return node.style[name];\n  } else {\n    return node.getAttributeNS(null, name);\n  }\n}\n\nfunction setAttribute(node, name, value) {\n  var hyphenated = name.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n\n  var type = CSS_PROPERTIES[hyphenated];\n\n  if (type) {\n\n    // append pixel unit, unless present\n    if (type === LENGTH_ATTR && typeof value === 'number') {\n      value = String(value) + 'px';\n    }\n\n    node.style[hyphenated] = value;\n  } else {\n    node.setAttributeNS(null, name, value);\n  }\n}\n\nfunction setAttributes(node, attrs) {\n\n  var names = Object.keys(attrs), i, name;\n\n  for (i = 0, name; (name = names[i]); i++) {\n    setAttribute(node, name, attrs[name]);\n  }\n}\n\n/**\n * Gets or sets raw attributes on a node.\n *\n * @param  {SVGElement} node\n * @param  {Object} [attrs]\n * @param  {String} [name]\n * @param  {String} [value]\n *\n * @return {String}\n */\nfunction attr(node, name, value) {\n  if (typeof name === 'string') {\n    if (value !== undefined) {\n      setAttribute(node, name, value);\n    } else {\n      return getAttribute(node, name);\n    }\n  } else {\n    setAttributes(node, name);\n  }\n\n  return node;\n}\n\n/**\r\n * Taken from https://github.com/component/classes\r\n *\r\n * Without the component bits.\r\n */\r\n\r\n/**\r\n * toString reference.\r\n */\r\n\r\nconst toString = Object.prototype.toString;\r\n\r\n/**\r\n  * Wrap `el` in a `ClassList`.\r\n  *\r\n  * @param {Element} el\r\n  * @return {ClassList}\r\n  * @api public\r\n  */\r\n\r\nfunction classes(el) {\r\n  return new ClassList(el);\r\n}\r\n\r\nfunction ClassList(el) {\r\n  if (!el || !el.nodeType) {\r\n    throw new Error('A DOM element reference is required');\r\n  }\r\n  this.el = el;\r\n  this.list = el.classList;\r\n}\r\n\r\n/**\r\n  * Add class `name` if not already present.\r\n  *\r\n  * @param {String} name\r\n  * @return {ClassList}\r\n  * @api public\r\n  */\r\n\r\nClassList.prototype.add = function(name) {\r\n  this.list.add(name);\r\n  return this;\r\n};\r\n\r\n/**\r\n  * Remove class `name` when present, or\r\n  * pass a regular expression to remove\r\n  * any which match.\r\n  *\r\n  * @param {String|RegExp} name\r\n  * @return {ClassList}\r\n  * @api public\r\n  */\r\n\r\nClassList.prototype.remove = function(name) {\r\n  if ('[object RegExp]' == toString.call(name)) {\r\n    return this.removeMatching(name);\r\n  }\r\n\r\n  this.list.remove(name);\r\n  return this;\r\n};\r\n\r\n/**\r\n  * Remove all classes matching `re`.\r\n  *\r\n  * @param {RegExp} re\r\n  * @return {ClassList}\r\n  * @api private\r\n  */\r\n\r\nClassList.prototype.removeMatching = function(re) {\r\n  const arr = this.array();\r\n  for (let i = 0; i < arr.length; i++) {\r\n    if (re.test(arr[i])) {\r\n      this.remove(arr[i]);\r\n    }\r\n  }\r\n  return this;\r\n};\r\n\r\n/**\r\n  * Toggle class `name`, can force state via `force`.\r\n  *\r\n  * For browsers that support classList, but do not support `force` yet,\r\n  * the mistake will be detected and corrected.\r\n  *\r\n  * @param {String} name\r\n  * @param {Boolean} force\r\n  * @return {ClassList}\r\n  * @api public\r\n  */\r\n\r\nClassList.prototype.toggle = function(name, force) {\r\n  if ('undefined' !== typeof force) {\r\n    if (force !== this.list.toggle(name, force)) {\r\n      this.list.toggle(name); // toggle again to correct\r\n    }\r\n  } else {\r\n    this.list.toggle(name);\r\n  }\r\n  return this;\r\n};\r\n\r\n/**\r\n  * Return an array of classes.\r\n  *\r\n  * @return {Array}\r\n  * @api public\r\n  */\r\n\r\nClassList.prototype.array = function() {\r\n  return Array.from(this.list);\r\n};\r\n\r\n/**\r\n  * Check if class `name` is present.\r\n  *\r\n  * @param {String} name\r\n  * @return {ClassList}\r\n  * @api public\r\n  */\r\n\r\nClassList.prototype.has =\r\n ClassList.prototype.contains = function(name) {\r\n   return this.list.contains(name);\r\n };\n\n/**\n * Clear utility\n */\n\n/**\n * Removes all children from the given element\n *\n * @param  {SVGElement} element\n * @return {Element} the element (for chaining)\n */\nfunction clear(element) {\n  var child;\n\n  while ((child = element.firstChild)) {\n    element.removeChild(child);\n  }\n\n  return element;\n}\n\nfunction clone(element) {\n  return element.cloneNode(true);\n}\n\nvar ns = {\n  svg: 'http://www.w3.org/2000/svg'\n};\n\n/**\n * DOM parsing utility\n */\n\n\nvar SVG_START = '<svg xmlns=\"' + ns.svg + '\"';\n\nfunction parse(svg) {\n\n  var unwrap = false;\n\n  // ensure we import a valid svg document\n  if (svg.substring(0, 4) === '<svg') {\n    if (svg.indexOf(ns.svg) === -1) {\n      svg = SVG_START + svg.substring(4);\n    }\n  } else {\n\n    // namespace svg\n    svg = SVG_START + '>' + svg + '</svg>';\n    unwrap = true;\n  }\n\n  var parsed = parseDocument(svg);\n\n  if (!unwrap) {\n    return parsed;\n  }\n\n  var fragment = document.createDocumentFragment();\n\n  var parent = parsed.firstChild;\n\n  while (parent.firstChild) {\n    fragment.appendChild(parent.firstChild);\n  }\n\n  return fragment;\n}\n\nfunction parseDocument(svg) {\n\n  var parser;\n\n  // parse\n  parser = new DOMParser();\n  parser.async = false;\n\n  return parser.parseFromString(svg, 'text/xml');\n}\n\n/**\n * Create utility for SVG elements\n */\n\n\n\n/**\n * Create a specific type from name or SVG markup.\n *\n * @param {String} name the name or markup of the element\n * @param {Object} [attrs] attributes to set on the element\n *\n * @returns {SVGElement}\n */\nfunction create(name, attrs) {\n  var element;\n\n  name = name.trim();\n\n  if (name.charAt(0) === '<') {\n    element = parse(name).firstChild;\n    element = document.importNode(element, true);\n  } else {\n    element = document.createElementNS(ns.svg, name);\n  }\n\n  if (attrs) {\n    attr(element, attrs);\n  }\n\n  return element;\n}\n\n/**\n * Events handling utility\n */\n\nfunction on(node, event, listener, useCapture) {\n  node.addEventListener(event, listener, useCapture);\n}\n\nfunction off(node, event, listener, useCapture) {\n  node.removeEventListener(event, listener, useCapture);\n}\n\n/**\n * Geometry helpers\n */\n\n\n// fake node used to instantiate svg geometry elements\nvar node = null;\n\nfunction getNode() {\n  if (node === null) {\n    node = create('svg');\n  }\n\n  return node;\n}\n\nfunction extend(object, props) {\n  var i, k, keys = Object.keys(props);\n\n  for (i = 0; (k = keys[i]); i++) {\n    object[k] = props[k];\n  }\n\n  return object;\n}\n\n\nfunction createPoint(x, y) {\n  var point = getNode().createSVGPoint();\n\n  switch (arguments.length) {\n  case 0:\n    return point;\n  case 2:\n    x = {\n      x: x,\n      y: y\n    };\n    break;\n  }\n\n  return extend(point, x);\n}\n\n/**\n * Create matrix via args.\n *\n * @example\n *\n * createMatrix({ a: 1, b: 1 });\n * createMatrix();\n * createMatrix(1, 2, 0, 0, 30, 20);\n *\n * @return {SVGMatrix}\n */\nfunction createMatrix(a, b, c, d, e, f) {\n  var matrix = getNode().createSVGMatrix();\n\n  switch (arguments.length) {\n  case 0:\n    return matrix;\n  case 1:\n    return extend(matrix, a);\n  case 6:\n    return extend(matrix, {\n      a: a,\n      b: b,\n      c: c,\n      d: d,\n      e: e,\n      f: f\n    });\n  }\n}\n\nfunction createTransform(matrix) {\n  if (matrix) {\n    return getNode().createSVGTransformFromMatrix(matrix);\n  } else {\n    return getNode().createSVGTransform();\n  }\n}\n\n/**\n * Serialization util\n */\n\nvar TEXT_ENTITIES = /([&<>]{1})/g;\nvar ATTR_ENTITIES = /([&<>\\n\\r\"]{1})/g;\n\nvar ENTITY_REPLACEMENT = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '\\''\n};\n\nfunction escape(str, pattern) {\n\n  function replaceFn(match, entity) {\n    return ENTITY_REPLACEMENT[entity] || entity;\n  }\n\n  return str.replace(pattern, replaceFn);\n}\n\nfunction serialize(node, output) {\n\n  var i, len, attrMap, attrNode, childNodes;\n\n  switch (node.nodeType) {\n\n  // TEXT\n  case 3:\n\n    // replace special XML characters\n    output.push(escape(node.textContent, TEXT_ENTITIES));\n    break;\n\n  // ELEMENT\n  case 1:\n    output.push('<', node.tagName);\n\n    if (node.hasAttributes()) {\n      attrMap = node.attributes;\n      for (i = 0, len = attrMap.length; i < len; ++i) {\n        attrNode = attrMap.item(i);\n        output.push(' ', attrNode.name, '=\"', escape(attrNode.value, ATTR_ENTITIES), '\"');\n      }\n    }\n\n    if (node.hasChildNodes()) {\n      output.push('>');\n      childNodes = node.childNodes;\n      for (i = 0, len = childNodes.length; i < len; ++i) {\n        serialize(childNodes.item(i), output);\n      }\n      output.push('</', node.tagName, '>');\n    } else {\n      output.push('/>');\n    }\n    break;\n\n  // COMMENT\n  case 8:\n    output.push('<!--', escape(node.nodeValue, TEXT_ENTITIES), '-->');\n    break;\n\n  // CDATA\n  case 4:\n    output.push('<![CDATA[', node.nodeValue, ']]>');\n    break;\n\n  default:\n    throw new Error('unable to handle node ' + node.nodeType);\n  }\n\n  return output;\n}\n\n/**\n * innerHTML like functionality for SVG elements.\n * based on innerSVG (https://code.google.com/p/innersvg)\n */\n\n\n\nfunction set(element, svg) {\n\n  var parsed = parse(svg);\n\n  // clear element contents\n  clear(element);\n\n  if (!svg) {\n    return;\n  }\n\n  if (!isFragment(parsed)) {\n\n    // extract <svg> from parsed document\n    parsed = parsed.documentElement;\n  }\n\n  var nodes = slice(parsed.childNodes);\n\n  // import + append each node\n  for (var i = 0; i < nodes.length; i++) {\n    appendTo(nodes[i], element);\n  }\n\n}\n\nfunction get(element) {\n  var child = element.firstChild,\n      output = [];\n\n  while (child) {\n    serialize(child, output);\n    child = child.nextSibling;\n  }\n\n  return output.join('');\n}\n\nfunction isFragment(node) {\n  return node.nodeName === '#document-fragment';\n}\n\nfunction innerSVG(element, svg) {\n\n  if (svg !== undefined) {\n\n    try {\n      set(element, svg);\n    } catch (e) {\n      throw new Error('error parsing SVG: ' + e.message);\n    }\n\n    return element;\n  } else {\n    return get(element);\n  }\n}\n\n\nfunction slice(arr) {\n  return Array.prototype.slice.call(arr);\n}\n\n/**\n * Selection utilities\n */\n\nfunction select(node, selector) {\n  return node.querySelector(selector);\n}\n\nfunction selectAll(node, selector) {\n  var nodes = node.querySelectorAll(selector);\n\n  return [].map.call(nodes, function(element) {\n    return element;\n  });\n}\n\n/**\n * prependTo utility\n */\n\n\n/**\n * Prepend a node to a target element and return the prepended node.\n *\n * @param  {SVGElement} node\n * @param  {SVGElement} target\n *\n * @return {SVGElement} the prepended node\n */\nfunction prependTo(node, target) {\n  return target.insertBefore(ensureImported(node, target), target.firstChild || null);\n}\n\n/**\n * prepend utility\n */\n\n\n/**\n * Prepend a node to a target element\n *\n * @param  {SVGElement} target\n * @param  {SVGElement} node\n *\n * @return {SVGElement} the target element\n */\nfunction prepend(target, node) {\n  prependTo(node, target);\n  return target;\n}\n\nfunction remove(element) {\n  var parent = element.parentNode;\n\n  if (parent) {\n    parent.removeChild(element);\n  }\n\n  return element;\n}\n\n/**\n * Replace utility\n */\n\n\nfunction replace(element, replacement) {\n  element.parentNode.replaceChild(ensureImported(replacement, element), element);\n  return replacement;\n}\n\n/**\n * transform accessor utility\n */\n\nfunction wrapMatrix(transformList, transform) {\n  if (transform instanceof SVGMatrix) {\n    return transformList.createSVGTransformFromMatrix(transform);\n  }\n\n  return transform;\n}\n\n\nfunction setTransforms(transformList, transforms) {\n  var i, t;\n\n  transformList.clear();\n\n  for (i = 0; (t = transforms[i]); i++) {\n    transformList.appendItem(wrapMatrix(transformList, t));\n  }\n}\n\n/**\n * Get or set the transforms on the given node.\n *\n * @param {SVGElement} node\n * @param  {SVGTransform|SVGMatrix|Array<SVGTransform|SVGMatrix>} [transforms]\n *\n * @return {SVGTransform} the consolidated transform\n */\nfunction transform(node, transforms) {\n  var transformList = node.transform.baseVal;\n\n  if (transforms) {\n\n    if (!Array.isArray(transforms)) {\n      transforms = [ transforms ];\n    }\n\n    setTransforms(transformList, transforms);\n  }\n\n  return transformList.consolidate();\n}\n\nexport { append, appendTo, attr, classes, clear, clone, create, createMatrix, createPoint, createTransform, innerSVG, off, on, prepend, prependTo, remove, replace, select, selectAll, transform };\n","import inherits from 'inherits-browser';\n\nimport BaseRenderer from 'diagram-js/lib/draw/BaseRenderer';\n\nimport {\n  getBusinessObject,\n  is,\n  isAny\n} from 'bpmn-js/lib/util/ModelUtil';\n\nimport {\n  isLabel\n} from 'bpmn-js/lib/util/LabelUtil';\n\n\nimport {\n  append as svgAppend,\n  attr as svgAttr,\n  create as svgCreate\n} from 'tiny-svg';\n\nimport {\n  getModelerTemplateIcon\n} from './util';\n\nvar HIGH_PRIORITY = 1250;\n\n\nexport default function ElementTemplateIconRenderer(\n    config,\n    bpmnRenderer,\n    eventBus) {\n\n  this._bpmnRenderer = bpmnRenderer;\n\n  this._iconProperty = config && config.iconProperty;\n\n  BaseRenderer.call(this, eventBus, HIGH_PRIORITY);\n}\n\ninherits(ElementTemplateIconRenderer, BaseRenderer);\n\nElementTemplateIconRenderer.prototype.canRender = function(element) {\n\n  if (isLabel(element)) {\n    return false;\n  }\n\n  return !!(\n    isAny(element, [ 'bpmn:Activity', 'bpmn:Event' ]) && this._getIcon(element)\n  );\n};\n\nElementTemplateIconRenderer.prototype._getIcon = function(element) {\n  return getModelerTemplateIcon(element, this._iconProperty);\n};\n\nElementTemplateIconRenderer.prototype.drawShape = function(parentGfx, element, attrs = {}) {\n\n  var renderer = this._bpmnRenderer.handlers[\n    [\n      'bpmn:BoundaryEvent',\n      'bpmn:CallActivity',\n      'bpmn:EndEvent',\n      'bpmn:IntermediateCatchEvent',\n      'bpmn:IntermediateThrowEvent',\n      'bpmn:StartEvent',\n      'bpmn:Task',\n\n      // specialized subprocess before general\n      'bpmn:AdHocSubProcess',\n      'bpmn:Transaction',\n      'bpmn:SubProcess'\n    ].find(t => is(element, t))\n  ];\n\n  var gfx = renderer(parentGfx, element, { ...attrs, renderIcon: false });\n\n  var icon = this._getIcon(element);\n\n  var size = 18;\n\n  var padding = is(element, 'bpmn:Activity') ? {\n    x: 5,\n    y: 5\n  } : {\n    x: (element.width - size) / 2,\n    y: (element.height - size) / 2\n  };\n\n  var img = svgCreate('image');\n  svgAttr(img, {\n    href: icon,\n    width: size,\n    height: size,\n    ...padding\n  });\n\n  svgAppend(parentGfx, img);\n\n  return gfx;\n};\n\nElementTemplateIconRenderer.$inject = [\n  'config.elementTemplateIconRenderer',\n  'bpmnRenderer',\n  'eventBus'\n];\n\n\n// helpers //////////////\n\nexport function hasEventDefinition(element, eventType) {\n  const businessObject = getBusinessObject(element);\n\n  return (businessObject.eventDefinitions || []).length;\n}","import {\n  getBusinessObject\n} from 'bpmn-js/lib/util/ModelUtil';\n\n/**\n * Get icon defined on a moddle element.\n *\n * @param { ModdleElement } element\n * @param { string } iconProperty\n *\n * @return { string }\n */\nexport function getModelerTemplateIcon(element, iconProperty) {\n  iconProperty = iconProperty || 'zeebe:modelerTemplateIcon';\n\n  return getBusinessObject(element).get(iconProperty);\n}\n","/**\n * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n * under one or more contributor license agreements. See the NOTICE file\n * distributed with this work for additional information regarding copyright\n * ownership.\n *\n * Camunda licenses this file to you under the MIT; you may not use this file\n * except in compliance with the MIT License.\n */\n\nimport iconRendererModule from '@bpmn-io/element-template-icon-renderer';\n\nimport zeebeModdle from 'zeebe-bpmn-moddle/resources/zeebe.json';\n\nexport const commonModules = [\n  iconRendererModule\n];\n\n/**\n * @type { {\n *   zeebe: any\n * } }\n */\nexport const commonModdleExtensions = {\n  zeebe: zeebeModdle\n};","import ElementTemplateIconRenderer from './ElementTemplateIconRenderer';\n\nexport default {\n  __init__: [ 'elementTemplateIconRenderer' ],\n  elementTemplateIconRenderer: [ 'type', ElementTemplateIconRenderer ]\n};","/**\n * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n * under one or more contributor license agreements. See the NOTICE file\n * distributed with this work for additional information regarding copyright\n * ownership.\n *\n * Camunda licenses this file to you under the MIT; you may not use this file\n * except in compliance with the MIT License.\n */\n\n/**\n * @typedef { import('diagram-js/lib/features/popup-menu/PopupMenu').default } PopupMenu\n * @typedef { import('diagram-js/lib/model').Element } Element\n * @typedef { import('diagram-js/lib/features/popup-menu/PopupMenuProvider').PopupMenuEntries } PopupMenuEntries\n */\n\nimport { reduce } from 'min-dash';\n\nconst LOW_PRIORITY = 250;\n\nconst ANNOTATIONS = [\n  {\n    entries: [\n      'replace-with-call-activity',\n      'append-call-activity',\n      'create-call-activity'\n    ],\n    search: 'child process'\n  },\n  {\n    entries: [\n      'replace-with-receive-task',\n      'append-receive-task',\n      'create-receive-task'\n    ],\n    search: 'message'\n  },\n  {\n    entries: [\n      'replace-with-rule-task',\n      'append-rule-task',\n      'create-rule-task'\n    ],\n    search: 'dmn decision'\n  },\n  {\n    entries: [\n      'replace-with-service-task',\n      'append-service-task',\n      'create-service-task',\n    ],\n    search: [ 'job worker', 'job worker' ] // double mention to increase ranking in search result\n  },\n  {\n    entries: [\n      'replace-with-script-task',\n      'append-script-task',\n      'create-script-task',\n      'replace-with-send-task',\n      'append-send-task',\n      'create-send-task',\n      'replace-with-message-intermediate-throw',\n      'append-message-intermediate-throw',\n      'create-message-intermediate-throw',\n      'replace-with-message-end',\n      'append-message-end',\n      'create-message-end'\n    ],\n    search: 'job worker'\n  },\n  {\n    entries: [\n      'replace-with-user-task',\n      'append-user-task',\n      'create-user-task'\n    ],\n    search: 'form human'\n  }\n];\n\nconst ANNOTATIONS_KEYED = reduce(ANNOTATIONS, (annotationsKeyed, annotation) => {\n\n  const { entries, search } = annotation;\n\n  for (const entry of entries) {\n    if (annotationsKeyed[entry]) {\n      annotationsKeyed[entry].search += ' ' + search;\n    } else {\n      annotationsKeyed[entry] = { search };\n    }\n  }\n\n  return annotationsKeyed;\n}, {});\n\n\n/**\n * @param { PopupMenu } popupMenu\n *\n * @implements PopupMenuProvider\n */\nexport default function CamundaDetailsPopupMenuProvider(popupMenu) {\n\n  this._popupMenu = popupMenu;\n\n  this.register();\n}\n\nCamundaDetailsPopupMenuProvider.$inject = [ 'popupMenu' ];\n\n\n/**\n * Register create menu provider in the popup menu\n */\nCamundaDetailsPopupMenuProvider.prototype.register = function() {\n\n  // plug-into create-append-anything <create> menu\n  this._popupMenu.registerProvider('bpmn-create', LOW_PRIORITY, this);\n\n  // plug-into create-append-anything <append> menu\n  this._popupMenu.registerProvider('bpmn-append', LOW_PRIORITY, this);\n\n  // plug-into <replace> menu\n  this._popupMenu.registerProvider('bpmn-replace', LOW_PRIORITY, this);\n};\n\n\n/**\n * Returns the create options as menu entries\n *\n * @param { Element } _element\n */\nCamundaDetailsPopupMenuProvider.prototype.getPopupMenuEntries = function(_element) {\n\n  /**\n   * @param { PopupMenuEntries } existingEntries\n   *\n   * @return { PopupMenuEntries }\n   */\n  return (existingEntries) => {\n\n    return Object.entries(existingEntries).reduce((entries, [ name, entry ]) => {\n\n      entries[name] = this._annotateEntry(name, entry);\n\n      return entries;\n    }, { });\n  };\n\n};\n\nCamundaDetailsPopupMenuProvider.prototype._annotateEntry = function(name, entry) {\n\n  const annotation = ANNOTATIONS_KEYED[name];\n\n  if (annotation) {\n    return {\n      ...entry,\n      search: entry.search ? `${ entry.search } ${ annotation.search }` : annotation.search\n    };\n  }\n\n  return entry;\n};","/**\n * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n * under one or more contributor license agreements. See the NOTICE file\n * distributed with this work for additional information regarding copyright\n * ownership.\n *\n * Camunda licenses this file to you under the MIT; you may not use this file\n * except in compliance with the MIT License.\n */\n\nimport CamundaDetailsPopupMenuProvider from './CamundaDetailsPopupMenuProvider.js';\n\nexport default {\n  __init__: [ 'camundaDetailsPopupMenuProvider' ],\n  camundaDetailsPopupMenuProvider: [ 'type', CamundaDetailsPopupMenuProvider ]\n};","/**\n * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n * under one or more contributor license agreements. See the NOTICE file\n * distributed with this work for additional information regarding copyright\n * ownership.\n *\n * Camunda licenses this file to you under the MIT; you may not use this file\n * except in compliance with the MIT License.\n */\n\n/**\n * @typedef {{\n *   type: 'bpmnProcess',\n *   name: string,\n *   processId: string\n * }} CallActivity\n */\n\n/**\n * Create a new BPMN element for the given process resource.\n *\n * @param {CallActivity} resource\n * @param {import('didi').Injector} injector\n *\n * @returns {import('bpmn-js/lib/model/Types').ModdleElement}\n */\nexport function createElement(resource, injector) {\n  return createCallActivity(resource, injector);\n}\n\n/**\n * Create a new BPMN Call Activity for the given process resource.\n *\n * @param {CallActivity} resource\n * @param {import('didi').Injector} injector\n *\n * @returns {import('bpmn-js/lib/model/Types').ModdleElement}\n */\nfunction createCallActivity(resource, injector) {\n  const bpmnFactory = injector.get('bpmnFactory');\n\n  const calledElement = createCalledElement(resource, bpmnFactory);\n  const extensionElements = bpmnFactory.create('bpmn:ExtensionElements', {\n    values: [\n      calledElement\n    ]\n  });\n\n  return bpmnFactory.create('bpmn:CallActivity', {\n    name: resource.name,\n    extensionElements\n  });\n}\n\n/**\n * Create a zeebe:CalledElement for the given process resource.\n *\n * @param {CallActivity} resource\n * @param {import('bpmn-js/lib/features/modeling/BpmnFactory').default} bpmnFactory\n *\n * @returns {import('bpmn-js/lib/model/Types').ModdleElement}\n */\nfunction createCalledElement(resource, bpmnFactory) {\n  return bpmnFactory.create('zeebe:CalledElement', {\n    processId: resource.processId\n  });\n}\n","/**\n * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n * under one or more contributor license agreements. See the NOTICE file\n * distributed with this work for additional information regarding copyright\n * ownership.\n *\n * Camunda licenses this file to you under the MIT; you may not use this file\n * except in compliance with the MIT License.\n */\n\nexport const searchTerms = [\n  'resource',\n  'bpmn',\n  'call activity',\n  'child process'\n].join(' ');\n","/**\n * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n * under one or more contributor license agreements. See the NOTICE file\n * distributed with this work for additional information regarding copyright\n * ownership.\n *\n * Camunda licenses this file to you under the MIT; you may not use this file\n * except in compliance with the MIT License.\n */\n\n/**\n * @typedef {import('didi').Injector} Injector\n * @typedef {import('bpmn-js/lib/model/Types').ModdleElement} ModdleElement\n * @typedef {import('diagram-js/lib/features/popup-menu/PopupMenuProvider').PopupMenuEntries} PopupMenuEntries\n */\n\n/**\n * @typedef {object} Config\n * @property {string} resourceType\n * @property {string} className\n * @property {string} groupName\n * @property {(resource: any, injector: Injector) => ModdleElement} createElement\n * @property {string} [search]\n */\n\nexport class BaseCreateMenuProvider {\n\n  /**\n   * @param {import('didi').Injector} injector\n   * @param {Config} config\n   */\n  constructor(injector, config) {\n    this._injector = injector;\n    this._elementFactory = injector.get('elementFactory');\n    this._bpmnFactory = injector.get('bpmnFactory');\n    this._popupMenu = injector.get('popupMenu');\n    this._create = injector.get('create');\n    this._autoPlace = injector.get('autoPlace');\n    this._mouse = injector.get('mouse');\n    this._translate = injector.get('translate');\n    this._resources = injector.get('resources');\n\n    injector.get('popupMenu').registerProvider('bpmn-create', this);\n\n    this._config = config;\n  }\n\n  /**\n   * @returns {PopupMenuEntries}\n   */\n  getPopupMenuEntries() {\n    const {\n      resourceType,\n      groupName,\n      createElement,\n      ...additionalConfig\n    } = this._config;\n\n    const resources = this._resources.filter(r => r.type === resourceType);\n    const entries = {};\n\n    resources.forEach((resource, index) => {\n      const getTarget = () => createElement(resource, this._injector);\n      entries[`resources-create-${resourceType}-${index}`] = {\n        label: resource.name,\n        action: this._createEntryAction(getTarget),\n        group: {\n          id: groupName.toLowerCase(),\n          name: this._translate(groupName)\n        },\n        ...additionalConfig\n      };\n    });\n\n    return entries;\n  }\n\n  _createEntryAction(getTarget) {\n    const create = this._create;\n    const mouse = this._mouse;\n    const popupMenu = this._popupMenu;\n    const elementFactory = this._elementFactory;\n\n    return (event) => {\n      popupMenu.close();\n\n      const businessObject = getTarget();\n      const element = elementFactory.createShape({\n        type: businessObject.$type,\n        businessObject: businessObject\n      });\n\n      // use last mouse event if triggered via keyboard\n      if (event instanceof KeyboardEvent) {\n        event = mouse.getLastMoveEvent();\n      }\n\n      return create.start(event, element);\n    };\n  }\n}\n","/**\n * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n * under one or more contributor license agreements. See the NOTICE file\n * distributed with this work for additional information regarding copyright\n * ownership.\n *\n * Camunda licenses this file to you under the MIT; you may not use this file\n * except in compliance with the MIT License.\n */\n\n/**\n * @typedef {import('didi').Injector} Injector\n * @typedef {import('bpmn-js/lib/model/Types').ModdleElement} ModdleElement\n * @typedef {import('diagram-js/lib/features/popup-menu/PopupMenuProvider').PopupMenuEntries} PopupMenuEntries\n */\n\n/**\n * @typedef {object} Config\n * @property {string} resourceType\n * @property {string} className\n * @property {string} groupName\n * @property {(resource: any, injector: Injector) => ModdleElement} createElement\n * @property {string} [search]\n */\n\nexport class BaseAppendMenuProvider {\n\n  /**\n   * @param {import('didi').Injector} injector\n   * @param {Config} config\n   */\n  constructor(injector, config) {\n    this._injector = injector;\n    this._elementFactory = injector.get('elementFactory');\n    this._bpmnFactory = injector.get('bpmnFactory');\n    this._popupMenu = injector.get('popupMenu');\n    this._create = injector.get('create');\n    this._autoPlace = injector.get('autoPlace');\n    this._rules = injector.get('rules');\n    this._translate = injector.get('translate');\n    this._resources = injector.get('resources');\n\n    this._config = config;\n\n    this._register();\n  }\n\n  _register() {\n    this._popupMenu.registerProvider('bpmn-append', this);\n  };\n\n  /**\n   * @param {ModdleElement} element\n   *\n   * @returns {PopupMenuEntries}\n   */\n  getPopupMenuEntries(element) {\n    const rules = this._rules;\n\n    if (!rules.allowed('shape.append', { element: element })) {\n      return [];\n    }\n\n    const {\n      resourceType,\n      groupName,\n      createElement,\n      ...additionalConfig\n    } = this._config;\n\n    const resources = this._resources.filter(r => r.type === resourceType);\n    const entries = {};\n\n    resources.forEach((resource, index) => {\n      const getTarget = () => createElement(resource, this._injector);\n      entries[`resources-append-${resourceType}-${index}`] = {\n        label: resource.name,\n        action: this._createEntryAction(element, getTarget),\n        group: {\n          id: groupName.toLowerCase(),\n          name: this._translate(groupName)\n        },\n        ...additionalConfig\n      };\n    });\n\n    return entries;\n  };\n\n  _createEntryAction(element, targetFactory) {\n    const elementFactory = this._elementFactory;\n    const autoPlace = this._autoPlace;\n    const create = this._create;\n\n    const createElement = () => {\n      const businessObject = targetFactory();\n\n      return elementFactory.createShape({\n        type: businessObject.$type,\n        businessObject: businessObject\n      });\n    };\n\n    const autoPlaceElement = () => {\n      const newElement = createElement();\n      autoPlace.append(element, newElement);\n    };\n\n    const manualPlaceElement = (event) => {\n      const newElement = createElement();\n      return create.start(event, newElement, {\n        source: element\n      });\n    };\n\n    return {\n      click: autoPlaceElement,\n      dragstart: manualPlaceElement\n    };\n  }\n}\n","/**\n * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n * under one or more contributor license agreements. See the NOTICE file\n * distributed with this work for additional information regarding copyright\n * ownership.\n *\n * Camunda licenses this file to you under the MIT; you may not use this file\n * except in compliance with the MIT License.\n */\n\nimport { getBusinessObject, is } from 'bpmn-js/lib/util/ModelUtil';\n\n/**\n * @typedef {{\n *   type: 'bpmnProcess',\n *   name: string,\n *   processId: string\n * }} CallActivity\n */\n\n/**\n *\n * @param {import('diagram-js/lib/model').Element} element\n * @param {CallActivity} resource\n * @param {import('didi').Injector} injector\n */\nexport function replaceElement(element, resource, injector) {\n  const bpmnFactory = injector.get('bpmnFactory'),\n        bpmnReplace = injector.get('bpmnReplace'),\n        modeling = injector.get('modeling'),\n        commandStack = injector.get('commandStack');\n\n\n  commandStack.execute('external-resources.composed-command', {\n    command: replace\n  });\n\n\n  function replace() {\n    const replacedElement = bpmnReplace.replaceElement(element, { type: 'bpmn:CallActivity' });\n    modeling.updateProperties(replacedElement, {\n      name: resource.name\n    });\n\n    const bo = getBusinessObject(replacedElement);\n\n    const extensionElements = bo.get('extensionElements');\n\n    if (!extensionElements) {\n      modeling.updateProperties(replacedElement, {\n        extensionElements: bpmnFactory.create('bpmn:ExtensionElements', {\n          values: [\n            createCalledElement(resource, bpmnFactory)\n          ]\n        })\n      });\n\n      return;\n    }\n\n    const calledElement = getCalledElement(replacedElement);\n\n    if (!calledElement) {\n      modeling.updateModdleProperties(replacedElement, extensionElements, {\n        values: [\n          ...extensionElements.values,\n          createCalledElement(resource, bpmnFactory)\n        ]\n      });\n\n      return;\n    }\n\n    modeling.updateModdleProperties(replacedElement, calledElement, {\n      processId: resource.processId\n    });\n  }\n}\n\nfunction getCalledElement(element) {\n  return element.businessObject?.extensionElements?.values.find(value => is(value, 'zeebe:CalledElement'));\n}\n\nfunction createCalledElement(resource, bpmnFactory) {\n  return bpmnFactory.create('zeebe:CalledElement', {\n    processId: resource.processId\n  });\n}\n","/**\n * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n * under one or more contributor license agreements. See the NOTICE file\n * distributed with this work for additional information regarding copyright\n * ownership.\n *\n * Camunda licenses this file to you under the MIT; you may not use this file\n * except in compliance with the MIT License.\n */\n\nimport {\n  is\n} from 'bpmn-js/lib/util/ModelUtil';\n\nimport {\n  isArray\n} from 'min-dash';\n\n/**\n * @typedef {import('didi').Injector} Injector\n * @typedef {import('bpmn-js/lib/model/Types').ModdleElement} ModdleElement\n * @typedef {import('diagram-js/lib/features/popup-menu/PopupMenuProvider').PopupMenuEntries} PopupMenuEntries\n */\n\n/**\n * @typedef {object} Config\n * @property {string} resourceType\n * @property {string} className\n * @property {string} groupName\n * @property {(element: ModdleElement, resource: ModdleElement, injector: Injector) => ModdleElement} replaceElement\n * @property {string} [search]\n */\n\nexport class BaseReplaceMenuProvider {\n\n  /**\n   * @param {import('didi').Injector} injector\n   * @param {Config} config\n   */\n  constructor(injector, config) {\n\n    this._injector = injector;\n    this._popupMenu = injector.get('popupMenu');\n    this._rules = injector.get('rules');\n    this._translate = injector.get('translate');\n    this._resources = injector.get('resources');\n\n    this._popupMenu.registerProvider('bpmn-replace', this);\n\n    this._config = config;\n  }\n\n\n  /**\n   * @param {PopupMenuTarget} element\n   *\n   * @return {PopupMenuEntries}\n   */\n  getPopupMenuEntries(element) {\n    const rules = this._rules;\n\n    if (isArray(element) || !rules.allowed('shape.replace', { element })) {\n      return {};\n    }\n\n    if (!is(element, 'bpmn:Activity')) {\n      return {};\n    }\n\n    const {\n      resourceType,\n      groupName,\n      replaceElement,\n      ...additionalConfig\n    } = this._config;\n\n    const resources = this._resources.filter(r => r.type === resourceType);\n    const entries = {};\n\n    resources.forEach((resource, index) => {\n      const replace = () => replaceElement(element, resource, this._injector);\n      entries[`resources-replace-${resourceType}-${index}`] = {\n        label: resource.name,\n        action: replace,\n        group: {\n          id: groupName.toLowerCase(),\n          name: this._translate(groupName)\n        },\n        ...additionalConfig\n      };\n    });\n\n    return entries;\n  }\n}\n","/**\n * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n * under one or more contributor license agreements. See the NOTICE file\n * distributed with this work for additional information regarding copyright\n * ownership.\n *\n * Camunda licenses this file to you under the MIT; you may not use this file\n * except in compliance with the MIT License.\n */\n\nimport { CreateMenuProvider } from './CreateMenuProvider';\nimport { AppendMenuProvider } from './AppendMenuProvider';\nimport { ReplaceMenuProvider } from './ReplaceMenuProvider';\n\nexport const ProcessHandlerModule = {\n  __init__: [\n    'resources.processHandler.create',\n    'resources.processHandler.append',\n    'resources.processHandler.replace'\n  ],\n  'resources.processHandler.create': [ 'type', CreateMenuProvider ],\n  'resources.processHandler.append': [ 'type', AppendMenuProvider ],\n  'resources.processHandler.replace': [ 'type', ReplaceMenuProvider ]\n};\n","/**\n * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n * under one or more contributor license agreements. See the NOTICE file\n * distributed with this work for additional information regarding copyright\n * ownership.\n *\n * Camunda licenses this file to you under the MIT; you may not use this file\n * except in compliance with the MIT License.\n */\n\nimport { createElement } from './createElement.js';\nimport { searchTerms } from './searchTerms.js';\nimport { BaseCreateMenuProvider } from '../util/BaseCreateMenuProvider.js';\n\nexport class CreateMenuProvider extends BaseCreateMenuProvider {\n  static $inject = [\n    'injector'\n  ];\n\n  constructor(injector) {\n    super(injector, {\n      resourceType: 'bpmnProcess',\n      groupName: 'Processes',\n      className: 'bpmn-icon-call-activity',\n      createElement,\n      search: searchTerms\n    });\n  }\n}\n","/**\n * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n * under one or more contributor license agreements. See the NOTICE file\n * distributed with this work for additional information regarding copyright\n * ownership.\n *\n * Camunda licenses this file to you under the MIT; you may not use this file\n * except in compliance with the MIT License.\n */\n\nimport { createElement } from './createElement.js';\nimport { searchTerms } from './searchTerms.js';\nimport { BaseAppendMenuProvider } from '../util/BaseAppendMenuProvider.js';\n\nexport class AppendMenuProvider extends BaseAppendMenuProvider {\n  static $inject = [\n    'injector'\n  ];\n\n  constructor(injector) {\n    super(injector, {\n      resourceType: 'bpmnProcess',\n      groupName: 'Processes',\n      className: 'bpmn-icon-call-activity',\n      createElement,\n      search: searchTerms\n    });\n  }\n}\n","/**\n * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n * under one or more contributor license agreements. See the NOTICE file\n * distributed with this work for additional information regarding copyright\n * ownership.\n *\n * Camunda licenses this file to you under the MIT; you may not use this file\n * except in compliance with the MIT License.\n */\n\nimport { replaceElement } from './replaceElement.js';\nimport { searchTerms } from './searchTerms.js';\nimport { BaseReplaceMenuProvider } from '../util/BaseReplaceMenuProvider.js';\n\nexport class ReplaceMenuProvider extends BaseReplaceMenuProvider {\n  static $inject = [\n    'injector'\n  ];\n\n  constructor(injector) {\n    super(injector, {\n      resourceType: 'bpmnProcess',\n      groupName: 'Processes',\n      className: 'bpmn-icon-call-activity',\n      replaceElement,\n      search: searchTerms\n    });\n  }\n}\n","/**\n * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n * under one or more contributor license agreements. See the NOTICE file\n * distributed with this work for additional information regarding copyright\n * ownership.\n *\n * Camunda licenses this file to you under the MIT; you may not use this file\n * except in compliance with the MIT License.\n */\n\n/**\n * @typedef {{\n *   type: 'dmnDecision',\n *   name: string,\n *   decisionId: string\n * }} Decision\n */\n\n/**\n * Create a new BPMN element for the given decision resource.\n *\n * @param {Decision} resource\n * @param {import('didi').Injector} injector\n *\n * @returns {import('bpmn-js/lib/model/Types').ModdleElement}\n */\nexport function createElement(resource, injector) {\n  return createDecisionTask(resource, injector);\n}\n\n/**\n * Create a new BPMN Business Rule Task for the given decision resource.\n *\n * @param {Decision} resource\n * @param {import('didi').Injector} injector\n *\n * @returns {import('bpmn-js/lib/model/Types').ModdleElement}\n */\nfunction createDecisionTask(resource, injector) {\n  const bpmnFactory = injector.get('bpmnFactory');\n\n  const calledElement = createCalledDecision(resource, bpmnFactory);\n\n  const extensionElements = bpmnFactory.create('bpmn:ExtensionElements', {\n    values: [\n      calledElement\n    ]\n  });\n\n  return bpmnFactory.create('bpmn:BusinessRuleTask', {\n    name: resource.name,\n    extensionElements\n  });\n}\n\nfunction createCalledDecision(resource, bpmnFactory) {\n  return bpmnFactory.create('zeebe:CalledDecision', {\n    decisionId: resource.decisionId\n  });\n}\n","/**\n * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n * under one or more contributor license agreements. See the NOTICE file\n * distributed with this work for additional information regarding copyright\n * ownership.\n *\n * Camunda licenses this file to you under the MIT; you may not use this file\n * except in compliance with the MIT License.\n */\n\nexport const searchTerms = [\n  'resource',\n  'dmn',\n  'business rule task',\n  'decision'\n].join(' ');\n","/**\n * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n * under one or more contributor license agreements. See the NOTICE file\n * distributed with this work for additional information regarding copyright\n * ownership.\n *\n * Camunda licenses this file to you under the MIT; you may not use this file\n * except in compliance with the MIT License.\n */\n\nimport { getBusinessObject, is } from 'bpmn-js/lib/util/ModelUtil';\n\n/**\n * @typedef {{\n*   type: 'dmnDecision',\n*   name: string,\n*   decisionId: string\n* }} Decision\n*/\n\n/**\n * @param {import('diagram-js/lib/model').Element} element\n * @param {Decision} resource\n * @param {import('didi').Injector} injector\n */\nexport function replaceElement(element, resource, injector) {\n  const bpmnFactory = injector.get('bpmnFactory'),\n        bpmnReplace = injector.get('bpmnReplace'),\n        modeling = injector.get('modeling'),\n        commandStack = injector.get('commandStack');\n\n\n  commandStack.execute('external-resources.composed-command', {\n    command: replace\n  });\n\n\n  function replace() {\n    const replacedElement = bpmnReplace.replaceElement(element, { type: 'bpmn:BusinessRuleTask' });\n    modeling.updateProperties(replacedElement, {\n      name: resource.name\n    });\n\n    const bo = getBusinessObject(replacedElement);\n\n    const extensionElements = bo.get('extensionElements');\n\n    if (!extensionElements) {\n      modeling.updateProperties(replacedElement, {\n        extensionElements: bpmnFactory.create('bpmn:ExtensionElements', {\n          values: [\n            createCalledDecision(resource, bpmnFactory)\n          ]\n        })\n      });\n\n      return;\n    }\n\n    const calledDecision = getCalledDecision(replacedElement);\n\n    if (!calledDecision) {\n      modeling.updateModdleProperties(replacedElement, extensionElements, {\n        values: [\n          ...extensionElements.values,\n          createCalledDecision(resource, bpmnFactory)\n        ]\n      });\n\n      return;\n    }\n\n    modeling.updateModdleProperties(replacedElement, calledDecision, {\n      decisionId: resource.decisionId\n    });\n  }\n}\n\nfunction getCalledDecision(element) {\n  return element.businessObject?.extensionElements?.values.find(value => is(value, 'zeebe:CalledDecision'));\n}\n\nfunction createCalledDecision(resource, bpmnFactory) {\n  return bpmnFactory.create('zeebe:CalledDecision', {\n    decisionId: resource.decisionId\n  });\n}\n","/**\n * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n * under one or more contributor license agreements. See the NOTICE file\n * distributed with this work for additional information regarding copyright\n * ownership.\n *\n * Camunda licenses this file to you under the MIT; you may not use this file\n * except in compliance with the MIT License.\n */\n\nimport { CreateMenuProvider } from './CreateMenuProvider';\nimport { AppendMenuProvider } from './AppendMenuProvider';\nimport { ReplaceMenuProvider } from './ReplaceMenuProvider';\n\nexport const DecisionHandlerModule = {\n  __init__: [\n    'resources.decisionHandler.create',\n    'resources.decisionHandler.append',\n    'resources.decisionHandler.replace'\n  ],\n  'resources.decisionHandler.create': [ 'type', CreateMenuProvider ],\n  'resources.decisionHandler.append': [ 'type', AppendMenuProvider ],\n  'resources.decisionHandler.replace': [ 'type', ReplaceMenuProvider ]\n};\n","/**\n * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n * under one or more contributor license agreements. See the NOTICE file\n * distributed with this work for additional information regarding copyright\n * ownership.\n *\n * Camunda licenses this file to you under the MIT; you may not use this file\n * except in compliance with the MIT License.\n */\n\nimport { createElement } from './createElement.js';\nimport { searchTerms } from './searchTerms.js';\nimport { BaseCreateMenuProvider } from '../util/BaseCreateMenuProvider.js';\n\nexport class CreateMenuProvider extends BaseCreateMenuProvider {\n  static $inject = [\n    'injector'\n  ];\n\n  constructor(injector) {\n    super(injector, {\n      resourceType: 'dmnDecision',\n      groupName: 'Decisions',\n      className: 'bpmn-icon-business-rule-task',\n      createElement,\n      search: searchTerms\n    });\n  }\n}\n","/**\n * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n * under one or more contributor license agreements. See the NOTICE file\n * distributed with this work for additional information regarding copyright\n * ownership.\n *\n * Camunda licenses this file to you under the MIT; you may not use this file\n * except in compliance with the MIT License.\n */\n\nimport { createElement } from './createElement.js';\nimport { searchTerms } from './searchTerms.js';\nimport { BaseAppendMenuProvider } from '../util/BaseAppendMenuProvider.js';\n\nexport class AppendMenuProvider extends BaseAppendMenuProvider {\n  static $inject = [\n    'injector'\n  ];\n\n  constructor(injector) {\n    super(injector, {\n      resourceType: 'dmnDecision',\n      groupName: 'Decisions',\n      className: 'bpmn-icon-business-rule-task',\n      createElement,\n      search: searchTerms\n    });\n  }\n}\n","/**\n * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n * under one or more contributor license agreements. See the NOTICE file\n * distributed with this work for additional information regarding copyright\n * ownership.\n *\n * Camunda licenses this file to you under the MIT; you may not use this file\n * except in compliance with the MIT License.\n */\n\nimport { replaceElement } from './replaceElement.js';\nimport { searchTerms } from './searchTerms.js';\nimport { BaseReplaceMenuProvider } from '../util/BaseReplaceMenuProvider.js';\n\nexport class ReplaceMenuProvider extends BaseReplaceMenuProvider {\n  static $inject = [\n    'injector'\n  ];\n\n  constructor(injector) {\n    super(injector, {\n      resourceType: 'dmnDecision',\n      groupName: 'Decisions',\n      className: 'bpmn-icon-business-rule-task',\n      replaceElement,\n      search: searchTerms\n    });\n  }\n}\n","/**\n * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n * under one or more contributor license agreements. See the NOTICE file\n * distributed with this work for additional information regarding copyright\n * ownership.\n *\n * Camunda licenses this file to you under the MIT; you may not use this file\n * except in compliance with the MIT License.\n */\n\n/**\n * @typedef {{\n *   type: 'form',\n *   name: string,\n *   formId: string\n * }} Form\n */\n\n/**\n * Create a new BPMN element for the given form resource.\n *\n * @param {Form} resource\n * @param {import('didi').Injector} injector\n *\n * @returns {import('bpmn-js/lib/model/Types').ModdleElement}\n */\nexport function createElement(resource, injector) {\n  return createFormTask(resource, injector);\n}\n\n/**\n * Create a new BPMN User Task for the given form resource.\n *\n * @param {Form} resource\n * @param {import('didi').Injector} injector\n *\n * @returns {import('bpmn-js/lib/model/Types').ModdleElement}\n */\nfunction createFormTask(resource, injector) {\n  const bpmnFactory = injector.get('bpmnFactory');\n\n  const formDefinition = createFormDefinition(resource, bpmnFactory);\n  const extensionElements = bpmnFactory.create('bpmn:ExtensionElements', {\n    values: [\n      createZeebeUserTask(bpmnFactory),\n      formDefinition\n    ]\n  });\n\n  return bpmnFactory.create('bpmn:UserTask', {\n    name: resource.name,\n    extensionElements\n  });\n}\n\nfunction createFormDefinition(resource, bpmnFactory) {\n  return bpmnFactory.create('zeebe:FormDefinition', {\n    formId: resource.formId\n  });\n}\n\nfunction createZeebeUserTask(bpmnFactory) {\n  return bpmnFactory.create('zeebe:UserTask');\n}","/**\n * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n * under one or more contributor license agreements. See the NOTICE file\n * distributed with this work for additional information regarding copyright\n * ownership.\n *\n * Camunda licenses this file to you under the MIT; you may not use this file\n * except in compliance with the MIT License.\n */\n\nexport const searchTerms = [\n  'resource',\n  'form',\n  'user task',\n  'human'\n].join(' ');\n","/**\n * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n * under one or more contributor license agreements. See the NOTICE file\n * distributed with this work for additional information regarding copyright\n * ownership.\n *\n * Camunda licenses this file to you under the MIT; you may not use this file\n * except in compliance with the MIT License.\n */\n\nimport { getBusinessObject, is } from 'bpmn-js/lib/util/ModelUtil';\n\n/**\n * @typedef {{\n*   type: 'form',\n*   name: string,\n*   formId: string\n* }} Form\n*/\n\n/**\n * @param {import('diagram-js/lib/model').Element} element\n * @param {Form} resource\n * @param {import('didi').Injector} injector\n*/\nexport function replaceElement(element, resource, injector) {\n  const bpmnFactory = injector.get('bpmnFactory'),\n        bpmnReplace = injector.get('bpmnReplace'),\n        modeling = injector.get('modeling'),\n        commandStack = injector.get('commandStack');\n\n\n  commandStack.execute('external-resources.composed-command', {\n    command: replace\n  });\n\n\n  function replace() {\n    const replacedElement = bpmnReplace.replaceElement(element, { type: 'bpmn:UserTask' });\n    modeling.updateProperties(replacedElement, {\n      name: resource.name\n    });\n\n    const bo = getBusinessObject(replacedElement);\n\n    const extensionElements = bo.get('extensionElements');\n\n    if (!extensionElements) {\n      modeling.updateProperties(replacedElement, {\n        extensionElements: bpmnFactory.create('bpmn:ExtensionElements', {\n          values: [\n            createZeebeUserTask(bpmnFactory),\n            createFormDefinition(resource, bpmnFactory)\n          ]\n        })\n      });\n\n      return;\n    }\n\n    const formDefinition = getFormDefinition(replacedElement);\n\n    if (!formDefinition) {\n      modeling.updateModdleProperties(replacedElement, extensionElements, {\n        values: [\n          ...extensionElements.values,\n          createFormDefinition(resource, bpmnFactory)\n        ]\n      });\n\n      return;\n    }\n\n    modeling.updateModdleProperties(replacedElement, formDefinition, {\n      formId: resource.formId\n    });\n  }\n}\n\nfunction getFormDefinition(element) {\n  return element.businessObject?.extensionElements?.values.find(value => is(value, 'zeebe:FormDefinition'));\n}\n\nfunction createFormDefinition(resource, bpmnFactory) {\n  return bpmnFactory.create('zeebe:FormDefinition', {\n    formId: resource.formId\n  });\n}\n\nfunction createZeebeUserTask(bpmnFactory) {\n  return bpmnFactory.create('zeebe:UserTask');\n}","/**\n * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n * under one or more contributor license agreements. See the NOTICE file\n * distributed with this work for additional information regarding copyright\n * ownership.\n *\n * Camunda licenses this file to you under the MIT; you may not use this file\n * except in compliance with the MIT License.\n */\n\nimport { CreateMenuProvider } from './CreateMenuProvider';\nimport { AppendMenuProvider } from './AppendMenuProvider';\nimport { ReplaceMenuProvider } from './ReplaceMenuProvider';\n\nexport const FormHandlerModule = {\n  __init__: [\n    'resources.formHandler.create',\n    'resources.formHandler.append',\n    'resources.formHandler.replace'\n  ],\n  'resources.formHandler.create': [ 'type', CreateMenuProvider ],\n  'resources.formHandler.append': [ 'type', AppendMenuProvider ],\n  'resources.formHandler.replace': [ 'type', ReplaceMenuProvider ]\n};\n","/**\n * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n * under one or more contributor license agreements. See the NOTICE file\n * distributed with this work for additional information regarding copyright\n * ownership.\n *\n * Camunda licenses this file to you under the MIT; you may not use this file\n * except in compliance with the MIT License.\n */\n\nimport { createElement } from './createElement.js';\nimport { searchTerms } from './searchTerms.js';\nimport { BaseCreateMenuProvider } from '../util/BaseCreateMenuProvider.js';\n\nexport class CreateMenuProvider extends BaseCreateMenuProvider {\n  static $inject = [\n    'injector'\n  ];\n\n  constructor(injector) {\n    super(injector, {\n      resourceType: 'form',\n      groupName: 'Forms',\n      className: 'bpmn-icon-user-task',\n      createElement,\n      search: searchTerms\n    });\n  }\n}\n","/**\n * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n * under one or more contributor license agreements. See the NOTICE file\n * distributed with this work for additional information regarding copyright\n * ownership.\n *\n * Camunda licenses this file to you under the MIT; you may not use this file\n * except in compliance with the MIT License.\n */\n\nimport { createElement } from './createElement.js';\nimport { searchTerms } from './searchTerms.js';\nimport { BaseAppendMenuProvider } from '../util/BaseAppendMenuProvider.js';\n\nexport class AppendMenuProvider extends BaseAppendMenuProvider {\n  static $inject = [\n    'injector'\n  ];\n\n  constructor(injector) {\n    super(injector, {\n      resourceType: 'form',\n      groupName: 'Forms',\n      className: 'bpmn-icon-user-task',\n      createElement,\n      search: searchTerms\n    });\n  }\n}\n","/**\n * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n * under one or more contributor license agreements. See the NOTICE file\n * distributed with this work for additional information regarding copyright\n * ownership.\n *\n * Camunda licenses this file to you under the MIT; you may not use this file\n * except in compliance with the MIT License.\n */\n\nimport { replaceElement } from './replaceElement.js';\nimport { searchTerms } from './searchTerms.js';\nimport { BaseReplaceMenuProvider } from '../util/BaseReplaceMenuProvider.js';\n\nexport class ReplaceMenuProvider extends BaseReplaceMenuProvider {\n  static $inject = [\n    'injector'\n  ];\n\n  constructor(injector) {\n    super(injector, {\n      resourceType: 'form',\n      groupName: 'Forms',\n      className: 'bpmn-icon-user-task',\n      replaceElement,\n      search: searchTerms\n    });\n  }\n}\n","/**\n * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n * under one or more contributor license agreements. See the NOTICE file\n * distributed with this work for additional information regarding copyright\n * ownership.\n *\n * Camunda licenses this file to you under the MIT; you may not use this file\n * except in compliance with the MIT License.\n */\n\nexport const RPA_TEMPLATE_ID = 'camunda.connectors.rpa';\nexport const RPA_MAIN_SCRIPT_LINK_NAME = 'RPAScript';\n\nexport const RPA_ICON = 'data:image/svg+xml;base64,PHN2ZyBpZD0iaWNvbiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgPGRlZnM+CiAgICA8c3R5bGU+CiAgICAgIC5jbHMtMSB7CiAgICAgICAgZmlsbDogbm9uZTsKICAgICAgfQogICAgPC9zdHlsZT4KICA8L2RlZnM+CiAgPHRpdGxlPmJvdDwvdGl0bGU+CiAgPHJlY3QgeD0iMTgiIHk9IjEwIiB3aWR0aD0iMiIgaGVpZ2h0PSIyIi8+CiAgPHJlY3QgeD0iMTIiIHk9IjEwIiB3aWR0aD0iMiIgaGVpZ2h0PSIyIi8+CiAgPHBhdGggZD0iTTI2LDIwSDIxVjE4aDFhMi4wMDIzLDIuMDAyMywwLDAsMCwyLTJWMTJoMlYxMEgyNFY4YTIuMDAyMywyLjAwMjMsMCwwLDAtMi0ySDIwVjJIMThWNkgxNFYySDEyVjZIMTBBMi4wMDIzLDIuMDAyMywwLDAsMCw4LDh2Mkg2djJIOHY0YTIuMDAyMywyLjAwMjMsMCwwLDAsMiwyaDF2Mkg2YTIuMDAyMywyLjAwMjMsMCwwLDAtMiwydjhINlYyMkgyNnY4aDJWMjJBMi4wMDIzLDIuMDAyMywwLDAsMCwyNiwyMFpNMTAsOEgyMnY4SDEwWm0zLDEwaDZ2MkgxM1oiLz4KICA8cmVjdCBpZD0iX1RyYW5zcGFyZW50X1JlY3RhbmdsZV8iIGRhdGEtbmFtZT0iJmx0O1RyYW5zcGFyZW50IFJlY3RhbmdsZSZndDsiIGNsYXNzPSJjbHMtMSIgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIi8+Cjwvc3ZnPgo=';","/**\n * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n * under one or more contributor license agreements. See the NOTICE file\n * distributed with this work for additional information regarding copyright\n * ownership.\n *\n * Camunda licenses this file to you under the MIT; you may not use this file\n * except in compliance with the MIT License.\n */\n\nimport { getBusinessObject, is } from 'bpmn-js/lib/util/ModelUtil';\nimport { RPA_MAIN_SCRIPT_LINK_NAME, RPA_TEMPLATE_ID } from './constants';\n\n/**\n * @typedef {{\n *   type: 'rpa',\n *   name: string,\n *   scriptId: string\n * }} RPA\n */\n\n/**\n * Create a new BPMN element for the given RPA resource.\n *\n * @param {RPA} resource\n * @param {import('didi').Injector} injector\n *\n * @returns {import('bpmn-js/lib/model/Types').ModdleElement}\n */\nexport function createElement(resource, injector) {\n  return createRPATask(resource, injector);\n}\n\n/**\n * Create an RPA task for the given RPA resource. Uses the latest RPA template\n * to create the task.\n *\n * @param {RPA} resource\n * @param {import('didi').Injector} injector\n *\n * @returns {import('bpmn-js/lib/model/Types').ModdleElement}\n */\nfunction createRPATask(resource, injector) {\n  const elementTemplates = injector.get('elementTemplates');\n\n  const templates = elementTemplates.getLatest(RPA_TEMPLATE_ID);\n\n  const RPATask = elementTemplates.createElement(templates[0]);\n\n  const bo = getBusinessObject(RPATask);\n  const extensionElements = bo.get('extensionElements');\n  const linkedResources = extensionElements.get('values').find((el) => is(el, 'zeebe:LinkedResources'));\n\n  const mainScript = linkedResources.values.find((el) => el.linkName === RPA_MAIN_SCRIPT_LINK_NAME);\n\n  mainScript.set('resourceId', resource.scriptId);\n\n  bo.set('name', resource.name);\n\n  return bo;\n}\n","/**\n * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n * under one or more contributor license agreements. See the NOTICE file\n * distributed with this work for additional information regarding copyright\n * ownership.\n *\n * Camunda licenses this file to you under the MIT; you may not use this file\n * except in compliance with the MIT License.\n */\n\nexport const searchTerms = [ 'resource', 'RPA', 'Script', 'Robotic', 'Automation' ].join(' ');\n","/**\n * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n * under one or more contributor license agreements. See the NOTICE file\n * distributed with this work for additional information regarding copyright\n * ownership.\n *\n * Camunda licenses this file to you under the MIT; you may not use this file\n * except in compliance with the MIT License.\n */\n\nimport { getBusinessObject, is } from 'bpmn-js/lib/util/ModelUtil';\nimport { RPA_MAIN_SCRIPT_LINK_NAME, RPA_TEMPLATE_ID } from './constants';\n\n/**\n * @typedef {{\n *   type: 'rpa',\n *   name: string,\n *   scriptId: string\n * }} RPA\n */\n\n/**\n * @param {import('diagram-js/lib/model').Element} element\n * @param {RPA} resource\n * @param {import('didi').Injector} injector\n */\nexport function replaceElement(element, resource, injector) {\n  const modeling = injector.get('modeling'),\n        commandStack = injector.get('commandStack');\n\n  commandStack.execute('external-resources.composed-command', {\n    command: replace\n  });\n\n  function replace() {\n    const elementTemplates = injector.get('elementTemplates');\n\n    const templates = elementTemplates.getLatest(RPA_TEMPLATE_ID);\n\n    const RPATask = elementTemplates.applyTemplate(element, templates[0]);\n\n    modeling.updateProperties(RPATask, {\n      name: resource.name\n    });\n\n    const bo = getBusinessObject(RPATask);\n\n    const extensionElements = bo.get('extensionElements');\n    const linkedResources = extensionElements.get('values').find((el) => is(el, 'zeebe:LinkedResources'));\n\n    const mainScript = linkedResources.get('values').find((el) => el.get('linkName') === RPA_MAIN_SCRIPT_LINK_NAME);\n\n    modeling.updateModdleProperties(RPATask, mainScript, {\n      resourceId: resource.scriptId\n    });\n\n    return RPATask;\n  }\n}\n","/**\n * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n * under one or more contributor license agreements. See the NOTICE file\n * distributed with this work for additional information regarding copyright\n * ownership.\n *\n * Camunda licenses this file to you under the MIT; you may not use this file\n * except in compliance with the MIT License.\n */\n\nimport { CreateMenuProvider } from './CreateMenuProvider';\nimport { AppendMenuProvider } from './AppendMenuProvider';\nimport { ReplaceMenuProvider } from './ReplaceMenuProvider';\n\nexport const RPAHandlerModule = {\n  __init__: [ 'resources.RPAHandler.create', 'resources.RPAHandler.append', 'resources.RPAHandler.replace' ],\n  'resources.RPAHandler.create': [ 'type', CreateMenuProvider ],\n  'resources.RPAHandler.append': [ 'type', AppendMenuProvider ],\n  'resources.RPAHandler.replace': [ 'type', ReplaceMenuProvider ]\n};\n","/**\n * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n * under one or more contributor license agreements. See the NOTICE file\n * distributed with this work for additional information regarding copyright\n * ownership.\n *\n * Camunda licenses this file to you under the MIT; you may not use this file\n * except in compliance with the MIT License.\n */\n\nimport { BaseCreateMenuProvider } from '../util/BaseCreateMenuProvider.js';\nimport { RPA_ICON, RPA_TEMPLATE_ID } from './constants.js';\nimport { createElement } from './createElement.js';\nimport { searchTerms } from './searchTerms.js';\n\nexport class CreateMenuProvider extends BaseCreateMenuProvider {\n  static $inject = [ 'injector' ];\n\n  constructor(injector) {\n    super(injector, {\n      resourceType: 'rpa',\n      groupName: 'RPA Scripts',\n      className: 'bpmn-icon-rpa-script',\n      createElement,\n      search: searchTerms,\n      imageUrl: RPA_ICON\n    });\n\n    this._elementTemplates = injector.get('elementTemplates');\n  }\n\n  getPopupMenuEntries(element) {\n    const templates = this._elementTemplates.getLatest(RPA_TEMPLATE_ID);\n\n    if (!templates || templates.length === 0) {\n      return {};\n    }\n\n    return super.getPopupMenuEntries(element);\n  }\n}\n","/**\n * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n * under one or more contributor license agreements. See the NOTICE file\n * distributed with this work for additional information regarding copyright\n * ownership.\n *\n * Camunda licenses this file to you under the MIT; you may not use this file\n * except in compliance with the MIT License.\n */\n\nimport { BaseAppendMenuProvider } from '../util/BaseAppendMenuProvider.js';\nimport { RPA_ICON, RPA_TEMPLATE_ID } from './constants.js';\nimport { createElement } from './createElement.js';\nimport { searchTerms } from './searchTerms.js';\n\nexport class AppendMenuProvider extends BaseAppendMenuProvider {\n  static $inject = [ 'injector' ];\n\n  constructor(injector) {\n    super(injector, {\n      resourceType: 'rpa',\n      groupName: 'RPA Scripts',\n      className: 'bpmn-icon-rpa-script',\n      createElement,\n      search: searchTerms,\n      imageUrl: RPA_ICON\n    });\n\n    this._elementTemplates = injector.get('elementTemplates');\n  }\n\n  getPopupMenuEntries(element) {\n    const templates = this._elementTemplates.getLatest(RPA_TEMPLATE_ID);\n\n    if (!templates || templates.length === 0) {\n      return {};\n    }\n\n    return super.getPopupMenuEntries(element);\n  }\n}\n","/**\n * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n * under one or more contributor license agreements. See the NOTICE file\n * distributed with this work for additional information regarding copyright\n * ownership.\n *\n * Camunda licenses this file to you under the MIT; you may not use this file\n * except in compliance with the MIT License.\n */\n\nimport { BaseReplaceMenuProvider } from '../util/BaseReplaceMenuProvider.js';\nimport { RPA_ICON, RPA_TEMPLATE_ID } from './constants.js';\nimport { replaceElement } from './replaceElement.js';\nimport { searchTerms } from './searchTerms.js';\n\nexport class ReplaceMenuProvider extends BaseReplaceMenuProvider {\n  static $inject = [ 'injector' ];\n\n  constructor(injector) {\n    super(injector, {\n      resourceType: 'rpa',\n      groupName: 'RPA Scripts',\n      className: 'bpmn-icon-rpa-script',\n      replaceElement,\n      search: searchTerms,\n      imageUrl: RPA_ICON\n    });\n\n    this._elementTemplates = injector.get('elementTemplates');\n  }\n\n  getPopupMenuEntries(element) {\n    const templates = this._elementTemplates.getLatest(RPA_TEMPLATE_ID);\n\n    if (!templates || templates.length === 0) {\n      return {};\n    }\n\n    return super.getPopupMenuEntries(element);\n  }\n}\n","/**\n * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n * under one or more contributor license agreements. See the NOTICE file\n * distributed with this work for additional information regarding copyright\n * ownership.\n *\n * Camunda licenses this file to you under the MIT; you may not use this file\n * except in compliance with the MIT License.\n */\n\n/**\n * Command handler to compose multiple commands into a single command.\n * It allows to use facades like `BpmnReplace` and `Modeling` while retaining\n * single undo/redo feature.\n */\nexport class ComposedCommandHandler {\n  constructor(commandStack) {\n    this._commandStack = commandStack;\n  }\n\n  preExecute(context) {\n    context.command();\n  }\n}\n\nComposedCommandHandler.$inject = [ 'commandStack' ];\n","/**\n * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n * under one or more contributor license agreements. See the NOTICE file\n * distributed with this work for additional information regarding copyright\n * ownership.\n *\n * Camunda licenses this file to you under the MIT; you may not use this file\n * except in compliance with the MIT License.\n */\n\nimport {\n  forEach\n} from 'min-dash';\n\nimport { ComposedCommandHandler } from './ComposedCommandHandler.js';\n\nconst HANDLERS = {\n  'external-resources.composed-command': ComposedCommandHandler\n};\n\n\nexport default function CommandInitializer(eventBus, commandStack) {\n\n  eventBus.on('diagram.init', function() {\n    forEach(HANDLERS, function(handler, id) {\n      commandStack.registerHandler(id, handler);\n    });\n  });\n}\n\nCommandInitializer.$inject = [ 'eventBus', 'commandStack' ];\n","/**\n * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n * under one or more contributor license agreements. See the NOTICE file\n * distributed with this work for additional information regarding copyright\n * ownership.\n *\n * Camunda licenses this file to you under the MIT; you may not use this file\n * except in compliance with the MIT License.\n */\n\nimport { Resources } from './Resources.js';\nimport { ResourceLoader } from './ResourceLoader.js';\n\nimport { ProcessHandlerModule } from './handlers/process/index.js';\nimport { DecisionHandlerModule } from './handlers/decision/index.js';\nimport { FormHandlerModule } from './handlers/form/index.js';\nimport { RPAHandlerModule } from './handlers/rpa/index.js';\n\nimport cmdModule from './cmd/index.js';\n\nexport const ResourcesModule = {\n  __init__: [\n    'resources.resourceLoader',\n  ],\n  'resources.resourceLoader': [ 'type', ResourceLoader ],\n  'resources': [ 'type', Resources ],\n};\n\nexport const DefaultHandlersModule = {\n  __init__: [\n    cmdModule\n  ],\n  __depends__: [\n    DecisionHandlerModule,\n    FormHandlerModule,\n    ProcessHandlerModule,\n    RPAHandlerModule\n  ]\n};\n","/**\n * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n * under one or more contributor license agreements. See the NOTICE file\n * distributed with this work for additional information regarding copyright\n * ownership.\n *\n * Camunda licenses this file to you under the MIT; you may not use this file\n * except in compliance with the MIT License.\n */\n\nimport inherits from 'inherits-browser';\n\nimport BaseModeler from '../base/Modeler';\n\nimport behaviorsModule from 'camunda-bpmn-js-behaviors/lib/camunda-cloud';\n\nimport {\n  ZeebePropertiesProviderModule as zeebePropertiesProviderModule,\n  ZeebeTooltipProvider\n} from 'bpmn-js-properties-panel';\n\nimport {\n  CloudElementTemplatesPropertiesProviderModule as cloudElementTemplatesPropertiesProvider\n} from 'bpmn-js-element-templates';\n\nimport {\n  ZeebeVariableResolverModule as variableResolverModule\n} from '@bpmn-io/variable-resolver';\n\nimport exampleDataPropertiesProviderModule from '@camunda/example-data-properties-provider';\nimport formVariableProviderModule from '@bpmn-io/form-variable-provider';\n\nimport colorPickerModule from 'bpmn-js-color-picker';\nimport elementTemplateChooserModule from '@bpmn-io/element-template-chooser';\nimport { commonModdleExtensions, commonModules } from './util/commonModules';\n\nimport {\n  CreateAppendAnythingModule as createAppendAnythingModule,\n  CreateAppendElementTemplatesModule as createAppendElementTemplatesModule\n} from 'bpmn-js-create-append-anything';\n\nimport camundaDetailsPopupMenuModule from './features/popup-menu';\nimport { DefaultHandlersModule, ResourcesModule } from './features/external-resources';\n\n/**\n * @typedef {import('bpmn-js/lib/BaseViewer').BaseViewerOptions} BaseViewerOptions\n */\n\n/**\n * @param {BaseViewerOptions} options\n */\nexport default function Modeler(options = {}) {\n\n  options = {\n    ...options,\n    moddleExtensions: {\n      ...commonModdleExtensions,\n      ...options.moddleExtensions\n    },\n    propertiesPanel: {\n      tooltip: ZeebeTooltipProvider,\n      getFeelPopupLinks: (type) => {\n        if (type === 'feel') {\n          return [\n            {\n              title: 'Learn FEEL expressions',\n              href: 'https://docs.camunda.io/docs/components/modeler/feel/what-is-feel/'\n            },\n            {\n              title: 'Try FEEL Copilot',\n              href: 'https://feel-copilot.camunda.com/'\n            }\n          ];\n        } else if (type === 'feelers') {\n          return [\n            {\n              title: 'Learn templating',\n              href: 'https://docs.camunda.io/docs/components/modeler/forms/configuration/forms-config-templating-syntax/'\n            }\n          ];\n        }\n      },\n      ...options.propertiesPanel\n    }\n  };\n\n  this._addElementTemplateChooserModule(options);\n\n  BaseModeler.call(this, options);\n}\n\ninherits(Modeler, BaseModeler);\n\nModeler.prototype._addElementTemplateChooserModule = function(options) {\n  const { elementTemplateChooser } = options;\n\n  if (elementTemplateChooser !== false) {\n    this._modules = [ ...this._modules, elementTemplateChooserModule ];\n  }\n};\n\nModeler.prototype._camundaCloudModules = [\n  ...commonModules,\n  behaviorsModule,\n  zeebePropertiesProviderModule,\n  cloudElementTemplatesPropertiesProvider,\n  createAppendAnythingModule,\n  createAppendElementTemplatesModule,\n  colorPickerModule,\n  variableResolverModule,\n  exampleDataPropertiesProviderModule,\n  formVariableProviderModule,\n  camundaDetailsPopupMenuModule,\n  DefaultHandlersModule,\n  ResourcesModule\n];\n\nModeler.prototype._modules = [].concat(\n  BaseModeler.prototype._modules,\n  Modeler.prototype._camundaCloudModules\n);\n","/**\n * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n * under one or more contributor license agreements. See the NOTICE file\n * distributed with this work for additional information regarding copyright\n * ownership.\n *\n * Camunda licenses this file to you under the MIT; you may not use this file\n * except in compliance with the MIT License.\n */\n\nexport class ResourceLoader {\n  static $inject = [ 'eventBus', 'resources' ];\n\n  constructor(eventBus, resources) {\n    this._resources = resources;\n    this._providers = [];\n\n    eventBus.on('diagram.init', () => {\n      this.reload();\n    });\n  }\n\n  register(resourceProvider) {\n    this._providers.push(resourceProvider);\n  }\n\n  reload() {\n    const combined = this._providers.reduce((resources, provider) => {\n      return resources.concat(provider.getResources());\n    }, []);\n\n    this._resources.set(combined);\n  }\n}\n","/**\n * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n * under one or more contributor license agreements. See the NOTICE file\n * distributed with this work for additional information regarding copyright\n * ownership.\n *\n * Camunda licenses this file to you under the MIT; you may not use this file\n * except in compliance with the MIT License.\n */\n\nexport class Resources {\n  static $inject = [ 'config.resources' ];\n\n  constructor(resources) {\n    this._resources = resources || [];\n  }\n\n  set(resources) {\n    this._resources = resources;\n  }\n\n  getAll() {\n    return this._resources;\n  }\n\n  filter(fn) {\n    return this._resources.filter(fn);\n  }\n}\n"],"names":["CleanUpAdHocSubProcessBehavior","CommandInterceptor","constructor","eventBus","modeling","super","this","postExecute","context","element","moddleElement","businessObject","is","getTaskDefinition","updateModdleProperties","cancelRemainingInstances","undefined","completionCondition","adHoc","getAdHoc","activeElementsCollection","taskHeaders","getTaskHeaders","values","get","$inject","CleanUpBusinessRuleTaskBehavior","commandStack","preExecute","properties","calledDecision","getCalledDecision","taskDefinition","find","value","CleanUpEndEventBehavior","postExecuted","event","newShape","eventDefinitions","definition","getErrorEventDefinition","ioMapping","extensionElements","getIoMapping","DISALLOWED_START_LISTENER_TYPES","CleanUpExecutionListenersBehavior","executionListenersContainer","getExecutionListenersContainer","listeners","newListeners","filter","listener","eventType","withoutDisallowedStartListeners","getEventDefinitions","isCompensationEvent","isErrorEvent","shouldRemoveEndListeners","withoutDisallowedEndListeners","withoutDisallowedListeners","length","$parent","CleanUpMessageRefBehavior","messageEventDefinition","messageRef","bo","updateProperties","CleanUpTaskListenersBehavior","updateListeners","taskListenersContainer","getTaskListenersContainer","hasZeebeTaskExtensionElement","CleanUpSubscriptionBehavior","shape","labelTarget","eventDefinition","message","subscription","getSubscription","$descriptor","every","property","name","hasNoProperties","TIMER_PROPERTIES","isInterrupting","hasParentEventSubProcess","parent","CleanUpTimerExpressionBehavior","_modeling","cleanUpTimerProperties","timerEventDefinition","getTimerEventDefinition","propertiesUpdate","reduce","acc","type","isTimerExpressionTypeSupported","Object","keys","zeebeServiceTaskProperties","ZeebeModdleExtension","on","propertyName","canCopyProperty","descriptor","$type","$model","getTypeDescriptor","allowedIn","meta","indexOf","isWildcard","getParent","isAllowedInParent","canHostServiceTaskLikeProperties","canHostTimerExpression","some","propertyType","isAllowedInZeebeServiceTask","serviceTaskLike","includes","elementType","factory","create","CreateZeebeCallActivityBehavior","bpmnFactory","calledElement","calledElements","getCalledElements","getCalledElement","propagateAllChildVariables","CreateZeebeUserTaskBehavior","explicitlyDisabled","hints","createElementsBehavior","userTaskElement","getZeebeUserTask","ids","FORM_KEY_PREFIX","getFormDefinition","getUserTaskForm","options","formKey","rootElement","getRootElement","formDefinition","userTaskForm","userTaskFormIdToFormKey","userTaskFormId","isUserTaskFormKey","startsWith","FormsBehavior","elementRegistry","removeUserTaskForm","oldParent","oldFormDefinition","oldUserTaskForm","replace","nextPrefixed","id","body","externalReference","formId","bindingType","oldProperties","isExtensionElementRemoved","_registerZeebeUserTaskSupport","hasZeebeUserTask","userTask","RemoveAssignmentDefinitionBehavior","assignmentDefinition","RemoveTaskScheduleBehavior","taskSchedule","CallActivityVariablesPropagationBehavior","outputParameters","VersionTagBehavior","versionTag","__init__","callActivityVariablesPropagationBehavior","cleanUpAdHocSubProcessBehavior","cleanUpBusinessRuleTaskBehavior","cleanUpEndEventBehavior","cleanUpExecutionListenersBehavior","cleanUpMessageRefBehavior","cleanUpTaskListenersBehavior","cleanUpSubscriptionBehavior","cleanUpTimerExpressionBehavior","copyPasteBehavior","createZeebeCallActivityBehavior","createZeebeUserTaskBehavior","deleteParticipantBehaviour","DeleteParticipantBehaviour","formsBehavior","removeAssignmentDefinitionBehavior","removeTaskScheduleBehavior","versionTagBehavior","EXAMPLE_JSON_PROPERTY_NAME","getExampleJson","getZeebeProperty","allProperties","elements","extensionValues","e","getExtensionElements","p","ExampleJsonProvider","VariableProvider","getVariables","data","parsedData","toInternalFormat","JSON","parse","getVariablesFromString","map","key","newElement","info","stringify","Array","isArray","isList","entries","string","charAt","toUpperCase","slice","getType","exampleProvider","nativeToString","prototype","toString","hasOwnProperty","props","debounce","useService","translate","moddle","injector","TextAreaEntry","label","description","getValue","setValue","commands","createZeebePropertiesCmds","zeebeProperties","ensureZeebeProperties","push","existingData","cmd","withoutOutData","createOutData","execute","validate","obj","call","monospace","v","DataPropertiesProvider","propertiesPanel","_injector","registerProvider","getGroups","elementTemplates","template","shouldHide","groups","group","component","isEdited","isTextAreaEntryEdited","Group","__depends__","dataPropertiesProvider","FormVariableProvider","rest","_eventBus","formSchema","fire","variables","inputs","outputs","err","static","formExtractor","getLocalForm","process","getProcess","form","index","formVariableProvider","ElementTemplateChooser","config","popupMenu","_elementTemplates","_translate","_popupMenu","elementTemplateChooser","open","then","applyTemplate","catch","console","error","ElementTemplateChooserEntryProvider","register","Promise","resolve","reject","handleClosed","once","off","x","y","title","search","width","getPopupMenuEntries","getTemplateEntries","_getMatchingTemplates","icon","category","keywords","documentationRef","imageUrl","contents","action","getLatest","isTemplateApplied","elementTemplateChooserEntryProvider","CSS_PROPERTIES","setAttribute","node","hyphenated","toLowerCase","String","style","setAttributeNS","attr","getAttributeNS","getAttribute","attrs","i","names","setAttributes","ClassList","el","nodeType","Error","list","classList","add","remove","removeMatching","re","arr","array","test","toggle","force","from","has","contains","ns","SVG_START","trim","svg","unwrap","substring","parsed","parser","DOMParser","async","parseFromString","parseDocument","fragment","document","createDocumentFragment","firstChild","appendChild","importNode","createElementNS","ElementTemplateIconRenderer","bpmnRenderer","_bpmnRenderer","_iconProperty","iconProperty","BaseRenderer","canRender","_getIcon","getModelerTemplateIcon","drawShape","parentGfx","gfx","renderer","handlers","t","renderIcon","padding","height","img","href","target","ownerDocument","ensureImported","appendTo","commonModules","elementTemplateIconRenderer","commonModdleExtensions","zeebe","ANNOTATIONS_KEYED","annotationsKeyed","annotation","entry","CamundaDetailsPopupMenuProvider","_element","existingEntries","_annotateEntry","camundaDetailsPopupMenuProvider","resource","processId","createCalledElement","createCallActivity","searchTerms","join","BaseCreateMenuProvider","_elementFactory","_bpmnFactory","_create","_autoPlace","_mouse","_resources","_config","resourceType","groupName","createElement","additionalConfig","resources","r","forEach","_createEntryAction","getTarget","mouse","elementFactory","close","createShape","KeyboardEvent","getLastMoveEvent","start","BaseAppendMenuProvider","_rules","_register","allowed","targetFactory","autoPlace","click","append","dragstart","source","replaceElement","bpmnReplace","command","replacedElement","BaseReplaceMenuProvider","rules","ProcessHandlerModule","className","decisionId","createCalledDecision","createDecisionTask","DecisionHandlerModule","createFormDefinition","createZeebeUserTask","createFormTask","FormHandlerModule","RPA_TEMPLATE_ID","RPA_MAIN_SCRIPT_LINK_NAME","RPA_ICON","templates","RPATask","linkName","set","scriptId","createRPATask","mainScript","resourceId","RPAHandlerModule","ComposedCommandHandler","_commandStack","HANDLERS","CommandInitializer","handler","registerHandler","DefaultHandlersModule","moddleExtensions","tooltip","ZeebeTooltipProvider","getFeelPopupLinks","_addElementTemplateChooserModule","_modules","_camundaCloudModules","_providers","reload","resourceProvider","combined","provider","concat","getResources","getAll","fn"],"sourceRoot":""}